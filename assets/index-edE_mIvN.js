var vHe=Object.defineProperty;var _He=(e,t,n)=>t in e?vHe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var bHe=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Ru=(e,t,n)=>(_He(e,typeof t!="symbol"?t+"":t,n),n);var Fbn=bHe((Xwn,Tne)=>{function wHe(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var nu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function pl(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function EHe(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var V_e={exports:{}},yM={},H_e={exports:{}},Rn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TC=Symbol.for("react.element"),xHe=Symbol.for("react.portal"),SHe=Symbol.for("react.fragment"),THe=Symbol.for("react.strict_mode"),AHe=Symbol.for("react.profiler"),CHe=Symbol.for("react.provider"),IHe=Symbol.for("react.context"),OHe=Symbol.for("react.forward_ref"),PHe=Symbol.for("react.suspense"),kHe=Symbol.for("react.memo"),$He=Symbol.for("react.lazy"),aie=Symbol.iterator;function RHe(e){return e===null||typeof e!="object"?null:(e=aie&&e[aie]||e["@@iterator"],typeof e=="function"?e:null)}var q_e={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},W_e=Object.assign,G_e={};function gE(e,t,n){this.props=e,this.context=t,this.refs=G_e,this.updater=n||q_e}gE.prototype.isReactComponent={};gE.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};gE.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Y_e(){}Y_e.prototype=gE.prototype;function vW(e,t,n){this.props=e,this.context=t,this.refs=G_e,this.updater=n||q_e}var _W=vW.prototype=new Y_e;_W.constructor=vW;W_e(_W,gE.prototype);_W.isPureReactComponent=!0;var uie=Array.isArray,K_e=Object.prototype.hasOwnProperty,bW={current:null},X_e={key:!0,ref:!0,__self:!0,__source:!0};function Q_e(e,t,n){var r,i={},s=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)K_e.call(t,r)&&!X_e.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var u=Array(a),l=0;l<a;l++)u[l]=arguments[l+2];i.children=u}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:TC,type:e,key:s,ref:o,props:i,_owner:bW.current}}function NHe(e,t){return{$$typeof:TC,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function wW(e){return typeof e=="object"&&e!==null&&e.$$typeof===TC}function DHe(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var lie=/\/+/g;function g8(e,t){return typeof e=="object"&&e!==null&&e.key!=null?DHe(""+e.key):t.toString(36)}function Tk(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case TC:case xHe:o=!0}}if(o)return o=e,i=i(o),e=r===""?"."+g8(o,0):r,uie(i)?(n="",e!=null&&(n=e.replace(lie,"$&/")+"/"),Tk(i,t,n,"",function(l){return l})):i!=null&&(wW(i)&&(i=NHe(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(lie,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=r===""?".":r+":",uie(e))for(var a=0;a<e.length;a++){s=e[a];var u=r+g8(s,a);o+=Tk(s,t,n,u,i)}else if(u=RHe(e),typeof u=="function")for(e=u.call(e),a=0;!(s=e.next()).done;)s=s.value,u=r+g8(s,a++),o+=Tk(s,t,n,u,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function EO(e,t,n){if(e==null)return e;var r=[],i=0;return Tk(e,r,"","",function(s){return t.call(n,s,i++)}),r}function LHe(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var $a={current:null},Ak={transition:null},MHe={ReactCurrentDispatcher:$a,ReactCurrentBatchConfig:Ak,ReactCurrentOwner:bW};Rn.Children={map:EO,forEach:function(e,t,n){EO(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return EO(e,function(){t++}),t},toArray:function(e){return EO(e,function(t){return t})||[]},only:function(e){if(!wW(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Rn.Component=gE;Rn.Fragment=SHe;Rn.Profiler=AHe;Rn.PureComponent=vW;Rn.StrictMode=THe;Rn.Suspense=PHe;Rn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=MHe;Rn.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=W_e({},e.props),i=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=bW.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(u in t)K_e.call(t,u)&&!X_e.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&a!==void 0?a[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var l=0;l<u;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:TC,type:e.type,key:i,ref:s,props:r,_owner:o}};Rn.createContext=function(e){return e={$$typeof:IHe,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:CHe,_context:e},e.Consumer=e};Rn.createElement=Q_e;Rn.createFactory=function(e){var t=Q_e.bind(null,e);return t.type=e,t};Rn.createRef=function(){return{current:null}};Rn.forwardRef=function(e){return{$$typeof:OHe,render:e}};Rn.isValidElement=wW;Rn.lazy=function(e){return{$$typeof:$He,_payload:{_status:-1,_result:e},_init:LHe}};Rn.memo=function(e,t){return{$$typeof:kHe,type:e,compare:t===void 0?null:t}};Rn.startTransition=function(e){var t=Ak.transition;Ak.transition={};try{e()}finally{Ak.transition=t}};Rn.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Rn.useCallback=function(e,t){return $a.current.useCallback(e,t)};Rn.useContext=function(e){return $a.current.useContext(e)};Rn.useDebugValue=function(){};Rn.useDeferredValue=function(e){return $a.current.useDeferredValue(e)};Rn.useEffect=function(e,t){return $a.current.useEffect(e,t)};Rn.useId=function(){return $a.current.useId()};Rn.useImperativeHandle=function(e,t,n){return $a.current.useImperativeHandle(e,t,n)};Rn.useInsertionEffect=function(e,t){return $a.current.useInsertionEffect(e,t)};Rn.useLayoutEffect=function(e,t){return $a.current.useLayoutEffect(e,t)};Rn.useMemo=function(e,t){return $a.current.useMemo(e,t)};Rn.useReducer=function(e,t,n){return $a.current.useReducer(e,t,n)};Rn.useRef=function(e){return $a.current.useRef(e)};Rn.useState=function(e){return $a.current.useState(e)};Rn.useSyncExternalStore=function(e,t,n){return $a.current.useSyncExternalStore(e,t,n)};Rn.useTransition=function(){return $a.current.useTransition()};Rn.version="18.2.0";H_e.exports=Rn;var A=H_e.exports;const L=pl(A),S1=wHe({__proto__:null,default:L},[A]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FHe=A,BHe=Symbol.for("react.element"),jHe=Symbol.for("react.fragment"),zHe=Object.prototype.hasOwnProperty,UHe=FHe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,VHe={key:!0,ref:!0,__self:!0,__source:!0};function J_e(e,t,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)zHe.call(t,r)&&!VHe.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:BHe,type:e,key:s,ref:o,props:i,_owner:UHe.current}}yM.Fragment=jHe;yM.jsx=J_e;yM.jsxs=J_e;V_e.exports=yM;var R=V_e.exports,P7={},Z_e={exports:{}},ml={},ebe={exports:{}},tbe={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(j,G){var U=j.length;j.push(G);e:for(;0<U;){var P=U-1>>>1,k=j[P];if(0<i(k,G))j[P]=G,j[U]=k,U=P;else break e}}function n(j){return j.length===0?null:j[0]}function r(j){if(j.length===0)return null;var G=j[0],U=j.pop();if(U!==G){j[0]=U;e:for(var P=0,k=j.length,H=k>>>1;P<H;){var M=2*(P+1)-1,F=j[M],J=M+1,se=j[J];if(0>i(F,U))J<k&&0>i(se,F)?(j[P]=se,j[J]=U,P=J):(j[P]=F,j[M]=U,P=M);else if(J<k&&0>i(se,U))j[P]=se,j[J]=U,P=J;else break e}}return G}function i(j,G){var U=j.sortIndex-G.sortIndex;return U!==0?U:j.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var u=[],l=[],c=1,f=null,d=3,h=!1,p=!1,m=!1,g=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(j){for(var G=n(l);G!==null;){if(G.callback===null)r(l);else if(G.startTime<=j)r(l),G.sortIndex=G.expirationTime,t(u,G);else break;G=n(l)}}function b(j){if(m=!1,_(j),!p)if(n(u)!==null)p=!0,B(E);else{var G=n(l);G!==null&&V(b,G.startTime-j)}}function E(j,G){p=!1,m&&(m=!1,y(S),S=-1),h=!0;var U=d;try{for(_(G),f=n(u);f!==null&&(!(f.expirationTime>G)||j&&!O());){var P=f.callback;if(typeof P=="function"){f.callback=null,d=f.priorityLevel;var k=P(f.expirationTime<=G);G=e.unstable_now(),typeof k=="function"?f.callback=k:f===n(u)&&r(u),_(G)}else r(u);f=n(u)}if(f!==null)var H=!0;else{var M=n(l);M!==null&&V(b,M.startTime-G),H=!1}return H}finally{f=null,d=U,h=!1}}var w=!1,x=null,S=-1,I=5,C=-1;function O(){return!(e.unstable_now()-C<I)}function z(){if(x!==null){var j=e.unstable_now();C=j;var G=!0;try{G=x(!0,j)}finally{G?N():(w=!1,x=null)}}else w=!1}var N;if(typeof v=="function")N=function(){v(z)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,D=$.port2;$.port1.onmessage=z,N=function(){D.postMessage(null)}}else N=function(){g(z,0)};function B(j){x=j,w||(w=!0,N())}function V(j,G){S=g(function(){j(e.unstable_now())},G)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(j){j.callback=null},e.unstable_continueExecution=function(){p||h||(p=!0,B(E))},e.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<j?Math.floor(1e3/j):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(j){switch(d){case 1:case 2:case 3:var G=3;break;default:G=d}var U=d;d=G;try{return j()}finally{d=U}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(j,G){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var U=d;d=j;try{return G()}finally{d=U}},e.unstable_scheduleCallback=function(j,G,U){var P=e.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?P+U:P):U=P,j){case 1:var k=-1;break;case 2:k=250;break;case 5:k=1073741823;break;case 4:k=1e4;break;default:k=5e3}return k=U+k,j={id:c++,callback:G,priorityLevel:j,startTime:U,expirationTime:k,sortIndex:-1},U>P?(j.sortIndex=U,t(l,j),n(u)===null&&j===n(l)&&(m?(y(S),S=-1):m=!0,V(b,U-P))):(j.sortIndex=k,t(u,j),p||h||(p=!0,B(E))),j},e.unstable_shouldYield=O,e.unstable_wrapCallback=function(j){var G=d;return function(){var U=d;d=G;try{return j.apply(this,arguments)}finally{d=U}}}})(tbe);ebe.exports=tbe;var HHe=ebe.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nbe=A,rl=HHe;function qe(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var rbe=new Set,P2={};function mv(e,t){Zb(e,t),Zb(e+"Capture",t)}function Zb(e,t){for(P2[e]=t,e=0;e<t.length;e++)rbe.add(t[e])}var vp=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),k7=Object.prototype.hasOwnProperty,qHe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,cie={},fie={};function WHe(e){return k7.call(fie,e)?!0:k7.call(cie,e)?!1:qHe.test(e)?fie[e]=!0:(cie[e]=!0,!1)}function GHe(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function YHe(e,t,n,r){if(t===null||typeof t>"u"||GHe(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ra(e,t,n,r,i,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var bo={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){bo[e]=new Ra(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];bo[t]=new Ra(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){bo[e]=new Ra(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){bo[e]=new Ra(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){bo[e]=new Ra(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){bo[e]=new Ra(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){bo[e]=new Ra(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){bo[e]=new Ra(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){bo[e]=new Ra(e,5,!1,e.toLowerCase(),null,!1,!1)});var EW=/[\-:]([a-z])/g;function xW(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(EW,xW);bo[t]=new Ra(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(EW,xW);bo[t]=new Ra(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(EW,xW);bo[t]=new Ra(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){bo[e]=new Ra(e,1,!1,e.toLowerCase(),null,!1,!1)});bo.xlinkHref=new Ra("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){bo[e]=new Ra(e,1,!1,e.toLowerCase(),null,!0,!0)});function SW(e,t,n,r){var i=bo.hasOwnProperty(t)?bo[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(YHe(t,n,i,r)&&(n=null),r||i===null?WHe(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var qp=nbe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,xO=Symbol.for("react.element"),B_=Symbol.for("react.portal"),j_=Symbol.for("react.fragment"),TW=Symbol.for("react.strict_mode"),$7=Symbol.for("react.profiler"),ibe=Symbol.for("react.provider"),sbe=Symbol.for("react.context"),AW=Symbol.for("react.forward_ref"),R7=Symbol.for("react.suspense"),N7=Symbol.for("react.suspense_list"),CW=Symbol.for("react.memo"),Tm=Symbol.for("react.lazy"),obe=Symbol.for("react.offscreen"),die=Symbol.iterator;function kx(e){return e===null||typeof e!="object"?null:(e=die&&e[die]||e["@@iterator"],typeof e=="function"?e:null)}var bi=Object.assign,y8;function LS(e){if(y8===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);y8=t&&t[1]||""}return`
`+y8+e}var v8=!1;function _8(e,t){if(!e||v8)return"";v8=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var u=`
`+i[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=o&&0<=a);break}}}finally{v8=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?LS(e):""}function KHe(e){switch(e.tag){case 5:return LS(e.type);case 16:return LS("Lazy");case 13:return LS("Suspense");case 19:return LS("SuspenseList");case 0:case 2:case 15:return e=_8(e.type,!1),e;case 11:return e=_8(e.type.render,!1),e;case 1:return e=_8(e.type,!0),e;default:return""}}function D7(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case j_:return"Fragment";case B_:return"Portal";case $7:return"Profiler";case TW:return"StrictMode";case R7:return"Suspense";case N7:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case sbe:return(e.displayName||"Context")+".Consumer";case ibe:return(e._context.displayName||"Context")+".Provider";case AW:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case CW:return t=e.displayName||null,t!==null?t:D7(e.type)||"Memo";case Tm:t=e._payload,e=e._init;try{return D7(e(t))}catch{}}return null}function XHe(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return D7(t);case 8:return t===TW?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Dg(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function abe(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function QHe(e){var t=abe(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function SO(e){e._valueTracker||(e._valueTracker=QHe(e))}function ube(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=abe(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function G$(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function L7(e,t){var n=t.checked;return bi({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function hie(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Dg(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function lbe(e,t){t=t.checked,t!=null&&SW(e,"checked",t,!1)}function M7(e,t){lbe(e,t);var n=Dg(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?F7(e,t.type,n):t.hasOwnProperty("defaultValue")&&F7(e,t.type,Dg(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function pie(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function F7(e,t,n){(t!=="number"||G$(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var MS=Array.isArray;function pb(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Dg(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function B7(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(qe(91));return bi({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function mie(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(qe(92));if(MS(n)){if(1<n.length)throw Error(qe(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Dg(n)}}function cbe(e,t){var n=Dg(t.value),r=Dg(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function gie(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function fbe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function j7(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?fbe(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var TO,dbe=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(TO=TO||document.createElement("div"),TO.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=TO.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function k2(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var CT={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},JHe=["Webkit","ms","Moz","O"];Object.keys(CT).forEach(function(e){JHe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),CT[t]=CT[e]})});function hbe(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||CT.hasOwnProperty(e)&&CT[e]?(""+t).trim():t+"px"}function pbe(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=hbe(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var ZHe=bi({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function z7(e,t){if(t){if(ZHe[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(qe(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(qe(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(qe(61))}if(t.style!=null&&typeof t.style!="object")throw Error(qe(62))}}function U7(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var V7=null;function IW(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var H7=null,mb=null,gb=null;function yie(e){if(e=IC(e)){if(typeof H7!="function")throw Error(qe(280));var t=e.stateNode;t&&(t=EM(t),H7(e.stateNode,e.type,t))}}function mbe(e){mb?gb?gb.push(e):gb=[e]:mb=e}function gbe(){if(mb){var e=mb,t=gb;if(gb=mb=null,yie(e),t)for(e=0;e<t.length;e++)yie(t[e])}}function ybe(e,t){return e(t)}function vbe(){}var b8=!1;function _be(e,t,n){if(b8)return e(t,n);b8=!0;try{return ybe(e,t,n)}finally{b8=!1,(mb!==null||gb!==null)&&(vbe(),gbe())}}function $2(e,t){var n=e.stateNode;if(n===null)return null;var r=EM(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(qe(231,t,typeof n));return n}var q7=!1;if(vp)try{var $x={};Object.defineProperty($x,"passive",{get:function(){q7=!0}}),window.addEventListener("test",$x,$x),window.removeEventListener("test",$x,$x)}catch{q7=!1}function eqe(e,t,n,r,i,s,o,a,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(c){this.onError(c)}}var IT=!1,Y$=null,K$=!1,W7=null,tqe={onError:function(e){IT=!0,Y$=e}};function nqe(e,t,n,r,i,s,o,a,u){IT=!1,Y$=null,eqe.apply(tqe,arguments)}function rqe(e,t,n,r,i,s,o,a,u){if(nqe.apply(this,arguments),IT){if(IT){var l=Y$;IT=!1,Y$=null}else throw Error(qe(198));K$||(K$=!0,W7=l)}}function gv(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function bbe(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function vie(e){if(gv(e)!==e)throw Error(qe(188))}function iqe(e){var t=e.alternate;if(!t){if(t=gv(e),t===null)throw Error(qe(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return vie(i),e;if(s===r)return vie(i),t;s=s.sibling}throw Error(qe(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(qe(189))}}if(n.alternate!==r)throw Error(qe(190))}if(n.tag!==3)throw Error(qe(188));return n.stateNode.current===n?e:t}function wbe(e){return e=iqe(e),e!==null?Ebe(e):null}function Ebe(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Ebe(e);if(t!==null)return t;e=e.sibling}return null}var xbe=rl.unstable_scheduleCallback,_ie=rl.unstable_cancelCallback,sqe=rl.unstable_shouldYield,oqe=rl.unstable_requestPaint,Ui=rl.unstable_now,aqe=rl.unstable_getCurrentPriorityLevel,OW=rl.unstable_ImmediatePriority,Sbe=rl.unstable_UserBlockingPriority,X$=rl.unstable_NormalPriority,uqe=rl.unstable_LowPriority,Tbe=rl.unstable_IdlePriority,vM=null,_d=null;function lqe(e){if(_d&&typeof _d.onCommitFiberRoot=="function")try{_d.onCommitFiberRoot(vM,e,void 0,(e.current.flags&128)===128)}catch{}}var Jc=Math.clz32?Math.clz32:dqe,cqe=Math.log,fqe=Math.LN2;function dqe(e){return e>>>=0,e===0?32:31-(cqe(e)/fqe|0)|0}var AO=64,CO=4194304;function FS(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Q$(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=FS(a):(s&=o,s!==0&&(r=FS(s)))}else o=n&~i,o!==0?r=FS(o):s!==0&&(r=FS(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Jc(t),i=1<<n,r|=e[n],t&=~i;return r}function hqe(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pqe(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-Jc(s),a=1<<o,u=i[o];u===-1?(!(a&n)||a&r)&&(i[o]=hqe(a,t)):u<=t&&(e.expiredLanes|=a),s&=~a}}function G7(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Abe(){var e=AO;return AO<<=1,!(AO&4194240)&&(AO=64),e}function w8(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function AC(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Jc(t),e[t]=n}function mqe(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Jc(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function PW(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Jc(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var br=0;function Cbe(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Ibe,kW,Obe,Pbe,kbe,Y7=!1,IO=[],ug=null,lg=null,cg=null,R2=new Map,N2=new Map,Dm=[],gqe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function bie(e,t){switch(e){case"focusin":case"focusout":ug=null;break;case"dragenter":case"dragleave":lg=null;break;case"mouseover":case"mouseout":cg=null;break;case"pointerover":case"pointerout":R2.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":N2.delete(t.pointerId)}}function Rx(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=IC(t),t!==null&&kW(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function yqe(e,t,n,r,i){switch(t){case"focusin":return ug=Rx(ug,e,t,n,r,i),!0;case"dragenter":return lg=Rx(lg,e,t,n,r,i),!0;case"mouseover":return cg=Rx(cg,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return R2.set(s,Rx(R2.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,N2.set(s,Rx(N2.get(s)||null,e,t,n,r,i)),!0}return!1}function $be(e){var t=My(e.target);if(t!==null){var n=gv(t);if(n!==null){if(t=n.tag,t===13){if(t=bbe(n),t!==null){e.blockedOn=t,kbe(e.priority,function(){Obe(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ck(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=K7(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);V7=r,n.target.dispatchEvent(r),V7=null}else return t=IC(n),t!==null&&kW(t),e.blockedOn=n,!1;t.shift()}return!0}function wie(e,t,n){Ck(e)&&n.delete(t)}function vqe(){Y7=!1,ug!==null&&Ck(ug)&&(ug=null),lg!==null&&Ck(lg)&&(lg=null),cg!==null&&Ck(cg)&&(cg=null),R2.forEach(wie),N2.forEach(wie)}function Nx(e,t){e.blockedOn===t&&(e.blockedOn=null,Y7||(Y7=!0,rl.unstable_scheduleCallback(rl.unstable_NormalPriority,vqe)))}function D2(e){function t(i){return Nx(i,e)}if(0<IO.length){Nx(IO[0],e);for(var n=1;n<IO.length;n++){var r=IO[n];r.blockedOn===e&&(r.blockedOn=null)}}for(ug!==null&&Nx(ug,e),lg!==null&&Nx(lg,e),cg!==null&&Nx(cg,e),R2.forEach(t),N2.forEach(t),n=0;n<Dm.length;n++)r=Dm[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Dm.length&&(n=Dm[0],n.blockedOn===null);)$be(n),n.blockedOn===null&&Dm.shift()}var yb=qp.ReactCurrentBatchConfig,J$=!0;function _qe(e,t,n,r){var i=br,s=yb.transition;yb.transition=null;try{br=1,$W(e,t,n,r)}finally{br=i,yb.transition=s}}function bqe(e,t,n,r){var i=br,s=yb.transition;yb.transition=null;try{br=4,$W(e,t,n,r)}finally{br=i,yb.transition=s}}function $W(e,t,n,r){if(J$){var i=K7(e,t,n,r);if(i===null)k8(e,t,r,Z$,n),bie(e,r);else if(yqe(i,e,t,n,r))r.stopPropagation();else if(bie(e,r),t&4&&-1<gqe.indexOf(e)){for(;i!==null;){var s=IC(i);if(s!==null&&Ibe(s),s=K7(e,t,n,r),s===null&&k8(e,t,r,Z$,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else k8(e,t,r,null,n)}}var Z$=null;function K7(e,t,n,r){if(Z$=null,e=IW(r),e=My(e),e!==null)if(t=gv(e),t===null)e=null;else if(n=t.tag,n===13){if(e=bbe(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Z$=e,null}function Rbe(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(aqe()){case OW:return 1;case Sbe:return 4;case X$:case uqe:return 16;case Tbe:return 536870912;default:return 16}default:return 16}}var qm=null,RW=null,Ik=null;function Nbe(){if(Ik)return Ik;var e,t=RW,n=t.length,r,i="value"in qm?qm.value:qm.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[s-r];r++);return Ik=i.slice(e,1<r?1-r:void 0)}function Ok(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function OO(){return!0}function Eie(){return!1}function gl(e){function t(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?OO:Eie,this.isPropagationStopped=Eie,this}return bi(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=OO)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=OO)},persist:function(){},isPersistent:OO}),t}var yE={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},NW=gl(yE),CC=bi({},yE,{view:0,detail:0}),wqe=gl(CC),E8,x8,Dx,_M=bi({},CC,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:DW,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Dx&&(Dx&&e.type==="mousemove"?(E8=e.screenX-Dx.screenX,x8=e.screenY-Dx.screenY):x8=E8=0,Dx=e),E8)},movementY:function(e){return"movementY"in e?e.movementY:x8}}),xie=gl(_M),Eqe=bi({},_M,{dataTransfer:0}),xqe=gl(Eqe),Sqe=bi({},CC,{relatedTarget:0}),S8=gl(Sqe),Tqe=bi({},yE,{animationName:0,elapsedTime:0,pseudoElement:0}),Aqe=gl(Tqe),Cqe=bi({},yE,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Iqe=gl(Cqe),Oqe=bi({},yE,{data:0}),Sie=gl(Oqe),Pqe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kqe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$qe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Rqe(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=$qe[e])?!!t[e]:!1}function DW(){return Rqe}var Nqe=bi({},CC,{key:function(e){if(e.key){var t=Pqe[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ok(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?kqe[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:DW,charCode:function(e){return e.type==="keypress"?Ok(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ok(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Dqe=gl(Nqe),Lqe=bi({},_M,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Tie=gl(Lqe),Mqe=bi({},CC,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:DW}),Fqe=gl(Mqe),Bqe=bi({},yE,{propertyName:0,elapsedTime:0,pseudoElement:0}),jqe=gl(Bqe),zqe=bi({},_M,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Uqe=gl(zqe),Vqe=[9,13,27,32],LW=vp&&"CompositionEvent"in window,OT=null;vp&&"documentMode"in document&&(OT=document.documentMode);var Hqe=vp&&"TextEvent"in window&&!OT,Dbe=vp&&(!LW||OT&&8<OT&&11>=OT),Aie=" ",Cie=!1;function Lbe(e,t){switch(e){case"keyup":return Vqe.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Mbe(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var z_=!1;function qqe(e,t){switch(e){case"compositionend":return Mbe(t);case"keypress":return t.which!==32?null:(Cie=!0,Aie);case"textInput":return e=t.data,e===Aie&&Cie?null:e;default:return null}}function Wqe(e,t){if(z_)return e==="compositionend"||!LW&&Lbe(e,t)?(e=Nbe(),Ik=RW=qm=null,z_=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Dbe&&t.locale!=="ko"?null:t.data;default:return null}}var Gqe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Iie(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Gqe[e.type]:t==="textarea"}function Fbe(e,t,n,r){mbe(r),t=eR(t,"onChange"),0<t.length&&(n=new NW("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var PT=null,L2=null;function Yqe(e){Kbe(e,0)}function bM(e){var t=H_(e);if(ube(t))return e}function Kqe(e,t){if(e==="change")return t}var Bbe=!1;if(vp){var T8;if(vp){var A8="oninput"in document;if(!A8){var Oie=document.createElement("div");Oie.setAttribute("oninput","return;"),A8=typeof Oie.oninput=="function"}T8=A8}else T8=!1;Bbe=T8&&(!document.documentMode||9<document.documentMode)}function Pie(){PT&&(PT.detachEvent("onpropertychange",jbe),L2=PT=null)}function jbe(e){if(e.propertyName==="value"&&bM(L2)){var t=[];Fbe(t,L2,e,IW(e)),_be(Yqe,t)}}function Xqe(e,t,n){e==="focusin"?(Pie(),PT=t,L2=n,PT.attachEvent("onpropertychange",jbe)):e==="focusout"&&Pie()}function Qqe(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return bM(L2)}function Jqe(e,t){if(e==="click")return bM(t)}function Zqe(e,t){if(e==="input"||e==="change")return bM(t)}function eWe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var af=typeof Object.is=="function"?Object.is:eWe;function M2(e,t){if(af(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!k7.call(t,i)||!af(e[i],t[i]))return!1}return!0}function kie(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function $ie(e,t){var n=kie(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=kie(n)}}function zbe(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?zbe(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Ube(){for(var e=window,t=G$();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=G$(e.document)}return t}function MW(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function tWe(e){var t=Ube(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&zbe(n.ownerDocument.documentElement,n)){if(r!==null&&MW(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=$ie(n,s);var o=$ie(n,r);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var nWe=vp&&"documentMode"in document&&11>=document.documentMode,U_=null,X7=null,kT=null,Q7=!1;function Rie(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Q7||U_==null||U_!==G$(r)||(r=U_,"selectionStart"in r&&MW(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),kT&&M2(kT,r)||(kT=r,r=eR(X7,"onSelect"),0<r.length&&(t=new NW("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=U_)))}function PO(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var V_={animationend:PO("Animation","AnimationEnd"),animationiteration:PO("Animation","AnimationIteration"),animationstart:PO("Animation","AnimationStart"),transitionend:PO("Transition","TransitionEnd")},C8={},Vbe={};vp&&(Vbe=document.createElement("div").style,"AnimationEvent"in window||(delete V_.animationend.animation,delete V_.animationiteration.animation,delete V_.animationstart.animation),"TransitionEvent"in window||delete V_.transitionend.transition);function wM(e){if(C8[e])return C8[e];if(!V_[e])return e;var t=V_[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Vbe)return C8[e]=t[n];return e}var Hbe=wM("animationend"),qbe=wM("animationiteration"),Wbe=wM("animationstart"),Gbe=wM("transitionend"),Ybe=new Map,Nie="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function b0(e,t){Ybe.set(e,t),mv(t,[e])}for(var I8=0;I8<Nie.length;I8++){var O8=Nie[I8],rWe=O8.toLowerCase(),iWe=O8[0].toUpperCase()+O8.slice(1);b0(rWe,"on"+iWe)}b0(Hbe,"onAnimationEnd");b0(qbe,"onAnimationIteration");b0(Wbe,"onAnimationStart");b0("dblclick","onDoubleClick");b0("focusin","onFocus");b0("focusout","onBlur");b0(Gbe,"onTransitionEnd");Zb("onMouseEnter",["mouseout","mouseover"]);Zb("onMouseLeave",["mouseout","mouseover"]);Zb("onPointerEnter",["pointerout","pointerover"]);Zb("onPointerLeave",["pointerout","pointerover"]);mv("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));mv("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));mv("onBeforeInput",["compositionend","keypress","textInput","paste"]);mv("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));mv("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));mv("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var BS="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sWe=new Set("cancel close invalid load scroll toggle".split(" ").concat(BS));function Die(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,rqe(r,t,void 0,e),e.currentTarget=null}function Kbe(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,l=a.currentTarget;if(a=a.listener,u!==s&&i.isPropagationStopped())break e;Die(i,a,l),s=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,l=a.currentTarget,a=a.listener,u!==s&&i.isPropagationStopped())break e;Die(i,a,l),s=u}}}if(K$)throw e=W7,K$=!1,W7=null,e}function Wr(e,t){var n=t[nz];n===void 0&&(n=t[nz]=new Set);var r=e+"__bubble";n.has(r)||(Xbe(t,e,2,!1),n.add(r))}function P8(e,t,n){var r=0;t&&(r|=4),Xbe(n,e,r,t)}var kO="_reactListening"+Math.random().toString(36).slice(2);function F2(e){if(!e[kO]){e[kO]=!0,rbe.forEach(function(n){n!=="selectionchange"&&(sWe.has(n)||P8(n,!1,e),P8(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[kO]||(t[kO]=!0,P8("selectionchange",!1,t))}}function Xbe(e,t,n,r){switch(Rbe(t)){case 1:var i=_qe;break;case 4:i=bqe;break;default:i=$W}n=i.bind(null,t,n,e),i=void 0,!q7||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function k8(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;a!==null;){if(o=My(a),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}a=a.parentNode}}r=r.return}_be(function(){var l=s,c=IW(n),f=[];e:{var d=Ybe.get(e);if(d!==void 0){var h=NW,p=e;switch(e){case"keypress":if(Ok(n)===0)break e;case"keydown":case"keyup":h=Dqe;break;case"focusin":p="focus",h=S8;break;case"focusout":p="blur",h=S8;break;case"beforeblur":case"afterblur":h=S8;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=xie;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=xqe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=Fqe;break;case Hbe:case qbe:case Wbe:h=Aqe;break;case Gbe:h=jqe;break;case"scroll":h=wqe;break;case"wheel":h=Uqe;break;case"copy":case"cut":case"paste":h=Iqe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=Tie}var m=(t&4)!==0,g=!m&&e==="scroll",y=m?d!==null?d+"Capture":null:d;m=[];for(var v=l,_;v!==null;){_=v;var b=_.stateNode;if(_.tag===5&&b!==null&&(_=b,y!==null&&(b=$2(v,y),b!=null&&m.push(B2(v,b,_)))),g)break;v=v.return}0<m.length&&(d=new h(d,p,null,n,c),f.push({event:d,listeners:m}))}}if(!(t&7)){e:{if(d=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",d&&n!==V7&&(p=n.relatedTarget||n.fromElement)&&(My(p)||p[_p]))break e;if((h||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=l,p=p?My(p):null,p!==null&&(g=gv(p),p!==g||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=l),h!==p)){if(m=xie,b="onMouseLeave",y="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(m=Tie,b="onPointerLeave",y="onPointerEnter",v="pointer"),g=h==null?d:H_(h),_=p==null?d:H_(p),d=new m(b,v+"leave",h,n,c),d.target=g,d.relatedTarget=_,b=null,My(c)===l&&(m=new m(y,v+"enter",p,n,c),m.target=_,m.relatedTarget=g,b=m),g=b,h&&p)t:{for(m=h,y=p,v=0,_=m;_;_=n_(_))v++;for(_=0,b=y;b;b=n_(b))_++;for(;0<v-_;)m=n_(m),v--;for(;0<_-v;)y=n_(y),_--;for(;v--;){if(m===y||y!==null&&m===y.alternate)break t;m=n_(m),y=n_(y)}m=null}else m=null;h!==null&&Lie(f,d,h,m,!1),p!==null&&g!==null&&Lie(f,g,p,m,!0)}}e:{if(d=l?H_(l):window,h=d.nodeName&&d.nodeName.toLowerCase(),h==="select"||h==="input"&&d.type==="file")var E=Kqe;else if(Iie(d))if(Bbe)E=Zqe;else{E=Qqe;var w=Xqe}else(h=d.nodeName)&&h.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(E=Jqe);if(E&&(E=E(e,l))){Fbe(f,E,n,c);break e}w&&w(e,d,l),e==="focusout"&&(w=d._wrapperState)&&w.controlled&&d.type==="number"&&F7(d,"number",d.value)}switch(w=l?H_(l):window,e){case"focusin":(Iie(w)||w.contentEditable==="true")&&(U_=w,X7=l,kT=null);break;case"focusout":kT=X7=U_=null;break;case"mousedown":Q7=!0;break;case"contextmenu":case"mouseup":case"dragend":Q7=!1,Rie(f,n,c);break;case"selectionchange":if(nWe)break;case"keydown":case"keyup":Rie(f,n,c)}var x;if(LW)e:{switch(e){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else z_?Lbe(e,n)&&(S="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(Dbe&&n.locale!=="ko"&&(z_||S!=="onCompositionStart"?S==="onCompositionEnd"&&z_&&(x=Nbe()):(qm=c,RW="value"in qm?qm.value:qm.textContent,z_=!0)),w=eR(l,S),0<w.length&&(S=new Sie(S,e,null,n,c),f.push({event:S,listeners:w}),x?S.data=x:(x=Mbe(n),x!==null&&(S.data=x)))),(x=Hqe?qqe(e,n):Wqe(e,n))&&(l=eR(l,"onBeforeInput"),0<l.length&&(c=new Sie("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:l}),c.data=x))}Kbe(f,t)})}function B2(e,t,n){return{instance:e,listener:t,currentTarget:n}}function eR(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=$2(e,n),s!=null&&r.unshift(B2(e,s,i)),s=$2(e,t),s!=null&&r.push(B2(e,s,i))),e=e.return}return r}function n_(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Lie(e,t,n,r,i){for(var s=t._reactName,o=[];n!==null&&n!==r;){var a=n,u=a.alternate,l=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&l!==null&&(a=l,i?(u=$2(n,s),u!=null&&o.unshift(B2(n,u,a))):i||(u=$2(n,s),u!=null&&o.push(B2(n,u,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var oWe=/\r\n?/g,aWe=/\u0000|\uFFFD/g;function Mie(e){return(typeof e=="string"?e:""+e).replace(oWe,`
`).replace(aWe,"")}function $O(e,t,n){if(t=Mie(t),Mie(e)!==t&&n)throw Error(qe(425))}function tR(){}var J7=null,Z7=null;function ez(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var tz=typeof setTimeout=="function"?setTimeout:void 0,uWe=typeof clearTimeout=="function"?clearTimeout:void 0,Fie=typeof Promise=="function"?Promise:void 0,lWe=typeof queueMicrotask=="function"?queueMicrotask:typeof Fie<"u"?function(e){return Fie.resolve(null).then(e).catch(cWe)}:tz;function cWe(e){setTimeout(function(){throw e})}function $8(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),D2(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);D2(t)}function fg(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Bie(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var vE=Math.random().toString(36).slice(2),Zf="__reactFiber$"+vE,j2="__reactProps$"+vE,_p="__reactContainer$"+vE,nz="__reactEvents$"+vE,fWe="__reactListeners$"+vE,dWe="__reactHandles$"+vE;function My(e){var t=e[Zf];if(t)return t;for(var n=e.parentNode;n;){if(t=n[_p]||n[Zf]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Bie(e);e!==null;){if(n=e[Zf])return n;e=Bie(e)}return t}e=n,n=e.parentNode}return null}function IC(e){return e=e[Zf]||e[_p],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function H_(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(qe(33))}function EM(e){return e[j2]||null}var rz=[],q_=-1;function w0(e){return{current:e}}function Zr(e){0>q_||(e.current=rz[q_],rz[q_]=null,q_--)}function Ur(e,t){q_++,rz[q_]=e.current,e.current=t}var Lg={},Zo=w0(Lg),au=w0(!1),T1=Lg;function ew(e,t){var n=e.type.contextTypes;if(!n)return Lg;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function uu(e){return e=e.childContextTypes,e!=null}function nR(){Zr(au),Zr(Zo)}function jie(e,t,n){if(Zo.current!==Lg)throw Error(qe(168));Ur(Zo,t),Ur(au,n)}function Qbe(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(qe(108,XHe(e)||"Unknown",i));return bi({},n,r)}function rR(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Lg,T1=Zo.current,Ur(Zo,e),Ur(au,au.current),!0}function zie(e,t,n){var r=e.stateNode;if(!r)throw Error(qe(169));n?(e=Qbe(e,t,T1),r.__reactInternalMemoizedMergedChildContext=e,Zr(au),Zr(Zo),Ur(Zo,e)):Zr(au),Ur(au,n)}var kh=null,xM=!1,R8=!1;function Jbe(e){kh===null?kh=[e]:kh.push(e)}function hWe(e){xM=!0,Jbe(e)}function E0(){if(!R8&&kh!==null){R8=!0;var e=0,t=br;try{var n=kh;for(br=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}kh=null,xM=!1}catch(i){throw kh!==null&&(kh=kh.slice(e+1)),xbe(OW,E0),i}finally{br=t,R8=!1}}return null}var W_=[],G_=0,iR=null,sR=0,Pl=[],kl=0,A1=null,Vh=1,Hh="";function cy(e,t){W_[G_++]=sR,W_[G_++]=iR,iR=e,sR=t}function Zbe(e,t,n){Pl[kl++]=Vh,Pl[kl++]=Hh,Pl[kl++]=A1,A1=e;var r=Vh;e=Hh;var i=32-Jc(r)-1;r&=~(1<<i),n+=1;var s=32-Jc(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Vh=1<<32-Jc(t)+i|n<<i|r,Hh=s+e}else Vh=1<<s|n<<i|r,Hh=e}function FW(e){e.return!==null&&(cy(e,1),Zbe(e,1,0))}function BW(e){for(;e===iR;)iR=W_[--G_],W_[G_]=null,sR=W_[--G_],W_[G_]=null;for(;e===A1;)A1=Pl[--kl],Pl[kl]=null,Hh=Pl[--kl],Pl[kl]=null,Vh=Pl[--kl],Pl[kl]=null}var Ju=null,Wu=null,ci=!1,Lc=null;function ewe(e,t){var n=zl(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Uie(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ju=e,Wu=fg(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ju=e,Wu=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=A1!==null?{id:Vh,overflow:Hh}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=zl(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Ju=e,Wu=null,!0):!1;default:return!1}}function iz(e){return(e.mode&1)!==0&&(e.flags&128)===0}function sz(e){if(ci){var t=Wu;if(t){var n=t;if(!Uie(e,t)){if(iz(e))throw Error(qe(418));t=fg(n.nextSibling);var r=Ju;t&&Uie(e,t)?ewe(r,n):(e.flags=e.flags&-4097|2,ci=!1,Ju=e)}}else{if(iz(e))throw Error(qe(418));e.flags=e.flags&-4097|2,ci=!1,Ju=e}}}function Vie(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ju=e}function RO(e){if(e!==Ju)return!1;if(!ci)return Vie(e),ci=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!ez(e.type,e.memoizedProps)),t&&(t=Wu)){if(iz(e))throw twe(),Error(qe(418));for(;t;)ewe(e,t),t=fg(t.nextSibling)}if(Vie(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(qe(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Wu=fg(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Wu=null}}else Wu=Ju?fg(e.stateNode.nextSibling):null;return!0}function twe(){for(var e=Wu;e;)e=fg(e.nextSibling)}function tw(){Wu=Ju=null,ci=!1}function jW(e){Lc===null?Lc=[e]:Lc.push(e)}var pWe=qp.ReactCurrentBatchConfig;function Pc(e,t){if(e&&e.defaultProps){t=bi({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var oR=w0(null),aR=null,Y_=null,zW=null;function UW(){zW=Y_=aR=null}function VW(e){var t=oR.current;Zr(oR),e._currentValue=t}function oz(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function vb(e,t){aR=e,zW=Y_=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ru=!0),e.firstContext=null)}function Xl(e){var t=e._currentValue;if(zW!==e)if(e={context:e,memoizedValue:t,next:null},Y_===null){if(aR===null)throw Error(qe(308));Y_=e,aR.dependencies={lanes:0,firstContext:e}}else Y_=Y_.next=e;return t}var Fy=null;function HW(e){Fy===null?Fy=[e]:Fy.push(e)}function nwe(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,HW(t)):(n.next=i.next,i.next=n),t.interleaved=n,bp(e,r)}function bp(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Am=!1;function qW(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function rwe(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function np(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function dg(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Qn&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,bp(e,n)}return i=r.interleaved,i===null?(t.next=t,HW(r)):(t.next=i.next,i.next=t),r.interleaved=t,bp(e,n)}function Pk(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,PW(e,n)}}function Hie(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function uR(e,t,n,r){var i=e.updateQueue;Am=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var u=a,l=u.next;u.next=null,o===null?s=l:o.next=l,o=u;var c=e.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=l:a.next=l,c.lastBaseUpdate=u))}if(s!==null){var f=i.baseState;o=0,c=l=u=null,a=s;do{var d=a.lane,h=a.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(d=t,h=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){f=p.call(h,f,d);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,d=typeof p=="function"?p.call(h,f,d):p,d==null)break e;f=bi({},f,d);break e;case 2:Am=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else h={eventTime:h,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(l=c=h,u=f):c=c.next=h,o|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(c===null&&(u=f),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);I1|=o,e.lanes=o,e.memoizedState=f}}function qie(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(qe(191,i));i.call(r)}}}var iwe=new nbe.Component().refs;function az(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:bi({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var SM={isMounted:function(e){return(e=e._reactInternals)?gv(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=wa(),i=pg(e),s=np(r,i);s.payload=t,n!=null&&(s.callback=n),t=dg(e,s,i),t!==null&&(Zc(t,e,i,r),Pk(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=wa(),i=pg(e),s=np(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=dg(e,s,i),t!==null&&(Zc(t,e,i,r),Pk(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=wa(),r=pg(e),i=np(n,r);i.tag=2,t!=null&&(i.callback=t),t=dg(e,i,r),t!==null&&(Zc(t,e,r,n),Pk(t,e,r))}};function Wie(e,t,n,r,i,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,o):t.prototype&&t.prototype.isPureReactComponent?!M2(n,r)||!M2(i,s):!0}function swe(e,t,n){var r=!1,i=Lg,s=t.contextType;return typeof s=="object"&&s!==null?s=Xl(s):(i=uu(t)?T1:Zo.current,r=t.contextTypes,s=(r=r!=null)?ew(e,i):Lg),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=SM,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function Gie(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&SM.enqueueReplaceState(t,t.state,null)}function uz(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=iwe,qW(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=Xl(s):(s=uu(t)?T1:Zo.current,i.context=ew(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(az(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&SM.enqueueReplaceState(i,i.state,null),uR(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Lx(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(qe(309));var r=n.stateNode}if(!r)throw Error(qe(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var a=i.refs;a===iwe&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(qe(284));if(!n._owner)throw Error(qe(290,e))}return e}function NO(e,t){throw e=Object.prototype.toString.call(t),Error(qe(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Yie(e){var t=e._init;return t(e._payload)}function owe(e){function t(y,v){if(e){var _=y.deletions;_===null?(y.deletions=[v],y.flags|=16):_.push(v)}}function n(y,v){if(!e)return null;for(;v!==null;)t(y,v),v=v.sibling;return null}function r(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function i(y,v){return y=mg(y,v),y.index=0,y.sibling=null,y}function s(y,v,_){return y.index=_,e?(_=y.alternate,_!==null?(_=_.index,_<v?(y.flags|=2,v):_):(y.flags|=2,v)):(y.flags|=1048576,v)}function o(y){return e&&y.alternate===null&&(y.flags|=2),y}function a(y,v,_,b){return v===null||v.tag!==6?(v=j8(_,y.mode,b),v.return=y,v):(v=i(v,_),v.return=y,v)}function u(y,v,_,b){var E=_.type;return E===j_?c(y,v,_.props.children,b,_.key):v!==null&&(v.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Tm&&Yie(E)===v.type)?(b=i(v,_.props),b.ref=Lx(y,v,_),b.return=y,b):(b=Lk(_.type,_.key,_.props,null,y.mode,b),b.ref=Lx(y,v,_),b.return=y,b)}function l(y,v,_,b){return v===null||v.tag!==4||v.stateNode.containerInfo!==_.containerInfo||v.stateNode.implementation!==_.implementation?(v=z8(_,y.mode,b),v.return=y,v):(v=i(v,_.children||[]),v.return=y,v)}function c(y,v,_,b,E){return v===null||v.tag!==7?(v=s1(_,y.mode,b,E),v.return=y,v):(v=i(v,_),v.return=y,v)}function f(y,v,_){if(typeof v=="string"&&v!==""||typeof v=="number")return v=j8(""+v,y.mode,_),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case xO:return _=Lk(v.type,v.key,v.props,null,y.mode,_),_.ref=Lx(y,null,v),_.return=y,_;case B_:return v=z8(v,y.mode,_),v.return=y,v;case Tm:var b=v._init;return f(y,b(v._payload),_)}if(MS(v)||kx(v))return v=s1(v,y.mode,_,null),v.return=y,v;NO(y,v)}return null}function d(y,v,_,b){var E=v!==null?v.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return E!==null?null:a(y,v,""+_,b);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case xO:return _.key===E?u(y,v,_,b):null;case B_:return _.key===E?l(y,v,_,b):null;case Tm:return E=_._init,d(y,v,E(_._payload),b)}if(MS(_)||kx(_))return E!==null?null:c(y,v,_,b,null);NO(y,_)}return null}function h(y,v,_,b,E){if(typeof b=="string"&&b!==""||typeof b=="number")return y=y.get(_)||null,a(v,y,""+b,E);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case xO:return y=y.get(b.key===null?_:b.key)||null,u(v,y,b,E);case B_:return y=y.get(b.key===null?_:b.key)||null,l(v,y,b,E);case Tm:var w=b._init;return h(y,v,_,w(b._payload),E)}if(MS(b)||kx(b))return y=y.get(_)||null,c(v,y,b,E,null);NO(v,b)}return null}function p(y,v,_,b){for(var E=null,w=null,x=v,S=v=0,I=null;x!==null&&S<_.length;S++){x.index>S?(I=x,x=null):I=x.sibling;var C=d(y,x,_[S],b);if(C===null){x===null&&(x=I);break}e&&x&&C.alternate===null&&t(y,x),v=s(C,v,S),w===null?E=C:w.sibling=C,w=C,x=I}if(S===_.length)return n(y,x),ci&&cy(y,S),E;if(x===null){for(;S<_.length;S++)x=f(y,_[S],b),x!==null&&(v=s(x,v,S),w===null?E=x:w.sibling=x,w=x);return ci&&cy(y,S),E}for(x=r(y,x);S<_.length;S++)I=h(x,y,S,_[S],b),I!==null&&(e&&I.alternate!==null&&x.delete(I.key===null?S:I.key),v=s(I,v,S),w===null?E=I:w.sibling=I,w=I);return e&&x.forEach(function(O){return t(y,O)}),ci&&cy(y,S),E}function m(y,v,_,b){var E=kx(_);if(typeof E!="function")throw Error(qe(150));if(_=E.call(_),_==null)throw Error(qe(151));for(var w=E=null,x=v,S=v=0,I=null,C=_.next();x!==null&&!C.done;S++,C=_.next()){x.index>S?(I=x,x=null):I=x.sibling;var O=d(y,x,C.value,b);if(O===null){x===null&&(x=I);break}e&&x&&O.alternate===null&&t(y,x),v=s(O,v,S),w===null?E=O:w.sibling=O,w=O,x=I}if(C.done)return n(y,x),ci&&cy(y,S),E;if(x===null){for(;!C.done;S++,C=_.next())C=f(y,C.value,b),C!==null&&(v=s(C,v,S),w===null?E=C:w.sibling=C,w=C);return ci&&cy(y,S),E}for(x=r(y,x);!C.done;S++,C=_.next())C=h(x,y,S,C.value,b),C!==null&&(e&&C.alternate!==null&&x.delete(C.key===null?S:C.key),v=s(C,v,S),w===null?E=C:w.sibling=C,w=C);return e&&x.forEach(function(z){return t(y,z)}),ci&&cy(y,S),E}function g(y,v,_,b){if(typeof _=="object"&&_!==null&&_.type===j_&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case xO:e:{for(var E=_.key,w=v;w!==null;){if(w.key===E){if(E=_.type,E===j_){if(w.tag===7){n(y,w.sibling),v=i(w,_.props.children),v.return=y,y=v;break e}}else if(w.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Tm&&Yie(E)===w.type){n(y,w.sibling),v=i(w,_.props),v.ref=Lx(y,w,_),v.return=y,y=v;break e}n(y,w);break}else t(y,w);w=w.sibling}_.type===j_?(v=s1(_.props.children,y.mode,b,_.key),v.return=y,y=v):(b=Lk(_.type,_.key,_.props,null,y.mode,b),b.ref=Lx(y,v,_),b.return=y,y=b)}return o(y);case B_:e:{for(w=_.key;v!==null;){if(v.key===w)if(v.tag===4&&v.stateNode.containerInfo===_.containerInfo&&v.stateNode.implementation===_.implementation){n(y,v.sibling),v=i(v,_.children||[]),v.return=y,y=v;break e}else{n(y,v);break}else t(y,v);v=v.sibling}v=z8(_,y.mode,b),v.return=y,y=v}return o(y);case Tm:return w=_._init,g(y,v,w(_._payload),b)}if(MS(_))return p(y,v,_,b);if(kx(_))return m(y,v,_,b);NO(y,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,v!==null&&v.tag===6?(n(y,v.sibling),v=i(v,_),v.return=y,y=v):(n(y,v),v=j8(_,y.mode,b),v.return=y,y=v),o(y)):n(y,v)}return g}var nw=owe(!0),awe=owe(!1),OC={},bd=w0(OC),z2=w0(OC),U2=w0(OC);function By(e){if(e===OC)throw Error(qe(174));return e}function WW(e,t){switch(Ur(U2,t),Ur(z2,e),Ur(bd,OC),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:j7(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=j7(t,e)}Zr(bd),Ur(bd,t)}function rw(){Zr(bd),Zr(z2),Zr(U2)}function uwe(e){By(U2.current);var t=By(bd.current),n=j7(t,e.type);t!==n&&(Ur(z2,e),Ur(bd,n))}function GW(e){z2.current===e&&(Zr(bd),Zr(z2))}var vi=w0(0);function lR(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var N8=[];function YW(){for(var e=0;e<N8.length;e++)N8[e]._workInProgressVersionPrimary=null;N8.length=0}var kk=qp.ReactCurrentDispatcher,D8=qp.ReactCurrentBatchConfig,C1=0,_i=null,fs=null,Rs=null,cR=!1,$T=!1,V2=0,mWe=0;function To(){throw Error(qe(321))}function KW(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!af(e[n],t[n]))return!1;return!0}function XW(e,t,n,r,i,s){if(C1=s,_i=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,kk.current=e===null||e.memoizedState===null?_We:bWe,e=n(r,i),$T){s=0;do{if($T=!1,V2=0,25<=s)throw Error(qe(301));s+=1,Rs=fs=null,t.updateQueue=null,kk.current=wWe,e=n(r,i)}while($T)}if(kk.current=fR,t=fs!==null&&fs.next!==null,C1=0,Rs=fs=_i=null,cR=!1,t)throw Error(qe(300));return e}function QW(){var e=V2!==0;return V2=0,e}function zf(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rs===null?_i.memoizedState=Rs=e:Rs=Rs.next=e,Rs}function Ql(){if(fs===null){var e=_i.alternate;e=e!==null?e.memoizedState:null}else e=fs.next;var t=Rs===null?_i.memoizedState:Rs.next;if(t!==null)Rs=t,fs=e;else{if(e===null)throw Error(qe(310));fs=e,e={memoizedState:fs.memoizedState,baseState:fs.baseState,baseQueue:fs.baseQueue,queue:fs.queue,next:null},Rs===null?_i.memoizedState=Rs=e:Rs=Rs.next=e}return Rs}function H2(e,t){return typeof t=="function"?t(e):t}function L8(e){var t=Ql(),n=t.queue;if(n===null)throw Error(qe(311));n.lastRenderedReducer=e;var r=fs,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,u=null,l=s;do{var c=l.lane;if((C1&c)===c)u!==null&&(u=u.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var f={lane:c,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};u===null?(a=u=f,o=r):u=u.next=f,_i.lanes|=c,I1|=c}l=l.next}while(l!==null&&l!==s);u===null?o=r:u.next=a,af(r,t.memoizedState)||(ru=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,_i.lanes|=s,I1|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function M8(e){var t=Ql(),n=t.queue;if(n===null)throw Error(qe(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=e(s,o.action),o=o.next;while(o!==i);af(s,t.memoizedState)||(ru=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function lwe(){}function cwe(e,t){var n=_i,r=Ql(),i=t(),s=!af(r.memoizedState,i);if(s&&(r.memoizedState=i,ru=!0),r=r.queue,JW(hwe.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||Rs!==null&&Rs.memoizedState.tag&1){if(n.flags|=2048,q2(9,dwe.bind(null,n,r,i,t),void 0,null),Vs===null)throw Error(qe(349));C1&30||fwe(n,t,i)}return i}function fwe(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=_i.updateQueue,t===null?(t={lastEffect:null,stores:null},_i.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function dwe(e,t,n,r){t.value=n,t.getSnapshot=r,pwe(t)&&mwe(e)}function hwe(e,t,n){return n(function(){pwe(t)&&mwe(e)})}function pwe(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!af(e,n)}catch{return!0}}function mwe(e){var t=bp(e,1);t!==null&&Zc(t,e,1,-1)}function Kie(e){var t=zf();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:H2,lastRenderedState:e},t.queue=e,e=e.dispatch=vWe.bind(null,_i,e),[t.memoizedState,e]}function q2(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=_i.updateQueue,t===null?(t={lastEffect:null,stores:null},_i.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function gwe(){return Ql().memoizedState}function $k(e,t,n,r){var i=zf();_i.flags|=e,i.memoizedState=q2(1|t,n,void 0,r===void 0?null:r)}function TM(e,t,n,r){var i=Ql();r=r===void 0?null:r;var s=void 0;if(fs!==null){var o=fs.memoizedState;if(s=o.destroy,r!==null&&KW(r,o.deps)){i.memoizedState=q2(t,n,s,r);return}}_i.flags|=e,i.memoizedState=q2(1|t,n,s,r)}function Xie(e,t){return $k(8390656,8,e,t)}function JW(e,t){return TM(2048,8,e,t)}function ywe(e,t){return TM(4,2,e,t)}function vwe(e,t){return TM(4,4,e,t)}function _we(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function bwe(e,t,n){return n=n!=null?n.concat([e]):null,TM(4,4,_we.bind(null,t,e),n)}function ZW(){}function wwe(e,t){var n=Ql();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&KW(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ewe(e,t){var n=Ql();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&KW(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function xwe(e,t,n){return C1&21?(af(n,t)||(n=Abe(),_i.lanes|=n,I1|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ru=!0),e.memoizedState=n)}function gWe(e,t){var n=br;br=n!==0&&4>n?n:4,e(!0);var r=D8.transition;D8.transition={};try{e(!1),t()}finally{br=n,D8.transition=r}}function Swe(){return Ql().memoizedState}function yWe(e,t,n){var r=pg(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Twe(e))Awe(t,n);else if(n=nwe(e,t,n,r),n!==null){var i=wa();Zc(n,e,r,i),Cwe(n,t,r)}}function vWe(e,t,n){var r=pg(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Twe(e))Awe(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,af(a,o)){var u=t.interleaved;u===null?(i.next=i,HW(t)):(i.next=u.next,u.next=i),t.interleaved=i;return}}catch{}finally{}n=nwe(e,t,i,r),n!==null&&(i=wa(),Zc(n,e,r,i),Cwe(n,t,r))}}function Twe(e){var t=e.alternate;return e===_i||t!==null&&t===_i}function Awe(e,t){$T=cR=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Cwe(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,PW(e,n)}}var fR={readContext:Xl,useCallback:To,useContext:To,useEffect:To,useImperativeHandle:To,useInsertionEffect:To,useLayoutEffect:To,useMemo:To,useReducer:To,useRef:To,useState:To,useDebugValue:To,useDeferredValue:To,useTransition:To,useMutableSource:To,useSyncExternalStore:To,useId:To,unstable_isNewReconciler:!1},_We={readContext:Xl,useCallback:function(e,t){return zf().memoizedState=[e,t===void 0?null:t],e},useContext:Xl,useEffect:Xie,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,$k(4194308,4,_we.bind(null,t,e),n)},useLayoutEffect:function(e,t){return $k(4194308,4,e,t)},useInsertionEffect:function(e,t){return $k(4,2,e,t)},useMemo:function(e,t){var n=zf();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=zf();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=yWe.bind(null,_i,e),[r.memoizedState,e]},useRef:function(e){var t=zf();return e={current:e},t.memoizedState=e},useState:Kie,useDebugValue:ZW,useDeferredValue:function(e){return zf().memoizedState=e},useTransition:function(){var e=Kie(!1),t=e[0];return e=gWe.bind(null,e[1]),zf().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=_i,i=zf();if(ci){if(n===void 0)throw Error(qe(407));n=n()}else{if(n=t(),Vs===null)throw Error(qe(349));C1&30||fwe(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,Xie(hwe.bind(null,r,s,e),[e]),r.flags|=2048,q2(9,dwe.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=zf(),t=Vs.identifierPrefix;if(ci){var n=Hh,r=Vh;n=(r&~(1<<32-Jc(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=V2++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=mWe++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},bWe={readContext:Xl,useCallback:wwe,useContext:Xl,useEffect:JW,useImperativeHandle:bwe,useInsertionEffect:ywe,useLayoutEffect:vwe,useMemo:Ewe,useReducer:L8,useRef:gwe,useState:function(){return L8(H2)},useDebugValue:ZW,useDeferredValue:function(e){var t=Ql();return xwe(t,fs.memoizedState,e)},useTransition:function(){var e=L8(H2)[0],t=Ql().memoizedState;return[e,t]},useMutableSource:lwe,useSyncExternalStore:cwe,useId:Swe,unstable_isNewReconciler:!1},wWe={readContext:Xl,useCallback:wwe,useContext:Xl,useEffect:JW,useImperativeHandle:bwe,useInsertionEffect:ywe,useLayoutEffect:vwe,useMemo:Ewe,useReducer:M8,useRef:gwe,useState:function(){return M8(H2)},useDebugValue:ZW,useDeferredValue:function(e){var t=Ql();return fs===null?t.memoizedState=e:xwe(t,fs.memoizedState,e)},useTransition:function(){var e=M8(H2)[0],t=Ql().memoizedState;return[e,t]},useMutableSource:lwe,useSyncExternalStore:cwe,useId:Swe,unstable_isNewReconciler:!1};function iw(e,t){try{var n="",r=t;do n+=KHe(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function F8(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function lz(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var EWe=typeof WeakMap=="function"?WeakMap:Map;function Iwe(e,t,n){n=np(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){hR||(hR=!0,_z=r),lz(e,t)},n}function Owe(e,t,n){n=np(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){lz(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){lz(e,t),typeof r!="function"&&(hg===null?hg=new Set([this]):hg.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function Qie(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new EWe;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=LWe.bind(null,e,t,n),t.then(e,e))}function Jie(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Zie(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=np(-1,1),t.tag=2,dg(n,t,1))),n.lanes|=1),e)}var xWe=qp.ReactCurrentOwner,ru=!1;function da(e,t,n,r){t.child=e===null?awe(t,null,n,r):nw(t,e.child,n,r)}function ese(e,t,n,r,i){n=n.render;var s=t.ref;return vb(t,i),r=XW(e,t,n,r,s,i),n=QW(),e!==null&&!ru?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,wp(e,t,i)):(ci&&n&&FW(t),t.flags|=1,da(e,t,r,i),t.child)}function tse(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!aG(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,Pwe(e,t,s,r,i)):(e=Lk(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:M2,n(o,r)&&e.ref===t.ref)return wp(e,t,i)}return t.flags|=1,e=mg(s,r),e.ref=t.ref,e.return=t,t.child=e}function Pwe(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(M2(s,r)&&e.ref===t.ref)if(ru=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(ru=!0);else return t.lanes=e.lanes,wp(e,t,i)}return cz(e,t,n,r,i)}function kwe(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ur(X_,Fu),Fu|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ur(X_,Fu),Fu|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Ur(X_,Fu),Fu|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,Ur(X_,Fu),Fu|=r;return da(e,t,i,n),t.child}function $we(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function cz(e,t,n,r,i){var s=uu(n)?T1:Zo.current;return s=ew(t,s),vb(t,i),n=XW(e,t,n,r,s,i),r=QW(),e!==null&&!ru?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,wp(e,t,i)):(ci&&r&&FW(t),t.flags|=1,da(e,t,n,i),t.child)}function nse(e,t,n,r,i){if(uu(n)){var s=!0;rR(t)}else s=!1;if(vb(t,i),t.stateNode===null)Rk(e,t),swe(t,n,r),uz(t,n,r,i),r=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var u=o.context,l=n.contextType;typeof l=="object"&&l!==null?l=Xl(l):(l=uu(n)?T1:Zo.current,l=ew(t,l));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==l)&&Gie(t,o,r,l),Am=!1;var d=t.memoizedState;o.state=d,uR(t,r,o,i),u=t.memoizedState,a!==r||d!==u||au.current||Am?(typeof c=="function"&&(az(t,n,c,r),u=t.memoizedState),(a=Am||Wie(t,n,a,r,d,u,l))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=l,r=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,rwe(e,t),a=t.memoizedProps,l=t.type===t.elementType?a:Pc(t.type,a),o.props=l,f=t.pendingProps,d=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Xl(u):(u=uu(n)?T1:Zo.current,u=ew(t,u));var h=n.getDerivedStateFromProps;(c=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||d!==u)&&Gie(t,o,r,u),Am=!1,d=t.memoizedState,o.state=d,uR(t,r,o,i);var p=t.memoizedState;a!==f||d!==p||au.current||Am?(typeof h=="function"&&(az(t,n,h,r),p=t.memoizedState),(l=Am||Wie(t,n,l,r,d,p,u)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,u)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=l):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return fz(e,t,n,r,s,i)}function fz(e,t,n,r,i,s){$we(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return i&&zie(t,n,!1),wp(e,t,s);r=t.stateNode,xWe.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=nw(t,e.child,null,s),t.child=nw(t,null,a,s)):da(e,t,a,s),t.memoizedState=r.state,i&&zie(t,n,!0),t.child}function Rwe(e){var t=e.stateNode;t.pendingContext?jie(e,t.pendingContext,t.pendingContext!==t.context):t.context&&jie(e,t.context,!1),WW(e,t.containerInfo)}function rse(e,t,n,r,i){return tw(),jW(i),t.flags|=256,da(e,t,n,r),t.child}var dz={dehydrated:null,treeContext:null,retryLane:0};function hz(e){return{baseLanes:e,cachePool:null,transitions:null}}function Nwe(e,t,n){var r=t.pendingProps,i=vi.current,s=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Ur(vi,i&1),e===null)return sz(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,s?(r=t.mode,s=t.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=IM(o,r,0,null),e=s1(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=hz(n),t.memoizedState=dz,e):eG(t,o));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return SWe(e,t,o,r,a,i,n);if(s){s=r.fallback,o=t.mode,i=e.child,a=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=mg(i,u),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=mg(a,s):(s=s1(s,o,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,o=e.child.memoizedState,o=o===null?hz(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~n,t.memoizedState=dz,r}return s=e.child,e=s.sibling,r=mg(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function eG(e,t){return t=IM({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function DO(e,t,n,r){return r!==null&&jW(r),nw(t,e.child,null,n),e=eG(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function SWe(e,t,n,r,i,s,o){if(n)return t.flags&256?(t.flags&=-257,r=F8(Error(qe(422))),DO(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=IM({mode:"visible",children:r.children},i,0,null),s=s1(s,i,o,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&nw(t,e.child,null,o),t.child.memoizedState=hz(o),t.memoizedState=dz,s);if(!(t.mode&1))return DO(e,t,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(qe(419)),r=F8(s,r,void 0),DO(e,t,o,r)}if(a=(o&e.childLanes)!==0,ru||a){if(r=Vs,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,bp(e,i),Zc(r,e,i,-1))}return oG(),r=F8(Error(qe(421))),DO(e,t,o,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=MWe.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,Wu=fg(i.nextSibling),Ju=t,ci=!0,Lc=null,e!==null&&(Pl[kl++]=Vh,Pl[kl++]=Hh,Pl[kl++]=A1,Vh=e.id,Hh=e.overflow,A1=t),t=eG(t,r.children),t.flags|=4096,t)}function ise(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),oz(e.return,t,n)}function B8(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Dwe(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(da(e,t,r.children,n),r=vi.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&ise(e,n,t);else if(e.tag===19)ise(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ur(vi,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&lR(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),B8(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&lR(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}B8(t,!0,n,null,s);break;case"together":B8(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Rk(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function wp(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),I1|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(qe(153));if(t.child!==null){for(e=t.child,n=mg(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=mg(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function TWe(e,t,n){switch(t.tag){case 3:Rwe(t),tw();break;case 5:uwe(t);break;case 1:uu(t.type)&&rR(t);break;case 4:WW(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ur(oR,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Ur(vi,vi.current&1),t.flags|=128,null):n&t.child.childLanes?Nwe(e,t,n):(Ur(vi,vi.current&1),e=wp(e,t,n),e!==null?e.sibling:null);Ur(vi,vi.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Dwe(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ur(vi,vi.current),r)break;return null;case 22:case 23:return t.lanes=0,kwe(e,t,n)}return wp(e,t,n)}var Lwe,pz,Mwe,Fwe;Lwe=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};pz=function(){};Mwe=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,By(bd.current);var s=null;switch(n){case"input":i=L7(e,i),r=L7(e,r),s=[];break;case"select":i=bi({},i,{value:void 0}),r=bi({},r,{value:void 0}),s=[];break;case"textarea":i=B7(e,i),r=B7(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=tR)}z7(n,r);var o;n=null;for(l in i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var a=i[l];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(P2.hasOwnProperty(l)?s||(s=[]):(s=s||[]).push(l,null));for(l in r){var u=r[l];if(a=i!=null?i[l]:void 0,r.hasOwnProperty(l)&&u!==a&&(u!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(l,n)),n=u;else l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(s=s||[]).push(l,u)):l==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(l,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(P2.hasOwnProperty(l)?(u!=null&&l==="onScroll"&&Wr("scroll",e),s||a===u||(s=[])):(s=s||[]).push(l,u))}n&&(s=s||[]).push("style",n);var l=s;(t.updateQueue=l)&&(t.flags|=4)}};Fwe=function(e,t,n,r){n!==r&&(t.flags|=4)};function Mx(e,t){if(!ci)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ao(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function AWe(e,t,n){var r=t.pendingProps;switch(BW(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ao(t),null;case 1:return uu(t.type)&&nR(),Ao(t),null;case 3:return r=t.stateNode,rw(),Zr(au),Zr(Zo),YW(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(RO(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Lc!==null&&(Ez(Lc),Lc=null))),pz(e,t),Ao(t),null;case 5:GW(t);var i=By(U2.current);if(n=t.type,e!==null&&t.stateNode!=null)Mwe(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(qe(166));return Ao(t),null}if(e=By(bd.current),RO(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Zf]=t,r[j2]=s,e=(t.mode&1)!==0,n){case"dialog":Wr("cancel",r),Wr("close",r);break;case"iframe":case"object":case"embed":Wr("load",r);break;case"video":case"audio":for(i=0;i<BS.length;i++)Wr(BS[i],r);break;case"source":Wr("error",r);break;case"img":case"image":case"link":Wr("error",r),Wr("load",r);break;case"details":Wr("toggle",r);break;case"input":hie(r,s),Wr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Wr("invalid",r);break;case"textarea":mie(r,s),Wr("invalid",r)}z7(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&$O(r.textContent,a,e),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&$O(r.textContent,a,e),i=["children",""+a]):P2.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Wr("scroll",r)}switch(n){case"input":SO(r),pie(r,s,!0);break;case"textarea":SO(r),gie(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=tR)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=fbe(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[Zf]=t,e[j2]=r,Lwe(e,t,!1,!1),t.stateNode=e;e:{switch(o=U7(n,r),n){case"dialog":Wr("cancel",e),Wr("close",e),i=r;break;case"iframe":case"object":case"embed":Wr("load",e),i=r;break;case"video":case"audio":for(i=0;i<BS.length;i++)Wr(BS[i],e);i=r;break;case"source":Wr("error",e),i=r;break;case"img":case"image":case"link":Wr("error",e),Wr("load",e),i=r;break;case"details":Wr("toggle",e),i=r;break;case"input":hie(e,r),i=L7(e,r),Wr("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=bi({},r,{value:void 0}),Wr("invalid",e);break;case"textarea":mie(e,r),i=B7(e,r),Wr("invalid",e);break;default:i=r}z7(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var u=a[s];s==="style"?pbe(e,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&dbe(e,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&k2(e,u):typeof u=="number"&&k2(e,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(P2.hasOwnProperty(s)?u!=null&&s==="onScroll"&&Wr("scroll",e):u!=null&&SW(e,s,u,o))}switch(n){case"input":SO(e),pie(e,r,!1);break;case"textarea":SO(e),gie(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Dg(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?pb(e,!!r.multiple,s,!1):r.defaultValue!=null&&pb(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=tR)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ao(t),null;case 6:if(e&&t.stateNode!=null)Fwe(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(qe(166));if(n=By(U2.current),By(bd.current),RO(t)){if(r=t.stateNode,n=t.memoizedProps,r[Zf]=t,(s=r.nodeValue!==n)&&(e=Ju,e!==null))switch(e.tag){case 3:$O(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&$O(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Zf]=t,t.stateNode=r}return Ao(t),null;case 13:if(Zr(vi),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ci&&Wu!==null&&t.mode&1&&!(t.flags&128))twe(),tw(),t.flags|=98560,s=!1;else if(s=RO(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(qe(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(qe(317));s[Zf]=t}else tw(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ao(t),s=!1}else Lc!==null&&(Ez(Lc),Lc=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||vi.current&1?gs===0&&(gs=3):oG())),t.updateQueue!==null&&(t.flags|=4),Ao(t),null);case 4:return rw(),pz(e,t),e===null&&F2(t.stateNode.containerInfo),Ao(t),null;case 10:return VW(t.type._context),Ao(t),null;case 17:return uu(t.type)&&nR(),Ao(t),null;case 19:if(Zr(vi),s=t.memoizedState,s===null)return Ao(t),null;if(r=(t.flags&128)!==0,o=s.rendering,o===null)if(r)Mx(s,!1);else{if(gs!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=lR(e),o!==null){for(t.flags|=128,Mx(s,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ur(vi,vi.current&1|2),t.child}e=e.sibling}s.tail!==null&&Ui()>sw&&(t.flags|=128,r=!0,Mx(s,!1),t.lanes=4194304)}else{if(!r)if(e=lR(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Mx(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!ci)return Ao(t),null}else 2*Ui()-s.renderingStartTime>sw&&n!==1073741824&&(t.flags|=128,r=!0,Mx(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(n=s.last,n!==null?n.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Ui(),t.sibling=null,n=vi.current,Ur(vi,r?n&1|2:n&1),t):(Ao(t),null);case 22:case 23:return sG(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Fu&1073741824&&(Ao(t),t.subtreeFlags&6&&(t.flags|=8192)):Ao(t),null;case 24:return null;case 25:return null}throw Error(qe(156,t.tag))}function CWe(e,t){switch(BW(t),t.tag){case 1:return uu(t.type)&&nR(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return rw(),Zr(au),Zr(Zo),YW(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return GW(t),null;case 13:if(Zr(vi),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(qe(340));tw()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Zr(vi),null;case 4:return rw(),null;case 10:return VW(t.type._context),null;case 22:case 23:return sG(),null;case 24:return null;default:return null}}var LO=!1,jo=!1,IWe=typeof WeakSet=="function"?WeakSet:Set,dt=null;function K_(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ii(e,t,r)}else n.current=null}function mz(e,t,n){try{n()}catch(r){Ii(e,t,r)}}var sse=!1;function OWe(e,t){if(J7=J$,e=Ube(),MW(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,u=-1,l=0,c=0,f=e,d=null;t:for(;;){for(var h;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(u=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(h=f.firstChild)!==null;)d=f,f=h;for(;;){if(f===e)break t;if(d===n&&++l===i&&(a=o),d===s&&++c===r&&(u=o),(h=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=h}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Z7={focusedElem:e,selectionRange:n},J$=!1,dt=t;dt!==null;)if(t=dt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,dt=e;else for(;dt!==null;){t=dt;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,g=p.memoizedState,y=t.stateNode,v=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:Pc(t.type,m),g);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var _=t.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(qe(163))}}catch(b){Ii(t,t.return,b)}if(e=t.sibling,e!==null){e.return=t.return,dt=e;break}dt=t.return}return p=sse,sse=!1,p}function RT(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&mz(t,n,s)}i=i.next}while(i!==r)}}function AM(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function gz(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Bwe(e){var t=e.alternate;t!==null&&(e.alternate=null,Bwe(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Zf],delete t[j2],delete t[nz],delete t[fWe],delete t[dWe])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function jwe(e){return e.tag===5||e.tag===3||e.tag===4}function ose(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||jwe(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function yz(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=tR));else if(r!==4&&(e=e.child,e!==null))for(yz(e,t,n),e=e.sibling;e!==null;)yz(e,t,n),e=e.sibling}function vz(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(vz(e,t,n),e=e.sibling;e!==null;)vz(e,t,n),e=e.sibling}var no=null,$c=!1;function cm(e,t,n){for(n=n.child;n!==null;)zwe(e,t,n),n=n.sibling}function zwe(e,t,n){if(_d&&typeof _d.onCommitFiberUnmount=="function")try{_d.onCommitFiberUnmount(vM,n)}catch{}switch(n.tag){case 5:jo||K_(n,t);case 6:var r=no,i=$c;no=null,cm(e,t,n),no=r,$c=i,no!==null&&($c?(e=no,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):no.removeChild(n.stateNode));break;case 18:no!==null&&($c?(e=no,n=n.stateNode,e.nodeType===8?$8(e.parentNode,n):e.nodeType===1&&$8(e,n),D2(e)):$8(no,n.stateNode));break;case 4:r=no,i=$c,no=n.stateNode.containerInfo,$c=!0,cm(e,t,n),no=r,$c=i;break;case 0:case 11:case 14:case 15:if(!jo&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&mz(n,t,o),i=i.next}while(i!==r)}cm(e,t,n);break;case 1:if(!jo&&(K_(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ii(n,t,a)}cm(e,t,n);break;case 21:cm(e,t,n);break;case 22:n.mode&1?(jo=(r=jo)||n.memoizedState!==null,cm(e,t,n),jo=r):cm(e,t,n);break;default:cm(e,t,n)}}function ase(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new IWe),t.forEach(function(r){var i=FWe.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function bc(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:no=a.stateNode,$c=!1;break e;case 3:no=a.stateNode.containerInfo,$c=!0;break e;case 4:no=a.stateNode.containerInfo,$c=!0;break e}a=a.return}if(no===null)throw Error(qe(160));zwe(s,o,i),no=null,$c=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(l){Ii(i,t,l)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Uwe(t,e),t=t.sibling}function Uwe(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(bc(t,e),$f(e),r&4){try{RT(3,e,e.return),AM(3,e)}catch(m){Ii(e,e.return,m)}try{RT(5,e,e.return)}catch(m){Ii(e,e.return,m)}}break;case 1:bc(t,e),$f(e),r&512&&n!==null&&K_(n,n.return);break;case 5:if(bc(t,e),$f(e),r&512&&n!==null&&K_(n,n.return),e.flags&32){var i=e.stateNode;try{k2(i,"")}catch(m){Ii(e,e.return,m)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,o=n!==null?n.memoizedProps:s,a=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&lbe(i,s),U7(a,o);var l=U7(a,s);for(o=0;o<u.length;o+=2){var c=u[o],f=u[o+1];c==="style"?pbe(i,f):c==="dangerouslySetInnerHTML"?dbe(i,f):c==="children"?k2(i,f):SW(i,c,f,l)}switch(a){case"input":M7(i,s);break;case"textarea":cbe(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?pb(i,!!s.multiple,h,!1):d!==!!s.multiple&&(s.defaultValue!=null?pb(i,!!s.multiple,s.defaultValue,!0):pb(i,!!s.multiple,s.multiple?[]:"",!1))}i[j2]=s}catch(m){Ii(e,e.return,m)}}break;case 6:if(bc(t,e),$f(e),r&4){if(e.stateNode===null)throw Error(qe(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(m){Ii(e,e.return,m)}}break;case 3:if(bc(t,e),$f(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{D2(t.containerInfo)}catch(m){Ii(e,e.return,m)}break;case 4:bc(t,e),$f(e);break;case 13:bc(t,e),$f(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(rG=Ui())),r&4&&ase(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(jo=(l=jo)||c,bc(t,e),jo=l):bc(t,e),$f(e),r&8192){if(l=e.memoizedState!==null,(e.stateNode.isHidden=l)&&!c&&e.mode&1)for(dt=e,c=e.child;c!==null;){for(f=dt=c;dt!==null;){switch(d=dt,h=d.child,d.tag){case 0:case 11:case 14:case 15:RT(4,d,d.return);break;case 1:K_(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){r=d,n=d.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(m){Ii(r,n,m)}}break;case 5:K_(d,d.return);break;case 22:if(d.memoizedState!==null){lse(f);continue}}h!==null?(h.return=d,dt=h):lse(f)}c=c.sibling}e:for(c=null,f=e;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,l?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,u=f.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=hbe("display",o))}catch(m){Ii(e,e.return,m)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=l?"":f.memoizedProps}catch(m){Ii(e,e.return,m)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:bc(t,e),$f(e),r&4&&ase(e);break;case 21:break;default:bc(t,e),$f(e)}}function $f(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(jwe(n)){var r=n;break e}n=n.return}throw Error(qe(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(k2(i,""),r.flags&=-33);var s=ose(e);vz(e,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=ose(e);yz(e,a,o);break;default:throw Error(qe(161))}}catch(u){Ii(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function PWe(e,t,n){dt=e,Vwe(e)}function Vwe(e,t,n){for(var r=(e.mode&1)!==0;dt!==null;){var i=dt,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||LO;if(!o){var a=i.alternate,u=a!==null&&a.memoizedState!==null||jo;a=LO;var l=jo;if(LO=o,(jo=u)&&!l)for(dt=i;dt!==null;)o=dt,u=o.child,o.tag===22&&o.memoizedState!==null?cse(i):u!==null?(u.return=o,dt=u):cse(i);for(;s!==null;)dt=s,Vwe(s),s=s.sibling;dt=i,LO=a,jo=l}use(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,dt=s):use(e)}}function use(e){for(;dt!==null;){var t=dt;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:jo||AM(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!jo)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Pc(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&qie(t,s,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}qie(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var l=t.alternate;if(l!==null){var c=l.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&D2(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(qe(163))}jo||t.flags&512&&gz(t)}catch(d){Ii(t,t.return,d)}}if(t===e){dt=null;break}if(n=t.sibling,n!==null){n.return=t.return,dt=n;break}dt=t.return}}function lse(e){for(;dt!==null;){var t=dt;if(t===e){dt=null;break}var n=t.sibling;if(n!==null){n.return=t.return,dt=n;break}dt=t.return}}function cse(e){for(;dt!==null;){var t=dt;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{AM(4,t)}catch(u){Ii(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(u){Ii(t,i,u)}}var s=t.return;try{gz(t)}catch(u){Ii(t,s,u)}break;case 5:var o=t.return;try{gz(t)}catch(u){Ii(t,o,u)}}}catch(u){Ii(t,t.return,u)}if(t===e){dt=null;break}var a=t.sibling;if(a!==null){a.return=t.return,dt=a;break}dt=t.return}}var kWe=Math.ceil,dR=qp.ReactCurrentDispatcher,tG=qp.ReactCurrentOwner,Wl=qp.ReactCurrentBatchConfig,Qn=0,Vs=null,ts=null,po=0,Fu=0,X_=w0(0),gs=0,W2=null,I1=0,CM=0,nG=0,NT=null,Ka=null,rG=0,sw=1/0,Ah=null,hR=!1,_z=null,hg=null,MO=!1,Wm=null,pR=0,DT=0,bz=null,Nk=-1,Dk=0;function wa(){return Qn&6?Ui():Nk!==-1?Nk:Nk=Ui()}function pg(e){return e.mode&1?Qn&2&&po!==0?po&-po:pWe.transition!==null?(Dk===0&&(Dk=Abe()),Dk):(e=br,e!==0||(e=window.event,e=e===void 0?16:Rbe(e.type)),e):1}function Zc(e,t,n,r){if(50<DT)throw DT=0,bz=null,Error(qe(185));AC(e,n,r),(!(Qn&2)||e!==Vs)&&(e===Vs&&(!(Qn&2)&&(CM|=n),gs===4&&Lm(e,po)),lu(e,r),n===1&&Qn===0&&!(t.mode&1)&&(sw=Ui()+500,xM&&E0()))}function lu(e,t){var n=e.callbackNode;pqe(e,t);var r=Q$(e,e===Vs?po:0);if(r===0)n!==null&&_ie(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&_ie(n),t===1)e.tag===0?hWe(fse.bind(null,e)):Jbe(fse.bind(null,e)),lWe(function(){!(Qn&6)&&E0()}),n=null;else{switch(Cbe(r)){case 1:n=OW;break;case 4:n=Sbe;break;case 16:n=X$;break;case 536870912:n=Tbe;break;default:n=X$}n=Qwe(n,Hwe.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Hwe(e,t){if(Nk=-1,Dk=0,Qn&6)throw Error(qe(327));var n=e.callbackNode;if(_b()&&e.callbackNode!==n)return null;var r=Q$(e,e===Vs?po:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=mR(e,r);else{t=r;var i=Qn;Qn|=2;var s=Wwe();(Vs!==e||po!==t)&&(Ah=null,sw=Ui()+500,i1(e,t));do try{NWe();break}catch(a){qwe(e,a)}while(!0);UW(),dR.current=s,Qn=i,ts!==null?t=0:(Vs=null,po=0,t=gs)}if(t!==0){if(t===2&&(i=G7(e),i!==0&&(r=i,t=wz(e,i))),t===1)throw n=W2,i1(e,0),Lm(e,r),lu(e,Ui()),n;if(t===6)Lm(e,r);else{if(i=e.current.alternate,!(r&30)&&!$We(i)&&(t=mR(e,r),t===2&&(s=G7(e),s!==0&&(r=s,t=wz(e,s))),t===1))throw n=W2,i1(e,0),Lm(e,r),lu(e,Ui()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(qe(345));case 2:fy(e,Ka,Ah);break;case 3:if(Lm(e,r),(r&130023424)===r&&(t=rG+500-Ui(),10<t)){if(Q$(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){wa(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=tz(fy.bind(null,e,Ka,Ah),t);break}fy(e,Ka,Ah);break;case 4:if(Lm(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-Jc(r);s=1<<o,o=t[o],o>i&&(i=o),r&=~s}if(r=i,r=Ui()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*kWe(r/1960))-r,10<r){e.timeoutHandle=tz(fy.bind(null,e,Ka,Ah),r);break}fy(e,Ka,Ah);break;case 5:fy(e,Ka,Ah);break;default:throw Error(qe(329))}}}return lu(e,Ui()),e.callbackNode===n?Hwe.bind(null,e):null}function wz(e,t){var n=NT;return e.current.memoizedState.isDehydrated&&(i1(e,t).flags|=256),e=mR(e,t),e!==2&&(t=Ka,Ka=n,t!==null&&Ez(t)),e}function Ez(e){Ka===null?Ka=e:Ka.push.apply(Ka,e)}function $We(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!af(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Lm(e,t){for(t&=~nG,t&=~CM,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Jc(t),r=1<<n;e[n]=-1,t&=~r}}function fse(e){if(Qn&6)throw Error(qe(327));_b();var t=Q$(e,0);if(!(t&1))return lu(e,Ui()),null;var n=mR(e,t);if(e.tag!==0&&n===2){var r=G7(e);r!==0&&(t=r,n=wz(e,r))}if(n===1)throw n=W2,i1(e,0),Lm(e,t),lu(e,Ui()),n;if(n===6)throw Error(qe(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,fy(e,Ka,Ah),lu(e,Ui()),null}function iG(e,t){var n=Qn;Qn|=1;try{return e(t)}finally{Qn=n,Qn===0&&(sw=Ui()+500,xM&&E0())}}function O1(e){Wm!==null&&Wm.tag===0&&!(Qn&6)&&_b();var t=Qn;Qn|=1;var n=Wl.transition,r=br;try{if(Wl.transition=null,br=1,e)return e()}finally{br=r,Wl.transition=n,Qn=t,!(Qn&6)&&E0()}}function sG(){Fu=X_.current,Zr(X_)}function i1(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,uWe(n)),ts!==null)for(n=ts.return;n!==null;){var r=n;switch(BW(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&nR();break;case 3:rw(),Zr(au),Zr(Zo),YW();break;case 5:GW(r);break;case 4:rw();break;case 13:Zr(vi);break;case 19:Zr(vi);break;case 10:VW(r.type._context);break;case 22:case 23:sG()}n=n.return}if(Vs=e,ts=e=mg(e.current,null),po=Fu=t,gs=0,W2=null,nG=CM=I1=0,Ka=NT=null,Fy!==null){for(t=0;t<Fy.length;t++)if(n=Fy[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Fy=null}return e}function qwe(e,t){do{var n=ts;try{if(UW(),kk.current=fR,cR){for(var r=_i.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}cR=!1}if(C1=0,Rs=fs=_i=null,$T=!1,V2=0,tG.current=null,n===null||n.return===null){gs=1,W2=t,ts=null;break}e:{var s=e,o=n.return,a=n,u=t;if(t=po,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var l=u,c=a,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var h=Jie(o);if(h!==null){h.flags&=-257,Zie(h,o,a,s,t),h.mode&1&&Qie(s,l,t),t=h,u=l;var p=t.updateQueue;if(p===null){var m=new Set;m.add(u),t.updateQueue=m}else p.add(u);break e}else{if(!(t&1)){Qie(s,l,t),oG();break e}u=Error(qe(426))}}else if(ci&&a.mode&1){var g=Jie(o);if(g!==null){!(g.flags&65536)&&(g.flags|=256),Zie(g,o,a,s,t),jW(iw(u,a));break e}}s=u=iw(u,a),gs!==4&&(gs=2),NT===null?NT=[s]:NT.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var y=Iwe(s,u,t);Hie(s,y);break e;case 1:a=u;var v=s.type,_=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(hg===null||!hg.has(_)))){s.flags|=65536,t&=-t,s.lanes|=t;var b=Owe(s,a,t);Hie(s,b);break e}}s=s.return}while(s!==null)}Ywe(n)}catch(E){t=E,ts===n&&n!==null&&(ts=n=n.return);continue}break}while(!0)}function Wwe(){var e=dR.current;return dR.current=fR,e===null?fR:e}function oG(){(gs===0||gs===3||gs===2)&&(gs=4),Vs===null||!(I1&268435455)&&!(CM&268435455)||Lm(Vs,po)}function mR(e,t){var n=Qn;Qn|=2;var r=Wwe();(Vs!==e||po!==t)&&(Ah=null,i1(e,t));do try{RWe();break}catch(i){qwe(e,i)}while(!0);if(UW(),Qn=n,dR.current=r,ts!==null)throw Error(qe(261));return Vs=null,po=0,gs}function RWe(){for(;ts!==null;)Gwe(ts)}function NWe(){for(;ts!==null&&!sqe();)Gwe(ts)}function Gwe(e){var t=Xwe(e.alternate,e,Fu);e.memoizedProps=e.pendingProps,t===null?Ywe(e):ts=t,tG.current=null}function Ywe(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=CWe(n,t),n!==null){n.flags&=32767,ts=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{gs=6,ts=null;return}}else if(n=AWe(n,t,Fu),n!==null){ts=n;return}if(t=t.sibling,t!==null){ts=t;return}ts=t=e}while(t!==null);gs===0&&(gs=5)}function fy(e,t,n){var r=br,i=Wl.transition;try{Wl.transition=null,br=1,DWe(e,t,n,r)}finally{Wl.transition=i,br=r}return null}function DWe(e,t,n,r){do _b();while(Wm!==null);if(Qn&6)throw Error(qe(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(qe(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(mqe(e,s),e===Vs&&(ts=Vs=null,po=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||MO||(MO=!0,Qwe(X$,function(){return _b(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Wl.transition,Wl.transition=null;var o=br;br=1;var a=Qn;Qn|=4,tG.current=null,OWe(e,n),Uwe(n,e),tWe(Z7),J$=!!J7,Z7=J7=null,e.current=n,PWe(n),oqe(),Qn=a,br=o,Wl.transition=s}else e.current=n;if(MO&&(MO=!1,Wm=e,pR=i),s=e.pendingLanes,s===0&&(hg=null),lqe(n.stateNode),lu(e,Ui()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(hR)throw hR=!1,e=_z,_z=null,e;return pR&1&&e.tag!==0&&_b(),s=e.pendingLanes,s&1?e===bz?DT++:(DT=0,bz=e):DT=0,E0(),null}function _b(){if(Wm!==null){var e=Cbe(pR),t=Wl.transition,n=br;try{if(Wl.transition=null,br=16>e?16:e,Wm===null)var r=!1;else{if(e=Wm,Wm=null,pR=0,Qn&6)throw Error(qe(331));var i=Qn;for(Qn|=4,dt=e.current;dt!==null;){var s=dt,o=s.child;if(dt.flags&16){var a=s.deletions;if(a!==null){for(var u=0;u<a.length;u++){var l=a[u];for(dt=l;dt!==null;){var c=dt;switch(c.tag){case 0:case 11:case 15:RT(8,c,s)}var f=c.child;if(f!==null)f.return=c,dt=f;else for(;dt!==null;){c=dt;var d=c.sibling,h=c.return;if(Bwe(c),c===l){dt=null;break}if(d!==null){d.return=h,dt=d;break}dt=h}}}var p=s.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(m!==null)}}dt=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,dt=o;else e:for(;dt!==null;){if(s=dt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:RT(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,dt=y;break e}dt=s.return}}var v=e.current;for(dt=v;dt!==null;){o=dt;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,dt=_;else e:for(o=v;dt!==null;){if(a=dt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:AM(9,a)}}catch(E){Ii(a,a.return,E)}if(a===o){dt=null;break e}var b=a.sibling;if(b!==null){b.return=a.return,dt=b;break e}dt=a.return}}if(Qn=i,E0(),_d&&typeof _d.onPostCommitFiberRoot=="function")try{_d.onPostCommitFiberRoot(vM,e)}catch{}r=!0}return r}finally{br=n,Wl.transition=t}}return!1}function dse(e,t,n){t=iw(n,t),t=Iwe(e,t,1),e=dg(e,t,1),t=wa(),e!==null&&(AC(e,1,t),lu(e,t))}function Ii(e,t,n){if(e.tag===3)dse(e,e,n);else for(;t!==null;){if(t.tag===3){dse(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(hg===null||!hg.has(r))){e=iw(n,e),e=Owe(t,e,1),t=dg(t,e,1),e=wa(),t!==null&&(AC(t,1,e),lu(t,e));break}}t=t.return}}function LWe(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=wa(),e.pingedLanes|=e.suspendedLanes&n,Vs===e&&(po&n)===n&&(gs===4||gs===3&&(po&130023424)===po&&500>Ui()-rG?i1(e,0):nG|=n),lu(e,t)}function Kwe(e,t){t===0&&(e.mode&1?(t=CO,CO<<=1,!(CO&130023424)&&(CO=4194304)):t=1);var n=wa();e=bp(e,t),e!==null&&(AC(e,t,n),lu(e,n))}function MWe(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Kwe(e,n)}function FWe(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(qe(314))}r!==null&&r.delete(t),Kwe(e,n)}var Xwe;Xwe=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||au.current)ru=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return ru=!1,TWe(e,t,n);ru=!!(e.flags&131072)}else ru=!1,ci&&t.flags&1048576&&Zbe(t,sR,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Rk(e,t),e=t.pendingProps;var i=ew(t,Zo.current);vb(t,n),i=XW(null,t,r,e,i,n);var s=QW();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,uu(r)?(s=!0,rR(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,qW(t),i.updater=SM,t.stateNode=i,i._reactInternals=t,uz(t,r,e,n),t=fz(null,t,r,!0,s,n)):(t.tag=0,ci&&s&&FW(t),da(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Rk(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=jWe(r),e=Pc(r,e),i){case 0:t=cz(null,t,r,e,n);break e;case 1:t=nse(null,t,r,e,n);break e;case 11:t=ese(null,t,r,e,n);break e;case 14:t=tse(null,t,r,Pc(r.type,e),n);break e}throw Error(qe(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Pc(r,i),cz(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Pc(r,i),nse(e,t,r,i,n);case 3:e:{if(Rwe(t),e===null)throw Error(qe(387));r=t.pendingProps,s=t.memoizedState,i=s.element,rwe(e,t),uR(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=iw(Error(qe(423)),t),t=rse(e,t,r,n,i);break e}else if(r!==i){i=iw(Error(qe(424)),t),t=rse(e,t,r,n,i);break e}else for(Wu=fg(t.stateNode.containerInfo.firstChild),Ju=t,ci=!0,Lc=null,n=awe(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(tw(),r===i){t=wp(e,t,n);break e}da(e,t,r,n)}t=t.child}return t;case 5:return uwe(t),e===null&&sz(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,o=i.children,ez(r,i)?o=null:s!==null&&ez(r,s)&&(t.flags|=32),$we(e,t),da(e,t,o,n),t.child;case 6:return e===null&&sz(t),null;case 13:return Nwe(e,t,n);case 4:return WW(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=nw(t,null,r,n):da(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Pc(r,i),ese(e,t,r,i,n);case 7:return da(e,t,t.pendingProps,n),t.child;case 8:return da(e,t,t.pendingProps.children,n),t.child;case 12:return da(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,Ur(oR,r._currentValue),r._currentValue=o,s!==null)if(af(s.value,o)){if(s.children===i.children&&!au.current){t=wp(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=np(-1,n&-n),u.tag=2;var l=s.updateQueue;if(l!==null){l=l.shared;var c=l.pending;c===null?u.next=u:(u.next=c.next,c.next=u),l.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),oz(s.return,n,t),a.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(qe(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),oz(o,n,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}da(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,vb(t,n),i=Xl(i),r=r(i),t.flags|=1,da(e,t,r,n),t.child;case 14:return r=t.type,i=Pc(r,t.pendingProps),i=Pc(r.type,i),tse(e,t,r,i,n);case 15:return Pwe(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Pc(r,i),Rk(e,t),t.tag=1,uu(r)?(e=!0,rR(t)):e=!1,vb(t,n),swe(t,r,i),uz(t,r,i,n),fz(null,t,r,!0,e,n);case 19:return Dwe(e,t,n);case 22:return kwe(e,t,n)}throw Error(qe(156,t.tag))};function Qwe(e,t){return xbe(e,t)}function BWe(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zl(e,t,n,r){return new BWe(e,t,n,r)}function aG(e){return e=e.prototype,!(!e||!e.isReactComponent)}function jWe(e){if(typeof e=="function")return aG(e)?1:0;if(e!=null){if(e=e.$$typeof,e===AW)return 11;if(e===CW)return 14}return 2}function mg(e,t){var n=e.alternate;return n===null?(n=zl(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lk(e,t,n,r,i,s){var o=2;if(r=e,typeof e=="function")aG(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case j_:return s1(n.children,i,s,t);case TW:o=8,i|=8;break;case $7:return e=zl(12,n,t,i|2),e.elementType=$7,e.lanes=s,e;case R7:return e=zl(13,n,t,i),e.elementType=R7,e.lanes=s,e;case N7:return e=zl(19,n,t,i),e.elementType=N7,e.lanes=s,e;case obe:return IM(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ibe:o=10;break e;case sbe:o=9;break e;case AW:o=11;break e;case CW:o=14;break e;case Tm:o=16,r=null;break e}throw Error(qe(130,e==null?e:typeof e,""))}return t=zl(o,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function s1(e,t,n,r){return e=zl(7,e,r,t),e.lanes=n,e}function IM(e,t,n,r){return e=zl(22,e,r,t),e.elementType=obe,e.lanes=n,e.stateNode={isHidden:!1},e}function j8(e,t,n){return e=zl(6,e,null,t),e.lanes=n,e}function z8(e,t,n){return t=zl(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zWe(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=w8(0),this.expirationTimes=w8(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=w8(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function uG(e,t,n,r,i,s,o,a,u){return e=new zWe(e,t,n,a,u),t===1?(t=1,s===!0&&(t|=8)):t=0,s=zl(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},qW(s),e}function UWe(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:B_,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Jwe(e){if(!e)return Lg;e=e._reactInternals;e:{if(gv(e)!==e||e.tag!==1)throw Error(qe(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(uu(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(qe(171))}if(e.tag===1){var n=e.type;if(uu(n))return Qbe(e,n,t)}return t}function Zwe(e,t,n,r,i,s,o,a,u){return e=uG(n,r,!0,e,i,s,o,a,u),e.context=Jwe(null),n=e.current,r=wa(),i=pg(n),s=np(r,i),s.callback=t??null,dg(n,s,i),e.current.lanes=i,AC(e,i,r),lu(e,r),e}function OM(e,t,n,r){var i=t.current,s=wa(),o=pg(i);return n=Jwe(n),t.context===null?t.context=n:t.pendingContext=n,t=np(s,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=dg(i,t,o),e!==null&&(Zc(e,i,o,s),Pk(e,i,o)),o}function gR(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function hse(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function lG(e,t){hse(e,t),(e=e.alternate)&&hse(e,t)}function VWe(){return null}var eEe=typeof reportError=="function"?reportError:function(e){console.error(e)};function cG(e){this._internalRoot=e}PM.prototype.render=cG.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(qe(409));OM(e,t,null,null)};PM.prototype.unmount=cG.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;O1(function(){OM(null,e,null,null)}),t[_p]=null}};function PM(e){this._internalRoot=e}PM.prototype.unstable_scheduleHydration=function(e){if(e){var t=Pbe();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dm.length&&t!==0&&t<Dm[n].priority;n++);Dm.splice(n,0,e),n===0&&$be(e)}};function fG(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function kM(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function pse(){}function HWe(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var l=gR(o);s.call(l)}}var o=Zwe(t,r,e,0,null,!1,!1,"",pse);return e._reactRootContainer=o,e[_p]=o.current,F2(e.nodeType===8?e.parentNode:e),O1(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var l=gR(u);a.call(l)}}var u=uG(e,0,!1,null,null,!1,!1,"",pse);return e._reactRootContainer=u,e[_p]=u.current,F2(e.nodeType===8?e.parentNode:e),O1(function(){OM(t,u,n,r)}),u}function $M(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var u=gR(o);a.call(u)}}OM(t,o,e,i)}else o=HWe(n,t,e,i,r);return gR(o)}Ibe=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=FS(t.pendingLanes);n!==0&&(PW(t,n|1),lu(t,Ui()),!(Qn&6)&&(sw=Ui()+500,E0()))}break;case 13:O1(function(){var r=bp(e,1);if(r!==null){var i=wa();Zc(r,e,1,i)}}),lG(e,1)}};kW=function(e){if(e.tag===13){var t=bp(e,134217728);if(t!==null){var n=wa();Zc(t,e,134217728,n)}lG(e,134217728)}};Obe=function(e){if(e.tag===13){var t=pg(e),n=bp(e,t);if(n!==null){var r=wa();Zc(n,e,t,r)}lG(e,t)}};Pbe=function(){return br};kbe=function(e,t){var n=br;try{return br=e,t()}finally{br=n}};H7=function(e,t,n){switch(t){case"input":if(M7(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=EM(r);if(!i)throw Error(qe(90));ube(r),M7(r,i)}}}break;case"textarea":cbe(e,n);break;case"select":t=n.value,t!=null&&pb(e,!!n.multiple,t,!1)}};ybe=iG;vbe=O1;var qWe={usingClientEntryPoint:!1,Events:[IC,H_,EM,mbe,gbe,iG]},Fx={findFiberByHostInstance:My,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},WWe={bundleType:Fx.bundleType,version:Fx.version,rendererPackageName:Fx.rendererPackageName,rendererConfig:Fx.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:qp.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=wbe(e),e===null?null:e.stateNode},findFiberByHostInstance:Fx.findFiberByHostInstance||VWe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var FO=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!FO.isDisabled&&FO.supportsFiber)try{vM=FO.inject(WWe),_d=FO}catch{}}ml.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qWe;ml.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!fG(t))throw Error(qe(200));return UWe(e,t,null,n)};ml.createRoot=function(e,t){if(!fG(e))throw Error(qe(299));var n=!1,r="",i=eEe;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=uG(e,1,!1,null,null,n,!1,r,i),e[_p]=t.current,F2(e.nodeType===8?e.parentNode:e),new cG(t)};ml.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(qe(188)):(e=Object.keys(e).join(","),Error(qe(268,e)));return e=wbe(t),e=e===null?null:e.stateNode,e};ml.flushSync=function(e){return O1(e)};ml.hydrate=function(e,t,n){if(!kM(t))throw Error(qe(200));return $M(null,e,t,!0,n)};ml.hydrateRoot=function(e,t,n){if(!fG(e))throw Error(qe(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=eEe;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=Zwe(t,null,e,1,n??null,i,!1,s,o),e[_p]=t.current,F2(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new PM(t)};ml.render=function(e,t,n){if(!kM(t))throw Error(qe(200));return $M(null,e,t,!1,n)};ml.unmountComponentAtNode=function(e){if(!kM(e))throw Error(qe(40));return e._reactRootContainer?(O1(function(){$M(null,null,e,!1,function(){e._reactRootContainer=null,e[_p]=null})}),!0):!1};ml.unstable_batchedUpdates=iG;ml.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!kM(n))throw Error(qe(200));if(e==null||e._reactInternals===void 0)throw Error(qe(38));return $M(e,t,n,!1,r)};ml.version="18.2.0-next-9e3b772b8-20220608";function tEe(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(tEe)}catch(e){console.error(e)}}tEe(),Z_e.exports=ml;var yv=Z_e.exports,mse=yv;P7.createRoot=mse.createRoot,P7.hydrateRoot=mse.hydrateRoot;const nEe=A.createContext({storageEngine:void 0,setStorageEngine:()=>{}}),x0=()=>A.useContext(nEe);function GWe({children:e}){const[t,n]=L.useState(void 0),r=L.useMemo(()=>({storageEngine:t,setStorageEngine:n}),[t]);return R.jsx(nEe.Provider,{value:r,children:e})}/**
 * @remix-run/router v1.5.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function G2(){return G2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},G2.apply(this,arguments)}var Gm;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Gm||(Gm={}));const gse="popstate";function YWe(e){e===void 0&&(e={});function t(r,i){let{pathname:s,search:o,hash:a}=r.location;return xz("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:rEe(i)}return XWe(t,n,null,e)}function rs(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function dG(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function KWe(){return Math.random().toString(36).substr(2,8)}function yse(e,t){return{usr:e.state,key:e.key,idx:t}}function xz(e,t,n,r){return n===void 0&&(n=null),G2({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?_E(t):t,{state:n,key:t&&t.key||r||KWe()})}function rEe(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function _E(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function XWe(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Gm.Pop,u=null,l=c();l==null&&(l=0,o.replaceState(G2({},o.state,{idx:l}),""));function c(){return(o.state||{idx:null}).idx}function f(){a=Gm.Pop;let g=c(),y=g==null?null:g-l;l=g,u&&u({action:a,location:m.location,delta:y})}function d(g,y){a=Gm.Push;let v=xz(m.location,g,y);n&&n(v,g),l=c()+1;let _=yse(v,l),b=m.createHref(v);try{o.pushState(_,"",b)}catch{i.location.assign(b)}s&&u&&u({action:a,location:m.location,delta:1})}function h(g,y){a=Gm.Replace;let v=xz(m.location,g,y);n&&n(v,g),l=c();let _=yse(v,l),b=m.createHref(v);o.replaceState(_,"",b),s&&u&&u({action:a,location:m.location,delta:0})}function p(g){let y=i.location.origin!=="null"?i.location.origin:i.location.href,v=typeof g=="string"?g:rEe(g);return rs(y,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,y)}let m={get action(){return a},get location(){return e(i,o)},listen(g){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(gse,f),u=g,()=>{i.removeEventListener(gse,f),u=null}},createHref(g){return t(i,g)},createURL:p,encodeLocation(g){let y=p(g);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:d,replace:h,go(g){return o.go(g)}};return m}var vse;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(vse||(vse={}));function QWe(e,t,n){n===void 0&&(n="/");let r=typeof t=="string"?_E(t):t,i=oEe(r.pathname||"/",n);if(i==null)return null;let s=iEe(e);JWe(s);let o=null;for(let a=0;o==null&&a<s.length;++a)o=aGe(s[a],cGe(i));return o}function iEe(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let u={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(rs(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let l=gg([r,u.relativePath]),c=n.concat(u);s.children&&s.children.length>0&&(rs(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),iEe(s.children,t,c,l)),!(s.path==null&&!s.index)&&t.push({path:l,score:sGe(l,s.index),routesMeta:c})};return e.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let u of sEe(s.path))i(s,o,u)}),t}function sEe(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=sEe(r.join("/")),a=[];return a.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&a.push(...o),a.map(u=>e.startsWith("/")&&u===""?"/":u)}function JWe(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:oGe(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const ZWe=/^:\w+$/,eGe=3,tGe=2,nGe=1,rGe=10,iGe=-2,_se=e=>e==="*";function sGe(e,t){let n=e.split("/"),r=n.length;return n.some(_se)&&(r+=iGe),t&&(r+=tGe),n.filter(i=>!_se(i)).reduce((i,s)=>i+(ZWe.test(s)?eGe:s===""?nGe:rGe),r)}function oGe(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function aGe(e,t){let{routesMeta:n}=e,r={},i="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],u=o===n.length-1,l=i==="/"?t:t.slice(i.length)||"/",c=uGe({path:a.relativePath,caseSensitive:a.caseSensitive,end:u},l);if(!c)return null;Object.assign(r,c.params);let f=a.route;s.push({params:r,pathname:gg([i,c.pathname]),pathnameBase:pGe(gg([i,c.pathnameBase])),route:f}),c.pathnameBase!=="/"&&(i=gg([i,c.pathnameBase]))}return s}function uGe(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=lGe(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((l,c,f)=>{if(c==="*"){let d=a[f]||"";o=s.slice(0,s.length-d.length).replace(/(.)\/+$/,"$1")}return l[c]=fGe(a[f]||"",c),l},{}),pathname:s,pathnameBase:o,pattern:e}}function lGe(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),dG(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(o,a)=>(r.push(a),"/([^\\/]+)"));return e.endsWith("*")?(r.push("*"),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function cGe(e){try{return decodeURI(e)}catch(t){return dG(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function fGe(e,t){try{return decodeURIComponent(e)}catch(n){return dG(!1,'The value for the URL param "'+t+'" will not be decoded because'+(' the string "'+e+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),e}}function oEe(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function dGe(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?_E(e):e;return{pathname:n?n.startsWith("/")?n:hGe(n,t):t,search:mGe(r),hash:gGe(i)}}function hGe(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function U8(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function aEe(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function uEe(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=_E(e):(i=G2({},e),rs(!i.pathname||!i.pathname.includes("?"),U8("?","pathname","search",i)),rs(!i.pathname||!i.pathname.includes("#"),U8("#","pathname","hash",i)),rs(!i.search||!i.search.includes("#"),U8("#","search","hash",i)));let s=e===""||i.pathname==="",o=s?"/":i.pathname,a;if(r||o==null)a=n;else{let f=t.length-1;if(o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),f-=1;i.pathname=d.join("/")}a=f>=0?t[f]:"/"}let u=dGe(i,a),l=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(l||c)&&(u.pathname+="/"),u}const gg=e=>e.join("/").replace(/\/\/+/g,"/"),pGe=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),mGe=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,gGe=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function yGe(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const lEe=["post","put","patch","delete"];new Set(lEe);const vGe=["get",...lEe];new Set(vGe);/**
 * React Router v6.10.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _Ge(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}const bGe=typeof Object.is=="function"?Object.is:_Ge,{useState:wGe,useEffect:EGe,useLayoutEffect:xGe,useDebugValue:SGe}=S1;function TGe(e,t,n){const r=t(),[{inst:i},s]=wGe({inst:{value:r,getSnapshot:t}});return xGe(()=>{i.value=r,i.getSnapshot=t,V8(i)&&s({inst:i})},[e,r,t]),EGe(()=>(V8(i)&&s({inst:i}),e(()=>{V8(i)&&s({inst:i})})),[e]),SGe(r),r}function V8(e){const t=e.getSnapshot,n=e.value;try{const r=t();return!bGe(n,r)}catch{return!0}}function AGe(e,t,n){return t()}const CGe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",IGe=!CGe,OGe=IGe?AGe:TGe;"useSyncExternalStore"in S1&&(e=>e.useSyncExternalStore)(S1);const cEe=A.createContext(null),hG=A.createContext(null),RM=A.createContext(null),NM=A.createContext(null),S0=A.createContext({outlet:null,matches:[]}),fEe=A.createContext(null);function Sz(){return Sz=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Sz.apply(this,arguments)}function PGe(e,t){let{relative:n}=t===void 0?{}:t;bE()||rs(!1);let{basename:r,navigator:i}=A.useContext(RM),{hash:s,pathname:o,search:a}=RGe(e,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:gg([r,o])),i.createHref({pathname:u,search:a,hash:s})}function bE(){return A.useContext(NM)!=null}function DM(){return bE()||rs(!1),A.useContext(NM).location}function vv(){bE()||rs(!1);let{basename:e,navigator:t}=A.useContext(RM),{matches:n}=A.useContext(S0),{pathname:r}=DM(),i=JSON.stringify(aEe(n).map(a=>a.pathnameBase)),s=A.useRef(!1);return A.useEffect(()=>{s.current=!0}),A.useCallback(function(a,u){if(u===void 0&&(u={}),!s.current)return;if(typeof a=="number"){t.go(a);return}let l=uEe(a,JSON.parse(i),r,u.relative==="path");e!=="/"&&(l.pathname=l.pathname==="/"?e:gg([e,l.pathname])),(u.replace?t.replace:t.push)(l,u.state,u)},[e,t,i,r])}const kGe=A.createContext(null);function $Ge(e){let t=A.useContext(S0).outlet;return t&&A.createElement(kGe.Provider,{value:e},t)}function LM(){let{matches:e}=A.useContext(S0),t=e[e.length-1];return t?t.params:{}}function RGe(e,t){let{relative:n}=t===void 0?{}:t,{matches:r}=A.useContext(S0),{pathname:i}=DM(),s=JSON.stringify(aEe(r).map(o=>o.pathnameBase));return A.useMemo(()=>uEe(e,JSON.parse(s),i,n==="path"),[e,s,i,n])}function dEe(e,t){bE()||rs(!1);let{navigator:n}=A.useContext(RM),r=A.useContext(hG),{matches:i}=A.useContext(S0),s=i[i.length-1],o=s?s.params:{};s&&s.pathname;let a=s?s.pathnameBase:"/";s&&s.route;let u=DM(),l;if(t){var c;let m=typeof t=="string"?_E(t):t;a==="/"||(c=m.pathname)!=null&&c.startsWith(a)||rs(!1),l=m}else l=u;let f=l.pathname||"/",d=a==="/"?f:f.slice(a.length)||"/",h=QWe(e,{pathname:d}),p=MGe(h&&h.map(m=>Object.assign({},m,{params:Object.assign({},o,m.params),pathname:gg([a,n.encodeLocation?n.encodeLocation(m.pathname).pathname:m.pathname]),pathnameBase:m.pathnameBase==="/"?a:gg([a,n.encodeLocation?n.encodeLocation(m.pathnameBase).pathname:m.pathnameBase])})),i,r||void 0);return t&&p?A.createElement(NM.Provider,{value:{location:Sz({pathname:"/",search:"",hash:"",state:null,key:"default"},l),navigationType:Gm.Pop}},p):p}function NGe(){let e=zGe(),t=yGe(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},t),n?A.createElement("pre",{style:i},n):null,null)}class DGe extends A.Component{constructor(t){super(t),this.state={location:t.location,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location?{error:t.error,location:t.location}:{error:t.error||n.error,location:n.location}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error?A.createElement(S0.Provider,{value:this.props.routeContext},A.createElement(fEe.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function LGe(e){let{routeContext:t,match:n,children:r}=e,i=A.useContext(cEe);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),A.createElement(S0.Provider,{value:t},r)}function MGe(e,t,n){if(t===void 0&&(t=[]),e==null)if(n!=null&&n.errors)e=n.matches;else return null;let r=e,i=n==null?void 0:n.errors;if(i!=null){let s=r.findIndex(o=>o.route.id&&(i==null?void 0:i[o.route.id]));s>=0||rs(!1),r=r.slice(0,Math.min(r.length,s+1))}return r.reduceRight((s,o,a)=>{let u=o.route.id?i==null?void 0:i[o.route.id]:null,l=null;n&&(o.route.ErrorBoundary?l=A.createElement(o.route.ErrorBoundary,null):o.route.errorElement?l=o.route.errorElement:l=A.createElement(NGe,null));let c=t.concat(r.slice(0,a+1)),f=()=>{let d=s;return u?d=l:o.route.Component?d=A.createElement(o.route.Component,null):o.route.element&&(d=o.route.element),A.createElement(LGe,{match:o,routeContext:{outlet:s,matches:c},children:d})};return n&&(o.route.ErrorBoundary||o.route.errorElement||a===0)?A.createElement(DGe,{location:n.location,component:l,error:u,children:f(),routeContext:{outlet:null,matches:c}}):f()},null)}var bse;(function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator"})(bse||(bse={}));var yR;(function(e){e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator"})(yR||(yR={}));function FGe(e){let t=A.useContext(hG);return t||rs(!1),t}function BGe(e){let t=A.useContext(S0);return t||rs(!1),t}function jGe(e){let t=BGe(),n=t.matches[t.matches.length-1];return n.route.id||rs(!1),n.route.id}function zGe(){var e;let t=A.useContext(fEe),n=FGe(yR.UseRouteError),r=jGe(yR.UseRouteError);return t||((e=n.errors)==null?void 0:e[r])}function UGe(e){let{to:t,replace:n,state:r,relative:i}=e;bE()||rs(!1);let s=A.useContext(hG),o=vv();return A.useEffect(()=>{s&&s.navigation.state!=="idle"||o(t,{replace:n,state:r,relative:i})}),null}function VGe(e){return $Ge(e.context)}function Mk(e){rs(!1)}function HGe(e){let{basename:t="/",children:n=null,location:r,navigationType:i=Gm.Pop,navigator:s,static:o=!1}=e;bE()&&rs(!1);let a=t.replace(/^\/*/,"/"),u=A.useMemo(()=>({basename:a,navigator:s,static:o}),[a,s,o]);typeof r=="string"&&(r=_E(r));let{pathname:l="/",search:c="",hash:f="",state:d=null,key:h="default"}=r,p=A.useMemo(()=>{let m=oEe(l,a);return m==null?null:{location:{pathname:m,search:c,hash:f,state:d,key:h},navigationType:i}},[a,l,c,f,d,h,i]);return p==null?null:A.createElement(RM.Provider,{value:u},A.createElement(NM.Provider,{children:n,value:p}))}function qGe(e){let{children:t,location:n}=e,r=A.useContext(cEe),i=r&&!t?r.router.routes:Tz(t);return dEe(i,n)}var wse;(function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"})(wse||(wse={}));new Promise(()=>{});function Tz(e,t){t===void 0&&(t=[]);let n=[];return A.Children.forEach(e,(r,i)=>{if(!A.isValidElement(r))return;let s=[...t,i];if(r.type===A.Fragment){n.push.apply(n,Tz(r.props.children,s));return}r.type!==Mk&&rs(!1),!r.props.index||!r.props.children||rs(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Tz(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.10.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Az(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function WGe(e,t){let n=Az(e);if(t)for(let r of t.keys())n.has(r)||t.getAll(r).forEach(i=>{n.append(r,i)});return n}function GGe(e){let{basename:t,children:n,window:r}=e,i=A.useRef();i.current==null&&(i.current=YWe({window:r,v5Compat:!0}));let s=i.current,[o,a]=A.useState({action:s.action,location:s.location});return A.useLayoutEffect(()=>s.listen(a),[s]),A.createElement(HGe,{basename:t,children:n,location:o.location,navigationType:o.action,navigator:s})}var Ese;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(Ese||(Ese={}));var xse;(function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(xse||(xse={}));function pG(e){let t=A.useRef(Az(e)),n=A.useRef(!1),r=DM(),i=A.useMemo(()=>WGe(r.search,n.current?null:t.current),[r.search]),s=vv(),o=A.useCallback((a,u)=>{const l=Az(typeof a=="function"?a(i):a);n.current=!0,s("?"+l,u)},[s,i]);return[i,o]}function vR(e,t){let n=e;for(;(n=n.parentElement)&&!n.matches(t););return n}function YGe(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].disabled)return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].disabled)return r}return e}function KGe(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].disabled)return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].disabled)return r}return e}function XGe(e,t,n){return vR(e,n)===vR(t,n)}function QGe({parentSelector:e,siblingSelector:t,onKeyDown:n,loop:r=!0,activateOnFocus:i=!1,dir:s="rtl",orientation:o}){return a=>{var u;n==null||n(a);const l=Array.from(((u=vR(a.currentTarget,e))==null?void 0:u.querySelectorAll(t))||[]).filter(m=>XGe(a.currentTarget,m,e)),c=l.findIndex(m=>a.currentTarget===m),f=KGe(c,l,r),d=YGe(c,l,r),h=s==="rtl"?d:f,p=s==="rtl"?f:d;switch(a.key){case"ArrowRight":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),l[h].focus(),i&&l[h].click());break}case"ArrowLeft":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),l[p].focus(),i&&l[p].click());break}case"ArrowUp":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),l[d].focus(),i&&l[d].click());break}case"ArrowDown":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),l[f].focus(),i&&l[f].click());break}case"Home":{a.stopPropagation(),a.preventDefault(),!l[0].disabled&&l[0].focus();break}case"End":{a.stopPropagation(),a.preventDefault();const m=l.length-1;!l[m].disabled&&l[m].focus();break}}}}function JGe(e,t,n){var r;return n?Array.from(((r=vR(n,t))==null?void 0:r.querySelectorAll(e))||[]).findIndex(i=>i===n):null}function hEe(e){const t=A.createContext(null);return[({children:i,value:s})=>L.createElement(t.Provider,{value:s},i),()=>{const i=A.useContext(t);if(i===null)throw new Error(e);return i}]}function P1(e){return Array.isArray(e)?e:[e]}const ZGe=()=>{};function eYe(e,t={active:!0}){return typeof e!="function"||!t.active?t.onKeyDown||ZGe:n=>{var r;n.key==="Escape"&&(e(n),(r=t.onTrigger)==null||r.call(t))}}function qh(e,t){return n=>{e==null||e(n),t==null||t(n)}}function tYe(){const[e,t]=A.useState(-1);return[e,{setHovered:t,resetHovered:()=>t(-1)}]}function pEe({data:e}){const t=[],n=[],r=e.reduce((i,s,o)=>(s.group?i[s.group]?i[s.group].push(o):i[s.group]=[o]:n.push(o),i),{});return Object.keys(r).forEach(i=>{t.push(...r[i].map(s=>e[s]))}),t.push(...n.map(i=>e[i])),t}function PC(e){return Array.isArray(e)||e===null?!1:typeof e=="object"?e.type!==L.Fragment:!1}function mEe(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=mEe(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function gEe(){for(var e=0,t,n,r="";e<arguments.length;)(t=arguments[e++])&&(n=mEe(t))&&(r&&(r+=" "),r+=n);return r}const nYe={dark:["#C1C2C5","#A6A7AB","#909296","#5c5f66","#373A40","#2C2E33","#25262b","#1A1B1E","#141517","#101113"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]};function rYe(e){return()=>({fontFamily:e.fontFamily||"sans-serif"})}var iYe=Object.defineProperty,Sse=Object.getOwnPropertySymbols,sYe=Object.prototype.hasOwnProperty,oYe=Object.prototype.propertyIsEnumerable,Tse=(e,t,n)=>t in e?iYe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ase=(e,t)=>{for(var n in t||(t={}))sYe.call(t,n)&&Tse(e,n,t[n]);if(Sse)for(var n of Sse(t))oYe.call(t,n)&&Tse(e,n,t[n]);return e};function aYe(e){return t=>({WebkitTapHighlightColor:"transparent",[t||"&:focus"]:Ase({},e.focusRing==="always"||e.focusRing==="auto"?e.focusRingStyles.styles(e):e.focusRingStyles.resetStyles(e)),[t?t.replace(":focus",":focus:not(:focus-visible)"):"&:focus:not(:focus-visible)"]:Ase({},e.focusRing==="auto"||e.focusRing==="never"?e.focusRingStyles.resetStyles(e):null)})}function kC(e){return t=>typeof e.primaryShade=="number"?e.primaryShade:e.primaryShade[t||e.colorScheme]}function mG(e){const t=kC(e);return(n,r,i=!0,s=!0)=>{if(typeof n=="string"&&n.includes(".")){const[a,u]=n.split("."),l=parseInt(u,10);if(a in e.colors&&l>=0&&l<10)return e.colors[a][typeof r=="number"&&!s?r:l]}const o=typeof r=="number"?r:t();return n in e.colors?e.colors[n][o]:i?e.colors[e.primaryColor][o]:n}}function yEe(e){let t="";for(let n=1;n<e.length-1;n+=1)t+=`${e[n]} ${n/(e.length-1)*100}%, `;return`${e[0]} 0%, ${t}${e[e.length-1]} 100%`}function uYe(e,...t){return`linear-gradient(${e}deg, ${yEe(t)})`}function lYe(...e){return`radial-gradient(circle, ${yEe(e)})`}function vEe(e){const t=mG(e),n=kC(e);return r=>{const i={from:(r==null?void 0:r.from)||e.defaultGradient.from,to:(r==null?void 0:r.to)||e.defaultGradient.to,deg:(r==null?void 0:r.deg)||e.defaultGradient.deg};return`linear-gradient(${i.deg}deg, ${t(i.from,n(),!1)} 0%, ${t(i.to,n(),!1)} 100%)`}}function gG(e){if(typeof e.size=="number")return e.size;const t=e.sizes[e.size];return t!==void 0?t:e.size||e.sizes.md}function cYe(e){return t=>`@media (min-width: ${gG({size:t,sizes:e.breakpoints})}px)`}function fYe(e){return t=>`@media (max-width: ${gG({size:t,sizes:e.breakpoints})-1}px)`}function dYe(e){return/^#?([0-9A-F]{3}){1,2}$/i.test(e)}function hYe(e){let t=e.replace("#","");if(t.length===3){const o=t.split("");t=[o[0],o[0],o[1],o[1],o[2],o[2]].join("")}const n=parseInt(t,16),r=n>>16&255,i=n>>8&255,s=n&255;return{r,g:i,b:s,a:1}}function pYe(e){const[t,n,r,i]=e.replace(/[^0-9,.]/g,"").split(",").map(Number);return{r:t,g:n,b:r,a:i||1}}function yG(e){return dYe(e)?hYe(e):e.startsWith("rgb")?pYe(e):{r:0,g:0,b:0,a:1}}function C_(e,t){if(typeof e!="string"||t>1||t<0)return"rgba(0, 0, 0, 1)";const{r:n,g:r,b:i}=yG(e);return`rgba(${n}, ${r}, ${i}, ${t})`}function mYe(e=0){return{position:"absolute",top:e,right:e,left:e,bottom:e}}function gYe(e,t){const{r:n,g:r,b:i,a:s}=yG(e),o=1-t,a=u=>Math.round(u*o);return`rgba(${a(n)}, ${a(r)}, ${a(i)}, ${s})`}function yYe(e,t){const{r:n,g:r,b:i,a:s}=yG(e),o=a=>Math.round(a+(255-a)*t);return`rgba(${o(n)}, ${o(r)}, ${o(i)}, ${s})`}function vYe(e){return t=>{if(typeof t=="number")return t;const n=typeof e.defaultRadius=="number"?e.defaultRadius:e.radius[e.defaultRadius]||e.defaultRadius;return e.radius[t]||t||n}}function _Ye(e,t){if(typeof e=="string"&&e.includes(".")){const[n,r]=e.split("."),i=parseInt(r,10);if(n in t.colors&&i>=0&&i<10)return{isSplittedColor:!0,key:n,shade:i}}return{isSplittedColor:!1}}function bYe(e){const t=mG(e),n=kC(e),r=vEe(e);return({variant:i,color:s,gradient:o,primaryFallback:a})=>{const u=_Ye(s,e);switch(i){case"light":return{border:"transparent",background:C_(t(s,e.colorScheme==="dark"?8:0,a,!1),e.colorScheme==="dark"?.2:1),color:s==="dark"?e.colorScheme==="dark"?e.colors.dark[0]:e.colors.dark[9]:t(s,e.colorScheme==="dark"?2:n("light")),hover:C_(t(s,e.colorScheme==="dark"?7:1,a,!1),e.colorScheme==="dark"?.25:.65)};case"subtle":return{border:"transparent",background:"transparent",color:s==="dark"?e.colorScheme==="dark"?e.colors.dark[0]:e.colors.dark[9]:t(s,e.colorScheme==="dark"?2:n("light")),hover:C_(t(s,e.colorScheme==="dark"?8:0,a,!1),e.colorScheme==="dark"?.2:1)};case"outline":return{border:t(s,e.colorScheme==="dark"?5:n("light")),background:"transparent",color:t(s,e.colorScheme==="dark"?5:n("light")),hover:e.colorScheme==="dark"?C_(t(s,5,a,!1),.05):C_(t(s,0,a,!1),.35)};case"default":return{border:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[4],background:e.colorScheme==="dark"?e.colors.dark[6]:e.white,color:e.colorScheme==="dark"?e.white:e.black,hover:e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[0]};case"white":return{border:"transparent",background:e.white,color:t(s,n()),hover:null};case"transparent":return{border:"transparent",color:s==="dark"?e.colorScheme==="dark"?e.colors.dark[0]:e.colors.dark[9]:t(s,e.colorScheme==="dark"?2:n("light")),background:"transparent",hover:null};case"gradient":return{background:r(o),color:e.white,border:"transparent",hover:null};default:{const l=n(),c=u.isSplittedColor?u.shade:l,f=u.isSplittedColor?u.key:s;return{border:"transparent",background:t(f,c,a),color:e.white,hover:t(f,c===9?8:c+1)}}}}}function wYe(e){return t=>{const n=kC(e)(t);return e.colors[e.primaryColor][n]}}function EYe(e){return{"@media (hover: hover)":{"&:hover":e},"@media (hover: none)":{"&:active":e}}}const Os={fontStyles:rYe,themeColor:mG,focusStyles:aYe,linearGradient:uYe,radialGradient:lYe,smallerThan:fYe,largerThan:cYe,rgba:C_,size:gG,cover:mYe,darken:gYe,lighten:yYe,radius:vYe,variant:bYe,primaryShade:kC,hover:EYe,gradient:vEe,primaryColor:wYe};var xYe=Object.defineProperty,SYe=Object.defineProperties,TYe=Object.getOwnPropertyDescriptors,Cse=Object.getOwnPropertySymbols,AYe=Object.prototype.hasOwnProperty,CYe=Object.prototype.propertyIsEnumerable,Ise=(e,t,n)=>t in e?xYe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,IYe=(e,t)=>{for(var n in t||(t={}))AYe.call(t,n)&&Ise(e,n,t[n]);if(Cse)for(var n of Cse(t))CYe.call(t,n)&&Ise(e,n,t[n]);return e},OYe=(e,t)=>SYe(e,TYe(t));function PYe(e){return OYe(IYe({},e),{fn:{fontStyles:Os.fontStyles(e),themeColor:Os.themeColor(e),focusStyles:Os.focusStyles(e),largerThan:Os.largerThan(e),smallerThan:Os.smallerThan(e),radialGradient:Os.radialGradient,linearGradient:Os.linearGradient,gradient:Os.gradient(e),rgba:Os.rgba,size:Os.size,cover:Os.cover,lighten:Os.lighten,darken:Os.darken,primaryShade:Os.primaryShade(e),radius:Os.radius(e),variant:Os.variant(e),hover:Os.hover,primaryColor:Os.primaryColor(e)}})}const kYe=["xs","sm","md","lg","xl"],$Ye={dir:"ltr",primaryShade:{light:6,dark:8},focusRing:"auto",loader:"oval",dateFormat:"MMMM D, YYYY",colorScheme:"light",white:"#fff",black:"#000",defaultRadius:"sm",transitionTimingFunction:"ease",colors:nYe,lineHeight:1.55,fontFamily:"-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",primaryColor:"blue",respectReducedMotion:!0,cursorType:"default",defaultGradient:{from:"indigo",to:"cyan",deg:45},shadows:{xs:"0 1px 3px rgba(0, 0, 0, 0.05), 0 1px 2px rgba(0, 0, 0, 0.1)",sm:"0 1px 3px rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0px 10px 15px -5px, rgba(0, 0, 0, 0.04) 0px 7px 7px -5px",md:"0 1px 3px rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0px 20px 25px -5px, rgba(0, 0, 0, 0.04) 0px 10px 10px -5px",lg:"0 1px 3px rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0px 28px 23px -7px, rgba(0, 0, 0, 0.04) 0px 12px 12px -7px",xl:"0 1px 3px rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0px 36px 28px -7px, rgba(0, 0, 0, 0.04) 0px 17px 17px -7px"},fontSizes:{xs:12,sm:14,md:16,lg:18,xl:20},radius:{xs:2,sm:4,md:8,lg:16,xl:32},spacing:{xs:10,sm:12,md:16,lg:20,xl:24},breakpoints:{xs:576,sm:768,md:992,lg:1200,xl:1400},headings:{fontFamily:"-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",fontWeight:700,sizes:{h1:{fontSize:34,lineHeight:1.3,fontWeight:void 0},h2:{fontSize:26,lineHeight:1.35,fontWeight:void 0},h3:{fontSize:22,lineHeight:1.4,fontWeight:void 0},h4:{fontSize:18,lineHeight:1.45,fontWeight:void 0},h5:{fontSize:16,lineHeight:1.5,fontWeight:void 0},h6:{fontSize:14,lineHeight:1.5,fontWeight:void 0}}},other:{},components:{},activeStyles:{transform:"translateY(1px)"},datesLocale:"en",globalStyles:void 0,focusRingStyles:{styles:e=>({outlineOffset:2,outline:`2px solid ${e.colors[e.primaryColor][e.colorScheme==="dark"?7:5]}`}),resetStyles:()=>({outline:"none"}),inputStyles:e=>({outline:"none",borderColor:e.colors[e.primaryColor][typeof e.primaryShade=="object"?e.primaryShade[e.colorScheme]:e.primaryShade]})}},_Ee=PYe($Ye);function RYe(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function NYe(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var DYe=function(){function e(n){var r=this;this._insertTag=function(i){var s;r.tags.length===0?r.insertionPoint?s=r.insertionPoint.nextSibling:r.prepend?s=r.container.firstChild:s=r.before:s=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,s),r.tags.push(i)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(r){r.forEach(this._insertTag)},t.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(NYe(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var s=RYe(i);try{s.insertRule(r,s.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(r));this.ctr++},t.flush=function(){this.tags.forEach(function(r){return r.parentNode&&r.parentNode.removeChild(r)}),this.tags=[],this.ctr=0},e}(),Ro="-ms-",_R="-moz-",lr="-webkit-",bEe="comm",vG="rule",_G="decl",LYe="@import",wEe="@keyframes",MYe=Math.abs,MM=String.fromCharCode,FYe=Object.assign;function BYe(e,t){return ao(e,0)^45?(((t<<2^ao(e,0))<<2^ao(e,1))<<2^ao(e,2))<<2^ao(e,3):0}function EEe(e){return e.trim()}function jYe(e,t){return(e=t.exec(e))?e[0]:e}function mr(e,t,n){return e.replace(t,n)}function Cz(e,t){return e.indexOf(t)}function ao(e,t){return e.charCodeAt(t)|0}function Y2(e,t,n){return e.slice(t,n)}function Xf(e){return e.length}function bG(e){return e.length}function BO(e,t){return t.push(e),e}function zYe(e,t){return e.map(t).join("")}var FM=1,ow=1,xEe=0,pu=0,Zi=0,wE="";function BM(e,t,n,r,i,s,o){return{value:e,root:t,parent:n,type:r,props:i,children:s,line:FM,column:ow,length:o,return:""}}function Bx(e,t){return FYe(BM("",null,null,"",null,null,0),e,{length:-e.length},t)}function UYe(){return Zi}function VYe(){return Zi=pu>0?ao(wE,--pu):0,ow--,Zi===10&&(ow=1,FM--),Zi}function Zu(){return Zi=pu<xEe?ao(wE,pu++):0,ow++,Zi===10&&(ow=1,FM++),Zi}function wd(){return ao(wE,pu)}function Fk(){return pu}function $C(e,t){return Y2(wE,e,t)}function K2(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function SEe(e){return FM=ow=1,xEe=Xf(wE=e),pu=0,[]}function TEe(e){return wE="",e}function Bk(e){return EEe($C(pu-1,Iz(e===91?e+2:e===40?e+1:e)))}function HYe(e){for(;(Zi=wd())&&Zi<33;)Zu();return K2(e)>2||K2(Zi)>3?"":" "}function qYe(e,t){for(;--t&&Zu()&&!(Zi<48||Zi>102||Zi>57&&Zi<65||Zi>70&&Zi<97););return $C(e,Fk()+(t<6&&wd()==32&&Zu()==32))}function Iz(e){for(;Zu();)switch(Zi){case e:return pu;case 34:case 39:e!==34&&e!==39&&Iz(Zi);break;case 40:e===41&&Iz(e);break;case 92:Zu();break}return pu}function WYe(e,t){for(;Zu()&&e+Zi!==57;)if(e+Zi===84&&wd()===47)break;return"/*"+$C(t,pu-1)+"*"+MM(e===47?e:Zu())}function GYe(e){for(;!K2(wd());)Zu();return $C(e,pu)}function YYe(e){return TEe(jk("",null,null,null,[""],e=SEe(e),0,[0],e))}function jk(e,t,n,r,i,s,o,a,u){for(var l=0,c=0,f=o,d=0,h=0,p=0,m=1,g=1,y=1,v=0,_="",b=i,E=s,w=r,x=_;g;)switch(p=v,v=Zu()){case 40:if(p!=108&&ao(x,f-1)==58){Cz(x+=mr(Bk(v),"&","&\f"),"&\f")!=-1&&(y=-1);break}case 34:case 39:case 91:x+=Bk(v);break;case 9:case 10:case 13:case 32:x+=HYe(p);break;case 92:x+=qYe(Fk()-1,7);continue;case 47:switch(wd()){case 42:case 47:BO(KYe(WYe(Zu(),Fk()),t,n),u);break;default:x+="/"}break;case 123*m:a[l++]=Xf(x)*y;case 125*m:case 59:case 0:switch(v){case 0:case 125:g=0;case 59+c:h>0&&Xf(x)-f&&BO(h>32?Pse(x+";",r,n,f-1):Pse(mr(x," ","")+";",r,n,f-2),u);break;case 59:x+=";";default:if(BO(w=Ose(x,t,n,l,c,i,a,_,b=[],E=[],f),s),v===123)if(c===0)jk(x,t,w,w,b,s,f,a,E);else switch(d===99&&ao(x,3)===110?100:d){case 100:case 109:case 115:jk(e,w,w,r&&BO(Ose(e,w,w,0,0,i,a,_,i,b=[],f),E),i,E,f,a,r?b:E);break;default:jk(x,w,w,w,[""],E,0,a,E)}}l=c=h=0,m=y=1,_=x="",f=o;break;case 58:f=1+Xf(x),h=p;default:if(m<1){if(v==123)--m;else if(v==125&&m++==0&&VYe()==125)continue}switch(x+=MM(v),v*m){case 38:y=c>0?1:(x+="\f",-1);break;case 44:a[l++]=(Xf(x)-1)*y,y=1;break;case 64:wd()===45&&(x+=Bk(Zu())),d=wd(),c=f=Xf(_=x+=GYe(Fk())),v++;break;case 45:p===45&&Xf(x)==2&&(m=0)}}return s}function Ose(e,t,n,r,i,s,o,a,u,l,c){for(var f=i-1,d=i===0?s:[""],h=bG(d),p=0,m=0,g=0;p<r;++p)for(var y=0,v=Y2(e,f+1,f=MYe(m=o[p])),_=e;y<h;++y)(_=EEe(m>0?d[y]+" "+v:mr(v,/&\f/g,d[y])))&&(u[g++]=_);return BM(e,t,n,i===0?vG:a,u,l,c)}function KYe(e,t,n){return BM(e,t,n,bEe,MM(UYe()),Y2(e,2,-2),0)}function Pse(e,t,n,r){return BM(e,t,n,_G,Y2(e,0,r),Y2(e,r+1,-1),r)}function bb(e,t){for(var n="",r=bG(e),i=0;i<r;i++)n+=t(e[i],i,e,t)||"";return n}function XYe(e,t,n,r){switch(e.type){case LYe:case _G:return e.return=e.return||e.value;case bEe:return"";case wEe:return e.return=e.value+"{"+bb(e.children,r)+"}";case vG:e.value=e.props.join(",")}return Xf(n=bb(e.children,r))?e.return=e.value+"{"+n+"}":""}function QYe(e){var t=bG(e);return function(n,r,i,s){for(var o="",a=0;a<t;a++)o+=e[a](n,r,i,s)||"";return o}}function JYe(e){return function(t){t.root||(t=t.return)&&e(t)}}function ZYe(e){var t=Object.create(null);return function(n){return t[n]===void 0&&(t[n]=e(n)),t[n]}}var eKe=function(t,n,r){for(var i=0,s=0;i=s,s=wd(),i===38&&s===12&&(n[r]=1),!K2(s);)Zu();return $C(t,pu)},tKe=function(t,n){var r=-1,i=44;do switch(K2(i)){case 0:i===38&&wd()===12&&(n[r]=1),t[r]+=eKe(pu-1,n,r);break;case 2:t[r]+=Bk(i);break;case 4:if(i===44){t[++r]=wd()===58?"&\f":"",n[r]=t[r].length;break}default:t[r]+=MM(i)}while(i=Zu());return t},nKe=function(t,n){return TEe(tKe(SEe(t),n))},kse=new WeakMap,rKe=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var n=t.value,r=t.parent,i=t.column===r.column&&t.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(t.props.length===1&&n.charCodeAt(0)!==58&&!kse.get(r))&&!i){kse.set(t,!0);for(var s=[],o=nKe(n,s),a=r.props,u=0,l=0;u<o.length;u++)for(var c=0;c<a.length;c++,l++)t.props[l]=s[u]?o[u].replace(/&\f/g,a[c]):a[c]+" "+o[u]}}},iKe=function(t){if(t.type==="decl"){var n=t.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(t.return="",t.value="")}};function AEe(e,t){switch(BYe(e,t)){case 5103:return lr+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return lr+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return lr+e+_R+e+Ro+e+e;case 6828:case 4268:return lr+e+Ro+e+e;case 6165:return lr+e+Ro+"flex-"+e+e;case 5187:return lr+e+mr(e,/(\w+).+(:[^]+)/,lr+"box-$1$2"+Ro+"flex-$1$2")+e;case 5443:return lr+e+Ro+"flex-item-"+mr(e,/flex-|-self/,"")+e;case 4675:return lr+e+Ro+"flex-line-pack"+mr(e,/align-content|flex-|-self/,"")+e;case 5548:return lr+e+Ro+mr(e,"shrink","negative")+e;case 5292:return lr+e+Ro+mr(e,"basis","preferred-size")+e;case 6060:return lr+"box-"+mr(e,"-grow","")+lr+e+Ro+mr(e,"grow","positive")+e;case 4554:return lr+mr(e,/([^-])(transform)/g,"$1"+lr+"$2")+e;case 6187:return mr(mr(mr(e,/(zoom-|grab)/,lr+"$1"),/(image-set)/,lr+"$1"),e,"")+e;case 5495:case 3959:return mr(e,/(image-set\([^]*)/,lr+"$1$`$1");case 4968:return mr(mr(e,/(.+:)(flex-)?(.*)/,lr+"box-pack:$3"+Ro+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+lr+e+e;case 4095:case 3583:case 4068:case 2532:return mr(e,/(.+)-inline(.+)/,lr+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Xf(e)-1-t>6)switch(ao(e,t+1)){case 109:if(ao(e,t+4)!==45)break;case 102:return mr(e,/(.+:)(.+)-([^]+)/,"$1"+lr+"$2-$3$1"+_R+(ao(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~Cz(e,"stretch")?AEe(mr(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(ao(e,t+1)!==115)break;case 6444:switch(ao(e,Xf(e)-3-(~Cz(e,"!important")&&10))){case 107:return mr(e,":",":"+lr)+e;case 101:return mr(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+lr+(ao(e,14)===45?"inline-":"")+"box$3$1"+lr+"$2$3$1"+Ro+"$2box$3")+e}break;case 5936:switch(ao(e,t+11)){case 114:return lr+e+Ro+mr(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return lr+e+Ro+mr(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return lr+e+Ro+mr(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return lr+e+Ro+e+e}return e}var sKe=function(t,n,r,i){if(t.length>-1&&!t.return)switch(t.type){case _G:t.return=AEe(t.value,t.length);break;case wEe:return bb([Bx(t,{value:mr(t.value,"@","@"+lr)})],i);case vG:if(t.length)return zYe(t.props,function(s){switch(jYe(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return bb([Bx(t,{props:[mr(s,/:(read-\w+)/,":"+_R+"$1")]})],i);case"::placeholder":return bb([Bx(t,{props:[mr(s,/:(plac\w+)/,":"+lr+"input-$1")]}),Bx(t,{props:[mr(s,/:(plac\w+)/,":"+_R+"$1")]}),Bx(t,{props:[mr(s,/:(plac\w+)/,Ro+"input-$1")]})],i)}return""})}},oKe=[sKe],CEe=function(t){var n=t.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(m){var g=m.getAttribute("data-emotion");g.indexOf(" ")!==-1&&(document.head.appendChild(m),m.setAttribute("data-s",""))})}var i=t.stylisPlugins||oKe,s={},o,a=[];o=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(m){for(var g=m.getAttribute("data-emotion").split(" "),y=1;y<g.length;y++)s[g[y]]=!0;a.push(m)});var u,l=[rKe,iKe];{var c,f=[XYe,JYe(function(m){c.insert(m)})],d=QYe(l.concat(i,f)),h=function(g){return bb(YYe(g),d)};u=function(g,y,v,_){c=v,h(g?g+"{"+y.styles+"}":y.styles),_&&(p.inserted[y.name]=!0)}}var p={key:n,sheet:new DYe({key:n,container:o,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:s,registered:{},insert:u};return p.sheet.hydrate(a),p};function di(){return di=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},di.apply(this,arguments)}var IEe={exports:{}},Er={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gs=typeof Symbol=="function"&&Symbol.for,wG=Gs?Symbol.for("react.element"):60103,EG=Gs?Symbol.for("react.portal"):60106,jM=Gs?Symbol.for("react.fragment"):60107,zM=Gs?Symbol.for("react.strict_mode"):60108,UM=Gs?Symbol.for("react.profiler"):60114,VM=Gs?Symbol.for("react.provider"):60109,HM=Gs?Symbol.for("react.context"):60110,xG=Gs?Symbol.for("react.async_mode"):60111,qM=Gs?Symbol.for("react.concurrent_mode"):60111,WM=Gs?Symbol.for("react.forward_ref"):60112,GM=Gs?Symbol.for("react.suspense"):60113,aKe=Gs?Symbol.for("react.suspense_list"):60120,YM=Gs?Symbol.for("react.memo"):60115,KM=Gs?Symbol.for("react.lazy"):60116,uKe=Gs?Symbol.for("react.block"):60121,lKe=Gs?Symbol.for("react.fundamental"):60117,cKe=Gs?Symbol.for("react.responder"):60118,fKe=Gs?Symbol.for("react.scope"):60119;function yl(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case wG:switch(e=e.type,e){case xG:case qM:case jM:case UM:case zM:case GM:return e;default:switch(e=e&&e.$$typeof,e){case HM:case WM:case KM:case YM:case VM:return e;default:return t}}case EG:return t}}}function OEe(e){return yl(e)===qM}Er.AsyncMode=xG;Er.ConcurrentMode=qM;Er.ContextConsumer=HM;Er.ContextProvider=VM;Er.Element=wG;Er.ForwardRef=WM;Er.Fragment=jM;Er.Lazy=KM;Er.Memo=YM;Er.Portal=EG;Er.Profiler=UM;Er.StrictMode=zM;Er.Suspense=GM;Er.isAsyncMode=function(e){return OEe(e)||yl(e)===xG};Er.isConcurrentMode=OEe;Er.isContextConsumer=function(e){return yl(e)===HM};Er.isContextProvider=function(e){return yl(e)===VM};Er.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===wG};Er.isForwardRef=function(e){return yl(e)===WM};Er.isFragment=function(e){return yl(e)===jM};Er.isLazy=function(e){return yl(e)===KM};Er.isMemo=function(e){return yl(e)===YM};Er.isPortal=function(e){return yl(e)===EG};Er.isProfiler=function(e){return yl(e)===UM};Er.isStrictMode=function(e){return yl(e)===zM};Er.isSuspense=function(e){return yl(e)===GM};Er.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===jM||e===qM||e===UM||e===zM||e===GM||e===aKe||typeof e=="object"&&e!==null&&(e.$$typeof===KM||e.$$typeof===YM||e.$$typeof===VM||e.$$typeof===HM||e.$$typeof===WM||e.$$typeof===lKe||e.$$typeof===cKe||e.$$typeof===fKe||e.$$typeof===uKe)};Er.typeOf=yl;IEe.exports=Er;var dKe=IEe.exports,PEe=dKe,hKe={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},pKe={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},kEe={};kEe[PEe.ForwardRef]=hKe;kEe[PEe.Memo]=pKe;var mKe=!0;function gKe(e,t,n){var r="";return n.split(" ").forEach(function(i){e[i]!==void 0?t.push(e[i]+";"):r+=i+" "}),r}var yKe=function(t,n,r){var i=t.key+"-"+n.name;(r===!1||mKe===!1)&&t.registered[i]===void 0&&(t.registered[i]=n.styles)},$Ee=function(t,n,r){yKe(t,n,r);var i=t.key+"-"+n.name;if(t.inserted[n.name]===void 0){var s=n;do t.insert(n===s?"."+i:"",s,t.sheet,!0),s=s.next;while(s!==void 0)}};function vKe(e){for(var t=0,n,r=0,i=e.length;i>=4;++r,i-=4)n=e.charCodeAt(r)&255|(e.charCodeAt(++r)&255)<<8|(e.charCodeAt(++r)&255)<<16|(e.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,t=(n&65535)*1540483477+((n>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(i){case 3:t^=(e.charCodeAt(r+2)&255)<<16;case 2:t^=(e.charCodeAt(r+1)&255)<<8;case 1:t^=e.charCodeAt(r)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var _Ke={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},bKe=/[A-Z]|^ms/g,wKe=/_EMO_([^_]+?)_([^]*?)_EMO_/g,REe=function(t){return t.charCodeAt(1)===45},$se=function(t){return t!=null&&typeof t!="boolean"},H8=ZYe(function(e){return REe(e)?e:e.replace(bKe,"-$&").toLowerCase()}),Rse=function(t,n){switch(t){case"animation":case"animationName":if(typeof n=="string")return n.replace(wKe,function(r,i,s){return Qf={name:i,styles:s,next:Qf},i})}return _Ke[t]!==1&&!REe(t)&&typeof n=="number"&&n!==0?n+"px":n};function X2(e,t,n){if(n==null)return"";if(n.__emotion_styles!==void 0)return n;switch(typeof n){case"boolean":return"";case"object":{if(n.anim===1)return Qf={name:n.name,styles:n.styles,next:Qf},n.name;if(n.styles!==void 0){var r=n.next;if(r!==void 0)for(;r!==void 0;)Qf={name:r.name,styles:r.styles,next:Qf},r=r.next;var i=n.styles+";";return i}return EKe(e,t,n)}case"function":{if(e!==void 0){var s=Qf,o=n(e);return Qf=s,X2(e,t,o)}break}}if(t==null)return n;var a=t[n];return a!==void 0?a:n}function EKe(e,t,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=X2(e,t,n[i])+";";else for(var s in n){var o=n[s];if(typeof o!="object")t!=null&&t[o]!==void 0?r+=s+"{"+t[o]+"}":$se(o)&&(r+=H8(s)+":"+Rse(s,o)+";");else if(Array.isArray(o)&&typeof o[0]=="string"&&(t==null||t[o[0]]===void 0))for(var a=0;a<o.length;a++)$se(o[a])&&(r+=H8(s)+":"+Rse(s,o[a])+";");else{var u=X2(e,t,o);switch(s){case"animation":case"animationName":{r+=H8(s)+":"+u+";";break}default:r+=s+"{"+u+"}"}}}return r}var Nse=/label:\s*([^\s;\n{]+)\s*(;|$)/g,Qf,SG=function(t,n,r){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var i=!0,s="";Qf=void 0;var o=t[0];o==null||o.raw===void 0?(i=!1,s+=X2(r,n,o)):s+=o[0];for(var a=1;a<t.length;a++)s+=X2(r,n,t[a]),i&&(s+=o[a]);Nse.lastIndex=0;for(var u="",l;(l=Nse.exec(s))!==null;)u+="-"+l[1];var c=vKe(s)+u;return{name:c,styles:s,next:Qf}},xKe=S1.useInsertionEffect?S1.useInsertionEffect:!1,Dse=xKe||A.useLayoutEffect,NEe=A.createContext(typeof HTMLElement<"u"?CEe({key:"css"}):null);NEe.Provider;var SKe=function(t){return A.forwardRef(function(n,r){var i=A.useContext(NEe);return t(n,i,r)})},TKe=A.createContext({}),AKe=SKe(function(e,t){var n=e.styles,r=SG([n],void 0,A.useContext(TKe)),i=A.useRef();return Dse(function(){var s=t.key+"-global",o=new t.sheet.constructor({key:s,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),a=!1,u=document.querySelector('style[data-emotion="'+s+" "+r.name+'"]');return t.sheet.tags.length&&(o.before=t.sheet.tags[0]),u!==null&&(a=!0,u.setAttribute("data-emotion",s),o.hydrate([u])),i.current=[o,a],function(){o.flush()}},[t]),Dse(function(){var s=i.current,o=s[0],a=s[1];if(a){s[1]=!1;return}if(r.next!==void 0&&$Ee(t,r.next,!0),o.tags.length){var u=o.tags[o.tags.length-1].nextElementSibling;o.before=u,o.flush()}t.insert("",r,o,!1)},[t,r.name]),null});function DEe(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return SG(t)}var CKe=function(){var t=DEe.apply(void 0,arguments),n="animation-"+t.name;return{name:n,styles:"@keyframes "+n+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}};function LEe(e){return Object.keys(e).reduce((t,n)=>(e[n]!==void 0&&(t[n]=e[n]),t),{})}var IKe=Object.defineProperty,Lse=Object.getOwnPropertySymbols,OKe=Object.prototype.hasOwnProperty,PKe=Object.prototype.propertyIsEnumerable,Mse=(e,t,n)=>t in e?IKe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,q8=(e,t)=>{for(var n in t||(t={}))OKe.call(t,n)&&Mse(e,n,t[n]);if(Lse)for(var n of Lse(t))PKe.call(t,n)&&Mse(e,n,t[n]);return e};const MEe=A.createContext({theme:_Ee});function as(){var e;return((e=A.useContext(MEe))==null?void 0:e.theme)||_Ee}function kKe(e){const t=as(),n=r=>{var i,s;return{styles:((i=t.components[r])==null?void 0:i.styles)||{},classNames:((s=t.components[r])==null?void 0:s.classNames)||{}}};return Array.isArray(e)?e.map(n):[n(e)]}function FEe(){var e;return(e=A.useContext(MEe))==null?void 0:e.emotionCache}function Ct(e,t,n){var r;const s=(r=as().components[e])==null?void 0:r.defaultProps;return q8(q8(q8({},t),s),LEe(n))}const BEe=A.createContext({classNames:{},styles:{},unstyled:!1});function jEe({children:e,classNames:t,unstyled:n,styles:r,staticSelector:i}){return L.createElement(BEe.Provider,{value:{classNames:t,styles:r,unstyled:n,staticSelector:i}},e)}function RC(){return A.useContext(BEe)}const $Ke={app:100,modal:200,popover:300,overlay:400,max:9999};function Tu(e){return $Ke[e]}function RKe(e,t){const n=A.useRef();return(!n.current||t.length!==n.current.prevDeps.length||n.current.prevDeps.map((r,i)=>r===t[i]).indexOf(!1)>=0)&&(n.current={v:e(),prevDeps:[...t]}),n.current.v}const NKe=CEe({key:"mantine",prepend:!0});function DKe(){return FEe()||NKe}var LKe=Object.defineProperty,Fse=Object.getOwnPropertySymbols,MKe=Object.prototype.hasOwnProperty,FKe=Object.prototype.propertyIsEnumerable,Bse=(e,t,n)=>t in e?LKe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,BKe=(e,t)=>{for(var n in t||(t={}))MKe.call(t,n)&&Bse(e,n,t[n]);if(Fse)for(var n of Fse(t))FKe.call(t,n)&&Bse(e,n,t[n]);return e};const W8="ref";function jKe(e){let t;if(e.length!==1)return{args:e,ref:t};const[n]=e;if(!(n instanceof Object))return{args:e,ref:t};if(!(W8 in n))return{args:e,ref:t};t=n[W8];const r=BKe({},n);return delete r[W8],{args:[r],ref:t}}const{cssFactory:zKe}=(()=>{function e(n,r,i){const s=[],o=gKe(n,s,i);return s.length<2?i:o+r(s)}function t(n){const{cache:r}=n,i=(...o)=>{const{ref:a,args:u}=jKe(o),l=SG(u,r.registered);return $Ee(r,l,!1),`${r.key}-${l.name}${a===void 0?"":` ${a}`}`};return{css:i,cx:(...o)=>e(r.registered,i,gEe(o))}}return{cssFactory:t}})();function zEe(){const e=DKe();return RKe(()=>zKe({cache:e}),[e])}function UKe({cx:e,classes:t,context:n,classNames:r,name:i,cache:s}){const o=n.reduce((a,u)=>(Object.keys(u.classNames).forEach(l=>{typeof a[l]!="string"?a[l]=`${u.classNames[l]}`:a[l]=`${a[l]} ${u.classNames[l]}`}),a),{});return Object.keys(t).reduce((a,u)=>(a[u]=e(t[u],o[u],r!=null&&r[u],Array.isArray(i)?i.filter(Boolean).map(l=>`${(s==null?void 0:s.key)||"mantine"}-${l}-${u}`).join(" "):i?`${(s==null?void 0:s.key)||"mantine"}-${i}-${u}`:null),a),{})}var VKe=Object.defineProperty,jse=Object.getOwnPropertySymbols,HKe=Object.prototype.hasOwnProperty,qKe=Object.prototype.propertyIsEnumerable,zse=(e,t,n)=>t in e?VKe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,G8=(e,t)=>{for(var n in t||(t={}))HKe.call(t,n)&&zse(e,n,t[n]);if(jse)for(var n of jse(t))qKe.call(t,n)&&zse(e,n,t[n]);return e};function WKe(e){return`__mantine-ref-${e||""}`}function Use(e,t,n){const r=i=>typeof i=="function"?i(t,n||{}):i||{};return Array.isArray(e)?e.map(i=>r(i.styles)).reduce((i,s)=>(Object.keys(s).forEach(o=>{i[o]?i[o]=G8(G8({},i[o]),s[o]):i[o]=G8({},s[o])}),i),{}):r(e)}function ht(e){const t=typeof e=="function"?e:()=>e;function n(r,i){const s=as(),o=kKe(i==null?void 0:i.name),a=FEe(),{css:u,cx:l}=zEe(),c=t(s,r,WKe),f=Use(i==null?void 0:i.styles,s,r),d=Use(o,s,r),h=Object.fromEntries(Object.keys(c).map(p=>{const m=l({[u(c[p])]:!(i!=null&&i.unstyled)},u(d[p]),u(f[p]));return[p,m]}));return{classes:UKe({cx:l,classes:h,context:o,classNames:i==null?void 0:i.classNames,name:i==null?void 0:i.name,cache:a}),cx:l,theme:s}}return n}function UEe({styles:e}){const t=as();return L.createElement(AKe,{styles:DEe(typeof e=="function"?e(t):e)})}var GKe=Object.defineProperty,YKe=Object.defineProperties,KKe=Object.getOwnPropertyDescriptors,Vse=Object.getOwnPropertySymbols,XKe=Object.prototype.hasOwnProperty,QKe=Object.prototype.propertyIsEnumerable,Hse=(e,t,n)=>t in e?GKe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,jx=(e,t)=>{for(var n in t||(t={}))XKe.call(t,n)&&Hse(e,n,t[n]);if(Vse)for(var n of Vse(t))QKe.call(t,n)&&Hse(e,n,t[n]);return e},zx=(e,t)=>YKe(e,KKe(t));const Ux={in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(.9) translateY(10px)"},transitionProperty:"transform, opacity"},jO={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(-20px) skew(-10deg, -5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(20px) skew(-10deg, -5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(-5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:zx(jx({},Ux),{common:{transformOrigin:"center center"}}),"pop-bottom-left":zx(jx({},Ux),{common:{transformOrigin:"bottom left"}}),"pop-bottom-right":zx(jx({},Ux),{common:{transformOrigin:"bottom right"}}),"pop-top-left":zx(jx({},Ux),{common:{transformOrigin:"top left"}}),"pop-top-right":zx(jx({},Ux),{common:{transformOrigin:"top right"}})},qse=["mousedown","touchstart"];function JKe(e,t,n){const r=A.useRef();return A.useEffect(()=>{const i=s=>{const{target:o}=s??{};if(Array.isArray(n)){const a=(o==null?void 0:o.hasAttribute("data-ignore-outside-clicks"))||!document.body.contains(o);n.every(l=>!!l&&!l.contains(o))&&!a&&e()}else r.current&&!r.current.contains(o)&&e()};return(t||qse).forEach(s=>document.addEventListener(s,i)),()=>{(t||qse).forEach(s=>document.removeEventListener(s,i))}},[r,e,n]),r}function ZKe(e,t){try{return e.addEventListener("change",t),()=>e.removeEventListener("change",t)}catch{return e.addListener(t),()=>e.removeListener(t)}}function eXe(e,t){return typeof t=="boolean"?t:typeof window<"u"&&"matchMedia"in window?window.matchMedia(e).matches:!1}function tXe(e,t,{getInitialValueInEffect:n}={getInitialValueInEffect:!0}){const[r,i]=A.useState(n?!1:eXe(e,t)),s=A.useRef();return A.useEffect(()=>{if("matchMedia"in window)return s.current=window.matchMedia(e),i(s.current.matches),ZKe(s.current,o=>i(o.matches))},[e]),r}function ef(e,t,n){return Math.min(Math.max(e,t),n)}const TG=typeof document<"u"?A.useLayoutEffect:A.useEffect;function _s(e,t){const n=A.useRef(!1);A.useEffect(()=>()=>{n.current=!1},[]),A.useEffect(()=>{if(n.current)return e();n.current=!0},t)}function VEe({opened:e,shouldReturnFocus:t=!0}){const n=A.useRef(),r=()=>{var i;n.current&&"focus"in n.current&&typeof n.current.focus=="function"&&((i=n.current)==null||i.focus({preventScroll:!0}))};return _s(()=>{let i=-1;const s=o=>{o.key==="Tab"&&window.clearTimeout(i)};return document.addEventListener("keydown",s),e?n.current=document.activeElement:t&&(i=window.setTimeout(r,10)),()=>{window.clearTimeout(i),document.removeEventListener("keydown",s)}},[e,t]),r}const nXe=/input|select|textarea|button|object/,HEe="a, input, select, textarea, button, object, [tabindex]";function rXe(e){return e.style.display==="none"}function iXe(e){if(e.getAttribute("aria-hidden")||e.getAttribute("hidden")||e.getAttribute("type")==="hidden")return!1;let n=e;for(;n&&n!==document.body;){if(rXe(n))return!1;n=n.parentNode}return!0}function qEe(e){let t=e.getAttribute("tabindex");return t===null&&(t=void 0),parseInt(t,10)}function Oz(e){const t=e.nodeName.toLowerCase(),n=!Number.isNaN(qEe(e));return(nXe.test(t)&&!e.disabled||e instanceof HTMLAnchorElement&&e.href||n)&&iXe(e)}function WEe(e){const t=qEe(e);return(Number.isNaN(t)||t>=0)&&Oz(e)}function sXe(e){return Array.from(e.querySelectorAll(HEe)).filter(WEe)}function oXe(e,t){const n=sXe(e);if(!n.length){t.preventDefault();return}if(!(n[t.shiftKey?0:n.length-1]===document.activeElement||e===document.activeElement))return;t.preventDefault();const s=n[t.shiftKey?n.length-1:0];s&&s.focus()}function aXe(e,t="body > :not(script)"){const n=Array.from(document.querySelectorAll(t)).map(r=>{if(r.contains(e))return;const i=r.getAttribute("aria-hidden");return(i===null||i==="false")&&r.setAttribute("aria-hidden","true"),{node:r,ariaHidden:i}});return()=>{n.forEach(r=>{r&&(r.ariaHidden===null?r.node.removeAttribute("aria-hidden"):r.node.setAttribute("aria-hidden",r.ariaHidden))})}}function GEe(e=!0){const t=A.useRef(),n=A.useRef(null),r=A.useCallback(i=>{if(e&&i!==null&&(n.current=aXe(i),t.current!==i))if(i){const s=()=>{let o=i.querySelector("[data-autofocus]");if(!o){const a=Array.from(i.querySelectorAll(HEe));o=a.find(WEe)||a.find(Oz)||null,!o&&Oz(i)&&(o=i)}o&&o.focus({preventScroll:!0})};setTimeout(()=>{i.ownerDocument&&s()}),t.current=i}else t.current=null},[e]);return A.useEffect(()=>{if(!e)return;const i=s=>{s.key==="Tab"&&t.current&&oXe(t.current,s)};return document.addEventListener("keydown",i),()=>{document.removeEventListener("keydown",i),n.current&&n.current()}},[e]),r}const uXe=()=>`mantine-${Math.random().toString(36).slice(2,11)}`,lXe=L.useId||(()=>{});function cXe(){const[e,t]=A.useState("");return TG(()=>{t(uXe())},[]),e}function fXe(){const e=lXe();return e?`mantine-${e.replace(/:/g,"")}`:""}function vl(e){return typeof e=="string"?e:fXe()||cXe()}function Pz(e,t,n){A.useEffect(()=>(window.addEventListener(e,t,n),()=>window.removeEventListener(e,t,n)),[e,t])}function YEe(e,t){typeof e=="function"?e(t):typeof e=="object"&&e!==null&&"current"in e&&(e.current=t)}function KEe(...e){return t=>{e.forEach(n=>YEe(n,t))}}function Ts(...e){return A.useCallback(KEe(...e),e)}function XEe(e,t,n="ltr"){const r=A.useRef(),i=A.useRef(!1),s=A.useRef(!1),o=A.useRef(0),[a,u]=A.useState(!1);return A.useEffect(()=>{i.current=!0},[]),A.useEffect(()=>{const l=({x:v,y:_})=>{cancelAnimationFrame(o.current),o.current=requestAnimationFrame(()=>{if(i.current&&r.current){r.current.style.userSelect="none";const b=r.current.getBoundingClientRect();if(b.width&&b.height){const E=ef((v-b.left)/b.width,0,1);e({x:n==="ltr"?E:1-E,y:ef((_-b.top)/b.height,0,1)})}}})},c=()=>{document.addEventListener("mousemove",m),document.addEventListener("mouseup",h),document.addEventListener("touchmove",y),document.addEventListener("touchend",h)},f=()=>{document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",h),document.removeEventListener("touchmove",y),document.removeEventListener("touchend",h)},d=()=>{!s.current&&i.current&&(s.current=!0,typeof(t==null?void 0:t.onScrubStart)=="function"&&t.onScrubStart(),u(!0),c())},h=()=>{s.current&&i.current&&(s.current=!1,u(!1),f(),setTimeout(()=>{typeof(t==null?void 0:t.onScrubEnd)=="function"&&t.onScrubEnd()},0))},p=v=>{d(),m(v)},m=v=>l({x:v.clientX,y:v.clientY}),g=v=>{v.cancelable&&v.preventDefault(),d(),y(v)},y=v=>{v.cancelable&&v.preventDefault(),l({x:v.changedTouches[0].clientX,y:v.changedTouches[0].clientY})};return r.current.addEventListener("mousedown",p),r.current.addEventListener("touchstart",g,{passive:!1}),()=>{r.current&&(r.current.removeEventListener("mousedown",p),r.current.removeEventListener("touchstart",g))}},[n,e]),{ref:r,active:a}}function Ta({value:e,defaultValue:t,finalValue:n,onChange:r=()=>{}}){const[i,s]=A.useState(t!==void 0?t:n),o=a=>{s(a),r==null||r(a)};return e!==void 0?[e,r,!0]:[i,o,!1]}function XM(e,t){return tXe("(prefers-reduced-motion: reduce)",e,t)}const dXe=e=>e<.5?2*e*e:-1+(4-2*e)*e,hXe=({axis:e,target:t,parent:n,alignment:r,offset:i,isList:s})=>{if(!t||!n&&typeof document>"u")return 0;const o=!!n,u=(n||document.body).getBoundingClientRect(),l=t.getBoundingClientRect(),c=f=>l[f]-u[f];if(e==="y"){const f=c("top");if(f===0)return 0;if(r==="start"){const h=f-i;return h<=l.height*(s?0:1)||!s?h:0}const d=o?u.height:window.innerHeight;if(r==="end"){const h=f+i-d+l.height;return h>=-l.height*(s?0:1)||!s?h:0}return r==="center"?f-d/2+l.height/2:0}if(e==="x"){const f=c("left");if(f===0)return 0;if(r==="start"){const h=f-i;return h<=l.width||!s?h:0}const d=o?u.width:window.innerWidth;if(r==="end"){const h=f+i-d+l.width;return h>=-l.width||!s?h:0}return r==="center"?f-d/2+l.width/2:0}return 0},pXe=({axis:e,parent:t})=>{if(!t&&typeof document>"u")return 0;const n=e==="y"?"scrollTop":"scrollLeft";if(t)return t[n];const{body:r,documentElement:i}=document;return r[n]+i[n]},mXe=({axis:e,parent:t,distance:n})=>{if(!t&&typeof document>"u")return;const r=e==="y"?"scrollTop":"scrollLeft";if(t)t[r]=n;else{const{body:i,documentElement:s}=document;i[r]=n,s[r]=n}};function QEe({duration:e=1250,axis:t="y",onScrollFinish:n,easing:r=dXe,offset:i=0,cancelable:s=!0,isList:o=!1}={}){const a=A.useRef(0),u=A.useRef(0),l=A.useRef(!1),c=A.useRef(null),f=A.useRef(null),d=XM(),h=()=>{a.current&&cancelAnimationFrame(a.current)},p=A.useCallback(({alignment:g="start"}={})=>{var y;l.current=!1,a.current&&h();const v=(y=pXe({parent:c.current,axis:t}))!=null?y:0,_=hXe({parent:c.current,target:f.current,axis:t,alignment:g,offset:i,isList:o})-(c.current?0:v);function b(){u.current===0&&(u.current=performance.now());const w=performance.now()-u.current,x=d||e===0?1:w/e,S=v+_*r(x);mXe({parent:c.current,axis:t,distance:S}),!l.current&&x<1?a.current=requestAnimationFrame(b):(typeof n=="function"&&n(),u.current=0,a.current=0,h())}b()},[t,e,r,o,i,n,d]),m=()=>{s&&(l.current=!0)};return Pz("wheel",m,{passive:!0}),Pz("touchmove",m,{passive:!0}),A.useEffect(()=>h,[]),{scrollableRef:c,targetRef:f,scrollIntoView:p,cancel:h}}const gXe={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};function wb(){const e=A.useRef(0),t=A.useRef(null),[n,r]=A.useState(gXe),i=A.useMemo(()=>typeof window<"u"?new ResizeObserver(s=>{const o=s[0];o&&(cancelAnimationFrame(e.current),e.current=requestAnimationFrame(()=>{t.current&&r(o.contentRect)}))}):null,[]);return A.useEffect(()=>(t.current&&i.observe(t.current),()=>{i.disconnect(),e.current&&cancelAnimationFrame(e.current)}),[t.current]),[t,n]}function yXe(){if(typeof window>"u"||typeof document>"u")return 0;const e=parseInt(window.getComputedStyle(document.body).paddingRight,10),t=window.innerWidth-document.documentElement.clientWidth;return e+t}const vXe=({disableBodyPadding:e})=>{const t=e?null:yXe();return`body {
        --removed-scroll-width: ${t}px;
        touch-action: none;
        overflow: hidden !important;
        position: relative !important;
        ${t?"padding-right: var(--removed-scroll-width) !important;":""}
        `};function _Xe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function bXe(e){(document.head||document.getElementsByTagName("head")[0]).appendChild(e)}function wXe(){const e=document.createElement("style");return e.type="text/css",e.setAttribute("mantine-scroll-lock",""),e}function EXe(e,t={disableBodyPadding:!1}){const[n,r]=A.useState(e||!1),i=A.useRef(0),{disableBodyPadding:s}=t,o=A.useRef(null),a=()=>{i.current=window.scrollY;const l=vXe({disableBodyPadding:s}),c=wXe();_Xe(c,l),bXe(c),o.current=c},u=()=>{o!=null&&o.current&&(o.current.parentNode.removeChild(o.current),o.current=null)};return A.useEffect(()=>(n?a():u(),u),[n]),A.useEffect(()=>{e!==void 0&&r(e)},[e]),A.useEffect(()=>{e===void 0&&typeof window<"u"&&window.document.body.style.overflow==="hidden"&&r(!0)},[r]),[n,r]}var xXe=Object.defineProperty,SXe=Object.defineProperties,TXe=Object.getOwnPropertyDescriptors,Wse=Object.getOwnPropertySymbols,AXe=Object.prototype.hasOwnProperty,CXe=Object.prototype.propertyIsEnumerable,Gse=(e,t,n)=>t in e?xXe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,IXe=(e,t)=>{for(var n in t||(t={}))AXe.call(t,n)&&Gse(e,n,t[n]);if(Wse)for(var n of Wse(t))CXe.call(t,n)&&Gse(e,n,t[n]);return e},OXe=(e,t)=>SXe(e,TXe(t));function PXe(e){const t=e.toLowerCase().split("+").map(s=>s.trim()),n={alt:t.includes("alt"),ctrl:t.includes("ctrl"),meta:t.includes("meta"),mod:t.includes("mod"),shift:t.includes("shift")},r=["alt","ctrl","meta","shift","mod"],i=t.find(s=>!r.includes(s));return OXe(IXe({},n),{key:i})}function kXe(e,t){const{alt:n,ctrl:r,meta:i,mod:s,shift:o,key:a}=e,{altKey:u,ctrlKey:l,metaKey:c,shiftKey:f,key:d}=t;if(n!==u)return!1;if(s){if(!l&&!c)return!1}else if(r!==l||i!==c)return!1;return o!==f?!1:!!(a&&(d.toLowerCase()===a.toLowerCase()||t.code.replace("Key","").toLowerCase()===a.toLowerCase()))}function $Xe(e){return t=>kXe(PXe(e),t)}function RXe(e){return t=>{const n="nativeEvent"in t?t.nativeEvent:t;e.forEach(([r,i])=>{$Xe(r)(n)&&(t.preventDefault(),i(n))})}}function NXe(){const{userAgent:e}=window.navigator,t=/(Macintosh)|(MacIntel)|(MacPPC)|(Mac68K)/i,n=/(Win32)|(Win64)|(Windows)|(WinCE)/i,r=/(iPhone)|(iPad)|(iPod)/i;return t.test(e)?"macos":r.test(e)?"ios":n.test(e)?"windows":/Android/i.test(e)?"android":/Linux/i.test(e)?"linux":"undetermined"}function DXe(){return typeof window<"u"?NXe():"undetermined"}function LXe(e){return t=>{if(!t)e(t);else if(typeof t=="function")e(t);else if(typeof t=="object"&&"nativeEvent"in t){const{currentTarget:n}=t;n.type==="checkbox"?e(n.checked):e(n.value)}else e(t)}}function MXe(e){const[t,n]=A.useState(e);return[t,LXe(n)]}function LT(e,t){const[n,r]=A.useState(e),i=()=>{var a;n||(r(!0),(a=t==null?void 0:t.onOpen)==null||a.call(t))},s=()=>{var a;n&&(r(!1),(a=t==null?void 0:t.onClose)==null||a.call(t))};return[n,{open:i,close:s,toggle:()=>{n?s():i()}}]}function FXe(){return`mantine-${Math.random().toString(36).slice(2,11)}`}function Ym(e){return typeof e!="string"?"":e.charAt(0).toUpperCase()+e.slice(1)}var Yse=Object.getOwnPropertySymbols,BXe=Object.prototype.hasOwnProperty,jXe=Object.prototype.propertyIsEnumerable,zXe=(e,t)=>{var n={};for(var r in e)BXe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&Yse)for(var r of Yse(e))t.indexOf(r)<0&&jXe.call(e,r)&&(n[r]=e[r]);return n};function yf(e){const t=e,{m:n,mx:r,my:i,mt:s,mb:o,ml:a,mr:u,p:l,px:c,py:f,pt:d,pb:h,pl:p,pr:m,bg:g,c:y,opacity:v,ff:_,fz:b,fw:E,lts:w,ta:x,lh:S,fs:I,tt:C,td:O,w:z,miw:N,maw:$,h:D,mih:B,mah:V,bgsz:j,bgp:G,bgr:U,bga:P,pos:k,top:H,left:M,bottom:F,right:J,inset:se,display:ae}=t,ce=zXe(t,["m","mx","my","mt","mb","ml","mr","p","px","py","pt","pb","pl","pr","bg","c","opacity","ff","fz","fw","lts","ta","lh","fs","tt","td","w","miw","maw","h","mih","mah","bgsz","bgp","bgr","bga","pos","top","left","bottom","right","inset","display"]);return{systemStyles:LEe({m:n,mx:r,my:i,mt:s,mb:o,ml:a,mr:u,p:l,px:c,py:f,pt:d,pb:h,pl:p,pr:m,bg:g,c:y,opacity:v,ff:_,fz:b,fw:E,lts:w,ta:x,lh:S,fs:I,tt:C,td:O,w:z,miw:N,maw:$,h:D,mih:B,mah:V,bgsz:j,bgp:G,bgr:U,bga:P,pos:k,top:H,left:M,bottom:F,right:J,inset:se,display:ae}),rest:ce}}function UXe(e,t){const n=Object.keys(e).filter(r=>r!=="base").sort((r,i)=>t.fn.size({size:r,sizes:t.breakpoints})-t.fn.size({size:i,sizes:t.breakpoints}));return"base"in e?["base",...n]:n}function VXe({value:e,theme:t,getValue:n,property:r}){if(e==null)return;if(typeof e=="object")return UXe(e,t).reduce((o,a)=>{if(a==="base"&&e.base!==void 0){const l=n(e.base,t);return Array.isArray(r)?(r.forEach(c=>{o[c]=l}),o):(o[r]=l,o)}const u=n(e[a],t);return Array.isArray(r)?(o[t.fn.largerThan(a)]={},r.forEach(l=>{o[t.fn.largerThan(a)][l]=u}),o):(o[t.fn.largerThan(a)]={[r]:u},o)},{});const i=n(e,t);return Array.isArray(r)?r.reduce((s,o)=>(s[o]=i,s),{}):{[r]:i}}function HXe(e,t){return e==="dimmed"?t.colorScheme==="dark"?t.colors.dark[2]:t.colors.gray[6]:t.fn.variant({variant:"filled",color:e,primaryFallback:!1}).background}function qXe(e){return e}function WXe(e,t){return t.fn.size({size:e,sizes:t.fontSizes})}const GXe=["-xs","-sm","-md","-lg","-xl"];function YXe(e,t){return GXe.includes(e)?t.fn.size({size:e.replace("-",""),sizes:t.spacing})*-1:t.fn.size({size:e,sizes:t.spacing})}const KXe={color:HXe,default:qXe,fontSize:WXe,spacing:YXe},XXe={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},mx:{type:"spacing",property:["marginRight","marginLeft"]},my:{type:"spacing",property:["marginTop","marginBottom"]},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},px:{type:"spacing",property:["paddingRight","paddingLeft"]},py:{type:"spacing",property:["paddingTop","paddingBottom"]},bg:{type:"color",property:"background"},c:{type:"color",property:"color"},opacity:{type:"default",property:"opacity"},ff:{type:"default",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"default",property:"fontWeight"},lts:{type:"default",property:"letterSpacing"},ta:{type:"default",property:"textAlign"},lh:{type:"default",property:"lineHeight"},fs:{type:"default",property:"fontStyle"},tt:{type:"default",property:"textTransform"},td:{type:"default",property:"textDecoration"},w:{type:"default",property:"width"},miw:{type:"default",property:"minWidth"},maw:{type:"default",property:"maxWidth"},h:{type:"default",property:"height"},mih:{type:"default",property:"minHeight"},mah:{type:"default",property:"maxHeight"},bgsz:{type:"default",property:"background-size"},bgp:{type:"default",property:"background-position"},bgr:{type:"default",property:"background-repeat"},bga:{type:"default",property:"background-attachment"},pos:{type:"default",property:"position"},top:{type:"default",property:"top"},left:{type:"default",property:"left"},bottom:{type:"default",property:"bottom"},right:{type:"default",property:"right"},inset:{type:"default",property:"inset"},display:{type:"default",property:"display"}};var QXe=Object.defineProperty,Kse=Object.getOwnPropertySymbols,JXe=Object.prototype.hasOwnProperty,ZXe=Object.prototype.propertyIsEnumerable,Xse=(e,t,n)=>t in e?QXe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Qse=(e,t)=>{for(var n in t||(t={}))JXe.call(t,n)&&Xse(e,n,t[n]);if(Kse)for(var n of Kse(t))ZXe.call(t,n)&&Xse(e,n,t[n]);return e};function kz(e,t,n=XXe){return Object.keys(n).reduce((i,s)=>(s in e&&e[s]!==void 0&&i.push(VXe({value:e[s],getValue:KXe[n[s].type],property:n[s].property,theme:t})),i),[]).reduce((i,s)=>(Object.keys(s).forEach(o=>{typeof s[o]=="object"&&s[o]!==null&&o in i?i[o]=Qse(Qse({},i[o]),s[o]):i[o]=s[o]}),i),{})}function Jse(e,t){return typeof e=="function"?e(t):e}function eQe(e,t,n){const r=as(),{css:i,cx:s}=zEe();return Array.isArray(e)?s(n,i(kz(t,r)),e.map(o=>i(Jse(o,r)))):s(n,i(Jse(e,r)),i(kz(t,r)))}var tQe=Object.defineProperty,bR=Object.getOwnPropertySymbols,JEe=Object.prototype.hasOwnProperty,ZEe=Object.prototype.propertyIsEnumerable,Zse=(e,t,n)=>t in e?tQe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,nQe=(e,t)=>{for(var n in t||(t={}))JEe.call(t,n)&&Zse(e,n,t[n]);if(bR)for(var n of bR(t))ZEe.call(t,n)&&Zse(e,n,t[n]);return e},rQe=(e,t)=>{var n={};for(var r in e)JEe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&bR)for(var r of bR(e))t.indexOf(r)<0&&ZEe.call(e,r)&&(n[r]=e[r]);return n};const exe=A.forwardRef((e,t)=>{var n=e,{className:r,component:i,style:s,sx:o}=n,a=rQe(n,["className","component","style","sx"]);const{systemStyles:u,rest:l}=yf(a),c=i||"div";return L.createElement(c,nQe({ref:t,className:eQe(o,u,r),style:s},l))});exe.displayName="@mantine/core/Box";const At=exe;var iQe=Object.defineProperty,sQe=Object.defineProperties,oQe=Object.getOwnPropertyDescriptors,eoe=Object.getOwnPropertySymbols,aQe=Object.prototype.hasOwnProperty,uQe=Object.prototype.propertyIsEnumerable,toe=(e,t,n)=>t in e?iQe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,noe=(e,t)=>{for(var n in t||(t={}))aQe.call(t,n)&&toe(e,n,t[n]);if(eoe)for(var n of eoe(t))uQe.call(t,n)&&toe(e,n,t[n]);return e},lQe=(e,t)=>sQe(e,oQe(t)),cQe=ht(e=>({root:lQe(noe(noe({},e.fn.focusStyles()),e.fn.fontStyles()),{cursor:"pointer",border:0,padding:0,appearance:"none",fontSize:e.fontSizes.md,backgroundColor:"transparent",textAlign:"left",color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,textDecoration:"none",boxSizing:"border-box"})})),fQe=Object.defineProperty,wR=Object.getOwnPropertySymbols,txe=Object.prototype.hasOwnProperty,nxe=Object.prototype.propertyIsEnumerable,roe=(e,t,n)=>t in e?fQe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,dQe=(e,t)=>{for(var n in t||(t={}))txe.call(t,n)&&roe(e,n,t[n]);if(wR)for(var n of wR(t))nxe.call(t,n)&&roe(e,n,t[n]);return e},hQe=(e,t)=>{var n={};for(var r in e)txe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&wR)for(var r of wR(e))t.indexOf(r)<0&&nxe.call(e,r)&&(n[r]=e[r]);return n};const rxe=A.forwardRef((e,t)=>{const n=Ct("UnstyledButton",{},e),{className:r,component:i="button",unstyled:s}=n,o=hQe(n,["className","component","unstyled"]),{classes:a,cx:u}=cQe(null,{name:"UnstyledButton",unstyled:s});return L.createElement(At,dQe({component:i,ref:t,className:u(a.root,r),type:i==="button"?"button":void 0},o))});rxe.displayName="@mantine/core/UnstyledButton";const _v=rxe;var pQe=Object.defineProperty,mQe=Object.defineProperties,gQe=Object.getOwnPropertyDescriptors,ER=Object.getOwnPropertySymbols,ixe=Object.prototype.hasOwnProperty,sxe=Object.prototype.propertyIsEnumerable,ioe=(e,t,n)=>t in e?pQe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,wc=(e,t)=>{for(var n in t||(t={}))ixe.call(t,n)&&ioe(e,n,t[n]);if(ER)for(var n of ER(t))sxe.call(t,n)&&ioe(e,n,t[n]);return e},Vx=(e,t)=>mQe(e,gQe(t)),yQe=(e,t)=>{var n={};for(var r in e)ixe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&ER)for(var r of ER(e))t.indexOf(r)<0&&sxe.call(e,r)&&(n[r]=e[r]);return n};function vQe(e){if(!e||typeof e=="string")return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function Y8(e){return e!=null&&e.current?e.current.scrollHeight:"auto"}function _Qe(e){return e!=null&&e.current?e.current.scrollWidth:"auto"}const vh=typeof window<"u"&&window.requestAnimationFrame;function bQe({transitionDuration:e,transitionTimingFunction:t="ease",onTransitionEnd:n=()=>{},opened:r,axis:i}){const s=A.useRef(null),o="0px",[a,u]=A.useState({}),l=g=>{yv.flushSync(()=>u(g))},c=g=>{l(y=>wc(wc({},y),g))};function f(g){const y=e||vQe(g);return{transitionProperty:`${i==="x"?"width":"height"}`,transitionDuration:`${y}ms`,transitionTimingFunction:`${t}`}}const d=()=>{const g=a;l({});const y={width:_Qe(s),height:Y8(s)};return l(g),y},h=()=>{const{height:g}=d();return{x:{height:g,width:"0px",overflow:"hidden"},y:{display:"none",height:"0px",overflow:"hidden"}}};A.useEffect(()=>{vh(()=>{const{x:g,y}=h();i==="x"&&!r?l(wc({},g)):i==="y"&&!r&&l(wc({},y))})},[]),_s(()=>{i!=="x"&&vh(r?()=>{c({willChange:"height",display:"block",overflow:"hidden"}),vh(()=>{const g=Y8(s);c(Vx(wc({},f(g)),{height:g}))})}:()=>{const g=Y8(s);c(Vx(wc({},f(g)),{willChange:"height",height:g})),vh(()=>c({height:o,overflow:"hidden"}))})},[r]),_s(()=>{i!=="y"&&vh(r?()=>{const{width:g}=d();c({display:"block",overflow:"hidden",willChange:"width",flexShrink:0}),vh(()=>{c(Vx(wc({},f(g)),{width:g}))})}:()=>{const{width:g,height:y}=d();c(Vx(wc({},f(g)),{flexShrink:0,willChange:"width",width:g,height:y})),vh(()=>c({width:"0px",overflow:"hidden"}))})},[r]);const p=g=>{if(!(g.target!==s.current||!(g.propertyName==="width"||!0)))if(n(),r)l({});else{const{x:y,y:v}=h();l(i==="x"?y:v)}};function m(g={}){var y=g,{style:v={},refKey:_="ref"}=y,b=yQe(y,["style","refKey"]);const E=b[_];return Vx(wc({"aria-hidden":!r},b),{[_]:KEe(s,E),onTransitionEnd:p,style:wc(wc({boxSizing:"border-box"},v),a)})}return m}var wQe=Object.defineProperty,xR=Object.getOwnPropertySymbols,oxe=Object.prototype.hasOwnProperty,axe=Object.prototype.propertyIsEnumerable,soe=(e,t,n)=>t in e?wQe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,zO=(e,t)=>{for(var n in t||(t={}))oxe.call(t,n)&&soe(e,n,t[n]);if(xR)for(var n of xR(t))axe.call(t,n)&&soe(e,n,t[n]);return e},EQe=(e,t)=>{var n={};for(var r in e)oxe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&xR)for(var r of xR(e))t.indexOf(r)<0&&axe.call(e,r)&&(n[r]=e[r]);return n};const xQe={transitionDuration:200,transitionTimingFunction:"ease",animateOpacity:!0,axis:"y"},uxe=A.forwardRef((e,t)=>{const n=Ct("Collapse",xQe,e),{children:r,in:i,transitionDuration:s,transitionTimingFunction:o,style:a,onTransitionEnd:u,animateOpacity:l,axis:c}=n,f=EQe(n,["children","in","transitionDuration","transitionTimingFunction","style","onTransitionEnd","animateOpacity","axis"]),d=as(),h=XM(),m=(d.respectReducedMotion?h:!1)?0:s,{systemStyles:g,rest:y}=yf(f),v=bQe({opened:i,transitionDuration:m,transitionTimingFunction:o,onTransitionEnd:u,axis:c});return m===0?i?L.createElement(At,zO({},y),r):null:L.createElement(At,zO({},v(zO(zO({style:a,ref:t},y),g))),L.createElement("div",{style:{opacity:i||!l?1:0,transition:l?`opacity ${m}ms ${o}`:"none"}},r))});uxe.displayName="@mantine/core/Collapse";var SQe=Object.defineProperty,ooe=Object.getOwnPropertySymbols,TQe=Object.prototype.hasOwnProperty,AQe=Object.prototype.propertyIsEnumerable,aoe=(e,t,n)=>t in e?SQe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,CQe=(e,t)=>{for(var n in t||(t={}))TQe.call(t,n)&&aoe(e,n,t[n]);if(ooe)for(var n of ooe(t))AQe.call(t,n)&&aoe(e,n,t[n]);return e};function IQe(e){return L.createElement("svg",CQe({viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:16,height:16},e),L.createElement("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}var OQe=Object.defineProperty,PQe=Object.defineProperties,kQe=Object.getOwnPropertyDescriptors,uoe=Object.getOwnPropertySymbols,$Qe=Object.prototype.hasOwnProperty,RQe=Object.prototype.propertyIsEnumerable,loe=(e,t,n)=>t in e?OQe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,lxe=(e,t)=>{for(var n in t||(t={}))$Qe.call(t,n)&&loe(e,n,t[n]);if(uoe)for(var n of uoe(t))RQe.call(t,n)&&loe(e,n,t[n]);return e},NQe=(e,t)=>PQe(e,kQe(t));const jS={xs:18,sm:22,md:28,lg:34,xl:44};function DQe({variant:e,theme:t,color:n,gradient:r}){const i=t.fn.variant({color:n,variant:e,gradient:r});return e==="gradient"?{border:0,backgroundImage:i.background,color:i.color,"&:hover":t.fn.hover({backgroundSize:"200%"})}:lxe({border:`1px solid ${i.border}`,backgroundColor:i.background,color:i.color},t.fn.hover({backgroundColor:i.hover}))}var LQe=ht((e,{color:t,size:n,radius:r,variant:i,gradient:s})=>({root:NQe(lxe({},DQe({variant:i,theme:e,color:t,gradient:s})),{position:"relative",height:e.fn.size({size:n,sizes:jS}),minHeight:e.fn.size({size:n,sizes:jS}),width:e.fn.size({size:n,sizes:jS}),minWidth:e.fn.size({size:n,sizes:jS}),borderRadius:e.fn.radius(r),padding:0,lineHeight:1,display:"flex",alignItems:"center",justifyContent:"center","&:active":e.activeStyles,"&:disabled, &[data-disabled]":{color:e.colors.gray[e.colorScheme==="dark"?6:4],cursor:"not-allowed",backgroundColor:i==="transparent"?void 0:e.fn.themeColor("gray",e.colorScheme==="dark"?8:1),borderColor:i==="transparent"?void 0:e.fn.themeColor("gray",e.colorScheme==="dark"?8:1),backgroundImage:"none",pointerEvents:"none","&:active":{transform:"none"}},"&[data-loading]":{pointerEvents:"none","&::before":{content:'""',position:"absolute",top:-1,left:-1,right:-1,bottom:-1,backgroundColor:e.colorScheme==="dark"?e.fn.rgba(e.colors.dark[7],.5):"rgba(255, 255, 255, .5)",borderRadius:e.fn.radius(r),cursor:"not-allowed"}}})})),MQe=Object.defineProperty,SR=Object.getOwnPropertySymbols,cxe=Object.prototype.hasOwnProperty,fxe=Object.prototype.propertyIsEnumerable,coe=(e,t,n)=>t in e?MQe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,FQe=(e,t)=>{for(var n in t||(t={}))cxe.call(t,n)&&coe(e,n,t[n]);if(SR)for(var n of SR(t))fxe.call(t,n)&&coe(e,n,t[n]);return e},BQe=(e,t)=>{var n={};for(var r in e)cxe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&SR)for(var r of SR(e))t.indexOf(r)<0&&fxe.call(e,r)&&(n[r]=e[r]);return n};function jQe(e){var t=e,{size:n,color:r}=t,i=BQe(t,["size","color"]);return L.createElement("svg",FQe({viewBox:"0 0 135 140",xmlns:"http://www.w3.org/2000/svg",fill:r,width:`${n}px`},i),L.createElement("rect",{y:"10",width:"15",height:"120",rx:"6"},L.createElement("animate",{attributeName:"height",begin:"0.5s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),L.createElement("animate",{attributeName:"y",begin:"0.5s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})),L.createElement("rect",{x:"30",y:"10",width:"15",height:"120",rx:"6"},L.createElement("animate",{attributeName:"height",begin:"0.25s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),L.createElement("animate",{attributeName:"y",begin:"0.25s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})),L.createElement("rect",{x:"60",width:"15",height:"140",rx:"6"},L.createElement("animate",{attributeName:"height",begin:"0s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),L.createElement("animate",{attributeName:"y",begin:"0s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})),L.createElement("rect",{x:"90",y:"10",width:"15",height:"120",rx:"6"},L.createElement("animate",{attributeName:"height",begin:"0.25s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),L.createElement("animate",{attributeName:"y",begin:"0.25s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})),L.createElement("rect",{x:"120",y:"10",width:"15",height:"120",rx:"6"},L.createElement("animate",{attributeName:"height",begin:"0.5s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),L.createElement("animate",{attributeName:"y",begin:"0.5s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})))}var zQe=Object.defineProperty,TR=Object.getOwnPropertySymbols,dxe=Object.prototype.hasOwnProperty,hxe=Object.prototype.propertyIsEnumerable,foe=(e,t,n)=>t in e?zQe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,UQe=(e,t)=>{for(var n in t||(t={}))dxe.call(t,n)&&foe(e,n,t[n]);if(TR)for(var n of TR(t))hxe.call(t,n)&&foe(e,n,t[n]);return e},VQe=(e,t)=>{var n={};for(var r in e)dxe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&TR)for(var r of TR(e))t.indexOf(r)<0&&hxe.call(e,r)&&(n[r]=e[r]);return n};function HQe(e){var t=e,{size:n,color:r}=t,i=VQe(t,["size","color"]);return L.createElement("svg",UQe({width:`${n}px`,height:`${n}px`,viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg",stroke:r},i),L.createElement("g",{fill:"none",fillRule:"evenodd"},L.createElement("g",{transform:"translate(2.5 2.5)",strokeWidth:"5"},L.createElement("circle",{strokeOpacity:".5",cx:"16",cy:"16",r:"16"}),L.createElement("path",{d:"M32 16c0-9.94-8.06-16-16-16"},L.createElement("animateTransform",{attributeName:"transform",type:"rotate",from:"0 16 16",to:"360 16 16",dur:"1s",repeatCount:"indefinite"})))))}var qQe=Object.defineProperty,AR=Object.getOwnPropertySymbols,pxe=Object.prototype.hasOwnProperty,mxe=Object.prototype.propertyIsEnumerable,doe=(e,t,n)=>t in e?qQe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,WQe=(e,t)=>{for(var n in t||(t={}))pxe.call(t,n)&&doe(e,n,t[n]);if(AR)for(var n of AR(t))mxe.call(t,n)&&doe(e,n,t[n]);return e},GQe=(e,t)=>{var n={};for(var r in e)pxe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&AR)for(var r of AR(e))t.indexOf(r)<0&&mxe.call(e,r)&&(n[r]=e[r]);return n};function YQe(e){var t=e,{size:n,color:r}=t,i=GQe(t,["size","color"]);return L.createElement("svg",WQe({width:`${n}px`,height:`${n/4}px`,viewBox:"0 0 120 30",xmlns:"http://www.w3.org/2000/svg",fill:r},i),L.createElement("circle",{cx:"15",cy:"15",r:"15"},L.createElement("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),L.createElement("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})),L.createElement("circle",{cx:"60",cy:"15",r:"9",fillOpacity:"0.3"},L.createElement("animate",{attributeName:"r",from:"9",to:"9",begin:"0s",dur:"0.8s",values:"9;15;9",calcMode:"linear",repeatCount:"indefinite"}),L.createElement("animate",{attributeName:"fill-opacity",from:"0.5",to:"0.5",begin:"0s",dur:"0.8s",values:".5;1;.5",calcMode:"linear",repeatCount:"indefinite"})),L.createElement("circle",{cx:"105",cy:"15",r:"15"},L.createElement("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),L.createElement("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})))}var KQe=Object.defineProperty,CR=Object.getOwnPropertySymbols,gxe=Object.prototype.hasOwnProperty,yxe=Object.prototype.propertyIsEnumerable,hoe=(e,t,n)=>t in e?KQe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,XQe=(e,t)=>{for(var n in t||(t={}))gxe.call(t,n)&&hoe(e,n,t[n]);if(CR)for(var n of CR(t))yxe.call(t,n)&&hoe(e,n,t[n]);return e},QQe=(e,t)=>{var n={};for(var r in e)gxe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&CR)for(var r of CR(e))t.indexOf(r)<0&&yxe.call(e,r)&&(n[r]=e[r]);return n};const K8={bars:jQe,oval:HQe,dots:YQe},JQe={xs:18,sm:22,md:36,lg:44,xl:58},ZQe={size:"md"};function T0(e){const t=Ct("Loader",ZQe,e),{size:n,color:r,variant:i}=t,s=QQe(t,["size","color","variant"]),o=as(),a=i in K8?i:o.loader;return L.createElement(At,XQe({role:"presentation",component:K8[a]||K8.bars,size:o.fn.size({size:n,sizes:JQe}),color:o.fn.variant({variant:"filled",primaryFallback:!1,color:r||o.primaryColor}).background},s))}T0.displayName="@mantine/core/Loader";var eJe=Object.defineProperty,IR=Object.getOwnPropertySymbols,vxe=Object.prototype.hasOwnProperty,_xe=Object.prototype.propertyIsEnumerable,poe=(e,t,n)=>t in e?eJe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,moe=(e,t)=>{for(var n in t||(t={}))vxe.call(t,n)&&poe(e,n,t[n]);if(IR)for(var n of IR(t))_xe.call(t,n)&&poe(e,n,t[n]);return e},tJe=(e,t)=>{var n={};for(var r in e)vxe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&IR)for(var r of IR(e))t.indexOf(r)<0&&_xe.call(e,r)&&(n[r]=e[r]);return n};const nJe={color:"gray",size:"md",variant:"subtle",loading:!1},bxe=A.forwardRef((e,t)=>{const n=Ct("ActionIcon",nJe,e),{className:r,color:i,children:s,radius:o,size:a,variant:u,gradient:l,disabled:c,loaderProps:f,loading:d,unstyled:h}=n,p=tJe(n,["className","color","children","radius","size","variant","gradient","disabled","loaderProps","loading","unstyled"]),{classes:m,cx:g,theme:y}=LQe({size:a,radius:o,color:i,variant:u,gradient:l},{name:"ActionIcon",unstyled:h}),v=y.fn.variant({color:i,variant:u}),_=L.createElement(T0,moe({color:v.color,size:y.fn.size({size:a,sizes:jS})-12},f));return L.createElement(_v,moe({className:g(m.root,r),ref:t,disabled:c,"data-disabled":c||void 0,"data-loading":d||void 0,unstyled:h},p),d?_:s)});bxe.displayName="@mantine/core/ActionIcon";const OR=bxe;function wxe(e){const{children:t,target:n,className:r}=Ct("Portal",{},e),i=as(),[s,o]=A.useState(!1),a=A.useRef();return TG(()=>(o(!0),a.current=n?typeof n=="string"?document.querySelector(n):n:document.createElement("div"),n||document.body.appendChild(a.current),()=>{!n&&document.body.removeChild(a.current)}),[n]),s?yv.createPortal(L.createElement("div",{className:r,dir:i.dir},t),a.current):null}wxe.displayName="@mantine/core/Portal";var rJe=Object.defineProperty,PR=Object.getOwnPropertySymbols,Exe=Object.prototype.hasOwnProperty,xxe=Object.prototype.propertyIsEnumerable,goe=(e,t,n)=>t in e?rJe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,iJe=(e,t)=>{for(var n in t||(t={}))Exe.call(t,n)&&goe(e,n,t[n]);if(PR)for(var n of PR(t))xxe.call(t,n)&&goe(e,n,t[n]);return e},sJe=(e,t)=>{var n={};for(var r in e)Exe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&PR)for(var r of PR(e))t.indexOf(r)<0&&xxe.call(e,r)&&(n[r]=e[r]);return n};function NC(e){var t=e,{withinPortal:n=!0,children:r}=t,i=sJe(t,["withinPortal","children"]);return n?L.createElement(wxe,iJe({},i),r):L.createElement(L.Fragment,null,r)}NC.displayName="@mantine/core/OptionalPortal";var oJe=Object.defineProperty,aJe=Object.defineProperties,uJe=Object.getOwnPropertyDescriptors,yoe=Object.getOwnPropertySymbols,lJe=Object.prototype.hasOwnProperty,cJe=Object.prototype.propertyIsEnumerable,voe=(e,t,n)=>t in e?oJe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,X8=(e,t)=>{for(var n in t||(t={}))lJe.call(t,n)&&voe(e,n,t[n]);if(yoe)for(var n of yoe(t))cJe.call(t,n)&&voe(e,n,t[n]);return e},_oe=(e,t)=>aJe(e,uJe(t));function fJe({variant:e,color:t,theme:n}){if(e==="filled")return{backgroundColor:n.fn.variant({variant:"filled",color:t}).background,color:n.white};if(e==="outline"){const i=n.fn.variant({variant:"outline",color:t});return{color:i.color,borderColor:i.border,backgroundColor:n.colorScheme==="dark"?n.colors.dark[6]:n.white}}const r=n.fn.variant({variant:"light",color:t});return{backgroundColor:r.background,color:r.color}}var dJe=ht((e,{color:t,radius:n,variant:r})=>({root:X8(_oe(X8({},e.fn.fontStyles()),{position:"relative",overflow:"hidden",padding:`${e.spacing.sm}px ${e.spacing.md}px`,borderRadius:e.fn.radius(n),border:"1px solid transparent"}),fJe({variant:r,color:t,theme:e})),wrapper:{display:"flex"},body:{flex:1},title:{boxSizing:"border-box",margin:0,marginBottom:7,display:"flex",alignItems:"center",justifyContent:"space-between",lineHeight:e.lineHeight,fontSize:e.fontSizes.sm,fontWeight:700,"&[data-with-close-button]":{paddingRight:e.spacing.md}},label:{display:"block",overflow:"hidden",textOverflow:"ellipsis"},icon:{lineHeight:1,width:20,height:20,display:"flex",alignItems:"center",justifyContent:"flex-start",marginRight:e.spacing.md,marginTop:1},message:_oe(X8({},e.fn.fontStyles()),{lineHeight:e.lineHeight,textOverflow:"ellipsis",overflow:"hidden",fontSize:e.fontSizes.sm,color:r==="filled"?e.white:e.colorScheme==="dark"?r==="light"?e.white:e.colors.dark[0]:e.black}),closeButton:{position:"absolute",top:e.spacing.sm,right:e.spacing.sm,color:"inherit"}})),hJe=Object.defineProperty,boe=Object.getOwnPropertySymbols,pJe=Object.prototype.hasOwnProperty,mJe=Object.prototype.propertyIsEnumerable,woe=(e,t,n)=>t in e?hJe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,gJe=(e,t)=>{for(var n in t||(t={}))pJe.call(t,n)&&woe(e,n,t[n]);if(boe)for(var n of boe(t))mJe.call(t,n)&&woe(e,n,t[n]);return e};function Sxe(e){return L.createElement("svg",gJe({viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),L.createElement("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}Sxe.displayName="@mantine/core/CloseIcon";var yJe=Object.defineProperty,kR=Object.getOwnPropertySymbols,Txe=Object.prototype.hasOwnProperty,Axe=Object.prototype.propertyIsEnumerable,Eoe=(e,t,n)=>t in e?yJe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,vJe=(e,t)=>{for(var n in t||(t={}))Txe.call(t,n)&&Eoe(e,n,t[n]);if(kR)for(var n of kR(t))Axe.call(t,n)&&Eoe(e,n,t[n]);return e},_Je=(e,t)=>{var n={};for(var r in e)Txe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&kR)for(var r of kR(e))t.indexOf(r)<0&&Axe.call(e,r)&&(n[r]=e[r]);return n};const bJe={xs:12,sm:14,md:16,lg:20,xl:24},wJe={size:"md"},Cxe=A.forwardRef((e,t)=>{const n=Ct("CloseButton",wJe,e),{iconSize:r,size:i="md"}=n,s=_Je(n,["iconSize","size"]),o=as(),a=r||o.fn.size({size:i,sizes:bJe});return L.createElement(OR,vJe({size:i,ref:t},s),L.createElement(Sxe,{width:a,height:a}))});Cxe.displayName="@mantine/core/CloseButton";const bv=Cxe;var EJe=Object.defineProperty,$R=Object.getOwnPropertySymbols,Ixe=Object.prototype.hasOwnProperty,Oxe=Object.prototype.propertyIsEnumerable,xoe=(e,t,n)=>t in e?EJe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,xJe=(e,t)=>{for(var n in t||(t={}))Ixe.call(t,n)&&xoe(e,n,t[n]);if($R)for(var n of $R(t))Oxe.call(t,n)&&xoe(e,n,t[n]);return e},SJe=(e,t)=>{var n={};for(var r in e)Ixe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&$R)for(var r of $R(e))t.indexOf(r)<0&&Oxe.call(e,r)&&(n[r]=e[r]);return n};const TJe={variant:"light"},Pxe=A.forwardRef((e,t)=>{const n=Ct("Alert",TJe,e),{id:r,className:i,title:s,variant:o,children:a,color:u,classNames:l,icon:c,styles:f,onClose:d,radius:h,withCloseButton:p,closeButtonLabel:m,unstyled:g}=n,y=SJe(n,["id","className","title","variant","children","color","classNames","icon","styles","onClose","radius","withCloseButton","closeButtonLabel","unstyled"]),{classes:v,cx:_}=dJe({color:u,radius:h,variant:o},{classNames:l,styles:f,unstyled:g,name:"Alert"}),b=vl(r),E=s&&`${b}-title`,w=`${b}-body`;return L.createElement(At,xJe({id:b,role:"alert","aria-labelledby":E,"aria-describedby":w,className:_(v.root,v[o],i),ref:t},y),L.createElement("div",{className:v.wrapper},c&&L.createElement("div",{className:v.icon},c),L.createElement("div",{className:v.body},s&&L.createElement("div",{className:v.title,"data-with-close-button":p||void 0},L.createElement("span",{id:E,className:v.label},s)),p&&L.createElement(bv,{className:v.closeButton,onClick:d,variant:"transparent",size:16,iconSize:16,"aria-label":m}),L.createElement("div",{id:w,className:v.message},a))))});Pxe.displayName="@mantine/core/Alert";var AJe=Object.defineProperty,CJe=Object.defineProperties,IJe=Object.getOwnPropertyDescriptors,Soe=Object.getOwnPropertySymbols,OJe=Object.prototype.hasOwnProperty,PJe=Object.prototype.propertyIsEnumerable,Toe=(e,t,n)=>t in e?AJe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,UO=(e,t)=>{for(var n in t||(t={}))OJe.call(t,n)&&Toe(e,n,t[n]);if(Soe)for(var n of Soe(t))PJe.call(t,n)&&Toe(e,n,t[n]);return e},kJe=(e,t)=>CJe(e,IJe(t));function $Je({underline:e,strikethrough:t}){const n=[];return e&&n.push("underline"),t&&n.push("line-through"),n.length>0?n.join(" "):"none"}function RJe({theme:e,color:t,variant:n}){return t==="dimmed"?e.colorScheme==="dark"?e.colors.dark[2]:e.colors.gray[6]:typeof t=="string"&&(t in e.colors||t.split(".")[0]in e.colors)?e.fn.variant({variant:"filled",color:t}).background:n==="link"?e.colors[e.primaryColor][e.colorScheme==="dark"?4:7]:t||"inherit"}function NJe(e){return typeof e=="number"?{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:e,WebkitBoxOrient:"vertical"}:null}var DJe=ht((e,{color:t,variant:n,size:r,lineClamp:i,inline:s,inherit:o,underline:a,gradient:u,weight:l,transform:c,align:f,strikethrough:d,italic:h})=>{const p=e.fn.variant({variant:"gradient",gradient:u});return{root:UO(kJe(UO(UO(UO({},e.fn.fontStyles()),e.fn.focusStyles()),NJe(i)),{color:RJe({color:t,theme:e,variant:n}),fontFamily:o?"inherit":e.fontFamily,fontSize:o||r===void 0?"inherit":e.fn.size({size:r,sizes:e.fontSizes}),lineHeight:o?"inherit":s?1:e.lineHeight,textDecoration:$Je({underline:a,strikethrough:d}),WebkitTapHighlightColor:"transparent",fontWeight:o?"inherit":l,textTransform:c,textAlign:f,fontStyle:h?"italic":void 0}),e.fn.hover(n==="link"&&a===void 0?{textDecoration:"underline"}:void 0)),gradient:{backgroundImage:p.background,WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"}}}),LJe=Object.defineProperty,RR=Object.getOwnPropertySymbols,kxe=Object.prototype.hasOwnProperty,$xe=Object.prototype.propertyIsEnumerable,Aoe=(e,t,n)=>t in e?LJe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,MJe=(e,t)=>{for(var n in t||(t={}))kxe.call(t,n)&&Aoe(e,n,t[n]);if(RR)for(var n of RR(t))$xe.call(t,n)&&Aoe(e,n,t[n]);return e},FJe=(e,t)=>{var n={};for(var r in e)kxe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&RR)for(var r of RR(e))t.indexOf(r)<0&&$xe.call(e,r)&&(n[r]=e[r]);return n};const BJe={variant:"text"},Rxe=A.forwardRef((e,t)=>{const n=Ct("Text",BJe,e),{className:r,size:i,weight:s,transform:o,color:a,align:u,variant:l,lineClamp:c,gradient:f,inline:d,inherit:h,underline:p,strikethrough:m,italic:g,classNames:y,styles:v,unstyled:_,span:b}=n,E=FJe(n,["className","size","weight","transform","color","align","variant","lineClamp","gradient","inline","inherit","underline","strikethrough","italic","classNames","styles","unstyled","span"]),{classes:w,cx:x}=DJe({variant:l,color:a,size:i,lineClamp:c,inline:d,inherit:h,underline:p,strikethrough:m,italic:g,weight:s,transform:o,align:u,gradient:f},{unstyled:_,name:"Text"});return L.createElement(At,MJe({ref:t,className:x(w.root,{[w.gradient]:l==="gradient"},r),component:b?"span":"div"},E))});Rxe.displayName="@mantine/core/Text";const Rt=Rxe;var jJe=ht(()=>({root:{backgroundColor:"transparent",cursor:"pointer",padding:0,border:0}})),zJe=Object.defineProperty,NR=Object.getOwnPropertySymbols,Nxe=Object.prototype.hasOwnProperty,Dxe=Object.prototype.propertyIsEnumerable,Coe=(e,t,n)=>t in e?zJe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ioe=(e,t)=>{for(var n in t||(t={}))Nxe.call(t,n)&&Coe(e,n,t[n]);if(NR)for(var n of NR(t))Dxe.call(t,n)&&Coe(e,n,t[n]);return e},UJe=(e,t)=>{var n={};for(var r in e)Nxe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&NR)for(var r of NR(e))t.indexOf(r)<0&&Dxe.call(e,r)&&(n[r]=e[r]);return n};const VJe={},Lxe=A.forwardRef((e,t)=>{const n=Ct("Anchor",VJe,e),{component:r,className:i,unstyled:s}=n,o=UJe(n,["component","className","unstyled"]),{classes:a,cx:u}=jJe(null,{name:"Anchor",unstyled:s}),l=r==="button"?{type:"button"}:null;return L.createElement(Rt,Ioe(Ioe({component:r||"a",variant:"link",ref:t,className:u(a.root,i)},l),o))});Lxe.displayName="@mantine/core/Anchor";const Mxe=Lxe,Fxe=A.createContext({}),HJe=Fxe.Provider;function Bxe(){return A.useContext(Fxe)}function QM(e,t){if(!e)return[];const n=Object.keys(e).filter(r=>r!=="base").map(r=>[t.fn.size({size:r,sizes:t.breakpoints}),e[r]]);return n.sort((r,i)=>r[0]-i[0]),n}var qJe=Object.defineProperty,WJe=Object.defineProperties,GJe=Object.getOwnPropertyDescriptors,Ooe=Object.getOwnPropertySymbols,YJe=Object.prototype.hasOwnProperty,KJe=Object.prototype.propertyIsEnumerable,Poe=(e,t,n)=>t in e?qJe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,VO=(e,t)=>{for(var n in t||(t={}))YJe.call(t,n)&&Poe(e,n,t[n]);if(Ooe)for(var n of Ooe(t))KJe.call(t,n)&&Poe(e,n,t[n]);return e},koe=(e,t)=>WJe(e,GJe(t)),XJe=ht((e,{height:t,width:n,fixed:r,position:i,hiddenBreakpoint:s,zIndex:o,section:a,withBorder:u})=>{const l=typeof n=="object"&&n!==null?QM(n,e).reduce((f,[d,h])=>(f[`@media (min-width: ${d}px)`]={width:h,minWidth:h},f),{}):null,c=u?{[a==="navbar"?"borderRight":"borderLeft"]:`1px solid ${e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[2]}`}:{};return{root:koe(VO(VO(koe(VO(VO({},e.fn.fontStyles()),i),{top:(i==null?void 0:i.top)||"var(--mantine-header-height)",bottom:0,zIndex:o,height:t||"calc(100vh - var(--mantine-header-height, 0px) - var(--mantine-footer-height, 0px))",width:(n==null?void 0:n.base)||"100%",position:r?"fixed":"static",boxSizing:"border-box",display:"flex",flexDirection:"column",backgroundColor:e.colorScheme==="dark"?e.colors.dark[7]:e.white}),c),l),{"&[data-hidden]":{[`@media (max-width: ${e.fn.size({size:s,sizes:e.breakpoints})-1}px)`]:{display:"none"}}})}});const QJe=XJe;var JJe=Object.defineProperty,DR=Object.getOwnPropertySymbols,jxe=Object.prototype.hasOwnProperty,zxe=Object.prototype.propertyIsEnumerable,$oe=(e,t,n)=>t in e?JJe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Roe=(e,t)=>{for(var n in t||(t={}))jxe.call(t,n)&&$oe(e,n,t[n]);if(DR)for(var n of DR(t))zxe.call(t,n)&&$oe(e,n,t[n]);return e},ZJe=(e,t)=>{var n={};for(var r in e)jxe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&DR)for(var r of DR(e))t.indexOf(r)<0&&zxe.call(e,r)&&(n[r]=e[r]);return n};const AG=A.forwardRef((e,t)=>{var n=e,{width:r,height:i,fixed:s=!1,position:o,zIndex:a=Tu("app"),hiddenBreakpoint:u="md",hidden:l=!1,withBorder:c=!0,className:f,classNames:d,styles:h,children:p,section:m,__staticSelector:g,unstyled:y}=n,v=ZJe(n,["width","height","fixed","position","zIndex","hiddenBreakpoint","hidden","withBorder","className","classNames","styles","children","section","__staticSelector","unstyled"]);const _=Bxe(),{classes:b,cx:E,theme:w}=QJe({width:r,height:i,fixed:_.fixed||s,position:o,hiddenBreakpoint:u,zIndex:_.zIndex||a,section:m,withBorder:c},{classNames:d,styles:h,name:g,unstyled:y}),x=QM(r,w).reduce((S,[I,C])=>(S[`@media (min-width: ${I}px)`]={[`--mantine-${m}-width`]:`${C}px`},S),{});return L.createElement(At,Roe({component:m==="navbar"?"nav":"aside",ref:t,"data-hidden":l||void 0,className:E(b.root,f)},v),p,L.createElement(UEe,{styles:()=>({":root":Roe({[`--mantine-${m}-width`]:r!=null&&r.base?`${r.base}px`:"0px"},x)})}))});AG.displayName="@mantine/core/HorizontalSection";var eZe=Object.defineProperty,LR=Object.getOwnPropertySymbols,Uxe=Object.prototype.hasOwnProperty,Vxe=Object.prototype.propertyIsEnumerable,Noe=(e,t,n)=>t in e?eZe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,tZe=(e,t)=>{for(var n in t||(t={}))Uxe.call(t,n)&&Noe(e,n,t[n]);if(LR)for(var n of LR(t))Vxe.call(t,n)&&Noe(e,n,t[n]);return e},nZe=(e,t)=>{var n={};for(var r in e)Uxe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&LR)for(var r of LR(e))t.indexOf(r)<0&&Vxe.call(e,r)&&(n[r]=e[r]);return n};const Hxe=A.forwardRef((e,t)=>{var n=e,{children:r,grow:i=!1,sx:s}=n,o=nZe(n,["children","grow","sx"]);return L.createElement(At,tZe({ref:t,sx:[{flex:i?1:0,boxSizing:"border-box"},...P1(s)]},o),r)});Hxe.displayName="@mantine/core/Section";const qxe=Hxe;var rZe=Object.defineProperty,Doe=Object.getOwnPropertySymbols,iZe=Object.prototype.hasOwnProperty,sZe=Object.prototype.propertyIsEnumerable,Loe=(e,t,n)=>t in e?rZe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,oZe=(e,t)=>{for(var n in t||(t={}))iZe.call(t,n)&&Loe(e,n,t[n]);if(Doe)for(var n of Doe(t))sZe.call(t,n)&&Loe(e,n,t[n]);return e};const aZe={fixed:!1,position:{top:0,left:0},zIndex:Tu("app"),hiddenBreakpoint:"md",hidden:!1},o1=A.forwardRef((e,t)=>{const n=Ct("Navbar",aZe,e);return L.createElement(AG,oZe({section:"navbar",__staticSelector:"Navbar",ref:t},n))});o1.Section=qxe;o1.displayName="@mantine/core/Navbar";var uZe=Object.defineProperty,lZe=Object.defineProperties,cZe=Object.getOwnPropertyDescriptors,Moe=Object.getOwnPropertySymbols,fZe=Object.prototype.hasOwnProperty,dZe=Object.prototype.propertyIsEnumerable,Foe=(e,t,n)=>t in e?uZe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Q8=(e,t)=>{for(var n in t||(t={}))fZe.call(t,n)&&Foe(e,n,t[n]);if(Moe)for(var n of Moe(t))dZe.call(t,n)&&Foe(e,n,t[n]);return e},Boe=(e,t)=>lZe(e,cZe(t)),hZe=ht((e,{height:t,fixed:n,position:r,zIndex:i,borderPosition:s})=>{const o=typeof t=="object"&&t!==null?QM(t,e).reduce((a,[u,l])=>(a[`@media (min-width: ${u}px)`]={height:l,minHeight:l},a),{}):null;return{root:Boe(Q8(Boe(Q8(Q8({},e.fn.fontStyles()),r),{zIndex:i,height:typeof t=="object"?(t==null?void 0:t.base)||"100%":t,maxHeight:typeof t=="object"?(t==null?void 0:t.base)||"100%":t,position:n?"fixed":"static",boxSizing:"border-box",backgroundColor:e.colorScheme==="dark"?e.colors.dark[7]:e.white}),o),{borderBottom:s==="bottom"?`1px solid ${e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[2]}`:void 0,borderTop:s==="top"?`1px solid ${e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[2]}`:void 0})}});const pZe=hZe;var mZe=Object.defineProperty,MR=Object.getOwnPropertySymbols,Wxe=Object.prototype.hasOwnProperty,Gxe=Object.prototype.propertyIsEnumerable,joe=(e,t,n)=>t in e?mZe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,zoe=(e,t)=>{for(var n in t||(t={}))Wxe.call(t,n)&&joe(e,n,t[n]);if(MR)for(var n of MR(t))Gxe.call(t,n)&&joe(e,n,t[n]);return e},gZe=(e,t)=>{var n={};for(var r in e)Wxe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&MR)for(var r of MR(e))t.indexOf(r)<0&&Gxe.call(e,r)&&(n[r]=e[r]);return n};const Yxe=A.forwardRef((e,t)=>{var n=e,{children:r,className:i,classNames:s,styles:o,height:a,fixed:u=!1,withBorder:l=!0,position:c,zIndex:f=Tu("app"),section:d,unstyled:h,__staticSelector:p}=n,m=gZe(n,["children","className","classNames","styles","height","fixed","withBorder","position","zIndex","section","unstyled","__staticSelector"]);const g=Bxe(),{classes:y,cx:v,theme:_}=pZe({height:a,fixed:g.fixed||u,position:c,zIndex:g.zIndex||f,borderPosition:l?d==="header"?"bottom":"top":"none"},{name:p,classNames:s,styles:o,unstyled:h}),b=typeof a=="object"&&a!==null?QM(a,_).reduce((E,[w,x])=>(E[`@media (min-width: ${w}px)`]={[`--mantine-${d}-height`]:`${x}px`},E),{}):null;return L.createElement(At,zoe({component:d==="header"?"header":"footer",className:v(y.root,i),ref:t},m),r,L.createElement(UEe,{styles:()=>({":root":zoe({[`--mantine-${d}-height`]:typeof a=="object"?`${a==null?void 0:a.base}px`||"100%":`${a}px`},b)})}))});Yxe.displayName="@mantine/core/VerticalSection";var yZe=Object.defineProperty,vZe=Object.defineProperties,_Ze=Object.getOwnPropertyDescriptors,Uoe=Object.getOwnPropertySymbols,bZe=Object.prototype.hasOwnProperty,wZe=Object.prototype.propertyIsEnumerable,Voe=(e,t,n)=>t in e?yZe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,EZe=(e,t)=>{for(var n in t||(t={}))bZe.call(t,n)&&Voe(e,n,t[n]);if(Uoe)for(var n of Uoe(t))wZe.call(t,n)&&Voe(e,n,t[n]);return e},xZe=(e,t)=>vZe(e,_Ze(t));const SZe={fixed:!1,position:{top:0,left:0,right:0},zIndex:Tu("app")},CG=A.forwardRef((e,t)=>{const n=Ct("Header",SZe,e);return L.createElement(Yxe,xZe(EZe({section:"header",__staticSelector:"Header"},n),{ref:t}))});CG.displayName="@mantine/core/Header";var TZe=Object.defineProperty,Hoe=Object.getOwnPropertySymbols,AZe=Object.prototype.hasOwnProperty,CZe=Object.prototype.propertyIsEnumerable,qoe=(e,t,n)=>t in e?TZe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,IZe=(e,t)=>{for(var n in t||(t={}))AZe.call(t,n)&&qoe(e,n,t[n]);if(Hoe)for(var n of Hoe(t))CZe.call(t,n)&&qoe(e,n,t[n]);return e};const OZe={fixed:!1,position:{top:0,right:0},zIndex:Tu("app"),hiddenBreakpoint:"md",hidden:!1},IG=A.forwardRef((e,t)=>{const n=Ct("Aside",OZe,e);return L.createElement(AG,IZe({section:"aside",__staticSelector:"Aside",ref:t},n))});IG.Section=qxe;IG.displayName="@mantine/core/Aside";var PZe=Object.defineProperty,Woe=Object.getOwnPropertySymbols,kZe=Object.prototype.hasOwnProperty,$Ze=Object.prototype.propertyIsEnumerable,Goe=(e,t,n)=>t in e?PZe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,RZe=(e,t)=>{for(var n in t||(t={}))kZe.call(t,n)&&Goe(e,n,t[n]);if(Woe)for(var n of Woe(t))$Ze.call(t,n)&&Goe(e,n,t[n]);return e};function NZe(e,t){const n=t.fn.size({size:e.padding,sizes:t.spacing}),r=e.navbarOffsetBreakpoint?t.fn.size({size:e.navbarOffsetBreakpoint,sizes:t.breakpoints}):null,i=e.asideOffsetBreakpoint?t.fn.size({size:e.asideOffsetBreakpoint,sizes:t.breakpoints}):null;return e.fixed?{minHeight:"100vh",paddingTop:`calc(var(--mantine-header-height, 0px) + ${n}px)`,paddingBottom:`calc(var(--mantine-footer-height, 0px) + ${n}px)`,paddingLeft:`calc(var(--mantine-navbar-width, 0px) + ${n}px)`,paddingRight:`calc(var(--mantine-aside-width, 0px) + ${n}px)`,[`@media (max-width: ${r-1}px)`]:{paddingLeft:n},[`@media (max-width: ${i-1}px)`]:{paddingRight:n}}:{padding:n}}var DZe=ht((e,t)=>({root:{boxSizing:"border-box"},body:{display:"flex",boxSizing:"border-box"},main:RZe({flex:1,width:"100vw",boxSizing:"border-box"},NZe(t,e))})),LZe=Object.defineProperty,FR=Object.getOwnPropertySymbols,Kxe=Object.prototype.hasOwnProperty,Xxe=Object.prototype.propertyIsEnumerable,Yoe=(e,t,n)=>t in e?LZe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,MZe=(e,t)=>{for(var n in t||(t={}))Kxe.call(t,n)&&Yoe(e,n,t[n]);if(FR)for(var n of FR(t))Xxe.call(t,n)&&Yoe(e,n,t[n]);return e},FZe=(e,t)=>{var n={};for(var r in e)Kxe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&FR)for(var r of FR(e))t.indexOf(r)<0&&Xxe.call(e,r)&&(n[r]=e[r]);return n};const BZe={fixed:!0,zIndex:Tu("app"),padding:"md"},OG=A.forwardRef((e,t)=>{const n=Ct("AppShell",BZe,e),{children:r,navbar:i,header:s,footer:o,aside:a,fixed:u,zIndex:l,padding:c,navbarOffsetBreakpoint:f,asideOffsetBreakpoint:d,className:h,styles:p,classNames:m,unstyled:g,hidden:y}=n,v=FZe(n,["children","navbar","header","footer","aside","fixed","zIndex","padding","navbarOffsetBreakpoint","asideOffsetBreakpoint","className","styles","classNames","unstyled","hidden"]),{classes:_,cx:b}=DZe({padding:c,fixed:u,navbarOffsetBreakpoint:f,asideOffsetBreakpoint:d},{styles:p,classNames:m,unstyled:g,name:"AppShell"});return y?L.createElement(L.Fragment,null,r):L.createElement(HJe,{value:{fixed:u,zIndex:l}},L.createElement(At,MZe({className:b(_.root,h),ref:t},v),s,L.createElement("div",{className:_.body},i,L.createElement("main",{className:_.main},r),a),o))});OG.displayName="@mantine/core/AppShell";const HO={xs:1,sm:2,md:3,lg:4,xl:5};function qO(e,t){const n=e.fn.variant({variant:"outline",color:t}).border;return typeof t=="string"&&(t in e.colors||t.split(".")[0]in e.colors)?n:t===void 0?e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[4]:t}var jZe=ht((e,{size:t,variant:n,color:r})=>({root:{},withLabel:{borderTop:"0 !important"},left:{"&::before":{display:"none"}},right:{"&::after":{display:"none"}},label:{display:"flex",alignItems:"center","&::before":{content:'""',flex:1,height:1,borderTop:`${e.fn.size({size:t,sizes:HO})}px ${n} ${qO(e,r)}`,marginRight:e.spacing.xs},"&::after":{content:'""',flex:1,borderTop:`${e.fn.size({size:t,sizes:HO})}px ${n} ${qO(e,r)}`,marginLeft:e.spacing.xs}},labelDefaultStyles:{color:r==="dark"?e.colors.dark[1]:e.fn.themeColor(r,e.colorScheme==="dark"?5:e.fn.primaryShade(),!1)},horizontal:{border:0,borderTopWidth:e.fn.size({size:t,sizes:HO}),borderTopColor:qO(e,r),borderTopStyle:n,margin:0},vertical:{border:0,alignSelf:"stretch",height:"auto",borderLeftWidth:e.fn.size({size:t,sizes:HO}),borderLeftColor:qO(e,r),borderLeftStyle:n}})),zZe=Object.defineProperty,UZe=Object.defineProperties,VZe=Object.getOwnPropertyDescriptors,BR=Object.getOwnPropertySymbols,Qxe=Object.prototype.hasOwnProperty,Jxe=Object.prototype.propertyIsEnumerable,Koe=(e,t,n)=>t in e?zZe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Xoe=(e,t)=>{for(var n in t||(t={}))Qxe.call(t,n)&&Koe(e,n,t[n]);if(BR)for(var n of BR(t))Jxe.call(t,n)&&Koe(e,n,t[n]);return e},HZe=(e,t)=>UZe(e,VZe(t)),qZe=(e,t)=>{var n={};for(var r in e)Qxe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&BR)for(var r of BR(e))t.indexOf(r)<0&&Jxe.call(e,r)&&(n[r]=e[r]);return n};const WZe={orientation:"horizontal",size:"xs",labelPosition:"left",variant:"solid"},$z=A.forwardRef((e,t)=>{const n=Ct("Divider",WZe,e),{className:r,color:i,orientation:s,size:o,label:a,labelPosition:u,labelProps:l,variant:c,styles:f,classNames:d,unstyled:h}=n,p=qZe(n,["className","color","orientation","size","label","labelPosition","labelProps","variant","styles","classNames","unstyled"]),{classes:m,cx:g}=jZe({color:i,size:o,variant:c},{classNames:d,styles:f,unstyled:h,name:"Divider"}),y=s==="vertical",v=s==="horizontal",_=!!a&&v,b=!(l!=null&&l.color);return L.createElement(At,Xoe({ref:t,className:g(m.root,{[m.vertical]:y,[m.horizontal]:v,[m.withLabel]:_},r),role:"separator"},p),_&&L.createElement(Rt,HZe(Xoe({},l),{size:(l==null?void 0:l.size)||"xs",sx:{marginTop:2},className:g(m.label,m[u],{[m.labelDefaultStyles]:b})}),a))});$z.displayName="@mantine/core/Divider";var GZe=Object.defineProperty,YZe=Object.defineProperties,KZe=Object.getOwnPropertyDescriptors,Qoe=Object.getOwnPropertySymbols,XZe=Object.prototype.hasOwnProperty,QZe=Object.prototype.propertyIsEnumerable,Joe=(e,t,n)=>t in e?GZe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Zoe=(e,t)=>{for(var n in t||(t={}))XZe.call(t,n)&&Joe(e,n,t[n]);if(Qoe)for(var n of Qoe(t))QZe.call(t,n)&&Joe(e,n,t[n]);return e},JZe=(e,t)=>YZe(e,KZe(t)),ZZe=ht((e,{size:t})=>({item:JZe(Zoe({},e.fn.fontStyles()),{boxSizing:"border-box",textAlign:"left",width:"100%",padding:`${e.fn.size({size:t,sizes:e.spacing})/1.5}px ${e.fn.size({size:t,sizes:e.spacing})}px`,cursor:"pointer",fontSize:e.fn.size({size:t,sizes:e.fontSizes}),color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,borderRadius:e.radius.sm,"&[data-hovered]":{backgroundColor:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[1]},"&[data-selected]":Zoe({backgroundColor:e.fn.variant({variant:"filled"}).background,color:e.fn.variant({variant:"filled"}).color},e.fn.hover({backgroundColor:e.fn.variant({variant:"filled"}).hover})),"&[data-disabled]":{cursor:"default",color:e.colors.dark[2]}}),nothingFound:{boxSizing:"border-box",color:e.colors.gray[6],paddingTop:e.fn.size({size:t,sizes:e.spacing})/2,paddingBottom:e.fn.size({size:t,sizes:e.spacing})/2,textAlign:"center"},separator:{boxSizing:"border-box",textAlign:"left",width:"100%",padding:`${e.fn.size({size:t,sizes:e.spacing})/1.5}px ${e.fn.size({size:t,sizes:e.spacing})}px`},separatorLabel:{color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[5]}})),eet=Object.defineProperty,eae=Object.getOwnPropertySymbols,tet=Object.prototype.hasOwnProperty,net=Object.prototype.propertyIsEnumerable,tae=(e,t,n)=>t in e?eet(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ret=(e,t)=>{for(var n in t||(t={}))tet.call(t,n)&&tae(e,n,t[n]);if(eae)for(var n of eae(t))net.call(t,n)&&tae(e,n,t[n]);return e};function PG({data:e,hovered:t,classNames:n,styles:r,isItemSelected:i,uuid:s,__staticSelector:o,onItemHover:a,onItemSelect:u,itemsRefs:l,itemComponent:c,size:f,nothingFound:d,creatable:h,createLabel:p,unstyled:m}){const{classes:g}=ZZe({size:f},{classNames:n,styles:r,unstyled:m,name:o}),y=[],v=[];let _=null;const b=(w,x)=>{const S=typeof i=="function"?i(w.value):!1;return L.createElement(c,ret({key:w.value,className:g.item,"data-disabled":w.disabled||void 0,"data-hovered":!w.disabled&&t===x||void 0,"data-selected":!w.disabled&&S||void 0,onMouseEnter:()=>a(x),id:`${s}-${x}`,role:"option",tabIndex:-1,"aria-selected":t===x,ref:I=>{l&&l.current&&(l.current[w.value]=I)},onMouseDown:w.disabled?null:I=>{I.preventDefault(),u(w)},disabled:w.disabled},w))};let E=null;if(e.forEach((w,x)=>{w.creatable?_=x:w.group?(E!==w.group&&(E=w.group,v.push(L.createElement("div",{className:g.separator,key:`__mantine-divider-${x}`},L.createElement($z,{classNames:{label:g.separatorLabel},label:w.group})))),v.push(b(w,x))):y.push(b(w,x))}),h){const w=e[_];y.push(L.createElement("div",{key:FXe(),className:g.item,"data-hovered":t===_||void 0,onMouseEnter:()=>a(_),onMouseDown:x=>{x.preventDefault(),u(w)},tabIndex:-1,ref:x=>{l&&l.current&&(l.current[w.value]=x)}},p))}return v.length>0&&y.length>0&&y.unshift(L.createElement("div",{className:g.separator,key:"empty-group-separator"},L.createElement($z,null))),v.length>0||y.length>0?L.createElement(L.Fragment,null,v,y):L.createElement(Rt,{size:f,unstyled:m,className:g.nothingFound},d)}PG.displayName="@mantine/core/SelectItems";var iet=Object.defineProperty,jR=Object.getOwnPropertySymbols,Zxe=Object.prototype.hasOwnProperty,eSe=Object.prototype.propertyIsEnumerable,nae=(e,t,n)=>t in e?iet(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,set=(e,t)=>{for(var n in t||(t={}))Zxe.call(t,n)&&nae(e,n,t[n]);if(jR)for(var n of jR(t))eSe.call(t,n)&&nae(e,n,t[n]);return e},oet=(e,t)=>{var n={};for(var r in e)Zxe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&jR)for(var r of jR(e))t.indexOf(r)<0&&eSe.call(e,r)&&(n[r]=e[r]);return n};const kG=A.forwardRef((e,t)=>{var n=e,{label:r,value:i}=n,s=oet(n,["label","value"]);return L.createElement("div",set({ref:t},s),r||i)});kG.displayName="@mantine/core/DefaultItem";function aet(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function tSe(...e){return t=>e.forEach(n=>aet(n,t))}function wv(...e){return A.useCallback(tSe(...e),e)}const nSe=A.forwardRef((e,t)=>{const{children:n,...r}=e,i=A.Children.toArray(n),s=i.find(cet);if(s){const o=s.props.children,a=i.map(u=>u===s?A.Children.count(o)>1?A.Children.only(null):A.isValidElement(o)?o.props.children:null:u);return A.createElement(Rz,di({},r,{ref:t}),A.isValidElement(o)?A.cloneElement(o,void 0,a):null)}return A.createElement(Rz,di({},r,{ref:t}),n)});nSe.displayName="Slot";const Rz=A.forwardRef((e,t)=>{const{children:n,...r}=e;return A.isValidElement(n)?A.cloneElement(n,{...fet(r,n.props),ref:tSe(t,n.ref)}):A.Children.count(n)>1?A.Children.only(null):null});Rz.displayName="SlotClone";const uet=({children:e})=>A.createElement(A.Fragment,null,e);function cet(e){return A.isValidElement(e)&&e.type===uet}function fet(e,t){const n={...t};for(const r in t){const i=e[r],s=t[r];/^on[A-Z]/.test(r)?n[r]=(...a)=>{s==null||s(...a),i==null||i(...a)}:r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...e,...n}}const det=["a","button","div","h2","h3","img","li","nav","ol","p","span","svg","ul"],DC=det.reduce((e,t)=>{const n=A.forwardRef((r,i)=>{const{asChild:s,...o}=r,a=s?nSe:t;return A.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),A.createElement(a,di({},o,{ref:i}))});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{}),Nz=globalThis!=null&&globalThis.document?A.useLayoutEffect:()=>{};function het(e,t){return A.useReducer((n,r)=>{const i=t[n][r];return i??n},e)}const LC=e=>{const{present:t,children:n}=e,r=pet(t),i=typeof n=="function"?n({present:r.isPresent}):A.Children.only(n),s=wv(r.ref,i.ref);return typeof n=="function"||r.isPresent?A.cloneElement(i,{ref:s}):null};LC.displayName="Presence";function pet(e){const[t,n]=A.useState(),r=A.useRef({}),i=A.useRef(e),s=A.useRef("none"),o=e?"mounted":"unmounted",[a,u]=het(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return A.useEffect(()=>{const l=WO(r.current);s.current=a==="mounted"?l:"none"},[a]),Nz(()=>{const l=r.current,c=i.current;if(c!==e){const d=s.current,h=WO(l);e?u("MOUNT"):h==="none"||(l==null?void 0:l.display)==="none"?u("UNMOUNT"):u(c&&d!==h?"ANIMATION_OUT":"UNMOUNT"),i.current=e}},[e,u]),Nz(()=>{if(t){const l=f=>{const h=WO(r.current).includes(f.animationName);f.target===t&&h&&yv.flushSync(()=>u("ANIMATION_END"))},c=f=>{f.target===t&&(s.current=WO(r.current))};return t.addEventListener("animationstart",c),t.addEventListener("animationcancel",l),t.addEventListener("animationend",l),()=>{t.removeEventListener("animationstart",c),t.removeEventListener("animationcancel",l),t.removeEventListener("animationend",l)}}else u("ANIMATION_END")},[t,u]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:A.useCallback(l=>{l&&(r.current=getComputedStyle(l)),n(l)},[])}}function WO(e){return(e==null?void 0:e.animationName)||"none"}function met(e,t=[]){let n=[];function r(s,o){const a=A.createContext(o),u=n.length;n=[...n,o];function l(f){const{scope:d,children:h,...p}=f,m=(d==null?void 0:d[e][u])||a,g=A.useMemo(()=>p,Object.values(p));return A.createElement(m.Provider,{value:g},h)}function c(f,d){const h=(d==null?void 0:d[e][u])||a,p=A.useContext(h);if(p)return p;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${s}\``)}return l.displayName=s+"Provider",[l,c]}const i=()=>{const s=n.map(o=>A.createContext(o));return function(a){const u=(a==null?void 0:a[e])||s;return A.useMemo(()=>({[`__scope${e}`]:{...a,[e]:u}}),[a,u])}};return i.scopeName=e,[r,get(i,...t)]}function get(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:u,scopeName:l})=>{const f=u(s)[`__scope${l}`];return{...a,...f}},{});return A.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}function xy(e){const t=A.useRef(e);return A.useEffect(()=>{t.current=e}),A.useMemo(()=>(...n)=>{var r;return(r=t.current)===null||r===void 0?void 0:r.call(t,...n)},[])}const yet=A.createContext(void 0);function vet(e){const t=A.useContext(yet);return e||t||"ltr"}function _et(e,[t,n]){return Math.min(n,Math.max(t,e))}function a1(e,t,{checkForDefaultPrevented:n=!0}={}){return function(i){if(e==null||e(i),n===!1||!i.defaultPrevented)return t==null?void 0:t(i)}}function bet(e,t){return A.useReducer((n,r)=>{const i=t[n][r];return i??n},e)}const rSe="ScrollArea",[iSe,jbn]=met(rSe),[wet,uc]=iSe(rSe),Eet=A.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:i,scrollHideDelay:s=600,...o}=e,[a,u]=A.useState(null),[l,c]=A.useState(null),[f,d]=A.useState(null),[h,p]=A.useState(null),[m,g]=A.useState(null),[y,v]=A.useState(0),[_,b]=A.useState(0),[E,w]=A.useState(!1),[x,S]=A.useState(!1),I=wv(t,O=>u(O)),C=vet(i);return A.createElement(wet,{scope:n,type:r,dir:C,scrollHideDelay:s,scrollArea:a,viewport:l,onViewportChange:c,content:f,onContentChange:d,scrollbarX:h,onScrollbarXChange:p,scrollbarXEnabled:E,onScrollbarXEnabledChange:w,scrollbarY:m,onScrollbarYChange:g,scrollbarYEnabled:x,onScrollbarYEnabledChange:S,onCornerWidthChange:v,onCornerHeightChange:b},A.createElement(DC.div,di({dir:C},o,{ref:I,style:{position:"relative","--radix-scroll-area-corner-width":y+"px","--radix-scroll-area-corner-height":_+"px",...e.style}})))}),xet="ScrollAreaViewport",Tet=A.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,...i}=e,s=uc(xet,n),o=A.useRef(null),a=wv(t,o,s.onViewportChange);return A.createElement(A.Fragment,null,A.createElement("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"}}),A.createElement(DC.div,di({"data-radix-scroll-area-viewport":""},i,{ref:a,style:{overflowX:s.scrollbarXEnabled?"scroll":"hidden",overflowY:s.scrollbarYEnabled?"scroll":"hidden",...e.style}}),A.createElement("div",{ref:s.onContentChange,style:{minWidth:"100%",display:"table"}},r)))}),Wp="ScrollAreaScrollbar",Aet=A.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=uc(Wp,e.__scopeScrollArea),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:o}=i,a=e.orientation==="horizontal";return A.useEffect(()=>(a?s(!0):o(!0),()=>{a?s(!1):o(!1)}),[a,s,o]),i.type==="hover"?A.createElement(Cet,di({},r,{ref:t,forceMount:n})):i.type==="scroll"?A.createElement(Iet,di({},r,{ref:t,forceMount:n})):i.type==="auto"?A.createElement(sSe,di({},r,{ref:t,forceMount:n})):i.type==="always"?A.createElement($G,di({},r,{ref:t})):null}),Cet=A.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=uc(Wp,e.__scopeScrollArea),[s,o]=A.useState(!1);return A.useEffect(()=>{const a=i.scrollArea;let u=0;if(a){const l=()=>{window.clearTimeout(u),o(!0)},c=()=>{u=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return a.addEventListener("pointerenter",l),a.addEventListener("pointerleave",c),()=>{window.clearTimeout(u),a.removeEventListener("pointerenter",l),a.removeEventListener("pointerleave",c)}}},[i.scrollArea,i.scrollHideDelay]),A.createElement(LC,{present:n||s},A.createElement(sSe,di({"data-state":s?"visible":"hidden"},r,{ref:t})))}),Iet=A.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=uc(Wp,e.__scopeScrollArea),s=e.orientation==="horizontal",o=ZM(()=>u("SCROLL_END"),100),[a,u]=bet("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return A.useEffect(()=>{if(a==="idle"){const l=window.setTimeout(()=>u("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(l)}},[a,i.scrollHideDelay,u]),A.useEffect(()=>{const l=i.viewport,c=s?"scrollLeft":"scrollTop";if(l){let f=l[c];const d=()=>{const h=l[c];f!==h&&(u("SCROLL"),o()),f=h};return l.addEventListener("scroll",d),()=>l.removeEventListener("scroll",d)}},[i.viewport,s,u,o]),A.createElement(LC,{present:n||a!=="hidden"},A.createElement($G,di({"data-state":a==="hidden"?"hidden":"visible"},r,{ref:t,onPointerEnter:a1(e.onPointerEnter,()=>u("POINTER_ENTER")),onPointerLeave:a1(e.onPointerLeave,()=>u("POINTER_LEAVE"))})))}),sSe=A.forwardRef((e,t)=>{const n=uc(Wp,e.__scopeScrollArea),{forceMount:r,...i}=e,[s,o]=A.useState(!1),a=e.orientation==="horizontal",u=ZM(()=>{if(n.viewport){const l=n.viewport.offsetWidth<n.viewport.scrollWidth,c=n.viewport.offsetHeight<n.viewport.scrollHeight;o(a?l:c)}},10);return aw(n.viewport,u),aw(n.content,u),A.createElement(LC,{present:r||s},A.createElement($G,di({"data-state":s?"visible":"hidden"},i,{ref:t})))}),$G=A.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,i=uc(Wp,e.__scopeScrollArea),s=A.useRef(null),o=A.useRef(0),[a,u]=A.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),l=lSe(a.viewport,a.content),c={...r,sizes:a,onSizesChange:u,hasThumb:l>0&&l<1,onThumbChange:d=>s.current=d,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:d=>o.current=d};function f(d,h){return Let(d,o.current,a,h)}return n==="horizontal"?A.createElement(Oet,di({},c,{ref:t,onThumbPositionChange:()=>{if(i.viewport&&s.current){const d=i.viewport.scrollLeft,h=rae(d,a,i.dir);s.current.style.transform=`translate3d(${h}px, 0, 0)`}},onWheelScroll:d=>{i.viewport&&(i.viewport.scrollLeft=d)},onDragScroll:d=>{i.viewport&&(i.viewport.scrollLeft=f(d,i.dir))}})):n==="vertical"?A.createElement(Pet,di({},c,{ref:t,onThumbPositionChange:()=>{if(i.viewport&&s.current){const d=i.viewport.scrollTop,h=rae(d,a);s.current.style.transform=`translate3d(0, ${h}px, 0)`}},onWheelScroll:d=>{i.viewport&&(i.viewport.scrollTop=d)},onDragScroll:d=>{i.viewport&&(i.viewport.scrollTop=f(d))}})):null}),Oet=A.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...i}=e,s=uc(Wp,e.__scopeScrollArea),[o,a]=A.useState(),u=A.useRef(null),l=wv(t,u,s.onScrollbarXChange);return A.useEffect(()=>{u.current&&a(getComputedStyle(u.current))},[u]),A.createElement(aSe,di({"data-orientation":"horizontal"},i,{ref:l,sizes:n,style:{bottom:0,left:s.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:s.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":JM(n)+"px",...e.style},onThumbPointerDown:c=>e.onThumbPointerDown(c.x),onDragScroll:c=>e.onDragScroll(c.x),onWheelScroll:(c,f)=>{if(s.viewport){const d=s.viewport.scrollLeft+c.deltaX;e.onWheelScroll(d),fSe(d,f)&&c.preventDefault()}},onResize:()=>{u.current&&s.viewport&&o&&r({content:s.viewport.scrollWidth,viewport:s.viewport.offsetWidth,scrollbar:{size:u.current.clientWidth,paddingStart:zR(o.paddingLeft),paddingEnd:zR(o.paddingRight)}})}}))}),Pet=A.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...i}=e,s=uc(Wp,e.__scopeScrollArea),[o,a]=A.useState(),u=A.useRef(null),l=wv(t,u,s.onScrollbarYChange);return A.useEffect(()=>{u.current&&a(getComputedStyle(u.current))},[u]),A.createElement(aSe,di({"data-orientation":"vertical"},i,{ref:l,sizes:n,style:{top:0,right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":JM(n)+"px",...e.style},onThumbPointerDown:c=>e.onThumbPointerDown(c.y),onDragScroll:c=>e.onDragScroll(c.y),onWheelScroll:(c,f)=>{if(s.viewport){const d=s.viewport.scrollTop+c.deltaY;e.onWheelScroll(d),fSe(d,f)&&c.preventDefault()}},onResize:()=>{u.current&&s.viewport&&o&&r({content:s.viewport.scrollHeight,viewport:s.viewport.offsetHeight,scrollbar:{size:u.current.clientHeight,paddingStart:zR(o.paddingTop),paddingEnd:zR(o.paddingBottom)}})}}))}),[ket,oSe]=iSe(Wp),aSe=A.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:i,onThumbChange:s,onThumbPointerUp:o,onThumbPointerDown:a,onThumbPositionChange:u,onDragScroll:l,onWheelScroll:c,onResize:f,...d}=e,h=uc(Wp,n),[p,m]=A.useState(null),g=wv(t,I=>m(I)),y=A.useRef(null),v=A.useRef(""),_=h.viewport,b=r.content-r.viewport,E=xy(c),w=xy(u),x=ZM(f,10);function S(I){if(y.current){const C=I.clientX-y.current.left,O=I.clientY-y.current.top;l({x:C,y:O})}}return A.useEffect(()=>{const I=C=>{const O=C.target;(p==null?void 0:p.contains(O))&&E(C,b)};return document.addEventListener("wheel",I,{passive:!1}),()=>document.removeEventListener("wheel",I,{passive:!1})},[_,p,b,E]),A.useEffect(w,[r,w]),aw(p,x),aw(h.content,x),A.createElement(ket,{scope:n,scrollbar:p,hasThumb:i,onThumbChange:xy(s),onThumbPointerUp:xy(o),onThumbPositionChange:w,onThumbPointerDown:xy(a)},A.createElement(DC.div,di({},d,{ref:g,style:{position:"absolute",...d.style},onPointerDown:a1(e.onPointerDown,I=>{I.button===0&&(I.target.setPointerCapture(I.pointerId),y.current=p.getBoundingClientRect(),v.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",S(I))}),onPointerMove:a1(e.onPointerMove,S),onPointerUp:a1(e.onPointerUp,I=>{I.target.releasePointerCapture(I.pointerId),document.body.style.webkitUserSelect=v.current,y.current=null})})))}),Dz="ScrollAreaThumb",$et=A.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=oSe(Dz,e.__scopeScrollArea);return A.createElement(LC,{present:n||i.hasThumb},A.createElement(Ret,di({ref:t},r)))}),Ret=A.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...i}=e,s=uc(Dz,n),o=oSe(Dz,n),{onThumbPositionChange:a}=o,u=wv(t,f=>o.onThumbChange(f)),l=A.useRef(),c=ZM(()=>{l.current&&(l.current(),l.current=void 0)},100);return A.useEffect(()=>{const f=s.viewport;if(f){const d=()=>{if(c(),!l.current){const h=Met(f,a);l.current=h,a()}};return a(),f.addEventListener("scroll",d),()=>f.removeEventListener("scroll",d)}},[s.viewport,c,a]),A.createElement(DC.div,di({"data-state":o.hasThumb?"visible":"hidden"},i,{ref:u,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:a1(e.onPointerDownCapture,f=>{const h=f.target.getBoundingClientRect(),p=f.clientX-h.left,m=f.clientY-h.top;o.onThumbPointerDown({x:p,y:m})}),onPointerUp:a1(e.onPointerUp,o.onThumbPointerUp)}))}),uSe="ScrollAreaCorner",Net=A.forwardRef((e,t)=>{const n=uc(uSe,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?A.createElement(Det,di({},e,{ref:t})):null}),Det=A.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,i=uc(uSe,n),[s,o]=A.useState(0),[a,u]=A.useState(0),l=!!(s&&a);return aw(i.scrollbarX,()=>{var c;const f=((c=i.scrollbarX)===null||c===void 0?void 0:c.offsetHeight)||0;i.onCornerHeightChange(f),u(f)}),aw(i.scrollbarY,()=>{var c;const f=((c=i.scrollbarY)===null||c===void 0?void 0:c.offsetWidth)||0;i.onCornerWidthChange(f),o(f)}),l?A.createElement(DC.div,di({},r,{ref:t,style:{width:s,height:a,position:"absolute",right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:0,...e.style}})):null});function zR(e){return e?parseInt(e,10):0}function lSe(e,t){const n=e/t;return isNaN(n)?0:n}function JM(e){const t=lSe(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function Let(e,t,n,r="ltr"){const i=JM(n),s=i/2,o=t||s,a=i-o,u=n.scrollbar.paddingStart+o,l=n.scrollbar.size-n.scrollbar.paddingEnd-a,c=n.content-n.viewport,f=r==="ltr"?[0,c]:[c*-1,0];return cSe([u,l],f)(e)}function rae(e,t,n="ltr"){const r=JM(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=t.scrollbar.size-i,o=t.content-t.viewport,a=s-r,u=n==="ltr"?[0,o]:[o*-1,0],l=_et(e,u);return cSe([0,o],[0,a])(l)}function cSe(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function fSe(e,t){return e>0&&e<t}const Met=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function i(){const s={left:e.scrollLeft,top:e.scrollTop},o=n.left!==s.left,a=n.top!==s.top;(o||a)&&t(),n=s,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)};function ZM(e,t){const n=xy(e),r=A.useRef(0);return A.useEffect(()=>()=>window.clearTimeout(r.current),[]),A.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function aw(e,t){const n=xy(t);Nz(()=>{let r=0;if(e){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(e),()=>{window.cancelAnimationFrame(r),i.unobserve(e)}}},[e,n])}const Fet=Eet,Bet=Tet,iae=Aet,sae=$et,jet=Net;var zet=ht((e,{scrollbarSize:t,offsetScrollbars:n,scrollbarHovered:r,hidden:i},s)=>({root:{overflow:"hidden"},viewport:{width:"100%",height:"100%",paddingRight:n?t:void 0,paddingBottom:n?t:void 0},scrollbar:{display:i?"none":"flex",userSelect:"none",touchAction:"none",boxSizing:"border-box",padding:t/5,transition:"background-color 150ms ease, opacity 150ms ease","&:hover":{backgroundColor:e.colorScheme==="dark"?e.colors.dark[8]:e.colors.gray[0],[`& .${s("thumb")}`]:{backgroundColor:e.colorScheme==="dark"?e.fn.rgba(e.white,.5):e.fn.rgba(e.black,.5)}},'&[data-orientation="vertical"]':{width:t},'&[data-orientation="horizontal"]':{flexDirection:"column",height:t},'&[data-state="hidden"]':{display:"none",opacity:0}},thumb:{ref:s("thumb"),flex:1,backgroundColor:e.colorScheme==="dark"?e.fn.rgba(e.white,.4):e.fn.rgba(e.black,.4),borderRadius:t,position:"relative",transition:"background-color 150ms ease",display:i?"none":void 0,"&::before":{content:'""',position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"100%",height:"100%"}},corner:{backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[0],transition:"opacity 150ms ease",opacity:r?1:0,display:i?"none":void 0}})),Uet=Object.defineProperty,Vet=Object.defineProperties,Het=Object.getOwnPropertyDescriptors,UR=Object.getOwnPropertySymbols,dSe=Object.prototype.hasOwnProperty,hSe=Object.prototype.propertyIsEnumerable,oae=(e,t,n)=>t in e?Uet(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,pSe=(e,t)=>{for(var n in t||(t={}))dSe.call(t,n)&&oae(e,n,t[n]);if(UR)for(var n of UR(t))hSe.call(t,n)&&oae(e,n,t[n]);return e},qet=(e,t)=>Vet(e,Het(t)),mSe=(e,t)=>{var n={};for(var r in e)dSe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&UR)for(var r of UR(e))t.indexOf(r)<0&&hSe.call(e,r)&&(n[r]=e[r]);return n};const gSe={scrollbarSize:12,scrollHideDelay:1e3,type:"hover",offsetScrollbars:!1},e6=A.forwardRef((e,t)=>{const n=Ct("ScrollArea",gSe,e),{children:r,className:i,classNames:s,styles:o,scrollbarSize:a,scrollHideDelay:u,type:l,dir:c,offsetScrollbars:f,viewportRef:d,onScrollPositionChange:h,unstyled:p}=n,m=mSe(n,["children","className","classNames","styles","scrollbarSize","scrollHideDelay","type","dir","offsetScrollbars","viewportRef","onScrollPositionChange","unstyled"]),[g,y]=A.useState(!1),v=as(),{classes:_,cx:b}=zet({scrollbarSize:a,offsetScrollbars:f,scrollbarHovered:g,hidden:l==="never"},{name:"ScrollArea",classNames:s,styles:o,unstyled:p});return L.createElement(Fet,{type:l==="never"?"always":l,scrollHideDelay:u,dir:c||v.dir,ref:t,asChild:!0},L.createElement(At,pSe({className:b(_.root,i)},m),L.createElement(Bet,{className:_.viewport,ref:d,onScroll:typeof h=="function"?({currentTarget:E})=>h({x:E.scrollLeft,y:E.scrollTop}):void 0},r),L.createElement(iae,{orientation:"horizontal",className:_.scrollbar,forceMount:!0,onMouseEnter:()=>y(!0),onMouseLeave:()=>y(!1)},L.createElement(sae,{className:_.thumb})),L.createElement(iae,{orientation:"vertical",className:_.scrollbar,forceMount:!0,onMouseEnter:()=>y(!0),onMouseLeave:()=>y(!1)},L.createElement(sae,{className:_.thumb})),L.createElement(jet,{className:_.corner})))}),ySe=A.forwardRef((e,t)=>{const n=Ct("ScrollAreaAutosize",gSe,e),{maxHeight:r,children:i,classNames:s,styles:o,scrollbarSize:a,scrollHideDelay:u,type:l,dir:c,offsetScrollbars:f,viewportRef:d,onScrollPositionChange:h,unstyled:p,sx:m}=n,g=mSe(n,["maxHeight","children","classNames","styles","scrollbarSize","scrollHideDelay","type","dir","offsetScrollbars","viewportRef","onScrollPositionChange","unstyled","sx"]);return L.createElement(At,qet(pSe({},g),{ref:t,sx:[{display:"flex",maxHeight:r},...P1(m)]}),L.createElement(At,{sx:{display:"flex",flexDirection:"column",flex:1}},L.createElement(e6,{classNames:s,styles:o,scrollHideDelay:u,scrollbarSize:a,type:l,dir:c,offsetScrollbars:f,viewportRef:d,onScrollPositionChange:h,unstyled:p},i)))});ySe.displayName="@mantine/core/ScrollAreaAutosize";e6.displayName="@mantine/core/ScrollArea";e6.Autosize=ySe;const vSe=e6;var Wet=Object.defineProperty,Get=Object.defineProperties,Yet=Object.getOwnPropertyDescriptors,VR=Object.getOwnPropertySymbols,_Se=Object.prototype.hasOwnProperty,bSe=Object.prototype.propertyIsEnumerable,aae=(e,t,n)=>t in e?Wet(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,uae=(e,t)=>{for(var n in t||(t={}))_Se.call(t,n)&&aae(e,n,t[n]);if(VR)for(var n of VR(t))bSe.call(t,n)&&aae(e,n,t[n]);return e},Ket=(e,t)=>Get(e,Yet(t)),Xet=(e,t)=>{var n={};for(var r in e)_Se.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&VR)for(var r of VR(e))t.indexOf(r)<0&&bSe.call(e,r)&&(n[r]=e[r]);return n};const t6=A.forwardRef((e,t)=>{var n=e,{style:r}=n,i=Xet(n,["style"]);return L.createElement(vSe,Ket(uae({},i),{style:uae({width:"100%"},r),viewportRef:t}),i.children)});t6.displayName="@mantine/core/SelectScrollArea";var Qet=ht(()=>({dropdown:{},itemsWrapper:{padding:4,display:"flex",width:"100%",boxSizing:"border-box"}}));function Ep(e){return e.split("-")[0]}function MC(e){return e.split("-")[1]}function Ev(e){return["top","bottom"].includes(Ep(e))?"x":"y"}function RG(e){return e==="y"?"height":"width"}function lae(e,t,n){let{reference:r,floating:i}=e;const s=r.x+r.width/2-i.width/2,o=r.y+r.height/2-i.height/2,a=Ev(t),u=RG(a),l=r[u]/2-i[u]/2,c=a==="x";let f;switch(Ep(t)){case"top":f={x:s,y:r.y-i.height};break;case"bottom":f={x:s,y:r.y+r.height};break;case"right":f={x:r.x+r.width,y:o};break;case"left":f={x:r.x-i.width,y:o};break;default:f={x:r.x,y:r.y}}switch(MC(t)){case"start":f[a]-=l*(n&&c?-1:1);break;case"end":f[a]+=l*(n&&c?-1:1)}return f}const Jet=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),u=await(o.isRTL==null?void 0:o.isRTL(t));let l=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:c,y:f}=lae(l,r,u),d=r,h={},p=0;for(let m=0;m<a.length;m++){const{name:g,fn:y}=a[m],{x:v,y:_,data:b,reset:E}=await y({x:c,y:f,initialPlacement:r,placement:d,strategy:i,middlewareData:h,rects:l,platform:o,elements:{reference:e,floating:t}});c=v??c,f=_??f,h={...h,[g]:{...h[g],...b}},E&&p<=50&&(p++,typeof E=="object"&&(E.placement&&(d=E.placement),E.rects&&(l=E.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):E.rects),{x:c,y:f}=lae(l,d,u)),m=-1)}return{x:c,y:f,placement:d,strategy:i,middlewareData:h}};function NG(e){return typeof e!="number"?function(t){return{top:0,right:0,bottom:0,left:0,...t}}(e):{top:e,right:e,bottom:e,left:e}}function Q2(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}async function DG(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:u}=e,{boundary:l="clippingAncestors",rootBoundary:c="viewport",elementContext:f="floating",altBoundary:d=!1,padding:h=0}=t,p=NG(h),m=a[d?f==="floating"?"reference":"floating":f],g=Q2(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(m)))==null||n?m:m.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:l,rootBoundary:c,strategy:u})),y=Q2(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({rect:f==="floating"?{...o.floating,x:r,y:i}:o.reference,offsetParent:await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),strategy:u}):o[f]);return{top:g.top-y.top+p.top,bottom:y.bottom-g.bottom+p.bottom,left:g.left-y.left+p.left,right:y.right-g.right+p.right}}const wSe=Math.min,Cm=Math.max;function Lz(e,t,n){return Cm(e,wSe(t,n))}const cae=e=>({name:"arrow",options:e,async fn(t){const{element:n,padding:r=0}=e??{},{x:i,y:s,placement:o,rects:a,platform:u}=t;if(n==null)return{};const l=NG(r),c={x:i,y:s},f=Ev(o),d=MC(o),h=RG(f),p=await u.getDimensions(n),m=f==="y"?"top":"left",g=f==="y"?"bottom":"right",y=a.reference[h]+a.reference[f]-c[f]-a.floating[h],v=c[f]-a.reference[f],_=await(u.getOffsetParent==null?void 0:u.getOffsetParent(n));let b=_?f==="y"?_.clientHeight||0:_.clientWidth||0:0;b===0&&(b=a.floating[h]);const E=y/2-v/2,w=l[m],x=b-p[h]-l[g],S=b/2-p[h]/2+E,I=Lz(w,S,x),C=(d==="start"?l[m]:l[g])>0&&S!==I&&a.reference[h]<=a.floating[h];return{[f]:c[f]-(C?S<w?w-S:x-S:0),data:{[f]:I,centerOffset:S-I}}}}),Zet={left:"right",right:"left",bottom:"top",top:"bottom"};function HR(e){return e.replace(/left|right|bottom|top/g,t=>Zet[t])}function ett(e,t,n){n===void 0&&(n=!1);const r=MC(e),i=Ev(e),s=RG(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=HR(o)),{main:o,cross:HR(o)}}const ttt={start:"end",end:"start"};function fae(e){return e.replace(/start|end/g,t=>ttt[t])}const ntt=["top","right","bottom","left"];ntt.reduce((e,t)=>e.concat(t,t+"-start",t+"-end"),[]);const ESe=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n;const{placement:r,middlewareData:i,rects:s,initialPlacement:o,platform:a,elements:u}=t,{mainAxis:l=!0,crossAxis:c=!0,fallbackPlacements:f,fallbackStrategy:d="bestFit",flipAlignment:h=!0,...p}=e,m=Ep(r),g=f||(m===o||!h?[HR(o)]:function(S){const I=HR(S);return[fae(S),I,fae(I)]}(o)),y=[o,...g],v=await DG(t,p),_=[];let b=((n=i.flip)==null?void 0:n.overflows)||[];if(l&&_.push(v[m]),c){const{main:S,cross:I}=ett(r,s,await(a.isRTL==null?void 0:a.isRTL(u.floating)));_.push(v[S],v[I])}if(b=[...b,{placement:r,overflows:_}],!_.every(S=>S<=0)){var E,w;const S=((E=(w=i.flip)==null?void 0:w.index)!=null?E:0)+1,I=y[S];if(I)return{data:{index:S,overflows:b},reset:{placement:I}};let C="bottom";switch(d){case"bestFit":{var x;const O=(x=b.map(z=>[z,z.overflows.filter(N=>N>0).reduce((N,$)=>N+$,0)]).sort((z,N)=>z[1]-N[1])[0])==null?void 0:x[0].placement;O&&(C=O);break}case"initialPlacement":C=o}if(r!==C)return{reset:{placement:C}}}return{}}}},xSe=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){const{x:n,y:r}=t,i=await async function(s,o){const{placement:a,platform:u,elements:l}=s,c=await(u.isRTL==null?void 0:u.isRTL(l.floating)),f=Ep(a),d=MC(a),h=Ev(a)==="x",p=["left","top"].includes(f)?-1:1,m=c&&h?-1:1,g=typeof o=="function"?o(s):o;let{mainAxis:y,crossAxis:v,alignmentAxis:_}=typeof g=="number"?{mainAxis:g,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...g};return d&&typeof _=="number"&&(v=d==="end"?-1*_:_),h?{x:v*m,y:y*p}:{x:y*p,y:v*m}}(t,e);return{x:n+i.x,y:r+i.y,data:i}}}};function SSe(e){return e==="x"?"y":"x"}const LG=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:g=>{let{x:y,y:v}=g;return{x:y,y:v}}},...u}=e,l={x:n,y:r},c=await DG(t,u),f=Ev(Ep(i)),d=SSe(f);let h=l[f],p=l[d];if(s){const g=f==="y"?"bottom":"right";h=Lz(h+c[f==="y"?"top":"left"],h,h-c[g])}if(o){const g=d==="y"?"bottom":"right";p=Lz(p+c[d==="y"?"top":"left"],p,p-c[g])}const m=a.fn({...t,[f]:h,[d]:p});return{...m,data:{x:m.x-n,y:m.y-r}}}}},rtt=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=t,{offset:a=0,mainAxis:u=!0,crossAxis:l=!0}=e,c={x:n,y:r},f=Ev(i),d=SSe(f);let h=c[f],p=c[d];const m=typeof a=="function"?a(t):a,g=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(u){const E=f==="y"?"height":"width",w=s.reference[f]-s.floating[E]+g.mainAxis,x=s.reference[f]+s.reference[E]-g.mainAxis;h<w?h=w:h>x&&(h=x)}if(l){var y,v,_,b;const E=f==="y"?"width":"height",w=["top","left"].includes(Ep(i)),x=s.reference[d]-s.floating[E]+(w&&(y=(v=o.offset)==null?void 0:v[d])!=null?y:0)+(w?0:g.crossAxis),S=s.reference[d]+s.reference[E]+(w?0:(_=(b=o.offset)==null?void 0:b[d])!=null?_:0)-(w?g.crossAxis:0);p<x?p=x:p>S&&(p=S)}return{[f]:h,[d]:p}}}},itt=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){const{placement:n,rects:r,platform:i,elements:s}=t,{apply:o=()=>{},...a}=e,u=await DG(t,a),l=Ep(n),c=MC(n);let f,d;l==="top"||l==="bottom"?(f=l,d=c===(await(i.isRTL==null?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(d=l,f=c==="end"?"top":"bottom");const h=Cm(u.left,0),p=Cm(u.right,0),m=Cm(u.top,0),g=Cm(u.bottom,0),y={availableHeight:r.floating.height-(["left","right"].includes(n)?2*(m!==0||g!==0?m+g:Cm(u.top,u.bottom)):u[f]),availableWidth:r.floating.width-(["top","bottom"].includes(n)?2*(h!==0||p!==0?h+p:Cm(u.left,u.right)):u[d])};await o({...t,...y});const v=await i.getDimensions(s.floating);return r.floating.width!==v.width||r.floating.height!==v.height?{reset:{rects:!0}}:{}}}},TSe=function(e){return e===void 0&&(e={}),{name:"inline",options:e,async fn(t){var n;const{placement:r,elements:i,rects:s,platform:o,strategy:a}=t,{padding:u=2,x:l,y:c}=e,f=Q2(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({rect:s.reference,offsetParent:await(o.getOffsetParent==null?void 0:o.getOffsetParent(i.floating)),strategy:a}):s.reference),d=(n=await(o.getClientRects==null?void 0:o.getClientRects(i.reference)))!=null?n:[],h=NG(u),p=await o.getElementRects({reference:{getBoundingClientRect:function(){var m;if(d.length===2&&d[0].left>d[1].right&&l!=null&&c!=null)return(m=d.find(g=>l>g.left-h.left&&l<g.right+h.right&&c>g.top-h.top&&c<g.bottom+h.bottom))!=null?m:f;if(d.length>=2){if(Ev(r)==="x"){const w=d[0],x=d[d.length-1],S=Ep(r)==="top",I=w.top,C=x.bottom,O=S?w.left:x.left,z=S?w.right:x.right;return{top:I,bottom:C,left:O,right:z,width:z-O,height:C-I,x:O,y:I}}const g=Ep(r)==="left",y=Cm(...d.map(w=>w.right)),v=wSe(...d.map(w=>w.left)),_=d.filter(w=>g?w.left===v:w.right===y),b=_[0].top,E=_[_.length-1].bottom;return{top:b,bottom:E,left:v,right:y,width:y-v,height:E-b,x:v,y:b}}return f}},floating:i.floating,strategy:a});return s.reference.x!==p.reference.x||s.reference.y!==p.reference.y||s.reference.width!==p.reference.width||s.reference.height!==p.reference.height?{reset:{rects:p}}:{}}}};function ASe(e){return e&&e.document&&e.location&&e.alert&&e.setInterval}function Gp(e){if(e==null)return window;if(!ASe(e)){const t=e.ownerDocument;return t&&t.defaultView||window}return e}function Mg(e){return Gp(e).getComputedStyle(e)}function Fg(e){return ASe(e)?"":e?(e.nodeName||"").toLowerCase():""}function CSe(){const e=navigator.userAgentData;return e!=null&&e.brands?e.brands.map(t=>t.brand+"/"+t.version).join(" "):navigator.userAgent}function xp(e){return e instanceof Gp(e).HTMLElement}function rp(e){return e instanceof Gp(e).Element}function dae(e){return typeof ShadowRoot>"u"?!1:e instanceof Gp(e).ShadowRoot||e instanceof ShadowRoot}function n6(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=Mg(e);return/auto|scroll|overlay|hidden/.test(t+r+n)&&!["inline","contents"].includes(i)}function stt(e){return["table","td","th"].includes(Fg(e))}function Mz(e){const t=/firefox/i.test(CSe()),n=Mg(e),r=n.backdropFilter||n.WebkitBackdropFilter;return n.transform!=="none"||n.perspective!=="none"||!!r&&r!=="none"||t&&n.willChange==="filter"||t&&!!n.filter&&n.filter!=="none"||["transform","perspective"].some(i=>n.willChange.includes(i))||["paint","layout","strict","content"].some(i=>{const s=n.contain;return s!=null&&s.includes(i)})}function ISe(){return!/^((?!chrome|android).)*safari/i.test(CSe())}function MG(e){return["html","body","#document"].includes(Fg(e))}const hae=Math.min,MT=Math.max,qR=Math.round;function ip(e,t,n){var r,i,s,o;t===void 0&&(t=!1),n===void 0&&(n=!1);const a=e.getBoundingClientRect();let u=1,l=1;t&&xp(e)&&(u=e.offsetWidth>0&&qR(a.width)/e.offsetWidth||1,l=e.offsetHeight>0&&qR(a.height)/e.offsetHeight||1);const c=rp(e)?Gp(e):window,f=!ISe()&&n,d=(a.left+(f&&(r=(i=c.visualViewport)==null?void 0:i.offsetLeft)!=null?r:0))/u,h=(a.top+(f&&(s=(o=c.visualViewport)==null?void 0:o.offsetTop)!=null?s:0))/l,p=a.width/u,m=a.height/l;return{width:p,height:m,top:h,right:d+p,bottom:h+m,left:d,x:d,y:h}}function yg(e){return(t=e,(t instanceof Gp(t).Node?e.ownerDocument:e.document)||window.document).documentElement;var t}function r6(e){return rp(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function OSe(e){return ip(yg(e)).left+r6(e).scrollLeft}function ott(e,t,n){const r=xp(t),i=yg(t),s=ip(e,r&&function(u){const l=ip(u);return qR(l.width)!==u.offsetWidth||qR(l.height)!==u.offsetHeight}(t),n==="fixed");let o={scrollLeft:0,scrollTop:0};const a={x:0,y:0};if(r||!r&&n!=="fixed")if((Fg(t)!=="body"||n6(i))&&(o=r6(t)),xp(t)){const u=ip(t,!0);a.x=u.x+t.clientLeft,a.y=u.y+t.clientTop}else i&&(a.x=OSe(i));return{x:s.left+o.scrollLeft-a.x,y:s.top+o.scrollTop-a.y,width:s.width,height:s.height}}function WR(e){if(Fg(e)==="html")return e;const t=e.assignedSlot||e.parentNode||(dae(e)?e.host:null)||yg(e);return dae(t)?t.host:t}function pae(e){return xp(e)&&Mg(e).position!=="fixed"?e.offsetParent:null}function mae(e){const t=Gp(e);let n=pae(e);for(;n&&stt(n)&&Mg(n).position==="static";)n=pae(n);return n&&(Fg(n)==="html"||Fg(n)==="body"&&Mg(n).position==="static"&&!Mz(n))?t:n||function(r){let i=WR(r);for(;xp(i)&&!MG(i);){if(Mz(i))return i;i=WR(i)}return null}(e)||t}function gae(e){if(xp(e))return{width:e.offsetWidth,height:e.offsetHeight};const t=ip(e);return{width:t.width,height:t.height}}function PSe(e){const t=WR(e);return MG(t)?e.ownerDocument.body:xp(t)&&n6(t)?t:PSe(t)}function sp(e,t){var n;t===void 0&&(t=[]);const r=PSe(e),i=r===((n=e.ownerDocument)==null?void 0:n.body),s=Gp(r),o=i?[s].concat(s.visualViewport||[],n6(r)?r:[]):r,a=t.concat(o);return i?a:a.concat(sp(o))}function yae(e,t,n){return t==="viewport"?Q2(function(r,i){const s=Gp(r),o=yg(r),a=s.visualViewport;let u=o.clientWidth,l=o.clientHeight,c=0,f=0;if(a){u=a.width,l=a.height;const d=ISe();(d||!d&&i==="fixed")&&(c=a.offsetLeft,f=a.offsetTop)}return{width:u,height:l,x:c,y:f}}(e,n)):rp(t)?function(r,i){const s=ip(r,!1,i==="fixed"),o=s.top+r.clientTop,a=s.left+r.clientLeft;return{top:o,left:a,x:a,y:o,right:a+r.clientWidth,bottom:o+r.clientHeight,width:r.clientWidth,height:r.clientHeight}}(t,n):Q2(function(r){var i;const s=yg(r),o=r6(r),a=(i=r.ownerDocument)==null?void 0:i.body,u=MT(s.scrollWidth,s.clientWidth,a?a.scrollWidth:0,a?a.clientWidth:0),l=MT(s.scrollHeight,s.clientHeight,a?a.scrollHeight:0,a?a.clientHeight:0);let c=-o.scrollLeft+OSe(r);const f=-o.scrollTop;return Mg(a||s).direction==="rtl"&&(c+=MT(s.clientWidth,a?a.clientWidth:0)-u),{width:u,height:l,x:c,y:f}}(yg(e)))}const att={getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const s=n==="clippingAncestors"?function(l){let c=sp(l).filter(h=>rp(h)&&Fg(h)!=="body"),f=l,d=null;for(;rp(f)&&!MG(f);){const h=Mg(f);h.position==="static"&&d&&["absolute","fixed"].includes(d.position)&&!Mz(f)?c=c.filter(p=>p!==f):d=h,f=WR(f)}return c}(t):[].concat(n),o=[...s,r],a=o[0],u=o.reduce((l,c)=>{const f=yae(t,c,i);return l.top=MT(f.top,l.top),l.right=hae(f.right,l.right),l.bottom=hae(f.bottom,l.bottom),l.left=MT(f.left,l.left),l},yae(t,a,i));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{rect:t,offsetParent:n,strategy:r}=e;const i=xp(n),s=yg(n);if(n===s)return t;let o={scrollLeft:0,scrollTop:0};const a={x:0,y:0};if((i||!i&&r!=="fixed")&&((Fg(n)!=="body"||n6(s))&&(o=r6(n)),xp(n))){const u=ip(n,!0);a.x=u.x+n.clientLeft,a.y=u.y+n.clientTop}return{...t,x:t.x-o.scrollLeft+a.x,y:t.y-o.scrollTop+a.y}},isElement:rp,getDimensions:gae,getOffsetParent:mae,getDocumentElement:yg,getElementRects:e=>{let{reference:t,floating:n,strategy:r}=e;return{reference:ott(t,mae(n),r),floating:{...gae(n),x:0,y:0}}},getClientRects:e=>Array.from(e.getClientRects()),isRTL:e=>Mg(e).direction==="rtl"};function utt(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=!0,animationFrame:a=!1}=r,u=i&&!a,l=u||s?[...rp(e)?sp(e):e.contextElement?sp(e.contextElement):[],...sp(t)]:[];l.forEach(h=>{u&&h.addEventListener("scroll",n,{passive:!0}),s&&h.addEventListener("resize",n)});let c,f=null;if(o){let h=!0;f=new ResizeObserver(()=>{h||n(),h=!1}),rp(e)&&!a&&f.observe(e),rp(e)||!e.contextElement||a||f.observe(e.contextElement),f.observe(t)}let d=a?ip(e):null;return a&&function h(){const p=ip(e);!d||p.x===d.x&&p.y===d.y&&p.width===d.width&&p.height===d.height||n(),d=p,c=requestAnimationFrame(h)}(),n(),()=>{var h;l.forEach(p=>{u&&p.removeEventListener("scroll",n),s&&p.removeEventListener("resize",n)}),(h=f)==null||h.disconnect(),f=null,a&&cancelAnimationFrame(c)}}const ltt=(e,t,n)=>Jet(e,t,{platform:att,...n});var Fz=typeof document<"u"?A.useLayoutEffect:A.useEffect;function GR(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!GR(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&e.$$typeof)&&!GR(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function ctt(e){const t=A.useRef(e);return Fz(()=>{t.current=e}),t}function ftt(e){let{middleware:t=[],placement:n="bottom",strategy:r="absolute",whileElementsMounted:i}=e===void 0?{}:e;const[s,o]=A.useState({x:null,y:null,strategy:r,placement:n,middlewareData:{}}),[a,u]=A.useState(t);GR(a,t)||u(t);const l=A.useRef(null),c=A.useRef(null),f=A.useRef(null),d=A.useRef(s),h=ctt(i),p=A.useCallback(()=>{!l.current||!c.current||ltt(l.current,c.current,{middleware:a,placement:n,strategy:r}).then(b=>{m.current&&!GR(d.current,b)&&(d.current=b,yv.flushSync(()=>{o(b)}))})},[a,n,r]);Fz(()=>{m.current&&p()},[p]);const m=A.useRef(!1);Fz(()=>(m.current=!0,()=>{m.current=!1}),[]);const g=A.useCallback(()=>{if(typeof f.current=="function"&&(f.current(),f.current=null),l.current&&c.current)if(h.current){const b=h.current(l.current,c.current,p);f.current=b}else p()},[p,h]),y=A.useCallback(b=>{l.current=b,g()},[g]),v=A.useCallback(b=>{c.current=b,g()},[g]),_=A.useMemo(()=>({reference:l,floating:c}),[]);return A.useMemo(()=>({...s,update:p,refs:_,reference:y,floating:v}),[s,p,_,y,v])}const kSe=e=>{const{element:t,padding:n}=e;function r(i){return Object.prototype.hasOwnProperty.call(i,"current")}return{name:"arrow",options:e,fn(i){return r(t)?t.current!=null?cae({element:t.current,padding:n}).fn(i):{}:t?cae({element:t,padding:n}).fn(i):{}}}};var uw=typeof document<"u"?A.useLayoutEffect:A.useEffect;function dtt(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(i=>i(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){e.set(t,(e.get(t)||[]).filter(r=>r!==n))}}}let J8=!1,htt=0;const vae=()=>"floating-ui-"+htt++;function ptt(){const[e,t]=A.useState(()=>J8?vae():void 0);return uw(()=>{e==null&&t(vae())},[]),A.useEffect(()=>{J8||(J8=!0)},[]),e}const _ae=S1.useId,bae=_ae??ptt,mtt=A.createContext(null),gtt=A.createContext(null),$Se=()=>{var e,t;return(e=(t=A.useContext(mtt))==null?void 0:t.id)!=null?e:null},FG=()=>A.useContext(gtt);function Mm(e){var t;return(t=e==null?void 0:e.ownerDocument)!=null?t:document}function RSe(e){var t;return(t=Mm(e).defaultView)!=null?t:window}function jy(e){return e?e instanceof RSe(e).Element:!1}function ytt(e){return e?e instanceof RSe(e).HTMLElement:!1}const wae=S1.useInsertionEffect;function vtt(e){const t=A.useRef(()=>{});return wae?wae(()=>{t.current=e}):t.current=e,A.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}function BG(e){let{open:t=!1,onOpenChange:n,whileElementsMounted:r,placement:i,middleware:s,strategy:o,nodeId:a}=e===void 0?{}:e;const[u,l]=A.useState(null),c=FG(),f=A.useRef(null),d=A.useRef({}),h=A.useState(()=>dtt())[0],p=ftt({placement:i,middleware:s,strategy:o,whileElementsMounted:r}),m=vtt(n),g=A.useMemo(()=>({...p.refs,domReference:f}),[p.refs]),y=A.useMemo(()=>({...p,refs:g,dataRef:d,nodeId:a,events:h,open:t,onOpenChange:m,_:{domReference:u}}),[p,a,h,t,m,g,u]);uw(()=>{const b=c==null?void 0:c.nodesRef.current.find(E=>E.id===a);b&&(b.context=y)});const{reference:v}=p,_=A.useCallback(b=>{(jy(b)||b===null)&&(y.refs.domReference.current=b,l(b)),v(b)},[v,y.refs]);return A.useMemo(()=>({...p,context:y,refs:g,reference:_}),[p,g,y,_])}function Z8(e,t,n){const r=new Map;return{...n==="floating"&&{tabIndex:-1},...e,...t.map(i=>i?i[n]:null).concat(e).reduce((i,s)=>(s&&Object.entries(s).forEach(o=>{let[a,u]=o;if(a.indexOf("on")===0){if(r.has(a)||r.set(a,[]),typeof u=="function"){var l;(l=r.get(a))==null||l.push(u),i[a]=function(){for(var c,f=arguments.length,d=new Array(f),h=0;h<f;h++)d[h]=arguments[h];(c=r.get(a))==null||c.forEach(p=>p(...d))}}}else i[a]=u}),i),{})}}const _tt=function(e){e===void 0&&(e=[]);const t=e,n=A.useCallback(s=>Z8(s,e,"reference"),t),r=A.useCallback(s=>Z8(s,e,"floating"),t),i=A.useCallback(s=>Z8(s,e,"item"),t);return A.useMemo(()=>({getReferenceProps:n,getFloatingProps:r,getItemProps:i}),[n,r,i])};function e9(e,t){var n;let r=(n=e.filter(o=>{var a;return o.parentId===t&&((a=o.context)==null?void 0:a.open)}))!=null?n:[],i=r;for(;i.length;){var s;i=(s=e.filter(o=>{var a;return(a=i)==null?void 0:a.some(u=>{var l;return o.parentId===u.id&&((l=o.context)==null?void 0:l.open)})}))!=null?s:[],r=r.concat(i)}return r}function btt(e){return"composedPath"in e?e.composedPath()[0]:e.target}function Eae(e){const t=A.useRef(e);return uw(()=>{t.current=e}),t}function wtt(e){const t=A.useRef();return uw(()=>{t.current=e},[e]),t.current}function zk(e,t,n){return n&&n!=="mouse"?0:typeof e=="number"?e:e==null?void 0:e[t]}const Ett=function(e,t){let{enabled:n=!0,delay:r=0,handleClose:i=null,mouseOnly:s=!1,restMs:o=0,move:a=!0}=t===void 0?{}:t;const{open:u,onOpenChange:l,dataRef:c,events:f,refs:d,_:h}=e,p=FG(),m=$Se(),g=Eae(i),y=Eae(r),v=wtt(u),_=A.useRef(),b=A.useRef(),E=A.useRef(),w=A.useRef(),x=A.useRef(!0),S=A.useRef(!1),I=A.useCallback(()=>{var N;const $=(N=c.current.openEvent)==null?void 0:N.type;return($==null?void 0:$.includes("mouse"))&&$!=="mousedown"},[c]);A.useEffect(()=>{if(!n)return;function N(){clearTimeout(b.current),clearTimeout(w.current),x.current=!0}return f.on("dismiss",N),()=>{f.off("dismiss",N)}},[n,f,d]),A.useEffect(()=>{if(!n||!g.current)return;function N(){I()&&l(!1)}const $=Mm(d.floating.current).documentElement;return $.addEventListener("mouseleave",N),()=>{$.removeEventListener("mouseleave",N)}},[d,l,n,g,c,I]);const C=A.useCallback(function(N){N===void 0&&(N=!0);const $=zk(y.current,"close",_.current);$&&!E.current?(clearTimeout(b.current),b.current=setTimeout(()=>l(!1),$)):N&&(clearTimeout(b.current),l(!1))},[y,l]),O=A.useCallback(()=>{E.current&&(Mm(d.floating.current).removeEventListener("pointermove",E.current),E.current=void 0)},[d]),z=A.useCallback(()=>{Mm(d.floating.current).body.style.pointerEvents="",S.current=!1},[d]);return A.useEffect(()=>{if(!n)return;function N(){return c.current.openEvent?["click","mousedown"].includes(c.current.openEvent.type):!1}function $(G){if(clearTimeout(b.current),x.current=!1,s&&_.current!=="mouse"||o>0&&zk(y.current,"open")===0)return;c.current.openEvent=G;const U=zk(y.current,"open",_.current);U?b.current=setTimeout(()=>{l(!0)},U):l(!0)}function D(G){if(N())return;const U=Mm(d.floating.current);if(clearTimeout(w.current),g.current){clearTimeout(b.current),E.current&&U.removeEventListener("pointermove",E.current),E.current=g.current({...e,tree:p,x:G.clientX,y:G.clientY,onClose(){z(),O(),C()}}),U.addEventListener("pointermove",E.current);return}C()}function B(G){N()||g.current==null||g.current({...e,tree:p,x:G.clientX,y:G.clientY,leave:!0,onClose(){z(),O(),C()}})(G)}const V=d.floating.current,j=d.domReference.current;if(jy(j))return u&&j.addEventListener("mouseleave",B),V==null||V.addEventListener("mouseleave",B),a&&j.addEventListener("mousemove",$,{once:!0}),j.addEventListener("mouseenter",$),j.addEventListener("mouseleave",D),()=>{u&&j.removeEventListener("mouseleave",B),V==null||V.removeEventListener("mouseleave",B),a&&j.removeEventListener("mousemove",$),j.removeEventListener("mouseenter",$),j.removeEventListener("mouseleave",D)}},[h.domReference,n,e,s,o,a,C,O,z,l,u,p,d,y,g,c]),uw(()=>{if(n&&u&&g.current&&g.current.__options.blockPointerEvents&&I()){Mm(d.floating.current).body.style.pointerEvents="none",S.current=!0;const D=d.domReference.current,B=d.floating.current;if(jy(D)&&B){var N,$;const V=p==null||(N=p.nodesRef.current.find(j=>j.id===m))==null||($=N.context)==null?void 0:$.refs.floating.current;return V&&(V.style.pointerEvents=""),D.style.pointerEvents="auto",B.style.pointerEvents="auto",()=>{D.style.pointerEvents="",B.style.pointerEvents=""}}}},[n,u,m,d,p,g,c,I]),uw(()=>{v&&!u&&(_.current=void 0,O(),z())}),A.useEffect(()=>()=>{O(),clearTimeout(b.current),clearTimeout(w.current),S.current&&z()},[n,O,z]),A.useMemo(()=>{if(!n)return{};function N($){_.current=$.pointerType}return{reference:{onPointerDown:N,onPointerEnter:N,onMouseMove(){u||o===0||(clearTimeout(w.current),w.current=setTimeout(()=>{x.current||l(!0)},o))}},floating:{onMouseEnter(){clearTimeout(b.current)},onMouseLeave(){C(!1)}}}},[n,o,u,l,C])},NSe=A.createContext({delay:1e3,initialDelay:1e3,currentId:null,setCurrentId:()=>{},setState:()=>{}}),DSe=()=>A.useContext(NSe),xtt=e=>{let{children:t,delay:n}=e;const[r,i]=A.useState({delay:n,initialDelay:n,currentId:null}),s=A.useCallback(o=>{i(a=>({...a,currentId:o}))},[]);return A.createElement(NSe.Provider,{value:A.useMemo(()=>({...r,setState:i,setCurrentId:s}),[r,i,s])},t)},Stt=(e,t)=>{let{open:n,onOpenChange:r}=e,{id:i}=t;const{currentId:s,initialDelay:o,setState:a}=DSe();A.useEffect(()=>{s&&(a(u=>({...u,delay:{open:1,close:zk(o,"close")}})),s!==i&&r(!1))},[i,r,a,s,o]),A.useEffect(()=>{!n&&s===i&&(r(!1),a(u=>({...u,delay:o,currentId:null})))},[n,a,s,i,r,o])},Ttt=function(e,t){let{open:n}=e,{enabled:r=!0,role:i="dialog"}=t===void 0?{}:t;const s=bae(),o=bae();return A.useMemo(()=>{const a={id:s,role:i};return r?i==="tooltip"?{reference:{"aria-describedby":n?s:void 0},floating:a}:{reference:{"aria-expanded":n?"true":"false","aria-haspopup":i==="alertdialog"?"dialog":i,"aria-controls":n?s:void 0,...i==="listbox"&&{role:"combobox"},...i==="menu"&&{id:o}},floating:{...a,...i==="menu"&&{"aria-labelledby":o}}}:{}},[r,i,n,s,o])};function t9(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}const Att={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},Ctt={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},Itt=function(e,t){let{open:n,onOpenChange:r,refs:i,events:s,nodeId:o}=e,{enabled:a=!0,escapeKey:u=!0,outsidePress:l=!0,outsidePressEvent:c="pointerdown",referencePress:f=!1,referencePressEvent:d="pointerdown",ancestorScroll:h=!1,bubbles:p=!0}=t===void 0?{}:t;const m=FG(),g=$Se()!=null,y=A.useRef(!1);return A.useEffect(()=>{if(!n||!a)return;function v(x){if(x.key==="Escape"){if(!p&&m&&e9(m.nodesRef.current,o).length>0)return;s.emit("dismiss",{preventScroll:!1}),r(!1)}}function _(x){const S=y.current;if(y.current=!1,S)return;const I=btt(x);if(jy(I)&&i.floating.current){var C;const z=(C=i.floating.current.ownerDocument.defaultView)!=null?C:window,N=I.scrollWidth>I.clientWidth,$=I.scrollHeight>I.clientHeight;let D=$&&x.offsetX>I.clientWidth;if($&&z.getComputedStyle(I).direction==="rtl"&&(D=x.offsetX<=I.offsetWidth-I.clientWidth),D||N&&x.offsetY>I.clientHeight)return}const O=m&&e9(m.nodesRef.current,o).some(z=>{var N;return t9(x,(N=z.context)==null?void 0:N.refs.floating.current)});t9(x,i.floating.current)||t9(x,i.domReference.current)||O||!p&&m&&e9(m.nodesRef.current,o).length>0||(s.emit("dismiss",g?{preventScroll:!0}:!1),r(!1))}function b(){r(!1)}const E=Mm(i.floating.current);u&&E.addEventListener("keydown",v),l&&E.addEventListener(c,_);let w=[];return h&&(jy(i.domReference.current)&&(w=sp(i.domReference.current)),jy(i.floating.current)&&(w=w.concat(sp(i.floating.current))),!jy(i.reference.current)&&i.reference.current&&i.reference.current.contextElement&&(w=w.concat(sp(i.reference.current.contextElement)))),w=w.filter(x=>{var S;return x!==((S=E.defaultView)==null?void 0:S.visualViewport)}),w.forEach(x=>{x.addEventListener("scroll",b,{passive:!0})}),()=>{u&&E.removeEventListener("keydown",v),l&&E.removeEventListener(c,_),w.forEach(x=>{x.removeEventListener("scroll",b)})}},[u,l,c,s,m,o,n,r,h,a,p,i,g]),A.useEffect(()=>{y.current=!1},[l,c]),A.useMemo(()=>a?{reference:{[Att[d]]:()=>{f&&(s.emit("dismiss"),r(!1))}},floating:{[Ctt[c]]:()=>{y.current=!0}}}:{},[a,s,f,c,d,r])},Ott=function(e,t){let{open:n,onOpenChange:r,dataRef:i,refs:s,events:o}=e,{enabled:a=!0,keyboardOnly:u=!0}=t===void 0?{}:t;const l=A.useRef(""),c=A.useRef(!1),f=A.useRef();return A.useEffect(()=>{var d;if(!a)return;const p=(d=Mm(s.floating.current).defaultView)!=null?d:window;function m(){!n&&ytt(s.domReference.current)&&s.domReference.current.blur()}return p.addEventListener("blur",m),()=>{p.removeEventListener("blur",m)}},[s,n,a]),A.useEffect(()=>{if(!a)return;function d(){c.current=!0}return o.on("dismiss",d),()=>{o.off("dismiss",d)}},[o,a]),A.useEffect(()=>()=>{clearTimeout(f.current)},[]),A.useMemo(()=>a?{reference:{onPointerDown(d){let{pointerType:h}=d;l.current=h,c.current=!!(h&&u)},onPointerLeave(){c.current=!1},onFocus(d){var h,p,m;c.current||d.type==="focus"&&((h=i.current.openEvent)==null?void 0:h.type)==="mousedown"&&(p=s.domReference.current)!=null&&p.contains((m=i.current.openEvent)==null?void 0:m.target)||(i.current.openEvent=d.nativeEvent,r(!0))},onBlur(d){const h=d.relatedTarget;f.current=setTimeout(()=>{var p,m;(p=s.floating.current)!=null&&p.contains(h)||(m=s.domReference.current)!=null&&m.contains(h)||(c.current=!1,r(!1))})}}}:{},[a,u,s,i,r])};function LSe({opened:e,floating:t,positionDependencies:n}){const[r,i]=A.useState(0);A.useEffect(()=>{if(t.refs.reference.current&&t.refs.floating.current)return utt(t.refs.reference.current,t.refs.floating.current,t.update)},[t.refs.reference,t.refs.floating,e,r]),_s(()=>{t.update()},n),_s(()=>{i(s=>s+1)},[e])}function Ptt(e){const t=[xSe(e.offset)];return e.middlewares.shift&&t.push(LG({limiter:rtt()})),e.middlewares.flip&&t.push(ESe()),e.middlewares.inline&&t.push(TSe()),t.push(kSe({element:e.arrowRef})),t}function ktt(e){const[t,n]=Ta({value:e.opened,defaultValue:e.defaultOpened,finalValue:!1,onChange:e.onChange}),r=()=>{var o;(o=e.onClose)==null||o.call(e),n(!1)},i=()=>{var o,a;t?((o=e.onClose)==null||o.call(e),n(!1)):((a=e.onOpen)==null||a.call(e),n(!0))},s=BG({placement:e.position,middleware:[...Ptt(e),...e.width==="target"?[itt({apply({rects:o}){var a,u;Object.assign((u=(a=s.refs.floating.current)==null?void 0:a.style)!=null?u:{},{width:`${o.reference.width}px`})}})]:[]]});return LSe({opened:e.opened,positionDependencies:e.positionDependencies,floating:s}),_s(()=>{var o;(o=e.onPositionChange)==null||o.call(e,s.placement)},[s.placement]),{floating:s,controlled:typeof e.opened=="boolean",opened:t,onClose:r,onToggle:i}}const MSe={context:"Popover component was not found in the tree",children:"Popover.Target component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported"},[$tt,FSe]=hEe(MSe.context);var Rtt=Object.defineProperty,Ntt=Object.defineProperties,Dtt=Object.getOwnPropertyDescriptors,YR=Object.getOwnPropertySymbols,BSe=Object.prototype.hasOwnProperty,jSe=Object.prototype.propertyIsEnumerable,xae=(e,t,n)=>t in e?Rtt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,GO=(e,t)=>{for(var n in t||(t={}))BSe.call(t,n)&&xae(e,n,t[n]);if(YR)for(var n of YR(t))jSe.call(t,n)&&xae(e,n,t[n]);return e},Ltt=(e,t)=>Ntt(e,Dtt(t)),Mtt=(e,t)=>{var n={};for(var r in e)BSe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&YR)for(var r of YR(e))t.indexOf(r)<0&&jSe.call(e,r)&&(n[r]=e[r]);return n};const zSe=A.forwardRef((e,t)=>{var n=e,{children:r,refProp:i="ref",popupType:s="dialog"}=n,o=Mtt(n,["children","refProp","popupType"]);if(!PC(r))throw new Error(MSe.children);const a=o,u=FSe(),l=Ts(u.reference,r.ref,t),c=u.withRoles?{"aria-haspopup":s,"aria-expanded":u.opened,"aria-controls":u.getDropdownId(),id:u.getTargetId()}:{};return A.cloneElement(r,GO(Ltt(GO(GO(GO({},a),c),u.targetProps),{className:gEe(u.targetProps.className,a.className,r.props.className),[i]:l}),u.controlled?null:{onClick:u.onToggle}))});zSe.displayName="@mantine/core/PopoverTarget";var Ftt=ht((e,{radius:t,shadow:n})=>({dropdown:{position:"absolute",backgroundColor:e.white,background:e.colorScheme==="dark"?e.colors.dark[6]:e.white,border:`1px solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2]}`,padding:`${e.spacing.sm}px ${e.spacing.md}px`,boxShadow:e.shadows[n]||n||"none",borderRadius:e.fn.radius(t),"&:focus":{outline:0}},arrow:{backgroundColor:"inherit",border:`1px solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2]}`,zIndex:1}}));const Btt=Ftt;var jtt=Object.defineProperty,Sae=Object.getOwnPropertySymbols,ztt=Object.prototype.hasOwnProperty,Utt=Object.prototype.propertyIsEnumerable,Tae=(e,t,n)=>t in e?jtt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,r_=(e,t)=>{for(var n in t||(t={}))ztt.call(t,n)&&Tae(e,n,t[n]);if(Sae)for(var n of Sae(t))Utt.call(t,n)&&Tae(e,n,t[n]);return e};const Aae={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function USe({transition:e,state:t,duration:n,timingFunction:r}){const i={transitionDuration:`${n}ms`,transitionTimingFunction:r};return typeof e=="string"?e in jO?r_(r_(r_({transitionProperty:jO[e].transitionProperty},i),jO[e].common),jO[e][Aae[t]]):null:r_(r_(r_({transitionProperty:e.transitionProperty},i),e.common),e[Aae[t]])}function VSe({duration:e,exitDuration:t,timingFunction:n,mounted:r,onEnter:i,onExit:s,onEntered:o,onExited:a}){const u=as(),l=XM(),c=u.respectReducedMotion?l:!1,[f,d]=A.useState(r?"entered":"exited");let h=c?0:e;const p=A.useRef(-1),m=g=>{const y=g?i:s,v=g?o:a;if(d(g?"pre-entering":"pre-exiting"),window.clearTimeout(p.current),h=c?0:g?e:t,h===0)typeof y=="function"&&y(),typeof v=="function"&&v(),d(g?"entered":"exited");else{const _=window.setTimeout(()=>{typeof y=="function"&&y(),d(g?"entering":"exiting")},10);p.current=window.setTimeout(()=>{window.clearTimeout(_),typeof v=="function"&&v(),d(g?"entered":"exited")},h)}};return _s(()=>{m(r)},[r]),A.useEffect(()=>()=>window.clearTimeout(p.current),[]),{transitionDuration:h,transitionStatus:f,transitionTimingFunction:n||u.transitionTimingFunction}}function FC({transition:e,duration:t=250,exitDuration:n=t,mounted:r,children:i,timingFunction:s,onExit:o,onEntered:a,onEnter:u,onExited:l}){const{transitionDuration:c,transitionStatus:f,transitionTimingFunction:d}=VSe({mounted:r,exitDuration:n,duration:t,timingFunction:s,onExit:o,onEntered:a,onEnter:u,onExited:l});return c===0?r?L.createElement(L.Fragment,null,i({})):null:f==="exited"?null:L.createElement(L.Fragment,null,i(USe({transition:e,duration:c,state:f,timingFunction:d})))}FC.displayName="@mantine/core/Transition";function HSe({children:e,active:t=!0,refProp:n="ref"}){const r=GEe(t),i=Ts(r,e==null?void 0:e.ref);return PC(e)?A.cloneElement(e,{[n]:i}):e}HSe.displayName="@mantine/core/FocusTrap";var Vtt=Object.defineProperty,Htt=Object.defineProperties,qtt=Object.getOwnPropertyDescriptors,Cae=Object.getOwnPropertySymbols,Wtt=Object.prototype.hasOwnProperty,Gtt=Object.prototype.propertyIsEnumerable,Iae=(e,t,n)=>t in e?Vtt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,fm=(e,t)=>{for(var n in t||(t={}))Wtt.call(t,n)&&Iae(e,n,t[n]);if(Cae)for(var n of Cae(t))Gtt.call(t,n)&&Iae(e,n,t[n]);return e},YO=(e,t)=>Htt(e,qtt(t));function Oae(e,t,n){return e==="center"?{top:t}:e==="end"?{bottom:n}:e==="start"?{top:n}:{}}function Pae(e,t,n,r){return e==="center"?{[r==="ltr"?"left":"right"]:t}:e==="end"?{[r==="ltr"?"right":"left"]:n}:e==="start"?{[r==="ltr"?"left":"right"]:n}:{}}const Ytt={bottom:"borderTopLeftRadius",left:"borderTopRightRadius",right:"borderBottomLeftRadius",top:"borderBottomRightRadius"};function Ktt({position:e,withBorder:t,arrowSize:n,arrowOffset:r,arrowRadius:i,arrowX:s,arrowY:o,dir:a}){const[u,l="center"]=e.split("-"),c={width:n,height:n,transform:"rotate(45deg)",position:"absolute",[Ytt[u]]:i},f=t?-n/2-1:-n/2;return u==="left"?YO(fm(fm({},c),Oae(l,o,r)),{right:f,borderLeft:0,borderBottom:0}):u==="right"?YO(fm(fm({},c),Oae(l,o,r)),{left:f,borderRight:0,borderTop:0}):u==="top"?YO(fm(fm({},c),Pae(l,s,r,a)),{bottom:f,borderTop:0,[a==="ltr"?"borderLeft":"borderRight"]:0}):u==="bottom"?YO(fm(fm({},c),Pae(l,s,r,a)),{top:f,borderBottom:0,[a==="ltr"?"borderRight":"borderLeft"]:0}):{}}var Xtt=Object.defineProperty,Qtt=Object.defineProperties,Jtt=Object.getOwnPropertyDescriptors,KR=Object.getOwnPropertySymbols,qSe=Object.prototype.hasOwnProperty,WSe=Object.prototype.propertyIsEnumerable,kae=(e,t,n)=>t in e?Xtt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ztt=(e,t)=>{for(var n in t||(t={}))qSe.call(t,n)&&kae(e,n,t[n]);if(KR)for(var n of KR(t))WSe.call(t,n)&&kae(e,n,t[n]);return e},ent=(e,t)=>Qtt(e,Jtt(t)),tnt=(e,t)=>{var n={};for(var r in e)qSe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&KR)for(var r of KR(e))t.indexOf(r)<0&&WSe.call(e,r)&&(n[r]=e[r]);return n};const jG=A.forwardRef((e,t)=>{var n=e,{withBorder:r,position:i,arrowSize:s,arrowOffset:o,arrowRadius:a,visible:u,arrowX:l,arrowY:c}=n,f=tnt(n,["withBorder","position","arrowSize","arrowOffset","arrowRadius","visible","arrowX","arrowY"]);const d=as();return u?L.createElement("div",ent(Ztt({},f),{ref:t,style:Ktt({withBorder:r,position:i,arrowSize:s,arrowOffset:o,arrowRadius:a,dir:d.dir,arrowX:l,arrowY:c})})):null});jG.displayName="@mantine/core/FloatingArrow";var nnt=Object.defineProperty,rnt=Object.defineProperties,int=Object.getOwnPropertyDescriptors,XR=Object.getOwnPropertySymbols,GSe=Object.prototype.hasOwnProperty,YSe=Object.prototype.propertyIsEnumerable,$ae=(e,t,n)=>t in e?nnt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,KO=(e,t)=>{for(var n in t||(t={}))GSe.call(t,n)&&$ae(e,n,t[n]);if(XR)for(var n of XR(t))YSe.call(t,n)&&$ae(e,n,t[n]);return e},Rae=(e,t)=>rnt(e,int(t)),snt=(e,t)=>{var n={};for(var r in e)GSe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&XR)for(var r of XR(e))t.indexOf(r)<0&&YSe.call(e,r)&&(n[r]=e[r]);return n};function KSe(e){var t=e,{style:n,className:r,children:i,onKeyDownCapture:s}=t,o=snt(t,["style","className","children","onKeyDownCapture"]);const{classNames:a,styles:u,unstyled:l,staticSelector:c}=RC(),f=FSe(),{classes:d,cx:h}=Btt({radius:f.radius,shadow:f.shadow},{name:c,classNames:a,styles:u,unstyled:l}),p=VEe({opened:f.opened,shouldReturnFocus:f.returnFocus}),m=f.withRoles?{"aria-labelledby":f.getTargetId(),id:f.getDropdownId(),role:"dialog"}:{};return f.disabled?null:L.createElement(NC,{withinPortal:f.withinPortal},L.createElement(FC,{mounted:f.opened,transition:f.transition,duration:f.transitionDuration,exitDuration:typeof f.exitTransitionDuration=="number"?f.exitTransitionDuration:f.transitionDuration},g=>{var y,v;return L.createElement(HSe,{active:f.trapFocus},L.createElement(At,KO(Rae(KO({},m),{tabIndex:-1,ref:f.floating,style:Rae(KO(KO({},n),g),{zIndex:f.zIndex,top:(y=f.y)!=null?y:0,left:(v=f.x)!=null?v:0,width:f.width==="target"?void 0:f.width}),className:h(d.dropdown,r),onKeyDownCapture:eYe(f.onClose,{active:f.closeOnEscape,onTrigger:p,onKeyDown:s}),"data-position":f.placement}),o),i,L.createElement(jG,{ref:f.arrowRef,arrowX:f.arrowX,arrowY:f.arrowY,visible:f.withArrow,withBorder:!0,position:f.placement,arrowSize:f.arrowSize,arrowRadius:f.arrowRadius,arrowOffset:f.arrowOffset,className:d.arrow})))}))}KSe.displayName="@mantine/core/PopoverDropdown";function XSe(e,t){if(e==="rtl"&&(t.includes("right")||t.includes("left"))){const[n,r]=t.split("-"),i=n==="right"?"left":"right";return r===void 0?i:`${i}-${r}`}return t}var Nae=Object.getOwnPropertySymbols,ont=Object.prototype.hasOwnProperty,ant=Object.prototype.propertyIsEnumerable,unt=(e,t)=>{var n={};for(var r in e)ont.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&Nae)for(var r of Nae(e))t.indexOf(r)<0&&ant.call(e,r)&&(n[r]=e[r]);return n};const lnt={position:"bottom",offset:8,positionDependencies:[],transition:"fade",transitionDuration:150,middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,closeOnClickOutside:!0,withinPortal:!1,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,clickOutsideEvents:["mousedown","touchstart"],zIndex:Tu("popover"),__staticSelector:"Popover",width:"max-content"};function Vi(e){var t,n,r,i,s,o;const a=A.useRef(null),u=Ct("Popover",lnt,e),{children:l,position:c,offset:f,onPositionChange:d,positionDependencies:h,opened:p,transition:m,transitionDuration:g,width:y,middlewares:v,withArrow:_,arrowSize:b,arrowOffset:E,arrowRadius:w,unstyled:x,classNames:S,styles:I,closeOnClickOutside:C,withinPortal:O,closeOnEscape:z,clickOutsideEvents:N,trapFocus:$,onClose:D,onOpen:B,onChange:V,zIndex:j,radius:G,shadow:U,id:P,defaultOpened:k,exitTransitionDuration:H,__staticSelector:M,withRoles:F,disabled:J,returnFocus:se}=u,ae=unt(u,["children","position","offset","onPositionChange","positionDependencies","opened","transition","transitionDuration","width","middlewares","withArrow","arrowSize","arrowOffset","arrowRadius","unstyled","classNames","styles","closeOnClickOutside","withinPortal","closeOnEscape","clickOutsideEvents","trapFocus","onClose","onOpen","onChange","zIndex","radius","shadow","id","defaultOpened","exitTransitionDuration","__staticSelector","withRoles","disabled","returnFocus"]),[ce,le]=A.useState(null),[ge,ue]=A.useState(null),Fe=vl(P),ke=as(),Ge=ktt({middlewares:v,width:y,position:XSe(ke.dir,c),offset:f+(_?b/2:0),arrowRef:a,onPositionChange:d,positionDependencies:h,opened:p,defaultOpened:k,onChange:V,onOpen:B,onClose:D});JKe(()=>C&&Ge.onClose(),N,[ce,ge]);const Re=A.useCallback(Le=>{le(Le),Ge.floating.reference(Le)},[Ge.floating.reference]),Oe=A.useCallback(Le=>{ue(Le),Ge.floating.floating(Le)},[Ge.floating.floating]);return L.createElement(jEe,{classNames:S,styles:I,unstyled:x,staticSelector:M},L.createElement($tt,{value:{returnFocus:se,disabled:J,controlled:Ge.controlled,reference:Re,floating:Oe,x:Ge.floating.x,y:Ge.floating.y,arrowX:(r=(n=(t=Ge.floating)==null?void 0:t.middlewareData)==null?void 0:n.arrow)==null?void 0:r.x,arrowY:(o=(s=(i=Ge.floating)==null?void 0:i.middlewareData)==null?void 0:s.arrow)==null?void 0:o.y,opened:Ge.opened,arrowRef:a,transition:m,transitionDuration:g,exitTransitionDuration:H,width:y,withArrow:_,arrowSize:b,arrowOffset:E,arrowRadius:w,placement:Ge.floating.placement,trapFocus:$,withinPortal:O,zIndex:j,radius:G,shadow:U,closeOnEscape:z,onClose:Ge.onClose,onToggle:Ge.onToggle,getTargetId:()=>`${Fe}-target`,getDropdownId:()=>`${Fe}-dropdown`,withRoles:F,targetProps:ae}},l))}Vi.Target=zSe;Vi.Dropdown=KSe;Vi.displayName="@mantine/core/Popover";var cnt=Object.defineProperty,QR=Object.getOwnPropertySymbols,QSe=Object.prototype.hasOwnProperty,JSe=Object.prototype.propertyIsEnumerable,Dae=(e,t,n)=>t in e?cnt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,fnt=(e,t)=>{for(var n in t||(t={}))QSe.call(t,n)&&Dae(e,n,t[n]);if(QR)for(var n of QR(t))JSe.call(t,n)&&Dae(e,n,t[n]);return e},dnt=(e,t)=>{var n={};for(var r in e)QSe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&QR)for(var r of QR(e))t.indexOf(r)<0&&JSe.call(e,r)&&(n[r]=e[r]);return n};function hnt(e){var t=e,{children:n,component:r="div",maxHeight:i=220,direction:s="column",id:o,innerRef:a,__staticSelector:u,styles:l,classNames:c,unstyled:f}=t,d=dnt(t,["children","component","maxHeight","direction","id","innerRef","__staticSelector","styles","classNames","unstyled"]);const{classes:h}=Qet(null,{name:u,styles:l,classNames:c,unstyled:f});return L.createElement(Vi.Dropdown,fnt({p:0,onMouseDown:p=>p.preventDefault()},d),L.createElement("div",{style:{maxHeight:i,display:"flex"}},L.createElement(At,{component:r||"div",id:`${o}-items`,"aria-labelledby":`${o}-label`,role:"listbox",onMouseDown:p=>p.preventDefault(),style:{flex:1,overflowY:r!==t6?"auto":void 0},"data-combobox-popover":!0,ref:a},L.createElement("div",{className:h.itemsWrapper,style:{flexDirection:s}},n))))}function vg({opened:e,transition:t="fade",transitionDuration:n=0,shadow:r,withinPortal:i,children:s,__staticSelector:o,onDirectionChange:a,switchDirectionOnFlip:u,zIndex:l,dropdownPosition:c,positionDependencies:f=[],classNames:d,styles:h,unstyled:p,readOnly:m}){return L.createElement(Vi,{unstyled:p,classNames:d,styles:h,width:"target",withRoles:!1,opened:e,middlewares:{flip:c==="flip",shift:!1},position:c==="flip"?"bottom":c,positionDependencies:f,zIndex:l,__staticSelector:o,withinPortal:i,transition:t,transitionDuration:n,shadow:r,disabled:m,onPositionChange:g=>u&&(a==null?void 0:a(g==="top"?"column-reverse":"column"))},s)}vg.Target=Vi.Target;vg.Dropdown=hnt;var pnt=Object.defineProperty,mnt=Object.defineProperties,gnt=Object.getOwnPropertyDescriptors,JR=Object.getOwnPropertySymbols,ZSe=Object.prototype.hasOwnProperty,eTe=Object.prototype.propertyIsEnumerable,Lae=(e,t,n)=>t in e?pnt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,n9=(e,t)=>{for(var n in t||(t={}))ZSe.call(t,n)&&Lae(e,n,t[n]);if(JR)for(var n of JR(t))eTe.call(t,n)&&Lae(e,n,t[n]);return e},ynt=(e,t)=>mnt(e,gnt(t)),vnt=(e,t)=>{var n={};for(var r in e)ZSe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&JR)for(var r of JR(e))t.indexOf(r)<0&&eTe.call(e,r)&&(n[r]=e[r]);return n};function tTe(e,t,n){const r=Ct(e,t,n),{label:i,description:s,error:o,required:a,classNames:u,styles:l,className:c,unstyled:f,__staticSelector:d,sx:h,errorProps:p,labelProps:m,descriptionProps:g,wrapperProps:y,id:v,size:_,style:b,inputContainer:E,inputWrapperOrder:w,withAsterisk:x}=r,S=vnt(r,["label","description","error","required","classNames","styles","className","unstyled","__staticSelector","sx","errorProps","labelProps","descriptionProps","wrapperProps","id","size","style","inputContainer","inputWrapperOrder","withAsterisk"]),I=vl(v),{systemStyles:C,rest:O}=yf(S);return ynt(n9({},O),{classNames:u,styles:l,unstyled:f,wrapperProps:n9(n9({label:i,description:s,error:o,required:a,classNames:u,className:c,__staticSelector:d,sx:h,errorProps:p,labelProps:m,descriptionProps:g,unstyled:f,styles:l,id:I,size:_,style:b,inputContainer:E,inputWrapperOrder:w,withAsterisk:x},y),C),inputProps:{required:a,classNames:u,styles:l,unstyled:f,id:I,size:_,__staticSelector:d,invalid:!!o}})}var _nt=ht((e,{size:t})=>({label:{display:"inline-block",fontSize:e.fn.size({size:t,sizes:e.fontSizes}),fontWeight:500,color:e.colorScheme==="dark"?e.colors.dark[0]:e.colors.gray[9],wordBreak:"break-word",cursor:"default",WebkitTapHighlightColor:"transparent"},required:{color:e.fn.variant({variant:"filled",color:"red"}).background}})),bnt=Object.defineProperty,ZR=Object.getOwnPropertySymbols,nTe=Object.prototype.hasOwnProperty,rTe=Object.prototype.propertyIsEnumerable,Mae=(e,t,n)=>t in e?bnt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,wnt=(e,t)=>{for(var n in t||(t={}))nTe.call(t,n)&&Mae(e,n,t[n]);if(ZR)for(var n of ZR(t))rTe.call(t,n)&&Mae(e,n,t[n]);return e},Ent=(e,t)=>{var n={};for(var r in e)nTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&ZR)for(var r of ZR(e))t.indexOf(r)<0&&rTe.call(e,r)&&(n[r]=e[r]);return n};const zG=A.forwardRef((e,t)=>{var n=e,{labelElement:r="label",children:i,required:s,size:o="sm",classNames:a,styles:u,unstyled:l,className:c,htmlFor:f,__staticSelector:d}=n,h=Ent(n,["labelElement","children","required","size","classNames","styles","unstyled","className","htmlFor","__staticSelector"]);const{classes:p,cx:m}=_nt({size:o},{name:["InputWrapper",d],classNames:a,styles:u,unstyled:l});return L.createElement(At,wnt({component:r,ref:t,className:m(p.label,c),htmlFor:r==="label"?f:void 0},h),i,s&&L.createElement("span",{className:p.required,"aria-hidden":!0}," *"))});zG.displayName="@mantine/core/InputLabel";var xnt=ht((e,{size:t})=>({error:{wordBreak:"break-word",color:e.fn.variant({variant:"filled",color:"red"}).background,fontSize:e.fn.size({size:t,sizes:e.fontSizes})-2,lineHeight:1.2,display:"block"}})),Snt=Object.defineProperty,eN=Object.getOwnPropertySymbols,iTe=Object.prototype.hasOwnProperty,sTe=Object.prototype.propertyIsEnumerable,Fae=(e,t,n)=>t in e?Snt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Tnt=(e,t)=>{for(var n in t||(t={}))iTe.call(t,n)&&Fae(e,n,t[n]);if(eN)for(var n of eN(t))sTe.call(t,n)&&Fae(e,n,t[n]);return e},Ant=(e,t)=>{var n={};for(var r in e)iTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&eN)for(var r of eN(e))t.indexOf(r)<0&&sTe.call(e,r)&&(n[r]=e[r]);return n};const UG=A.forwardRef((e,t)=>{var n=e,{children:r,className:i,classNames:s,styles:o,unstyled:a,size:u="sm",__staticSelector:l}=n,c=Ant(n,["children","className","classNames","styles","unstyled","size","__staticSelector"]);const{classes:f,cx:d}=xnt({size:u},{name:["InputWrapper",l],classNames:s,styles:o,unstyled:a});return L.createElement(Rt,Tnt({className:d(f.error,i),ref:t,role:"alert"},c),r)});UG.displayName="@mantine/core/InputError";var Cnt=ht((e,{size:t})=>({description:{wordBreak:"break-word",color:e.colorScheme==="dark"?e.colors.dark[2]:e.colors.gray[6],fontSize:e.fn.size({size:t,sizes:e.fontSizes})-2,lineHeight:1.2,display:"block"}})),Int=Object.defineProperty,tN=Object.getOwnPropertySymbols,oTe=Object.prototype.hasOwnProperty,aTe=Object.prototype.propertyIsEnumerable,Bae=(e,t,n)=>t in e?Int(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ont=(e,t)=>{for(var n in t||(t={}))oTe.call(t,n)&&Bae(e,n,t[n]);if(tN)for(var n of tN(t))aTe.call(t,n)&&Bae(e,n,t[n]);return e},Pnt=(e,t)=>{var n={};for(var r in e)oTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&tN)for(var r of tN(e))t.indexOf(r)<0&&aTe.call(e,r)&&(n[r]=e[r]);return n};const VG=A.forwardRef((e,t)=>{var n=e,{children:r,className:i,classNames:s,styles:o,unstyled:a,size:u="sm",__staticSelector:l}=n,c=Pnt(n,["children","className","classNames","styles","unstyled","size","__staticSelector"]);const{classes:f,cx:d}=Cnt({size:u},{name:["InputWrapper",l],classNames:s,styles:o,unstyled:a});return L.createElement(Rt,Ont({color:"dimmed",className:d(f.description,i),ref:t,unstyled:a},c),r)});VG.displayName="@mantine/core/InputDescription";const uTe=A.createContext({offsetBottom:!1,offsetTop:!1}),knt=uTe.Provider,$nt=()=>A.useContext(uTe);function Rnt(e,{hasDescription:t,hasError:n}){const r=e.findIndex(u=>u==="input"),i=e[r-1],s=e[r+1];return{offsetBottom:t&&s==="description"||n&&s==="error",offsetTop:t&&i==="description"||n&&i==="error"}}var Nnt=Object.defineProperty,Dnt=Object.defineProperties,Lnt=Object.getOwnPropertyDescriptors,jae=Object.getOwnPropertySymbols,Mnt=Object.prototype.hasOwnProperty,Fnt=Object.prototype.propertyIsEnumerable,zae=(e,t,n)=>t in e?Nnt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Bnt=(e,t)=>{for(var n in t||(t={}))Mnt.call(t,n)&&zae(e,n,t[n]);if(jae)for(var n of jae(t))Fnt.call(t,n)&&zae(e,n,t[n]);return e},jnt=(e,t)=>Dnt(e,Lnt(t)),znt=ht(e=>({root:jnt(Bnt({},e.fn.fontStyles()),{lineHeight:e.lineHeight})})),Unt=Object.defineProperty,Vnt=Object.defineProperties,Hnt=Object.getOwnPropertyDescriptors,nN=Object.getOwnPropertySymbols,lTe=Object.prototype.hasOwnProperty,cTe=Object.prototype.propertyIsEnumerable,Uae=(e,t,n)=>t in e?Unt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Q0=(e,t)=>{for(var n in t||(t={}))lTe.call(t,n)&&Uae(e,n,t[n]);if(nN)for(var n of nN(t))cTe.call(t,n)&&Uae(e,n,t[n]);return e},Vae=(e,t)=>Vnt(e,Hnt(t)),qnt=(e,t)=>{var n={};for(var r in e)lTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&nN)for(var r of nN(e))t.indexOf(r)<0&&cTe.call(e,r)&&(n[r]=e[r]);return n};const Wnt={labelElement:"label",size:"sm",inputContainer:e=>e,inputWrapperOrder:["label","description","input","error"]},fTe=A.forwardRef((e,t)=>{const n=Ct("InputWrapper",Wnt,e),{className:r,label:i,children:s,required:o,id:a,error:u,description:l,labelElement:c,labelProps:f,descriptionProps:d,errorProps:h,classNames:p,styles:m,size:g,inputContainer:y,__staticSelector:v,unstyled:_,inputWrapperOrder:b,withAsterisk:E}=n,w=qnt(n,["className","label","children","required","id","error","description","labelElement","labelProps","descriptionProps","errorProps","classNames","styles","size","inputContainer","__staticSelector","unstyled","inputWrapperOrder","withAsterisk"]),{classes:x,cx:S}=znt(null,{classNames:p,styles:m,name:["InputWrapper",v],unstyled:_}),I={classNames:p,styles:m,unstyled:_,size:g,__staticSelector:v},C=typeof E=="boolean"?E:o,O=i&&L.createElement(zG,Q0(Q0({key:"label",labelElement:c,id:a?`${a}-label`:void 0,htmlFor:a,required:C},I),f),i),z=l&&L.createElement(VG,Vae(Q0(Q0({key:"description"},d),I),{size:(d==null?void 0:d.size)||I.size}),l),N=L.createElement(A.Fragment,{key:"input"},y(s)),$=typeof u!="boolean"&&u&&L.createElement(UG,Vae(Q0(Q0({},h),I),{size:(h==null?void 0:h.size)||I.size,key:"error"}),u),D=b.map(B=>{switch(B){case"label":return O;case"input":return N;case"description":return z;case"error":return $;default:return null}});return L.createElement(knt,{value:Rnt(b,{hasDescription:!!z,hasError:!!$})},L.createElement(At,Q0({className:S(x.root,r),ref:t},w),D))});fTe.displayName="@mantine/core/InputWrapper";var Gnt=Object.defineProperty,Ynt=Object.defineProperties,Knt=Object.getOwnPropertyDescriptors,Hae=Object.getOwnPropertySymbols,Xnt=Object.prototype.hasOwnProperty,Qnt=Object.prototype.propertyIsEnumerable,qae=(e,t,n)=>t in e?Gnt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,r9=(e,t)=>{for(var n in t||(t={}))Xnt.call(t,n)&&qae(e,n,t[n]);if(Hae)for(var n of Hae(t))Qnt.call(t,n)&&qae(e,n,t[n]);return e},Wae=(e,t)=>Ynt(e,Knt(t));const Fo={xs:30,sm:36,md:42,lg:50,xl:60};function Jnt({theme:e,variant:t}){return t==="default"?{border:`1px solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[4]}`,backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.white,transition:"border-color 100ms ease","&:focus, &:focus-within":e.focusRingStyles.inputStyles(e)}:t==="filled"?{border:"1px solid transparent",backgroundColor:e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[1],"&:focus, &:focus-within":e.focusRingStyles.inputStyles(e)}:{borderWidth:0,color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,backgroundColor:"transparent",minHeight:28,outline:0,"&:focus, &:focus-within":{outline:"none",borderColor:"transparent"},"&:disabled":{backgroundColor:"transparent","&:focus, &:focus-within":{outline:"none",borderColor:"transparent"}}}}var Znt=ht((e,{size:t,multiline:n,radius:r,variant:i,invalid:s,rightSectionWidth:o,withRightSection:a,iconWidth:u,offsetBottom:l,offsetTop:c,pointer:f})=>{const d=e.fn.variant({variant:"filled",color:"red"}).background,h=i==="default"||i==="filled"?{minHeight:e.fn.size({size:t,sizes:Fo}),paddingLeft:e.fn.size({size:t,sizes:Fo})/3,paddingRight:a?o:e.fn.size({size:t,sizes:Fo})/3,borderRadius:e.fn.radius(r)}:null;return{wrapper:{position:"relative",marginTop:c?`calc(${e.spacing.xs}px / 2)`:void 0,marginBottom:l?`calc(${e.spacing.xs}px / 2)`:void 0},input:r9(Wae(r9(Wae(r9({},e.fn.fontStyles()),{height:n?i==="unstyled"?void 0:"auto":e.fn.size({size:t,sizes:Fo}),WebkitTapHighlightColor:"transparent",lineHeight:n?e.lineHeight:`${e.fn.size({size:t,sizes:Fo})-2}px`,appearance:"none",resize:"none",boxSizing:"border-box",fontSize:e.fn.size({size:t,sizes:e.fontSizes}),width:"100%",color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,display:"block",textAlign:"left",cursor:f?"pointer":void 0}),h),{"&:disabled":{backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[1],color:e.colors.dark[2],opacity:.6,cursor:"not-allowed","&::placeholder":{color:e.colors.dark[2]}},"&::placeholder":{opacity:1,userSelect:"none",color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[5]},"&::-webkit-inner-spin-button, &::-webkit-outer-spin-button, &::-webkit-search-decoration, &::-webkit-search-cancel-button, &::-webkit-search-results-button, &::-webkit-search-results-decoration":{appearance:"none"},"&[type=number]":{MozAppearance:"textfield"}}),Jnt({theme:e,variant:i})),withIcon:{paddingLeft:typeof u=="number"?u:e.fn.size({size:t,sizes:Fo})},invalid:{color:d,borderColor:d,"&::placeholder":{opacity:1,color:d}},disabled:{backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[1],color:e.colors.dark[2],opacity:.6,cursor:"not-allowed","&::placeholder":{color:e.colors.dark[2]}},icon:{pointerEvents:"none",position:"absolute",zIndex:1,left:0,top:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",width:typeof u=="number"?u:e.fn.size({size:t,sizes:Fo}),color:s?e.colors.red[e.colorScheme==="dark"?6:7]:e.colorScheme==="dark"?e.colors.dark[2]:e.colors.gray[5]},rightSection:{position:"absolute",top:0,bottom:0,right:0,display:"flex",alignItems:"center",justifyContent:"center",width:o}}}),ert=Object.defineProperty,trt=Object.defineProperties,nrt=Object.getOwnPropertyDescriptors,rN=Object.getOwnPropertySymbols,dTe=Object.prototype.hasOwnProperty,hTe=Object.prototype.propertyIsEnumerable,Gae=(e,t,n)=>t in e?ert(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,XO=(e,t)=>{for(var n in t||(t={}))dTe.call(t,n)&&Gae(e,n,t[n]);if(rN)for(var n of rN(t))hTe.call(t,n)&&Gae(e,n,t[n]);return e},Yae=(e,t)=>trt(e,nrt(t)),rrt=(e,t)=>{var n={};for(var r in e)dTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&rN)for(var r of rN(e))t.indexOf(r)<0&&hTe.call(e,r)&&(n[r]=e[r]);return n};const irt={rightSectionWidth:36,size:"sm",variant:"default"},EE=A.forwardRef((e,t)=>{const n=Ct("Input",irt,e),{className:r,invalid:i,required:s,disabled:o,variant:a,icon:u,style:l,rightSectionWidth:c,iconWidth:f,rightSection:d,rightSectionProps:h,radius:p,size:m,wrapperProps:g,classNames:y,styles:v,__staticSelector:_,multiline:b,sx:E,unstyled:w,pointer:x}=n,S=rrt(n,["className","invalid","required","disabled","variant","icon","style","rightSectionWidth","iconWidth","rightSection","rightSectionProps","radius","size","wrapperProps","classNames","styles","__staticSelector","multiline","sx","unstyled","pointer"]),{offsetBottom:I,offsetTop:C}=$nt(),{classes:O,cx:z}=Znt({radius:p,size:m,multiline:b,variant:a,invalid:i,rightSectionWidth:c,iconWidth:f,withRightSection:!!d,offsetBottom:I,offsetTop:C,pointer:x},{classNames:y,styles:v,name:["Input",_],unstyled:w}),{systemStyles:N,rest:$}=yf(S);return L.createElement(At,XO(XO({className:z(O.wrapper,r),sx:E,style:l},N),g),u&&L.createElement("div",{className:O.icon},u),L.createElement(At,Yae(XO({component:"input"},$),{ref:t,required:s,"aria-invalid":i,disabled:o,className:z(O[`${a}Variant`],O.input,{[O.withIcon]:u,[O.invalid]:i,[O.disabled]:o})})),d&&L.createElement("div",Yae(XO({},h),{className:O.rightSection}),d))});EE.displayName="@mantine/core/Input";EE.Wrapper=fTe;EE.Label=zG;EE.Description=VG;EE.Error=UG;const is=EE;var srt=Object.defineProperty,ort=Object.defineProperties,art=Object.getOwnPropertyDescriptors,Kae=Object.getOwnPropertySymbols,urt=Object.prototype.hasOwnProperty,lrt=Object.prototype.propertyIsEnumerable,Xae=(e,t,n)=>t in e?srt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,i9=(e,t)=>{for(var n in t||(t={}))urt.call(t,n)&&Xae(e,n,t[n]);if(Kae)for(var n of Kae(t))lrt.call(t,n)&&Xae(e,n,t[n]);return e},crt=(e,t)=>ort(e,art(t));const s9={xs:{fontSize:9,height:16},sm:{fontSize:10,height:18},md:{fontSize:11,height:20},lg:{fontSize:13,height:26},xl:{fontSize:16,height:32}},frt={xs:4,sm:4,md:6,lg:8,xl:10};function drt({theme:e,variant:t,color:n,size:r,gradient:i}){if(t==="dot"){const o=e.fn.size({size:r,sizes:frt});return{backgroundColor:"transparent",color:e.colorScheme==="dark"?e.colors.dark[0]:e.colors.gray[7],border:`1px solid ${e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[3]}`,paddingLeft:e.fn.size({size:r,sizes:e.spacing})/1.5-o/2,"&::before":{content:'""',display:"block",width:o,height:o,borderRadius:o,backgroundColor:e.fn.themeColor(n,e.colorScheme==="dark"?4:e.fn.primaryShade("light"),!0),marginRight:o}}}const s=e.fn.variant({color:n,variant:t,gradient:i});return{background:s.background,color:s.color,border:`${t==="gradient"?0:1}px solid ${s.border}`}}var hrt=ht((e,{color:t,size:n,radius:r,gradient:i,fullWidth:s,variant:o})=>{const{fontSize:a,height:u}=n in s9?s9[n]:s9.md;return{leftSection:{marginRight:`calc(${e.spacing.xs}px / 2)`},rightSection:{marginLeft:`calc(${e.spacing.xs}px / 2)`},inner:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},root:i9(crt(i9(i9({},e.fn.focusStyles()),e.fn.fontStyles()),{fontSize:a,height:u,WebkitTapHighlightColor:"transparent",lineHeight:`${u-2}px`,textDecoration:"none",padding:`0 ${e.fn.size({size:n,sizes:e.spacing})/1.5}px`,boxSizing:"border-box",display:s?"flex":"inline-flex",alignItems:"center",justifyContent:"center",width:s?"100%":"auto",textTransform:"uppercase",borderRadius:e.fn.radius(r),fontWeight:700,letterSpacing:.25,cursor:"inherit",textOverflow:"ellipsis",overflow:"hidden"}),drt({theme:e,variant:o,color:t,size:n,gradient:i}))}}),prt=Object.defineProperty,iN=Object.getOwnPropertySymbols,pTe=Object.prototype.hasOwnProperty,mTe=Object.prototype.propertyIsEnumerable,Qae=(e,t,n)=>t in e?prt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,mrt=(e,t)=>{for(var n in t||(t={}))pTe.call(t,n)&&Qae(e,n,t[n]);if(iN)for(var n of iN(t))mTe.call(t,n)&&Qae(e,n,t[n]);return e},grt=(e,t)=>{var n={};for(var r in e)pTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&iN)for(var r of iN(e))t.indexOf(r)<0&&mTe.call(e,r)&&(n[r]=e[r]);return n};const yrt={variant:"light",size:"md",radius:"xl"},gTe=A.forwardRef((e,t)=>{const n=Ct("Badge",yrt,e),{className:r,color:i,variant:s,fullWidth:o,children:a,size:u,leftSection:l,rightSection:c,radius:f,gradient:d,classNames:h,styles:p,unstyled:m}=n,g=grt(n,["className","color","variant","fullWidth","children","size","leftSection","rightSection","radius","gradient","classNames","styles","unstyled"]),{classes:y,cx:v}=hrt({size:u,fullWidth:o,color:i,radius:f,variant:s,gradient:d},{classNames:h,styles:p,name:"Badge",unstyled:m});return L.createElement(At,mrt({className:v(y.root,r),ref:t},g),l&&L.createElement("span",{className:y.leftSection},l),L.createElement("span",{className:y.inner},a),c&&L.createElement("span",{className:y.rightSection},c))});gTe.displayName="@mantine/core/Badge";const FT=gTe;var vrt=ht((e,{orientation:t,buttonBorderWidth:n})=>({root:{display:"flex",flexDirection:t==="vertical"?"column":"row","& [data-button]":{"&:first-of-type":{borderBottomRightRadius:0,[t==="vertical"?"borderBottomLeftRadius":"borderTopRightRadius"]:0,[t==="vertical"?"borderBottomWidth":"borderRightWidth"]:n/2},"&:last-of-type":{borderTopLeftRadius:0,[t==="vertical"?"borderTopRightRadius":"borderBottomLeftRadius"]:0,[t==="vertical"?"borderTopWidth":"borderLeftWidth"]:n/2},"&:not(:first-of-type):not(:last-of-type)":{borderRadius:0,[t==="vertical"?"borderTopWidth":"borderLeftWidth"]:n/2,[t==="vertical"?"borderBottomWidth":"borderRightWidth"]:n/2},"& + [data-button]":{[t==="vertical"?"marginTop":"marginLeft"]:-n,"@media (min-resolution: 192dpi)":{[t==="vertical"?"marginTop":"marginLeft"]:0}}}}})),_rt=Object.defineProperty,sN=Object.getOwnPropertySymbols,yTe=Object.prototype.hasOwnProperty,vTe=Object.prototype.propertyIsEnumerable,Jae=(e,t,n)=>t in e?_rt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,brt=(e,t)=>{for(var n in t||(t={}))yTe.call(t,n)&&Jae(e,n,t[n]);if(sN)for(var n of sN(t))vTe.call(t,n)&&Jae(e,n,t[n]);return e},wrt=(e,t)=>{var n={};for(var r in e)yTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&sN)for(var r of sN(e))t.indexOf(r)<0&&vTe.call(e,r)&&(n[r]=e[r]);return n};const Ert={orientation:"horizontal",buttonBorderWidth:1},_Te=A.forwardRef((e,t)=>{const n=Ct("ButtonGroup",Ert,e),{className:r,orientation:i,buttonBorderWidth:s,unstyled:o}=n,a=wrt(n,["className","orientation","buttonBorderWidth","unstyled"]),{classes:u,cx:l}=vrt({orientation:i,buttonBorderWidth:s},{name:"ButtonGroup",unstyled:o});return L.createElement(At,brt({className:l(u.root,r),ref:t},a))});_Te.displayName="@mantine/core/ButtonGroup";var xrt=Object.defineProperty,Srt=Object.defineProperties,Trt=Object.getOwnPropertyDescriptors,Zae=Object.getOwnPropertySymbols,Art=Object.prototype.hasOwnProperty,Crt=Object.prototype.propertyIsEnumerable,eue=(e,t,n)=>t in e?xrt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Sy=(e,t)=>{for(var n in t||(t={}))Art.call(t,n)&&eue(e,n,t[n]);if(Zae)for(var n of Zae(t))Crt.call(t,n)&&eue(e,n,t[n]);return e},Bz=(e,t)=>Srt(e,Trt(t));const jz={xs:{height:Fo.xs,paddingLeft:14,paddingRight:14},sm:{height:Fo.sm,paddingLeft:18,paddingRight:18},md:{height:Fo.md,paddingLeft:22,paddingRight:22},lg:{height:Fo.lg,paddingLeft:26,paddingRight:26},xl:{height:Fo.xl,paddingLeft:32,paddingRight:32},"compact-xs":{height:22,paddingLeft:7,paddingRight:7},"compact-sm":{height:26,paddingLeft:8,paddingRight:8},"compact-md":{height:30,paddingLeft:10,paddingRight:10},"compact-lg":{height:34,paddingLeft:12,paddingRight:12},"compact-xl":{height:40,paddingLeft:14,paddingRight:14}};function Irt({compact:e,size:t,withLeftIcon:n,withRightIcon:r}){if(e)return jz[`compact-${t}`];const i=jz[t];return Bz(Sy({},i),{paddingLeft:n?i.paddingLeft/1.5:i.paddingLeft,paddingRight:r?i.paddingRight/1.5:i.paddingRight})}const Ort=e=>({display:e?"block":"inline-block",width:e?"100%":"auto"});function Prt({variant:e,theme:t,color:n,gradient:r}){const i=t.fn.variant({color:n,variant:e,gradient:r});return e==="gradient"?{border:0,backgroundImage:i.background,color:i.color,"&:hover":t.fn.hover({backgroundSize:"200%"})}:Sy({border:`1px solid ${i.border}`,backgroundColor:i.background,color:i.color},t.fn.hover({backgroundColor:i.hover}))}var krt=ht((e,{color:t,size:n,radius:r,fullWidth:i,compact:s,gradient:o,variant:a,withLeftIcon:u,withRightIcon:l})=>({root:Bz(Sy(Bz(Sy(Sy(Sy(Sy({},Irt({compact:s,size:n,withLeftIcon:u,withRightIcon:l})),e.fn.fontStyles()),e.fn.focusStyles()),Ort(i)),{borderRadius:e.fn.radius(r),fontWeight:600,position:"relative",lineHeight:1,fontSize:e.fn.size({size:n,sizes:e.fontSizes}),userSelect:"none",cursor:"pointer"}),Prt({variant:a,theme:e,color:t,gradient:o})),{"&:active":e.activeStyles,"&:disabled, &[data-disabled]":{borderColor:"transparent",backgroundColor:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2],color:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[5],cursor:"not-allowed",backgroundImage:"none",pointerEvents:"none","&:active":{transform:"none"}},"&[data-loading]":{pointerEvents:"none","&::before":{content:'""',position:"absolute",top:-1,left:-1,right:-1,bottom:-1,backgroundColor:e.colorScheme==="dark"?e.fn.rgba(e.colors.dark[7],.5):"rgba(255, 255, 255, .5)",borderRadius:e.fn.radius(r),cursor:"not-allowed"}}}),icon:{display:"flex",alignItems:"center"},leftIcon:{marginRight:10},rightIcon:{marginLeft:10},centerLoader:{position:"absolute",left:"50%",transform:"translateX(-50%)",opacity:.5},inner:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",overflow:"visible"},label:{whiteSpace:"nowrap",height:"100%",overflow:"hidden",display:"flex",alignItems:"center"}})),$rt=Object.defineProperty,oN=Object.getOwnPropertySymbols,bTe=Object.prototype.hasOwnProperty,wTe=Object.prototype.propertyIsEnumerable,tue=(e,t,n)=>t in e?$rt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,nue=(e,t)=>{for(var n in t||(t={}))bTe.call(t,n)&&tue(e,n,t[n]);if(oN)for(var n of oN(t))wTe.call(t,n)&&tue(e,n,t[n]);return e},Rrt=(e,t)=>{var n={};for(var r in e)bTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&oN)for(var r of oN(e))t.indexOf(r)<0&&wTe.call(e,r)&&(n[r]=e[r]);return n};const Nrt={size:"sm",type:"button",variant:"filled",loaderPosition:"left"},HG=A.forwardRef((e,t)=>{const n=Ct("Button",Nrt,e),{className:r,size:i,color:s,type:o,disabled:a,children:u,leftIcon:l,rightIcon:c,fullWidth:f,variant:d,radius:h,uppercase:p,compact:m,loading:g,loaderPosition:y,loaderProps:v,gradient:_,classNames:b,styles:E,unstyled:w}=n,x=Rrt(n,["className","size","color","type","disabled","children","leftIcon","rightIcon","fullWidth","variant","radius","uppercase","compact","loading","loaderPosition","loaderProps","gradient","classNames","styles","unstyled"]),{classes:S,cx:I,theme:C}=krt({radius:h,color:s,size:i,fullWidth:f,compact:m,gradient:_,variant:d,withLeftIcon:!!l,withRightIcon:!!c},{name:"Button",unstyled:w,classNames:b,styles:E}),O=C.fn.variant({color:s,variant:d}),z=L.createElement(T0,nue({color:O.color,size:C.fn.size({size:i,sizes:jz}).height/2},v));return L.createElement(_v,nue({className:I(S.root,r),type:o,disabled:a,"data-button":!0,"data-disabled":a||void 0,"data-loading":g||void 0,ref:t,unstyled:w},x),L.createElement("div",{className:S.inner},(l||g&&y==="left")&&L.createElement("span",{className:I(S.icon,S.leftIcon)},g&&y==="left"?z:l),g&&y==="center"&&L.createElement("span",{className:S.centerLoader},z),L.createElement("span",{className:S.label,style:{textTransform:p?"uppercase":void 0}},u),(c||g&&y==="right")&&L.createElement("span",{className:I(S.icon,S.rightIcon)},g&&y==="right"?z:c)))});HG.displayName="@mantine/core/Button";HG.Group=_Te;const cu=HG;var Drt=ht((e,{radius:t,shadow:n,withBorder:r})=>({root:{outline:0,WebkitTapHighlightColor:"transparent",display:"block",textDecoration:"none",color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,backgroundColor:e.colorScheme==="dark"?e.colors.dark[7]:e.white,boxSizing:"border-box",borderRadius:e.fn.radius(t),boxShadow:e.shadows[n]||n||"none",border:r?`1px solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[3]}`:void 0}})),Lrt=Object.defineProperty,aN=Object.getOwnPropertySymbols,ETe=Object.prototype.hasOwnProperty,xTe=Object.prototype.propertyIsEnumerable,rue=(e,t,n)=>t in e?Lrt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Mrt=(e,t)=>{for(var n in t||(t={}))ETe.call(t,n)&&rue(e,n,t[n]);if(aN)for(var n of aN(t))xTe.call(t,n)&&rue(e,n,t[n]);return e},Frt=(e,t)=>{var n={};for(var r in e)ETe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&aN)for(var r of aN(e))t.indexOf(r)<0&&xTe.call(e,r)&&(n[r]=e[r]);return n};const Brt={},STe=A.forwardRef((e,t)=>{const n=Ct("Paper",Brt,e),{className:r,children:i,radius:s,withBorder:o,shadow:a,unstyled:u}=n,l=Frt(n,["className","children","radius","withBorder","shadow","unstyled"]),{classes:c,cx:f}=Drt({radius:s,shadow:a,withBorder:o},{name:"Paper",unstyled:u});return L.createElement(At,Mrt({className:f(c.root,r),ref:t},l),i)});STe.displayName="@mantine/core/Paper";const TTe=STe,ATe=A.createContext({padding:0}),jrt=ATe.Provider,zrt=()=>A.useContext(ATe).padding;var Urt=ht((e,{padding:t,withBorder:n,inheritPadding:r})=>{const i=e.fn.size({size:t,sizes:e.spacing}),s=-1*i,o=e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[3];return{cardSection:{display:"block",marginLeft:s,marginRight:s,paddingLeft:r?i:void 0,paddingRight:r?i:void 0,borderTop:n&&`1px solid ${o}`,borderBottom:n&&`1px solid ${o}`,"& + &":{borderTop:0},"&[data-first]":{marginTop:s,borderTop:0,borderBottom:n&&`1px solid ${o}`},"&[data-last]":{marginBottom:s,borderBottom:0}}}});const Vrt=Urt;var Hrt=Object.defineProperty,uN=Object.getOwnPropertySymbols,CTe=Object.prototype.hasOwnProperty,ITe=Object.prototype.propertyIsEnumerable,iue=(e,t,n)=>t in e?Hrt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,qrt=(e,t)=>{for(var n in t||(t={}))CTe.call(t,n)&&iue(e,n,t[n]);if(uN)for(var n of uN(t))ITe.call(t,n)&&iue(e,n,t[n]);return e},Wrt=(e,t)=>{var n={};for(var r in e)CTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&uN)for(var r of uN(e))t.indexOf(r)<0&&ITe.call(e,r)&&(n[r]=e[r]);return n};const OTe=A.forwardRef((e,t)=>{var n=e,{className:r,withBorder:i=!1,inheritPadding:s=!1,unstyled:o}=n,a=Wrt(n,["className","withBorder","inheritPadding","unstyled"]);const{classes:u,cx:l}=Vrt({padding:zrt(),withBorder:i,inheritPadding:s},{name:"Card",unstyled:o});return L.createElement(At,qrt({className:l(u.cardSection,r),ref:t},a))});OTe.displayName="@mantine/core/CardSection";const PTe=OTe;var Grt=ht(e=>({root:{position:"relative",overflow:"hidden",backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.white}})),Yrt=Object.defineProperty,lN=Object.getOwnPropertySymbols,kTe=Object.prototype.hasOwnProperty,$Te=Object.prototype.propertyIsEnumerable,sue=(e,t,n)=>t in e?Yrt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Krt=(e,t)=>{for(var n in t||(t={}))kTe.call(t,n)&&sue(e,n,t[n]);if(lN)for(var n of lN(t))$Te.call(t,n)&&sue(e,n,t[n]);return e},Xrt=(e,t)=>{var n={};for(var r in e)kTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&lN)for(var r of lN(e))t.indexOf(r)<0&&$Te.call(e,r)&&(n[r]=e[r]);return n};const Qrt={p:"md"},qG=A.forwardRef((e,t)=>{const n=Ct("Card",Qrt,e),{className:r,p:i,radius:s,children:o,unstyled:a}=n,u=Xrt(n,["className","p","radius","children","unstyled"]),{classes:l,cx:c}=Grt(null,{name:"Card",unstyled:a}),f=A.Children.toArray(o),d=f.map((h,p)=>typeof h=="object"&&h&&"type"in h&&h.type===PTe?A.cloneElement(h,{padding:i,"data-first":p===0||void 0,"data-last":p===f.length-1||void 0}):h);return L.createElement(jrt,{value:{padding:i}},L.createElement(TTe,Krt({className:c(l.root,r),radius:s,p:i,ref:t},u),d))});qG.Section=PTe;qG.displayName="@mantine/core/Card";const RTe=qG;var Jrt=Object.defineProperty,cN=Object.getOwnPropertySymbols,NTe=Object.prototype.hasOwnProperty,DTe=Object.prototype.propertyIsEnumerable,oue=(e,t,n)=>t in e?Jrt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Zrt=(e,t)=>{for(var n in t||(t={}))NTe.call(t,n)&&oue(e,n,t[n]);if(cN)for(var n of cN(t))DTe.call(t,n)&&oue(e,n,t[n]);return e},eit=(e,t)=>{var n={};for(var r in e)NTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&cN)for(var r of cN(e))t.indexOf(r)<0&&DTe.call(e,r)&&(n[r]=e[r]);return n};const LTe=A.forwardRef((e,t)=>{const n=Ct("Center",{},e),{inline:r,sx:i}=n,s=eit(n,["inline","sx"]);return L.createElement(At,Zrt({ref:t,sx:[{display:r?"inline-flex":"flex",alignItems:"center",justifyContent:"center"},...P1(i)]},s))});LTe.displayName="@mantine/core/Center";const Bg=LTe,MTe=A.createContext(null),tit=MTe.Provider,nit=()=>A.useContext(MTe);function rit(e){return A.Children.toArray(e).filter(Boolean)}const iit={left:"flex-start",center:"center",right:"flex-end",apart:"space-between"};var sit=ht((e,{spacing:t,position:n,noWrap:r,grow:i,align:s,count:o})=>({root:{boxSizing:"border-box",display:"flex",flexDirection:"row",alignItems:s||"center",flexWrap:r?"nowrap":"wrap",justifyContent:iit[n],gap:e.fn.size({size:t,sizes:e.spacing}),"& > *":{boxSizing:"border-box",maxWidth:i?`calc(${100/o}% - ${e.fn.size({size:t,sizes:e.spacing})-e.fn.size({size:t,sizes:e.spacing})/o}px)`:void 0,flexGrow:i?1:0}}}));const oit=sit;var ait=Object.defineProperty,fN=Object.getOwnPropertySymbols,FTe=Object.prototype.hasOwnProperty,BTe=Object.prototype.propertyIsEnumerable,aue=(e,t,n)=>t in e?ait(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,uit=(e,t)=>{for(var n in t||(t={}))FTe.call(t,n)&&aue(e,n,t[n]);if(fN)for(var n of fN(t))BTe.call(t,n)&&aue(e,n,t[n]);return e},lit=(e,t)=>{var n={};for(var r in e)FTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&fN)for(var r of fN(e))t.indexOf(r)<0&&BTe.call(e,r)&&(n[r]=e[r]);return n};const cit={position:"left",spacing:"md"},Jl=A.forwardRef((e,t)=>{const n=Ct("Group",cit,e),{className:r,position:i,align:s,children:o,noWrap:a,grow:u,spacing:l,unstyled:c}=n,f=lit(n,["className","position","align","children","noWrap","grow","spacing","unstyled"]),d=rit(o),{classes:h,cx:p}=oit({align:s,grow:u,noWrap:a,spacing:l,position:i,count:d.length},{unstyled:c,name:"Group"});return L.createElement(At,uit({className:p(h.root,r),ref:t},f),d)});Jl.displayName="@mantine/core/Group";var fit=ht((e,{spacing:t,align:n,justify:r})=>({root:{display:"flex",flexDirection:"column",alignItems:n,justifyContent:r,gap:e.fn.size({size:t,sizes:e.spacing})}})),dit=Object.defineProperty,dN=Object.getOwnPropertySymbols,jTe=Object.prototype.hasOwnProperty,zTe=Object.prototype.propertyIsEnumerable,uue=(e,t,n)=>t in e?dit(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,hit=(e,t)=>{for(var n in t||(t={}))jTe.call(t,n)&&uue(e,n,t[n]);if(dN)for(var n of dN(t))zTe.call(t,n)&&uue(e,n,t[n]);return e},pit=(e,t)=>{var n={};for(var r in e)jTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&dN)for(var r of dN(e))t.indexOf(r)<0&&zTe.call(e,r)&&(n[r]=e[r]);return n};const mit={spacing:"md",align:"stretch",justify:"top"},Km=A.forwardRef((e,t)=>{const n=Ct("Stack",mit,e),{spacing:r,className:i,align:s,justify:o,unstyled:a}=n,u=pit(n,["spacing","className","align","justify","unstyled"]),{classes:l,cx:c}=fit({spacing:r,align:s,justify:o},{name:"Stack",unstyled:a});return L.createElement(At,hit({className:c(l.root,i),ref:t},u))});Km.displayName="@mantine/core/Stack";function UTe({spacing:e,offset:t,orientation:n,children:r,role:i,unstyled:s}){return n==="horizontal"?L.createElement(Jl,{pt:t,spacing:e,role:i,unstyled:s},r):L.createElement(Km,{pt:t,spacing:e,role:i,unstyled:s},r)}var git=Object.defineProperty,hN=Object.getOwnPropertySymbols,VTe=Object.prototype.hasOwnProperty,HTe=Object.prototype.propertyIsEnumerable,lue=(e,t,n)=>t in e?git(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,cue=(e,t)=>{for(var n in t||(t={}))VTe.call(t,n)&&lue(e,n,t[n]);if(hN)for(var n of hN(t))HTe.call(t,n)&&lue(e,n,t[n]);return e},yit=(e,t)=>{var n={};for(var r in e)VTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&hN)for(var r of hN(e))t.indexOf(r)<0&&HTe.call(e,r)&&(n[r]=e[r]);return n};const vit={orientation:"horizontal",spacing:"lg",size:"sm",offset:"xs"},qTe=A.forwardRef((e,t)=>{const n=Ct("CheckboxGroup",vit,e),{children:r,value:i,defaultValue:s,onChange:o,orientation:a,spacing:u,size:l,wrapperProps:c,offset:f}=n,d=yit(n,["children","value","defaultValue","onChange","orientation","spacing","size","wrapperProps","offset"]),[h,p]=Ta({value:i,defaultValue:s,finalValue:[],onChange:o}),m=g=>{const y=g.currentTarget.value;p(h.includes(y)?h.filter(v=>v!==y):[...h,y])};return L.createElement(tit,{value:{value:h,onChange:m,size:l}},L.createElement(is.Wrapper,cue(cue({labelElement:"div",size:l,__staticSelector:"CheckboxGroup",ref:t},c),d),L.createElement(UTe,{spacing:u,orientation:a,offset:f},r)))});qTe.displayName="@mantine/core/CheckboxGroup";var _it=Object.defineProperty,pN=Object.getOwnPropertySymbols,WTe=Object.prototype.hasOwnProperty,GTe=Object.prototype.propertyIsEnumerable,fue=(e,t,n)=>t in e?_it(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,zz=(e,t)=>{for(var n in t||(t={}))WTe.call(t,n)&&fue(e,n,t[n]);if(pN)for(var n of pN(t))GTe.call(t,n)&&fue(e,n,t[n]);return e},bit=(e,t)=>{var n={};for(var r in e)WTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&pN)for(var r of pN(e))t.indexOf(r)<0&&GTe.call(e,r)&&(n[r]=e[r]);return n};function wit(e){return L.createElement("svg",zz({viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),L.createElement("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}function Eit(e){var t=e,{indeterminate:n}=t,r=bit(t,["indeterminate"]);return n?L.createElement("svg",zz({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 6"},r),L.createElement("rect",{width:"32",height:"6",fill:"currentColor",rx:"3"})):L.createElement(wit,zz({},r))}var xit=Object.defineProperty,Sit=Object.defineProperties,Tit=Object.getOwnPropertyDescriptors,due=Object.getOwnPropertySymbols,Ait=Object.prototype.hasOwnProperty,Cit=Object.prototype.propertyIsEnumerable,hue=(e,t,n)=>t in e?xit(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Iit=(e,t)=>{for(var n in t||(t={}))Ait.call(t,n)&&hue(e,n,t[n]);if(due)for(var n of due(t))Cit.call(t,n)&&hue(e,n,t[n]);return e},Oit=(e,t)=>Sit(e,Tit(t));const Pit={xs:16,sm:20,md:24,lg:30,xl:36},kit={xs:8,sm:10,md:14,lg:16,xl:20};var $it=ht((e,{size:t,radius:n,color:r,transitionDuration:i,labelPosition:s,error:o,indeterminate:a},u)=>{const l=e.fn.size({size:t,sizes:Pit}),c=e.fn.variant({variant:"filled",color:r}),f=e.fn.variant({variant:"filled",color:"red"}).background;return{icon:{ref:u("icon"),color:a?"inherit":e.white,transform:a?"none":"translateY(5px) scale(0.5)",opacity:a?1:0,transitionProperty:"opacity, transform",transitionTimingFunction:"ease",transitionDuration:`${i}ms`,pointerEvents:"none",width:e.fn.size({size:t,sizes:kit}),position:"absolute",zIndex:1,top:0,bottom:0,left:0,right:0,margin:"auto","@media (prefers-reduced-motion)":{transitionDuration:e.respectReducedMotion?"0ms":void 0}},inner:{position:"relative",width:l,height:l,order:s==="left"?2:1},input:Oit(Iit({},e.fn.focusStyles()),{appearance:"none",backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.white,border:`1px solid ${o?f:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[4]}`,width:l,height:l,borderRadius:e.fn.radius(n),padding:0,display:"block",margin:0,transition:`border-color ${i}ms ease, background-color ${i}ms ease`,cursor:e.cursorType,"&:checked":{backgroundColor:c.background,borderColor:c.background,[`& + .${u("icon")}`]:{opacity:1,color:e.white,transform:"translateY(0) scale(1)"}},"&:disabled":{backgroundColor:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2],borderColor:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[3],cursor:"not-allowed",[`& + .${u("icon")}`]:{color:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[5]}}})}});const Rit=$it;var Nit=Object.defineProperty,Dit=Object.defineProperties,Lit=Object.getOwnPropertyDescriptors,pue=Object.getOwnPropertySymbols,Mit=Object.prototype.hasOwnProperty,Fit=Object.prototype.propertyIsEnumerable,mue=(e,t,n)=>t in e?Nit(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Bit=(e,t)=>{for(var n in t||(t={}))Mit.call(t,n)&&mue(e,n,t[n]);if(pue)for(var n of pue(t))Fit.call(t,n)&&mue(e,n,t[n]);return e},jit=(e,t)=>Dit(e,Lit(t));const zit={xs:16,sm:20,md:24,lg:30,xl:36};var Uit=ht((e,{labelPosition:t,size:n})=>({root:{},body:{display:"inline-flex"},labelWrapper:jit(Bit({},e.fn.fontStyles()),{display:"inline-flex",flexDirection:"column",WebkitTapHighlightColor:"transparent",fontSize:e.fn.size({size:n,sizes:e.fontSizes}),lineHeight:`${e.fn.size({size:n,sizes:zit})}px`,color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,cursor:e.cursorType,order:t==="left"?1:2}),description:{marginTop:`calc(${e.spacing.xs}px / 2)`,[t==="left"?"paddingRight":"paddingLeft"]:e.spacing.sm},error:{marginTop:`calc(${e.spacing.xs}px / 2)`,[t==="left"?"paddingRight":"paddingLeft"]:e.spacing.sm},label:{cursor:e.cursorType,[t==="left"?"paddingRight":"paddingLeft"]:e.spacing.sm,"&[data-disabled]":{color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[5]}}})),Vit=Object.defineProperty,mN=Object.getOwnPropertySymbols,YTe=Object.prototype.hasOwnProperty,KTe=Object.prototype.propertyIsEnumerable,gue=(e,t,n)=>t in e?Vit(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Hit=(e,t)=>{for(var n in t||(t={}))YTe.call(t,n)&&gue(e,n,t[n]);if(mN)for(var n of mN(t))KTe.call(t,n)&&gue(e,n,t[n]);return e},qit=(e,t)=>{var n={};for(var r in e)YTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&mN)for(var r of mN(e))t.indexOf(r)<0&&KTe.call(e,r)&&(n[r]=e[r]);return n};function WG(e){var t=e,{__staticSelector:n,className:r,classNames:i,styles:s,unstyled:o,children:a,label:u,description:l,id:c,disabled:f,error:d,size:h,labelPosition:p}=t,m=qit(t,["__staticSelector","className","classNames","styles","unstyled","children","label","description","id","disabled","error","size","labelPosition"]);const{classes:g,cx:y}=Uit({size:h,labelPosition:p},{name:n,styles:s,classNames:i,unstyled:o});return L.createElement(At,Hit({className:y(g.root,r)},m),L.createElement("div",{className:y(g.body)},a,L.createElement("div",{className:g.labelWrapper},u&&L.createElement("label",{className:g.label,"data-disabled":f||void 0,htmlFor:c},u),l&&L.createElement(is.Description,{className:g.description},l),d&&d!=="boolean"&&L.createElement(is.Error,{className:g.error},d))))}WG.displayName="@mantine/core/InlineInput";var Wit=Object.defineProperty,gN=Object.getOwnPropertySymbols,XTe=Object.prototype.hasOwnProperty,QTe=Object.prototype.propertyIsEnumerable,yue=(e,t,n)=>t in e?Wit(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,QO=(e,t)=>{for(var n in t||(t={}))XTe.call(t,n)&&yue(e,n,t[n]);if(gN)for(var n of gN(t))QTe.call(t,n)&&yue(e,n,t[n]);return e},Git=(e,t)=>{var n={};for(var r in e)XTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&gN)for(var r of gN(e))t.indexOf(r)<0&&QTe.call(e,r)&&(n[r]=e[r]);return n};const Yit={size:"sm",transitionDuration:100,icon:Eit,labelPosition:"right"},yN=A.forwardRef((e,t)=>{const n=Ct("Checkbox",Yit,e),{className:r,style:i,sx:s,checked:o,disabled:a,color:u,label:l,indeterminate:c,id:f,size:d,radius:h,wrapperProps:p,children:m,classNames:g,styles:y,transitionDuration:v,icon:_,unstyled:b,labelPosition:E,description:w,error:x}=n,S=Git(n,["className","style","sx","checked","disabled","color","label","indeterminate","id","size","radius","wrapperProps","children","classNames","styles","transitionDuration","icon","unstyled","labelPosition","description","error"]),I=nit(),C=vl(f),{systemStyles:O,rest:z}=yf(S),{classes:N}=Rit({size:(I==null?void 0:I.size)||d,radius:h,color:u,transitionDuration:v,labelPosition:E,error:!!x,indeterminate:c},{name:"Checkbox",classNames:g,styles:y,unstyled:b}),$=I?{checked:I.value.includes(z.value),onChange:I.onChange}:{};return L.createElement(WG,QO(QO({className:r,sx:s,style:i,id:C,size:(I==null?void 0:I.size)||d,labelPosition:E,label:l,description:w,error:x,disabled:a,__staticSelector:"Checkbox",classNames:g,styles:y,unstyled:b,"data-checked":$.checked||void 0},O),p),L.createElement("div",{className:N.inner},L.createElement("input",QO(QO({id:C,ref:t,type:"checkbox",className:N.input,checked:o,disabled:a},z),$)),L.createElement(_,{indeterminate:c,className:N.icon})))});yN.displayName="@mantine/core/Checkbox";yN.Group=qTe;var Kit=ht((e,{fluid:t,size:n,sizes:r})=>({root:{paddingLeft:e.spacing.md,paddingRight:e.spacing.md,maxWidth:t?"100%":e.fn.size({size:n,sizes:r}),marginLeft:"auto",marginRight:"auto"}})),Xit=Object.defineProperty,vN=Object.getOwnPropertySymbols,JTe=Object.prototype.hasOwnProperty,ZTe=Object.prototype.propertyIsEnumerable,vue=(e,t,n)=>t in e?Xit(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Qit=(e,t)=>{for(var n in t||(t={}))JTe.call(t,n)&&vue(e,n,t[n]);if(vN)for(var n of vN(t))ZTe.call(t,n)&&vue(e,n,t[n]);return e},Jit=(e,t)=>{var n={};for(var r in e)JTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&vN)for(var r of vN(e))t.indexOf(r)<0&&ZTe.call(e,r)&&(n[r]=e[r]);return n};const Zit={sizes:{xs:540,sm:720,md:960,lg:1140,xl:1320}},i6=A.forwardRef((e,t)=>{const n=Ct("Container",Zit,e),{className:r,fluid:i,size:s,unstyled:o,sizes:a}=n,u=Jit(n,["className","fluid","size","unstyled","sizes"]),{classes:l,cx:c}=Kit({fluid:i,size:s,sizes:a},{unstyled:o,name:"Container"});return L.createElement(At,Qit({className:c(l.root,r),ref:t},u))});i6.displayName="@mantine/core/Container";function e2e({transitions:e,duration:t=250,exitDuration:n=t,mounted:r,children:i,timingFunction:s,onExit:o,onEntered:a,onEnter:u,onExited:l}){const{transitionDuration:c,transitionStatus:f,transitionTimingFunction:d}=VSe({mounted:r,duration:t,exitDuration:n,timingFunction:s,onExit:o,onEntered:a,onEnter:u,onExited:l});if(c===0)return r?L.createElement(L.Fragment,null,i({})):null;if(f==="exited")return null;const h=Object.keys(e).reduce((p,m)=>(p[m]=USe({duration:e[m].duration,transition:e[m].transition,timingFunction:e[m].timingFunction||d,state:f}),p),{});return L.createElement(L.Fragment,null,i(h))}e2e.displayName="@mantine/core/GroupedTransition";var est=ht((e,{zIndex:t})=>({root:{position:"absolute",top:0,bottom:0,left:0,right:0,zIndex:t}})),tst=Object.defineProperty,nst=Object.defineProperties,rst=Object.getOwnPropertyDescriptors,_N=Object.getOwnPropertySymbols,t2e=Object.prototype.hasOwnProperty,n2e=Object.prototype.propertyIsEnumerable,_ue=(e,t,n)=>t in e?tst(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,o9=(e,t)=>{for(var n in t||(t={}))t2e.call(t,n)&&_ue(e,n,t[n]);if(_N)for(var n of _N(t))n2e.call(t,n)&&_ue(e,n,t[n]);return e},ist=(e,t)=>nst(e,rst(t)),sst=(e,t)=>{var n={};for(var r in e)t2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&_N)for(var r of _N(e))t.indexOf(r)<0&&n2e.call(e,r)&&(n[r]=e[r]);return n};const ost={opacity:.6,color:"#fff",zIndex:Tu("modal"),radius:0,blur:0},r2e=A.forwardRef((e,t)=>{const n=Ct("Overlay",ost,e),{opacity:r,blur:i,color:s,gradient:o,zIndex:a,radius:u,sx:l,unstyled:c,className:f}=n,d=sst(n,["opacity","blur","color","gradient","zIndex","radius","sx","unstyled","className"]),{classes:h,cx:p}=est({zIndex:a},{name:"Overlay",unstyled:c}),m=o?{backgroundImage:o}:{backgroundColor:s},g=y=>L.createElement(At,o9({ref:t,className:p(h.root,f),sx:[v=>ist(o9({},m),{opacity:r,borderRadius:v.fn.size({size:u,sizes:v.radius})}),...P1(l)]},y));return i?L.createElement(At,o9({className:p(h.root,f),sx:[{backdropFilter:`blur(${i}px)`},...P1(l)]},d),g()):g(d)});r2e.displayName="@mantine/core/Overlay";const i2e=r2e,ast={gap:{type:"spacing",property:"gap"},rowGap:{type:"spacing",property:"rowGap"},columnGap:{type:"spacing",property:"columnGap"},align:{type:"default",property:"alignItems"},justify:{type:"default",property:"justifyContent"},wrap:{type:"default",property:"flexWrap"},direction:{type:"default",property:"flexDirection"}};var ust=Object.defineProperty,lst=Object.defineProperties,cst=Object.getOwnPropertyDescriptors,bN=Object.getOwnPropertySymbols,s2e=Object.prototype.hasOwnProperty,o2e=Object.prototype.propertyIsEnumerable,bue=(e,t,n)=>t in e?ust(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,fst=(e,t)=>{for(var n in t||(t={}))s2e.call(t,n)&&bue(e,n,t[n]);if(bN)for(var n of bN(t))o2e.call(t,n)&&bue(e,n,t[n]);return e},dst=(e,t)=>lst(e,cst(t)),hst=(e,t)=>{var n={};for(var r in e)s2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&bN)for(var r of bN(e))t.indexOf(r)<0&&o2e.call(e,r)&&(n[r]=e[r]);return n};const pst={},op=A.forwardRef((e,t)=>{const n=Ct("Flex",pst,e),{gap:r,rowGap:i,columnGap:s,align:o,justify:a,wrap:u,direction:l,sx:c}=n,f=hst(n,["gap","rowGap","columnGap","align","justify","wrap","direction","sx"]);return L.createElement(At,dst(fst({},f),{sx:[{display:"flex"},d=>kz({gap:r,rowGap:i,columnGap:s,align:o,justify:a,wrap:u,direction:l},d,ast),...P1(c)],ref:t}))});op.displayName="@mantine/core/Flex";const a2e=A.createContext(null),mst=a2e.Provider,gst=()=>A.useContext(a2e);var yst=Object.defineProperty,wue=Object.getOwnPropertySymbols,vst=Object.prototype.hasOwnProperty,_st=Object.prototype.propertyIsEnumerable,Eue=(e,t,n)=>t in e?yst(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,bst=(e,t)=>{for(var n in t||(t={}))vst.call(t,n)&&Eue(e,n,t[n]);if(wue)for(var n of wue(t))_st.call(t,n)&&Eue(e,n,t[n]);return e};const GG=(e,t)=>e==="content"?"auto":e==="auto"?"0px":e?`${100/(t/e)}%`:void 0,u2e=(e,t,n)=>n||e==="auto"||e==="content"?"unset":GG(e,t),l2e=(e,t)=>{if(e)return e==="auto"||t?1:0},c2e=(e,t)=>e===0?0:e?`${100/(t/e)}%`:void 0;function wst({sizes:e,offsets:t,orders:n,theme:r,columns:i,grow:s}){return kYe.reduce((o,a)=>(o[`@media (min-width: ${r.breakpoints[a]}px)`]={order:n[a],flexBasis:GG(e[a],i),flexShrink:0,width:e[a]==="content"?"auto":void 0,maxWidth:u2e(e[a],i,s),marginLeft:c2e(t[a],i),flexGrow:l2e(e[a],s)},o),{})}var Est=ht((e,{gutter:t,grow:n,offset:r,offsetXs:i,offsetSm:s,offsetMd:o,offsetLg:a,offsetXl:u,columns:l,span:c,xs:f,sm:d,md:h,lg:p,xl:m,order:g,orderXs:y,orderSm:v,orderMd:_,orderLg:b,orderXl:E})=>({root:bst({boxSizing:"border-box",flexGrow:l2e(c,n),order:g,padding:e.fn.size({size:t,sizes:e.spacing})/2,marginLeft:c2e(r,l),flexBasis:GG(c,l),flexShrink:0,width:c==="content"?"auto":void 0,maxWidth:u2e(c,l,n)},wst({sizes:{xs:f,sm:d,md:h,lg:p,xl:m},offsets:{xs:i,sm:s,md:o,lg:a,xl:u},orders:{xs:y,sm:v,md:_,lg:b,xl:E},theme:e,columns:l,grow:n}))}));const xst=Est;var Sst=Object.defineProperty,wN=Object.getOwnPropertySymbols,f2e=Object.prototype.hasOwnProperty,d2e=Object.prototype.propertyIsEnumerable,xue=(e,t,n)=>t in e?Sst(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Tst=(e,t)=>{for(var n in t||(t={}))f2e.call(t,n)&&xue(e,n,t[n]);if(wN)for(var n of wN(t))d2e.call(t,n)&&xue(e,n,t[n]);return e},Ast=(e,t)=>{var n={};for(var r in e)f2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&wN)for(var r of wN(e))t.indexOf(r)<0&&d2e.call(e,r)&&(n[r]=e[r]);return n};const Cst={};function Ist(e){return e==="auto"||e==="content"?!0:typeof e=="number"&&e>0&&e%1===0}const h2e=A.forwardRef((e,t)=>{const n=Ct("Grid.Col",Cst,e),{children:r,span:i,offset:s,offsetXs:o,offsetSm:a,offsetMd:u,offsetLg:l,offsetXl:c,xs:f,sm:d,md:h,lg:p,xl:m,order:g,orderXs:y,orderSm:v,orderMd:_,orderLg:b,orderXl:E,className:w,id:x,unstyled:S}=n,I=Ast(n,["children","span","offset","offsetXs","offsetSm","offsetMd","offsetLg","offsetXl","xs","sm","md","lg","xl","order","orderXs","orderSm","orderMd","orderLg","orderXl","className","id","unstyled"]),C=gst();if(!C)throw new Error("[@mantine/core] Grid.Col was used outside of Grid context");const O=i||C.columns,{classes:z,cx:N}=xst({gutter:C.gutter,offset:s,offsetXs:o,offsetSm:a,offsetMd:u,offsetLg:l,offsetXl:c,xs:f,sm:d,md:h,lg:p,xl:m,order:g,orderXs:y,orderSm:v,orderMd:_,orderLg:b,orderXl:E,grow:C.grow,columns:C.columns,span:O},{unstyled:S,name:"Col"});return!Ist(O)||O>C.columns?null:L.createElement(At,Tst({className:N(z.root,w),ref:t},I),r)});h2e.displayName="@mantine/core/Col";var Ost=ht((e,{justify:t,align:n,gutter:r})=>({root:{margin:-e.fn.size({size:r,sizes:e.spacing})/2,display:"flex",flexWrap:"wrap",justifyContent:t,alignItems:n}})),Pst=Object.defineProperty,EN=Object.getOwnPropertySymbols,p2e=Object.prototype.hasOwnProperty,m2e=Object.prototype.propertyIsEnumerable,Sue=(e,t,n)=>t in e?Pst(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,kst=(e,t)=>{for(var n in t||(t={}))p2e.call(t,n)&&Sue(e,n,t[n]);if(EN)for(var n of EN(t))m2e.call(t,n)&&Sue(e,n,t[n]);return e},$st=(e,t)=>{var n={};for(var r in e)p2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&EN)for(var r of EN(e))t.indexOf(r)<0&&m2e.call(e,r)&&(n[r]=e[r]);return n};const Rst={gutter:"md",justify:"flex-start",align:"stretch",columns:12},Gu=A.forwardRef((e,t)=>{const n=Ct("Grid",Rst,e),{gutter:r,children:i,grow:s,justify:o,align:a,columns:u,className:l,id:c,unstyled:f}=n,d=$st(n,["gutter","children","grow","justify","align","columns","className","id","unstyled"]),{classes:h,cx:p}=Ost({gutter:r,justify:o,align:a},{unstyled:f,name:"Grid"});return L.createElement(mst,{value:{gutter:r,grow:s,columns:u}},L.createElement(At,kst({className:p(h.root,l),ref:t},d),i))});Gu.Col=h2e;Gu.displayName="@mantine/core/Grid";function Nst({open:e,close:t,openDelay:n,closeDelay:r}){const i=A.useRef(-1),s=A.useRef(-1),o=()=>{window.clearTimeout(i.current),window.clearTimeout(s.current)},a=()=>{o(),n===0?e():i.current=window.setTimeout(e,n)},u=()=>{o(),r===0?t():s.current=window.setTimeout(t,r)};return A.useEffect(()=>o,[]),{openDropdown:a,closeDropdown:u}}var Dst=Object.defineProperty,Tue=Object.getOwnPropertySymbols,Lst=Object.prototype.hasOwnProperty,Mst=Object.prototype.propertyIsEnumerable,Aue=(e,t,n)=>t in e?Dst(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Fst=(e,t)=>{for(var n in t||(t={}))Lst.call(t,n)&&Aue(e,n,t[n]);if(Tue)for(var n of Tue(t))Mst.call(t,n)&&Aue(e,n,t[n]);return e};function Bst(e){return L.createElement("svg",Fst({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),L.createElement("path",{d:"M2.5 1H12.5C13.3284 1 14 1.67157 14 2.5V12.5C14 13.3284 13.3284 14 12.5 14H2.5C1.67157 14 1 13.3284 1 12.5V2.5C1 1.67157 1.67157 1 2.5 1ZM2.5 2C2.22386 2 2 2.22386 2 2.5V8.3636L3.6818 6.6818C3.76809 6.59551 3.88572 6.54797 4.00774 6.55007C4.12975 6.55216 4.24568 6.60372 4.32895 6.69293L7.87355 10.4901L10.6818 7.6818C10.8575 7.50607 11.1425 7.50607 11.3182 7.6818L13 9.3636V2.5C13 2.22386 12.7761 2 12.5 2H2.5ZM2 12.5V9.6364L3.98887 7.64753L7.5311 11.4421L8.94113 13H2.5C2.22386 13 2 12.7761 2 12.5ZM12.5 13H10.155L8.48336 11.153L11 8.6364L13 10.6364V12.5C13 12.7761 12.7761 13 12.5 13ZM6.64922 5.5C6.64922 5.03013 7.03013 4.64922 7.5 4.64922C7.96987 4.64922 8.35078 5.03013 8.35078 5.5C8.35078 5.96987 7.96987 6.35078 7.5 6.35078C7.03013 6.35078 6.64922 5.96987 6.64922 5.5ZM7.5 3.74922C6.53307 3.74922 5.74922 4.53307 5.74922 5.5C5.74922 6.46693 6.53307 7.25078 7.5 7.25078C8.46693 7.25078 9.25078 6.46693 9.25078 5.5C9.25078 4.53307 8.46693 3.74922 7.5 3.74922Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}var jst=Object.defineProperty,zst=Object.defineProperties,Ust=Object.getOwnPropertyDescriptors,Cue=Object.getOwnPropertySymbols,Vst=Object.prototype.hasOwnProperty,Hst=Object.prototype.propertyIsEnumerable,Iue=(e,t,n)=>t in e?jst(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Oue=(e,t)=>{for(var n in t||(t={}))Vst.call(t,n)&&Iue(e,n,t[n]);if(Cue)for(var n of Cue(t))Hst.call(t,n)&&Iue(e,n,t[n]);return e},Pue=(e,t)=>zst(e,Ust(t)),qst=ht((e,{radius:t})=>({root:{},imageWrapper:{position:"relative"},figure:{margin:0},image:Pue(Oue({},e.fn.fontStyles()),{display:"block",width:"100%",height:"100%",border:0,borderRadius:e.fn.size({size:t,sizes:e.radius})}),caption:{color:e.colorScheme==="dark"?e.colors.dark[2]:e.colors.gray[7],marginTop:e.spacing.xs},placeholder:Pue(Oue({},e.fn.cover()),{display:"flex",alignItems:"center",justifyContent:"center",color:e.colorScheme==="dark"?e.colors.dark[2]:e.colors.gray[6],backgroundColor:e.colorScheme==="dark"?e.colors.dark[8]:e.colors.gray[0],borderRadius:e.fn.size({size:t,sizes:e.radius})})})),Wst=Object.defineProperty,xN=Object.getOwnPropertySymbols,g2e=Object.prototype.hasOwnProperty,y2e=Object.prototype.propertyIsEnumerable,kue=(e,t,n)=>t in e?Wst(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,a9=(e,t)=>{for(var n in t||(t={}))g2e.call(t,n)&&kue(e,n,t[n]);if(xN)for(var n of xN(t))y2e.call(t,n)&&kue(e,n,t[n]);return e},Gst=(e,t)=>{var n={};for(var r in e)g2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&xN)for(var r of xN(e))t.indexOf(r)<0&&y2e.call(e,r)&&(n[r]=e[r]);return n};const Yst={fit:"cover",width:"100%",height:"auto",radius:0},xE=A.forwardRef((e,t)=>{const n=Ct("Image",Yst,e),{className:r,alt:i,src:s,fit:o,width:a,height:u,radius:l,imageProps:c,withPlaceholder:f,placeholder:d,imageRef:h,classNames:p,styles:m,caption:g,unstyled:y,style:v}=n,_=Gst(n,["className","alt","src","fit","width","height","radius","imageProps","withPlaceholder","placeholder","imageRef","classNames","styles","caption","unstyled","style"]),{classes:b,cx:E}=qst({radius:l},{classNames:p,styles:m,unstyled:y,name:"Image"}),[w,x]=A.useState(!s),S=f&&w;return _s(()=>{x(!1)},[s]),L.createElement(At,a9({className:E(b.root,r),ref:t,style:a9({width:a},v)},_),L.createElement("figure",{className:b.figure},L.createElement("div",{className:b.imageWrapper},L.createElement("img",a9({className:b.image,src:s,alt:i,style:{objectFit:o,width:a,height:u},ref:h,onError:I=>{x(!0),typeof(c==null?void 0:c.onError)=="function"&&c.onError(I)}},c)),S&&L.createElement("div",{className:b.placeholder,title:i},d||L.createElement("div",null,L.createElement(Bst,{style:{width:40,height:40}})))),!!g&&L.createElement(Rt,{component:"figcaption",size:"sm",align:"center",className:b.caption},g)))});xE.displayName="@mantine/core/Image";function Kst(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,s;for(s=0;s<r.length;s++)i=r[s],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}var Xst=A.useLayoutEffect,Qst=function(t){var n=A.useRef(t);return Xst(function(){n.current=t}),n},$ue=function(t,n){if(typeof t=="function"){t(n);return}t.current=n},Jst=function(t,n){var r=A.useRef();return A.useCallback(function(i){t.current=i,r.current&&$ue(r.current,null),r.current=n,n&&$ue(n,i)},[n])},Rue={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},Nue=function(t){Object.keys(Rue).forEach(function(n){t.style.setProperty(n,Rue[n],"important")})},Nu=null,Zst=function(t,n){var r=t.scrollHeight;return n.sizingStyle.boxSizing==="border-box"?r+n.borderSize:r-n.paddingSize};function eot(e,t,n,r){n===void 0&&(n=1),r===void 0&&(r=1/0),Nu||(Nu=document.createElement("textarea"),Nu.setAttribute("tabindex","-1"),Nu.setAttribute("aria-hidden","true"),Nue(Nu)),Nu.parentNode===null&&document.body.appendChild(Nu);var i=e.paddingSize,s=e.borderSize,o=e.sizingStyle,a=o.boxSizing;Object.keys(o).forEach(function(d){var h=d;Nu.style[h]=o[h]}),Nue(Nu),Nu.value=t;var u=Zst(Nu,e);Nu.value="x";var l=Nu.scrollHeight-i,c=l*n;a==="border-box"&&(c=c+i+s),u=Math.max(c,u);var f=l*r;return a==="border-box"&&(f=f+i+s),u=Math.min(f,u),[u,l]}var Due=function(){},tot=function(t,n){return t.reduce(function(r,i){return r[i]=n[i],r},{})},not=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],rot=!!document.documentElement.currentStyle,iot=function(t){var n=window.getComputedStyle(t);if(n===null)return null;var r=tot(not,n),i=r.boxSizing;if(i==="")return null;rot&&i==="border-box"&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var s=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),o=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:s,borderSize:o}},sot=function(t){var n=Qst(t);A.useLayoutEffect(function(){var r=function(s){n.current(s)};return window.addEventListener("resize",r),function(){window.removeEventListener("resize",r)}},[])},oot=function(t,n){var r=t.cacheMeasurements,i=t.maxRows,s=t.minRows,o=t.onChange,a=o===void 0?Due:o,u=t.onHeightChange,l=u===void 0?Due:u,c=Kst(t,["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"]),f=c.value!==void 0,d=A.useRef(null),h=Jst(d,n),p=A.useRef(0),m=A.useRef(),g=function(){var _=d.current,b=r&&m.current?m.current:iot(_);if(b){m.current=b;var E=eot(b,_.value||_.placeholder||"x",s,i),w=E[0],x=E[1];p.current!==w&&(p.current=w,_.style.setProperty("height",w+"px","important"),l(w,{rowHeight:x}))}},y=function(_){f||g(),a(_)};return A.useLayoutEffect(g),sot(g),A.createElement("textarea",di({},c,{onChange:y,ref:h}))},aot=A.forwardRef(oot);const uot=aot;var lot=ht(e=>({input:{paddingTop:e.spacing.xs,paddingBottom:e.spacing.xs}})),cot=Object.defineProperty,fot=Object.defineProperties,dot=Object.getOwnPropertyDescriptors,SN=Object.getOwnPropertySymbols,v2e=Object.prototype.hasOwnProperty,_2e=Object.prototype.propertyIsEnumerable,Lue=(e,t,n)=>t in e?cot(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,i_=(e,t)=>{for(var n in t||(t={}))v2e.call(t,n)&&Lue(e,n,t[n]);if(SN)for(var n of SN(t))_2e.call(t,n)&&Lue(e,n,t[n]);return e},u9=(e,t)=>fot(e,dot(t)),hot=(e,t)=>{var n={};for(var r in e)v2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&SN)for(var r of SN(e))t.indexOf(r)<0&&_2e.call(e,r)&&(n[r]=e[r]);return n};const pot={autosize:!1,size:"sm",__staticSelector:"Textarea"},b2e=A.forwardRef((e,t)=>{const n=Ct("Textarea",pot,e),{autosize:r,maxRows:i,minRows:s,label:o,error:a,description:u,id:l,className:c,required:f,style:d,wrapperProps:h,classNames:p,styles:m,size:g,__staticSelector:y,sx:v,errorProps:_,descriptionProps:b,labelProps:E,inputWrapperOrder:w,inputContainer:x,unstyled:S,withAsterisk:I}=n,C=hot(n,["autosize","maxRows","minRows","label","error","description","id","className","required","style","wrapperProps","classNames","styles","size","__staticSelector","sx","errorProps","descriptionProps","labelProps","inputWrapperOrder","inputContainer","unstyled","withAsterisk"]),O=vl(l),{classes:z,cx:N}=lot(),{systemStyles:$,rest:D}=yf(C),B=i_({required:f,ref:t,invalid:!!a,id:O,classNames:u9(i_({},p),{input:N(z.input,p==null?void 0:p.input)}),styles:m,__staticSelector:y,size:g,multiline:!0,unstyled:S},D);return L.createElement(is.Wrapper,i_(i_({label:o,error:a,id:O,description:u,required:f,style:d,className:c,classNames:p,styles:m,size:g,__staticSelector:y,sx:v,errorProps:_,labelProps:E,descriptionProps:b,inputContainer:x,inputWrapperOrder:w,unstyled:S,withAsterisk:I},$),h),r?L.createElement(is,u9(i_({},B),{component:uot,maxRows:i,minRows:s})):L.createElement(is,u9(i_({},B),{component:"textarea",rows:s})))});b2e.displayName="@mantine/core/Textarea";const w2e=A.createContext(null);function mot(){return A.useContext(w2e)||{}}var got=ht((e,{spacing:t,center:n},r)=>({itemWrapper:{ref:r("itemWrapper"),display:"inline-flex",flexDirection:"column",whiteSpace:"normal"},item:{whiteSpace:"nowrap",lineHeight:n?1:e.lineHeight,"&:not(:first-of-type)":{marginTop:e.fn.size({size:t,sizes:e.spacing})}},withIcon:{listStyle:"none",[`& .${r("itemWrapper")}`]:{display:"inline-flex",alignItems:n?"center":"flex-start",flexDirection:"row"}},itemIcon:{display:"inline-block",verticalAlign:"middle",marginRight:e.spacing.sm}})),yot=Object.defineProperty,TN=Object.getOwnPropertySymbols,E2e=Object.prototype.hasOwnProperty,x2e=Object.prototype.propertyIsEnumerable,Mue=(e,t,n)=>t in e?yot(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,vot=(e,t)=>{for(var n in t||(t={}))E2e.call(t,n)&&Mue(e,n,t[n]);if(TN)for(var n of TN(t))x2e.call(t,n)&&Mue(e,n,t[n]);return e},_ot=(e,t)=>{var n={};for(var r in e)E2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&TN)for(var r of TN(e))t.indexOf(r)<0&&x2e.call(e,r)&&(n[r]=e[r]);return n};function S2e(e){var t=e,{className:n,children:r,icon:i}=t,s=_ot(t,["className","children","icon"]);const{icon:o,spacing:a,center:u,listStyleType:l,size:c,withPadding:f}=mot(),{classNames:d,styles:h,unstyled:p}=RC(),m=i||o,{classes:g,cx:y}=got({withPadding:f,size:c,listStyleType:l,center:u,spacing:a},{classNames:d,styles:h,unstyled:p,name:"List"});return L.createElement(At,vot({component:"li",className:y(g.item,{[g.withIcon]:m},n)},s),L.createElement("div",{className:g.itemWrapper},m&&L.createElement("span",{className:g.itemIcon},m),L.createElement("span",null,r)))}S2e.displayName="@mantine/core/ListItem";var bot=Object.defineProperty,wot=Object.defineProperties,Eot=Object.getOwnPropertyDescriptors,Fue=Object.getOwnPropertySymbols,xot=Object.prototype.hasOwnProperty,Sot=Object.prototype.propertyIsEnumerable,Bue=(e,t,n)=>t in e?bot(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Tot=(e,t)=>{for(var n in t||(t={}))xot.call(t,n)&&Bue(e,n,t[n]);if(Fue)for(var n of Fue(t))Sot.call(t,n)&&Bue(e,n,t[n]);return e},Aot=(e,t)=>wot(e,Eot(t)),Cot=ht((e,{withPadding:t,size:n,listStyleType:r})=>({root:Aot(Tot({},e.fn.fontStyles()),{listStyleType:r,color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,fontSize:e.fn.size({size:n,sizes:e.fontSizes}),lineHeight:e.lineHeight,margin:0,paddingLeft:t?e.spacing.xl:0,listStylePosition:"inside"})})),Iot=Object.defineProperty,AN=Object.getOwnPropertySymbols,T2e=Object.prototype.hasOwnProperty,A2e=Object.prototype.propertyIsEnumerable,jue=(e,t,n)=>t in e?Iot(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Oot=(e,t)=>{for(var n in t||(t={}))T2e.call(t,n)&&jue(e,n,t[n]);if(AN)for(var n of AN(t))A2e.call(t,n)&&jue(e,n,t[n]);return e},Pot=(e,t)=>{var n={};for(var r in e)T2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&AN)for(var r of AN(e))t.indexOf(r)<0&&A2e.call(e,r)&&(n[r]=e[r]);return n};const kot={type:"unordered",size:"md",spacing:0},lw=A.forwardRef((e,t)=>{const n=Ct("List",kot,e),{children:r,type:i,size:s,listStyleType:o,withPadding:a,center:u,spacing:l,icon:c,className:f,styles:d,classNames:h,unstyled:p}=n,m=Pot(n,["children","type","size","listStyleType","withPadding","center","spacing","icon","className","styles","classNames","unstyled"]),{classes:g,cx:y}=Cot({withPadding:a,size:s,listStyleType:o,center:u,spacing:l},{classNames:h,styles:d,name:"List",unstyled:p});return L.createElement(jEe,{classNames:h,styles:d,unstyled:p},L.createElement(w2e.Provider,{value:{spacing:l,center:u,icon:c,listStyleType:o,size:s,withPadding:a}},L.createElement(At,Oot({component:i==="unordered"?"ul":"ol",className:y(g.root,f),ref:t},m),r)))});lw.Item=S2e;lw.displayName="@mantine/core/List";var $ot=ht({root:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"}}),Rot=Object.defineProperty,Not=Object.defineProperties,Dot=Object.getOwnPropertyDescriptors,CN=Object.getOwnPropertySymbols,C2e=Object.prototype.hasOwnProperty,I2e=Object.prototype.propertyIsEnumerable,zue=(e,t,n)=>t in e?Rot(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,JO=(e,t)=>{for(var n in t||(t={}))C2e.call(t,n)&&zue(e,n,t[n]);if(CN)for(var n of CN(t))I2e.call(t,n)&&zue(e,n,t[n]);return e},Lot=(e,t)=>Not(e,Dot(t)),Mot=(e,t)=>{var n={};for(var r in e)C2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&CN)for(var r of CN(e))t.indexOf(r)<0&&I2e.call(e,r)&&(n[r]=e[r]);return n};const Fot={overlayOpacity:.75,transitionDuration:0,zIndex:Tu("overlay")},O2e=A.forwardRef((e,t)=>{const n=Ct("LoadingOverlay",Fot,e),{className:r,visible:i,loaderProps:s,overlayOpacity:o,overlayColor:a,transitionDuration:u,exitTransitionDuration:l,zIndex:c,style:f,loader:d,radius:h,overlayBlur:p,unstyled:m}=n,g=Mot(n,["className","visible","loaderProps","overlayOpacity","overlayColor","transitionDuration","exitTransitionDuration","zIndex","style","loader","radius","overlayBlur","unstyled"]),{classes:y,cx:v,theme:_}=$ot(null,{name:"LoadingOverlay",unstyled:m}),b=`calc(${c} + 1)`;return L.createElement(FC,{duration:u,exitDuration:l,mounted:i,transition:"fade"},E=>L.createElement(At,JO({className:v(y.root,r),style:Lot(JO(JO({},E),f),{zIndex:c}),ref:t},g),d?L.createElement("div",{style:{zIndex:b}},d):L.createElement(T0,JO({style:{zIndex:b}},s)),L.createElement(i2e,{opacity:o,zIndex:c,radius:h,blur:p,unstyled:m,color:a||(_.colorScheme==="dark"?_.colors.dark[5]:_.white)})))});O2e.displayName="@mantine/core/LoadingOverlay";var Bot=ht(e=>({divider:{margin:`calc(${e.spacing.xs}px / 2) -5px`,borderTop:`1px solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2]}`}})),jot=Object.defineProperty,IN=Object.getOwnPropertySymbols,P2e=Object.prototype.hasOwnProperty,k2e=Object.prototype.propertyIsEnumerable,Uue=(e,t,n)=>t in e?jot(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,zot=(e,t)=>{for(var n in t||(t={}))P2e.call(t,n)&&Uue(e,n,t[n]);if(IN)for(var n of IN(t))k2e.call(t,n)&&Uue(e,n,t[n]);return e},Uot=(e,t)=>{var n={};for(var r in e)P2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&IN)for(var r of IN(e))t.indexOf(r)<0&&k2e.call(e,r)&&(n[r]=e[r]);return n};function $2e(e){var t=e,{children:n,className:r}=t,i=Uot(t,["children","className"]);const{classNames:s,styles:o,unstyled:a}=RC(),{classes:u,cx:l}=Bot(null,{name:"Menu",classNames:s,styles:o,unstyled:a});return L.createElement(At,zot({className:l(u.divider,r)},i))}$2e.displayName="@mantine/core/MenuDivider";const R2e={context:"Menu component was not found in the tree",children:"Menu.Target component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported"},[Vot,YG]=hEe(R2e.context);var Hot=Object.defineProperty,ON=Object.getOwnPropertySymbols,N2e=Object.prototype.hasOwnProperty,D2e=Object.prototype.propertyIsEnumerable,Vue=(e,t,n)=>t in e?Hot(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,qot=(e,t)=>{for(var n in t||(t={}))N2e.call(t,n)&&Vue(e,n,t[n]);if(ON)for(var n of ON(t))D2e.call(t,n)&&Vue(e,n,t[n]);return e},Wot=(e,t)=>{var n={};for(var r in e)N2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&ON)for(var r of ON(e))t.indexOf(r)<0&&D2e.call(e,r)&&(n[r]=e[r]);return n};function L2e(e){var t=e,{children:n,onMouseEnter:r,onMouseLeave:i}=t,s=Wot(t,["children","onMouseEnter","onMouseLeave"]);const o=A.useRef(),a=YG(),u=f=>{(f.key==="ArrowUp"||f.key==="ArrowDown")&&(f.preventDefault(),o.current.querySelectorAll("[data-menu-item]")[0].focus())},l=qh(r,()=>a.trigger==="hover"&&a.openDropdown()),c=qh(i,()=>a.trigger==="hover"&&a.closeDropdown());return L.createElement(Vi.Dropdown,qot({onMouseEnter:l,onMouseLeave:c,role:"menu","aria-orientation":"vertical"},s),L.createElement("div",{tabIndex:-1,"data-menu-dropdown":!0,"data-autofocus":!0,onKeyDown:u,ref:o,style:{outline:0}},n))}L2e.displayName="@mantine/core/MenuDropdown";var Got=Object.defineProperty,Yot=Object.defineProperties,Kot=Object.getOwnPropertyDescriptors,Hue=Object.getOwnPropertySymbols,Xot=Object.prototype.hasOwnProperty,Qot=Object.prototype.propertyIsEnumerable,que=(e,t,n)=>t in e?Got(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Jot=(e,t)=>{for(var n in t||(t={}))Xot.call(t,n)&&que(e,n,t[n]);if(Hue)for(var n of Hue(t))Qot.call(t,n)&&que(e,n,t[n]);return e},Zot=(e,t)=>Yot(e,Kot(t)),eat=ht((e,{color:t,radius:n})=>({item:Zot(Jot({},e.fn.fontStyles()),{WebkitTapHighlightColor:"transparent",fontSize:e.fontSizes.sm,border:0,backgroundColor:"transparent",outline:0,width:"100%",textAlign:"left",textDecoration:"none",boxSizing:"border-box",padding:`${e.spacing.xs}px ${e.spacing.sm}px`,cursor:"pointer",borderRadius:e.fn.radius(n),color:t?e.fn.variant({variant:"filled",primaryFallback:!1,color:t}).background:e.colorScheme==="dark"?e.colors.dark[0]:e.black,display:"flex",alignItems:"center","&:disabled":{color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[5],pointerEvents:"none",userSelect:"none"},"&[data-hovered]":{backgroundColor:t?e.fn.variant({variant:"light",color:t}).background:e.colorScheme==="dark"?e.fn.rgba(e.colors.dark[3],.35):e.colors.gray[0]}}),itemLabel:{flex:1},itemIcon:{display:"flex",justifyContent:"center",alignItems:"center",marginRight:e.spacing.xs},itemRightSection:{}}));const tat=eat;var nat=Object.defineProperty,rat=Object.defineProperties,iat=Object.getOwnPropertyDescriptors,PN=Object.getOwnPropertySymbols,M2e=Object.prototype.hasOwnProperty,F2e=Object.prototype.propertyIsEnumerable,Wue=(e,t,n)=>t in e?nat(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,sat=(e,t)=>{for(var n in t||(t={}))M2e.call(t,n)&&Wue(e,n,t[n]);if(PN)for(var n of PN(t))F2e.call(t,n)&&Wue(e,n,t[n]);return e},oat=(e,t)=>rat(e,iat(t)),aat=(e,t)=>{var n={};for(var r in e)M2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&PN)for(var r of PN(e))t.indexOf(r)<0&&F2e.call(e,r)&&(n[r]=e[r]);return n};const B2e=A.forwardRef((e,t)=>{var n=e,{children:r,className:i,color:s,closeMenuOnClick:o,icon:a,rightSection:u}=n,l=aat(n,["children","className","color","closeMenuOnClick","icon","rightSection"]);const c=YG(),{classNames:f,styles:d,unstyled:h}=RC(),{classes:p,cx:m,theme:g}=tat({radius:c.radius,color:s},{name:"Menu",classNames:f,styles:d,unstyled:h}),y=A.useRef(),v=c.getItemIndex(y.current),_=l,b=qh(_.onMouseLeave,()=>c.setHovered(-1)),E=qh(_.onMouseEnter,()=>c.setHovered(c.getItemIndex(y.current))),w=qh(_.onClick,()=>{typeof o=="boolean"?o&&c.closeDropdownImmediately():c.closeOnItemClick&&c.closeDropdownImmediately()}),x=qh(_.onFocus,()=>c.setHovered(c.getItemIndex(y.current)));return L.createElement(At,oat(sat({component:"button",type:"button"},l),{tabIndex:-1,onFocus:x,className:m(p.item,i),ref:Ts(y,t),role:"menuitem","data-menu-item":!0,"data-hovered":c.hovered===v?!0:void 0,onMouseEnter:E,onMouseLeave:b,onClick:w,onKeyDown:QGe({siblingSelector:"[data-menu-item]",parentSelector:"[data-menu-dropdown]",activateOnFocus:!1,loop:c.loop,dir:g.dir,orientation:"vertical",onKeyDown:_.onKeydown})}),a&&L.createElement("div",{className:p.itemIcon},a),r&&L.createElement("div",{className:p.itemLabel},r),u&&L.createElement("div",{className:p.itemRightSection},u))});B2e.displayName="@mantine/core/MenuItem";const uat=B2e;var lat=ht(e=>({label:{color:e.colorScheme==="dark"?e.colors.dark[2]:e.colors.gray[6],fontWeight:500,fontSize:e.fontSizes.xs,padding:`calc(${e.spacing.xs}px / 2) ${e.spacing.sm}px`,cursor:"default"}})),cat=Object.defineProperty,kN=Object.getOwnPropertySymbols,j2e=Object.prototype.hasOwnProperty,z2e=Object.prototype.propertyIsEnumerable,Gue=(e,t,n)=>t in e?cat(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,fat=(e,t)=>{for(var n in t||(t={}))j2e.call(t,n)&&Gue(e,n,t[n]);if(kN)for(var n of kN(t))z2e.call(t,n)&&Gue(e,n,t[n]);return e},dat=(e,t)=>{var n={};for(var r in e)j2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&kN)for(var r of kN(e))t.indexOf(r)<0&&z2e.call(e,r)&&(n[r]=e[r]);return n};function U2e(e){var t=e,{children:n,className:r}=t,i=dat(t,["children","className"]);const{classNames:s,styles:o,unstyled:a}=RC(),{classes:u,cx:l}=lat(null,{name:"Menu",classNames:s,styles:o,unstyled:a});return L.createElement(Rt,fat({className:l(u.label,r)},i),n)}U2e.displayName="@mantine/core/MenuLabel";var hat=Object.defineProperty,$N=Object.getOwnPropertySymbols,V2e=Object.prototype.hasOwnProperty,H2e=Object.prototype.propertyIsEnumerable,Yue=(e,t,n)=>t in e?hat(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,pat=(e,t)=>{for(var n in t||(t={}))V2e.call(t,n)&&Yue(e,n,t[n]);if($N)for(var n of $N(t))H2e.call(t,n)&&Yue(e,n,t[n]);return e},mat=(e,t)=>{var n={};for(var r in e)V2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&$N)for(var r of $N(e))t.indexOf(r)<0&&H2e.call(e,r)&&(n[r]=e[r]);return n};const q2e=A.forwardRef((e,t)=>{var n=e,{children:r,refProp:i="ref"}=n,s=mat(n,["children","refProp"]);if(!PC(r))throw new Error(R2e.children);const o=YG(),a=qh(r.props.onClick,()=>o.trigger==="click"&&o.toggleDropdown()),u=qh(r.props.onMouseEnter,()=>o.trigger==="hover"&&o.openDropdown()),l=qh(r.props.onMouseLeave,()=>o.trigger==="hover"&&o.closeDropdown());return L.createElement(Vi.Target,pat({refProp:i,popupType:"menu",ref:t},s),A.cloneElement(r,{onClick:a,onMouseEnter:u,onMouseLeave:l,"data-expanded":o.opened?!0:void 0}))});q2e.displayName="@mantine/core/MenuTarget";var gat=ht({dropdown:{padding:4}}),yat=Object.defineProperty,vat=Object.defineProperties,_at=Object.getOwnPropertyDescriptors,RN=Object.getOwnPropertySymbols,W2e=Object.prototype.hasOwnProperty,G2e=Object.prototype.propertyIsEnumerable,Kue=(e,t,n)=>t in e?yat(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Xue=(e,t)=>{for(var n in t||(t={}))W2e.call(t,n)&&Kue(e,n,t[n]);if(RN)for(var n of RN(t))G2e.call(t,n)&&Kue(e,n,t[n]);return e},Que=(e,t)=>vat(e,_at(t)),bat=(e,t)=>{var n={};for(var r in e)W2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&RN)for(var r of RN(e))t.indexOf(r)<0&&G2e.call(e,r)&&(n[r]=e[r]);return n};const wat={closeOnItemClick:!0,loop:!0,trigger:"click",openDelay:0,closeDelay:100};function $l(e){const t=Ct("Menu",wat,e),{children:n,onOpen:r,onClose:i,opened:s,defaultOpened:o,onChange:a,closeOnItemClick:u,loop:l,closeOnEscape:c,trigger:f,openDelay:d,closeDelay:h,classNames:p,styles:m,unstyled:g,radius:y}=t,v=bat(t,["children","onOpen","onClose","opened","defaultOpened","onChange","closeOnItemClick","loop","closeOnEscape","trigger","openDelay","closeDelay","classNames","styles","unstyled","radius"]),{classes:_,cx:b}=gat(),[E,{setHovered:w,resetHovered:x}]=tYe(),[S,I]=Ta({value:s,defaultValue:o,finalValue:!1,onChange:a}),C=()=>{I(!1),S&&(i==null||i())},O=()=>{I(!0),!S&&(r==null||r())},z=()=>S?C():O(),{openDropdown:N,closeDropdown:$}=Nst({open:O,close:C,closeDelay:h,openDelay:d}),D=B=>JGe("[data-menu-item]","[data-menu-dropdown]",B);return _s(()=>{x()},[S]),L.createElement(Vot,{value:{opened:S,toggleDropdown:z,getItemIndex:D,hovered:E,setHovered:w,closeOnItemClick:u,closeDropdown:f==="click"?C:$,openDropdown:f==="click"?O:N,closeDropdownImmediately:C,loop:l,trigger:f,radius:y}},L.createElement(Vi,Que(Xue({},v),{radius:y,opened:S,onChange:I,defaultOpened:o,trapFocus:f==="click",closeOnEscape:c&&f==="click",__staticSelector:"Menu",classNames:Que(Xue({},p),{dropdown:b(_.dropdown,p==null?void 0:p.dropdown)}),styles:m,unstyled:g,onClose:C,onOpen:O}),n))}$l.displayName="@mantine/core/Menu";$l.Item=uat;$l.Label=U2e;$l.Dropdown=L2e;$l.Target=q2e;$l.Divider=$2e;var Eat=Object.defineProperty,Jue=Object.getOwnPropertySymbols,xat=Object.prototype.hasOwnProperty,Sat=Object.prototype.propertyIsEnumerable,Zue=(e,t,n)=>t in e?Eat(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Tat=(e,t)=>{for(var n in t||(t={}))xat.call(t,n)&&Zue(e,n,t[n]);if(Jue)for(var n of Jue(t))Sat.call(t,n)&&Zue(e,n,t[n]);return e};const Aat={xs:320,sm:380,md:440,lg:620,xl:780};function Cat(e){return e?{position:"absolute",top:0,left:0,right:0,bottom:0,maxHeight:"100vh",overflowY:"auto"}:{}}var Iat=ht((e,{overflow:t,size:n,centered:r,zIndex:i,fullScreen:s})=>({close:{},overlay:{display:s?"none":void 0},root:{position:"fixed",zIndex:i,top:0,left:0,right:0,bottom:0},inner:{position:"absolute",top:0,left:0,right:0,bottom:0,overflowY:"auto",padding:s?0:`${e.spacing.xl*2}px ${e.spacing.md}px`,display:"flex",justifyContent:"center",alignItems:r?"center":"flex-start"},title:{marginRight:e.spacing.md,textOverflow:"ellipsis",display:"block",wordBreak:"break-word"},modal:Tat({position:"relative",width:s?"100vw":e.fn.size({sizes:Aat,size:n}),borderRadius:s?0:void 0,outline:0,backgroundColor:e.colorScheme==="dark"?e.colors.dark[7]:e.white,marginTop:r?"auto":void 0,marginBottom:r?"auto":void 0,zIndex:1},Cat(s)),header:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:e.spacing.md,marginRight:-9},body:{maxHeight:t==="inside"?"calc(100vh - 185px)":null,overflowY:t==="inside"?"auto":null,wordBreak:"break-word"}})),Oat=Object.defineProperty,NN=Object.getOwnPropertySymbols,Y2e=Object.prototype.hasOwnProperty,K2e=Object.prototype.propertyIsEnumerable,ele=(e,t,n)=>t in e?Oat(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Pat=(e,t)=>{for(var n in t||(t={}))Y2e.call(t,n)&&ele(e,n,t[n]);if(NN)for(var n of NN(t))K2e.call(t,n)&&ele(e,n,t[n]);return e},kat=(e,t)=>{var n={};for(var r in e)Y2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&NN)for(var r of NN(e))t.indexOf(r)<0&&K2e.call(e,r)&&(n[r]=e[r]);return n};const $at={size:"md",transitionDuration:250,overflow:"outside",padding:"lg",shadow:"lg",closeOnClickOutside:!0,closeOnEscape:!0,trapFocus:!0,withCloseButton:!0,withinPortal:!0,lockScroll:!0,withFocusReturn:!0,overlayBlur:0,zIndex:Tu("modal"),exitTransitionDuration:0};function BC(e){const t=Ct("Modal",$at,e),{className:n,opened:r,title:i,onClose:s,children:o,withCloseButton:a,overlayOpacity:u,size:l,transitionDuration:c,exitTransitionDuration:f,closeButtonLabel:d,overlayColor:h,overflow:p,transition:m,padding:g,shadow:y,radius:v,id:_,classNames:b,styles:E,closeOnClickOutside:w,trapFocus:x,closeOnEscape:S,centered:I,target:C,withinPortal:O,zIndex:z,overlayBlur:N,transitionTimingFunction:$,fullScreen:D,unstyled:B,lockScroll:V,withFocusReturn:j}=t,G=kat(t,["className","opened","title","onClose","children","withCloseButton","overlayOpacity","size","transitionDuration","exitTransitionDuration","closeButtonLabel","overlayColor","overflow","transition","padding","shadow","radius","id","classNames","styles","closeOnClickOutside","trapFocus","closeOnEscape","centered","target","withinPortal","zIndex","overlayBlur","transitionTimingFunction","fullScreen","unstyled","lockScroll","withFocusReturn"]),U=vl(_),P=`${U}-title`,k=`${U}-body`,{classes:H,cx:M,theme:F}=Iat({size:l,overflow:p,centered:I,zIndex:z,fullScreen:D},{unstyled:B,classNames:b,styles:E,name:"Modal"}),J=GEe(x&&r),se=A.useRef(null),ae=Ts(J,se),ce=typeof u=="number"?u:F.colorScheme==="dark"?.85:.75;EXe(V&&r);const le=Fe=>{!x&&Fe.key==="Escape"&&S&&s()};A.useEffect(()=>{if(!x)return window.addEventListener("keydown",le),()=>window.removeEventListener("keydown",le)},[x]),VEe({opened:r,shouldReturnFocus:x&&j});const ge=A.useRef(null);Pz("mousedown",Fe=>{ge.current=Fe.target});const ue=()=>{ge.current===se.current&&w&&s()};return L.createElement(NC,{withinPortal:O,target:C},L.createElement(e2e,{mounted:r,duration:c,exitDuration:f,timingFunction:$,transitions:{modal:{duration:c,transition:m||(D?"fade":"pop")},overlay:{duration:c/2,transition:"fade",timingFunction:"ease"}}},Fe=>L.createElement(L.Fragment,null,L.createElement(At,Pat({id:U,className:M(H.root,n)},G),L.createElement("div",{style:Fe.overlay},L.createElement(i2e,{className:H.overlay,sx:{position:"fixed"},zIndex:0,blur:N,color:h||(F.colorScheme==="dark"?F.colors.dark[9]:F.black),opacity:ce,unstyled:B})),L.createElement("div",{role:"presentation",className:H.inner,onClick:ue,onKeyDown:ke=>{var Ge;((Ge=ke.target)==null?void 0:Ge.getAttribute("data-mantine-stop-propagation"))!=="true"&&ke.key==="Escape"&&S&&s()},ref:ae},L.createElement(TTe,{className:H.modal,shadow:y,p:g,radius:v,role:"dialog","aria-labelledby":P,"aria-describedby":k,"aria-modal":!0,tabIndex:-1,style:Fe.modal,unstyled:B,onClick:ke=>ke.stopPropagation()},(i||a)&&L.createElement("div",{className:H.header},L.createElement(Rt,{id:P,className:H.title},i),a&&L.createElement(bv,{iconSize:16,onClick:s,"aria-label":d,className:H.close})),L.createElement("div",{id:k,className:H.body},o)))))))}BC.displayName="@mantine/core/Modal";const Rat={xs:16,sm:22,md:26,lg:30,xl:36},Nat={xs:10,sm:12,md:14,lg:16,xl:18};var Dat=ht((e,{size:t,disabled:n,radius:r,readOnly:i,variant:s})=>({defaultValue:{display:"flex",alignItems:"center",backgroundColor:n?e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[3]:e.colorScheme==="dark"?e.colors.dark[7]:s==="filled"?e.white:e.colors.gray[1],color:n?e.colorScheme==="dark"?e.colors.dark[1]:e.colors.gray[7]:e.colorScheme==="dark"?e.colors.dark[0]:e.colors.gray[7],height:e.fn.size({size:t,sizes:Rat}),paddingLeft:e.fn.size({size:t,sizes:e.spacing}),paddingRight:n||i?e.fn.size({size:t,sizes:e.spacing}):0,fontWeight:500,fontSize:e.fn.size({size:t,sizes:Nat}),borderRadius:e.fn.size({size:r,sizes:e.radius}),cursor:n?"not-allowed":"default",userSelect:"none",maxWidth:"calc(100% - 20px)"},defaultValueRemove:{color:e.colorScheme==="dark"?e.colors.dark[0]:e.colors.gray[7],marginLeft:e.fn.size({size:t,sizes:e.spacing})/6},defaultValueLabel:{display:"block",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}})),Lat=Object.defineProperty,DN=Object.getOwnPropertySymbols,X2e=Object.prototype.hasOwnProperty,Q2e=Object.prototype.propertyIsEnumerable,tle=(e,t,n)=>t in e?Lat(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Mat=(e,t)=>{for(var n in t||(t={}))X2e.call(t,n)&&tle(e,n,t[n]);if(DN)for(var n of DN(t))Q2e.call(t,n)&&tle(e,n,t[n]);return e},Fat=(e,t)=>{var n={};for(var r in e)X2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&DN)for(var r of DN(e))t.indexOf(r)<0&&Q2e.call(e,r)&&(n[r]=e[r]);return n};const nle={xs:16,sm:22,md:24,lg:26,xl:30};function J2e(e){var t=e,{label:n,classNames:r,styles:i,className:s,onRemove:o,disabled:a,readOnly:u,size:l,radius:c="sm",variant:f}=t,d=Fat(t,["label","classNames","styles","className","onRemove","disabled","readOnly","size","radius","variant"]);const{classes:h,cx:p}=Dat({size:l,disabled:a,readOnly:u,radius:c,variant:f},{classNames:r,styles:i,name:"MultiSelect"});return L.createElement("div",Mat({className:p(h.defaultValue,s)},d),L.createElement("span",{className:h.defaultValueLabel},n),!a&&!u&&L.createElement(bv,{"aria-hidden":!0,onMouseDown:o,size:nle[l],radius:2,color:"blue",variant:"transparent",iconSize:nle[l]/2,className:h.defaultValueRemove,tabIndex:-1}))}J2e.displayName="@mantine/core/MultiSelect/DefaultValue";function Bat({data:e,searchable:t,limit:n,searchValue:r,filter:i,value:s}){if(!t&&s.length===0)return e;if(!t){const a=[];for(let u=0;u<e.length;u+=1)s.some(l=>l===e[u].value&&!e[u].disabled)||a.push(e[u]);return a}const o=[];for(let a=0;a<e.length&&(i(r,s.some(u=>u===e[a].value&&!e[a].disabled),e[a])&&o.push(e[a]),!(o.length>=n));a+=1);return o}var jat=Object.defineProperty,LN=Object.getOwnPropertySymbols,Z2e=Object.prototype.hasOwnProperty,eAe=Object.prototype.propertyIsEnumerable,rle=(e,t,n)=>t in e?jat(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ile=(e,t)=>{for(var n in t||(t={}))Z2e.call(t,n)&&rle(e,n,t[n]);if(LN)for(var n of LN(t))eAe.call(t,n)&&rle(e,n,t[n]);return e},zat=(e,t)=>{var n={};for(var r in e)Z2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&LN)for(var r of LN(e))t.indexOf(r)<0&&eAe.call(e,r)&&(n[r]=e[r]);return n};const Uat={xs:14,sm:18,md:20,lg:24,xl:28};function tAe(e){var t=e,{size:n,error:r,style:i}=t,s=zat(t,["size","error","style"]);const o=as(),a=o.fn.size({size:n,sizes:Uat});return L.createElement("svg",ile({width:a,height:a,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:ile({color:r?o.colors.red[6]:o.colors.gray[6]},i),"data-chevron":!0},s),L.createElement("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}function nAe({shouldClear:e,clearButtonLabel:t,onClear:n,size:r,error:i,clearButtonTabIndex:s}){return e?L.createElement(bv,{variant:"transparent","aria-label":t,onClick:n,size:r,tabIndex:s,onMouseDown:o=>o.preventDefault()}):L.createElement(tAe,{error:i,size:r})}nAe.displayName="@mantine/core/SelectRightSection";var Vat=Object.defineProperty,Hat=Object.defineProperties,qat=Object.getOwnPropertyDescriptors,MN=Object.getOwnPropertySymbols,rAe=Object.prototype.hasOwnProperty,iAe=Object.prototype.propertyIsEnumerable,sle=(e,t,n)=>t in e?Vat(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,l9=(e,t)=>{for(var n in t||(t={}))rAe.call(t,n)&&sle(e,n,t[n]);if(MN)for(var n of MN(t))iAe.call(t,n)&&sle(e,n,t[n]);return e},ole=(e,t)=>Hat(e,qat(t)),Wat=(e,t)=>{var n={};for(var r in e)rAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&MN)for(var r of MN(e))t.indexOf(r)<0&&iAe.call(e,r)&&(n[r]=e[r]);return n};const Gat={xs:24,sm:30,md:34,lg:44,xl:54};function sAe(e){var t=e,{styles:n,rightSection:r,rightSectionWidth:i,theme:s}=t,o=Wat(t,["styles","rightSection","rightSectionWidth","theme"]);if(r)return{rightSection:r,rightSectionWidth:i,styles:n};const a=typeof n=="function"?n(s):n;return{rightSectionWidth:s.fn.size({size:o.size,sizes:Gat}),rightSection:!o.readOnly&&!(o.disabled&&o.shouldClear)&&L.createElement(nAe,l9({},o)),styles:ole(l9({},a),{rightSection:ole(l9({},a==null?void 0:a.rightSection),{pointerEvents:o.shouldClear?void 0:"none"})})}}var Yat=Object.defineProperty,Kat=Object.defineProperties,Xat=Object.getOwnPropertyDescriptors,ale=Object.getOwnPropertySymbols,Qat=Object.prototype.hasOwnProperty,Jat=Object.prototype.propertyIsEnumerable,ule=(e,t,n)=>t in e?Yat(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Zat=(e,t)=>{for(var n in t||(t={}))Qat.call(t,n)&&ule(e,n,t[n]);if(ale)for(var n of ale(t))Jat.call(t,n)&&ule(e,n,t[n]);return e},eut=(e,t)=>Kat(e,Xat(t)),tut=ht((e,{size:t,invalid:n})=>({wrapper:{position:"relative"},values:{minHeight:e.fn.size({size:t,sizes:Fo})-2,display:"flex",alignItems:"center",flexWrap:"wrap",marginLeft:`calc(${-e.spacing.xs}px / 2)`,boxSizing:"border-box"},value:{margin:`calc(${e.spacing.xs}px / 2 - 2px) calc(${e.spacing.xs}px / 2)`},searchInput:eut(Zat({},e.fn.fontStyles()),{flex:1,minWidth:60,backgroundColor:"transparent",border:0,outline:0,fontSize:e.fn.size({size:t,sizes:e.fontSizes}),padding:0,marginLeft:`calc(${e.spacing.xs}px / 2)`,appearance:"none",color:"inherit",lineHeight:`${e.fn.size({size:t,sizes:Fo})-2}px`,"&::placeholder":{opacity:1,color:n?e.colors.red[e.colorScheme==="dark"?6:7]:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[5]},"&:disabled":{cursor:"not-allowed"}}),searchInputEmpty:{width:"100%"},searchInputInputHidden:{width:0,height:0,margin:0,overflow:"hidden"},searchInputPointer:{cursor:"pointer","&:disabled":{cursor:"not-allowed"}},input:{cursor:"pointer","&:disabled":{cursor:"not-allowed"}}})),nut=Object.defineProperty,rut=Object.defineProperties,iut=Object.getOwnPropertyDescriptors,FN=Object.getOwnPropertySymbols,oAe=Object.prototype.hasOwnProperty,aAe=Object.prototype.propertyIsEnumerable,lle=(e,t,n)=>t in e?nut(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,s_=(e,t)=>{for(var n in t||(t={}))oAe.call(t,n)&&lle(e,n,t[n]);if(FN)for(var n of FN(t))aAe.call(t,n)&&lle(e,n,t[n]);return e},cle=(e,t)=>rut(e,iut(t)),sut=(e,t)=>{var n={};for(var r in e)oAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&FN)for(var r of FN(e))t.indexOf(r)<0&&aAe.call(e,r)&&(n[r]=e[r]);return n};function out(e,t,n){return t?!1:n.label.toLowerCase().trim().includes(e.toLowerCase().trim())}function aut(e,t){return!!e&&!t.some(n=>n.value.toLowerCase()===e.toLowerCase())}function fle(e,t){if(!Array.isArray(e))return;if(t.length===0)return[];const n=typeof t[0]=="object"?t.map(r=>r.value):t;return e.filter(r=>n.includes(r))}const uut={size:"sm",valueComponent:J2e,itemComponent:kG,transition:"pop-top-left",transitionDuration:0,maxDropdownHeight:220,shadow:"sm",searchable:!1,filter:out,limit:1/0,clearSearchOnChange:!0,clearable:!1,clearSearchOnBlur:!1,disabled:!1,initiallyOpened:!1,creatable:!1,shouldCreate:aut,switchDirectionOnFlip:!1,zIndex:Tu("popover"),selectOnBlur:!1,clearButtonTabIndex:0,positionDependencies:[]},uAe=A.forwardRef((e,t)=>{const n=Ct("MultiSelect",uut,e),{className:r,style:i,required:s,label:o,description:a,size:u,error:l,classNames:c,styles:f,wrapperProps:d,value:h,defaultValue:p,data:m,onChange:g,valueComponent:y,itemComponent:v,id:_,transition:b,transitionDuration:E,transitionTimingFunction:w,maxDropdownHeight:x,shadow:S,nothingFound:I,onFocus:C,onBlur:O,searchable:z,placeholder:N,filter:$,limit:D,clearSearchOnChange:B,clearable:V,clearSearchOnBlur:j,clearButtonLabel:G,variant:U,onSearchChange:P,searchValue:k,disabled:H,initiallyOpened:M,radius:F,icon:J,rightSection:se,rightSectionWidth:ae,creatable:ce,getCreateLabel:le,shouldCreate:ge,onCreate:ue,sx:Fe,dropdownComponent:ke,onDropdownClose:Ge,onDropdownOpen:Re,maxSelectedValues:Oe,withinPortal:Le,switchDirectionOnFlip:Ut,zIndex:Qe,selectOnBlur:je,name:bt,dropdownPosition:et,errorProps:ut,labelProps:lt,descriptionProps:jt,clearButtonTabIndex:Dn,form:he,positionDependencies:_e,onKeyDown:Pe,unstyled:it,inputContainer:Ye,inputWrapperOrder:at,readOnly:tt,withAsterisk:vt}=n,In=sut(n,["className","style","required","label","description","size","error","classNames","styles","wrapperProps","value","defaultValue","data","onChange","valueComponent","itemComponent","id","transition","transitionDuration","transitionTimingFunction","maxDropdownHeight","shadow","nothingFound","onFocus","onBlur","searchable","placeholder","filter","limit","clearSearchOnChange","clearable","clearSearchOnBlur","clearButtonLabel","variant","onSearchChange","searchValue","disabled","initiallyOpened","radius","icon","rightSection","rightSectionWidth","creatable","getCreateLabel","shouldCreate","onCreate","sx","dropdownComponent","onDropdownClose","onDropdownOpen","maxSelectedValues","withinPortal","switchDirectionOnFlip","zIndex","selectOnBlur","name","dropdownPosition","errorProps","labelProps","descriptionProps","clearButtonTabIndex","form","positionDependencies","onKeyDown","unstyled","inputContainer","inputWrapperOrder","readOnly","withAsterisk"]),{classes:Wt,cx:Vt,theme:hr}=tut({size:u,invalid:!!l},{classNames:c,styles:f,unstyled:it,name:"MultiSelect"}),{systemStyles:Yn,rest:ku}=yf(In),Mr=A.useRef(),us=A.useRef(),ti=A.useRef({}),Ei=vl(_),[qr,yr]=A.useState(M),[gt,Fr]=A.useState(-1),[xi,Yi]=A.useState("column"),[Qs,Ma]=Ta({value:k,defaultValue:"",finalValue:void 0,onChange:P}),[ne,Q]=A.useState(!1),{scrollIntoView:ie,targetRef:ve,scrollableRef:ye}=QEe({duration:0,offset:5,cancelable:!1,isList:!0}),pt=ce&&typeof le=="function";let Ce=null;const ft=m.map(yt=>typeof yt=="string"?{label:yt,value:yt}:yt),Bt=pEe({data:ft}),[St,Ht]=Ta({value:fle(h,m),defaultValue:fle(p,m),finalValue:[],onChange:g}),fn=A.useRef(!!Oe&&Oe<St.length),Tr=yt=>{if(!tt){const wn=St.filter(Br=>Br!==yt);Ht(wn),Oe&&wn.length<Oe&&(fn.current=!1)}},zt=yt=>{Ma(yt.currentTarget.value),!H&&!fn.current&&z&&yr(!0)},pr=yt=>{typeof C=="function"&&C(yt),!H&&!fn.current&&z&&yr(!0)},Xt=Bat({data:Bt,searchable:z,searchValue:Qs,limit:D,filter:$,value:St}),er=(yt,wn,Br)=>{let Is=yt;for(;Br(Is);)if(Is=wn(Is),!Xt[Is].disabled)return Is;return yt};_s(()=>{Fr(-1)},[Qs]),_s(()=>{!H&&St.length>m.length&&yr(!1),Oe&&St.length<Oe&&(fn.current=!1),Oe&&St.length>=Oe&&(fn.current=!0,yr(!1))},[St]);const ni=yt=>{if(!tt)if(B&&Ma(""),St.includes(yt.value))Tr(yt.value);else{if(yt.creatable&&typeof ue=="function"){const wn=ue(yt.value);typeof wn<"u"&&wn!==null&&Ht(typeof wn=="string"?[...St,wn]:[...St,wn.value])}else Ht([...St,yt.value]);St.length===Oe-1&&(fn.current=!0,yr(!1)),gt===Xt.length-1&&Fr(Xt.length-2),Xt.length===1&&yr(!1)}},ls=yt=>{typeof O=="function"&&O(yt),je&&Xt[gt]&&qr&&ni(Xt[gt]),j&&Ma(""),yr(!1)},Fi=yt=>{if(ne||(Pe==null||Pe(yt),tt)||yt.key!=="Backspace"&&Oe&&fn.current)return;const wn=xi==="column",Br=()=>{Fr(Fa=>{var q;const te=er(Fa,K=>K+1,K=>K<Xt.length-1);return qr&&(ve.current=ti.current[(q=Xt[te])==null?void 0:q.value],ie({alignment:wn?"end":"start"})),te})},Is=()=>{Fr(Fa=>{var q;const te=er(Fa,K=>K-1,K=>K>0);return qr&&(ve.current=ti.current[(q=Xt[te])==null?void 0:q.value],ie({alignment:wn?"start":"end"})),te})};switch(yt.key){case"ArrowUp":{yt.preventDefault(),yr(!0),wn?Is():Br();break}case"ArrowDown":{yt.preventDefault(),yr(!0),wn?Br():Is();break}case"Enter":{yt.preventDefault(),Xt[gt]&&qr?ni(Xt[gt]):yr(!0);break}case" ":{z||(yt.preventDefault(),Xt[gt]&&qr?ni(Xt[gt]):yr(!0));break}case"Backspace":{St.length>0&&Qs.length===0&&(Ht(St.slice(0,-1)),yr(!0),Oe&&(fn.current=!1));break}case"Home":{if(!z){yt.preventDefault(),qr||yr(!0);const Fa=Xt.findIndex(q=>!q.disabled);Fr(Fa),ie({alignment:wn?"end":"start"})}break}case"End":{if(!z){yt.preventDefault(),qr||yr(!0);const Fa=Xt.map(q=>!!q.disabled).lastIndexOf(!1);Fr(Fa),ie({alignment:wn?"end":"start"})}break}case"Escape":yr(!1)}},aa=St.map(yt=>{let wn=Bt.find(Br=>Br.value===yt&&!Br.disabled);return!wn&&pt&&(wn={value:yt,label:yt}),wn}).filter(yt=>!!yt).map(yt=>L.createElement(y,cle(s_({},yt),{variant:U,disabled:H,className:Wt.value,readOnly:tt,onRemove:wn=>{wn.preventDefault(),wn.stopPropagation(),Tr(yt.value)},key:yt.value,size:u,styles:f,classNames:c,radius:F}))),Js=()=>{var yt;Ma(""),Ht([]),(yt=Mr.current)==null||yt.focus(),Oe&&(fn.current=!1)};pt&&ge(Qs,Bt)&&(Ce=le(Qs),Xt.push({label:Qs,value:Qs,creatable:!0}));const mi=!tt&&(Xt.length>0?qr:qr&&!!I);return _s(()=>{const yt=mi?Re:Ge;typeof yt=="function"&&yt()},[mi]),L.createElement(is.Wrapper,s_(s_({required:s,id:Ei,label:o,error:l,description:a,size:u,className:r,style:i,classNames:c,styles:f,__staticSelector:"MultiSelect",sx:Fe,errorProps:ut,descriptionProps:jt,labelProps:lt,inputContainer:Ye,inputWrapperOrder:at,unstyled:it,withAsterisk:vt},Yn),d),L.createElement(vg,{opened:mi,transition:b,transitionDuration:E,shadow:"sm",withinPortal:Le,__staticSelector:"MultiSelect",onDirectionChange:Yi,switchDirectionOnFlip:Ut,zIndex:Qe,dropdownPosition:et,positionDependencies:_e,classNames:c,styles:f,unstyled:it},L.createElement(vg.Target,null,L.createElement("div",{className:Wt.wrapper,role:"combobox","aria-haspopup":"listbox","aria-owns":qr&&mi?`${Ei}-items`:null,"aria-controls":Ei,"aria-expanded":qr,onMouseLeave:()=>Fr(-1),tabIndex:-1,ref:us},L.createElement("input",{type:"hidden",name:bt,value:St.join(","),form:he,disabled:H}),L.createElement(is,s_({__staticSelector:"MultiSelect",style:{overflow:"hidden"},component:"div",multiline:!0,size:u,variant:U,disabled:H,invalid:!!l,required:s,radius:F,icon:J,unstyled:it,onMouseDown:yt=>{var wn;yt.preventDefault(),!H&&!fn.current&&yr(!qr),(wn=Mr.current)==null||wn.focus()},classNames:cle(s_({},c),{input:Vt({[Wt.input]:!z},c==null?void 0:c.input)})},sAe({theme:hr,rightSection:se,rightSectionWidth:ae,styles:f,size:u,shouldClear:V&&St.length>0,clearButtonLabel:G,onClear:Js,error:l,disabled:H,clearButtonTabIndex:Dn,readOnly:tt})),L.createElement("div",{className:Wt.values},aa,L.createElement("input",s_({ref:Ts(t,Mr),type:"search",id:Ei,className:Vt(Wt.searchInput,{[Wt.searchInputPointer]:!z,[Wt.searchInputInputHidden]:!qr&&St.length>0||!z&&St.length>0,[Wt.searchInputEmpty]:St.length===0}),onKeyDown:Fi,value:Qs,onChange:zt,onFocus:pr,onBlur:ls,readOnly:!z||fn.current||tt,placeholder:St.length===0?N:void 0,disabled:H,"data-mantine-stop-propagation":qr,autoComplete:"off",onCompositionStart:()=>Q(!0),onCompositionEnd:()=>Q(!1)},ku)))))),L.createElement(vg.Dropdown,{component:ke||t6,maxHeight:x,direction:xi,id:Ei,innerRef:ye,__staticSelector:"MultiSelect",classNames:c,styles:f},L.createElement(PG,{data:Xt,hovered:gt,classNames:c,styles:f,uuid:Ei,__staticSelector:"MultiSelect",onItemHover:Fr,onItemSelect:ni,itemsRefs:ti,itemComponent:v,size:u,nothingFound:I,creatable:ce&&!!Ce,createLabel:Ce,unstyled:it}))))});uAe.displayName="@mantine/core/MultiSelect";var lut=Object.defineProperty,cut=Object.defineProperties,fut=Object.getOwnPropertyDescriptors,dle=Object.getOwnPropertySymbols,dut=Object.prototype.hasOwnProperty,hut=Object.prototype.propertyIsEnumerable,hle=(e,t,n)=>t in e?lut(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ple=(e,t)=>{for(var n in t||(t={}))dut.call(t,n)&&hle(e,n,t[n]);if(dle)for(var n of dle(t))hut.call(t,n)&&hle(e,n,t[n]);return e},put=(e,t)=>cut(e,fut(t)),mut=ht((e,{color:t,variant:n,noWrap:r,childrenOffset:i,alignIcon:s})=>{const o=e.fn.variant({variant:n,color:t});return{root:put(ple({display:"flex",alignItems:"center",width:"100%",padding:`8px ${e.spacing.sm}px`,userSelect:"none"},e.fn.hover({backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[0]})),{"&[data-active]":ple({backgroundColor:o.background,color:o.color},e.fn.hover({backgroundColor:o.hover})),"&[data-disabled]":{opacity:.4,pointerEvents:"none"}}),icon:{marginRight:e.spacing.sm,display:"flex",justifyContent:"center",alignItems:"center",alignSelf:s==="center"?"center":"flex-start",paddingTop:s==="center"?void 0:4},rightSection:{marginLeft:e.spacing.sm,display:"flex",justifyContent:"center",alignItems:"center",transition:`transform 150ms ${e.transitionTimingFunction}`,"&[data-rotate]":{transform:"rotate(90deg)"}},body:{flex:1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:r?"nowrap":void 0},label:{},description:{display:"block","&[data-active]":{color:"inherit"}},children:{paddingLeft:e.fn.size({size:i,sizes:e.spacing})}}}),gut=Object.defineProperty,BN=Object.getOwnPropertySymbols,lAe=Object.prototype.hasOwnProperty,cAe=Object.prototype.propertyIsEnumerable,mle=(e,t,n)=>t in e?gut(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,yut=(e,t)=>{for(var n in t||(t={}))lAe.call(t,n)&&mle(e,n,t[n]);if(BN)for(var n of BN(t))cAe.call(t,n)&&mle(e,n,t[n]);return e},vut=(e,t)=>{var n={};for(var r in e)lAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&BN)for(var r of BN(e))t.indexOf(r)<0&&cAe.call(e,r)&&(n[r]=e[r]);return n};const _ut={variant:"light",childrenOffset:"lg"},fAe=A.forwardRef((e,t)=>{const n=Ct("NavLink",_ut,e),{label:r,description:i,icon:s,rightSection:o,className:a,classNames:u,styles:l,unstyled:c,active:f,color:d,variant:h,noWrap:p,children:m,opened:g,defaultOpened:y,onChange:v,disableRightSectionRotation:_,childrenOffset:b,disabled:E,onClick:w}=n,x=vut(n,["label","description","icon","rightSection","className","classNames","styles","unstyled","active","color","variant","noWrap","children","opened","defaultOpened","onChange","disableRightSectionRotation","childrenOffset","disabled","onClick"]),{classes:S,cx:I}=mut({color:d,variant:h,noWrap:p,childrenOffset:b,alignIcon:i?"top":"center"},{name:"NavLink",classNames:u,styles:l,unstyled:c}),[C,O]=Ta({value:g,defaultValue:y,finalValue:!1,onChange:v}),z=!!m,N=$=>{z?($.preventDefault(),w==null||w($),O(!C)):w==null||w($)};return L.createElement(L.Fragment,null,L.createElement(_v,yut({ref:t,className:I(S.root,a),"data-active":f||void 0,onClick:N,unstyled:c,"data-expanded":C||void 0,"data-disabled":E||void 0,disabled:E},x),s&&L.createElement("span",{className:S.icon},s),L.createElement("span",{className:S.body},L.createElement(Rt,{component:"span",size:"sm",className:S.label},r),L.createElement(Rt,{component:"span",color:"dimmed",size:"xs","data-active":f||void 0,className:S.description},i)),(z||o)&&L.createElement("span",{className:S.rightSection,"data-rotate":C&&!_||void 0},z?o||L.createElement(IQe,{width:14,height:14,style:{transform:"rotate(-90deg)"}}):o)),L.createElement(uxe,{in:C},L.createElement("div",{className:S.children},m)))});fAe.displayName="@mantine/core/NavLink";const BT=fAe,but=(e,t,n)=>Number.isInteger(e)&&e>=0&&t===0?"numeric":!Number.isInteger(e)&&e>=0&&t!==0?"decimal":Number.isInteger(e)&&e<0&&t===0||!Number.isInteger(e)&&e<0&&t!==0?n==="ios"?"text":"decimal":"numeric";function gle({direction:e,size:t}){return L.createElement("svg",{style:{transform:e==="up"?"rotate(180deg)":void 0},width:t,height:t,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},L.createElement("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}const dAe={xs:20,sm:24,md:30,lg:34,xl:36};var wut=ht((e,{radius:t,size:n})=>({rightSection:{display:"flex",flexDirection:"column",height:"calc(100% - 2px)",margin:1,marginRight:1,overflow:"hidden",borderTopRightRadius:e.fn.radius(t),borderBottomRightRadius:e.fn.radius(t)},control:{margin:0,position:"relative",flex:"0 0 50%",display:"flex",alignItems:"center",justifyContent:"center",boxSizing:"border-box",width:e.fn.size({size:n,sizes:dAe}),padding:0,WebkitTapHighlightColor:"transparent",borderBottom:`1px solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[4]}`,borderLeft:`1px solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[4]}`,borderTop:0,borderRight:0,backgroundColor:"transparent",marginRight:1,color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,"&:not(:disabled):hover":{backgroundColor:e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[0]},"&:disabled":{color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[4]}},controlUp:{},controlDown:{borderBottom:0}})),Eut=Object.defineProperty,xut=Object.defineProperties,Sut=Object.getOwnPropertyDescriptors,jN=Object.getOwnPropertySymbols,hAe=Object.prototype.hasOwnProperty,pAe=Object.prototype.propertyIsEnumerable,yle=(e,t,n)=>t in e?Eut(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,c9=(e,t)=>{for(var n in t||(t={}))hAe.call(t,n)&&yle(e,n,t[n]);if(jN)for(var n of jN(t))pAe.call(t,n)&&yle(e,n,t[n]);return e},Tut=(e,t)=>xut(e,Sut(t)),Aut=(e,t)=>{var n={};for(var r in e)hAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&jN)for(var r of jN(e))t.indexOf(r)<0&&pAe.call(e,r)&&(n[r]=e[r]);return n};const Cut={type:"text",size:"sm",__staticSelector:"TextInput"},KG=A.forwardRef((e,t)=>{const n=tTe("TextInput",Cut,e),{inputProps:r,wrapperProps:i}=n,s=Aut(n,["inputProps","wrapperProps"]);return L.createElement(is.Wrapper,c9({},i),L.createElement(is,Tut(c9(c9({},r),s),{ref:t})))});KG.displayName="@mantine/core/TextInput";var Iut=Object.defineProperty,Out=Object.defineProperties,Put=Object.getOwnPropertyDescriptors,zN=Object.getOwnPropertySymbols,mAe=Object.prototype.hasOwnProperty,gAe=Object.prototype.propertyIsEnumerable,vle=(e,t,n)=>t in e?Iut(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,kut=(e,t)=>{for(var n in t||(t={}))mAe.call(t,n)&&vle(e,n,t[n]);if(zN)for(var n of zN(t))gAe.call(t,n)&&vle(e,n,t[n]);return e},$ut=(e,t)=>Out(e,Put(t)),Rut=(e,t)=>{var n={};for(var r in e)mAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&zN)for(var r of zN(e))t.indexOf(r)<0&&gAe.call(e,r)&&(n[r]=e[r]);return n};const Nut=e=>e||"",Dut=e=>{if(e==="-")return e;let t=e;t[0]==="."&&(t=`0${e}`);const n=parseFloat(t);if(!Number.isNaN(n))return e},_le={xs:10,sm:14,md:16,lg:18,xl:20},Lut={step:1,hideControls:!1,size:"sm",precision:0,noClampOnBlur:!1,removeTrailingZeros:!1,formatter:Nut,parser:Dut,type:"text"},yAe=A.forwardRef((e,t)=>{const n=Ct("NumberInput",Lut,e),{disabled:r,value:i,onChange:s,decimalSeparator:o,min:a,max:u,startValue:l,step:c,stepHoldInterval:f,stepHoldDelay:d,onBlur:h,onFocus:p,onKeyDown:m,onKeyUp:g,hideControls:y,radius:v,variant:_,precision:b,removeTrailingZeros:E,defaultValue:w,noClampOnBlur:x,handlersRef:S,classNames:I,styles:C,size:O,rightSection:z,rightSectionWidth:N,formatter:$,parser:D,inputMode:B,unstyled:V,type:j}=n,G=Rut(n,["disabled","value","onChange","decimalSeparator","min","max","startValue","step","stepHoldInterval","stepHoldDelay","onBlur","onFocus","onKeyDown","onKeyUp","hideControls","radius","variant","precision","removeTrailingZeros","defaultValue","noClampOnBlur","handlersRef","classNames","styles","size","rightSection","rightSectionWidth","formatter","parser","inputMode","unstyled","type"]),{classes:U,cx:P,theme:k}=wut({radius:v,size:O},{classNames:I,styles:C,unstyled:V,name:"NumberInput"}),H=Ye=>{if(Ye===void 0)return;let at=Ye.toFixed(b);return E&&b>0&&(at=at.replace(new RegExp(`[0]{0,${b}}$`),""),(at.endsWith(".")||at.endsWith(o))&&(at=at.slice(0,-1))),at},[M,F]=A.useState(!1),[J,se]=A.useState(typeof i=="number"?i:typeof w=="number"?w:void 0),ae=typeof i=="number"?i:J,[ce,le]=A.useState(typeof ae=="number"?H(ae):""),ge=A.useRef(),ue=Ye=>{Ye!==J&&!Number.isNaN(Ye)&&(typeof s=="function"&&s(Ye),se(Ye))},Fe=(Ye="")=>{let at=typeof Ye=="number"?String(Ye):Ye;return o&&(at=at.replace(/\./g,o)),$(at)},ke=Ye=>{let at=Ye;return o&&(at=at.replace(new RegExp(`\\${o}`,"g"),".")),D(at)},Ge=typeof a=="number"?a:-1/0,Re=typeof u=="number"?u:1/0,Oe=A.useRef();Oe.current=()=>{var Ye,at,tt;if(J===void 0)ue((Ye=l??a)!=null?Ye:0),le((tt=(at=H(l))!=null?at:H(a))!=null?tt:"0");else{const vt=H(ef(J+c,Ge,Re));ue(parseFloat(vt)),le(vt)}};const Le=A.useRef();Le.current=()=>{var Ye,at,tt;if(J===void 0)ue((Ye=l??a)!=null?Ye:0),le((tt=(at=H(l))!=null?at:H(a))!=null?tt:"0");else{const vt=H(ef(J-c,Ge,Re));ue(parseFloat(vt)),le(vt)}},YEe(S,{increment:Oe.current,decrement:Le.current}),A.useEffect(()=>{typeof i=="number"&&!M&&(se(i),le(H(i))),w===void 0&&i===void 0&&!M&&(se(i),le(""))},[i]);const Ut=d!==void 0&&f!==void 0,Qe=A.useRef(null),je=A.useRef(0),bt=()=>{Qe.current&&window.clearTimeout(Qe.current),Qe.current=null,je.current=0},et=Ye=>{Ye?Oe.current():Le.current(),je.current+=1},ut=Ye=>{if(et(Ye),Ut){const at=typeof f=="number"?f:f(je.current);Qe.current=window.setTimeout(()=>ut(Ye),at)}},lt=(Ye,at)=>{Ye.preventDefault(),ge.current.focus(),et(at),Ut&&(Qe.current=window.setTimeout(()=>ut(at),d))};A.useEffect(()=>(bt(),bt),[]);const jt=L.createElement("div",{className:U.rightSection},L.createElement("button",{type:"button",tabIndex:-1,"aria-hidden":!0,disabled:ae>=u,className:P(U.control,U.controlUp),onPointerDown:Ye=>{lt(Ye,!0)},onPointerUp:bt,onPointerLeave:bt},L.createElement(gle,{size:k.fn.size({size:O,sizes:_le}),direction:"up"})),L.createElement("button",{type:"button",tabIndex:-1,"aria-hidden":!0,disabled:ae<=a,className:P(U.control,U.controlDown),onPointerDown:Ye=>{lt(Ye,!1)},onPointerUp:bt,onPointerLeave:bt},L.createElement(gle,{size:k.fn.size({size:O,sizes:_le}),direction:"down"}))),Dn=Ye=>{if(Ye.nativeEvent.isComposing)return;const tt=Ye.target.value,vt=ke(tt);le(vt),tt===""||tt==="-"?ue(void 0):tt.trim()!==""&&!Number.isNaN(vt)&&ue(parseFloat(vt))},he=Ye=>{var at;if(Ye.target.value==="")le(""),ue(void 0);else{let tt=Ye.target.value;(tt[0]===`${o}`||tt[0]===".")&&(tt=`0${tt}`);const vt=ke(tt),In=ef(parseFloat(vt),Ge,Re);Number.isNaN(In)?le((at=H(ae))!=null?at:""):x||(le(H(In)),ue(parseFloat(H(In))))}F(!1),typeof h=="function"&&h(Ye)},_e=Ye=>{F(!0),typeof p=="function"&&p(Ye)},Pe=Ye=>{if(typeof m=="function"&&m(Ye),Ye.repeat&&Ut&&(Ye.key==="ArrowUp"||Ye.key==="ArrowDown")){Ye.preventDefault();return}Ye.key==="ArrowUp"?lt(Ye,!0):Ye.key==="ArrowDown"&&lt(Ye,!1)},it=Ye=>{typeof g=="function"&&g(Ye),(Ye.key==="ArrowUp"||Ye.key==="ArrowDown")&&bt()};return L.createElement(KG,$ut(kut({},G),{type:j,variant:_,value:Fe(ce),disabled:r,ref:Ts(ge,t),onChange:Dn,onBlur:he,onFocus:_e,onKeyDown:Pe,onKeyUp:it,rightSection:z||(r||y||_==="unstyled"?null:jt),rightSectionWidth:N||k.fn.size({size:O,sizes:dAe})+1,radius:v,max:u,min:a,step:c,size:O,styles:C,classNames:I,inputMode:B||but(c,b,DXe()),__staticSelector:"NumberInput",unstyled:V}))});yAe.displayName="@mantine/core/NumberInput";const ble={xs:3,sm:5,md:8,lg:12,xl:16},Mut=CKe({from:{backgroundPosition:"0 0"},to:{backgroundPosition:"40px 0"}});var Fut=ht((e,{color:t,radius:n,size:r,striped:i,animate:s})=>({root:{position:"relative",height:e.fn.size({size:r,sizes:ble}),backgroundColor:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2],borderRadius:e.fn.size({size:n,sizes:e.radius}),overflow:"hidden"},bar:{position:"absolute",top:0,bottom:0,left:0,height:"100%",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:e.fn.variant({variant:"filled",primaryFallback:!1,color:t||e.primaryColor}).background,transition:"width 100ms linear",animation:s?`${Mut} 1000ms linear infinite`:"none",backgroundSize:"20px 20px",backgroundImage:i?"linear-gradient(45deg, rgba(255, 255, 255, 0.15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.15) 50%, rgba(255, 255, 255, 0.15) 75%, transparent 75%, transparent)":"none","&:last-of-type":{borderTopRightRadius:e.fn.size({size:n,sizes:e.radius}),borderBottomRightRadius:e.fn.size({size:n,sizes:e.radius})},"&:first-of-type":{borderTopLeftRadius:e.fn.size({size:n,sizes:e.radius}),borderBottomLeftRadius:e.fn.size({size:n,sizes:e.radius})},"@media (prefers-reduced-motion)":{transitionDuration:e.respectReducedMotion?"0ms":void 0}},label:{color:e.white,fontSize:e.fn.size({size:r,sizes:ble})*.65,fontWeight:700,userSelect:"none",overflow:"hidden",whiteSpace:"nowrap"}}));const vAe=A.createContext(!1),But=vAe.Provider,jut=()=>A.useContext(vAe);function _Ae({children:e,openDelay:t=0,closeDelay:n=0}){return L.createElement(But,{value:!0},L.createElement(xtt,{delay:{open:t,close:n}},e))}_Ae.displayName="@mantine/core/TooltipGroup";var zut=Object.defineProperty,Uut=Object.defineProperties,Vut=Object.getOwnPropertyDescriptors,wle=Object.getOwnPropertySymbols,Hut=Object.prototype.hasOwnProperty,qut=Object.prototype.propertyIsEnumerable,Ele=(e,t,n)=>t in e?zut(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,xle=(e,t)=>{for(var n in t||(t={}))Hut.call(t,n)&&Ele(e,n,t[n]);if(wle)for(var n of wle(t))qut.call(t,n)&&Ele(e,n,t[n]);return e},Wut=(e,t)=>Uut(e,Vut(t));function Gut(e,t){if(!t)return{backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[9],color:e.white};const n=e.fn.variant({variant:"filled",color:t,primaryFallback:!1});return{backgroundColor:n.background,color:n.color}}var bAe=ht((e,{color:t,radius:n,width:r,multiline:i})=>({tooltip:Wut(xle(xle({},e.fn.fontStyles()),Gut(e,t)),{lineHeight:e.lineHeight,fontSize:e.fontSizes.sm,borderRadius:e.fn.radius(n),padding:`calc(${e.spacing.xs}px / 2) ${e.spacing.xs}px`,position:"absolute",whiteSpace:i?"unset":"nowrap",pointerEvents:"none",width:r}),arrow:{backgroundColor:"inherit",border:0,zIndex:1}}));const wAe={children:"Tooltip component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported"};function Yut({offset:e,position:t}){const[n,r]=A.useState(!1),i=A.useRef(),{x:s,y:o,reference:a,floating:u,refs:l,update:c,placement:f}=BG({placement:t,middleware:[LG({crossAxis:!0,padding:5,rootBoundary:"document"})]}),d=f.includes("right")?e:t.includes("left")?e*-1:0,h=f.includes("bottom")?e:t.includes("top")?e*-1:0,p=A.useCallback(({clientX:m,clientY:g})=>{a({getBoundingClientRect(){return{width:0,height:0,x:m,y:g,left:m+d,top:g+h,right:m,bottom:g}}})},[a]);return A.useEffect(()=>{if(l.floating.current){const m=i.current;m.addEventListener("mousemove",p);const g=sp(l.floating.current);return g.forEach(y=>{y.addEventListener("scroll",c)}),()=>{m.removeEventListener("mousemove",p),g.forEach(y=>{y.removeEventListener("scroll",c)})}}},[a,l.floating,c,p,n]),{handleMouseMove:p,x:s,y:o,opened:n,setOpened:r,boundaryRef:i,floating:u}}var Kut=Object.defineProperty,Xut=Object.defineProperties,Qut=Object.getOwnPropertyDescriptors,UN=Object.getOwnPropertySymbols,EAe=Object.prototype.hasOwnProperty,xAe=Object.prototype.propertyIsEnumerable,Sle=(e,t,n)=>t in e?Kut(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,f9=(e,t)=>{for(var n in t||(t={}))EAe.call(t,n)&&Sle(e,n,t[n]);if(UN)for(var n of UN(t))xAe.call(t,n)&&Sle(e,n,t[n]);return e},d9=(e,t)=>Xut(e,Qut(t)),Jut=(e,t)=>{var n={};for(var r in e)EAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&UN)for(var r of UN(e))t.indexOf(r)<0&&xAe.call(e,r)&&(n[r]=e[r]);return n};const Zut={refProp:"ref",withinPortal:!0,offset:10,position:"right",zIndex:Tu("popover")};function SAe(e){var t;const n=Ct("TooltipFloating",Zut,e),{children:r,refProp:i,withinPortal:s,style:o,className:a,classNames:u,styles:l,unstyled:c,radius:f,color:d,label:h,offset:p,position:m,multiline:g,width:y,zIndex:v,disabled:_}=n,b=Jut(n,["children","refProp","withinPortal","style","className","classNames","styles","unstyled","radius","color","label","offset","position","multiline","width","zIndex","disabled"]),{handleMouseMove:E,x:w,y:x,opened:S,boundaryRef:I,floating:C,setOpened:O}=Yut({offset:p,position:m}),{classes:z,cx:N}=bAe({radius:f,color:d,multiline:g,width:y},{name:"Tooltip",classNames:u,styles:l,unstyled:c});if(!PC(r))throw new Error(wAe.children);const $=Ts(I,r.ref),D=V=>{var j,G;(G=(j=r.props).onMouseEnter)==null||G.call(j,V),E(V),O(!0)},B=V=>{var j,G;(G=(j=r.props).onMouseLeave)==null||G.call(j,V),O(!1)};return _?L.createElement(L.Fragment,null,r):L.createElement(L.Fragment,null,L.createElement(NC,{withinPortal:s},L.createElement(At,d9(f9({},b),{ref:C,className:N(z.tooltip,a),style:d9(f9({},o),{zIndex:v,display:S?"block":"none",top:x??"",left:(t=Math.round(w))!=null?t:""})}),h)),A.cloneElement(r,d9(f9({},r.props),{[i]:$,onMouseEnter:D,onMouseLeave:B})))}SAe.displayName="@mantine/core/TooltipFloating";function elt(e){const[t,n]=A.useState(!1),i=typeof e.opened=="boolean"?e.opened:t,s=jut(),o=vl(),{delay:a,currentId:u,setCurrentId:l}=DSe(),c=A.useCallback(S=>{n(S),S&&l(o)},[l,o]),{x:f,y:d,reference:h,floating:p,context:m,refs:g,update:y,placement:v,middlewareData:{arrow:{x:_,y:b}={}}}=BG({placement:e.position,open:i,onOpenChange:c,middleware:[xSe(e.offset),LG({padding:8}),ESe(),kSe({element:e.arrowRef}),...e.inline?[TSe()]:[]]}),{getReferenceProps:E,getFloatingProps:w}=_tt([Ett(m,{enabled:e.events.hover,delay:s?a:{open:e.openDelay,close:e.closeDelay},mouseOnly:!e.events.touch}),Ott(m,{enabled:e.events.focus,keyboardOnly:!0}),Ttt(m,{role:"tooltip"}),Itt(m,{enabled:typeof e.opened===void 0}),Stt(m,{id:o})]);return LSe({opened:i,positionDependencies:e.positionDependencies,floating:{refs:g,update:y}}),_s(()=>{var S;(S=e.onPositionChange)==null||S.call(e,v)},[v]),{x:f,y:d,arrowX:_,arrowY:b,reference:h,floating:p,getFloatingProps:w,getReferenceProps:E,isGroupPhase:i&&u&&u!==o,opened:i,placement:v}}var tlt=Object.defineProperty,nlt=Object.defineProperties,rlt=Object.getOwnPropertyDescriptors,VN=Object.getOwnPropertySymbols,TAe=Object.prototype.hasOwnProperty,AAe=Object.prototype.propertyIsEnumerable,Tle=(e,t,n)=>t in e?tlt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Hx=(e,t)=>{for(var n in t||(t={}))TAe.call(t,n)&&Tle(e,n,t[n]);if(VN)for(var n of VN(t))AAe.call(t,n)&&Tle(e,n,t[n]);return e},ilt=(e,t)=>nlt(e,rlt(t)),slt=(e,t)=>{var n={};for(var r in e)TAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&VN)for(var r of VN(e))t.indexOf(r)<0&&AAe.call(e,r)&&(n[r]=e[r]);return n};const olt={position:"top",refProp:"ref",withinPortal:!1,inline:!1,arrowSize:4,arrowOffset:5,arrowRadius:0,offset:5,transition:"fade",transitionDuration:100,width:"auto",events:{hover:!0,focus:!1,touch:!1},zIndex:Tu("popover"),positionDependencies:[]},s6=A.forwardRef((e,t)=>{const n=A.useRef(null),r=Ct("Tooltip",olt,e),{children:i,position:s,refProp:o,label:a,openDelay:u,closeDelay:l,onPositionChange:c,opened:f,withinPortal:d,radius:h,color:p,classNames:m,styles:g,unstyled:y,style:v,className:_,withArrow:b,arrowSize:E,arrowOffset:w,arrowRadius:x,offset:S,transition:I,transitionDuration:C,multiline:O,width:z,events:N,zIndex:$,disabled:D,positionDependencies:B,onClick:V,onMouseEnter:j,onMouseLeave:G,inline:U}=r,P=slt(r,["children","position","refProp","label","openDelay","closeDelay","onPositionChange","opened","withinPortal","radius","color","classNames","styles","unstyled","style","className","withArrow","arrowSize","arrowOffset","arrowRadius","offset","transition","transitionDuration","multiline","width","events","zIndex","disabled","positionDependencies","onClick","onMouseEnter","onMouseLeave","inline"]),{classes:k,cx:H,theme:M}=bAe({radius:h,color:p,width:z,multiline:O},{name:"Tooltip",classNames:m,styles:g,unstyled:y}),F=elt({position:XSe(M.dir,s),closeDelay:l,openDelay:u,onPositionChange:c,opened:f,events:N,arrowRef:n,offset:S+(b?E/2:0),positionDependencies:[...B,i],inline:U});if(!PC(i))throw new Error(wAe.children);const J=Ts(F.reference,i.ref,t);return L.createElement(L.Fragment,null,L.createElement(NC,{withinPortal:d},L.createElement(FC,{mounted:!D&&F.opened,transition:I,duration:F.isGroupPhase?10:C},se=>{var ae,ce;return L.createElement(At,Hx(Hx({},P),F.getFloatingProps({ref:F.floating,className:k.tooltip,style:ilt(Hx(Hx({},v),se),{zIndex:$,top:(ae=F.y)!=null?ae:0,left:(ce=F.x)!=null?ce:0})})),a,L.createElement(jG,{ref:n,arrowX:F.arrowX,arrowY:F.arrowY,visible:b,withBorder:!1,position:F.placement,arrowSize:E,arrowOffset:w,arrowRadius:x,className:k.arrow}))})),A.cloneElement(i,F.getReferenceProps(Hx({onClick:V,onMouseEnter:j,onMouseLeave:G,onMouseMove:e.onMouseMove,onPointerDown:e.onPointerDown,onPointerEnter:e.onPointerEnter,[o]:J,className:H(_,i.props.className)},i.props))))});s6.Group=_Ae;s6.Floating=SAe;s6.displayName="@mantine/core/Tooltip";const CAe=s6;var alt=Object.defineProperty,ult=Object.defineProperties,llt=Object.getOwnPropertyDescriptors,HN=Object.getOwnPropertySymbols,IAe=Object.prototype.hasOwnProperty,OAe=Object.prototype.propertyIsEnumerable,Ale=(e,t,n)=>t in e?alt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Uz=(e,t)=>{for(var n in t||(t={}))IAe.call(t,n)&&Ale(e,n,t[n]);if(HN)for(var n of HN(t))OAe.call(t,n)&&Ale(e,n,t[n]);return e},PAe=(e,t)=>ult(e,llt(t)),Cle=(e,t)=>{var n={};for(var r in e)IAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&HN)for(var r of HN(e))t.indexOf(r)<0&&OAe.call(e,r)&&(n[r]=e[r]);return n};function clt(e){return e.reduce((t,n)=>(t.sections.push(PAe(Uz({},n),{accumulated:t.accumulated})),t.accumulated+=n.value,t),{accumulated:0,sections:[]}).sections}const flt={size:"md",radius:"sm",striped:!1,animate:!1,label:""},kAe=A.forwardRef((e,t)=>{const n=Ct("Progress",flt,e),{className:r,value:i,color:s,size:o,radius:a,striped:u,animate:l,label:c,"aria-label":f,classNames:d,styles:h,sections:p,unstyled:m}=n,g=Cle(n,["className","value","color","size","radius","striped","animate","label","aria-label","classNames","styles","sections","unstyled"]),{classes:y,cx:v,theme:_}=Fut({color:s,size:o,radius:a,striped:u||l,animate:l},{classNames:d,styles:h,unstyled:m,name:"Progress"}),b=Array.isArray(p)?clt(p).map((E,w)=>{var x=E,{tooltip:S,accumulated:I,value:C,label:O,color:z}=x,N=Cle(x,["tooltip","accumulated","value","label","color"]);return L.createElement(CAe.Floating,{label:S,disabled:!S,key:w},L.createElement(At,PAe(Uz({},N),{className:v(y.bar,N.className),sx:{width:`${C}%`,left:`${I}%`,backgroundColor:_.fn.variant({variant:"filled",primaryFallback:!1,color:z||_.primaryColor}).background}}),O&&L.createElement(Rt,{className:y.label},O)))}):null;return L.createElement(At,Uz({className:v(y.root,r),ref:t},g),b||L.createElement("div",{role:"progressbar","aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":i,"aria-label":f,className:y.bar,style:{width:`${i}%`}},c?L.createElement(Rt,{className:y.label},c):""))});kAe.displayName="@mantine/core/Progress";var dlt=Object.defineProperty,Ile=Object.getOwnPropertySymbols,hlt=Object.prototype.hasOwnProperty,plt=Object.prototype.propertyIsEnumerable,Ole=(e,t,n)=>t in e?dlt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,mlt=(e,t)=>{for(var n in t||(t={}))hlt.call(t,n)&&Ole(e,n,t[n]);if(Ile)for(var n of Ile(t))plt.call(t,n)&&Ole(e,n,t[n]);return e};function glt(e){return L.createElement("svg",mlt({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 5 5"},e),L.createElement("path",{fill:"currentColor",d:"M0 2.5a2.5 2.5 0 115 0 2.5 2.5 0 01-5 0z"}))}const $Ae=A.createContext(null),ylt=$Ae.Provider,vlt=()=>A.useContext($Ae);var _lt=Object.defineProperty,qN=Object.getOwnPropertySymbols,RAe=Object.prototype.hasOwnProperty,NAe=Object.prototype.propertyIsEnumerable,Ple=(e,t,n)=>t in e?_lt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,kle=(e,t)=>{for(var n in t||(t={}))RAe.call(t,n)&&Ple(e,n,t[n]);if(qN)for(var n of qN(t))NAe.call(t,n)&&Ple(e,n,t[n]);return e},blt=(e,t)=>{var n={};for(var r in e)RAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&qN)for(var r of qN(e))t.indexOf(r)<0&&NAe.call(e,r)&&(n[r]=e[r]);return n};const wlt={orientation:"horizontal",spacing:"lg",offset:"xs",size:"sm"},DAe=A.forwardRef((e,t)=>{const n=Ct("RadioGroup",wlt,e),{children:r,value:i,defaultValue:s,onChange:o,orientation:a,spacing:u,size:l,wrapperProps:c,unstyled:f,offset:d,name:h}=n,p=blt(n,["children","value","defaultValue","onChange","orientation","spacing","size","wrapperProps","unstyled","offset","name"]),[m,g]=Ta({value:i,defaultValue:s,finalValue:"",onChange:o}),y=v=>g(v.currentTarget.value);return L.createElement(ylt,{value:{value:m,onChange:y,size:l,name:h}},L.createElement(is.Wrapper,kle(kle({labelElement:"div",size:l,__staticSelector:"RadioGroup",ref:t,unstyled:f},c),p),L.createElement(UTe,{spacing:u,orientation:a,unstyled:f,role:"radiogroup",offset:d},r)))});DAe.displayName="@mantine/core/RadioGroup";var Elt=Object.defineProperty,xlt=Object.defineProperties,Slt=Object.getOwnPropertyDescriptors,$le=Object.getOwnPropertySymbols,Tlt=Object.prototype.hasOwnProperty,Alt=Object.prototype.propertyIsEnumerable,Rle=(e,t,n)=>t in e?Elt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Clt=(e,t)=>{for(var n in t||(t={}))Tlt.call(t,n)&&Rle(e,n,t[n]);if($le)for(var n of $le(t))Alt.call(t,n)&&Rle(e,n,t[n]);return e},Ilt=(e,t)=>xlt(e,Slt(t));const h9={xs:16,sm:20,md:24,lg:30,xl:36},ZO={xs:6,sm:8,md:10,lg:14,xl:16};var Olt=ht((e,{size:t,color:n,transitionDuration:r,labelPosition:i,error:s},o)=>{const a=e.fn.variant({variant:"filled",color:n}),u=e.fn.variant({variant:"filled",color:"red"}).background;return{inner:{order:i==="left"?2:1,position:"relative",alignSelf:"flex-start"},icon:{ref:o("icon"),color:e.white,opacity:0,transform:"scale(0.75) translateY(2px)",transition:`opacity ${r}ms ${e.transitionTimingFunction}`,pointerEvents:"none",width:e.fn.size({sizes:ZO,size:t}),height:e.fn.size({sizes:ZO,size:t}),position:"absolute",top:`calc(50% - ${e.fn.size({sizes:ZO,size:t})/2}px)`,left:`calc(50% - ${e.fn.size({sizes:ZO,size:t})/2}px)`},radio:Ilt(Clt({},e.fn.focusStyles()),{backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.white,border:`1px solid ${s?u:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[4]}`,position:"relative",appearance:"none",width:e.fn.size({sizes:h9,size:t}),height:e.fn.size({sizes:h9,size:t}),borderRadius:e.fn.size({sizes:h9,size:t}),margin:0,display:"flex",alignItems:"center",justifyContent:"center",transitionProperty:"background-color, border-color",transitionTimingFunction:e.transitionTimingFunction,transitionDuration:`${r}ms`,cursor:e.cursorType,"&:checked":{background:a.background,borderColor:a.background,[`& + .${o("icon")}`]:{opacity:1,transform:"scale(1)"}},"&:disabled":{borderColor:e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[4],backgroundColor:e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[1],[`& + .${o("icon")}`]:{color:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[4]}}})}}),Plt=Object.defineProperty,WN=Object.getOwnPropertySymbols,LAe=Object.prototype.hasOwnProperty,MAe=Object.prototype.propertyIsEnumerable,Nle=(e,t,n)=>t in e?Plt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,eP=(e,t)=>{for(var n in t||(t={}))LAe.call(t,n)&&Nle(e,n,t[n]);if(WN)for(var n of WN(t))MAe.call(t,n)&&Nle(e,n,t[n]);return e},klt=(e,t)=>{var n={};for(var r in e)LAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&WN)for(var r of WN(e))t.indexOf(r)<0&&MAe.call(e,r)&&(n[r]=e[r]);return n};const $lt={icon:glt,transitionDuration:100,size:"sm",labelPosition:"right"},GN=A.forwardRef((e,t)=>{var n,r;const i=Ct("Radio",$lt,e),{className:s,style:o,id:a,label:u,size:l,title:c,disabled:f,color:d,classNames:h,styles:p,sx:m,icon:g,transitionDuration:y,wrapperProps:v,unstyled:_,labelPosition:b,description:E,error:w}=i,x=klt(i,["className","style","id","label","size","title","disabled","color","classNames","styles","sx","icon","transitionDuration","wrapperProps","unstyled","labelPosition","description","error"]),S=vlt(),I=(n=S==null?void 0:S.size)!=null?n:l,C=e.size?l:I,{classes:O}=Olt({color:d,size:C,transitionDuration:y,labelPosition:b,error:!!w},{classNames:h,styles:p,unstyled:_,name:"Radio"}),{systemStyles:z,rest:N}=yf(x),$=vl(a),D=S?{checked:S.value===N.value,name:(r=N.name)!=null?r:S.name,onChange:S.onChange}:{};return L.createElement(WG,eP(eP({className:s,sx:m,style:o,id:$,size:C,labelPosition:b,label:u,description:E,error:w,disabled:f,__staticSelector:"Radio",classNames:h,styles:p,unstyled:_,"data-checked":D.checked||void 0},z),v),L.createElement("div",{className:O.inner},L.createElement("input",eP(eP({ref:t,className:O.radio,type:"radio",id:$,disabled:f},N),D)),L.createElement(g,{className:O.icon,"aria-hidden":!0})))});GN.displayName="@mantine/core/Radio";GN.Group=DAe;var Rlt=Object.defineProperty,Nlt=Object.defineProperties,Dlt=Object.getOwnPropertyDescriptors,Dle=Object.getOwnPropertySymbols,Llt=Object.prototype.hasOwnProperty,Mlt=Object.prototype.propertyIsEnumerable,Lle=(e,t,n)=>t in e?Rlt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,tP=(e,t)=>{for(var n in t||(t={}))Llt.call(t,n)&&Lle(e,n,t[n]);if(Dle)for(var n of Dle(t))Mlt.call(t,n)&&Lle(e,n,t[n]);return e},Flt=(e,t)=>Nlt(e,Dlt(t));const Uk=4,Mle={xs:"3px 6px",sm:"5px 10px",md:"7px 14px",lg:"9px 16px",xl:"12px 20px"};var Blt=ht((e,{fullWidth:t,color:n,radius:r,shouldAnimate:i,transitionDuration:s,transitionTimingFunction:o,size:a,orientation:u},l)=>{const c=u==="vertical",f=e.fn.variant({variant:"filled",color:n});return{label:Flt(tP(tP({ref:l("label")},e.fn.focusStyles()),e.fn.fontStyles()),{WebkitTapHighlightColor:"transparent",borderRadius:e.fn.radius(r),fontWeight:500,fontSize:a in e.fontSizes?e.fontSizes[a]:e.fontSizes.sm,cursor:"pointer",display:"block",textAlign:"center",padding:Mle[a in Mle?a:"sm"],whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",userSelect:"none",color:e.colorScheme==="dark"?e.colors.dark[1]:e.colors.gray[7],transition:`color ${i?0:s}ms ${o||e.transitionTimingFunction}`,"&:hover":{color:e.colorScheme==="dark"?e.colors.dark[0]:e.black}}),control:{ref:l("control"),position:"relative",boxSizing:"border-box",flex:1,zIndex:2,transition:`border-left-color ${i?0:s}ms ${o||e.transitionTimingFunction}`,"&:not(:first-of-type)":{borderStyle:"solid",borderWidth:c?"1px 0 0 0":"0 0 0 1px",borderColor:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[3]}},input:{height:0,width:0,position:"absolute",overflow:"hidden",whiteSpace:"nowrap",opacity:0,"&:focus":{outline:"none",[`& + .${l("label")}`]:tP({},e.focusRing==="always"||e.focusRing==="auto"?e.focusRingStyles.styles(e):e.focusRingStyles.resetStyles(e)),"&:focus:not(:focus-visible)":{[`& + .${l("label")}`]:tP({},e.focusRing==="auto"||e.focusRing==="never"?e.focusRingStyles.resetStyles(e):null)}}},root:{position:"relative",display:t||c?"flex":"inline-flex",width:c&&!t?"max-content":"auto",flexDirection:c?"column":"row",backgroundColor:e.colorScheme==="dark"?e.colors.dark[8]:e.colors.gray[1],borderRadius:e.fn.radius(r),overflow:"hidden",padding:Uk},controlActive:{borderLeftColor:"transparent !important",borderTopColor:"transparent !important",[`& + .${l("control")}`]:{borderLeftColor:"transparent !important",borderTopColor:"transparent !important"},borderRadius:e.fn.radius(r),boxShadow:i?n||e.colorScheme==="dark"?"none":e.shadows.xs:void 0,backgroundColor:i?n?f.background:e.colorScheme==="dark"?e.colors.dark[5]:e.white:void 0},labelActive:{"&, &:hover":{color:n||e.colorScheme==="dark"?e.white:e.black}},disabled:{"&, &:hover":{color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[5],cursor:"not-allowed"}},active:{boxSizing:"border-box",borderRadius:e.fn.radius(r),position:"absolute",zIndex:1,boxShadow:n||e.colorScheme==="dark"?"none":e.shadows.xs,transition:`transform ${i?0:s}ms ${e.transitionTimingFunction}, width ${i?0:s/2}ms ${o||e.transitionTimingFunction}`,backgroundColor:n?f.background:e.colorScheme==="dark"?e.colors.dark[5]:e.white}}}),jlt=Object.defineProperty,YN=Object.getOwnPropertySymbols,FAe=Object.prototype.hasOwnProperty,BAe=Object.prototype.propertyIsEnumerable,Fle=(e,t,n)=>t in e?jlt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,zlt=(e,t)=>{for(var n in t||(t={}))FAe.call(t,n)&&Fle(e,n,t[n]);if(YN)for(var n of YN(t))BAe.call(t,n)&&Fle(e,n,t[n]);return e},Ult=(e,t)=>{var n={};for(var r in e)FAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&YN)for(var r of YN(e))t.indexOf(r)<0&&BAe.call(e,r)&&(n[r]=e[r]);return n};const Vlt={disabled:!1,size:"sm",transitionDuration:200},jAe=A.forwardRef((e,t)=>{var n,r,i,s;const o=Ct("SegmentedControl",Vlt,e),{className:a,disabled:u,data:l,name:c,value:f,onChange:d,color:h,fullWidth:p,radius:m,size:g,transitionDuration:y,transitionTimingFunction:v,classNames:_,styles:b,defaultValue:E,orientation:w,unstyled:x}=o,S=Ult(o,["className","disabled","data","name","value","onChange","color","fullWidth","radius","size","transitionDuration","transitionTimingFunction","classNames","styles","defaultValue","orientation","unstyled"]),I=as(),C=XM(),O=I.respectReducedMotion?C:!1,z=l.map(ae=>typeof ae=="string"?{label:ae,value:ae}:ae),N=A.useRef(),[$,D]=A.useState(!1),[B,V]=Ta({value:f,defaultValue:E,finalValue:Array.isArray(z)&&(s=(i=(n=z.find(ae=>!ae.disabled))==null?void 0:n.value)!=null?i:(r=z[0])==null?void 0:r.value)!=null?s:null,onChange:d}),{classes:j,cx:G}=Blt({size:g,fullWidth:p,color:h,radius:m,shouldAnimate:O||!$,transitionDuration:y,transitionTimingFunction:v,orientation:w},{classNames:_,styles:b,unstyled:x,name:"SegmentedControl"}),[U,P]=A.useState({width:0,height:0,translate:[0,0]}),k=vl(c),H=A.useRef({}),[M,F]=wb();TG(()=>{N.current?D(!0):(N.current=!0,D(!1))}),A.useEffect(()=>{if(B in H.current&&M.current){const ae=H.current[B],ce=ae.getBoundingClientRect(),le=ae.offsetWidth/ce.width,ge=ce.width*le||0,ue=ce.height*le||0,Fe=F.width-ae.parentElement.offsetLeft+Uk-ge,ke=ae.parentElement.offsetLeft-Uk;P({width:ge,height:ue,translate:[I.dir==="rtl"?Fe:ke,ae.parentElement.offsetTop-Uk]})}},[B,F]);const J=z.map(ae=>L.createElement("div",{className:G(j.control,{[j.controlActive]:B===ae.value}),key:ae.value},L.createElement("input",{className:j.input,disabled:u||ae.disabled,type:"radio",name:k,value:ae.value,id:`${k}-${ae.value}`,checked:B===ae.value,onChange:()=>V(ae.value)}),L.createElement("label",{className:G(j.label,{[j.labelActive]:B===ae.value,[j.disabled]:u||ae.disabled}),htmlFor:`${k}-${ae.value}`,ref:ce=>{H.current[ae.value]=ce}},ae.label))),se=Ts(M,t);return z.length===0?null:L.createElement(At,zlt({className:G(j.root,a),ref:se},S),typeof B=="string"&&$&&L.createElement(At,{component:"span",className:j.active,sx:{width:U.width,height:U.height,transform:`translate(${U.translate[0]}px, ${U.translate[1]}px )`}}),J)});jAe.displayName="@mantine/core/SegmentedControl";function Hlt({data:e,searchable:t,limit:n,searchValue:r,filter:i,value:s,filterDataOnExactSearchMatch:o}){if(!t)return e;const a=s!=null&&e.find(l=>l.value===s)||null;if(a&&!o&&(a==null?void 0:a.label)===r)return e;const u=[];for(let l=0;l<e.length&&(i(r,e[l])&&u.push(e[l]),!(u.length>=n));l+=1);return u}var qlt=ht(()=>({input:{"&:not(:disabled)":{cursor:"pointer","&::selection":{backgroundColor:"transparent"}}}})),Wlt=Object.defineProperty,Glt=Object.defineProperties,Ylt=Object.getOwnPropertyDescriptors,KN=Object.getOwnPropertySymbols,zAe=Object.prototype.hasOwnProperty,UAe=Object.prototype.propertyIsEnumerable,Ble=(e,t,n)=>t in e?Wlt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,qx=(e,t)=>{for(var n in t||(t={}))zAe.call(t,n)&&Ble(e,n,t[n]);if(KN)for(var n of KN(t))UAe.call(t,n)&&Ble(e,n,t[n]);return e},p9=(e,t)=>Glt(e,Ylt(t)),Klt=(e,t)=>{var n={};for(var r in e)zAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&KN)for(var r of KN(e))t.indexOf(r)<0&&UAe.call(e,r)&&(n[r]=e[r]);return n};function Xlt(e,t){return t.label.toLowerCase().trim().includes(e.toLowerCase().trim())}function Qlt(e,t){return!!e&&!t.some(n=>n.label.toLowerCase()===e.toLowerCase())}const Jlt={required:!1,size:"sm",shadow:"sm",itemComponent:kG,transition:"fade",transitionDuration:0,initiallyOpened:!1,filter:Xlt,maxDropdownHeight:220,searchable:!1,clearable:!1,limit:1/0,disabled:!1,creatable:!1,shouldCreate:Qlt,selectOnBlur:!1,switchDirectionOnFlip:!1,filterDataOnExactSearchMatch:!1,zIndex:Tu("popover"),clearButtonTabIndex:0,positionDependencies:[],dropdownPosition:"flip"},VAe=A.forwardRef((e,t)=>{const n=tTe("Select",Jlt,e),{inputProps:r,wrapperProps:i,shadow:s,data:o,value:a,defaultValue:u,onChange:l,itemComponent:c,onKeyDown:f,onBlur:d,onFocus:h,transition:p,transitionDuration:m,initiallyOpened:g,transitionTimingFunction:y,unstyled:v,classNames:_,styles:b,filter:E,maxDropdownHeight:w,searchable:x,clearable:S,nothingFound:I,clearButtonLabel:C,limit:O,disabled:z,onSearchChange:N,searchValue:$,rightSection:D,rightSectionWidth:B,creatable:V,getCreateLabel:j,shouldCreate:G,selectOnBlur:U,onCreate:P,dropdownComponent:k,onDropdownClose:H,onDropdownOpen:M,withinPortal:F,switchDirectionOnFlip:J,zIndex:se,name:ae,dropdownPosition:ce,allowDeselect:le,placeholder:ge,filterDataOnExactSearchMatch:ue,clearButtonTabIndex:Fe,form:ke,positionDependencies:Ge,readOnly:Re}=n,Oe=Klt(n,["inputProps","wrapperProps","shadow","data","value","defaultValue","onChange","itemComponent","onKeyDown","onBlur","onFocus","transition","transitionDuration","initiallyOpened","transitionTimingFunction","unstyled","classNames","styles","filter","maxDropdownHeight","searchable","clearable","nothingFound","clearButtonLabel","limit","disabled","onSearchChange","searchValue","rightSection","rightSectionWidth","creatable","getCreateLabel","shouldCreate","selectOnBlur","onCreate","dropdownComponent","onDropdownClose","onDropdownOpen","withinPortal","switchDirectionOnFlip","zIndex","name","dropdownPosition","allowDeselect","placeholder","filterDataOnExactSearchMatch","clearButtonTabIndex","form","positionDependencies","readOnly"]),{classes:Le,cx:Ut,theme:Qe}=qlt(),[je,bt]=A.useState(g),[et,ut]=A.useState(-1),lt=A.useRef(),jt=A.useRef({}),[Dn,he]=A.useState("column"),_e=Dn==="column",{scrollIntoView:Pe,targetRef:it,scrollableRef:Ye}=QEe({duration:0,offset:5,cancelable:!1,isList:!0}),at=le===void 0?S:le,tt=Ce=>{if(je!==Ce){bt(Ce);const ft=Ce?M:H;typeof ft=="function"&&ft()}},vt=V&&typeof j=="function";let In=null;const Wt=o.map(Ce=>typeof Ce=="string"?{label:Ce,value:Ce}:Ce),Vt=pEe({data:Wt}),[hr,Yn,ku]=Ta({value:a,defaultValue:u,finalValue:null,onChange:l}),Mr=Vt.find(Ce=>Ce.value===hr),[us,ti]=Ta({value:$,defaultValue:(Mr==null?void 0:Mr.label)||"",finalValue:void 0,onChange:N}),Ei=Ce=>{ti(Ce),x&&typeof N=="function"&&N(Ce)},qr=()=>{var Ce;Re||(Yn(null),ku||Ei(""),(Ce=lt.current)==null||Ce.focus())};A.useEffect(()=>{const Ce=Vt.find(ft=>ft.value===hr);Ce?Ei(Ce.label):(!vt||!hr)&&Ei("")},[hr]),A.useEffect(()=>{Mr&&(!x||!je)&&Ei(Mr.label)},[Mr==null?void 0:Mr.label]);const yr=Ce=>{if(!Re)if(at&&(Mr==null?void 0:Mr.value)===Ce.value)Yn(null),tt(!1);else{if(Ce.creatable&&typeof P=="function"){const ft=P(Ce.value);typeof ft<"u"&&ft!==null&&Yn(typeof ft=="string"?ft:ft.value)}else Yn(Ce.value);ku||Ei(Ce.label),ut(-1),tt(!1),lt.current.focus()}},gt=Hlt({data:Vt,searchable:x,limit:O,searchValue:us,filter:E,filterDataOnExactSearchMatch:ue,value:hr});vt&&G(us,gt)&&(In=j(us),gt.push({label:us,value:us,creatable:!0}));const Fr=(Ce,ft,Bt)=>{let St=Ce;for(;Bt(St);)if(St=ft(St),!gt[St].disabled)return St;return Ce};_s(()=>{ut(-1)},[us]);const xi=hr?gt.findIndex(Ce=>Ce.value===hr):0,Yi=!Re&&(gt.length>0?je:je&&!!I),Qs=()=>{ut(Ce=>{var ft;const Bt=Fr(Ce,St=>St-1,St=>St>0);return it.current=jt.current[(ft=gt[Bt])==null?void 0:ft.value],Yi&&Pe({alignment:_e?"start":"end"}),Bt})},Ma=()=>{ut(Ce=>{var ft;const Bt=Fr(Ce,St=>St+1,St=>St<gt.length-1);return it.current=jt.current[(ft=gt[Bt])==null?void 0:ft.value],Yi&&Pe({alignment:_e?"end":"start"}),Bt})},ne=()=>window.setTimeout(()=>{var Ce;it.current=jt.current[(Ce=gt[xi])==null?void 0:Ce.value],Pe({alignment:_e?"end":"start"})},0);_s(()=>{Yi&&ne()},[Yi]);const Q=Ce=>{switch(typeof f=="function"&&f(Ce),Ce.key){case"ArrowUp":{Ce.preventDefault(),je?_e?Qs():Ma():(ut(xi),tt(!0),ne());break}case"ArrowDown":{Ce.preventDefault(),je?_e?Ma():Qs():(ut(xi),tt(!0),ne());break}case"Home":{if(!x){Ce.preventDefault(),je||tt(!0);const ft=gt.findIndex(Bt=>!Bt.disabled);ut(ft),Yi&&Pe({alignment:_e?"end":"start"})}break}case"End":{if(!x){Ce.preventDefault(),je||tt(!0);const ft=gt.map(Bt=>!!Bt.disabled).lastIndexOf(!1);ut(ft),Yi&&Pe({alignment:_e?"end":"start"})}break}case"Escape":{Ce.preventDefault(),tt(!1),ut(-1);break}case" ":{x||(Ce.preventDefault(),gt[et]&&je?yr(gt[et]):(tt(!0),ut(xi),ne()));break}case"Enter":x||Ce.preventDefault(),gt[et]&&je&&(Ce.preventDefault(),yr(gt[et]))}},ie=Ce=>{typeof d=="function"&&d(Ce);const ft=Vt.find(Bt=>Bt.value===hr);U&&gt[et]&&je&&yr(gt[et]),Ei((ft==null?void 0:ft.label)||""),tt(!1)},ve=Ce=>{typeof h=="function"&&h(Ce),x&&tt(!0)},ye=Ce=>{Re||(Ei(Ce.currentTarget.value),S&&Ce.currentTarget.value===""&&Yn(null),ut(-1),tt(!0))},pt=()=>{Re||(tt(!je),hr&&!je&&ut(xi))};return L.createElement(is.Wrapper,p9(qx({},i),{__staticSelector:"Select"}),L.createElement(vg,{opened:Yi,transition:p,transitionDuration:m,shadow:"sm",withinPortal:F,__staticSelector:"Select",onDirectionChange:he,switchDirectionOnFlip:J,zIndex:se,dropdownPosition:ce,positionDependencies:Ge,classNames:_,styles:b,unstyled:v},L.createElement(vg.Target,null,L.createElement("div",{role:"combobox","aria-haspopup":"listbox","aria-owns":Yi?`${r.id}-items`:null,"aria-controls":r.id,"aria-expanded":Yi,onMouseLeave:()=>ut(-1),tabIndex:-1},L.createElement("input",{type:"hidden",name:ae,value:hr||"",form:ke,disabled:z}),L.createElement(is,qx(p9(qx(qx({autoComplete:"off",type:"search"},r),Oe),{ref:Ts(t,lt),onKeyDown:Q,__staticSelector:"Select",value:us,placeholder:ge,onChange:ye,"aria-autocomplete":"list","aria-controls":Yi?`${r.id}-items`:null,"aria-activedescendant":et>=0?`${r.id}-${et}`:null,onMouseDown:pt,onBlur:ie,onFocus:ve,readOnly:!x||Re,disabled:z,"data-mantine-stop-propagation":Yi,name:null,classNames:p9(qx({},_),{input:Ut({[Le.input]:!x},_==null?void 0:_.input)})}),sAe({theme:Qe,rightSection:D,rightSectionWidth:B,styles:b,size:r.size,shouldClear:S&&!!Mr,clearButtonLabel:C,onClear:qr,error:i.error,clearButtonTabIndex:Fe,disabled:z,readOnly:Re}))))),L.createElement(vg.Dropdown,{component:k||t6,maxHeight:w,direction:Dn,id:r.id,innerRef:Ye,__staticSelector:"Select",classNames:_,styles:b},L.createElement(PG,{data:gt,hovered:et,classNames:_,styles:b,isItemSelected:Ce=>Ce===hr,uuid:r.id,__staticSelector:"Select",onItemHover:ut,onItemSelect:yr,itemsRefs:jt,itemComponent:c,size:r.size,nothingFound:I,creatable:vt&&!!In,createLabel:In,"aria-label":i.label,unstyled:v}))))});VAe.displayName="@mantine/core/Select";function XN({value:e,min:t,max:n}){const r=(e-t)/(n-t)*100;return Math.min(Math.max(r,0),100)}function Vz({value:e,containerWidth:t,min:n,max:r,step:i,precision:s}){const a=(t?Math.min(Math.max(e,0),t)/t:e)*(r-n),u=(a!==0?Math.round(a/i)*i:0)+n,l=Math.max(u,n);return s!==void 0?Number(l.toFixed(s)):l}var Zlt=Object.defineProperty,ect=Object.defineProperties,tct=Object.getOwnPropertyDescriptors,jle=Object.getOwnPropertySymbols,nct=Object.prototype.hasOwnProperty,rct=Object.prototype.propertyIsEnumerable,zle=(e,t,n)=>t in e?Zlt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ict=(e,t)=>{for(var n in t||(t={}))nct.call(t,n)&&zle(e,n,t[n]);if(jle)for(var n of jle(t))rct.call(t,n)&&zle(e,n,t[n]);return e},sct=(e,t)=>ect(e,tct(t));const Za={xs:4,sm:6,md:8,lg:10,xl:12};var oct=ht((e,{size:t,disabled:n})=>({root:sct(ict({},e.fn.fontStyles()),{WebkitTapHighlightColor:"transparent",outline:0,height:e.fn.size({sizes:Za,size:t})*2,display:"flex",alignItems:"center",cursor:n?"not-allowed":"pointer",touchAction:"none"})}));const act=oct;var uct=Object.defineProperty,lct=Object.defineProperties,cct=Object.getOwnPropertyDescriptors,Ule=Object.getOwnPropertySymbols,fct=Object.prototype.hasOwnProperty,dct=Object.prototype.propertyIsEnumerable,Vle=(e,t,n)=>t in e?uct(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,hct=(e,t)=>{for(var n in t||(t={}))fct.call(t,n)&&Vle(e,n,t[n]);if(Ule)for(var n of Ule(t))dct.call(t,n)&&Vle(e,n,t[n]);return e},pct=(e,t)=>lct(e,cct(t)),mct=ht((e,{color:t,size:n,disabled:r,thumbSize:i})=>({label:{position:"absolute",top:-36,backgroundColor:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[9],fontSize:e.fontSizes.xs,color:e.white,padding:`calc(${e.spacing.xs}px / 2)`,borderRadius:e.radius.sm,whiteSpace:"nowrap",pointerEvents:"none",userSelect:"none",touchAction:"none"},thumb:pct(hct({},e.fn.focusStyles()),{boxSizing:"border-box",position:"absolute",display:r?"none":"flex",height:i||e.fn.size({sizes:Za,size:n})*2,width:i||e.fn.size({sizes:Za,size:n})*2,backgroundColor:e.colorScheme==="dark"?e.fn.themeColor(t,e.fn.primaryShade()):e.white,border:`4px solid ${e.colorScheme==="dark"?e.white:e.fn.themeColor(t,e.fn.primaryShade())}`,color:e.colorScheme==="dark"?e.white:e.fn.themeColor(t,e.fn.primaryShade()),transform:"translate(-50%, -50%)",top:"50%",cursor:"pointer",borderRadius:1e3,alignItems:"center",justifyContent:"center",transitionDuration:"100ms",transitionProperty:"box-shadow, transform",transitionTimingFunction:e.transitionTimingFunction,zIndex:3,userSelect:"none",touchAction:"none"}),dragging:{transform:"translate(-50%, -50%) scale(1.05)",boxShadow:e.shadows.sm}}));const QN=A.forwardRef(({max:e,min:t,value:n,position:r,label:i,dragging:s,onMouseDown:o,color:a,classNames:u,styles:l,size:c,labelTransition:f,labelTransitionDuration:d,labelTransitionTimingFunction:h,labelAlwaysOn:p,thumbLabel:m,onFocus:g,onBlur:y,showLabelOnHover:v,children:_=null,disabled:b,unstyled:E,thumbSize:w},x)=>{const{classes:S,cx:I,theme:C}=mct({color:a,size:c,disabled:b,thumbSize:w},{classNames:u,styles:l,unstyled:E,name:"Slider"}),[O,z]=A.useState(!1),N=p||s||O||v;return L.createElement(At,{tabIndex:0,role:"slider","aria-label":m,"aria-valuemax":e,"aria-valuemin":t,"aria-valuenow":n,ref:x,className:I(S.thumb,{[S.dragging]:s}),onFocus:()=>{z(!0),typeof g=="function"&&g()},onBlur:()=>{z(!1),typeof y=="function"&&y()},onTouchStart:o,onMouseDown:o,onClick:$=>$.stopPropagation(),style:{[C.dir==="rtl"?"right":"left"]:`${r}%`}},_,L.createElement(FC,{mounted:i!=null&&N,duration:d,transition:f,timingFunction:h||C.transitionTimingFunction},$=>L.createElement("div",{style:$,className:S.label},i)))});QN.displayName="@mantine/core/SliderThumb";function gct({mark:e,offset:t,value:n,inverted:r=!1}){return r?typeof t=="number"&&e.value<=t||e.value>=n:typeof t=="number"?e.value>=t&&e.value<=n:e.value<=n}var yct=ht((e,{size:t,color:n,disabled:r})=>({markWrapper:{position:"absolute",top:0,zIndex:2},mark:{boxSizing:"border-box",border:`${e.fn.size({size:t,sizes:Za})>=8?"2px":"1px"} solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2]}`,height:e.fn.size({sizes:Za,size:t}),width:e.fn.size({sizes:Za,size:t}),borderRadius:1e3,transform:`translateX(-${e.fn.size({sizes:Za,size:t})/2}px)`,backgroundColor:e.white},markFilled:{borderColor:r?e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[4]:e.fn.variant({variant:"filled",color:n}).background},markLabel:{transform:"translate(-50%, 0)",fontSize:e.fontSizes.sm,color:e.colorScheme==="dark"?e.colors.dark[2]:e.colors.gray[6],marginTop:`calc(${e.spacing.xs}px / 2)`,whiteSpace:"nowrap"}}));function HAe({marks:e,color:t,size:n,min:r,max:i,value:s,classNames:o,styles:a,offset:u,onChange:l,disabled:c,unstyled:f,inverted:d}){const{classes:h,cx:p}=yct({size:n,color:t,disabled:c},{classNames:o,styles:a,unstyled:f,name:"Slider"}),m=e.map((g,y)=>L.createElement(At,{className:h.markWrapper,sx:{left:`${XN({value:g.value,min:r,max:i})}%`},key:y},L.createElement("div",{className:p(h.mark,{[h.markFilled]:gct({mark:g,value:s,offset:u,inverted:d})})}),g.label&&L.createElement("div",{className:h.markLabel,onMouseDown:v=>{v.stopPropagation(),l(g.value)},onTouchStart:v=>{v.stopPropagation(),l(g.value)}},g.label)));return L.createElement("div",null,m)}HAe.displayName="@mantine/core/SliderMarks";var vct=ht((e,{radius:t,size:n,color:r,disabled:i,inverted:s})=>({track:{position:"relative",height:e.fn.size({sizes:Za,size:n}),width:"100%",marginRight:e.fn.size({size:n,sizes:Za}),marginLeft:e.fn.size({size:n,sizes:Za}),"&::before":{content:'""',position:"absolute",top:0,bottom:0,borderRadius:e.fn.size({size:t,sizes:e.radius}),right:-e.fn.size({size:n,sizes:Za}),left:-e.fn.size({size:n,sizes:Za}),backgroundColor:s?i?e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[4]:e.fn.variant({variant:"filled",color:r}).background:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2],zIndex:0}},bar:{position:"absolute",zIndex:1,top:0,bottom:0,backgroundColor:s?e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2]:i?e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[4]:e.fn.variant({variant:"filled",color:r}).background,borderRadius:e.fn.size({size:t,sizes:e.radius})}})),_ct=Object.defineProperty,bct=Object.defineProperties,wct=Object.getOwnPropertyDescriptors,JN=Object.getOwnPropertySymbols,qAe=Object.prototype.hasOwnProperty,WAe=Object.prototype.propertyIsEnumerable,Hle=(e,t,n)=>t in e?_ct(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ect=(e,t)=>{for(var n in t||(t={}))qAe.call(t,n)&&Hle(e,n,t[n]);if(JN)for(var n of JN(t))WAe.call(t,n)&&Hle(e,n,t[n]);return e},xct=(e,t)=>bct(e,wct(t)),Sct=(e,t)=>{var n={};for(var r in e)qAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&JN)for(var r of JN(e))t.indexOf(r)<0&&WAe.call(e,r)&&(n[r]=e[r]);return n};function XG(e){var t=e,{filled:n,size:r,color:i,classNames:s,styles:o,radius:a,children:u,offset:l,onMouseLeave:c,onMouseEnter:f,disabled:d,marksOffset:h,unstyled:p,inverted:m}=t,g=Sct(t,["filled","size","color","classNames","styles","radius","children","offset","onMouseLeave","onMouseEnter","disabled","marksOffset","unstyled","inverted"]);const{classes:y}=vct({color:i,size:r,radius:a,disabled:d,inverted:m},{classNames:s,styles:o,unstyled:p,name:"Slider"});return L.createElement("div",{className:y.track,onMouseLeave:c,onMouseEnter:f},L.createElement(At,{className:y.bar,sx:v=>({left:`calc(${l}% - ${v.fn.size({size:r,sizes:Za})}px)`,width:`calc(${n}% + ${v.fn.size({size:r,sizes:Za})}px)`})}),u,L.createElement(HAe,xct(Ect({},g),{size:r,color:i,offset:h,classNames:s,styles:o,disabled:d,unstyled:p,inverted:m})))}XG.displayName="@mantine/core/SliderTrack";var Tct=Object.defineProperty,Act=Object.defineProperties,Cct=Object.getOwnPropertyDescriptors,ZN=Object.getOwnPropertySymbols,GAe=Object.prototype.hasOwnProperty,YAe=Object.prototype.propertyIsEnumerable,qle=(e,t,n)=>t in e?Tct(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ict=(e,t)=>{for(var n in t||(t={}))GAe.call(t,n)&&qle(e,n,t[n]);if(ZN)for(var n of ZN(t))YAe.call(t,n)&&qle(e,n,t[n]);return e},Oct=(e,t)=>Act(e,Cct(t)),Pct=(e,t)=>{var n={};for(var r in e)GAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&ZN)for(var r of ZN(e))t.indexOf(r)<0&&YAe.call(e,r)&&(n[r]=e[r]);return n};const QG=A.forwardRef((e,t)=>{var n=e,{className:r,size:i,classNames:s,styles:o,disabled:a,unstyled:u}=n,l=Pct(n,["className","size","classNames","styles","disabled","unstyled"]);const{classes:c,cx:f}=act({size:i,disabled:a},{classNames:s,styles:o,unstyled:u,name:"Slider"});return L.createElement(At,Oct(Ict({},l),{tabIndex:-1,className:f(c.root,r),ref:t}))});QG.displayName="@mantine/core/SliderRoot";var kct=Object.defineProperty,$ct=Object.defineProperties,Rct=Object.getOwnPropertyDescriptors,eD=Object.getOwnPropertySymbols,KAe=Object.prototype.hasOwnProperty,XAe=Object.prototype.propertyIsEnumerable,Wle=(e,t,n)=>t in e?kct(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Nct=(e,t)=>{for(var n in t||(t={}))KAe.call(t,n)&&Wle(e,n,t[n]);if(eD)for(var n of eD(t))XAe.call(t,n)&&Wle(e,n,t[n]);return e},Dct=(e,t)=>$ct(e,Rct(t)),Lct=(e,t)=>{var n={};for(var r in e)KAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&eD)for(var r of eD(e))t.indexOf(r)<0&&XAe.call(e,r)&&(n[r]=e[r]);return n};const Mct={size:"md",radius:"xl",min:0,max:100,step:1,marks:[],label:e=>e,labelTransition:"skew-down",labelTransitionDuration:0,labelAlwaysOn:!1,thumbLabel:"",showLabelOnHover:!0,disabled:!1,scale:e=>e},JG=A.forwardRef((e,t)=>{const n=Ct("Slider",Mct,e),{classNames:r,styles:i,color:s,value:o,onChange:a,onChangeEnd:u,size:l,radius:c,min:f,max:d,step:h,precision:p,defaultValue:m,name:g,marks:y,label:v,labelTransition:_,labelTransitionDuration:b,labelTransitionTimingFunction:E,labelAlwaysOn:w,thumbLabel:x,showLabelOnHover:S,thumbChildren:I,disabled:C,unstyled:O,thumbSize:z,scale:N,inverted:$}=n,D=Lct(n,["classNames","styles","color","value","onChange","onChangeEnd","size","radius","min","max","step","precision","defaultValue","name","marks","label","labelTransition","labelTransitionDuration","labelTransitionTimingFunction","labelAlwaysOn","thumbLabel","showLabelOnHover","thumbChildren","disabled","unstyled","thumbSize","scale","inverted"]),B=as(),[V,j]=A.useState(!1),[G,U]=Ta({value:typeof o=="number"?ef(o,f,d):o,defaultValue:typeof m=="number"?ef(m,f,d):m,finalValue:ef(0,f,d),onChange:a}),P=A.useRef(G),k=A.useRef(),H=XN({value:G,min:f,max:d}),M=N(G),F=typeof v=="function"?v(M):v,J=A.useCallback(({x:ge})=>{if(!C){const ue=Vz({value:ge,min:f,max:d,step:h,precision:p});U(ue),P.current=ue}},[C,f,d,h,p]),{ref:se,active:ae}=XEe(J,{onScrubEnd:()=>u==null?void 0:u(P.current)},B.dir),ce=ge=>{ge.stopPropagation()},le=ge=>{if(!C)switch(ge.key){case"ArrowUp":{ge.preventDefault(),k.current.focus();const ue=Math.min(Math.max(G+h,f),d);u==null||u(ue),U(ue);break}case"ArrowRight":{ge.preventDefault(),k.current.focus();const ue=Math.min(Math.max(B.dir==="rtl"?G-h:G+h,f),d);u==null||u(ue),U(ue);break}case"ArrowDown":{ge.preventDefault(),k.current.focus();const ue=Math.min(Math.max(G-h,f),d);u==null||u(ue),U(ue);break}case"ArrowLeft":{ge.preventDefault(),k.current.focus();const ue=Math.min(Math.max(B.dir==="rtl"?G+h:G-h,f),d);u==null||u(ue),U(ue);break}case"Home":{ge.preventDefault(),k.current.focus(),u==null||u(f),U(f);break}case"End":{ge.preventDefault(),k.current.focus(),u==null||u(d),U(d);break}}};return L.createElement(QG,Dct(Nct({},D),{size:l,ref:Ts(se,t),onKeyDownCapture:le,onMouseDownCapture:()=>{var ge;return(ge=se.current)==null?void 0:ge.focus()},classNames:r,styles:i,disabled:C,unstyled:O}),L.createElement(XG,{inverted:$,offset:0,filled:H,marks:y,size:l,radius:c,color:s,min:f,max:d,value:M,onChange:U,onMouseEnter:S?()=>j(!0):void 0,onMouseLeave:S?()=>j(!1):void 0,classNames:r,styles:i,disabled:C,unstyled:O},L.createElement(QN,{max:d,min:f,value:M,position:H,dragging:ae,color:s,size:l,label:F,ref:k,onMouseDown:ce,labelTransition:_,labelTransitionDuration:b,labelTransitionTimingFunction:E,labelAlwaysOn:w,classNames:r,styles:i,thumbLabel:x,showLabelOnHover:S&&V,disabled:C,unstyled:O,thumbSize:z},I)),L.createElement("input",{type:"hidden",name:g,value:M}))});JG.displayName="@mantine/core/Slider";function Fct(e){return"TouchEvent"in window&&e instanceof window.TouchEvent?e.touches[0].clientX:e.clientX}var Bct=Object.defineProperty,jct=Object.defineProperties,zct=Object.getOwnPropertyDescriptors,tD=Object.getOwnPropertySymbols,QAe=Object.prototype.hasOwnProperty,JAe=Object.prototype.propertyIsEnumerable,Gle=(e,t,n)=>t in e?Bct(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,m9=(e,t)=>{for(var n in t||(t={}))QAe.call(t,n)&&Gle(e,n,t[n]);if(tD)for(var n of tD(t))JAe.call(t,n)&&Gle(e,n,t[n]);return e},g9=(e,t)=>jct(e,zct(t)),Uct=(e,t)=>{var n={};for(var r in e)QAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&tD)for(var r of tD(e))t.indexOf(r)<0&&JAe.call(e,r)&&(n[r]=e[r]);return n};const Vct={size:"md",radius:"xl",min:0,max:100,minRange:10,step:1,marks:[],label:e=>e,labelTransition:"skew-down",labelTransitionDuration:0,labelAlwaysOn:!1,thumbFromLabel:"",thumbToLabel:"",showLabelOnHover:!0,disabled:!1,scale:e=>e},Hz=A.forwardRef((e,t)=>{const n=Ct("RangeSlider",Vct,e),{classNames:r,styles:i,color:s,value:o,onChange:a,onChangeEnd:u,size:l,radius:c,min:f,max:d,minRange:h,step:p,precision:m,defaultValue:g,name:y,marks:v,label:_,labelTransition:b,labelTransitionDuration:E,labelTransitionTimingFunction:w,labelAlwaysOn:x,thumbFromLabel:S,thumbToLabel:I,showLabelOnHover:C,thumbChildren:O,disabled:z,unstyled:N,thumbSize:$,scale:D,inverted:B}=n,V=Uct(n,["classNames","styles","color","value","onChange","onChangeEnd","size","radius","min","max","minRange","step","precision","defaultValue","name","marks","label","labelTransition","labelTransitionDuration","labelTransitionTimingFunction","labelAlwaysOn","thumbFromLabel","thumbToLabel","showLabelOnHover","thumbChildren","disabled","unstyled","thumbSize","scale","inverted"]),j=as(),[G,U]=A.useState(-1),[P,k]=A.useState(!1),[H,M]=Ta({value:o,defaultValue:g,finalValue:[f,d],onChange:a}),F=A.useRef(H),J=A.useRef([]),se=A.useRef(void 0),ae=[XN({value:H[0],min:f,max:d}),XN({value:H[1],min:f,max:d})],ce=Qe=>{M(Qe),F.current=Qe};A.useEffect(()=>{Array.isArray(o)&&(F.current=o)},Array.isArray(o)?[o[0],o[1]]:[null,null]);const le=(Qe,je,bt)=>{const et=[...F.current];et[je]=Qe,je===0&&(Qe>et[1]-(h-1e-9)&&(et[1]=Math.min(Qe+h,d)),Qe>(d-(h-1e-9)||f)&&(et[je]=F.current[je])),je===1&&(Qe<et[0]+h&&(et[0]=Math.max(Qe-h,f)),Qe<et[0]+h&&(et[je]=F.current[je])),ce(et),bt&&(u==null||u(F.current))},ge=Qe=>{if(!z){const je=Vz({value:Qe,min:f,max:d,step:p,precision:m});le(je,se.current,!1)}},{ref:ue,active:Fe}=XEe(({x:Qe})=>ge(Qe),{onScrubEnd:()=>u==null?void 0:u(F.current)},j.dir);function ke(Qe,je){Qe.stopPropagation(),se.current=je}const Ge=Qe=>{ue.current.focus();const je=ue.current.getBoundingClientRect(),bt=Fct(Qe.nativeEvent),et=Vz({value:bt-je.left,max:d,min:f,step:p,containerWidth:je.width}),ut=Math.abs(H[0]-et)>Math.abs(H[1]-et)?1:0,lt=j.dir==="ltr"?ut:ut===1?0:1;se.current=lt},Re=()=>G!==1&&G!==0?(U(0),0):G,Oe=Qe=>{if(!z)switch(Qe.key){case"ArrowUp":{Qe.preventDefault();const je=Re();J.current[je].focus(),le(Math.min(Math.max(F.current[je]+p,f),d),je,!0);break}case"ArrowRight":{Qe.preventDefault();const je=Re();J.current[je].focus(),le(Math.min(Math.max(j.dir==="rtl"?F.current[je]-p:F.current[je]+p,f),d),je,!0);break}case"ArrowDown":{Qe.preventDefault();const je=Re();J.current[je].focus(),le(Math.min(Math.max(F.current[je]-p,f),d),je,!0);break}case"ArrowLeft":{Qe.preventDefault();const je=Re();J.current[je].focus(),le(Math.min(Math.max(j.dir==="rtl"?F.current[je]+p:F.current[je]-p,f),d),je,!0);break}}},Le={max:d,min:f,color:s,size:l,labelTransition:b,labelTransitionDuration:E,labelTransitionTimingFunction:w,labelAlwaysOn:x,onBlur:()=>U(-1),classNames:r,styles:i},Ut=Array.isArray(O);return L.createElement(QG,g9(m9({},V),{size:l,ref:Ts(ue,t),onTouchStartCapture:Ge,onTouchEndCapture:()=>{se.current=-1},onMouseDownCapture:Ge,onMouseUpCapture:()=>{se.current=-1},onKeyDownCapture:Oe,styles:i,classNames:r,disabled:z,unstyled:N}),L.createElement(XG,{offset:ae[0],marksOffset:H[0],filled:ae[1]-ae[0],marks:v,inverted:B,size:l,radius:c,color:s,min:f,max:d,value:H[1],styles:i,classNames:r,onMouseEnter:C?()=>k(!0):void 0,onMouseLeave:C?()=>k(!1):void 0,onChange:Qe=>{const je=Math.abs(H[0]-Qe)>Math.abs(H[1]-Qe)?1:0,bt=[...H];bt[je]=Qe,ce(bt)},disabled:z,unstyled:N},L.createElement(QN,g9(m9({},Le),{value:D(H[0]),position:ae[0],dragging:Fe,label:typeof _=="function"?_(D(H[0])):_,ref:Qe=>{J.current[0]=Qe},thumbLabel:S,onMouseDown:Qe=>ke(Qe,0),onFocus:()=>U(0),showLabelOnHover:C&&P,disabled:z,unstyled:N,thumbSize:$}),Ut?O[0]:O),L.createElement(QN,g9(m9({},Le),{thumbLabel:I,value:D(H[1]),position:ae[1],dragging:Fe,label:typeof _=="function"?_(D(H[1])):_,ref:Qe=>{J.current[1]=Qe},onMouseDown:Qe=>ke(Qe,1),onFocus:()=>U(1),showLabelOnHover:C&&P,disabled:z,unstyled:N,thumbSize:$}),Ut?O[1]:O)),L.createElement("input",{type:"hidden",name:`${y}_from`,value:H[0]}),L.createElement("input",{type:"hidden",name:`${y}_to`,value:H[1]}))});Hz.displayName="@mantine/core/RangeSlider";var Hct=Object.defineProperty,nD=Object.getOwnPropertySymbols,ZAe=Object.prototype.hasOwnProperty,eCe=Object.prototype.propertyIsEnumerable,Yle=(e,t,n)=>t in e?Hct(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,qct=(e,t)=>{for(var n in t||(t={}))ZAe.call(t,n)&&Yle(e,n,t[n]);if(nD)for(var n of nD(t))eCe.call(t,n)&&Yle(e,n,t[n]);return e},Wct=(e,t)=>{var n={};for(var r in e)ZAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&nD)for(var r of nD(e))t.indexOf(r)<0&&eCe.call(e,r)&&(n[r]=e[r]);return n};const Gct={w:0,h:0},J2=A.forwardRef((e,t)=>{const n=Ct("Space",Gct,e),{w:r,h:i,sx:s}=n,o=Wct(n,["w","h","sx"]);return L.createElement(At,qct({ref:t,sx:[a=>{const u=a.fn.size({size:r,sizes:a.spacing}),l=a.fn.size({size:i,sizes:a.spacing});return{width:u,height:l,minWidth:u,minHeight:l}},...P1(s)]},o))});J2.displayName="@mantine/core/Space";var Yct=Object.defineProperty,Kct=Object.defineProperties,Xct=Object.getOwnPropertyDescriptors,Kle=Object.getOwnPropertySymbols,Qct=Object.prototype.hasOwnProperty,Jct=Object.prototype.propertyIsEnumerable,Xle=(e,t,n)=>t in e?Yct(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Zct=(e,t)=>{for(var n in t||(t={}))Qct.call(t,n)&&Xle(e,n,t[n]);if(Kle)for(var n of Kle(t))Jct.call(t,n)&&Xle(e,n,t[n]);return e},eft=(e,t)=>Kct(e,Xct(t));function tft(e,t,n){return typeof e<"u"?e in n.headings.sizes?n.headings.sizes[e].fontSize:e:n.headings.sizes[t].fontSize}function nft(e,t,n){return typeof e<"u"&&e in n.headings.sizes?n.headings.sizes[e].lineHeight:n.headings.sizes[t].lineHeight}var rft=ht((e,{element:t,weight:n,size:r,inline:i})=>({root:eft(Zct({},e.fn.fontStyles()),{fontFamily:e.headings.fontFamily,fontWeight:n||e.headings.sizes[t].fontWeight||e.headings.fontWeight,fontSize:tft(r,t,e),lineHeight:i?1:nft(r,t,e),margin:0})})),ift=Object.defineProperty,rD=Object.getOwnPropertySymbols,tCe=Object.prototype.hasOwnProperty,nCe=Object.prototype.propertyIsEnumerable,Qle=(e,t,n)=>t in e?ift(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,sft=(e,t)=>{for(var n in t||(t={}))tCe.call(t,n)&&Qle(e,n,t[n]);if(rD)for(var n of rD(t))nCe.call(t,n)&&Qle(e,n,t[n]);return e},oft=(e,t)=>{var n={};for(var r in e)tCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&rD)for(var r of rD(e))t.indexOf(r)<0&&nCe.call(e,r)&&(n[r]=e[r]);return n};const aft={order:1},Mc=A.forwardRef((e,t)=>{const n=Ct("Title",aft,e),{className:r,order:i,children:s,unstyled:o,size:a,weight:u,inline:l}=n,c=oft(n,["className","order","children","unstyled","size","weight","inline"]),{classes:f,cx:d}=rft({element:`h${i}`,weight:u,size:a,inline:l},{name:"Title",unstyled:o});return[1,2,3,4,5,6].includes(i)?L.createElement(Rt,sft({component:`h${i}`,ref:t,className:d(f.root,r)},c),s):null});Mc.displayName="@mantine/core/Title";function ZG(e){const t=e.split("/")||[];return t[t.length-1].replace(/\.[^\.]+$/,"").replace(".","_").replace(" ","_").replace("/","_")}const vf="/study/",uft="https://github.com/revisit-studies/study/tree/main/public/";function lft({globalConfig:e,studyConfigs:t}){const{configsList:n}=e,r=vv();return R.jsxs(i6,{size:"xs",px:"xs",style:{marginTop:100,marginBottom:100},children:[R.jsx(xE,{maw:150,mx:"auto",mb:"xl",radius:"md",src:`${vf}revisitAssets/revisitLogoSquare.svg`,alt:"reVISit"}),R.jsx(Rt,{children:"Select an experiment to launch:"}),n.map(i=>{const s=t[i];if(!s)return null;const o=ZG(i);return R.jsx(_v,{onClick:()=>{r(`/${o}`)},my:"sm",style:{width:"100%"},children:R.jsxs(RTe,{shadow:"sm",radius:"md",withBorder:!0,children:[R.jsx(Rt,{fw:"bold",children:s.studyMetadata.title}),R.jsxs(Rt,{c:"dimmed",children:["Authors:",s.studyMetadata.authors]}),R.jsx(Rt,{c:"dimmed",children:s.studyMetadata.description}),R.jsx(Rt,{c:"dimmed",ta:"right",style:{paddingRight:5},children:R.jsxs(Mxe,{target:"_blank",onClick:a=>a.stopPropagation(),href:`${uft}${o}`,children:["View source:"," ",o]})})]})},i)})]})}var rCe={exports:{}},iCe={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cw=A;function cft(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var fft=typeof Object.is=="function"?Object.is:cft,dft=cw.useState,hft=cw.useEffect,pft=cw.useLayoutEffect,mft=cw.useDebugValue;function gft(e,t){var n=t(),r=dft({inst:{value:n,getSnapshot:t}}),i=r[0].inst,s=r[1];return pft(function(){i.value=n,i.getSnapshot=t,y9(i)&&s({inst:i})},[e,n,t]),hft(function(){return y9(i)&&s({inst:i}),e(function(){y9(i)&&s({inst:i})})},[e]),mft(n),n}function y9(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!fft(e,n)}catch{return!0}}function yft(e,t){return t()}var vft=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?yft:gft;iCe.useSyncExternalStore=cw.useSyncExternalStore!==void 0?cw.useSyncExternalStore:vft;rCe.exports=iCe;var _ft=rCe.exports,sCe={exports:{}},oCe={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o6=A,bft=_ft;function wft(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Eft=typeof Object.is=="function"?Object.is:wft,xft=bft.useSyncExternalStore,Sft=o6.useRef,Tft=o6.useEffect,Aft=o6.useMemo,Cft=o6.useDebugValue;oCe.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var s=Sft(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=Aft(function(){function u(h){if(!l){if(l=!0,c=h,h=r(h),i!==void 0&&o.hasValue){var p=o.value;if(i(p,h))return f=p}return f=h}if(p=f,Eft(c,h))return p;var m=r(h);return i!==void 0&&i(p,m)?p:(c=h,f=m)}var l=!1,c,f,d=n===void 0?null:n;return[function(){return u(t())},d===null?void 0:function(){return u(d())}]},[t,n,r,i]);var a=xft(e,s[0],s[1]);return Tft(function(){o.hasValue=!0,o.value=a},[a]),Cft(a),a};sCe.exports=oCe;var Ift=sCe.exports;function Oft(e){e()}let aCe=Oft;const Pft=e=>aCe=e,kft=()=>aCe,jg=A.createContext(null);function uCe(){return A.useContext(jg)}const $ft=()=>{throw new Error("uSES not initialized!")};let lCe=$ft;const Rft=e=>{lCe=e},Nft=(e,t)=>e===t;function Dft(e=jg){const t=e===jg?uCe:()=>A.useContext(e);return function(r,i=Nft){const{store:s,subscription:o,getServerState:a}=t(),u=lCe(o.addNestedSub,s.getState,a||s.getState,r,i);return A.useDebugValue(u),u}}const Lft=Dft();var kr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eY=Symbol.for("react.element"),tY=Symbol.for("react.portal"),a6=Symbol.for("react.fragment"),u6=Symbol.for("react.strict_mode"),l6=Symbol.for("react.profiler"),c6=Symbol.for("react.provider"),f6=Symbol.for("react.context"),Mft=Symbol.for("react.server_context"),d6=Symbol.for("react.forward_ref"),h6=Symbol.for("react.suspense"),p6=Symbol.for("react.suspense_list"),m6=Symbol.for("react.memo"),g6=Symbol.for("react.lazy"),Fft=Symbol.for("react.offscreen"),cCe;cCe=Symbol.for("react.module.reference");function lc(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case eY:switch(e=e.type,e){case a6:case l6:case u6:case h6:case p6:return e;default:switch(e=e&&e.$$typeof,e){case Mft:case f6:case d6:case g6:case m6:case c6:return e;default:return t}}case tY:return t}}}kr.ContextConsumer=f6;kr.ContextProvider=c6;kr.Element=eY;kr.ForwardRef=d6;kr.Fragment=a6;kr.Lazy=g6;kr.Memo=m6;kr.Portal=tY;kr.Profiler=l6;kr.StrictMode=u6;kr.Suspense=h6;kr.SuspenseList=p6;kr.isAsyncMode=function(){return!1};kr.isConcurrentMode=function(){return!1};kr.isContextConsumer=function(e){return lc(e)===f6};kr.isContextProvider=function(e){return lc(e)===c6};kr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===eY};kr.isForwardRef=function(e){return lc(e)===d6};kr.isFragment=function(e){return lc(e)===a6};kr.isLazy=function(e){return lc(e)===g6};kr.isMemo=function(e){return lc(e)===m6};kr.isPortal=function(e){return lc(e)===tY};kr.isProfiler=function(e){return lc(e)===l6};kr.isStrictMode=function(e){return lc(e)===u6};kr.isSuspense=function(e){return lc(e)===h6};kr.isSuspenseList=function(e){return lc(e)===p6};kr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===a6||e===l6||e===u6||e===h6||e===p6||e===Fft||typeof e=="object"&&e!==null&&(e.$$typeof===g6||e.$$typeof===m6||e.$$typeof===c6||e.$$typeof===f6||e.$$typeof===d6||e.$$typeof===cCe||e.getModuleId!==void 0)};kr.typeOf=lc;function Bft(){const e=kft();let t=null,n=null;return{clear(){t=null,n=null},notify(){e(()=>{let r=t;for(;r;)r.callback(),r=r.next})},get(){let r=[],i=t;for(;i;)r.push(i),i=i.next;return r},subscribe(r){let i=!0,s=n={callback:r,next:null,prev:n};return s.prev?s.prev.next=s:t=s,function(){!i||t===null||(i=!1,s.next?s.next.prev=s.prev:n=s.prev,s.prev?s.prev.next=s.next:t=s.next)}}}}const Jle={notify(){},get:()=>[]};function jft(e,t){let n,r=Jle;function i(f){return u(),r.subscribe(f)}function s(){r.notify()}function o(){c.onStateChange&&c.onStateChange()}function a(){return!!n}function u(){n||(n=t?t.addNestedSub(o):e.subscribe(o),r=Bft())}function l(){n&&(n(),n=void 0,r.clear(),r=Jle)}const c={addNestedSub:i,notifyNestedSubs:s,handleChangeWrapper:o,isSubscribed:a,trySubscribe:u,tryUnsubscribe:l,getListeners:()=>r};return c}const zft=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Uft=zft?A.useLayoutEffect:A.useEffect;function Vft({store:e,context:t,children:n,serverState:r}){const i=A.useMemo(()=>{const a=jft(e);return{store:e,subscription:a,getServerState:r?()=>r:void 0}},[e,r]),s=A.useMemo(()=>e.getState(),[e]);Uft(()=>{const{subscription:a}=i;return a.onStateChange=a.notifyNestedSubs,a.trySubscribe(),s!==e.getState()&&a.notifyNestedSubs(),()=>{a.tryUnsubscribe(),a.onStateChange=void 0}},[i,s]);const o=t||jg;return L.createElement(o.Provider,{value:i},n)}function fCe(e=jg){const t=e===jg?uCe:()=>A.useContext(e);return function(){const{store:r}=t();return r}}const Hft=fCe();function qft(e=jg){const t=e===jg?Hft:fCe(e);return function(){return t().dispatch}}const dCe=qft();Rft(Ift.useSyncExternalStoreWithSelector);Pft(yv.unstable_batchedUpdates);function y6(){const{studyId:e}=LM();return`${e}`}function cc(){const{index:e}=LM();return parseInt(e||"0",10)}function jc(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function zg(e){return!!e&&!!e[li]}function Sp(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===edt}(e)||Array.isArray(e)||!!e[sce]||!!(!((t=e.constructor)===null||t===void 0)&&t[sce])||nY(e)||rY(e))}function k1(e,t,n){n===void 0&&(n=!1),SE(e)===0?(n?Object.keys:xb)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function SE(e){var t=e[li];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:nY(e)?2:rY(e)?3:0}function Eb(e,t){return SE(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Wft(e,t){return SE(e)===2?e.get(t):e[t]}function hCe(e,t,n){var r=SE(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function pCe(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function nY(e){return Jft&&e instanceof Map}function rY(e){return Zft&&e instanceof Set}function dy(e){return e.o||e.t}function iY(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=gCe(e);delete t[li];for(var n=xb(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function sY(e,t){return t===void 0&&(t=!1),oY(e)||zg(e)||!Sp(e)||(SE(e)>1&&(e.set=e.add=e.clear=e.delete=Gft),Object.freeze(e),t&&k1(e,function(n,r){return sY(r,!0)},!0)),e}function Gft(){jc(2)}function oY(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function Ed(e){var t=Yz[e];return t||jc(18,e),t}function Yft(e,t){Yz[e]||(Yz[e]=t)}function qz(){return Z2}function v9(e,t){t&&(Ed("Patches"),e.u=[],e.s=[],e.v=t)}function iD(e){Wz(e),e.p.forEach(Kft),e.p=null}function Wz(e){e===Z2&&(Z2=e.l)}function Zle(e){return Z2={p:[],l:Z2,h:e,m:!0,_:0}}function Kft(e){var t=e[li];t.i===0||t.i===1?t.j():t.O=!0}function _9(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.g||Ed("ES5").S(t,e,r),r?(n[li].P&&(iD(t),jc(4)),Sp(e)&&(e=sD(t,e),t.l||oD(t,e)),t.u&&Ed("Patches").M(n[li].t,e,t.u,t.s)):e=sD(t,n,[]),iD(t),t.u&&t.v(t.u,t.s),e!==mCe?e:void 0}function sD(e,t,n){if(oY(t))return t;var r=t[li];if(!r)return k1(t,function(a,u){return ece(e,r,t,a,u,n)},!0),t;if(r.A!==e)return t;if(!r.P)return oD(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=iY(r.k):r.o,s=i,o=!1;r.i===3&&(s=new Set(i),i.clear(),o=!0),k1(s,function(a,u){return ece(e,r,i,a,u,n,o)}),oD(e,i,!1),n&&e.u&&Ed("Patches").N(r,n,e.u,e.s)}return r.o}function ece(e,t,n,r,i,s,o){if(zg(i)){var a=sD(e,i,s&&t&&t.i!==3&&!Eb(t.R,r)?s.concat(r):void 0);if(hCe(n,r,a),!zg(a))return;e.m=!1}else o&&n.add(i);if(Sp(i)&&!oY(i)){if(!e.h.D&&e._<1)return;sD(e,i),t&&t.A.l||oD(e,i)}}function oD(e,t,n){n===void 0&&(n=!1),!e.l&&e.h.D&&e.m&&sY(t,n)}function b9(e,t){var n=e[li];return(n?dy(n):e)[t]}function tce(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function Fm(e){e.P||(e.P=!0,e.l&&Fm(e.l))}function w9(e){e.o||(e.o=iY(e.t))}function Gz(e,t,n){var r=nY(t)?Ed("MapSet").F(t,n):rY(t)?Ed("MapSet").T(t,n):e.g?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:qz(),P:!1,I:!1,R:{},l:s,t:i,k:null,o:null,j:null,C:!1},u=a,l=eA;o&&(u=[a],l=zS);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return a.k=d,a.j=f,d}(t,n):Ed("ES5").J(t,n);return(n?n.A:qz()).p.push(r),r}function Xft(e){return zg(e)||jc(22,e),function t(n){if(!Sp(n))return n;var r,i=n[li],s=SE(n);if(i){if(!i.P&&(i.i<4||!Ed("ES5").K(i)))return i.t;i.I=!0,r=nce(n,s),i.I=!1}else r=nce(n,s);return k1(r,function(o,a){i&&Wft(i.t,o)===a||hCe(r,o,t(a))}),s===3?new Set(r):r}(e)}function nce(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return iY(e)}function Qft(){function e(s,o){var a=i[s];return a?a.enumerable=o:i[s]=a={configurable:!0,enumerable:o,get:function(){var u=this[li];return eA.get(u,s)},set:function(u){var l=this[li];eA.set(l,s,u)}},a}function t(s){for(var o=s.length-1;o>=0;o--){var a=s[o][li];if(!a.P)switch(a.i){case 5:r(a)&&Fm(a);break;case 4:n(a)&&Fm(a)}}}function n(s){for(var o=s.t,a=s.k,u=xb(a),l=u.length-1;l>=0;l--){var c=u[l];if(c!==li){var f=o[c];if(f===void 0&&!Eb(o,c))return!0;var d=a[c],h=d&&d[li];if(h?h.t!==f:!pCe(d,f))return!0}}var p=!!o[li];return u.length!==xb(o).length+(p?0:1)}function r(s){var o=s.k;if(o.length!==s.t.length)return!0;var a=Object.getOwnPropertyDescriptor(o,o.length-1);if(a&&!a.get)return!0;for(var u=0;u<o.length;u++)if(!o.hasOwnProperty(u))return!0;return!1}var i={};Yft("ES5",{J:function(s,o){var a=Array.isArray(s),u=function(c,f){if(c){for(var d=Array(f.length),h=0;h<f.length;h++)Object.defineProperty(d,""+h,e(h,!0));return d}var p=gCe(f);delete p[li];for(var m=xb(p),g=0;g<m.length;g++){var y=m[g];p[y]=e(y,c||!!p[y].enumerable)}return Object.create(Object.getPrototypeOf(f),p)}(a,s),l={i:a?5:4,A:o?o.A:qz(),P:!1,I:!1,R:{},l:o,t:s,k:u,o:null,O:!1,C:!1};return Object.defineProperty(u,li,{value:l,writable:!0}),u},S:function(s,o,a){a?zg(o)&&o[li].A===s&&t(s.p):(s.u&&function u(l){if(l&&typeof l=="object"){var c=l[li];if(c){var f=c.t,d=c.k,h=c.R,p=c.i;if(p===4)k1(d,function(_){_!==li&&(f[_]!==void 0||Eb(f,_)?h[_]||u(d[_]):(h[_]=!0,Fm(c)))}),k1(f,function(_){d[_]!==void 0||Eb(d,_)||(h[_]=!1,Fm(c))});else if(p===5){if(r(c)&&(Fm(c),h.length=!0),d.length<f.length)for(var m=d.length;m<f.length;m++)h[m]=!1;else for(var g=f.length;g<d.length;g++)h[g]=!0;for(var y=Math.min(d.length,f.length),v=0;v<y;v++)d.hasOwnProperty(v)||(h[v]=!0),h[v]===void 0&&u(d[v])}}}}(s.p[0]),t(s.p))},K:function(s){return s.i===4?n(s):r(s)}})}var rce,Z2,aY=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",Jft=typeof Map<"u",Zft=typeof Set<"u",ice=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",mCe=aY?Symbol.for("immer-nothing"):((rce={})["immer-nothing"]=!0,rce),sce=aY?Symbol.for("immer-draftable"):"__$immer_draftable",li=aY?Symbol.for("immer-state"):"__$immer_state",edt=""+Object.prototype.constructor,xb=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,gCe=Object.getOwnPropertyDescriptors||function(e){var t={};return xb(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},Yz={},eA={get:function(e,t){if(t===li)return e;var n=dy(e);if(!Eb(n,t))return function(i,s,o){var a,u=tce(s,o);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!Sp(r)?r:r===b9(e.t,t)?(w9(e),e.o[t]=Gz(e.A.h,r,e)):r},has:function(e,t){return t in dy(e)},ownKeys:function(e){return Reflect.ownKeys(dy(e))},set:function(e,t,n){var r=tce(dy(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=b9(dy(e),t),s=i==null?void 0:i[li];if(s&&s.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(pCe(n,i)&&(n!==void 0||Eb(e.t,t)))return!0;w9(e),Fm(e)}return e.o[t]===n&&(n!==void 0||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return b9(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,w9(e),Fm(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=dy(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){jc(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){jc(12)}},zS={};k1(eA,function(e,t){zS[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),zS.deleteProperty=function(e,t){return zS.set.call(this,e,t,void 0)},zS.set=function(e,t,n){return eA.set.call(this,e[0],t,n,e[0])};var tdt=function(){function e(n){var r=this;this.g=ice,this.D=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var u=r;return function(m){var g=this;m===void 0&&(m=a);for(var y=arguments.length,v=Array(y>1?y-1:0),_=1;_<y;_++)v[_-1]=arguments[_];return u.produce(m,function(b){var E;return(E=s).call.apply(E,[g,b].concat(v))})}}var l;if(typeof s!="function"&&jc(6),o!==void 0&&typeof o!="function"&&jc(7),Sp(i)){var c=Zle(r),f=Gz(r,i,void 0),d=!0;try{l=s(f),d=!1}finally{d?iD(c):Wz(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(m){return v9(c,o),_9(m,c)},function(m){throw iD(c),m}):(v9(c,o),_9(l,c))}if(!i||typeof i!="object"){if((l=s(i))===void 0&&(l=i),l===mCe&&(l=void 0),r.D&&sY(l,!0),o){var h=[],p=[];Ed("Patches").M(i,l,h,p),o(h,p)}return l}jc(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(f))})};var o,a,u=r.produce(i,s,function(l,c){o=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,o,a]}):[u,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){Sp(n)||jc(8),zg(n)&&(n=Xft(n));var r=Zle(this),i=Gz(this,n,void 0);return i[li].C=!0,Wz(r),i},t.finishDraft=function(n,r){var i=n&&n[li],s=i.A;return v9(s,r),_9(void 0,s)},t.setAutoFreeze=function(n){this.D=n},t.setUseProxies=function(n){n&&!ice&&jc(20),this.g=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=Ed("Patches").$;return zg(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),il=new tdt,yCe=il.produce;il.produceWithPatches.bind(il);il.setAutoFreeze.bind(il);il.setUseProxies.bind(il);il.applyPatches.bind(il);il.createDraft.bind(il);il.finishDraft.bind(il);function tA(e){"@babel/helpers - typeof";return tA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tA(e)}function ndt(e,t){if(tA(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(tA(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function rdt(e){var t=ndt(e,"string");return tA(t)=="symbol"?t:String(t)}function idt(e,t,n){return t=rdt(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ace(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?oce(Object(n),!0).forEach(function(r){idt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oce(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Lo(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var uce=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),E9=function(){return Math.random().toString(36).substring(7).split("").join(".")},aD={INIT:"@@redux/INIT"+E9(),REPLACE:"@@redux/REPLACE"+E9(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+E9()}};function sdt(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function vCe(e,t,n){var r;if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Lo(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Lo(1));return n(vCe)(e,t)}if(typeof e!="function")throw new Error(Lo(2));var i=e,s=t,o=[],a=o,u=!1;function l(){a===o&&(a=o.slice())}function c(){if(u)throw new Error(Lo(3));return s}function f(m){if(typeof m!="function")throw new Error(Lo(4));if(u)throw new Error(Lo(5));var g=!0;return l(),a.push(m),function(){if(g){if(u)throw new Error(Lo(6));g=!1,l();var v=a.indexOf(m);a.splice(v,1),o=null}}}function d(m){if(!sdt(m))throw new Error(Lo(7));if(typeof m.type>"u")throw new Error(Lo(8));if(u)throw new Error(Lo(9));try{u=!0,s=i(s,m)}finally{u=!1}for(var g=o=a,y=0;y<g.length;y++){var v=g[y];v()}return m}function h(m){if(typeof m!="function")throw new Error(Lo(10));i=m,d({type:aD.REPLACE})}function p(){var m,g=f;return m={subscribe:function(v){if(typeof v!="object"||v===null)throw new Error(Lo(11));function _(){v.next&&v.next(c())}_();var b=g(_);return{unsubscribe:b}}},m[uce]=function(){return this},m}return d({type:aD.INIT}),r={dispatch:d,subscribe:f,getState:c,replaceReducer:h},r[uce]=p,r}function odt(e){Object.keys(e).forEach(function(t){var n=e[t],r=n(void 0,{type:aD.INIT});if(typeof r>"u")throw new Error(Lo(12));if(typeof n(void 0,{type:aD.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Lo(13))})}function adt(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];typeof e[i]=="function"&&(n[i]=e[i])}var s=Object.keys(n),o;try{odt(n)}catch(a){o=a}return function(u,l){if(u===void 0&&(u={}),o)throw o;for(var c=!1,f={},d=0;d<s.length;d++){var h=s[d],p=n[h],m=u[h],g=p(m,l);if(typeof g>"u")throw l&&l.type,new Error(Lo(14));f[h]=g,c=c||g!==m}return c=c||s.length!==Object.keys(u).length,c?f:u}}function uD(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length===0?function(r){return r}:t.length===1?t[0]:t.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function udt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return function(){var i=r.apply(void 0,arguments),s=function(){throw new Error(Lo(15))},o={getState:i.getState,dispatch:function(){return s.apply(void 0,arguments)}},a=t.map(function(u){return u(o)});return s=uD.apply(void 0,a)(i.dispatch),ace(ace({},i),{},{dispatch:s})}}}function _Ce(e){var t=function(r){var i=r.dispatch,s=r.getState;return function(o){return function(a){return typeof a=="function"?a(i,s,e):o(a)}}};return t}var bCe=_Ce();bCe.withExtraArgument=_Ce;const lce=bCe;var ldt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),jC=function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(c){return u([l,c])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){n.label=l[1];break}if(l[0]===6&&n.label<s[1]){n.label=s[1],s=l;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(l);break}s[2]&&n.ops.pop(),n.trys.pop();continue}l=t.call(e,n)}catch(c){l=[6,c],i=0}finally{r=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},nA=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},cdt=Object.defineProperty,fdt=Object.defineProperties,ddt=Object.getOwnPropertyDescriptors,cce=Object.getOwnPropertySymbols,hdt=Object.prototype.hasOwnProperty,pdt=Object.prototype.propertyIsEnumerable,fce=function(e,t,n){return t in e?cdt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},_g=function(e,t){for(var n in t||(t={}))hdt.call(t,n)&&fce(e,n,t[n]);if(cce)for(var r=0,i=cce(t);r<i.length;r++){var n=i[r];pdt.call(t,n)&&fce(e,n,t[n])}return e},x9=function(e,t){return fdt(e,ddt(t))},zC=function(e,t,n){return new Promise(function(r,i){var s=function(u){try{a(n.next(u))}catch(l){i(l)}},o=function(u){try{a(n.throw(u))}catch(l){i(l)}},a=function(u){return u.done?r(u.value):Promise.resolve(u.value).then(s,o)};a((n=n.apply(e,t)).next())})},mdt=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?uD:uD.apply(null,arguments)};function gdt(e){if(typeof e!="object"||e===null)return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(var n=t;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return t===n}var ydt=function(e){ldt(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,nA([void 0],n[0].concat(this)))):new(t.bind.apply(t,nA([void 0],n.concat(this))))},t}(Array);function Kz(e){return Sp(e)?yCe(e,function(){}):e}function vdt(e){return typeof e=="boolean"}function _dt(){return function(t){return bdt(t)}}function bdt(e){e===void 0&&(e={});var t=e.thunk,n=t===void 0?!0:t;e.immutableCheck,e.serializableCheck;var r=new ydt;return n&&(vdt(n)?r.push(lce):r.push(lce.withExtraArgument(n.extraArgument))),r}var wdt=!0;function wCe(e){var t=_dt(),n=e||{},r=n.reducer,i=r===void 0?void 0:r,s=n.middleware,o=s===void 0?t():s,a=n.devTools,u=a===void 0?!0:a,l=n.preloadedState,c=l===void 0?void 0:l,f=n.enhancers,d=f===void 0?void 0:f,h;if(typeof i=="function")h=i;else if(gdt(i))h=adt(i);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var p=o;typeof p=="function"&&(p=p(t));var m=udt.apply(void 0,p),g=uD;u&&(g=mdt(_g({trace:!wdt},typeof u=="object"&&u)));var y=[m];Array.isArray(d)?y=nA([m],d):typeof d=="function"&&(y=d(y));var v=g.apply(void 0,y);return vCe(h,c,v)}function xd(e,t){function n(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(t){var s=t.apply(void 0,r);if(!s)throw new Error("prepareAction did not return an object");return _g(_g({type:e,payload:s.payload},"meta"in s&&{meta:s.meta}),"error"in s&&{error:s.error})}return{type:e,payload:r[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(r){return r.type===e},n}function ECe(e){var t={},n=[],r,i={addCase:function(s,o){var a=typeof s=="string"?s:s.type;if(a in t)throw new Error("addCase cannot be called with two reducers for the same action type");return t[a]=o,i},addMatcher:function(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase:function(s){return r=s,i}};return e(i),[t,n,r]}function Edt(e){return typeof e=="function"}function xdt(e,t,n,r){n===void 0&&(n=[]);var i=typeof t=="function"?ECe(t):[t,n,r],s=i[0],o=i[1],a=i[2],u;if(Edt(e))u=function(){return Kz(e())};else{var l=Kz(e);u=function(){return l}}function c(f,d){f===void 0&&(f=u());var h=nA([s[d.type]],o.filter(function(p){var m=p.matcher;return m(d)}).map(function(p){var m=p.reducer;return m}));return h.filter(function(p){return!!p}).length===0&&(h=[a]),h.reduce(function(p,m){if(m)if(zg(p)){var g=p,y=m(g,d);return y===void 0?p:y}else{if(Sp(p))return yCe(p,function(v){return m(v,d)});var y=m(p,d);if(y===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return y}return p},f)}return c.getInitialState=u,c}function Sdt(e,t){return e+"/"+t}function xCe(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");typeof process<"u";var n=typeof e.initialState=="function"?e.initialState:Kz(e.initialState),r=e.reducers||{},i=Object.keys(r),s={},o={},a={};i.forEach(function(c){var f=r[c],d=Sdt(t,c),h,p;"reducer"in f?(h=f.reducer,p=f.prepare):h=f,s[c]=h,o[d]=h,a[c]=p?xd(d,p):xd(d)});function u(){var c=typeof e.extraReducers=="function"?ECe(e.extraReducers):[e.extraReducers],f=c[0],d=f===void 0?{}:f,h=c[1],p=h===void 0?[]:h,m=c[2],g=m===void 0?void 0:m,y=_g(_g({},d),o);return xdt(n,function(v){for(var _ in y)v.addCase(_,y[_]);for(var b=0,E=p;b<E.length;b++){var w=E[b];v.addMatcher(w.matcher,w.reducer)}g&&v.addDefaultCase(g)})}var l;return{name:t,reducer:function(c,f){return l||(l=u()),l(c,f)},actions:a,caseReducers:s,getInitialState:function(){return l||(l=u()),l.getInitialState()}}}var Tdt="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",SCe=function(e){e===void 0&&(e=21);for(var t="",n=e;n--;)t+=Tdt[Math.random()*64|0];return t},Adt=["name","message","stack","code"],S9=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),dce=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),Cdt=function(e){if(typeof e=="object"&&e!==null){for(var t={},n=0,r=Adt;n<r.length;n++){var i=r[n];typeof e[i]=="string"&&(t[i]=e[i])}return t}return{message:String(e)}};(function(){function e(t,n,r){var i=xd(t+"/fulfilled",function(l,c,f,d){return{payload:l,meta:x9(_g({},d||{}),{arg:f,requestId:c,requestStatus:"fulfilled"})}}),s=xd(t+"/pending",function(l,c,f){return{payload:void 0,meta:x9(_g({},f||{}),{arg:c,requestId:l,requestStatus:"pending"})}}),o=xd(t+"/rejected",function(l,c,f,d,h){return{payload:d,error:(r&&r.serializeError||Cdt)(l||"Rejected"),meta:x9(_g({},h||{}),{arg:f,requestId:c,rejectedWithValue:!!d,requestStatus:"rejected",aborted:(l==null?void 0:l.name)==="AbortError",condition:(l==null?void 0:l.name)==="ConditionError"})}}),a=typeof AbortController<"u"?AbortController:function(){function l(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return l.prototype.abort=function(){},l}();function u(l){return function(c,f,d){var h=r!=null&&r.idGenerator?r.idGenerator(l):SCe(),p=new a,m;function g(v){m=v,p.abort()}var y=function(){return zC(this,null,function(){var v,_,b,E,w,x,S;return jC(this,function(I){switch(I.label){case 0:return I.trys.push([0,4,,5]),E=(v=r==null?void 0:r.condition)==null?void 0:v.call(r,l,{getState:f,extra:d}),Odt(E)?[4,E]:[3,2];case 1:E=I.sent(),I.label=2;case 2:if(E===!1||p.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return w=new Promise(function(C,O){return p.signal.addEventListener("abort",function(){return O({name:"AbortError",message:m||"Aborted"})})}),c(s(h,l,(_=r==null?void 0:r.getPendingMeta)==null?void 0:_.call(r,{requestId:h,arg:l},{getState:f,extra:d}))),[4,Promise.race([w,Promise.resolve(n(l,{dispatch:c,getState:f,extra:d,requestId:h,signal:p.signal,abort:g,rejectWithValue:function(C,O){return new S9(C,O)},fulfillWithValue:function(C,O){return new dce(C,O)}})).then(function(C){if(C instanceof S9)throw C;return C instanceof dce?i(C.payload,h,l,C.meta):i(C,h,l)})])];case 3:return b=I.sent(),[3,5];case 4:return x=I.sent(),b=x instanceof S9?o(null,h,l,x.payload,x.meta):o(x,h,l),[3,5];case 5:return S=r&&!r.dispatchConditionRejection&&o.match(b)&&b.meta.condition,S||c(b),[2,b]}})})}();return Object.assign(y,{abort:g,requestId:h,arg:l,unwrap:function(){return y.then(Idt)}})}}return Object.assign(u,{pending:s,rejected:o,fulfilled:i,typePrefix:t})}return e.withTypes=function(){return e},e})();function Idt(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function Odt(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var Pdt=function(e){return e&&typeof e.match=="function"},kdt=function(e,t){return Pdt(e)?e.match(t):e(t)};function hce(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(n){return e.some(function(r){return kdt(r,n)})}}var uY=function(e,t){if(typeof e!="function")throw new TypeError(t+" is not a function")},Xz=function(){},TCe=function(e,t){return t===void 0&&(t=Xz),e.catch(t),e},ACe=function(e,t){return e.addEventListener("abort",t,{once:!0}),function(){return e.removeEventListener("abort",t)}},Sb=function(e,t){var n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},$dt="task",CCe="listener",ICe="completed",lY="cancelled",Rdt="task-"+lY,Ndt="task-"+ICe,OCe=CCe+"-"+lY,Ddt=CCe+"-"+ICe,v6=function(){function e(t){this.code=t,this.name="TaskAbortError",this.message=$dt+" "+lY+" (reason: "+t+")"}return e}(),Tb=function(e){if(e.aborted)throw new v6(e.reason)};function PCe(e,t){var n=Xz;return new Promise(function(r,i){var s=function(){return i(new v6(e.reason))};if(e.aborted){s();return}n=ACe(e,s),t.finally(function(){return n()}).then(r,i)}).finally(function(){n=Xz})}var Ldt=function(e,t){return zC(void 0,null,function(){var n,r;return jC(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,4,5]),[4,Promise.resolve()];case 1:return i.sent(),[4,e()];case 2:return n=i.sent(),[2,{status:"ok",value:n}];case 3:return r=i.sent(),[2,{status:r instanceof v6?"cancelled":"rejected",error:r}];case 4:return t==null||t(),[7];case 5:return[2]}})})},lD=function(e){return function(t){return TCe(PCe(e,t).then(function(n){return Tb(e),n}))}},kCe=function(e){var t=lD(e);return function(n){return t(new Promise(function(r){return setTimeout(r,n)}))}},Mdt=Object.assign,pce={},UC="listenerMiddleware",Fdt=function(e){var t=function(n){return ACe(e,function(){return Sb(n,e.reason)})};return function(n){uY(n,"taskExecutor");var r=new AbortController;t(r);var i=Ldt(function(){return zC(void 0,null,function(){var s;return jC(this,function(o){switch(o.label){case 0:return Tb(e),Tb(r.signal),[4,n({pause:lD(r.signal),delay:kCe(r.signal),signal:r.signal})];case 1:return s=o.sent(),Tb(r.signal),[2,s]}})})},function(){return Sb(r,Ndt)});return{result:lD(e)(i),cancel:function(){Sb(r,Rdt)}}}},Bdt=function(e,t){var n=function(r,i){return zC(void 0,null,function(){var s,o,a,u;return jC(this,function(l){switch(l.label){case 0:Tb(t),s=function(){},o=new Promise(function(c,f){var d=e({predicate:r,effect:function(h,p){p.unsubscribe(),c([h,p.getState(),p.getOriginalState()])}});s=function(){d(),f()}}),a=[o],i!=null&&a.push(new Promise(function(c){return setTimeout(c,i,null)})),l.label=1;case 1:return l.trys.push([1,,3,4]),[4,PCe(t,Promise.race(a))];case 2:return u=l.sent(),Tb(t),[2,u];case 3:return s(),[7];case 4:return[2]}})})};return function(r,i){return TCe(n(r,i))}},$Ce=function(e){var t=e.type,n=e.actionCreator,r=e.matcher,i=e.predicate,s=e.effect;if(t)i=xd(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error("Creating or removing a listener requires one of the known fields for matching an action");return uY(s,"options.listener"),{predicate:i,type:t,effect:s}},jdt=function(e){var t=$Ce(e),n=t.type,r=t.predicate,i=t.effect,s=SCe(),o={id:s,effect:i,type:n,predicate:r,pending:new Set,unsubscribe:function(){throw new Error("Unsubscribe not initialized")}};return o},Qz=function(e){e.pending.forEach(function(t){Sb(t,OCe)})},zdt=function(e){return function(){e.forEach(Qz),e.clear()}},mce=function(e,t,n){try{e(t,n)}catch(r){setTimeout(function(){throw r},0)}},Udt=xd(UC+"/add"),Vdt=xd(UC+"/removeAll"),Hdt=xd(UC+"/remove"),qdt=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,nA([UC+"/error"],e))};function Wdt(e){var t=this;e===void 0&&(e={});var n=new Map,r=e.extra,i=e.onError,s=i===void 0?qdt:i;uY(s,"onError");var o=function(h){return h.unsubscribe=function(){return n.delete(h.id)},n.set(h.id,h),function(p){h.unsubscribe(),p!=null&&p.cancelActive&&Qz(h)}},a=function(h){for(var p=0,m=Array.from(n.values());p<m.length;p++){var g=m[p];if(h(g))return g}},u=function(h){var p=a(function(m){return m.effect===h.effect});return p||(p=jdt(h)),o(p)},l=function(h){var p=$Ce(h),m=p.type,g=p.effect,y=p.predicate,v=a(function(_){var b=typeof m=="string"?_.type===m:_.predicate===y;return b&&_.effect===g});return v&&(v.unsubscribe(),h.cancelActive&&Qz(v)),!!v},c=function(h,p,m,g){return zC(t,null,function(){var y,v,_;return jC(this,function(b){switch(b.label){case 0:y=new AbortController,v=Bdt(u,y.signal),b.label=1;case 1:return b.trys.push([1,3,4,5]),h.pending.add(y),[4,Promise.resolve(h.effect(p,Mdt({},m,{getOriginalState:g,condition:function(E,w){return v(E,w).then(Boolean)},take:v,delay:kCe(y.signal),pause:lD(y.signal),extra:r,signal:y.signal,fork:Fdt(y.signal),unsubscribe:h.unsubscribe,subscribe:function(){n.set(h.id,h)},cancelActiveListeners:function(){h.pending.forEach(function(E,w,x){E!==y&&(Sb(E,OCe),x.delete(E))})}})))];case 2:return b.sent(),[3,5];case 3:return _=b.sent(),_ instanceof v6||mce(s,_,{raisedBy:"effect"}),[3,5];case 4:return Sb(y,Ddt),h.pending.delete(y),[7];case 5:return[2]}})})},f=zdt(n),d=function(h){return function(p){return function(m){if(Udt.match(m))return u(m.payload);if(Vdt.match(m)){f();return}if(Hdt.match(m))return l(m.payload);var g=h.getState(),y=function(){if(g===pce)throw new Error(UC+": getOriginalState can only be called synchronously");return g},v;try{if(v=p(m),n.size>0)for(var _=h.getState(),b=Array.from(n.values()),E=0,w=b;E<w.length;E++){var x=w[E],S=!1;try{S=x.predicate(m,_,g)}catch(I){S=!1,mce(s,I,{raisedBy:"predicate"})}S&&c(x,m,h,y)}}finally{g=pce}return v}}};return{middleware:d,startListening:u,stopListening:l,clearListeners:f}}var gce;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);Qft();function Ug(e){return e.components.flatMap(t=>typeof t=="string"?t:Ug(t))}async function Gdt(e,t,n,r){const i=Ug(n),s={...i.map(f=>({[f]:{}}))},o=Object.assign({},...i.map((f,d)=>({[`${f}_${d}`]:{aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}}}}))),a=Object.assign({},...i.map((f,d)=>({[`${f}_${d}`]:{aboveStimulus:!0,belowStimulus:!0,sidebar:!0,values:{}}}))),u={studyId:e,answers:r||s,sequence:n,config:t,showAdmin:!1,showHelpText:!1,alertModal:{show:!1,message:""},trialValidation:r?a:o,iframeAnswers:[]},l=xCe({name:"storeSlice",initialState:u,reducers:{setConfig(f,d){f.config=d.payload},toggleShowAdmin:f=>{f.showAdmin=!f.showAdmin},toggleShowHelpText:f=>{f.showHelpText=!f.showHelpText},setAlertModal:(f,d)=>{f.alertModal=d.payload},setIframeAnswers:(f,d)=>{f.iframeAnswers=d.payload},updateResponseBlockValidation:(f,{payload:d})=>{f.trialValidation[d.identifier]||(f.trialValidation[d.identifier]={aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}},provenanceGraph:void 0}),f.trialValidation[d.identifier][d.location]={valid:d.status,values:d.values},d.provenanceGraph&&(f.trialValidation[d.identifier].provenanceGraph=d.provenanceGraph)},saveTrialAnswer(f,{payload:d}){const{identifier:h,answer:p,startTime:m,endTime:g,provenanceGraph:y,windowEvents:v}=d;f.answers[h]={answer:p,startTime:m,endTime:g,provenanceGraph:y,windowEvents:v}}}});return{store:wCe({reducer:l.reducer,preloadedState:u}),actions:l.actions}}const RCe=A.createContext(null);function Yp(){return A.useContext(RCe).actions}const Kp=dCe,_f=Lft;function Ydt(e){return _f(t=>{const n=Object.values(t.trialValidation[e]).every(r=>typeof r=="object"&&"valid"in r?r.valid:!0);return n?Object.values(n).every(r=>r):!1})}function th(){return _f(e=>Ug(e.sequence))}var cD={exports:{}};cD.exports;(function(e,t){var n=200,r="__lodash_hash_undefined__",i=800,s=16,o=9007199254740991,a="[object Arguments]",u="[object Array]",l="[object AsyncFunction]",c="[object Boolean]",f="[object Date]",d="[object Error]",h="[object Function]",p="[object GeneratorFunction]",m="[object Map]",g="[object Number]",y="[object Null]",v="[object Object]",_="[object Proxy]",b="[object RegExp]",E="[object Set]",w="[object String]",x="[object Undefined]",S="[object WeakMap]",I="[object ArrayBuffer]",C="[object DataView]",O="[object Float32Array]",z="[object Float64Array]",N="[object Int8Array]",$="[object Int16Array]",D="[object Int32Array]",B="[object Uint8Array]",V="[object Uint8ClampedArray]",j="[object Uint16Array]",G="[object Uint32Array]",U=/[\\^$.*+?()[\]{}|]/g,P=/^\[object .+?Constructor\]$/,k=/^(?:0|[1-9]\d*)$/,H={};H[O]=H[z]=H[N]=H[$]=H[D]=H[B]=H[V]=H[j]=H[G]=!0,H[a]=H[u]=H[I]=H[c]=H[C]=H[f]=H[d]=H[h]=H[m]=H[g]=H[v]=H[b]=H[E]=H[w]=H[S]=!1;var M=typeof nu=="object"&&nu&&nu.Object===Object&&nu,F=typeof self=="object"&&self&&self.Object===Object&&self,J=M||F||Function("return this")(),se=t&&!t.nodeType&&t,ae=se&&!0&&e&&!e.nodeType&&e,ce=ae&&ae.exports===se,le=ce&&M.process,ge=function(){try{var Z=ae&&ae.require&&ae.require("util").types;return Z||le&&le.binding&&le.binding("util")}catch{}}(),ue=ge&&ge.isTypedArray;function Fe(Z,de,be){switch(be.length){case 0:return Z.call(de);case 1:return Z.call(de,be[0]);case 2:return Z.call(de,be[0],be[1]);case 3:return Z.call(de,be[0],be[1],be[2])}return Z.apply(de,be)}function ke(Z,de){for(var be=-1,mt=Array(Z);++be<Z;)mt[be]=de(be);return mt}function Ge(Z){return function(de){return Z(de)}}function Re(Z,de){return Z==null?void 0:Z[de]}function Oe(Z,de){return function(be){return Z(de(be))}}var Le=Array.prototype,Ut=Function.prototype,Qe=Object.prototype,je=J["__core-js_shared__"],bt=Ut.toString,et=Qe.hasOwnProperty,ut=function(){var Z=/[^.]+$/.exec(je&&je.keys&&je.keys.IE_PROTO||"");return Z?"Symbol(src)_1."+Z:""}(),lt=Qe.toString,jt=bt.call(Object),Dn=RegExp("^"+bt.call(et).replace(U,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),he=ce?J.Buffer:void 0,_e=J.Symbol,Pe=J.Uint8Array,it=he?he.allocUnsafe:void 0,Ye=Oe(Object.getPrototypeOf,Object),at=Object.create,tt=Qe.propertyIsEnumerable,vt=Le.splice,In=_e?_e.toStringTag:void 0,Wt=function(){try{var Z=He(Object,"defineProperty");return Z({},"",{}),Z}catch{}}(),Vt=he?he.isBuffer:void 0,hr=Math.max,Yn=Date.now,ku=He(J,"Map"),Mr=He(Object,"create"),us=function(){function Z(){}return function(de){if(!X0(de))return{};if(at)return at(de);Z.prototype=de;var be=new Z;return Z.prototype=void 0,be}}();function ti(Z){var de=-1,be=Z==null?0:Z.length;for(this.clear();++de<be;){var mt=Z[de];this.set(mt[0],mt[1])}}function Ei(){this.__data__=Mr?Mr(null):{},this.size=0}function qr(Z){var de=this.has(Z)&&delete this.__data__[Z];return this.size-=de?1:0,de}function yr(Z){var de=this.__data__;if(Mr){var be=de[Z];return be===r?void 0:be}return et.call(de,Z)?de[Z]:void 0}function gt(Z){var de=this.__data__;return Mr?de[Z]!==void 0:et.call(de,Z)}function Fr(Z,de){var be=this.__data__;return this.size+=this.has(Z)?0:1,be[Z]=Mr&&de===void 0?r:de,this}ti.prototype.clear=Ei,ti.prototype.delete=qr,ti.prototype.get=yr,ti.prototype.has=gt,ti.prototype.set=Fr;function xi(Z){var de=-1,be=Z==null?0:Z.length;for(this.clear();++de<be;){var mt=Z[de];this.set(mt[0],mt[1])}}function Yi(){this.__data__=[],this.size=0}function Qs(Z){var de=this.__data__,be=ni(de,Z);if(be<0)return!1;var mt=de.length-1;return be==mt?de.pop():vt.call(de,be,1),--this.size,!0}function Ma(Z){var de=this.__data__,be=ni(de,Z);return be<0?void 0:de[be][1]}function ne(Z){return ni(this.__data__,Z)>-1}function Q(Z,de){var be=this.__data__,mt=ni(be,Z);return mt<0?(++this.size,be.push([Z,de])):be[mt][1]=de,this}xi.prototype.clear=Yi,xi.prototype.delete=Qs,xi.prototype.get=Ma,xi.prototype.has=ne,xi.prototype.set=Q;function ie(Z){var de=-1,be=Z==null?0:Z.length;for(this.clear();++de<be;){var mt=Z[de];this.set(mt[0],mt[1])}}function ve(){this.size=0,this.__data__={hash:new ti,map:new(ku||xi),string:new ti}}function ye(Z){var de=ze(this,Z).delete(Z);return this.size-=de?1:0,de}function pt(Z){return ze(this,Z).get(Z)}function Ce(Z){return ze(this,Z).has(Z)}function ft(Z,de){var be=ze(this,Z),mt=be.size;return be.set(Z,de),this.size+=be.size==mt?0:1,this}ie.prototype.clear=ve,ie.prototype.delete=ye,ie.prototype.get=pt,ie.prototype.has=Ce,ie.prototype.set=ft;function Bt(Z){var de=this.__data__=new xi(Z);this.size=de.size}function St(){this.__data__=new xi,this.size=0}function Ht(Z){var de=this.__data__,be=de.delete(Z);return this.size=de.size,be}function fn(Z){return this.__data__.get(Z)}function Tr(Z){return this.__data__.has(Z)}function zt(Z,de){var be=this.__data__;if(be instanceof xi){var mt=be.__data__;if(!ku||mt.length<n-1)return mt.push([Z,de]),this.size=++be.size,this;be=this.__data__=new ie(mt)}return be.set(Z,de),this.size=be.size,this}Bt.prototype.clear=St,Bt.prototype.delete=Ht,Bt.prototype.get=fn,Bt.prototype.has=Tr,Bt.prototype.set=zt;function pr(Z,de){var be=f8(Z),mt=!be&&t_(Z),Hn=!be&&!mt&&tie(Z),Rr=!be&&!mt&&!Hn&&rie(Z),ii=be||mt||Hn||Rr,Ln=ii?ke(Z.length,String):[],si=Ln.length;for(var wl in Z)(de||et.call(Z,wl))&&!(ii&&(wl=="length"||Hn&&(wl=="offset"||wl=="parent")||Rr&&(wl=="buffer"||wl=="byteLength"||wl=="byteOffset")||gn(wl,si)))&&Ln.push(wl);return Ln}function Xt(Z,de,be){(be!==void 0&&!e_(Z[de],be)||be===void 0&&!(de in Z))&&ls(Z,de,be)}function er(Z,de,be){var mt=Z[de];(!(et.call(Z,de)&&e_(mt,be))||be===void 0&&!(de in Z))&&ls(Z,de,be)}function ni(Z,de){for(var be=Z.length;be--;)if(e_(Z[be][0],de))return be;return-1}function ls(Z,de,be){de=="__proto__"&&Wt?Wt(Z,de,{configurable:!0,enumerable:!0,value:be,writable:!0}):Z[de]=be}var Fi=De();function aa(Z){return Z==null?Z===void 0?x:y:In&&In in Object(Z)?Ze(Z):K0(Z)}function Js(Z){return Ox(Z)&&aa(Z)==a}function mi(Z){if(!X0(Z)||Si(Z))return!1;var de=h8(Z)?Dn:P;return de.test(c8(Z))}function yt(Z){return Ox(Z)&&nie(Z.length)&&!!H[aa(Z)]}function wn(Z){if(!X0(Z))return Ba(Z);var de=ri(Z),be=[];for(var mt in Z)mt=="constructor"&&(de||!et.call(Z,mt))||be.push(mt);return be}function Br(Z,de,be,mt,Hn){Z!==de&&Fi(de,function(Rr,ii){if(Hn||(Hn=new Bt),X0(Rr))Is(Z,de,ii,be,Br,mt,Hn);else{var Ln=mt?mt(Cx(Z,ii),Rr,ii+"",Z,de,Hn):void 0;Ln===void 0&&(Ln=Rr),Xt(Z,ii,Ln)}},iie)}function Is(Z,de,be,mt,Hn,Rr,ii){var Ln=Cx(Z,be),si=Cx(de,be),wl=ii.get(si);if(wl){Xt(Z,be,wl);return}var $u=Rr?Rr(Ln,si,be+"",Z,de,ii):void 0,Px=$u===void 0;if(Px){var p8=f8(si),m8=!p8&&tie(si),oie=!p8&&!m8&&rie(si);$u=si,p8||m8||oie?f8(Ln)?$u=Ln:dHe(Ln)?$u=pe(Ln):m8?(Px=!1,$u=te(si,!0)):oie?(Px=!1,$u=fe(si,!0)):$u=[]:hHe(si)||t_(si)?($u=Ln,t_(Ln)?$u=pHe(Ln):(!X0(Ln)||h8(Ln))&&($u=wt(si))):Px=!1}Px&&(ii.set(si,$u),Hn($u,si,mt,Rr,ii),ii.delete(si)),Xt(Z,be,$u)}function Fa(Z,de){return Ix(Ax(Z,de,sie),Z+"")}var q=Wt?function(Z,de){return Wt(Z,"toString",{configurable:!0,enumerable:!1,value:gHe(de),writable:!0})}:sie;function te(Z,de){if(de)return Z.slice();var be=Z.length,mt=it?it(be):new Z.constructor(be);return Z.copy(mt),mt}function K(Z){var de=new Z.constructor(Z.byteLength);return new Pe(de).set(new Pe(Z)),de}function fe(Z,de){var be=de?K(Z.buffer):Z.buffer;return new Z.constructor(be,Z.byteOffset,Z.length)}function pe(Z,de){var be=-1,mt=Z.length;for(de||(de=Array(mt));++be<mt;)de[be]=Z[be];return de}function oe(Z,de,be,mt){var Hn=!be;be||(be={});for(var Rr=-1,ii=de.length;++Rr<ii;){var Ln=de[Rr],si=mt?mt(be[Ln],Z[Ln],Ln,be,Z):void 0;si===void 0&&(si=Z[Ln]),Hn?ls(be,Ln,si):er(be,Ln,si)}return be}function Se(Z){return Fa(function(de,be){var mt=-1,Hn=be.length,Rr=Hn>1?be[Hn-1]:void 0,ii=Hn>2?be[2]:void 0;for(Rr=Z.length>3&&typeof Rr=="function"?(Hn--,Rr):void 0,ii&&tr(be[0],be[1],ii)&&(Rr=Hn<3?void 0:Rr,Hn=1),de=Object(de);++mt<Hn;){var Ln=be[mt];Ln&&Z(de,Ln,mt,Rr)}return de})}function De(Z){return function(de,be,mt){for(var Hn=-1,Rr=Object(de),ii=mt(de),Ln=ii.length;Ln--;){var si=ii[Z?Ln:++Hn];if(be(Rr[si],si,Rr)===!1)break}return de}}function ze(Z,de){var be=Z.__data__;return ur(de)?be[typeof de=="string"?"string":"hash"]:be.map}function He(Z,de){var be=Re(Z,de);return mi(be)?be:void 0}function Ze(Z){var de=et.call(Z,In),be=Z[In];try{Z[In]=void 0;var mt=!0}catch{}var Hn=lt.call(Z);return mt&&(de?Z[In]=be:delete Z[In]),Hn}function wt(Z){return typeof Z.constructor=="function"&&!ri(Z)?us(Ye(Z)):{}}function gn(Z,de){var be=typeof Z;return de=de??o,!!de&&(be=="number"||be!="symbol"&&k.test(Z))&&Z>-1&&Z%1==0&&Z<de}function tr(Z,de,be){if(!X0(be))return!1;var mt=typeof de;return(mt=="number"?d8(be)&&gn(de,be.length):mt=="string"&&de in be)?e_(be[de],Z):!1}function ur(Z){var de=typeof Z;return de=="string"||de=="number"||de=="symbol"||de=="boolean"?Z!=="__proto__":Z===null}function Si(Z){return!!ut&&ut in Z}function ri(Z){var de=Z&&Z.constructor,be=typeof de=="function"&&de.prototype||Qe;return Z===be}function Ba(Z){var de=[];if(Z!=null)for(var be in Object(Z))de.push(be);return de}function K0(Z){return lt.call(Z)}function Ax(Z,de,be){return de=hr(de===void 0?Z.length-1:de,0),function(){for(var mt=arguments,Hn=-1,Rr=hr(mt.length-de,0),ii=Array(Rr);++Hn<Rr;)ii[Hn]=mt[de+Hn];Hn=-1;for(var Ln=Array(de+1);++Hn<de;)Ln[Hn]=mt[Hn];return Ln[de]=be(ii),Fe(Z,this,Ln)}}function Cx(Z,de){if(!(de==="constructor"&&typeof Z[de]=="function")&&de!="__proto__")return Z[de]}var Ix=eie(q);function eie(Z){var de=0,be=0;return function(){var mt=Yn(),Hn=s-(mt-be);if(be=mt,Hn>0){if(++de>=i)return arguments[0]}else de=0;return Z.apply(void 0,arguments)}}function c8(Z){if(Z!=null){try{return bt.call(Z)}catch{}try{return Z+""}catch{}}return""}function e_(Z,de){return Z===de||Z!==Z&&de!==de}var t_=Js(function(){return arguments}())?Js:function(Z){return Ox(Z)&&et.call(Z,"callee")&&!tt.call(Z,"callee")},f8=Array.isArray;function d8(Z){return Z!=null&&nie(Z.length)&&!h8(Z)}function dHe(Z){return Ox(Z)&&d8(Z)}var tie=Vt||yHe;function h8(Z){if(!X0(Z))return!1;var de=aa(Z);return de==h||de==p||de==l||de==_}function nie(Z){return typeof Z=="number"&&Z>-1&&Z%1==0&&Z<=o}function X0(Z){var de=typeof Z;return Z!=null&&(de=="object"||de=="function")}function Ox(Z){return Z!=null&&typeof Z=="object"}function hHe(Z){if(!Ox(Z)||aa(Z)!=v)return!1;var de=Ye(Z);if(de===null)return!0;var be=et.call(de,"constructor")&&de.constructor;return typeof be=="function"&&be instanceof be&&bt.call(be)==jt}var rie=ue?Ge(ue):yt;function pHe(Z){return oe(Z,iie(Z))}function iie(Z){return d8(Z)?pr(Z,!0):wn(Z)}var mHe=Se(function(Z,de,be){Br(Z,de,be)});function gHe(Z){return function(){return Z}}function sie(Z){return Z}function yHe(){return!1}e.exports=mHe})(cD,cD.exports);var Kdt=cD.exports;const cY=pl(Kdt);function u1(e){return structuredClone(e)}function fY(){const{answers:e}=_f(i=>i),t=cc(),r=`${th()[t]}_${t}`;return e[r]}const NCe=A.createContext(null);function Xdt(){const e=A.useContext(NCe);if(!e)throw new Error("useWindowEvents must be used within a WindowEventsProvider");return e}function DCe(){const e=cc(),n=`${th()[e]}_${e}`,{trialValidation:r}=_f(v=>v),i=fY(),s=Kp(),{saveTrialAnswer:o,setIframeAnswers:a}=Yp(),{storageEngine:u}=x0(),c=!Ydt(n),f=i==null?void 0:i.answer,d=vv(),h=A.useMemo(()=>e+1,[e]),p=`/${y6()}/${h}`,m=A.useMemo(()=>Date.now(),[]),g=Xdt(),y=A.useCallback(()=>{const v=u1(r[n]),_=Object.values(v).reduce((x,S)=>Object.hasOwn(S,"values")?{...x,...S.values}:x,{}),{provenanceGraph:b}=v,E=Date.now(),w=g&&"current"in g&&g.current?g.current.splice(0,g.current.length):[];Object.keys(f||{}).length===0&&(s(o({identifier:n,answer:_,startTime:m,endTime:E,provenanceGraph:b,windowEvents:w})),u&&u.saveAnswer(n,{answer:_,startTime:m,endTime:E,provenanceGraph:b,windowEvents:w}),s(a([]))),d(`${p}${window.location.search}`)},[a,u,s,f,r,d,m,e,o,p,g,n]);return{nextStep:h,isNextDisabled:c,goToNextStep:y}}function Qdt({label:e="Next",disabled:t=!1,setCheckClicked:n=()=>{},onClick:r}){const{isNextDisabled:i,goToNextStep:s}=DCe(),o=A.useCallback(()=>{n(!1),r&&r(),s()},[s,r,n]);return R.jsx(cu,{type:"submit",disabled:t||i,onClick:o,children:e})}var dY=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(s=Object.keys(t),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n};const Jz=pl(dY);function Zz(e){return e===null||typeof e!="object"?{}:Object.keys(e).reduce((t,n)=>{const r=e[n];return r!=null&&r!==!1&&(t[n]=r),t},{})}var Jdt=Object.defineProperty,yce=Object.getOwnPropertySymbols,Zdt=Object.prototype.hasOwnProperty,eht=Object.prototype.propertyIsEnumerable,vce=(e,t,n)=>t in e?Jdt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,tht=(e,t)=>{for(var n in t||(t={}))Zdt.call(t,n)&&vce(e,n,t[n]);if(yce)for(var n of yce(t))eht.call(t,n)&&vce(e,n,t[n]);return e};function LCe(e,t){if(t===null||typeof t!="object")return{};const n=tht({},t);return Object.keys(t).forEach(r=>{r.includes(`${String(e)}.`)&&delete n[r]}),n}const nht="__MANTINE_FORM_INDEX__";function _ce(e,t){return t?typeof t=="boolean"?t:Array.isArray(t)?t.includes(e.replace(/[.][0-9]/g,`.${nht}`)):!1:!1}function bce(e,t,n){typeof n.value=="object"&&(n.value=Q_(n.value)),!n.enumerable||n.get||n.set||!n.configurable||!n.writable||t==="__proto__"?Object.defineProperty(e,t,n):e[t]=n.value}function Q_(e){if(typeof e!="object")return e;var t=0,n,r,i,s=Object.prototype.toString.call(e);if(s==="[object Object]"?i=Object.create(e.__proto__||null):s==="[object Array]"?i=Array(e.length):s==="[object Set]"?(i=new Set,e.forEach(function(o){i.add(Q_(o))})):s==="[object Map]"?(i=new Map,e.forEach(function(o,a){i.set(Q_(a),Q_(o))})):s==="[object Date]"?i=new Date(+e):s==="[object RegExp]"?i=new RegExp(e.source,e.flags):s==="[object DataView]"?i=new e.constructor(Q_(e.buffer)):s==="[object ArrayBuffer]"?i=e.slice(0):s.slice(-6)==="Array]"&&(i=new e.constructor(e)),i){for(r=Object.getOwnPropertySymbols(e);t<r.length;t++)bce(i,r[t],Object.getOwnPropertyDescriptor(e,r[t]));for(t=0,r=Object.getOwnPropertyNames(e);t<r.length;t++)Object.hasOwnProperty.call(i,n=r[t])&&i[n]===e[n]||bce(i,n,Object.getOwnPropertyDescriptor(e,n))}return i||e}function MCe(e){return typeof e!="string"?[]:e.split(".")}function _6(e,t,n){const r=MCe(e);if(r.length===0)return n;const i=Q_(n);if(r.length===1)return i[r[0]]=t,i;let s=i[r[0]];for(let o=1;o<r.length-1;o+=1){if(s===void 0)return i;s=s[r[o]]}return s[r[r.length-1]]=t,i}function Lh(e,t){const n=MCe(e);if(n.length===0||typeof t!="object"||t===null)return;let r=t[n[0]];for(let i=1;i<n.length&&r!==void 0;i+=1)r=r[n[i]];return r}function wce(e){const t=Zz(e);return{hasErrors:Object.keys(t).length>0,errors:t}}function eU(e,t,n="",r={}){return typeof e!="object"||e===null?r:Object.keys(e).reduce((i,s)=>{const o=e[s],a=`${n===""?"":`${n}.`}${s}`,u=Lh(a,t);let l=!1;return typeof o=="function"&&(i[a]=o(u,t,a)),typeof o=="object"&&Array.isArray(u)&&(l=!0,u.forEach((c,f)=>eU(o,t,`${a}.${f}`,i))),typeof o=="object"&&typeof u=="object"&&u!==null&&(l||eU(o,t,a,i)),i},r)}function tU(e,t){return wce(typeof e=="function"?e(t):eU(e,t))}function nP(e,t,n){if(typeof e!="string")return{hasError:!1,error:null};const r=tU(t,n),i=Object.keys(r.errors).find(s=>e.split(".").every((o,a)=>o===s.split(".")[a]));return{hasError:!!i,error:i?r.errors[i]:null}}function rht(e,{from:t,to:n},r){const i=Lh(e,r);if(!Array.isArray(i))return r;const s=[...i],o=i[t];return s.splice(t,1),s.splice(n,0,o),_6(e,s,r)}var iht=Object.defineProperty,Ece=Object.getOwnPropertySymbols,sht=Object.prototype.hasOwnProperty,oht=Object.prototype.propertyIsEnumerable,xce=(e,t,n)=>t in e?iht(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,aht=(e,t)=>{for(var n in t||(t={}))sht.call(t,n)&&xce(e,n,t[n]);if(Ece)for(var n of Ece(t))oht.call(t,n)&&xce(e,n,t[n]);return e};function uht(e,{from:t,to:n},r){const i=`${e}.${t}`,s=`${e}.${n}`,o=aht({},r);return Object.keys(r).every(a=>{let u,l;if(a.startsWith(i)&&(u=a,l=a.replace(i,s)),a.startsWith(s)&&(u=a.replace(s,i),l=a),u&&l){const c=o[u],f=o[l];return f===void 0?delete o[u]:o[u]=f,c===void 0?delete o[l]:o[l]=c,!1}return!0}),o}function lht(e,t,n){const r=Lh(e,n);return Array.isArray(r)?_6(e,r.filter((i,s)=>s!==t),n):n}var cht=Object.defineProperty,Sce=Object.getOwnPropertySymbols,fht=Object.prototype.hasOwnProperty,dht=Object.prototype.propertyIsEnumerable,Tce=(e,t,n)=>t in e?cht(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,hht=(e,t)=>{for(var n in t||(t={}))fht.call(t,n)&&Tce(e,n,t[n]);if(Sce)for(var n of Sce(t))dht.call(t,n)&&Tce(e,n,t[n]);return e};function Ace(e,t){const n=e.substring(t.length+1).split(".")[0];return parseInt(n,10)}function Cce(e,t,n,r){if(t===void 0)return n;const i=`${String(e)}`;let s=n;r===-1&&(s=LCe(`${i}.${t}`,s));const o=hht({},s),a=new Set;return Object.entries(s).filter(([u])=>{if(!u.startsWith(`${i}.`))return!1;const l=Ace(u,i);return Number.isNaN(l)?!1:l>=t}).forEach(([u,l])=>{const c=Ace(u,i),f=u.replace(`${i}.${c}`,`${i}.${c+r}`);o[f]=l,a.add(f),a.has(u)||delete o[u]}),o}function pht(e,t,n,r){const i=Lh(e,r);if(!Array.isArray(i))return r;const s=[...i];return s.splice(typeof n=="number"?n:s.length,0,t),_6(e,s,r)}function Ice(e,t){const n=Object.keys(e);if(typeof t=="string"){const r=n.filter(i=>i.startsWith(`${t}.`));return e[t]||r.some(i=>e[i])||!1}return n.some(r=>e[r])}function mht(e){return t=>{if(!t)e(t);else if(typeof t=="function")e(t);else if(typeof t=="object"&&"nativeEvent"in t){const{currentTarget:n}=t;n instanceof HTMLInputElement?n.type==="checkbox"?e(n.checked):e(n.value):(n instanceof HTMLTextAreaElement||n instanceof HTMLSelectElement)&&e(n.value)}else e(t)}}var ght=Object.defineProperty,yht=Object.defineProperties,vht=Object.getOwnPropertyDescriptors,Oce=Object.getOwnPropertySymbols,_ht=Object.prototype.hasOwnProperty,bht=Object.prototype.propertyIsEnumerable,Pce=(e,t,n)=>t in e?ght(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,dm=(e,t)=>{for(var n in t||(t={}))_ht.call(t,n)&&Pce(e,n,t[n]);if(Oce)for(var n of Oce(t))bht.call(t,n)&&Pce(e,n,t[n]);return e},T9=(e,t)=>yht(e,vht(t));function wht({initialValues:e={},initialErrors:t={},initialDirty:n={},initialTouched:r={},clearInputErrorOnChange:i=!0,validateInputOnChange:s=!1,validateInputOnBlur:o=!1,transformValues:a=l=>l,validate:u}={}){const[l,c]=A.useState(r),[f,d]=A.useState(n),[h,p]=A.useState(e),[m,g]=A.useState(Zz(t)),y=A.useRef(e),v=F=>{y.current=F},_=A.useCallback(()=>c({}),[]),b=F=>{const J=F?dm(dm({},h),F):h;v(J),d({})},E=A.useCallback(F=>g(J=>Zz(typeof F=="function"?F(J):F)),[]),w=A.useCallback(()=>g({}),[]),x=A.useCallback(()=>{p(e),w(),v(e),d({}),_()},[]),S=A.useCallback((F,J)=>E(se=>T9(dm({},se),{[F]:J})),[]),I=A.useCallback(F=>E(J=>{if(typeof F!="string")return J;const se=dm({},J);return delete se[F],se}),[]),C=A.useCallback(F=>d(J=>{if(typeof F!="string")return J;const se=LCe(F,J);return delete se[F],se}),[]),O=A.useCallback((F,J)=>{const se=_ce(F,s);C(F),c(ae=>T9(dm({},ae),{[F]:!0})),p(ae=>{const ce=_6(F,J,ae);if(se){const le=nP(F,u,ce);le.hasError?S(F,le.error):I(F)}return ce}),!se&&i&&S(F,null)},[]),z=A.useCallback(F=>{p(J=>{const se=typeof F=="function"?F(J):F;return dm(dm({},J),se)}),i&&w()},[]),N=A.useCallback((F,J)=>{C(F),p(se=>rht(F,J,se)),g(se=>uht(F,J,se))},[]),$=A.useCallback((F,J)=>{C(F),p(se=>lht(F,J,se)),g(se=>Cce(F,J,se,-1))},[]),D=A.useCallback((F,J,se)=>{C(F),p(ae=>pht(F,J,se,ae)),g(ae=>Cce(F,se,ae,1))},[]),B=A.useCallback(()=>{const F=tU(u,h);return g(F.errors),F},[h,u]),V=A.useCallback(F=>{const J=nP(F,u,h);return J.hasError?S(F,J.error):I(F),J},[h,u]),j=(F,{type:J="input",withError:se=!0,withFocus:ae=!0}={})=>{const le={onChange:mht(ge=>O(F,ge))};return se&&(le.error=m[F]),J==="checkbox"?le.checked=Lh(F,h):le.value=Lh(F,h),ae&&(le.onFocus=()=>c(ge=>T9(dm({},ge),{[F]:!0})),le.onBlur=()=>{if(_ce(F,o)){const ge=nP(F,u,h);ge.hasError?S(F,ge.error):I(F)}}),le},G=(F,J)=>se=>{se==null||se.preventDefault();const ae=B();ae.hasErrors?J==null||J(ae.errors,h,se):F==null||F(a(h),se)},U=F=>a(F||h),P=A.useCallback(F=>{F.preventDefault(),x()},[]),k=F=>{if(F){const se=Lh(F,f);if(typeof se=="boolean")return se;const ae=Lh(F,h),ce=Lh(F,y.current);return!Jz(ae,ce)}return Object.keys(f).length>0?Ice(f):!Jz(h,y.current)},H=A.useCallback(F=>Ice(l,F),[l]),M=A.useCallback(F=>F?!nP(F,u,h).hasError:!tU(u,h).hasErrors,[h,u]);return{values:h,errors:m,setValues:z,setErrors:E,setFieldValue:O,setFieldError:S,clearFieldError:I,clearErrors:w,reset:x,validate:B,validateField:V,reorderListItem:N,removeListItem:$,insertListItem:D,getInputProps:j,onSubmit:G,onReset:P,isDirty:k,isTouched:H,setTouched:c,setDirty:d,resetTouched:_,resetDirty:b,isValid:M,getTransformedValues:U}}const Eht=new URLSearchParams(window.location.search),xht=(e,t)=>{let n={};return e.forEach(r=>{const i=t?t[r.id]:{};if(i)n={...n,[r.id]:i};else{const s=r.paramCapture?Eht.get(r.paramCapture):"";n={...n,[r.id]:r.type==="iframe"?[]:s}}}),{...n}},Sht=e=>{let t={};return e.forEach(n=>{n.required&&(t={...t,[n.id]:r=>{if(Array.isArray(r)){if(n.requiredValue!=null&&!Array.isArray(n.requiredValue))return"Incorrect required value";if(n.requiredValue!=null&&Array.isArray(n.requiredValue)){if(n.requiredValue.length!==r.length)return"Incorrect input";const i=[...n.requiredValue].sort(),s=[...r].sort();return i.every((o,a)=>o===s[a])?null:"Incorrect input"}return r.length===0?"Empty input":null}return n.required&&n.requiredValue!=null&&r!=null?r.toString()!==n.requiredValue.toString()?"Incorrect input":null:n.required?r==null||r===""?"Empty input":null:r===null?"Empty input":null}})}),t};function Tht(e,t,n){const[r,i]=A.useState(null),s=wht({initialValues:xht(e,n),validate:Sht(e)});return A.useEffect(()=>{r!==t&&(i(t),s.reset())},[r,s,t]),s}function xv(e,t,n){var o;const{requiredValue:r,requiredLabel:i}=e;let s="";return t.checked&&Array.isArray(r)?s=r&&[...r].sort().toString()!==[...t.checked].sort().toString()?`Please ${n?"select":"enter"} ${i||r.toString()} to continue.`:null:s=t.value&&r&&r.toString()!==t.value.toString()?`Please ${n?"select":"enter"} ${i||(n?(o=n.find(a=>a.value===r))==null?void 0:o.label:r.toString())} to continue.`:null,s}const kce=["http","https","mailto","tel"];function Aht(e){const t=(e||"").trim(),n=t.charAt(0);if(n==="#"||n==="/")return t;const r=t.indexOf(":");if(r===-1)return t;let i=-1;for(;++i<kce.length;){const s=kce[i];if(r===s.length&&t.slice(0,s.length).toLowerCase()===s)return t}return i=t.indexOf("?"),i!==-1&&r>i||(i=t.indexOf("#"),i!==-1&&r>i)?t:"javascript:void(0)"}/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var Cht=function(t){return t!=null&&t.constructor!=null&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)};const hY=pl(Cht);function Ab(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?$ce(e.position):"start"in e||"end"in e?$ce(e):"line"in e||"column"in e?nU(e):""}function nU(e){return Rce(e&&e.line)+":"+Rce(e&&e.column)}function $ce(e){return nU(e&&e.start)+"-"+nU(e&&e.end)}function Rce(e){return e&&typeof e=="number"?e:1}let fc=class extends Error{constructor(t,n,r){const i=[null,null];let s={start:{line:null,column:null},end:{line:null,column:null}};if(super(),typeof n=="string"&&(r=n,n=void 0),typeof r=="string"){const o=r.indexOf(":");o===-1?i[1]=r:(i[0]=r.slice(0,o),i[1]=r.slice(o+1))}n&&("type"in n||"position"in n?n.position&&(s=n.position):"start"in n||"end"in n?s=n:("line"in n||"column"in n)&&(s.start=n)),this.name=Ab(n)||"1:1",this.message=typeof t=="object"?t.message:t,this.stack="",typeof t=="object"&&t.stack&&(this.stack=t.stack),this.reason=this.message,this.fatal,this.line=s.start.line,this.column=s.start.column,this.position=s,this.source=i[0],this.ruleId=i[1],this.file,this.actual,this.expected,this.url,this.note}};fc.prototype.file="";fc.prototype.name="";fc.prototype.reason="";fc.prototype.message="";fc.prototype.stack="";fc.prototype.fatal=null;fc.prototype.column=null;fc.prototype.line=null;fc.prototype.source=null;fc.prototype.ruleId=null;fc.prototype.position=null;const Uf={basename:Iht,dirname:Oht,extname:Pht,join:kht,sep:"/"};function Iht(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');VC(e);let n=0,r=-1,i=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.charCodeAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let o=-1,a=t.length-1;for(;i--;)if(e.charCodeAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(e.charCodeAt(i)===t.charCodeAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=e.length),e.slice(n,r)}function Oht(e){if(VC(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.charCodeAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.charCodeAt(0)===47?"/":".":t===1&&e.charCodeAt(0)===47?"//":e.slice(0,t)}function Pht(e){VC(e);let t=e.length,n=-1,r=0,i=-1,s=0,o;for(;t--;){const a=e.charCodeAt(t);if(a===47){if(o){r=t+1;break}continue}n<0&&(o=!0,n=t+1),a===46?i<0?i=t:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function kht(...e){let t=-1,n;for(;++t<e.length;)VC(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":$ht(n)}function $ht(e){VC(e);const t=e.charCodeAt(0)===47;let n=Rht(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.charCodeAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function Rht(e,t){let n="",r=0,i=-1,s=0,o=-1,a,u;for(;++o<=e.length;){if(o<e.length)a=e.charCodeAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){if(u=n.lastIndexOf("/"),u!==n.length-1){u<0?(n="",r=0):(n=n.slice(0,u),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,o):n=e.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function VC(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const Nht={cwd:Dht};function Dht(){return"/"}function rU(e){return e!==null&&typeof e=="object"&&e.href&&e.origin}function Lht(e){if(typeof e=="string")e=new URL(e);else if(!rU(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return Mht(e)}function Mht(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.charCodeAt(n)===37&&t.charCodeAt(n+1)===50){const r=t.charCodeAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const A9=["history","path","basename","stem","extname","dirname"];let Fht=class{constructor(t){let n;t?typeof t=="string"||hY(t)?n={value:t}:rU(t)?n={path:t}:n=t:n={},this.data={},this.messages=[],this.history=[],this.cwd=Nht.cwd(),this.value,this.stored,this.result,this.map;let r=-1;for(;++r<A9.length;){const s=A9[r];s in n&&n[s]!==void 0&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)A9.includes(i)||(this[i]=n[i])}get path(){return this.history[this.history.length-1]}set path(t){rU(t)&&(t=Lht(t)),I9(t,"path"),this.path!==t&&this.history.push(t)}get dirname(){return typeof this.path=="string"?Uf.dirname(this.path):void 0}set dirname(t){Nce(this.basename,"dirname"),this.path=Uf.join(t||"",this.basename)}get basename(){return typeof this.path=="string"?Uf.basename(this.path):void 0}set basename(t){I9(t,"basename"),C9(t,"basename"),this.path=Uf.join(this.dirname||"",t)}get extname(){return typeof this.path=="string"?Uf.extname(this.path):void 0}set extname(t){if(C9(t,"extname"),Nce(this.dirname,"extname"),t){if(t.charCodeAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Uf.join(this.dirname,this.stem+(t||""))}get stem(){return typeof this.path=="string"?Uf.basename(this.path,this.extname):void 0}set stem(t){I9(t,"stem"),C9(t,"stem"),this.path=Uf.join(this.dirname||"",t+(this.extname||""))}toString(t){return(this.value||"").toString(t)}message(t,n,r){const i=new fc(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=null,i}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}};function C9(e,t){if(e&&e.includes(Uf.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Uf.sep+"`")}function I9(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function Nce(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function Dce(e){if(e)throw e}var Vk=Object.prototype.hasOwnProperty,FCe=Object.prototype.toString,Lce=Object.defineProperty,Mce=Object.getOwnPropertyDescriptor,Fce=function(t){return typeof Array.isArray=="function"?Array.isArray(t):FCe.call(t)==="[object Array]"},Bce=function(t){if(!t||FCe.call(t)!=="[object Object]")return!1;var n=Vk.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&Vk.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!r)return!1;var i;for(i in t);return typeof i>"u"||Vk.call(t,i)},jce=function(t,n){Lce&&n.name==="__proto__"?Lce(t,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):t[n.name]=n.newValue},zce=function(t,n){if(n==="__proto__")if(Vk.call(t,n)){if(Mce)return Mce(t,n).value}else return;return t[n]},Bht=function e(){var t,n,r,i,s,o,a=arguments[0],u=1,l=arguments.length,c=!1;for(typeof a=="boolean"&&(c=a,a=arguments[1]||{},u=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});u<l;++u)if(t=arguments[u],t!=null)for(n in t)r=zce(a,n),i=zce(t,n),a!==i&&(c&&i&&(Bce(i)||(s=Fce(i)))?(s?(s=!1,o=r&&Fce(r)?r:[]):o=r&&Bce(r)?r:{},jce(a,{name:n,newValue:e(c,o,i)})):typeof i<"u"&&jce(a,{name:n,newValue:i}));return a};const Uce=pl(Bht);function iU(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function jht(){const e=[],t={run:n,use:r};return t;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...i);function a(u,...l){const c=e[++s];let f=-1;if(u){o(u);return}for(;++f<i.length;)(l[f]===null||l[f]===void 0)&&(l[f]=i[f]);i=l,c?zht(c,a)(...l):o(null,...l)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function zht(e,t){let n;return r;function r(...o){const a=e.length>o.length;let u;a&&o.push(i);try{u=e.apply(this,o)}catch(l){const c=l;if(a&&n)throw c;return i(c)}a||(u instanceof Promise?u.then(s,i):u instanceof Error?i(u):s(u))}function i(o,...a){n||(n=!0,t(o,...a))}function s(o){i(null,o)}}class dc extends Error{constructor(t,n,r){const i=[null,null];let s={start:{line:null,column:null},end:{line:null,column:null}};if(super(),typeof n=="string"&&(r=n,n=void 0),typeof r=="string"){const o=r.indexOf(":");o===-1?i[1]=r:(i[0]=r.slice(0,o),i[1]=r.slice(o+1))}n&&("type"in n||"position"in n?n.position&&(s=n.position):"start"in n||"end"in n?s=n:("line"in n||"column"in n)&&(s.start=n)),this.name=Ab(n)||"1:1",this.message=typeof t=="object"?t.message:t,this.stack="",typeof t=="object"&&t.stack&&(this.stack=t.stack),this.reason=this.message,this.fatal,this.line=s.start.line,this.column=s.start.column,this.position=s,this.source=i[0],this.ruleId=i[1],this.file,this.actual,this.expected,this.url,this.note}}dc.prototype.file="";dc.prototype.name="";dc.prototype.reason="";dc.prototype.message="";dc.prototype.stack="";dc.prototype.fatal=null;dc.prototype.column=null;dc.prototype.line=null;dc.prototype.source=null;dc.prototype.ruleId=null;dc.prototype.position=null;const Vf={basename:Uht,dirname:Vht,extname:Hht,join:qht,sep:"/"};function Uht(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');HC(e);let n=0,r=-1,i=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.charCodeAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let o=-1,a=t.length-1;for(;i--;)if(e.charCodeAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(e.charCodeAt(i)===t.charCodeAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=e.length),e.slice(n,r)}function Vht(e){if(HC(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.charCodeAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.charCodeAt(0)===47?"/":".":t===1&&e.charCodeAt(0)===47?"//":e.slice(0,t)}function Hht(e){HC(e);let t=e.length,n=-1,r=0,i=-1,s=0,o;for(;t--;){const a=e.charCodeAt(t);if(a===47){if(o){r=t+1;break}continue}n<0&&(o=!0,n=t+1),a===46?i<0?i=t:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function qht(...e){let t=-1,n;for(;++t<e.length;)HC(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":Wht(n)}function Wht(e){HC(e);const t=e.charCodeAt(0)===47;let n=Ght(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.charCodeAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function Ght(e,t){let n="",r=0,i=-1,s=0,o=-1,a,u;for(;++o<=e.length;){if(o<e.length)a=e.charCodeAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){if(u=n.lastIndexOf("/"),u!==n.length-1){u<0?(n="",r=0):(n=n.slice(0,u),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,o):n=e.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function HC(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const Yht={cwd:Kht};function Kht(){return"/"}function sU(e){return e!==null&&typeof e=="object"&&e.href&&e.origin}function Xht(e){if(typeof e=="string")e=new URL(e);else if(!sU(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return Qht(e)}function Qht(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.charCodeAt(n)===37&&t.charCodeAt(n+1)===50){const r=t.charCodeAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const O9=["history","path","basename","stem","extname","dirname"];class Jht{constructor(t){let n;t?typeof t=="string"||hY(t)?n={value:t}:sU(t)?n={path:t}:n=t:n={},this.data={},this.messages=[],this.history=[],this.cwd=Yht.cwd(),this.value,this.stored,this.result,this.map;let r=-1;for(;++r<O9.length;){const s=O9[r];s in n&&n[s]!==void 0&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)O9.includes(i)||(this[i]=n[i])}get path(){return this.history[this.history.length-1]}set path(t){sU(t)&&(t=Xht(t)),k9(t,"path"),this.path!==t&&this.history.push(t)}get dirname(){return typeof this.path=="string"?Vf.dirname(this.path):void 0}set dirname(t){Vce(this.basename,"dirname"),this.path=Vf.join(t||"",this.basename)}get basename(){return typeof this.path=="string"?Vf.basename(this.path):void 0}set basename(t){k9(t,"basename"),P9(t,"basename"),this.path=Vf.join(this.dirname||"",t)}get extname(){return typeof this.path=="string"?Vf.extname(this.path):void 0}set extname(t){if(P9(t,"extname"),Vce(this.dirname,"extname"),t){if(t.charCodeAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Vf.join(this.dirname,this.stem+(t||""))}get stem(){return typeof this.path=="string"?Vf.basename(this.path,this.extname):void 0}set stem(t){k9(t,"stem"),P9(t,"stem"),this.path=Vf.join(this.dirname||"",t+(this.extname||""))}toString(t){return(this.value||"").toString(t)}message(t,n,r){const i=new dc(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=null,i}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}}function P9(e,t){if(e&&e.includes(Vf.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Vf.sep+"`")}function k9(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function Vce(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}const Zht=jCe().freeze(),BCe={}.hasOwnProperty;function jCe(){const e=jht(),t=[];let n={},r,i=-1;return s.data=o,s.Parser=void 0,s.Compiler=void 0,s.freeze=a,s.attachers=t,s.use=u,s.parse=l,s.stringify=c,s.run=f,s.runSync=d,s.process=h,s.processSync=p,s;function s(){const m=jCe();let g=-1;for(;++g<t.length;)m.use(...t[g]);return m.data(Uce(!0,{},n)),m}function o(m,g){return typeof m=="string"?arguments.length===2?(N9("data",r),n[m]=g,s):BCe.call(n,m)&&n[m]||null:m?(N9("data",r),n=m,s):n}function a(){if(r)return s;for(;++i<t.length;){const[m,...g]=t[i];if(g[0]===!1)continue;g[0]===!0&&(g[0]=void 0);const y=m.call(s,...g);typeof y=="function"&&e.use(y)}return r=!0,i=Number.POSITIVE_INFINITY,s}function u(m,...g){let y;if(N9("use",r),m!=null)if(typeof m=="function")E(m,...g);else if(typeof m=="object")Array.isArray(m)?b(m):_(m);else throw new TypeError("Expected usable value, not `"+m+"`");return y&&(n.settings=Object.assign(n.settings||{},y)),s;function v(w){if(typeof w=="function")E(w);else if(typeof w=="object")if(Array.isArray(w)){const[x,...S]=w;E(x,...S)}else _(w);else throw new TypeError("Expected usable value, not `"+w+"`")}function _(w){b(w.plugins),w.settings&&(y=Object.assign(y||{},w.settings))}function b(w){let x=-1;if(w!=null)if(Array.isArray(w))for(;++x<w.length;){const S=w[x];v(S)}else throw new TypeError("Expected a list of plugins, not `"+w+"`")}function E(w,x){let S=-1,I;for(;++S<t.length;)if(t[S][0]===w){I=t[S];break}I?(iU(I[1])&&iU(x)&&(x=Uce(!0,I[1],x)),I[1]=x):t.push([...arguments])}}function l(m){s.freeze();const g=Wx(m),y=s.Parser;return $9("parse",y),Hce(y,"parse")?new y(String(g),g).parse():y(String(g),g)}function c(m,g){s.freeze();const y=Wx(g),v=s.Compiler;return R9("stringify",v),qce(m),Hce(v,"compile")?new v(m,y).compile():v(m,y)}function f(m,g,y){if(qce(m),s.freeze(),!y&&typeof g=="function"&&(y=g,g=void 0),!y)return new Promise(v);v(null,y);function v(_,b){e.run(m,Wx(g),E);function E(w,x,S){x=x||m,w?b(w):_?_(x):y(null,x,S)}}}function d(m,g){let y,v;return s.run(m,g,_),Wce("runSync","run",v),y;function _(b,E){Dce(b),y=E,v=!0}}function h(m,g){if(s.freeze(),$9("process",s.Parser),R9("process",s.Compiler),!g)return new Promise(y);y(null,g);function y(v,_){const b=Wx(m);s.run(s.parse(b),b,(w,x,S)=>{if(w||!x||!S)E(w);else{const I=s.stringify(x,S);I==null||(npt(I)?S.value=I:S.result=I),E(w,S)}});function E(w,x){w||!x?_(w):v?v(x):g(null,x)}}}function p(m){let g;s.freeze(),$9("processSync",s.Parser),R9("processSync",s.Compiler);const y=Wx(m);return s.process(y,v),Wce("processSync","process",g),y;function v(_){g=!0,Dce(_)}}}function Hce(e,t){return typeof e=="function"&&e.prototype&&(ept(e.prototype)||t in e.prototype)}function ept(e){let t;for(t in e)if(BCe.call(e,t))return!0;return!1}function $9(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `Parser`")}function R9(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `Compiler`")}function N9(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function qce(e){if(!iU(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function Wce(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function Wx(e){return tpt(e)?e:new Jht(e)}function tpt(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function npt(e){return typeof e=="string"||hY(e)}function rpt(e,t){var{includeImageAlt:n=!0}=t||{};return zCe(e,n)}function zCe(e,t){return e&&typeof e=="object"&&(e.value||(t?e.alt:"")||"children"in e&&Gce(e.children,t)||Array.isArray(e)&&Gce(e,t))||""}function Gce(e,t){for(var n=[],r=-1;++r<e.length;)n[r]=zCe(e[r],t);return n.join("")}function Md(e,t,n,r){const i=e.length;let s=0,o;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),[].splice.apply(e,o);else for(n&&[].splice.apply(e,[t,n]);s<r.length;)o=r.slice(s,s+1e4),o.unshift(t,0),[].splice.apply(e,o),s+=1e4,t+=1e4}function Rl(e,t){return e.length>0?(Md(e,e.length,0,t),e):t}const Yce={}.hasOwnProperty;function ipt(e){const t={};let n=-1;for(;++n<e.length;)spt(t,e[n]);return t}function spt(e,t){let n;for(n in t){const i=(Yce.call(e,n)?e[n]:void 0)||(e[n]={}),s=t[n];let o;for(o in s){Yce.call(i,o)||(i[o]=[]);const a=s[o];opt(i[o],Array.isArray(a)?a:a?[a]:[])}}}function opt(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);Md(e,0,0,r)}const apt=/[!-/:-@[-`{-~\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,ed=A0(/[A-Za-z]/),oU=A0(/\d/),upt=A0(/[\dA-Fa-f]/),Yu=A0(/[\dA-Za-z]/),lpt=A0(/[!-/:-@[-`{-~]/),Kce=A0(/[#-'*+\--9=?A-Z^-~]/);function aU(e){return e!==null&&(e<32||e===127)}function Gl(e){return e!==null&&(e<0||e===32)}function Jt(e){return e!==null&&e<-2}function es(e){return e===-2||e===-1||e===32}const cpt=A0(/\s/),fpt=A0(apt);function A0(e){return t;function t(n){return n!==null&&e.test(String.fromCharCode(n))}}function Nr(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(u){return es(u)?(e.enter(n),a(u)):t(u)}function a(u){return es(u)&&s++<i?(e.consume(u),a):(e.exit(n),t(u))}}const dpt={tokenize:hpt};function hpt(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),Nr(e,t,"linePrefix")}function i(a){return e.enter("paragraph"),s(a)}function s(a){const u=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=u),n=u,o(a)}function o(a){if(a===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(a);return}return Jt(a)?(e.consume(a),e.exit("chunkText"),s):(e.consume(a),o)}}const ppt={tokenize:mpt},Xce={tokenize:gpt};function mpt(e){const t=this,n=[];let r=0,i,s,o;return a;function a(_){if(r<n.length){const b=n[r];return t.containerState=b[1],e.attempt(b[0].continuation,u,l)(_)}return l(_)}function u(_){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&v();const b=t.events.length;let E=b,w;for(;E--;)if(t.events[E][0]==="exit"&&t.events[E][1].type==="chunkFlow"){w=t.events[E][1].end;break}y(r);let x=b;for(;x<t.events.length;)t.events[x][1].end=Object.assign({},w),x++;return Md(t.events,E+1,0,t.events.slice(b)),t.events.length=x,l(_)}return a(_)}function l(_){if(r===n.length){if(!i)return d(_);if(i.currentConstruct&&i.currentConstruct.concrete)return p(_);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(Xce,c,f)(_)}function c(_){return i&&v(),y(r),d(_)}function f(_){return t.parser.lazy[t.now().line]=r!==n.length,o=t.now().offset,p(_)}function d(_){return t.containerState={},e.attempt(Xce,h,p)(_)}function h(_){return r++,n.push([t.currentConstruct,t.containerState]),d(_)}function p(_){if(_===null){i&&v(),y(0),e.consume(_);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{contentType:"flow",previous:s,_tokenizer:i}),m(_)}function m(_){if(_===null){g(e.exit("chunkFlow"),!0),y(0),e.consume(_);return}return Jt(_)?(e.consume(_),g(e.exit("chunkFlow")),r=0,t.interrupt=void 0,a):(e.consume(_),m)}function g(_,b){const E=t.sliceStream(_);if(b&&E.push(null),_.previous=s,s&&(s.next=_),s=_,i.defineSkip(_.start),i.write(E),t.parser.lazy[_.start.line]){let w=i.events.length;for(;w--;)if(i.events[w][1].start.offset<o&&(!i.events[w][1].end||i.events[w][1].end.offset>o))return;const x=t.events.length;let S=x,I,C;for(;S--;)if(t.events[S][0]==="exit"&&t.events[S][1].type==="chunkFlow"){if(I){C=t.events[S][1].end;break}I=!0}for(y(r),w=x;w<t.events.length;)t.events[w][1].end=Object.assign({},C),w++;Md(t.events,S+1,0,t.events.slice(x)),t.events.length=w}}function y(_){let b=n.length;for(;b-- >_;){const E=n[b];t.containerState=E[1],E[0].exit.call(t,e)}n.length=_}function v(){i.write([null]),s=void 0,i=void 0,t.containerState._closeFlow=void 0}}function gpt(e,t,n){return Nr(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Qce(e){if(e===null||Gl(e)||cpt(e))return 1;if(fpt(e))return 2}function pY(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const s=e[i].resolveAll;s&&!r.includes(s)&&(t=s(t,n),r.push(s))}return t}const uU={name:"attention",tokenize:vpt,resolveAll:ypt};function ypt(e,t){let n=-1,r,i,s,o,a,u,l,c;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;u=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const f=Object.assign({},e[r][1].end),d=Object.assign({},e[n][1].start);Jce(f,-u),Jce(d,u),o={type:u>1?"strongSequence":"emphasisSequence",start:f,end:Object.assign({},e[r][1].end)},a={type:u>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[n][1].start),end:d},s={type:u>1?"strongText":"emphasisText",start:Object.assign({},e[r][1].end),end:Object.assign({},e[n][1].start)},i={type:u>1?"strong":"emphasis",start:Object.assign({},o.start),end:Object.assign({},a.end)},e[r][1].end=Object.assign({},o.start),e[n][1].start=Object.assign({},a.end),l=[],e[r][1].end.offset-e[r][1].start.offset&&(l=Rl(l,[["enter",e[r][1],t],["exit",e[r][1],t]])),l=Rl(l,[["enter",i,t],["enter",o,t],["exit",o,t],["enter",s,t]]),l=Rl(l,pY(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),l=Rl(l,[["exit",s,t],["enter",a,t],["exit",a,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(c=2,l=Rl(l,[["enter",e[n][1],t],["exit",e[n][1],t]])):c=0,Md(e,r-1,n-r+3,l),n=r+l.length-c-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function vpt(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=Qce(r);let s;return o;function o(u){return e.enter("attentionSequence"),s=u,a(u)}function a(u){if(u===s)return e.consume(u),a;const l=e.exit("attentionSequence"),c=Qce(u),f=!c||c===2&&i||n.includes(u),d=!i||i===2&&c||n.includes(r);return l._open=!!(s===42?f:f&&(i||!d)),l._close=!!(s===42?d:d&&(c||!f)),t(u)}}function Jce(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const _pt={name:"autolink",tokenize:bpt};function bpt(e,t,n){let r=1;return i;function i(p){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(p),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s}function s(p){return ed(p)?(e.consume(p),o):Kce(p)?l(p):n(p)}function o(p){return p===43||p===45||p===46||Yu(p)?a(p):l(p)}function a(p){return p===58?(e.consume(p),u):(p===43||p===45||p===46||Yu(p))&&r++<32?(e.consume(p),a):l(p)}function u(p){return p===62?(e.exit("autolinkProtocol"),h(p)):p===null||p===32||p===60||aU(p)?n(p):(e.consume(p),u)}function l(p){return p===64?(e.consume(p),r=0,c):Kce(p)?(e.consume(p),l):n(p)}function c(p){return Yu(p)?f(p):n(p)}function f(p){return p===46?(e.consume(p),r=0,c):p===62?(e.exit("autolinkProtocol").type="autolinkEmail",h(p)):d(p)}function d(p){return(p===45||Yu(p))&&r++<63?(e.consume(p),p===45?d:f):n(p)}function h(p){return e.enter("autolinkMarker"),e.consume(p),e.exit("autolinkMarker"),e.exit("autolink"),t}}const b6={tokenize:wpt,partial:!0};function wpt(e,t,n){return Nr(e,r,"linePrefix");function r(i){return i===null||Jt(i)?t(i):n(i)}}const UCe={name:"blockQuote",tokenize:Ept,continuation:{tokenize:xpt},exit:Spt};function Ept(e,t,n){const r=this;return i;function i(o){if(o===62){const a=r.containerState;return a.open||(e.enter("blockQuote",{_container:!0}),a.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),s}return n(o)}function s(o){return es(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(o))}}function xpt(e,t,n){return Nr(e,e.attempt(UCe,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Spt(e){e.exit("blockQuote")}const VCe={name:"characterEscape",tokenize:Tpt};function Tpt(e,t,n){return r;function r(s){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(s),e.exit("escapeMarker"),i}function i(s){return lpt(s)?(e.enter("characterEscapeValue"),e.consume(s),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(s)}}const Zce=document.createElement("i");function mY(e){const t="&"+e+";";Zce.innerHTML=t;const n=Zce.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}const HCe={name:"characterReference",tokenize:Apt};function Apt(e,t,n){const r=this;let i=0,s,o;return a;function a(f){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),u}function u(f){return f===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(f),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),s=31,o=Yu,c(f))}function l(f){return f===88||f===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(f),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,o=upt,c):(e.enter("characterReferenceValue"),s=7,o=oU,c(f))}function c(f){let d;return f===59&&i?(d=e.exit("characterReferenceValue"),o===Yu&&!mY(r.sliceSerialize(d))?n(f):(e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)):o(f)&&i++<s?(e.consume(f),c):n(f)}}const efe={name:"codeFenced",tokenize:Cpt,concrete:!0};function Cpt(e,t,n){const r=this,i={tokenize:E,partial:!0},s={tokenize:b,partial:!0},o=this.events[this.events.length-1],a=o&&o[1].type==="linePrefix"?o[2].sliceSerialize(o[1],!0).length:0;let u=0,l;return c;function c(w){return e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),l=w,f(w)}function f(w){return w===l?(e.consume(w),u++,f):(e.exit("codeFencedFenceSequence"),u<3?n(w):Nr(e,d,"whitespace")(w))}function d(w){return w===null||Jt(w)?g(w):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),h(w))}function h(w){return w===null||Gl(w)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Nr(e,p,"whitespace")(w)):w===96&&w===l?n(w):(e.consume(w),h)}function p(w){return w===null||Jt(w)?g(w):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),m(w))}function m(w){return w===null||Jt(w)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),g(w)):w===96&&w===l?n(w):(e.consume(w),m)}function g(w){return e.exit("codeFencedFence"),r.interrupt?t(w):y(w)}function y(w){return w===null?_(w):Jt(w)?e.attempt(s,e.attempt(i,_,a?Nr(e,y,"linePrefix",a+1):y),_)(w):(e.enter("codeFlowValue"),v(w))}function v(w){return w===null||Jt(w)?(e.exit("codeFlowValue"),y(w)):(e.consume(w),v)}function _(w){return e.exit("codeFenced"),t(w)}function b(w,x,S){const I=this;return C;function C(z){return w.enter("lineEnding"),w.consume(z),w.exit("lineEnding"),O}function O(z){return I.parser.lazy[I.now().line]?S(z):x(z)}}function E(w,x,S){let I=0;return Nr(w,C,"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4);function C(N){return w.enter("codeFencedFence"),w.enter("codeFencedFenceSequence"),O(N)}function O(N){return N===l?(w.consume(N),I++,O):I<u?S(N):(w.exit("codeFencedFenceSequence"),Nr(w,z,"whitespace")(N))}function z(N){return N===null||Jt(N)?(w.exit("codeFencedFence"),x(N)):S(N)}}}const D9={name:"codeIndented",tokenize:Opt},Ipt={tokenize:Ppt,partial:!0};function Opt(e,t,n){const r=this;return i;function i(l){return e.enter("codeIndented"),Nr(e,s,"linePrefix",5)(l)}function s(l){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?o(l):n(l)}function o(l){return l===null?u(l):Jt(l)?e.attempt(Ipt,o,u)(l):(e.enter("codeFlowValue"),a(l))}function a(l){return l===null||Jt(l)?(e.exit("codeFlowValue"),o(l)):(e.consume(l),a)}function u(l){return e.exit("codeIndented"),t(l)}}function Ppt(e,t,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):Jt(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i):Nr(e,s,"linePrefix",5)(o)}function s(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):Jt(o)?i(o):n(o)}}const kpt={name:"codeText",tokenize:Npt,resolve:$pt,previous:Rpt};function $pt(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function Rpt(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function Npt(e,t,n){let r=0,i,s;return o;function o(f){return e.enter("codeText"),e.enter("codeTextSequence"),a(f)}function a(f){return f===96?(e.consume(f),r++,a):(e.exit("codeTextSequence"),u(f))}function u(f){return f===null?n(f):f===96?(s=e.enter("codeTextSequence"),i=0,c(f)):f===32?(e.enter("space"),e.consume(f),e.exit("space"),u):Jt(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),u):(e.enter("codeTextData"),l(f))}function l(f){return f===null||f===32||f===96||Jt(f)?(e.exit("codeTextData"),u(f)):(e.consume(f),l)}function c(f){return f===96?(e.consume(f),i++,c):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(f)):(s.type="codeTextData",l(f))}}function qCe(e){const t={};let n=-1,r,i,s,o,a,u,l;for(;++n<e.length;){for(;n in t;)n=t[n];if(r=e[n],n&&r[1].type==="chunkFlow"&&e[n-1][1].type==="listItemPrefix"&&(u=r[1]._tokenizer.events,s=0,s<u.length&&u[s][1].type==="lineEndingBlank"&&(s+=2),s<u.length&&u[s][1].type==="content"))for(;++s<u.length&&u[s][1].type!=="content";)u[s][1].type==="chunkText"&&(u[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,Dpt(e,n)),n=t[n],l=!0);else if(r[1]._container){for(s=n,i=void 0;s--&&(o=e[s],o[1].type==="lineEnding"||o[1].type==="lineEndingBlank");)o[0]==="enter"&&(i&&(e[i][1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);i&&(r[1].end=Object.assign({},e[i][1].start),a=e.slice(i,n),a.unshift(r),Md(e,i,n-i+1,a))}}return!l}function Dpt(e,t){const n=e[t][1],r=e[t][2];let i=t-1;const s=[],o=n._tokenizer||r.parser[n.contentType](n.start),a=o.events,u=[],l={};let c,f,d=-1,h=n,p=0,m=0;const g=[m];for(;h;){for(;e[++i][1]!==h;);s.push(i),h._tokenizer||(c=r.sliceStream(h),h.next||c.push(null),f&&o.defineSkip(h.start),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(c),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),f=h,h=h.next}for(h=n;++d<a.length;)a[d][0]==="exit"&&a[d-1][0]==="enter"&&a[d][1].type===a[d-1][1].type&&a[d][1].start.line!==a[d][1].end.line&&(m=d+1,g.push(m),h._tokenizer=void 0,h.previous=void 0,h=h.next);for(o.events=[],h?(h._tokenizer=void 0,h.previous=void 0):g.pop(),d=g.length;d--;){const y=a.slice(g[d],g[d+1]),v=s.pop();u.unshift([v,v+y.length-1]),Md(e,v,2,y)}for(d=-1;++d<u.length;)l[p+u[d][0]]=p+u[d][1],p+=u[d][1]-u[d][0]-1;return l}const Lpt={tokenize:Bpt,resolve:Fpt},Mpt={tokenize:jpt,partial:!0};function Fpt(e){return qCe(e),e}function Bpt(e,t){let n;return r;function r(a){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):Jt(a)?e.check(Mpt,o,s)(a):(e.consume(a),i)}function s(a){return e.exit("chunkContent"),e.exit("content"),t(a)}function o(a){return e.consume(a),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function jpt(e,t,n){const r=this;return i;function i(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),Nr(e,s,"linePrefix")}function s(o){if(o===null||Jt(o))return n(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):e.interrupt(r.parser.constructs.flow,n,t)(o)}}function WCe(e,t,n,r,i,s,o,a,u){const l=u||Number.POSITIVE_INFINITY;let c=0;return f;function f(y){return y===60?(e.enter(r),e.enter(i),e.enter(s),e.consume(y),e.exit(s),d):y===null||y===41||aU(y)?n(y):(e.enter(r),e.enter(o),e.enter(a),e.enter("chunkString",{contentType:"string"}),m(y))}function d(y){return y===62?(e.enter(s),e.consume(y),e.exit(s),e.exit(i),e.exit(r),t):(e.enter(a),e.enter("chunkString",{contentType:"string"}),h(y))}function h(y){return y===62?(e.exit("chunkString"),e.exit(a),d(y)):y===null||y===60||Jt(y)?n(y):(e.consume(y),y===92?p:h)}function p(y){return y===60||y===62||y===92?(e.consume(y),h):h(y)}function m(y){return y===40?++c>l?n(y):(e.consume(y),m):y===41?c--?(e.consume(y),m):(e.exit("chunkString"),e.exit(a),e.exit(o),e.exit(r),t(y)):y===null||Gl(y)?c?n(y):(e.exit("chunkString"),e.exit(a),e.exit(o),e.exit(r),t(y)):aU(y)?n(y):(e.consume(y),y===92?g:m)}function g(y){return y===40||y===41||y===92?(e.consume(y),m):m(y)}}function GCe(e,t,n,r,i,s){const o=this;let a=0,u;return l;function l(h){return e.enter(r),e.enter(i),e.consume(h),e.exit(i),e.enter(s),c}function c(h){return h===null||h===91||h===93&&!u||h===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs||a>999?n(h):h===93?(e.exit(s),e.enter(i),e.consume(h),e.exit(i),e.exit(r),t):Jt(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),f(h))}function f(h){return h===null||h===91||h===93||Jt(h)||a++>999?(e.exit("chunkString"),c(h)):(e.consume(h),u=u||!es(h),h===92?d:f)}function d(h){return h===91||h===92||h===93?(e.consume(h),a++,f):f(h)}}function YCe(e,t,n,r,i,s){let o;return a;function a(d){return e.enter(r),e.enter(i),e.consume(d),e.exit(i),o=d===40?41:d,u}function u(d){return d===o?(e.enter(i),e.consume(d),e.exit(i),e.exit(r),t):(e.enter(s),l(d))}function l(d){return d===o?(e.exit(s),u(o)):d===null?n(d):Jt(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),Nr(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),c(d))}function c(d){return d===o||d===null||Jt(d)?(e.exit("chunkString"),l(d)):(e.consume(d),d===92?f:c)}function f(d){return d===o||d===92?(e.consume(d),c):c(d)}}function jT(e,t){let n;return r;function r(i){return Jt(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):es(i)?Nr(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}function Cb(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const zpt={name:"definition",tokenize:Vpt},Upt={tokenize:Hpt,partial:!0};function Vpt(e,t,n){const r=this;let i;return s;function s(u){return e.enter("definition"),GCe.call(r,e,o,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(u)}function o(u){return i=Cb(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),u===58?(e.enter("definitionMarker"),e.consume(u),e.exit("definitionMarker"),jT(e,WCe(e,e.attempt(Upt,Nr(e,a,"whitespace"),Nr(e,a,"whitespace")),n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString"))):n(u)}function a(u){return u===null||Jt(u)?(e.exit("definition"),r.parser.defined.includes(i)||r.parser.defined.push(i),t(u)):n(u)}}function Hpt(e,t,n){return r;function r(o){return Gl(o)?jT(e,i)(o):n(o)}function i(o){return o===34||o===39||o===40?YCe(e,Nr(e,s,"whitespace"),n,"definitionTitle","definitionTitleMarker","definitionTitleString")(o):n(o)}function s(o){return o===null||Jt(o)?t(o):n(o)}}const qpt={name:"hardBreakEscape",tokenize:Wpt};function Wpt(e,t,n){return r;function r(s){return e.enter("hardBreakEscape"),e.enter("escapeMarker"),e.consume(s),i}function i(s){return Jt(s)?(e.exit("escapeMarker"),e.exit("hardBreakEscape"),t(s)):n(s)}}const Gpt={name:"headingAtx",tokenize:Kpt,resolve:Ypt};function Ypt(e,t){let n=e.length-2,r=3,i,s;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},s={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},Md(e,r,n-r+1,[["enter",i,t],["enter",s,t],["exit",s,t],["exit",i,t]])),e}function Kpt(e,t,n){const r=this;let i=0;return s;function s(c){return e.enter("atxHeading"),e.enter("atxHeadingSequence"),o(c)}function o(c){return c===35&&i++<6?(e.consume(c),o):c===null||Gl(c)?(e.exit("atxHeadingSequence"),r.interrupt?t(c):a(c)):n(c)}function a(c){return c===35?(e.enter("atxHeadingSequence"),u(c)):c===null||Jt(c)?(e.exit("atxHeading"),t(c)):es(c)?Nr(e,a,"whitespace")(c):(e.enter("atxHeadingText"),l(c))}function u(c){return c===35?(e.consume(c),u):(e.exit("atxHeadingSequence"),a(c))}function l(c){return c===null||c===35||Gl(c)?(e.exit("atxHeadingText"),a(c)):(e.consume(c),l)}}const Xpt=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],tfe=["pre","script","style","textarea"],Qpt={name:"htmlFlow",tokenize:emt,resolveTo:Zpt,concrete:!0},Jpt={tokenize:tmt,partial:!0};function Zpt(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function emt(e,t,n){const r=this;let i,s,o,a,u;return l;function l(k){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(k),c}function c(k){return k===33?(e.consume(k),f):k===47?(e.consume(k),p):k===63?(e.consume(k),i=3,r.interrupt?t:G):ed(k)?(e.consume(k),o=String.fromCharCode(k),s=!0,m):n(k)}function f(k){return k===45?(e.consume(k),i=2,d):k===91?(e.consume(k),i=5,o="CDATA[",a=0,h):ed(k)?(e.consume(k),i=4,r.interrupt?t:G):n(k)}function d(k){return k===45?(e.consume(k),r.interrupt?t:G):n(k)}function h(k){return k===o.charCodeAt(a++)?(e.consume(k),a===o.length?r.interrupt?t:O:h):n(k)}function p(k){return ed(k)?(e.consume(k),o=String.fromCharCode(k),m):n(k)}function m(k){return k===null||k===47||k===62||Gl(k)?k!==47&&s&&tfe.includes(o.toLowerCase())?(i=1,r.interrupt?t(k):O(k)):Xpt.includes(o.toLowerCase())?(i=6,k===47?(e.consume(k),g):r.interrupt?t(k):O(k)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(k):s?v(k):y(k)):k===45||Yu(k)?(e.consume(k),o+=String.fromCharCode(k),m):n(k)}function g(k){return k===62?(e.consume(k),r.interrupt?t:O):n(k)}function y(k){return es(k)?(e.consume(k),y):I(k)}function v(k){return k===47?(e.consume(k),I):k===58||k===95||ed(k)?(e.consume(k),_):es(k)?(e.consume(k),v):I(k)}function _(k){return k===45||k===46||k===58||k===95||Yu(k)?(e.consume(k),_):b(k)}function b(k){return k===61?(e.consume(k),E):es(k)?(e.consume(k),b):v(k)}function E(k){return k===null||k===60||k===61||k===62||k===96?n(k):k===34||k===39?(e.consume(k),u=k,w):es(k)?(e.consume(k),E):(u=null,x(k))}function w(k){return k===null||Jt(k)?n(k):k===u?(e.consume(k),S):(e.consume(k),w)}function x(k){return k===null||k===34||k===39||k===60||k===61||k===62||k===96||Gl(k)?b(k):(e.consume(k),x)}function S(k){return k===47||k===62||es(k)?v(k):n(k)}function I(k){return k===62?(e.consume(k),C):n(k)}function C(k){return es(k)?(e.consume(k),C):k===null||Jt(k)?O(k):n(k)}function O(k){return k===45&&i===2?(e.consume(k),D):k===60&&i===1?(e.consume(k),B):k===62&&i===4?(e.consume(k),U):k===63&&i===3?(e.consume(k),G):k===93&&i===5?(e.consume(k),j):Jt(k)&&(i===6||i===7)?e.check(Jpt,U,z)(k):k===null||Jt(k)?z(k):(e.consume(k),O)}function z(k){return e.exit("htmlFlowData"),N(k)}function N(k){return k===null?P(k):Jt(k)?e.attempt({tokenize:$,partial:!0},N,P)(k):(e.enter("htmlFlowData"),O(k))}function $(k,H,M){return F;function F(se){return k.enter("lineEnding"),k.consume(se),k.exit("lineEnding"),J}function J(se){return r.parser.lazy[r.now().line]?M(se):H(se)}}function D(k){return k===45?(e.consume(k),G):O(k)}function B(k){return k===47?(e.consume(k),o="",V):O(k)}function V(k){return k===62&&tfe.includes(o.toLowerCase())?(e.consume(k),U):ed(k)&&o.length<8?(e.consume(k),o+=String.fromCharCode(k),V):O(k)}function j(k){return k===93?(e.consume(k),G):O(k)}function G(k){return k===62?(e.consume(k),U):k===45&&i===2?(e.consume(k),G):O(k)}function U(k){return k===null||Jt(k)?(e.exit("htmlFlowData"),P(k)):(e.consume(k),U)}function P(k){return e.exit("htmlFlow"),t(k)}}function tmt(e,t,n){return r;function r(i){return e.exit("htmlFlowData"),e.enter("lineEndingBlank"),e.consume(i),e.exit("lineEndingBlank"),e.attempt(b6,t,n)}}const nmt={name:"htmlText",tokenize:rmt};function rmt(e,t,n){const r=this;let i,s,o,a;return u;function u(P){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(P),l}function l(P){return P===33?(e.consume(P),c):P===47?(e.consume(P),x):P===63?(e.consume(P),E):ed(P)?(e.consume(P),C):n(P)}function c(P){return P===45?(e.consume(P),f):P===91?(e.consume(P),s="CDATA[",o=0,g):ed(P)?(e.consume(P),b):n(P)}function f(P){return P===45?(e.consume(P),d):n(P)}function d(P){return P===null||P===62?n(P):P===45?(e.consume(P),h):p(P)}function h(P){return P===null||P===62?n(P):p(P)}function p(P){return P===null?n(P):P===45?(e.consume(P),m):Jt(P)?(a=p,j(P)):(e.consume(P),p)}function m(P){return P===45?(e.consume(P),U):p(P)}function g(P){return P===s.charCodeAt(o++)?(e.consume(P),o===s.length?y:g):n(P)}function y(P){return P===null?n(P):P===93?(e.consume(P),v):Jt(P)?(a=y,j(P)):(e.consume(P),y)}function v(P){return P===93?(e.consume(P),_):y(P)}function _(P){return P===62?U(P):P===93?(e.consume(P),_):y(P)}function b(P){return P===null||P===62?U(P):Jt(P)?(a=b,j(P)):(e.consume(P),b)}function E(P){return P===null?n(P):P===63?(e.consume(P),w):Jt(P)?(a=E,j(P)):(e.consume(P),E)}function w(P){return P===62?U(P):E(P)}function x(P){return ed(P)?(e.consume(P),S):n(P)}function S(P){return P===45||Yu(P)?(e.consume(P),S):I(P)}function I(P){return Jt(P)?(a=I,j(P)):es(P)?(e.consume(P),I):U(P)}function C(P){return P===45||Yu(P)?(e.consume(P),C):P===47||P===62||Gl(P)?O(P):n(P)}function O(P){return P===47?(e.consume(P),U):P===58||P===95||ed(P)?(e.consume(P),z):Jt(P)?(a=O,j(P)):es(P)?(e.consume(P),O):U(P)}function z(P){return P===45||P===46||P===58||P===95||Yu(P)?(e.consume(P),z):N(P)}function N(P){return P===61?(e.consume(P),$):Jt(P)?(a=N,j(P)):es(P)?(e.consume(P),N):O(P)}function $(P){return P===null||P===60||P===61||P===62||P===96?n(P):P===34||P===39?(e.consume(P),i=P,D):Jt(P)?(a=$,j(P)):es(P)?(e.consume(P),$):(e.consume(P),i=void 0,V)}function D(P){return P===i?(e.consume(P),B):P===null?n(P):Jt(P)?(a=D,j(P)):(e.consume(P),D)}function B(P){return P===62||P===47||Gl(P)?O(P):n(P)}function V(P){return P===null||P===34||P===39||P===60||P===61||P===96?n(P):P===62||Gl(P)?O(P):(e.consume(P),V)}function j(P){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(P),e.exit("lineEnding"),Nr(e,G,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function G(P){return e.enter("htmlTextData"),a(P)}function U(P){return P===62?(e.consume(P),e.exit("htmlTextData"),e.exit("htmlText"),t):n(P)}}const gY={name:"labelEnd",tokenize:lmt,resolveTo:umt,resolveAll:amt},imt={tokenize:cmt},smt={tokenize:fmt},omt={tokenize:dmt};function amt(e){let t=-1,n;for(;++t<e.length;)n=e[t][1],(n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd")&&(e.splice(t+1,n.type==="labelImage"?4:2),n.type="data",t++);return e}function umt(e,t){let n=e.length,r=0,i,s,o,a;for(;n--;)if(i=e[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const u={type:e[s][1].type==="labelLink"?"link":"image",start:Object.assign({},e[s][1].start),end:Object.assign({},e[e.length-1][1].end)},l={type:"label",start:Object.assign({},e[s][1].start),end:Object.assign({},e[o][1].end)},c={type:"labelText",start:Object.assign({},e[s+r+2][1].end),end:Object.assign({},e[o-2][1].start)};return a=[["enter",u,t],["enter",l,t]],a=Rl(a,e.slice(s+1,s+r+3)),a=Rl(a,[["enter",c,t]]),a=Rl(a,pY(t.parser.constructs.insideSpan.null,e.slice(s+r+4,o-3),t)),a=Rl(a,[["exit",c,t],e[o-2],e[o-1],["exit",l,t]]),a=Rl(a,e.slice(o+1)),a=Rl(a,[["exit",u,t]]),Md(e,s,e.length,a),e}function lmt(e,t,n){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return a;function a(c){return s?s._inactive?l(c):(o=r.parser.defined.includes(Cb(r.sliceSerialize({start:s.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(c),e.exit("labelMarker"),e.exit("labelEnd"),u):n(c)}function u(c){return c===40?e.attempt(imt,t,o?t:l)(c):c===91?e.attempt(smt,t,o?e.attempt(omt,t,l):l)(c):o?t(c):l(c)}function l(c){return s._balanced=!0,n(c)}}function cmt(e,t,n){return r;function r(u){return e.enter("resource"),e.enter("resourceMarker"),e.consume(u),e.exit("resourceMarker"),jT(e,i)}function i(u){return u===41?a(u):WCe(e,s,n,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(u)}function s(u){return Gl(u)?jT(e,o)(u):a(u)}function o(u){return u===34||u===39||u===40?YCe(e,jT(e,a),n,"resourceTitle","resourceTitleMarker","resourceTitleString")(u):a(u)}function a(u){return u===41?(e.enter("resourceMarker"),e.consume(u),e.exit("resourceMarker"),e.exit("resource"),t):n(u)}}function fmt(e,t,n){const r=this;return i;function i(o){return GCe.call(r,e,s,n,"reference","referenceMarker","referenceString")(o)}function s(o){return r.parser.defined.includes(Cb(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(o):n(o)}}function dmt(e,t,n){return r;function r(s){return e.enter("reference"),e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),i}function i(s){return s===93?(e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),e.exit("reference"),t):n(s)}}const hmt={name:"labelStartImage",tokenize:pmt,resolveAll:gY.resolveAll};function pmt(e,t,n){const r=this;return i;function i(a){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(a),e.exit("labelImageMarker"),s}function s(a){return a===91?(e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):t(a)}}const mmt={name:"labelStartLink",tokenize:gmt,resolveAll:gY.resolveAll};function gmt(e,t,n){const r=this;return i;function i(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const L9={name:"lineEnding",tokenize:ymt};function ymt(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),Nr(e,t,"linePrefix")}}const Hk={name:"thematicBreak",tokenize:vmt};function vmt(e,t,n){let r=0,i;return s;function s(u){return e.enter("thematicBreak"),i=u,o(u)}function o(u){return u===i?(e.enter("thematicBreakSequence"),a(u)):es(u)?Nr(e,o,"whitespace")(u):r<3||u!==null&&!Jt(u)?n(u):(e.exit("thematicBreak"),t(u))}function a(u){return u===i?(e.consume(u),r++,a):(e.exit("thematicBreakSequence"),o(u))}}const Ua={name:"list",tokenize:wmt,continuation:{tokenize:Emt},exit:Smt},_mt={tokenize:Tmt,partial:!0},bmt={tokenize:xmt,partial:!0};function wmt(e,t,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return a;function a(h){const p=r.containerState.type||(h===42||h===43||h===45?"listUnordered":"listOrdered");if(p==="listUnordered"?!r.containerState.marker||h===r.containerState.marker:oU(h)){if(r.containerState.type||(r.containerState.type=p,e.enter(p,{_container:!0})),p==="listUnordered")return e.enter("listItemPrefix"),h===42||h===45?e.check(Hk,n,l)(h):l(h);if(!r.interrupt||h===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),u(h)}return n(h)}function u(h){return oU(h)&&++o<10?(e.consume(h),u):(!r.interrupt||o<2)&&(r.containerState.marker?h===r.containerState.marker:h===41||h===46)?(e.exit("listItemValue"),l(h)):n(h)}function l(h){return e.enter("listItemMarker"),e.consume(h),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||h,e.check(b6,r.interrupt?n:c,e.attempt(_mt,d,f))}function c(h){return r.containerState.initialBlankLine=!0,s++,d(h)}function f(h){return es(h)?(e.enter("listItemPrefixWhitespace"),e.consume(h),e.exit("listItemPrefixWhitespace"),d):n(h)}function d(h){return r.containerState.size=s+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(h)}}function Emt(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(b6,i,s);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Nr(e,t,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!es(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(bmt,t,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,Nr(e,e.attempt(Ua,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function xmt(e,t,n){const r=this;return Nr(e,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?t(s):n(s)}}function Smt(e){e.exit(this.containerState.type)}function Tmt(e,t,n){const r=this;return Nr(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=r.events[r.events.length-1];return!es(s)&&o&&o[1].type==="listItemPrefixWhitespace"?t(s):n(s)}}const nfe={name:"setextUnderline",tokenize:Cmt,resolveTo:Amt};function Amt(e,t){let n=e.length,r,i,s;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!s&&e[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:Object.assign({},e[i][1].start),end:Object.assign({},e[e.length-1][1].end)};return e[i][1].type="setextHeadingText",s?(e.splice(i,0,["enter",o,t]),e.splice(s+1,0,["exit",e[r][1],t]),e[r][1].end=Object.assign({},e[s][1].end)):e[r][1]=o,e.push(["exit",o,t]),e}function Cmt(e,t,n){const r=this;let i=r.events.length,s,o;for(;i--;)if(r.events[i][1].type!=="lineEnding"&&r.events[i][1].type!=="linePrefix"&&r.events[i][1].type!=="content"){o=r.events[i][1].type==="paragraph";break}return a;function a(c){return!r.parser.lazy[r.now().line]&&(r.interrupt||o)?(e.enter("setextHeadingLine"),e.enter("setextHeadingLineSequence"),s=c,u(c)):n(c)}function u(c){return c===s?(e.consume(c),u):(e.exit("setextHeadingLineSequence"),Nr(e,l,"lineSuffix")(c))}function l(c){return c===null||Jt(c)?(e.exit("setextHeadingLine"),t(c)):n(c)}}const Imt={tokenize:Omt};function Omt(e){const t=this,n=e.attempt(b6,r,e.attempt(this.parser.constructs.flowInitial,i,Nr(e,e.attempt(this.parser.constructs.flow,i,e.attempt(Lpt,i)),"linePrefix")));return n;function r(s){if(s===null){e.consume(s);return}return e.enter("lineEndingBlank"),e.consume(s),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const Pmt={resolveAll:XCe()},kmt=KCe("string"),$mt=KCe("text");function KCe(e){return{tokenize:t,resolveAll:XCe(e==="text"?Rmt:void 0)};function t(n){const r=this,i=this.parser.constructs[e],s=n.attempt(i,o,a);return o;function o(c){return l(c)?s(c):a(c)}function a(c){if(c===null){n.consume(c);return}return n.enter("data"),n.consume(c),u}function u(c){return l(c)?(n.exit("data"),s(c)):(n.consume(c),u)}function l(c){if(c===null)return!0;const f=i[c];let d=-1;if(f)for(;++d<f.length;){const h=f[d];if(!h.previous||h.previous.call(r,r.previous))return!0}return!1}}}function XCe(e){return t;function t(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return e?e(n,r):n}}function Rmt(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let s=i.length,o=-1,a=0,u;for(;s--;){const l=i[s];if(typeof l=="string"){for(o=l.length;l.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(l===-2)u=!0,a++;else if(l!==-1){s++;break}}if(a){const l={type:n===e.length||u||a<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-a,offset:r.end.offset-a,_index:r.start._index+s,_bufferIndex:s?o:r.start._bufferIndex+o},end:Object.assign({},r.end)};r.end=Object.assign({},l.start),r.start.offset===r.end.offset?Object.assign(r,l):(e.splice(n,0,["enter",l,t],["exit",l,t]),n+=2)}n++}return e}function Nmt(e,t,n){let r=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const i={},s=[];let o=[],a=[];const u={consume:v,enter:_,exit:b,attempt:x(E),check:x(w),interrupt:x(w,{interrupt:!0})},l={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:h,sliceSerialize:d,now:p,defineSkip:m,write:f};let c=t.tokenize.call(l,u);return t.resolveAll&&s.push(t),l;function f(O){return o=Rl(o,O),g(),o[o.length-1]!==null?[]:(S(t,0),l.events=pY(s,l.events,l),l.events)}function d(O,z){return Lmt(h(O),z)}function h(O){return Dmt(o,O)}function p(){return Object.assign({},r)}function m(O){i[O.line]=O.column,C()}function g(){let O;for(;r._index<o.length;){const z=o[r._index];if(typeof z=="string")for(O=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===O&&r._bufferIndex<z.length;)y(z.charCodeAt(r._bufferIndex));else y(z)}}function y(O){c=c(O)}function v(O){Jt(O)?(r.line++,r.column=1,r.offset+=O===-3?2:1,C()):O!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),l.previous=O}function _(O,z){const N=z||{};return N.type=O,N.start=p(),l.events.push(["enter",N,l]),a.push(N),N}function b(O){const z=a.pop();return z.end=p(),l.events.push(["exit",z,l]),z}function E(O,z){S(O,z.from)}function w(O,z){z.restore()}function x(O,z){return N;function N($,D,B){let V,j,G,U;return Array.isArray($)?k($):"tokenize"in $?k([$]):P($);function P(J){return se;function se(ae){const ce=ae!==null&&J[ae],le=ae!==null&&J.null,ge=[...Array.isArray(ce)?ce:ce?[ce]:[],...Array.isArray(le)?le:le?[le]:[]];return k(ge)(ae)}}function k(J){return V=J,j=0,J.length===0?B:H(J[j])}function H(J){return se;function se(ae){return U=I(),G=J,J.partial||(l.currentConstruct=J),J.name&&l.parser.constructs.disable.null.includes(J.name)?F():J.tokenize.call(z?Object.assign(Object.create(l),z):l,u,M,F)(ae)}}function M(J){return O(G,U),D}function F(J){return U.restore(),++j<V.length?H(V[j]):B}}}function S(O,z){O.resolveAll&&!s.includes(O)&&s.push(O),O.resolve&&Md(l.events,z,l.events.length-z,O.resolve(l.events.slice(z),l)),O.resolveTo&&(l.events=O.resolveTo(l.events,l))}function I(){const O=p(),z=l.previous,N=l.currentConstruct,$=l.events.length,D=Array.from(a);return{restore:B,from:$};function B(){r=O,l.previous=z,l.currentConstruct=N,l.events.length=$,a=D,C()}}function C(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function Dmt(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,s=t.end._bufferIndex;let o;return n===i?o=[e[n].slice(r,s)]:(o=e.slice(n,i),r>-1&&(o[0]=o[0].slice(r)),s>0&&o.push(e[i].slice(0,s))),o}function Lmt(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const s=e[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}const Mmt={42:Ua,43:Ua,45:Ua,48:Ua,49:Ua,50:Ua,51:Ua,52:Ua,53:Ua,54:Ua,55:Ua,56:Ua,57:Ua,62:UCe},Fmt={91:zpt},Bmt={[-2]:D9,[-1]:D9,32:D9},jmt={35:Gpt,42:Hk,45:[nfe,Hk],60:Qpt,61:nfe,95:Hk,96:efe,126:efe},zmt={38:HCe,92:VCe},Umt={[-5]:L9,[-4]:L9,[-3]:L9,33:hmt,38:HCe,42:uU,60:[_pt,nmt],91:mmt,92:[qpt,VCe],93:gY,95:uU,96:kpt},Vmt={null:[uU,Pmt]},Hmt={null:[42,95]},qmt={null:[]},Wmt=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:Hmt,contentInitial:Fmt,disable:qmt,document:Mmt,flow:jmt,flowInitial:Bmt,insideSpan:Vmt,string:zmt,text:Umt},Symbol.toStringTag,{value:"Module"}));function Gmt(e={}){const t=ipt([Wmt].concat(e.extensions||[])),n={defined:[],lazy:{},constructs:t,content:r(dpt),document:r(ppt),flow:r(Imt),string:r(kmt),text:r($mt)};return n;function r(i){return s;function s(o){return Nmt(n,i,o)}}}const rfe=/[\0\t\n\r]/g;function Ymt(){let e=1,t="",n=!0,r;return i;function i(s,o,a){const u=[];let l,c,f,d,h;for(s=t+s.toString(o),f=0,t="",n&&(s.charCodeAt(0)===65279&&f++,n=void 0);f<s.length;){if(rfe.lastIndex=f,l=rfe.exec(s),d=l&&l.index!==void 0?l.index:s.length,h=s.charCodeAt(d),!l){t=s.slice(f);break}if(h===10&&f===d&&r)u.push(-3),r=void 0;else switch(r&&(u.push(-5),r=void 0),f<d&&(u.push(s.slice(f,d)),e+=d-f),h){case 0:{u.push(65533),e++;break}case 9:{for(c=Math.ceil(e/4)*4,u.push(-2);e++<c;)u.push(-1);break}case 10:{u.push(-4),e=1;break}default:r=!0,e=1}f=d+1}return a&&(r&&u.push(-5),t&&u.push(t),u.push(null)),u}}function Kmt(e){for(;!qCe(e););return e}function QCe(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCharCode(n)}const Xmt=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function Qmt(e){return e.replace(Xmt,Jmt)}function Jmt(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return QCe(n.slice(s?2:1),s?16:10)}return mY(n)||e}const lU={}.hasOwnProperty,Zmt=function(e,t,n){return typeof t!="string"&&(n=t,t=void 0),egt(n)(Kmt(Gmt(n).document().write(Ymt()(e,t,!0))))};function egt(e={}){const t=JCe({transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:u(je),autolinkProtocol:z,autolinkEmail:z,atxHeading:u(Oe),blockQuote:u(ue),characterEscape:z,characterReference:z,codeFenced:u(Fe),codeFencedFenceInfo:l,codeFencedFenceMeta:l,codeIndented:u(Fe,l),codeText:u(ke,l),codeTextData:z,data:z,codeFlowValue:z,definition:u(Ge),definitionDestinationString:l,definitionLabelString:l,definitionTitleString:l,emphasis:u(Re),hardBreakEscape:u(Le),hardBreakTrailing:u(Le),htmlFlow:u(Ut,l),htmlFlowData:z,htmlText:u(Ut,l),htmlTextData:z,image:u(Qe),label:l,link:u(je),listItem:u(et),listItemValue:m,listOrdered:u(bt,p),listUnordered:u(bt),paragraph:u(ut),reference:J,referenceString:l,resourceDestinationString:l,resourceTitleString:l,setextHeading:u(Oe),strong:u(lt),thematicBreak:u(Dn)},exit:{atxHeading:f(),atxHeadingSequence:S,autolink:f(),autolinkEmail:ge,autolinkProtocol:le,blockQuote:f(),characterEscapeValue:N,characterReferenceMarkerHexadecimal:ae,characterReferenceMarkerNumeric:ae,characterReferenceValue:ce,codeFenced:f(_),codeFencedFence:v,codeFencedFenceInfo:g,codeFencedFenceMeta:y,codeFlowValue:N,codeIndented:f(b),codeText:f(j),codeTextData:N,data:N,definition:f(),definitionDestinationString:x,definitionLabelString:E,definitionTitleString:w,emphasis:f(),hardBreakEscape:f(D),hardBreakTrailing:f(D),htmlFlow:f(B),htmlFlowData:N,htmlText:f(V),htmlTextData:N,image:f(U),label:k,labelText:P,lineEnding:$,link:f(G),listItem:f(),listOrdered:f(),listUnordered:f(),paragraph:f(),referenceString:se,resourceDestinationString:H,resourceTitleString:M,resource:F,setextHeading:f(O),setextHeadingLineSequence:C,setextHeadingText:I,strong:f(),thematicBreak:f()}},e.mdastExtensions||[]),n={};return r;function r(he){let _e={type:"root",children:[]};const Pe=[_e],it=[],Ye=[],at={stack:Pe,tokenStack:it,config:t,enter:c,exit:d,buffer:l,resume:h,setData:s,getData:o};let tt=-1;for(;++tt<he.length;)if(he[tt][1].type==="listOrdered"||he[tt][1].type==="listUnordered")if(he[tt][0]==="enter")Ye.push(tt);else{const vt=Ye.pop();tt=i(he,vt,tt)}for(tt=-1;++tt<he.length;){const vt=t[he[tt][0]];lU.call(vt,he[tt][1].type)&&vt[he[tt][1].type].call(Object.assign({sliceSerialize:he[tt][2].sliceSerialize},at),he[tt][1])}if(it.length>0){const vt=it[it.length-1];(vt[1]||ife).call(at,void 0,vt[0])}for(_e.position={start:a(he.length>0?he[0][1].start:{line:1,column:1,offset:0}),end:a(he.length>0?he[he.length-2][1].end:{line:1,column:1,offset:0})},tt=-1;++tt<t.transforms.length;)_e=t.transforms[tt](_e)||_e;return _e}function i(he,_e,Pe){let it=_e-1,Ye=-1,at=!1,tt,vt,In,Wt;for(;++it<=Pe;){const Vt=he[it];if(Vt[1].type==="listUnordered"||Vt[1].type==="listOrdered"||Vt[1].type==="blockQuote"?(Vt[0]==="enter"?Ye++:Ye--,Wt=void 0):Vt[1].type==="lineEndingBlank"?Vt[0]==="enter"&&(tt&&!Wt&&!Ye&&!In&&(In=it),Wt=void 0):Vt[1].type==="linePrefix"||Vt[1].type==="listItemValue"||Vt[1].type==="listItemMarker"||Vt[1].type==="listItemPrefix"||Vt[1].type==="listItemPrefixWhitespace"||(Wt=void 0),!Ye&&Vt[0]==="enter"&&Vt[1].type==="listItemPrefix"||Ye===-1&&Vt[0]==="exit"&&(Vt[1].type==="listUnordered"||Vt[1].type==="listOrdered")){if(tt){let hr=it;for(vt=void 0;hr--;){const Yn=he[hr];if(Yn[1].type==="lineEnding"||Yn[1].type==="lineEndingBlank"){if(Yn[0]==="exit")continue;vt&&(he[vt][1].type="lineEndingBlank",at=!0),Yn[1].type="lineEnding",vt=hr}else if(!(Yn[1].type==="linePrefix"||Yn[1].type==="blockQuotePrefix"||Yn[1].type==="blockQuotePrefixWhitespace"||Yn[1].type==="blockQuoteMarker"||Yn[1].type==="listItemIndent"))break}In&&(!vt||In<vt)&&(tt._spread=!0),tt.end=Object.assign({},vt?he[vt][1].start:Vt[1].end),he.splice(vt||it,0,["exit",tt,Vt[2]]),it++,Pe++}Vt[1].type==="listItemPrefix"&&(tt={type:"listItem",_spread:!1,start:Object.assign({},Vt[1].start)},he.splice(it,0,["enter",tt,Vt[2]]),it++,Pe++,In=void 0,Wt=!0)}}return he[_e][1]._spread=at,Pe}function s(he,_e){n[he]=_e}function o(he){return n[he]}function a(he){return{line:he.line,column:he.column,offset:he.offset}}function u(he,_e){return Pe;function Pe(it){c.call(this,he(it),it),_e&&_e.call(this,it)}}function l(){this.stack.push({type:"fragment",children:[]})}function c(he,_e,Pe){return this.stack[this.stack.length-1].children.push(he),this.stack.push(he),this.tokenStack.push([_e,Pe]),he.position={start:a(_e.start)},he}function f(he){return _e;function _e(Pe){he&&he.call(this,Pe),d.call(this,Pe)}}function d(he,_e){const Pe=this.stack.pop(),it=this.tokenStack.pop();if(it)it[0].type!==he.type&&(_e?_e.call(this,he,it[0]):(it[1]||ife).call(this,he,it[0]));else throw new Error("Cannot close `"+he.type+"` ("+Ab({start:he.start,end:he.end})+"): its not open");return Pe.position.end=a(he.end),Pe}function h(){return rpt(this.stack.pop())}function p(){s("expectingFirstListItemValue",!0)}function m(he){if(o("expectingFirstListItemValue")){const _e=this.stack[this.stack.length-2];_e.start=Number.parseInt(this.sliceSerialize(he),10),s("expectingFirstListItemValue")}}function g(){const he=this.resume(),_e=this.stack[this.stack.length-1];_e.lang=he}function y(){const he=this.resume(),_e=this.stack[this.stack.length-1];_e.meta=he}function v(){o("flowCodeInside")||(this.buffer(),s("flowCodeInside",!0))}function _(){const he=this.resume(),_e=this.stack[this.stack.length-1];_e.value=he.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),s("flowCodeInside")}function b(){const he=this.resume(),_e=this.stack[this.stack.length-1];_e.value=he.replace(/(\r?\n|\r)$/g,"")}function E(he){const _e=this.resume(),Pe=this.stack[this.stack.length-1];Pe.label=_e,Pe.identifier=Cb(this.sliceSerialize(he)).toLowerCase()}function w(){const he=this.resume(),_e=this.stack[this.stack.length-1];_e.title=he}function x(){const he=this.resume(),_e=this.stack[this.stack.length-1];_e.url=he}function S(he){const _e=this.stack[this.stack.length-1];if(!_e.depth){const Pe=this.sliceSerialize(he).length;_e.depth=Pe}}function I(){s("setextHeadingSlurpLineEnding",!0)}function C(he){const _e=this.stack[this.stack.length-1];_e.depth=this.sliceSerialize(he).charCodeAt(0)===61?1:2}function O(){s("setextHeadingSlurpLineEnding")}function z(he){const _e=this.stack[this.stack.length-1];let Pe=_e.children[_e.children.length-1];(!Pe||Pe.type!=="text")&&(Pe=jt(),Pe.position={start:a(he.start)},_e.children.push(Pe)),this.stack.push(Pe)}function N(he){const _e=this.stack.pop();_e.value+=this.sliceSerialize(he),_e.position.end=a(he.end)}function $(he){const _e=this.stack[this.stack.length-1];if(o("atHardBreak")){const Pe=_e.children[_e.children.length-1];Pe.position.end=a(he.end),s("atHardBreak");return}!o("setextHeadingSlurpLineEnding")&&t.canContainEols.includes(_e.type)&&(z.call(this,he),N.call(this,he))}function D(){s("atHardBreak",!0)}function B(){const he=this.resume(),_e=this.stack[this.stack.length-1];_e.value=he}function V(){const he=this.resume(),_e=this.stack[this.stack.length-1];_e.value=he}function j(){const he=this.resume(),_e=this.stack[this.stack.length-1];_e.value=he}function G(){const he=this.stack[this.stack.length-1];o("inReference")?(he.type+="Reference",he.referenceType=o("referenceType")||"shortcut",delete he.url,delete he.title):(delete he.identifier,delete he.label),s("referenceType")}function U(){const he=this.stack[this.stack.length-1];o("inReference")?(he.type+="Reference",he.referenceType=o("referenceType")||"shortcut",delete he.url,delete he.title):(delete he.identifier,delete he.label),s("referenceType")}function P(he){const _e=this.stack[this.stack.length-2],Pe=this.sliceSerialize(he);_e.label=Qmt(Pe),_e.identifier=Cb(Pe).toLowerCase()}function k(){const he=this.stack[this.stack.length-1],_e=this.resume(),Pe=this.stack[this.stack.length-1];s("inReference",!0),Pe.type==="link"?Pe.children=he.children:Pe.alt=_e}function H(){const he=this.resume(),_e=this.stack[this.stack.length-1];_e.url=he}function M(){const he=this.resume(),_e=this.stack[this.stack.length-1];_e.title=he}function F(){s("inReference")}function J(){s("referenceType","collapsed")}function se(he){const _e=this.resume(),Pe=this.stack[this.stack.length-1];Pe.label=_e,Pe.identifier=Cb(this.sliceSerialize(he)).toLowerCase(),s("referenceType","full")}function ae(he){s("characterReferenceType",he.type)}function ce(he){const _e=this.sliceSerialize(he),Pe=o("characterReferenceType");let it;Pe?(it=QCe(_e,Pe==="characterReferenceMarkerNumeric"?10:16),s("characterReferenceType")):it=mY(_e);const Ye=this.stack.pop();Ye.value+=it,Ye.position.end=a(he.end)}function le(he){N.call(this,he);const _e=this.stack[this.stack.length-1];_e.url=this.sliceSerialize(he)}function ge(he){N.call(this,he);const _e=this.stack[this.stack.length-1];_e.url="mailto:"+this.sliceSerialize(he)}function ue(){return{type:"blockquote",children:[]}}function Fe(){return{type:"code",lang:null,meta:null,value:""}}function ke(){return{type:"inlineCode",value:""}}function Ge(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Re(){return{type:"emphasis",children:[]}}function Oe(){return{type:"heading",depth:void 0,children:[]}}function Le(){return{type:"break"}}function Ut(){return{type:"html",value:""}}function Qe(){return{type:"image",title:null,url:"",alt:null}}function je(){return{type:"link",title:null,url:"",children:[]}}function bt(he){return{type:"list",ordered:he.type==="listOrdered",start:null,spread:he._spread,children:[]}}function et(he){return{type:"listItem",spread:he._spread,checked:null,children:[]}}function ut(){return{type:"paragraph",children:[]}}function lt(){return{type:"strong",children:[]}}function jt(){return{type:"text",value:""}}function Dn(){return{type:"thematicBreak"}}}function JCe(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?JCe(e,r):tgt(e,r)}return e}function tgt(e,t){let n;for(n in t)if(lU.call(t,n)){const r=n==="canContainEols"||n==="transforms",s=(lU.call(e,n)?e[n]:void 0)||(e[n]=r?[]:{}),o=t[n];o&&(r?e[n]=[...s,...o]:Object.assign(s,o))}}function ife(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+Ab({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+Ab({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+Ab({start:t.start,end:t.end})+") is still open")}function ngt(e){Object.assign(this,{Parser:n=>{const r=this.data("settings");return Zmt(n,Object.assign({},r,e,{extensions:this.data("micromarkExtensions")||[],mdastExtensions:this.data("fromMarkdownExtensions")||[]}))}})}var bs=function(e,t,n){var r={type:String(e)};return n==null&&(typeof t=="string"||Array.isArray(t))?n=t:Object.assign(r,t),Array.isArray(n)?r.children=n:n!=null&&(r.value=String(n)),r};const qk={}.hasOwnProperty;function rgt(e,t){const n=t.data||{};return"value"in t&&!(qk.call(n,"hName")||qk.call(n,"hProperties")||qk.call(n,"hChildren"))?e.augment(t,bs("text",t.value)):e(t,"div",sa(e,t))}function ZCe(e,t,n){const r=t&&t.type;let i;if(!r)throw new Error("Expected node, got `"+t+"`");return qk.call(e.handlers,r)?i=e.handlers[r]:e.passThrough&&e.passThrough.includes(r)?i=igt:i=e.unknownHandler,(typeof i=="function"?i:rgt)(e,t,n)}function igt(e,t){return"children"in t?{...t,children:sa(e,t)}:t}function sa(e,t){const n=[];if("children"in t){const r=t.children;let i=-1;for(;++i<r.length;){const s=ZCe(e,r[i],t);if(s){if(i&&r[i-1].type==="break"&&(!Array.isArray(s)&&s.type==="text"&&(s.value=s.value.replace(/^\s+/,"")),!Array.isArray(s)&&s.type==="element")){const o=s.children[0];o&&o.type==="text"&&(o.value=o.value.replace(/^\s+/,""))}Array.isArray(s)?n.push(...s):n.push(s)}}}return n}const eIe=function(e){if(e==null)return ugt;if(typeof e=="string")return agt(e);if(typeof e=="object")return Array.isArray(e)?sgt(e):ogt(e);if(typeof e=="function")return w6(e);throw new Error("Expected function, string, or object as test")};function sgt(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=eIe(e[n]);return w6(r);function r(...i){let s=-1;for(;++s<t.length;)if(t[s].call(this,...i))return!0;return!1}}function ogt(e){return w6(t);function t(n){let r;for(r in e)if(n[r]!==e[r])return!1;return!0}}function agt(e){return w6(t);function t(n){return n&&n.type===e}}function w6(e){return t;function t(...n){return!!e.call(this,...n)}}function ugt(){return!0}const lgt=!0,cgt="skip",sfe=!1,fgt=function(e,t,n,r){typeof t=="function"&&typeof n!="function"&&(r=n,n=t,t=null);const i=eIe(t),s=r?-1:1;o(e,null,[])();function o(a,u,l){const c=typeof a=="object"&&a!==null?a:{};let f;return typeof c.type=="string"&&(f=typeof c.tagName=="string"?c.tagName:typeof c.name=="string"?c.name:void 0,Object.defineProperty(d,"name",{value:"node ("+(c.type+(f?"<"+f+">":""))+")"})),d;function d(){let h=[],p,m,g;if((!t||i(a,u,l[l.length-1]||null))&&(h=dgt(n(a,l)),h[0]===sfe))return h;if(a.children&&h[0]!==cgt)for(m=(r?a.children.length:-1)+s,g=l.concat(a);m>-1&&m<a.children.length;){if(p=o(a.children[m],m,g)(),p[0]===sfe)return p;m=typeof p[1]=="number"?p[1]:m+s}return h}}};function dgt(e){return Array.isArray(e)?e:typeof e=="number"?[lgt,e]:[e]}const yY=function(e,t,n,r){typeof t=="function"&&typeof n!="function"&&(r=n,n=t,t=null),fgt(e,t,i,r);function i(s,o){const a=o[o.length-1];return n(s,a?a.children.indexOf(s):null,a)}},tIe=rIe("start"),nIe=rIe("end");function rIe(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};return{line:r.line||null,column:r.column||null,offset:r.offset>-1?r.offset:null}}}function hgt(e){return!e||!e.position||!e.position.start||!e.position.start.line||!e.position.start.column||!e.position.end||!e.position.end.line||!e.position.end.column}const ofe={}.hasOwnProperty;function pgt(e){const t=Object.create(null);if(!e||!e.type)throw new Error("mdast-util-definitions expected node");return yY(e,"definition",r=>{const i=afe(r.identifier);i&&!ofe.call(t,i)&&(t[i]=r)}),n;function n(r){const i=afe(r);return i&&ofe.call(t,i)?t[i]:null}}function afe(e){return String(e||"").toUpperCase()}function TE(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const s=e.charCodeAt(n);let o="";if(s===37&&Yu(e.charCodeAt(n+1))&&Yu(e.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const a=e.charCodeAt(n+1);s<56320&&a>56319&&a<57344?(o=String.fromCharCode(s,a),i=1):o=""}else o=String.fromCharCode(s);o&&(t.push(e.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function Wh(e,t){const n=[];let r=-1;for(t&&n.push(bs("text",`
`));++r<e.length;)r&&n.push(bs("text",`
`)),n.push(e[r]);return t&&e.length>0&&n.push(bs("text",`
`)),n}function mgt(e){let t=-1;const n=[];for(;++t<e.footnoteOrder.length;){const r=e.footnoteById[e.footnoteOrder[t].toUpperCase()];if(!r)continue;const i=sa(e,r),s=String(r.identifier),o=TE(s.toLowerCase());let a=0;const u=[];for(;++a<=e.footnoteCounts[s];){const f={type:"element",tagName:"a",properties:{href:"#"+e.clobberPrefix+"fnref-"+o+(a>1?"-"+a:""),dataFootnoteBackref:!0,className:["data-footnote-backref"],ariaLabel:e.footnoteBackLabel},children:[{type:"text",value:""}]};a>1&&f.children.push({type:"element",tagName:"sup",children:[{type:"text",value:String(a)}]}),u.length>0&&u.push({type:"text",value:" "}),u.push(f)}const l=i[i.length-1];if(l&&l.type==="element"&&l.tagName==="p"){const f=l.children[l.children.length-1];f&&f.type==="text"?f.value+=" ":l.children.push({type:"text",value:" "}),l.children.push(...u)}else i.push(...u);const c={type:"element",tagName:"li",properties:{id:e.clobberPrefix+"fn-"+o},children:Wh(i,!0)};r.position&&(c.position=r.position),n.push(c)}return n.length===0?null:{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:e.footnoteLabelTagName,properties:{...JSON.parse(JSON.stringify(e.footnoteLabelProperties)),id:"footnote-label"},children:[bs("text",e.footnoteLabel)]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:Wh(n,!0)},{type:"text",value:`
`}]}}function ggt(e,t){return e(t,"blockquote",Wh(sa(e,t),!0))}function ygt(e,t){return[e(t,"br"),bs("text",`
`)]}function vgt(e,t){const n=t.value?t.value+`
`:"",r=t.lang&&t.lang.match(/^[^ \t]+(?=[ \t]|$)/),i={};r&&(i.className=["language-"+r]);const s=e(t,"code",i,[bs("text",n)]);return t.meta&&(s.data={meta:t.meta}),e(t.position,"pre",[s])}function _gt(e,t){return e(t,"del",sa(e,t))}function bgt(e,t){return e(t,"em",sa(e,t))}function iIe(e,t){const n=String(t.identifier),r=TE(n.toLowerCase()),i=e.footnoteOrder.indexOf(n);let s;i===-1?(e.footnoteOrder.push(n),e.footnoteCounts[n]=1,s=e.footnoteOrder.length):(e.footnoteCounts[n]++,s=i+1);const o=e.footnoteCounts[n];return e(t,"sup",[e(t.position,"a",{href:"#"+e.clobberPrefix+"fn-"+r,id:e.clobberPrefix+"fnref-"+r+(o>1?"-"+o:""),dataFootnoteRef:!0,ariaDescribedBy:"footnote-label"},[bs("text",String(s))])])}function wgt(e,t){const n=e.footnoteById;let r=1;for(;r in n;)r++;const i=String(r);return n[i]={type:"footnoteDefinition",identifier:i,children:[{type:"paragraph",children:t.children}],position:t.position},iIe(e,{type:"footnoteReference",identifier:i,position:t.position})}function Egt(e,t){return e(t,"h"+t.depth,sa(e,t))}function xgt(e,t){return e.dangerous?e.augment(t,bs("raw",t.value)):null}function sIe(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return bs("text","!["+t.alt+r);const i=sa(e,t),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift(bs("text","["));const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push(bs("text",r)),i}function Sgt(e,t){const n=e.definition(t.identifier);if(!n)return sIe(e,t);const r={src:TE(n.url||""),alt:t.alt};return n.title!==null&&n.title!==void 0&&(r.title=n.title),e(t,"img",r)}function Tgt(e,t){const n={src:TE(t.url),alt:t.alt};return t.title!==null&&t.title!==void 0&&(n.title=t.title),e(t,"img",n)}function Agt(e,t){return e(t,"code",[bs("text",t.value.replace(/\r?\n|\r/g," "))])}function Cgt(e,t){const n=e.definition(t.identifier);if(!n)return sIe(e,t);const r={href:TE(n.url||"")};return n.title!==null&&n.title!==void 0&&(r.title=n.title),e(t,"a",r,sa(e,t))}function Igt(e,t){const n={href:TE(t.url)};return t.title!==null&&t.title!==void 0&&(n.title=t.title),e(t,"a",n,sa(e,t))}function Ogt(e,t,n){const r=sa(e,t),i=n?Pgt(n):oIe(t),s={},o=[];if(typeof t.checked=="boolean"){let l;r[0]&&r[0].type==="element"&&r[0].tagName==="p"?l=r[0]:(l=e(null,"p",[]),r.unshift(l)),l.children.length>0&&l.children.unshift(bs("text"," ")),l.children.unshift(e(null,"input",{type:"checkbox",checked:t.checked,disabled:!0})),s.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const l=r[a];(i||a!==0||l.type!=="element"||l.tagName!=="p")&&o.push(bs("text",`
`)),l.type==="element"&&l.tagName==="p"&&!i?o.push(...l.children):o.push(l)}const u=r[r.length-1];return u&&(i||!("tagName"in u)||u.tagName!=="p")&&o.push(bs("text",`
`)),e(t,"li",s,o)}function Pgt(e){let t=e.spread;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=oIe(n[r]);return!!t}function oIe(e){const t=e.spread;return t??e.children.length>1}function kgt(e,t){const n={},r=t.ordered?"ol":"ul",i=sa(e,t);let s=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++s<i.length;){const o=i[s];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}return e(t,r,n,Wh(i,!0))}function $gt(e,t){return e(t,"p",sa(e,t))}function Rgt(e,t){return e.augment(t,bs("root",Wh(sa(e,t))))}function Ngt(e,t){return e(t,"strong",sa(e,t))}function Dgt(e,t){const n=t.children;let r=-1;const i=t.align||[],s=[];for(;++r<n.length;){const o=n[r].children,a=r===0?"th":"td",u=[];let l=-1;const c=t.align?i.length:o.length;for(;++l<c;){const f=o[l];u.push(e(f,a,{align:i[l]},f?sa(e,f):[]))}s[r]=e(n[r],"tr",Wh(u,!0))}return e(t,"table",Wh([e(s[0].position,"thead",Wh([s[0]],!0))].concat(s[1]?e({start:tIe(s[1]),end:nIe(s[s.length-1])},"tbody",Wh(s.slice(1),!0)):[]),!0))}const ufe=9,lfe=32;function Lgt(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),i=0;const s=[];for(;r;)s.push(cfe(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return s.push(cfe(t.slice(i),i>0,!1)),s.join("")}function cfe(e,t,n){let r=0,i=e.length;if(t){let s=e.codePointAt(r);for(;s===ufe||s===lfe;)r++,s=e.codePointAt(r)}if(n){let s=e.codePointAt(i-1);for(;s===ufe||s===lfe;)i--,s=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}function Mgt(e,t){return e.augment(t,bs("text",Lgt(String(t.value))))}function Fgt(e,t){return e(t,"hr")}const Bgt={blockquote:ggt,break:ygt,code:vgt,delete:_gt,emphasis:bgt,footnoteReference:iIe,footnote:wgt,heading:Egt,html:xgt,imageReference:Sgt,image:Tgt,inlineCode:Agt,linkReference:Cgt,link:Igt,listItem:Ogt,list:kgt,paragraph:$gt,root:Rgt,strong:Ngt,table:Dgt,text:Mgt,thematicBreak:Fgt,toml:rP,yaml:rP,definition:rP,footnoteDefinition:rP};function rP(){return null}const jgt={}.hasOwnProperty;function zgt(e,t){const n=t||{},r=n.allowDangerousHtml||!1,i={};return o.dangerous=r,o.clobberPrefix=n.clobberPrefix===void 0||n.clobberPrefix===null?"user-content-":n.clobberPrefix,o.footnoteLabel=n.footnoteLabel||"Footnotes",o.footnoteLabelTagName=n.footnoteLabelTagName||"h2",o.footnoteLabelProperties=n.footnoteLabelProperties||{className:["sr-only"]},o.footnoteBackLabel=n.footnoteBackLabel||"Back to content",o.definition=pgt(e),o.footnoteById=i,o.footnoteOrder=[],o.footnoteCounts={},o.augment=s,o.handlers={...Bgt,...n.handlers},o.unknownHandler=n.unknownHandler,o.passThrough=n.passThrough,yY(e,"footnoteDefinition",a=>{const u=String(a.identifier).toUpperCase();jgt.call(i,u)||(i[u]=a)}),o;function s(a,u){if(a&&"data"in a&&a.data){const l=a.data;l.hName&&(u.type!=="element"&&(u={type:"element",tagName:"",properties:{},children:[]}),u.tagName=l.hName),u.type==="element"&&l.hProperties&&(u.properties={...u.properties,...l.hProperties}),"children"in u&&u.children&&l.hChildren&&(u.children=l.hChildren)}if(a){const l="type"in a?a:{position:a};hgt(l)||(u.position={start:tIe(l),end:nIe(l)})}return u}function o(a,u,l,c){return Array.isArray(l)&&(c=l,l={}),s(a,{type:"element",tagName:u,properties:l||{},children:c||[]})}}function aIe(e,t){const n=zgt(e,t),r=ZCe(n,e,null),i=mgt(n);return i&&r.children.push(bs("text",`
`),i),Array.isArray(r)?{type:"root",children:r}:r}const Ugt=function(e,t){return e&&"run"in e?Hgt(e,t):qgt(e||t)},Vgt=Ugt;function Hgt(e,t){return(n,r,i)=>{e.run(aIe(n,t),r,s=>{i(s)})}}function qgt(e){return t=>aIe(t,e)}var uIe={exports:{}},Wgt="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Ggt=Wgt,Ygt=Ggt;function lIe(){}function cIe(){}cIe.resetWarningCache=lIe;var Kgt=function(){function e(r,i,s,o,a,u){if(u!==Ygt){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:cIe,resetWarningCache:lIe};return n.PropTypes=n,n};uIe.exports=Kgt();var Xgt=uIe.exports;const Mt=pl(Xgt);let qC=class{constructor(t,n,r){this.property=t,this.normal=n,r&&(this.space=r)}};qC.prototype.property={};qC.prototype.normal={};qC.prototype.space=null;function fIe(e,t){const n={},r={};let i=-1;for(;++i<e.length;)Object.assign(n,e[i].property),Object.assign(r,e[i].normal);return new qC(n,r,t)}function rA(e){return e.toLowerCase()}let hc=class{constructor(t,n){this.property=t,this.attribute=n}};hc.prototype.space=null;hc.prototype.boolean=!1;hc.prototype.booleanish=!1;hc.prototype.overloadedBoolean=!1;hc.prototype.number=!1;hc.prototype.commaSeparated=!1;hc.prototype.spaceSeparated=!1;hc.prototype.commaOrSpaceSeparated=!1;hc.prototype.mustUseProperty=!1;hc.prototype.defined=!1;let Qgt=0;const _n=Sv(),Xi=Sv(),dIe=Sv(),Ke=Sv(),Gr=Sv(),Ib=Sv(),Du=Sv();function Sv(){return 2**++Qgt}const cU=Object.freeze(Object.defineProperty({__proto__:null,boolean:_n,booleanish:Xi,commaOrSpaceSeparated:Du,commaSeparated:Ib,number:Ke,overloadedBoolean:dIe,spaceSeparated:Gr},Symbol.toStringTag,{value:"Module"})),M9=Object.keys(cU);class vY extends hc{constructor(t,n,r,i){let s=-1;if(super(t,n),ffe(this,"space",i),typeof r=="number")for(;++s<M9.length;){const o=M9[s];ffe(this,M9[s],(r&cU[o])===cU[o])}}}vY.prototype.defined=!0;function ffe(e,t,n){n&&(e[t]=n)}const Jgt={}.hasOwnProperty;function AE(e){const t={},n={};let r;for(r in e.properties)if(Jgt.call(e.properties,r)){const i=e.properties[r],s=new vY(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),t[r]=s,n[rA(r)]=r,n[rA(s.attribute)]=r}return new qC(t,n,e.space)}const hIe=AE({space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),pIe=AE({space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function mIe(e,t){return t in e?e[t]:t}function gIe(e,t){return mIe(e,t.toLowerCase())}const yIe=AE({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:gIe,properties:{xmlns:null,xmlnsXLink:null}}),vIe=AE({transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:Xi,ariaAutoComplete:null,ariaBusy:Xi,ariaChecked:Xi,ariaColCount:Ke,ariaColIndex:Ke,ariaColSpan:Ke,ariaControls:Gr,ariaCurrent:null,ariaDescribedBy:Gr,ariaDetails:null,ariaDisabled:Xi,ariaDropEffect:Gr,ariaErrorMessage:null,ariaExpanded:Xi,ariaFlowTo:Gr,ariaGrabbed:Xi,ariaHasPopup:null,ariaHidden:Xi,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Gr,ariaLevel:Ke,ariaLive:null,ariaModal:Xi,ariaMultiLine:Xi,ariaMultiSelectable:Xi,ariaOrientation:null,ariaOwns:Gr,ariaPlaceholder:null,ariaPosInSet:Ke,ariaPressed:Xi,ariaReadOnly:Xi,ariaRelevant:null,ariaRequired:Xi,ariaRoleDescription:Gr,ariaRowCount:Ke,ariaRowIndex:Ke,ariaRowSpan:Ke,ariaSelected:Xi,ariaSetSize:Ke,ariaSort:null,ariaValueMax:Ke,ariaValueMin:Ke,ariaValueNow:Ke,ariaValueText:null,role:null}}),Zgt=AE({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:gIe,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Ib,acceptCharset:Gr,accessKey:Gr,action:null,allow:null,allowFullScreen:_n,allowPaymentRequest:_n,allowUserMedia:_n,alt:null,as:null,async:_n,autoCapitalize:null,autoComplete:Gr,autoFocus:_n,autoPlay:_n,capture:_n,charSet:null,checked:_n,cite:null,className:Gr,cols:Ke,colSpan:null,content:null,contentEditable:Xi,controls:_n,controlsList:Gr,coords:Ke|Ib,crossOrigin:null,data:null,dateTime:null,decoding:null,default:_n,defer:_n,dir:null,dirName:null,disabled:_n,download:dIe,draggable:Xi,encType:null,enterKeyHint:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:_n,formTarget:null,headers:Gr,height:Ke,hidden:_n,high:Ke,href:null,hrefLang:null,htmlFor:Gr,httpEquiv:Gr,id:null,imageSizes:null,imageSrcSet:null,inputMode:null,integrity:null,is:null,isMap:_n,itemId:null,itemProp:Gr,itemRef:Gr,itemScope:_n,itemType:Gr,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:_n,low:Ke,manifest:null,max:null,maxLength:Ke,media:null,method:null,min:null,minLength:Ke,multiple:_n,muted:_n,name:null,nonce:null,noModule:_n,noValidate:_n,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:_n,optimum:Ke,pattern:null,ping:Gr,placeholder:null,playsInline:_n,poster:null,preload:null,readOnly:_n,referrerPolicy:null,rel:Gr,required:_n,reversed:_n,rows:Ke,rowSpan:Ke,sandbox:Gr,scope:null,scoped:_n,seamless:_n,selected:_n,shape:null,size:Ke,sizes:null,slot:null,span:Ke,spellCheck:Xi,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Ke,step:null,style:null,tabIndex:Ke,target:null,title:null,translate:null,type:null,typeMustMatch:_n,useMap:null,value:Xi,width:Ke,wrap:null,align:null,aLink:null,archive:Gr,axis:null,background:null,bgColor:null,border:Ke,borderColor:null,bottomMargin:Ke,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:_n,declare:_n,event:null,face:null,frame:null,frameBorder:null,hSpace:Ke,leftMargin:Ke,link:null,longDesc:null,lowSrc:null,marginHeight:Ke,marginWidth:Ke,noResize:_n,noHref:_n,noShade:_n,noWrap:_n,object:null,profile:null,prompt:null,rev:null,rightMargin:Ke,rules:null,scheme:null,scrolling:Xi,standby:null,summary:null,text:null,topMargin:Ke,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Ke,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:_n,disableRemotePlayback:_n,prefix:null,property:null,results:Ke,security:null,unselectable:null}}),e0t=AE({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:mIe,properties:{about:Du,accentHeight:Ke,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Ke,amplitude:Ke,arabicForm:null,ascent:Ke,attributeName:null,attributeType:null,azimuth:Ke,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Ke,by:null,calcMode:null,capHeight:Ke,className:Gr,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Ke,diffuseConstant:Ke,direction:null,display:null,dur:null,divisor:Ke,dominantBaseline:null,download:_n,dx:null,dy:null,edgeMode:null,editable:null,elevation:Ke,enableBackground:null,end:null,event:null,exponent:Ke,externalResourcesRequired:null,fill:null,fillOpacity:Ke,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Ib,g2:Ib,glyphName:Ib,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Ke,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Ke,horizOriginX:Ke,horizOriginY:Ke,id:null,ideographic:Ke,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Ke,k:Ke,k1:Ke,k2:Ke,k3:Ke,k4:Ke,kernelMatrix:Du,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Ke,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Ke,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Ke,overlineThickness:Ke,paintOrder:null,panose1:null,path:null,pathLength:Ke,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Gr,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Ke,pointsAtY:Ke,pointsAtZ:Ke,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Du,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Du,rev:Du,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Du,requiredFeatures:Du,requiredFonts:Du,requiredFormats:Du,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Ke,specularExponent:Ke,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Ke,strikethroughThickness:Ke,string:null,stroke:null,strokeDashArray:Du,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Ke,strokeOpacity:Ke,strokeWidth:null,style:null,surfaceScale:Ke,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Du,tabIndex:Ke,tableValues:null,target:null,targetX:Ke,targetY:Ke,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Du,to:null,transform:null,u1:null,u2:null,underlinePosition:Ke,underlineThickness:Ke,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Ke,values:null,vAlphabetic:Ke,vMathematical:Ke,vectorEffect:null,vHanging:Ke,vIdeographic:Ke,version:null,vertAdvY:Ke,vertOriginX:Ke,vertOriginY:Ke,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Ke,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),t0t=/^data[-\w.:]+$/i,dfe=/-[a-z]/g,n0t=/[A-Z]/g;function E6(e,t){const n=rA(t);let r=t,i=hc;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&t0t.test(t)){if(t.charAt(4)==="-"){const s=t.slice(5).replace(dfe,i0t);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=t.slice(4);if(!dfe.test(s)){let o=s.replace(n0t,r0t);o.charAt(0)!=="-"&&(o="-"+o),t="data"+o}}i=vY}return new i(r,t)}function r0t(e){return"-"+e.toLowerCase()}function i0t(e){return e.charAt(1).toUpperCase()}const hfe={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},WC=fIe([pIe,hIe,yIe,vIe,Zgt],"html"),CE=fIe([pIe,hIe,yIe,vIe,e0t],"svg");function s0t(e){if(e.allowedElements&&e.disallowedElements)throw new TypeError("Only one of `allowedElements` and `disallowedElements` should be defined");if(e.allowedElements||e.disallowedElements||e.allowElement)return t=>{yY(t,"element",(n,r,i)=>{const s=i;let o;if(e.allowedElements?o=!e.allowedElements.includes(n.tagName):e.disallowedElements&&(o=e.disallowedElements.includes(n.tagName)),!o&&e.allowElement&&typeof r=="number"&&(o=!e.allowElement(n,r,s)),o&&typeof r=="number")return e.unwrapDisallowed&&n.children?s.children.splice(r,1,...n.children):s.children.splice(r,1),r})}}var _Ie={exports:{}},xr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _Y=Symbol.for("react.element"),bY=Symbol.for("react.portal"),x6=Symbol.for("react.fragment"),S6=Symbol.for("react.strict_mode"),T6=Symbol.for("react.profiler"),A6=Symbol.for("react.provider"),C6=Symbol.for("react.context"),o0t=Symbol.for("react.server_context"),I6=Symbol.for("react.forward_ref"),O6=Symbol.for("react.suspense"),P6=Symbol.for("react.suspense_list"),k6=Symbol.for("react.memo"),$6=Symbol.for("react.lazy"),a0t=Symbol.for("react.offscreen"),bIe;bIe=Symbol.for("react.module.reference");function pc(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case _Y:switch(e=e.type,e){case x6:case T6:case S6:case O6:case P6:return e;default:switch(e=e&&e.$$typeof,e){case o0t:case C6:case I6:case $6:case k6:case A6:return e;default:return t}}case bY:return t}}}xr.ContextConsumer=C6;xr.ContextProvider=A6;xr.Element=_Y;xr.ForwardRef=I6;xr.Fragment=x6;xr.Lazy=$6;xr.Memo=k6;xr.Portal=bY;xr.Profiler=T6;xr.StrictMode=S6;xr.Suspense=O6;xr.SuspenseList=P6;xr.isAsyncMode=function(){return!1};xr.isConcurrentMode=function(){return!1};xr.isContextConsumer=function(e){return pc(e)===C6};xr.isContextProvider=function(e){return pc(e)===A6};xr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===_Y};xr.isForwardRef=function(e){return pc(e)===I6};xr.isFragment=function(e){return pc(e)===x6};xr.isLazy=function(e){return pc(e)===$6};xr.isMemo=function(e){return pc(e)===k6};xr.isPortal=function(e){return pc(e)===bY};xr.isProfiler=function(e){return pc(e)===T6};xr.isStrictMode=function(e){return pc(e)===S6};xr.isSuspense=function(e){return pc(e)===O6};xr.isSuspenseList=function(e){return pc(e)===P6};xr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===x6||e===T6||e===S6||e===O6||e===P6||e===a0t||typeof e=="object"&&e!==null&&(e.$$typeof===$6||e.$$typeof===k6||e.$$typeof===A6||e.$$typeof===C6||e.$$typeof===I6||e.$$typeof===bIe||e.getModuleId!==void 0)};xr.typeOf=pc;_Ie.exports=xr;var u0t=_Ie.exports;const l0t=pl(u0t);function c0t(e){const t=e&&typeof e=="object"&&e.type==="text"?e.value||"":e;return typeof t=="string"&&t.replace(/[ \t\n\f\r]/g,"")===""}function pfe(e){const t=String(e||"").trim();return t?t.split(/[ \t\n\r\f]+/g):[]}function wIe(e){return e.join(" ").trim()}function mfe(e){const t=[],n=String(e||"");let r=n.indexOf(","),i=0,s=!1;for(;!s;){r===-1&&(r=n.length,s=!0);const o=n.slice(i,r).trim();(o||!s)&&t.push(o),i=r+1,r=n.indexOf(",",i)}return t}function EIe(e,t){const n=t||{};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}var wY={exports:{}},gfe=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,f0t=/\n/g,d0t=/^\s*/,h0t=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,p0t=/^:\s*/,m0t=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,g0t=/^[;\s]*/,y0t=/^\s+|\s+$/g,v0t=`
`,yfe="/",vfe="*",Ty="",_0t="comment",b0t="declaration",w0t=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,r=1;function i(p){var m=p.match(f0t);m&&(n+=m.length);var g=p.lastIndexOf(v0t);r=~g?p.length-g:r+p.length}function s(){var p={line:n,column:r};return function(m){return m.position=new o(p),l(),m}}function o(p){this.start=p,this.end={line:n,column:r},this.source=t.source}o.prototype.content=e;function a(p){var m=new Error(t.source+":"+n+":"+r+": "+p);if(m.reason=p,m.filename=t.source,m.line=n,m.column=r,m.source=e,!t.silent)throw m}function u(p){var m=p.exec(e);if(m){var g=m[0];return i(g),e=e.slice(g.length),m}}function l(){u(d0t)}function c(p){var m;for(p=p||[];m=f();)m!==!1&&p.push(m);return p}function f(){var p=s();if(!(yfe!=e.charAt(0)||vfe!=e.charAt(1))){for(var m=2;Ty!=e.charAt(m)&&(vfe!=e.charAt(m)||yfe!=e.charAt(m+1));)++m;if(m+=2,Ty===e.charAt(m-1))return a("End of comment missing");var g=e.slice(2,m-2);return r+=2,i(g),e=e.slice(m),r+=2,p({type:_0t,comment:g})}}function d(){var p=s(),m=u(h0t);if(m){if(f(),!u(p0t))return a("property missing ':'");var g=u(m0t),y=p({type:b0t,property:_fe(m[0].replace(gfe,Ty)),value:g?_fe(g[0].replace(gfe,Ty)):Ty});return u(g0t),y}}function h(){var p=[];c(p);for(var m;m=d();)m!==!1&&(p.push(m),c(p));return p}return l(),h()};function _fe(e){return e?e.replace(y0t,Ty):Ty}var E0t=w0t;function xIe(e,t){var n=null;if(!e||typeof e!="string")return n;for(var r,i=E0t(e),s=typeof t=="function",o,a,u=0,l=i.length;u<l;u++)r=i[u],o=r.property,a=r.value,s?t(o,a,r):a&&(n||(n={}),n[o]=a);return n}wY.exports=xIe;wY.exports.default=xIe;var x0t=wY.exports;const S0t=pl(x0t),fU={}.hasOwnProperty,T0t=new Set(["table","thead","tbody","tfoot","tr"]);function SIe(e,t){const n=[];let r=-1,i;for(;++r<t.children.length;)i=t.children[r],i.type==="element"?n.push(A0t(e,i,r,t)):i.type==="text"?(t.type!=="element"||!T0t.has(t.tagName)||!c0t(i))&&n.push(i.value):i.type==="raw"&&!e.options.skipHtml&&n.push(i.value);return n}function A0t(e,t,n,r){const i=e.options,s=i.transformLinkUri===void 0?Aht:i.transformLinkUri,o=e.schema,a=t.tagName,u={};let l=o,c;if(o.space==="html"&&a==="svg"&&(l=CE,e.schema=l),t.properties)for(c in t.properties)fU.call(t.properties,c)&&I0t(u,c,t.properties[c],e);(a==="ol"||a==="ul")&&e.listDepth++;const f=SIe(e,t);(a==="ol"||a==="ul")&&e.listDepth--,e.schema=o;const d=t.position||{start:{line:null,column:null,offset:null},end:{line:null,column:null,offset:null}},h=i.components&&fU.call(i.components,a)?i.components[a]:a,p=typeof h=="string"||h===L.Fragment;if(!l0t.isValidElementType(h))throw new TypeError(`Component for name \`${a}\` not defined or is not renderable`);if(u.key=[a,d.start.line,d.start.column,n].join("-"),a==="a"&&i.linkTarget&&(u.target=typeof i.linkTarget=="function"?i.linkTarget(String(u.href||""),t.children,typeof u.title=="string"?u.title:null):i.linkTarget),a==="a"&&s&&(u.href=s(String(u.href||""),t.children,typeof u.title=="string"?u.title:null)),!p&&a==="code"&&r.type==="element"&&r.tagName!=="pre"&&(u.inline=!0),!p&&(a==="h1"||a==="h2"||a==="h3"||a==="h4"||a==="h5"||a==="h6")&&(u.level=Number.parseInt(a.charAt(1),10)),a==="img"&&i.transformImageUri&&(u.src=i.transformImageUri(String(u.src||""),String(u.alt||""),typeof u.title=="string"?u.title:null)),!p&&a==="li"&&r.type==="element"){const m=C0t(t);u.checked=m&&m.properties?!!m.properties.checked:null,u.index=F9(r,t),u.ordered=r.tagName==="ol"}return!p&&(a==="ol"||a==="ul")&&(u.ordered=a==="ol",u.depth=e.listDepth),(a==="td"||a==="th")&&(u.align&&(u.style||(u.style={}),u.style.textAlign=u.align,delete u.align),p||(u.isHeader=a==="th")),!p&&a==="tr"&&r.type==="element"&&(u.isHeader=r.tagName==="thead"),i.sourcePos&&(u["data-sourcepos"]=k0t(d)),!p&&i.rawSourcePos&&(u.sourcePosition=t.position),!p&&i.includeElementIndex&&(u.index=F9(r,t),u.siblingCount=F9(r)),p||(u.node=t),f.length>0?L.createElement(h,u,f):L.createElement(h,u)}function C0t(e){let t=-1;for(;++t<e.children.length;){const n=e.children[t];if(n.type==="element"&&n.tagName==="input")return n}return null}function F9(e,t){let n=-1,r=0;for(;++n<e.children.length&&e.children[n]!==t;)e.children[n].type==="element"&&r++;return r}function I0t(e,t,n,r){const i=E6(r.schema,t);let s=n;s==null||s!==s||(Array.isArray(s)&&(s=i.commaSeparated?EIe(s):wIe(s)),i.property==="style"&&typeof s=="string"&&(s=O0t(s)),i.space&&i.property?e[fU.call(hfe,i.property)?hfe[i.property]:i.property]=s:i.attribute&&(e[i.attribute]=s))}function O0t(e){const t={};try{S0t(e,n)}catch{}return t;function n(r,i){const s=r.slice(0,4)==="-ms-"?`ms-${r.slice(4)}`:r;t[s.replace(/-([a-z])/g,P0t)]=i}}function P0t(e,t){return t.toUpperCase()}function k0t(e){return[e.start.line,":",e.start.column,"-",e.end.line,":",e.end.column].map(String).join("")}const bfe={}.hasOwnProperty,$0t="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",iP={plugins:{to:"remarkPlugins",id:"change-plugins-to-remarkplugins"},renderers:{to:"components",id:"change-renderers-to-components"},astPlugins:{id:"remove-buggy-html-in-markdown-parser"},allowDangerousHtml:{id:"remove-buggy-html-in-markdown-parser"},escapeHtml:{id:"remove-buggy-html-in-markdown-parser"},source:{to:"children",id:"change-source-to-children"},allowNode:{to:"allowElement",id:"replace-allownode-allowedtypes-and-disallowedtypes"},allowedTypes:{to:"allowedElements",id:"replace-allownode-allowedtypes-and-disallowedtypes"},disallowedTypes:{to:"disallowedElements",id:"replace-allownode-allowedtypes-and-disallowedtypes"},includeNodeIndex:{to:"includeElementIndex",id:"change-includenodeindex-to-includeelementindex"}};function TIe(e){for(const s in iP)if(bfe.call(iP,s)&&bfe.call(e,s)){const o=iP[s];console.warn(`[react-markdown] Warning: please ${o.to?`use \`${o.to}\` instead of`:"remove"} \`${s}\` (see <${$0t}#${o.id}> for more info)`),delete iP[s]}const t=Zht().use(ngt).use(e.remarkPlugins||[]).use(Vgt,{...e.remarkRehypeOptions,allowDangerousHtml:!0}).use(e.rehypePlugins||[]).use(s0t,e),n=new Fht;typeof e.children=="string"?n.value=e.children:e.children!==void 0&&e.children!==null&&console.warn(`[react-markdown] Warning: please pass a string as \`children\` (not: \`${e.children}\`)`);const r=t.runSync(t.parse(n),n);if(r.type!=="root")throw new TypeError("Expected a `root` node");let i=L.createElement(L.Fragment,{},SIe({options:e,schema:WC,listDepth:0},r));return e.className&&(i=L.createElement("div",{className:e.className},i)),i}TIe.propTypes={children:Mt.string,className:Mt.string,allowElement:Mt.func,allowedElements:Mt.arrayOf(Mt.string),disallowedElements:Mt.arrayOf(Mt.string),unwrapDisallowed:Mt.bool,remarkPlugins:Mt.arrayOf(Mt.oneOfType([Mt.object,Mt.func,Mt.arrayOf(Mt.oneOfType([Mt.bool,Mt.string,Mt.object,Mt.func,Mt.arrayOf(Mt.any)]))])),rehypePlugins:Mt.arrayOf(Mt.oneOfType([Mt.object,Mt.func,Mt.arrayOf(Mt.oneOfType([Mt.bool,Mt.string,Mt.object,Mt.func,Mt.arrayOf(Mt.any)]))])),sourcePos:Mt.bool,rawSourcePos:Mt.bool,skipHtml:Mt.bool,includeElementIndex:Mt.bool,transformLinkUri:Mt.oneOfType([Mt.func,Mt.bool]),linkTarget:Mt.oneOfType([Mt.func,Mt.string]),transformImageUri:Mt.func,components:Mt.object};const AIe=-1,R6=0,fD=1,dD=2,EY=3,xY=4,SY=5,TY=6,CIe=7,IIe=8,wfe=typeof self=="object"?self:globalThis,R0t=(e,t)=>{const n=(i,s)=>(e.set(s,i),i),r=i=>{if(e.has(i))return e.get(i);const[s,o]=t[i];switch(s){case R6:case AIe:return n(o,i);case fD:{const a=n([],i);for(const u of o)a.push(r(u));return a}case dD:{const a=n({},i);for(const[u,l]of o)a[r(u)]=r(l);return a}case EY:return n(new Date(o),i);case xY:{const{source:a,flags:u}=o;return n(new RegExp(a,u),i)}case SY:{const a=n(new Map,i);for(const[u,l]of o)a.set(r(u),r(l));return a}case TY:{const a=n(new Set,i);for(const u of o)a.add(r(u));return a}case CIe:{const{name:a,message:u}=o;return n(new wfe[a](u),i)}case IIe:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i)}return n(new wfe[s](o),i)};return r},Efe=e=>R0t(new Map,e)(0),o_="",{toString:N0t}={},{keys:D0t}=Object,Gx=e=>{const t=typeof e;if(t!=="object"||!e)return[R6,t];const n=N0t.call(e).slice(8,-1);switch(n){case"Array":return[fD,o_];case"Object":return[dD,o_];case"Date":return[EY,o_];case"RegExp":return[xY,o_];case"Map":return[SY,o_];case"Set":return[TY,o_]}return n.includes("Array")?[fD,n]:n.includes("Error")?[CIe,n]:[dD,n]},sP=([e,t])=>e===R6&&(t==="function"||t==="symbol"),L0t=(e,t,n,r)=>{const i=(o,a)=>{const u=r.push(o)-1;return n.set(a,u),u},s=o=>{if(n.has(o))return n.get(o);let[a,u]=Gx(o);switch(a){case R6:{let c=o;switch(u){case"bigint":a=IIe,c=o.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+u);c=null;break;case"undefined":return i([AIe],o)}return i([a,c],o)}case fD:{if(u)return i([u,[...o]],o);const c=[],f=i([a,c],o);for(const d of o)c.push(s(d));return f}case dD:{if(u)switch(u){case"BigInt":return i([u,o.toString()],o);case"Boolean":case"Number":case"String":return i([u,o.valueOf()],o)}if(t&&"toJSON"in o)return s(o.toJSON());const c=[],f=i([a,c],o);for(const d of D0t(o))(e||!sP(Gx(o[d])))&&c.push([s(d),s(o[d])]);return f}case EY:return i([a,o.toISOString()],o);case xY:{const{source:c,flags:f}=o;return i([a,{source:c,flags:f}],o)}case SY:{const c=[],f=i([a,c],o);for(const[d,h]of o)(e||!(sP(Gx(d))||sP(Gx(h))))&&c.push([s(d),s(h)]);return f}case TY:{const c=[],f=i([a,c],o);for(const d of o)(e||!sP(Gx(d)))&&c.push(s(d));return f}}const{message:l}=o;return i([a,{name:u,message:l}],o)};return s},xfe=(e,{json:t,lossy:n}={})=>{const r=[];return L0t(!(t||n),!!t,new Map,r)(e),r},Sfe=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?Efe(xfe(e,t)):structuredClone(e):(e,t)=>Efe(xfe(e,t)),Tfe=/[#.]/g;function M0t(e,t){const n=e||"",r={};let i=0,s,o;for(;i<n.length;){Tfe.lastIndex=i;const a=Tfe.exec(n),u=n.slice(i,a?a.index:n.length);u&&(s?s==="#"?r.id=u:Array.isArray(r.className)?r.className.push(u):r.className=[u]:o=u,i+=u.length),a&&(s=a[0],i++)}return{type:"element",tagName:o||t||"div",properties:r,children:[]}}const F0t=new Set(["button","menu","reset","submit"]),dU={}.hasOwnProperty;function OIe(e,t,n){const r=n&&U0t(n);function i(s,o,...a){let u=-1,l;if(s==null){l={type:"root",children:[]};const c=o;a.unshift(c)}else if(l=M0t(s,t),l.tagName=l.tagName.toLowerCase(),r&&dU.call(r,l.tagName)&&(l.tagName=r[l.tagName]),B0t(o,l.tagName)){let c;for(c in o)dU.call(o,c)&&j0t(e,l.properties,c,o[c])}else a.unshift(o);for(;++u<a.length;)hU(l.children,a[u]);return l.type==="element"&&l.tagName==="template"&&(l.content={type:"root",children:l.children},l.children=[]),l}return i}function B0t(e,t){return e==null||typeof e!="object"||Array.isArray(e)?!1:t==="input"||!e.type||typeof e.type!="string"?!0:"children"in e&&Array.isArray(e.children)?!1:t==="button"?F0t.has(e.type.toLowerCase()):!("value"in e)}function j0t(e,t,n,r){const i=E6(e,n);let s=-1,o;if(r!=null){if(typeof r=="number"){if(Number.isNaN(r))return;o=r}else typeof r=="boolean"?o=r:typeof r=="string"?i.spaceSeparated?o=pfe(r):i.commaSeparated?o=mfe(r):i.commaOrSpaceSeparated?o=pfe(mfe(r).join(" ")):o=Afe(i,i.property,r):Array.isArray(r)?o=r.concat():o=i.property==="style"?z0t(r):String(r);if(Array.isArray(o)){const a=[];for(;++s<o.length;){const u=Afe(i,i.property,o[s]);a[s]=u}o=a}if(i.property==="className"&&Array.isArray(t.className)){const a=o;o=t.className.concat(a)}t[i.property]=o}}function hU(e,t){let n=-1;if(t!=null)if(typeof t=="string"||typeof t=="number")e.push({type:"text",value:String(t)});else if(Array.isArray(t))for(;++n<t.length;)hU(e,t[n]);else if(typeof t=="object"&&"type"in t)t.type==="root"?hU(e,t.children):e.push(t);else throw new Error("Expected node, nodes, or string, got `"+t+"`")}function Afe(e,t,n){if(typeof n=="string"){if(e.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((e.boolean||e.overloadedBoolean)&&(n===""||rA(n)===rA(t)))return!0}return n}function z0t(e){const t=[];let n;for(n in e)dU.call(e,n)&&t.push([n,e[n]].join(": "));return t.join("; ")}function U0t(e){const t={};let n=-1;for(;++n<e.length;)t[e[n].toLowerCase()]=e[n];return t}const V0t=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],H0t=OIe(WC,"div"),q0t=OIe(CE,"g",V0t),B9=/\r?\n|\r/g;function W0t(e){const t=String(e),n=[];for(B9.lastIndex=0;B9.test(t);)n.push(B9.lastIndex);return n.push(t.length+1),{toPoint:r,toOffset:i};function r(s){let o=-1;if(typeof s=="number"&&s>-1&&s<n[n.length-1]){for(;++o<n.length;)if(n[o]>s)return{line:o+1,column:s-(o>0?n[o-1]:0)+1,offset:s}}}function i(s){const o=s&&s.line,a=s&&s.column;if(typeof o=="number"&&typeof a=="number"&&!Number.isNaN(o)&&!Number.isNaN(a)&&o-1 in n){const u=(n[o-2]||0)+a-1||0;if(u>-1&&u<n[n.length-1])return u}}}const zy={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},PIe={}.hasOwnProperty,G0t=Object.prototype;function Y0t(e,t){const n=t||{};return AY({file:n.file||void 0,location:!1,schema:n.space==="svg"?CE:WC,verbose:n.verbose||!1},e)}function AY(e,t){let n;switch(t.nodeName){case"#comment":{const r=t;return n={type:"comment",value:r.data},Wk(e,r,n),n}case"#document":case"#document-fragment":{const r=t,i="mode"in r?r.mode==="quirks"||r.mode==="limited-quirks":!1;if(n={type:"root",children:kIe(e,t.childNodes),data:{quirksMode:i}},e.file&&e.location){const s=String(e.file),o=W0t(s),a=o.toPoint(0),u=o.toPoint(s.length);n.position={start:a,end:u}}return n}case"#documentType":{const r=t;return n={type:"doctype"},Wk(e,r,n),n}case"#text":{const r=t;return n={type:"text",value:r.value},Wk(e,r,n),n}default:return n=K0t(e,t),n}}function kIe(e,t){let n=-1;const r=[];for(;++n<t.length;){const i=AY(e,t[n]);r.push(i)}return r}function K0t(e,t){const n=e.schema;e.schema=t.namespaceURI===zy.svg?CE:WC;let r=-1;const i={};for(;++r<t.attrs.length;){const a=t.attrs[r],u=(a.prefix?a.prefix+":":"")+a.name;PIe.call(G0t,u)||(i[u]=a.value)}const o=(e.schema.space==="svg"?q0t:H0t)(t.tagName,i,kIe(e,t.childNodes));if(Wk(e,t,o),o.tagName==="template"){const a=t,u=a.sourceCodeLocation,l=u&&u.startTag&&J_(u.startTag),c=u&&u.endTag&&J_(u.endTag),f=AY(e,a.content);l&&c&&e.file&&(f.position={start:l.end,end:c.start}),o.content=f}return e.schema=n,o}function Wk(e,t,n){if("sourceCodeLocation"in t&&t.sourceCodeLocation&&e.file){const r=X0t(e,n,t.sourceCodeLocation);r&&(e.location=!0,n.position=r)}}function X0t(e,t,n){const r=J_(n);if(t.type==="element"){const i=t.children[t.children.length-1];if(r&&!n.endTag&&i&&i.position&&i.position.end&&(r.end=Object.assign({},i.position.end)),e.verbose){const s={};let o;if(n.attrs)for(o in n.attrs)PIe.call(n.attrs,o)&&(s[E6(e.schema,o).property]=J_(n.attrs[o]));n.startTag;const a=J_(n.startTag),u=n.endTag?J_(n.endTag):void 0,l={opening:a};u&&(l.closing=u),l.properties=s,t.data={position:l}}}return r}function J_(e){const t=Cfe({line:e.startLine,column:e.startCol,offset:e.startOffset}),n=Cfe({line:e.endLine,column:e.endCol,offset:e.endOffset});return t||n?{start:t,end:n}:void 0}function Cfe(e){return e.line&&e.column?e:void 0}const Ife={}.hasOwnProperty;function $Ie(e,t){const n=t||{};function r(i,...s){let o=r.invalid;const a=r.handlers;if(i&&Ife.call(i,e)){const u=String(i[e]);o=Ife.call(a,u)?a[u]:r.unknown}if(o)return o.call(this,i,...s)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const Q0t={},J0t={}.hasOwnProperty,RIe=$Ie("type",{handlers:{root:eyt,element:syt,text:ryt,comment:iyt,doctype:nyt}});function Z0t(e,t){const r=(t||Q0t).space;return RIe(e,r==="svg"?CE:WC)}function eyt(e,t){const n={nodeName:"#document",mode:(e.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return n.childNodes=CY(e.children,n,t),IE(e,n),n}function tyt(e,t){const n={nodeName:"#document-fragment",childNodes:[]};return n.childNodes=CY(e.children,n,t),IE(e,n),n}function nyt(e){const t={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return IE(e,t),t}function ryt(e){const t={nodeName:"#text",value:e.value,parentNode:null};return IE(e,t),t}function iyt(e){const t={nodeName:"#comment",data:e.value,parentNode:null};return IE(e,t),t}function syt(e,t){const n=t;let r=n;e.type==="element"&&e.tagName.toLowerCase()==="svg"&&n.space==="html"&&(r=CE);const i=[];let s;if(e.properties){for(s in e.properties)if(s!=="children"&&J0t.call(e.properties,s)){const u=oyt(r,s,e.properties[s]);u&&i.push(u)}}const o=r.space,a={nodeName:e.tagName,tagName:e.tagName,attrs:i,namespaceURI:zy[o],childNodes:[],parentNode:null};return a.childNodes=CY(e.children,a,r),IE(e,a),e.tagName==="template"&&e.content&&(a.content=tyt(e.content,r)),a}function oyt(e,t,n){const r=E6(e,t);if(n===!1||n===null||n===void 0||typeof n=="number"&&Number.isNaN(n)||!n&&r.boolean)return;Array.isArray(n)&&(n=r.commaSeparated?EIe(n):wIe(n));const i={name:r.attribute,value:n===!0?"":String(n)};if(r.space&&r.space!=="html"&&r.space!=="svg"){const s=i.name.indexOf(":");s<0?i.prefix="":(i.name=i.name.slice(s+1),i.prefix=r.attribute.slice(0,s)),i.namespace=zy[r.space]}return i}function CY(e,t,n){let r=-1;const i=[];if(e)for(;++r<e.length;){const s=RIe(e[r],n);s.parentNode=t,i.push(s)}return i}function IE(e,t){const n=e.position;n&&n.start&&n.end&&(n.start.offset,n.end.offset,t.sourceCodeLocation={startLine:n.start.line,startCol:n.start.column,startOffset:n.start.offset,endLine:n.end.line,endCol:n.end.column,endOffset:n.end.offset})}const ayt=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],uyt=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),ai="";var Y;(function(e){e[e.EOF=-1]="EOF",e[e.NULL=0]="NULL",e[e.TABULATION=9]="TABULATION",e[e.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",e[e.LINE_FEED=10]="LINE_FEED",e[e.FORM_FEED=12]="FORM_FEED",e[e.SPACE=32]="SPACE",e[e.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",e[e.QUOTATION_MARK=34]="QUOTATION_MARK",e[e.NUMBER_SIGN=35]="NUMBER_SIGN",e[e.AMPERSAND=38]="AMPERSAND",e[e.APOSTROPHE=39]="APOSTROPHE",e[e.HYPHEN_MINUS=45]="HYPHEN_MINUS",e[e.SOLIDUS=47]="SOLIDUS",e[e.DIGIT_0=48]="DIGIT_0",e[e.DIGIT_9=57]="DIGIT_9",e[e.SEMICOLON=59]="SEMICOLON",e[e.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",e[e.EQUALS_SIGN=61]="EQUALS_SIGN",e[e.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",e[e.LATIN_CAPITAL_F=70]="LATIN_CAPITAL_F",e[e.LATIN_CAPITAL_X=88]="LATIN_CAPITAL_X",e[e.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",e[e.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",e[e.GRAVE_ACCENT=96]="GRAVE_ACCENT",e[e.LATIN_SMALL_A=97]="LATIN_SMALL_A",e[e.LATIN_SMALL_F=102]="LATIN_SMALL_F",e[e.LATIN_SMALL_X=120]="LATIN_SMALL_X",e[e.LATIN_SMALL_Z=122]="LATIN_SMALL_Z",e[e.REPLACEMENT_CHARACTER=65533]="REPLACEMENT_CHARACTER"})(Y=Y||(Y={}));const ja={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function NIe(e){return e>=55296&&e<=57343}function lyt(e){return e>=56320&&e<=57343}function cyt(e,t){return(e-55296)*1024+9216+t}function DIe(e){return e!==32&&e!==10&&e!==13&&e!==9&&e!==12&&e>=1&&e<=31||e>=127&&e<=159}function LIe(e){return e>=64976&&e<=65007||uyt.has(e)}var we;(function(e){e.controlCharacterInInputStream="control-character-in-input-stream",e.noncharacterInInputStream="noncharacter-in-input-stream",e.surrogateInInputStream="surrogate-in-input-stream",e.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",e.endTagWithAttributes="end-tag-with-attributes",e.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",e.unexpectedSolidusInTag="unexpected-solidus-in-tag",e.unexpectedNullCharacter="unexpected-null-character",e.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",e.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",e.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",e.missingEndTagName="missing-end-tag-name",e.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",e.unknownNamedCharacterReference="unknown-named-character-reference",e.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",e.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",e.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",e.eofBeforeTagName="eof-before-tag-name",e.eofInTag="eof-in-tag",e.missingAttributeValue="missing-attribute-value",e.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",e.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",e.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",e.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",e.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",e.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",e.missingDoctypePublicIdentifier="missing-doctype-public-identifier",e.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",e.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",e.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",e.cdataInHtmlContent="cdata-in-html-content",e.incorrectlyOpenedComment="incorrectly-opened-comment",e.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",e.eofInDoctype="eof-in-doctype",e.nestedComment="nested-comment",e.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",e.eofInComment="eof-in-comment",e.incorrectlyClosedComment="incorrectly-closed-comment",e.eofInCdata="eof-in-cdata",e.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",e.nullCharacterReference="null-character-reference",e.surrogateCharacterReference="surrogate-character-reference",e.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",e.controlCharacterReference="control-character-reference",e.noncharacterCharacterReference="noncharacter-character-reference",e.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",e.missingDoctypeName="missing-doctype-name",e.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",e.duplicateAttribute="duplicate-attribute",e.nonConformingDoctype="non-conforming-doctype",e.missingDoctype="missing-doctype",e.misplacedDoctype="misplaced-doctype",e.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",e.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",e.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",e.openElementsLeftAfterEof="open-elements-left-after-eof",e.abandonedHeadElementChild="abandoned-head-element-child",e.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",e.nestedNoscriptInHead="nested-noscript-in-head",e.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(we=we||(we={}));const fyt=65536;class dyt{constructor(t){this.handler=t,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=fyt,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(t){const{line:n,col:r,offset:i}=this;return{code:t,startLine:n,endLine:n,startCol:r,endCol:r,startOffset:i,endOffset:i}}_err(t){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(t)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(t){if(this.pos!==this.html.length-1){const n=this.html.charCodeAt(this.pos+1);if(lyt(n))return this.pos++,this._addGap(),cyt(t,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,Y.EOF;return this._err(we.surrogateInInputStream),t}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(t,n){this.html.length>0?this.html+=t:this.html=t,this.endOfChunkHit=!1,this.lastChunkWritten=n}insertHtmlAtCurrentPos(t){this.html=this.html.substring(0,this.pos+1)+t+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(t,n){if(this.pos+t.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(n)return this.html.startsWith(t,this.pos);for(let r=0;r<t.length;r++)if((this.html.charCodeAt(this.pos+r)|32)!==t.charCodeAt(r))return!1;return!0}peek(t){const n=this.pos+t;if(n>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,Y.EOF;const r=this.html.charCodeAt(n);return r===Y.CARRIAGE_RETURN?Y.LINE_FEED:r}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,Y.EOF;let t=this.html.charCodeAt(this.pos);return t===Y.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,Y.LINE_FEED):t===Y.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,NIe(t)&&(t=this._processSurrogate(t)),this.handler.onParseError===null||t>31&&t<127||t===Y.LINE_FEED||t===Y.CARRIAGE_RETURN||t>159&&t<64976||this._checkForProblematicCharacters(t),t)}_checkForProblematicCharacters(t){DIe(t)?this._err(we.controlCharacterInInputStream):LIe(t)&&this._err(we.noncharacterInInputStream)}retreat(t){for(this.pos-=t;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var En;(function(e){e[e.CHARACTER=0]="CHARACTER",e[e.NULL_CHARACTER=1]="NULL_CHARACTER",e[e.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",e[e.START_TAG=3]="START_TAG",e[e.END_TAG=4]="END_TAG",e[e.COMMENT=5]="COMMENT",e[e.DOCTYPE=6]="DOCTYPE",e[e.EOF=7]="EOF",e[e.HIBERNATION=8]="HIBERNATION"})(En=En||(En={}));function MIe(e,t){for(let n=e.attrs.length-1;n>=0;n--)if(e.attrs[n].name===t)return e.attrs[n].value;return null}const _m=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),hyt=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(e=>e.charCodeAt(0)));var j9;const pyt=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),myt=(j9=String.fromCodePoint)!==null&&j9!==void 0?j9:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function gyt(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=pyt.get(e))!==null&&t!==void 0?t:e}var Ls;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(Ls||(Ls={}));const yyt=32;var dd;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(dd||(dd={}));function pU(e){return e>=Ls.ZERO&&e<=Ls.NINE}function vyt(e){return e>=Ls.UPPER_A&&e<=Ls.UPPER_F||e>=Ls.LOWER_A&&e<=Ls.LOWER_F}function _yt(e){return e>=Ls.UPPER_A&&e<=Ls.UPPER_Z||e>=Ls.LOWER_A&&e<=Ls.LOWER_Z||pU(e)}function byt(e){return e===Ls.EQUALS||_yt(e)}var Ps;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(Ps||(Ps={}));var Ay;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(Ay||(Ay={}));class wyt{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=Ps.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=Ay.Strict}startEntity(t){this.decodeMode=t,this.state=Ps.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case Ps.EntityStart:return t.charCodeAt(n)===Ls.NUM?(this.state=Ps.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=Ps.NamedEntity,this.stateNamedEntity(t,n));case Ps.NumericStart:return this.stateNumericStart(t,n);case Ps.NumericDecimal:return this.stateNumericDecimal(t,n);case Ps.NumericHex:return this.stateNumericHex(t,n);case Ps.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|yyt)===Ls.LOWER_X?(this.state=Ps.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=Ps.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,i){if(n!==r){const s=r-n;this.result=this.result*Math.pow(i,s)+parseInt(t.substr(n,s),i),this.consumed+=s}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(pU(i)||vyt(i))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(pU(i))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===Ls.SEMI)this.consumed+=1;else if(this.decodeMode===Ay.Strict)return 0;return this.emitCodePoint(gyt(this.result),this.consumed),this.errors&&(t!==Ls.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let i=r[this.treeIndex],s=(i&dd.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const o=t.charCodeAt(n);if(this.treeIndex=BIe(r,i,this.treeIndex+Math.max(1,s),o),this.treeIndex<0)return this.result===0||this.decodeMode===Ay.Attribute&&(s===0||byt(o))?0:this.emitNotTerminatedNamedEntity();if(i=r[this.treeIndex],s=(i&dd.VALUE_LENGTH)>>14,s!==0){if(o===Ls.SEMI)return this.emitNamedEntityData(this.treeIndex,s,this.consumed+this.excess);this.decodeMode!==Ay.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,i=(r[n]&dd.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,i,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:i}=this;return this.emitCodePoint(n===1?i[t]&~dd.VALUE_LENGTH:i[t+1],r),n===3&&this.emitCodePoint(i[t+2],r),r}end(){var t;switch(this.state){case Ps.NamedEntity:return this.result!==0&&(this.decodeMode!==Ay.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case Ps.NumericDecimal:return this.emitNumericEntity(0,2);case Ps.NumericHex:return this.emitNumericEntity(0,3);case Ps.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case Ps.EntityStart:return 0}}}function FIe(e){let t="";const n=new wyt(e,r=>t+=myt(r));return function(i,s){let o=0,a=0;for(;(a=i.indexOf("&",a))>=0;){t+=i.slice(o,a),n.startEntity(s);const l=n.write(i,a+1);if(l<0){o=a+n.end();break}o=a+l,a=l===0?o+1:o}const u=t+i.slice(o);return t="",u}}function BIe(e,t,n,r){const i=(t&dd.BRANCH_LENGTH)>>7,s=t&dd.JUMP_TABLE;if(i===0)return s!==0&&r===s?n:-1;if(s){const u=r-s;return u<0||u>=i?-1:e[n+u]-1}let o=n,a=o+i-1;for(;o<=a;){const u=o+a>>>1,l=e[u];if(l<r)o=u+1;else if(l>r)a=u-1;else return e[u+i]}return-1}FIe(_m);FIe(hyt);var Ae;(function(e){e.HTML="http://www.w3.org/1999/xhtml",e.MATHML="http://www.w3.org/1998/Math/MathML",e.SVG="http://www.w3.org/2000/svg",e.XLINK="http://www.w3.org/1999/xlink",e.XML="http://www.w3.org/XML/1998/namespace",e.XMLNS="http://www.w3.org/2000/xmlns/"})(Ae=Ae||(Ae={}));var bg;(function(e){e.TYPE="type",e.ACTION="action",e.ENCODING="encoding",e.PROMPT="prompt",e.NAME="name",e.COLOR="color",e.FACE="face",e.SIZE="size"})(bg=bg||(bg={}));var ju;(function(e){e.NO_QUIRKS="no-quirks",e.QUIRKS="quirks",e.LIMITED_QUIRKS="limited-quirks"})(ju=ju||(ju={}));var me;(function(e){e.A="a",e.ADDRESS="address",e.ANNOTATION_XML="annotation-xml",e.APPLET="applet",e.AREA="area",e.ARTICLE="article",e.ASIDE="aside",e.B="b",e.BASE="base",e.BASEFONT="basefont",e.BGSOUND="bgsound",e.BIG="big",e.BLOCKQUOTE="blockquote",e.BODY="body",e.BR="br",e.BUTTON="button",e.CAPTION="caption",e.CENTER="center",e.CODE="code",e.COL="col",e.COLGROUP="colgroup",e.DD="dd",e.DESC="desc",e.DETAILS="details",e.DIALOG="dialog",e.DIR="dir",e.DIV="div",e.DL="dl",e.DT="dt",e.EM="em",e.EMBED="embed",e.FIELDSET="fieldset",e.FIGCAPTION="figcaption",e.FIGURE="figure",e.FONT="font",e.FOOTER="footer",e.FOREIGN_OBJECT="foreignObject",e.FORM="form",e.FRAME="frame",e.FRAMESET="frameset",e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.H5="h5",e.H6="h6",e.HEAD="head",e.HEADER="header",e.HGROUP="hgroup",e.HR="hr",e.HTML="html",e.I="i",e.IMG="img",e.IMAGE="image",e.INPUT="input",e.IFRAME="iframe",e.KEYGEN="keygen",e.LABEL="label",e.LI="li",e.LINK="link",e.LISTING="listing",e.MAIN="main",e.MALIGNMARK="malignmark",e.MARQUEE="marquee",e.MATH="math",e.MENU="menu",e.META="meta",e.MGLYPH="mglyph",e.MI="mi",e.MO="mo",e.MN="mn",e.MS="ms",e.MTEXT="mtext",e.NAV="nav",e.NOBR="nobr",e.NOFRAMES="noframes",e.NOEMBED="noembed",e.NOSCRIPT="noscript",e.OBJECT="object",e.OL="ol",e.OPTGROUP="optgroup",e.OPTION="option",e.P="p",e.PARAM="param",e.PLAINTEXT="plaintext",e.PRE="pre",e.RB="rb",e.RP="rp",e.RT="rt",e.RTC="rtc",e.RUBY="ruby",e.S="s",e.SCRIPT="script",e.SECTION="section",e.SELECT="select",e.SOURCE="source",e.SMALL="small",e.SPAN="span",e.STRIKE="strike",e.STRONG="strong",e.STYLE="style",e.SUB="sub",e.SUMMARY="summary",e.SUP="sup",e.TABLE="table",e.TBODY="tbody",e.TEMPLATE="template",e.TEXTAREA="textarea",e.TFOOT="tfoot",e.TD="td",e.TH="th",e.THEAD="thead",e.TITLE="title",e.TR="tr",e.TRACK="track",e.TT="tt",e.U="u",e.UL="ul",e.SVG="svg",e.VAR="var",e.WBR="wbr",e.XMP="xmp"})(me=me||(me={}));var T;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.A=1]="A",e[e.ADDRESS=2]="ADDRESS",e[e.ANNOTATION_XML=3]="ANNOTATION_XML",e[e.APPLET=4]="APPLET",e[e.AREA=5]="AREA",e[e.ARTICLE=6]="ARTICLE",e[e.ASIDE=7]="ASIDE",e[e.B=8]="B",e[e.BASE=9]="BASE",e[e.BASEFONT=10]="BASEFONT",e[e.BGSOUND=11]="BGSOUND",e[e.BIG=12]="BIG",e[e.BLOCKQUOTE=13]="BLOCKQUOTE",e[e.BODY=14]="BODY",e[e.BR=15]="BR",e[e.BUTTON=16]="BUTTON",e[e.CAPTION=17]="CAPTION",e[e.CENTER=18]="CENTER",e[e.CODE=19]="CODE",e[e.COL=20]="COL",e[e.COLGROUP=21]="COLGROUP",e[e.DD=22]="DD",e[e.DESC=23]="DESC",e[e.DETAILS=24]="DETAILS",e[e.DIALOG=25]="DIALOG",e[e.DIR=26]="DIR",e[e.DIV=27]="DIV",e[e.DL=28]="DL",e[e.DT=29]="DT",e[e.EM=30]="EM",e[e.EMBED=31]="EMBED",e[e.FIELDSET=32]="FIELDSET",e[e.FIGCAPTION=33]="FIGCAPTION",e[e.FIGURE=34]="FIGURE",e[e.FONT=35]="FONT",e[e.FOOTER=36]="FOOTER",e[e.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",e[e.FORM=38]="FORM",e[e.FRAME=39]="FRAME",e[e.FRAMESET=40]="FRAMESET",e[e.H1=41]="H1",e[e.H2=42]="H2",e[e.H3=43]="H3",e[e.H4=44]="H4",e[e.H5=45]="H5",e[e.H6=46]="H6",e[e.HEAD=47]="HEAD",e[e.HEADER=48]="HEADER",e[e.HGROUP=49]="HGROUP",e[e.HR=50]="HR",e[e.HTML=51]="HTML",e[e.I=52]="I",e[e.IMG=53]="IMG",e[e.IMAGE=54]="IMAGE",e[e.INPUT=55]="INPUT",e[e.IFRAME=56]="IFRAME",e[e.KEYGEN=57]="KEYGEN",e[e.LABEL=58]="LABEL",e[e.LI=59]="LI",e[e.LINK=60]="LINK",e[e.LISTING=61]="LISTING",e[e.MAIN=62]="MAIN",e[e.MALIGNMARK=63]="MALIGNMARK",e[e.MARQUEE=64]="MARQUEE",e[e.MATH=65]="MATH",e[e.MENU=66]="MENU",e[e.META=67]="META",e[e.MGLYPH=68]="MGLYPH",e[e.MI=69]="MI",e[e.MO=70]="MO",e[e.MN=71]="MN",e[e.MS=72]="MS",e[e.MTEXT=73]="MTEXT",e[e.NAV=74]="NAV",e[e.NOBR=75]="NOBR",e[e.NOFRAMES=76]="NOFRAMES",e[e.NOEMBED=77]="NOEMBED",e[e.NOSCRIPT=78]="NOSCRIPT",e[e.OBJECT=79]="OBJECT",e[e.OL=80]="OL",e[e.OPTGROUP=81]="OPTGROUP",e[e.OPTION=82]="OPTION",e[e.P=83]="P",e[e.PARAM=84]="PARAM",e[e.PLAINTEXT=85]="PLAINTEXT",e[e.PRE=86]="PRE",e[e.RB=87]="RB",e[e.RP=88]="RP",e[e.RT=89]="RT",e[e.RTC=90]="RTC",e[e.RUBY=91]="RUBY",e[e.S=92]="S",e[e.SCRIPT=93]="SCRIPT",e[e.SECTION=94]="SECTION",e[e.SELECT=95]="SELECT",e[e.SOURCE=96]="SOURCE",e[e.SMALL=97]="SMALL",e[e.SPAN=98]="SPAN",e[e.STRIKE=99]="STRIKE",e[e.STRONG=100]="STRONG",e[e.STYLE=101]="STYLE",e[e.SUB=102]="SUB",e[e.SUMMARY=103]="SUMMARY",e[e.SUP=104]="SUP",e[e.TABLE=105]="TABLE",e[e.TBODY=106]="TBODY",e[e.TEMPLATE=107]="TEMPLATE",e[e.TEXTAREA=108]="TEXTAREA",e[e.TFOOT=109]="TFOOT",e[e.TD=110]="TD",e[e.TH=111]="TH",e[e.THEAD=112]="THEAD",e[e.TITLE=113]="TITLE",e[e.TR=114]="TR",e[e.TRACK=115]="TRACK",e[e.TT=116]="TT",e[e.U=117]="U",e[e.UL=118]="UL",e[e.SVG=119]="SVG",e[e.VAR=120]="VAR",e[e.WBR=121]="WBR",e[e.XMP=122]="XMP"})(T=T||(T={}));const Eyt=new Map([[me.A,T.A],[me.ADDRESS,T.ADDRESS],[me.ANNOTATION_XML,T.ANNOTATION_XML],[me.APPLET,T.APPLET],[me.AREA,T.AREA],[me.ARTICLE,T.ARTICLE],[me.ASIDE,T.ASIDE],[me.B,T.B],[me.BASE,T.BASE],[me.BASEFONT,T.BASEFONT],[me.BGSOUND,T.BGSOUND],[me.BIG,T.BIG],[me.BLOCKQUOTE,T.BLOCKQUOTE],[me.BODY,T.BODY],[me.BR,T.BR],[me.BUTTON,T.BUTTON],[me.CAPTION,T.CAPTION],[me.CENTER,T.CENTER],[me.CODE,T.CODE],[me.COL,T.COL],[me.COLGROUP,T.COLGROUP],[me.DD,T.DD],[me.DESC,T.DESC],[me.DETAILS,T.DETAILS],[me.DIALOG,T.DIALOG],[me.DIR,T.DIR],[me.DIV,T.DIV],[me.DL,T.DL],[me.DT,T.DT],[me.EM,T.EM],[me.EMBED,T.EMBED],[me.FIELDSET,T.FIELDSET],[me.FIGCAPTION,T.FIGCAPTION],[me.FIGURE,T.FIGURE],[me.FONT,T.FONT],[me.FOOTER,T.FOOTER],[me.FOREIGN_OBJECT,T.FOREIGN_OBJECT],[me.FORM,T.FORM],[me.FRAME,T.FRAME],[me.FRAMESET,T.FRAMESET],[me.H1,T.H1],[me.H2,T.H2],[me.H3,T.H3],[me.H4,T.H4],[me.H5,T.H5],[me.H6,T.H6],[me.HEAD,T.HEAD],[me.HEADER,T.HEADER],[me.HGROUP,T.HGROUP],[me.HR,T.HR],[me.HTML,T.HTML],[me.I,T.I],[me.IMG,T.IMG],[me.IMAGE,T.IMAGE],[me.INPUT,T.INPUT],[me.IFRAME,T.IFRAME],[me.KEYGEN,T.KEYGEN],[me.LABEL,T.LABEL],[me.LI,T.LI],[me.LINK,T.LINK],[me.LISTING,T.LISTING],[me.MAIN,T.MAIN],[me.MALIGNMARK,T.MALIGNMARK],[me.MARQUEE,T.MARQUEE],[me.MATH,T.MATH],[me.MENU,T.MENU],[me.META,T.META],[me.MGLYPH,T.MGLYPH],[me.MI,T.MI],[me.MO,T.MO],[me.MN,T.MN],[me.MS,T.MS],[me.MTEXT,T.MTEXT],[me.NAV,T.NAV],[me.NOBR,T.NOBR],[me.NOFRAMES,T.NOFRAMES],[me.NOEMBED,T.NOEMBED],[me.NOSCRIPT,T.NOSCRIPT],[me.OBJECT,T.OBJECT],[me.OL,T.OL],[me.OPTGROUP,T.OPTGROUP],[me.OPTION,T.OPTION],[me.P,T.P],[me.PARAM,T.PARAM],[me.PLAINTEXT,T.PLAINTEXT],[me.PRE,T.PRE],[me.RB,T.RB],[me.RP,T.RP],[me.RT,T.RT],[me.RTC,T.RTC],[me.RUBY,T.RUBY],[me.S,T.S],[me.SCRIPT,T.SCRIPT],[me.SECTION,T.SECTION],[me.SELECT,T.SELECT],[me.SOURCE,T.SOURCE],[me.SMALL,T.SMALL],[me.SPAN,T.SPAN],[me.STRIKE,T.STRIKE],[me.STRONG,T.STRONG],[me.STYLE,T.STYLE],[me.SUB,T.SUB],[me.SUMMARY,T.SUMMARY],[me.SUP,T.SUP],[me.TABLE,T.TABLE],[me.TBODY,T.TBODY],[me.TEMPLATE,T.TEMPLATE],[me.TEXTAREA,T.TEXTAREA],[me.TFOOT,T.TFOOT],[me.TD,T.TD],[me.TH,T.TH],[me.THEAD,T.THEAD],[me.TITLE,T.TITLE],[me.TR,T.TR],[me.TRACK,T.TRACK],[me.TT,T.TT],[me.U,T.U],[me.UL,T.UL],[me.SVG,T.SVG],[me.VAR,T.VAR],[me.WBR,T.WBR],[me.XMP,T.XMP]]);function OE(e){var t;return(t=Eyt.get(e))!==null&&t!==void 0?t:T.UNKNOWN}const Be=T,xyt={[Ae.HTML]:new Set([Be.ADDRESS,Be.APPLET,Be.AREA,Be.ARTICLE,Be.ASIDE,Be.BASE,Be.BASEFONT,Be.BGSOUND,Be.BLOCKQUOTE,Be.BODY,Be.BR,Be.BUTTON,Be.CAPTION,Be.CENTER,Be.COL,Be.COLGROUP,Be.DD,Be.DETAILS,Be.DIR,Be.DIV,Be.DL,Be.DT,Be.EMBED,Be.FIELDSET,Be.FIGCAPTION,Be.FIGURE,Be.FOOTER,Be.FORM,Be.FRAME,Be.FRAMESET,Be.H1,Be.H2,Be.H3,Be.H4,Be.H5,Be.H6,Be.HEAD,Be.HEADER,Be.HGROUP,Be.HR,Be.HTML,Be.IFRAME,Be.IMG,Be.INPUT,Be.LI,Be.LINK,Be.LISTING,Be.MAIN,Be.MARQUEE,Be.MENU,Be.META,Be.NAV,Be.NOEMBED,Be.NOFRAMES,Be.NOSCRIPT,Be.OBJECT,Be.OL,Be.P,Be.PARAM,Be.PLAINTEXT,Be.PRE,Be.SCRIPT,Be.SECTION,Be.SELECT,Be.SOURCE,Be.STYLE,Be.SUMMARY,Be.TABLE,Be.TBODY,Be.TD,Be.TEMPLATE,Be.TEXTAREA,Be.TFOOT,Be.TH,Be.THEAD,Be.TITLE,Be.TR,Be.TRACK,Be.UL,Be.WBR,Be.XMP]),[Ae.MATHML]:new Set([Be.MI,Be.MO,Be.MN,Be.MS,Be.MTEXT,Be.ANNOTATION_XML]),[Ae.SVG]:new Set([Be.TITLE,Be.FOREIGN_OBJECT,Be.DESC]),[Ae.XLINK]:new Set,[Ae.XML]:new Set,[Ae.XMLNS]:new Set};function jIe(e){return e===Be.H1||e===Be.H2||e===Be.H3||e===Be.H4||e===Be.H5||e===Be.H6}me.STYLE,me.SCRIPT,me.XMP,me.IFRAME,me.NOEMBED,me.NOFRAMES,me.PLAINTEXT;const Syt=new Map([[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);var X;(function(e){e[e.DATA=0]="DATA",e[e.RCDATA=1]="RCDATA",e[e.RAWTEXT=2]="RAWTEXT",e[e.SCRIPT_DATA=3]="SCRIPT_DATA",e[e.PLAINTEXT=4]="PLAINTEXT",e[e.TAG_OPEN=5]="TAG_OPEN",e[e.END_TAG_OPEN=6]="END_TAG_OPEN",e[e.TAG_NAME=7]="TAG_NAME",e[e.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",e[e.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",e[e.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",e[e.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",e[e.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",e[e.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",e[e.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",e[e.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",e[e.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",e[e.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",e[e.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",e[e.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",e[e.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",e[e.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",e[e.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",e[e.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",e[e.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",e[e.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",e[e.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",e[e.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",e[e.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",e[e.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",e[e.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",e[e.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",e[e.BOGUS_COMMENT=40]="BOGUS_COMMENT",e[e.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",e[e.COMMENT_START=42]="COMMENT_START",e[e.COMMENT_START_DASH=43]="COMMENT_START_DASH",e[e.COMMENT=44]="COMMENT",e[e.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",e[e.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",e[e.COMMENT_END_DASH=49]="COMMENT_END_DASH",e[e.COMMENT_END=50]="COMMENT_END",e[e.COMMENT_END_BANG=51]="COMMENT_END_BANG",e[e.DOCTYPE=52]="DOCTYPE",e[e.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",e[e.DOCTYPE_NAME=54]="DOCTYPE_NAME",e[e.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",e[e.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",e[e.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",e[e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",e[e.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",e[e.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",e[e.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",e[e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",e[e.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",e[e.CDATA_SECTION=68]="CDATA_SECTION",e[e.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",e[e.CDATA_SECTION_END=70]="CDATA_SECTION_END",e[e.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",e[e.NAMED_CHARACTER_REFERENCE=72]="NAMED_CHARACTER_REFERENCE",e[e.AMBIGUOUS_AMPERSAND=73]="AMBIGUOUS_AMPERSAND",e[e.NUMERIC_CHARACTER_REFERENCE=74]="NUMERIC_CHARACTER_REFERENCE",e[e.HEXADEMICAL_CHARACTER_REFERENCE_START=75]="HEXADEMICAL_CHARACTER_REFERENCE_START",e[e.HEXADEMICAL_CHARACTER_REFERENCE=76]="HEXADEMICAL_CHARACTER_REFERENCE",e[e.DECIMAL_CHARACTER_REFERENCE=77]="DECIMAL_CHARACTER_REFERENCE",e[e.NUMERIC_CHARACTER_REFERENCE_END=78]="NUMERIC_CHARACTER_REFERENCE_END"})(X||(X={}));const Hi={DATA:X.DATA,RCDATA:X.RCDATA,RAWTEXT:X.RAWTEXT,SCRIPT_DATA:X.SCRIPT_DATA,PLAINTEXT:X.PLAINTEXT,CDATA_SECTION:X.CDATA_SECTION};function zT(e){return e>=Y.DIGIT_0&&e<=Y.DIGIT_9}function US(e){return e>=Y.LATIN_CAPITAL_A&&e<=Y.LATIN_CAPITAL_Z}function Tyt(e){return e>=Y.LATIN_SMALL_A&&e<=Y.LATIN_SMALL_Z}function bm(e){return Tyt(e)||US(e)}function mU(e){return bm(e)||zT(e)}function zIe(e){return e>=Y.LATIN_CAPITAL_A&&e<=Y.LATIN_CAPITAL_F}function UIe(e){return e>=Y.LATIN_SMALL_A&&e<=Y.LATIN_SMALL_F}function Ayt(e){return zT(e)||zIe(e)||UIe(e)}function oP(e){return e+32}function VIe(e){return e===Y.SPACE||e===Y.LINE_FEED||e===Y.TABULATION||e===Y.FORM_FEED}function Cyt(e){return e===Y.EQUALS_SIGN||mU(e)}function Ofe(e){return VIe(e)||e===Y.SOLIDUS||e===Y.GREATER_THAN_SIGN}class Iyt{constructor(t,n){this.options=t,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=X.DATA,this.returnState=X.DATA,this.charRefCode=-1,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new dyt(n),this.currentLocation=this.getCurrentLocation(-1)}_err(t){var n,r;(r=(n=this.handler).onParseError)===null||r===void 0||r.call(n,this.preprocessor.getError(t))}getCurrentLocation(t){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-t,startOffset:this.preprocessor.offset-t,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const t=this._consume();this._ensureHibernation()||this._callState(t)}this.inLoop=!1}}pause(){this.paused=!0}resume(t){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||t==null||t())}write(t,n,r){this.active=!0,this.preprocessor.write(t,n),this._runParsingLoop(),this.paused||r==null||r()}insertHtmlAtCurrentPos(t){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(t),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this._unconsume(this.consumedAfterSnapshot),this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_unconsume(t){this.consumedAfterSnapshot-=t,this.preprocessor.retreat(t)}_reconsumeInState(t,n){this.state=t,this._callState(n)}_advanceBy(t){this.consumedAfterSnapshot+=t;for(let n=0;n<t;n++)this.preprocessor.advance()}_consumeSequenceIfMatch(t,n){return this.preprocessor.startsWith(t,n)?(this._advanceBy(t.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:En.START_TAG,tagName:"",tagID:T.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:En.END_TAG,tagName:"",tagID:T.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(t){this.currentToken={type:En.COMMENT,data:"",location:this.getCurrentLocation(t)}}_createDoctypeToken(t){this.currentToken={type:En.DOCTYPE,name:t,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(t,n){this.currentCharacterToken={type:t,chars:n,location:this.currentLocation}}_createAttr(t){this.currentAttr={name:t,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var t,n;const r=this.currentToken;if(MIe(r,this.currentAttr.name)===null){if(r.attrs.push(this.currentAttr),r.location&&this.currentLocation){const i=(t=(n=r.location).attrs)!==null&&t!==void 0?t:n.attrs=Object.create(null);i[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(we.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(t){this._emitCurrentCharacterToken(t.location),this.currentToken=null,t.location&&(t.location.endLine=this.preprocessor.line,t.location.endCol=this.preprocessor.col+1,t.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const t=this.currentToken;this.prepareToken(t),t.tagID=OE(t.tagName),t.type===En.START_TAG?(this.lastStartTagName=t.tagName,this.handler.onStartTag(t)):(t.attrs.length>0&&this._err(we.endTagWithAttributes),t.selfClosing&&this._err(we.endTagWithTrailingSolidus),this.handler.onEndTag(t)),this.preprocessor.dropParsedChunk()}emitCurrentComment(t){this.prepareToken(t),this.handler.onComment(t),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(t){this.prepareToken(t),this.handler.onDoctype(t),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(t){if(this.currentCharacterToken){switch(t&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=t.startLine,this.currentCharacterToken.location.endCol=t.startCol,this.currentCharacterToken.location.endOffset=t.startOffset),this.currentCharacterToken.type){case En.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case En.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case En.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const t=this.getCurrentLocation(0);t&&(t.endLine=t.startLine,t.endCol=t.startCol,t.endOffset=t.startOffset),this._emitCurrentCharacterToken(t),this.handler.onEof({type:En.EOF,location:t}),this.active=!1}_appendCharToCurrentCharacterToken(t,n){if(this.currentCharacterToken)if(this.currentCharacterToken.type!==t)this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();else{this.currentCharacterToken.chars+=n;return}this._createCharacterToken(t,n)}_emitCodePoint(t){const n=VIe(t)?En.WHITESPACE_CHARACTER:t===Y.NULL?En.NULL_CHARACTER:En.CHARACTER;this._appendCharToCurrentCharacterToken(n,String.fromCodePoint(t))}_emitChars(t){this._appendCharToCurrentCharacterToken(En.CHARACTER,t)}_matchNamedCharacterReference(t){let n=null,r=0,i=!1;for(let s=0,o=_m[0];s>=0&&(s=BIe(_m,o,s+1,t),!(s<0));t=this._consume()){r+=1,o=_m[s];const a=o&dd.VALUE_LENGTH;if(a){const u=(a>>14)-1;if(t!==Y.SEMICOLON&&this._isCharacterReferenceInAttribute()&&Cyt(this.preprocessor.peek(1))?(n=[Y.AMPERSAND],s+=u):(n=u===0?[_m[s]&~dd.VALUE_LENGTH]:u===1?[_m[++s]]:[_m[++s],_m[++s]],r=0,i=t!==Y.SEMICOLON),u===0){this._consume();break}}}return this._unconsume(r),i&&!this.preprocessor.endOfChunkHit&&this._err(we.missingSemicolonAfterCharacterReference),this._unconsume(1),n}_isCharacterReferenceInAttribute(){return this.returnState===X.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===X.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===X.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(t){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(t):this._emitCodePoint(t)}_callState(t){switch(this.state){case X.DATA:{this._stateData(t);break}case X.RCDATA:{this._stateRcdata(t);break}case X.RAWTEXT:{this._stateRawtext(t);break}case X.SCRIPT_DATA:{this._stateScriptData(t);break}case X.PLAINTEXT:{this._statePlaintext(t);break}case X.TAG_OPEN:{this._stateTagOpen(t);break}case X.END_TAG_OPEN:{this._stateEndTagOpen(t);break}case X.TAG_NAME:{this._stateTagName(t);break}case X.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(t);break}case X.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(t);break}case X.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(t);break}case X.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(t);break}case X.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(t);break}case X.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(t);break}case X.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(t);break}case X.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(t);break}case X.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(t);break}case X.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(t);break}case X.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(t);break}case X.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(t);break}case X.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(t);break}case X.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(t);break}case X.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(t);break}case X.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(t);break}case X.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(t);break}case X.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(t);break}case X.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(t);break}case X.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(t);break}case X.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(t);break}case X.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(t);break}case X.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(t);break}case X.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(t);break}case X.ATTRIBUTE_NAME:{this._stateAttributeName(t);break}case X.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(t);break}case X.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(t);break}case X.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(t);break}case X.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(t);break}case X.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(t);break}case X.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(t);break}case X.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(t);break}case X.BOGUS_COMMENT:{this._stateBogusComment(t);break}case X.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(t);break}case X.COMMENT_START:{this._stateCommentStart(t);break}case X.COMMENT_START_DASH:{this._stateCommentStartDash(t);break}case X.COMMENT:{this._stateComment(t);break}case X.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(t);break}case X.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(t);break}case X.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(t);break}case X.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(t);break}case X.COMMENT_END_DASH:{this._stateCommentEndDash(t);break}case X.COMMENT_END:{this._stateCommentEnd(t);break}case X.COMMENT_END_BANG:{this._stateCommentEndBang(t);break}case X.DOCTYPE:{this._stateDoctype(t);break}case X.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(t);break}case X.DOCTYPE_NAME:{this._stateDoctypeName(t);break}case X.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(t);break}case X.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(t);break}case X.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(t);break}case X.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(t);break}case X.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(t);break}case X.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(t);break}case X.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(t);break}case X.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(t);break}case X.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(t);break}case X.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(t);break}case X.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(t);break}case X.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(t);break}case X.BOGUS_DOCTYPE:{this._stateBogusDoctype(t);break}case X.CDATA_SECTION:{this._stateCdataSection(t);break}case X.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(t);break}case X.CDATA_SECTION_END:{this._stateCdataSectionEnd(t);break}case X.CHARACTER_REFERENCE:{this._stateCharacterReference(t);break}case X.NAMED_CHARACTER_REFERENCE:{this._stateNamedCharacterReference(t);break}case X.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(t);break}case X.NUMERIC_CHARACTER_REFERENCE:{this._stateNumericCharacterReference(t);break}case X.HEXADEMICAL_CHARACTER_REFERENCE_START:{this._stateHexademicalCharacterReferenceStart(t);break}case X.HEXADEMICAL_CHARACTER_REFERENCE:{this._stateHexademicalCharacterReference(t);break}case X.DECIMAL_CHARACTER_REFERENCE:{this._stateDecimalCharacterReference(t);break}case X.NUMERIC_CHARACTER_REFERENCE_END:{this._stateNumericCharacterReferenceEnd(t);break}default:throw new Error("Unknown state")}}_stateData(t){switch(t){case Y.LESS_THAN_SIGN:{this.state=X.TAG_OPEN;break}case Y.AMPERSAND:{this.returnState=X.DATA,this.state=X.CHARACTER_REFERENCE;break}case Y.NULL:{this._err(we.unexpectedNullCharacter),this._emitCodePoint(t);break}case Y.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRcdata(t){switch(t){case Y.AMPERSAND:{this.returnState=X.RCDATA,this.state=X.CHARACTER_REFERENCE;break}case Y.LESS_THAN_SIGN:{this.state=X.RCDATA_LESS_THAN_SIGN;break}case Y.NULL:{this._err(we.unexpectedNullCharacter),this._emitChars(ai);break}case Y.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRawtext(t){switch(t){case Y.LESS_THAN_SIGN:{this.state=X.RAWTEXT_LESS_THAN_SIGN;break}case Y.NULL:{this._err(we.unexpectedNullCharacter),this._emitChars(ai);break}case Y.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptData(t){switch(t){case Y.LESS_THAN_SIGN:{this.state=X.SCRIPT_DATA_LESS_THAN_SIGN;break}case Y.NULL:{this._err(we.unexpectedNullCharacter),this._emitChars(ai);break}case Y.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_statePlaintext(t){switch(t){case Y.NULL:{this._err(we.unexpectedNullCharacter),this._emitChars(ai);break}case Y.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateTagOpen(t){if(bm(t))this._createStartTagToken(),this.state=X.TAG_NAME,this._stateTagName(t);else switch(t){case Y.EXCLAMATION_MARK:{this.state=X.MARKUP_DECLARATION_OPEN;break}case Y.SOLIDUS:{this.state=X.END_TAG_OPEN;break}case Y.QUESTION_MARK:{this._err(we.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=X.BOGUS_COMMENT,this._stateBogusComment(t);break}case Y.EOF:{this._err(we.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(we.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=X.DATA,this._stateData(t)}}_stateEndTagOpen(t){if(bm(t))this._createEndTagToken(),this.state=X.TAG_NAME,this._stateTagName(t);else switch(t){case Y.GREATER_THAN_SIGN:{this._err(we.missingEndTagName),this.state=X.DATA;break}case Y.EOF:{this._err(we.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(we.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=X.BOGUS_COMMENT,this._stateBogusComment(t)}}_stateTagName(t){const n=this.currentToken;switch(t){case Y.SPACE:case Y.LINE_FEED:case Y.TABULATION:case Y.FORM_FEED:{this.state=X.BEFORE_ATTRIBUTE_NAME;break}case Y.SOLIDUS:{this.state=X.SELF_CLOSING_START_TAG;break}case Y.GREATER_THAN_SIGN:{this.state=X.DATA,this.emitCurrentTagToken();break}case Y.NULL:{this._err(we.unexpectedNullCharacter),n.tagName+=ai;break}case Y.EOF:{this._err(we.eofInTag),this._emitEOFToken();break}default:n.tagName+=String.fromCodePoint(US(t)?oP(t):t)}}_stateRcdataLessThanSign(t){t===Y.SOLIDUS?this.state=X.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=X.RCDATA,this._stateRcdata(t))}_stateRcdataEndTagOpen(t){bm(t)?(this.state=X.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(t)):(this._emitChars("</"),this.state=X.RCDATA,this._stateRcdata(t))}handleSpecialEndTag(t){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const n=this.currentToken;switch(n.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case Y.SPACE:case Y.LINE_FEED:case Y.TABULATION:case Y.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=X.BEFORE_ATTRIBUTE_NAME,!1;case Y.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=X.SELF_CLOSING_START_TAG,!1;case Y.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=X.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=X.RCDATA,this._stateRcdata(t))}_stateRawtextLessThanSign(t){t===Y.SOLIDUS?this.state=X.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=X.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagOpen(t){bm(t)?(this.state=X.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(t)):(this._emitChars("</"),this.state=X.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=X.RAWTEXT,this._stateRawtext(t))}_stateScriptDataLessThanSign(t){switch(t){case Y.SOLIDUS:{this.state=X.SCRIPT_DATA_END_TAG_OPEN;break}case Y.EXCLAMATION_MARK:{this.state=X.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=X.SCRIPT_DATA,this._stateScriptData(t)}}_stateScriptDataEndTagOpen(t){bm(t)?(this.state=X.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(t)):(this._emitChars("</"),this.state=X.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=X.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStart(t){t===Y.HYPHEN_MINUS?(this.state=X.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=X.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStartDash(t){t===Y.HYPHEN_MINUS?(this.state=X.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=X.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscaped(t){switch(t){case Y.HYPHEN_MINUS:{this.state=X.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case Y.LESS_THAN_SIGN:{this.state=X.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case Y.NULL:{this._err(we.unexpectedNullCharacter),this._emitChars(ai);break}case Y.EOF:{this._err(we.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataEscapedDash(t){switch(t){case Y.HYPHEN_MINUS:{this.state=X.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case Y.LESS_THAN_SIGN:{this.state=X.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case Y.NULL:{this._err(we.unexpectedNullCharacter),this.state=X.SCRIPT_DATA_ESCAPED,this._emitChars(ai);break}case Y.EOF:{this._err(we.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=X.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedDashDash(t){switch(t){case Y.HYPHEN_MINUS:{this._emitChars("-");break}case Y.LESS_THAN_SIGN:{this.state=X.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case Y.GREATER_THAN_SIGN:{this.state=X.SCRIPT_DATA,this._emitChars(">");break}case Y.NULL:{this._err(we.unexpectedNullCharacter),this.state=X.SCRIPT_DATA_ESCAPED,this._emitChars(ai);break}case Y.EOF:{this._err(we.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=X.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedLessThanSign(t){t===Y.SOLIDUS?this.state=X.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:bm(t)?(this._emitChars("<"),this.state=X.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(t)):(this._emitChars("<"),this.state=X.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagOpen(t){bm(t)?(this.state=X.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(t)):(this._emitChars("</"),this.state=X.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=X.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscapeStart(t){if(this.preprocessor.startsWith(ja.SCRIPT,!1)&&Ofe(this.preprocessor.peek(ja.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<ja.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=X.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=X.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscaped(t){switch(t){case Y.HYPHEN_MINUS:{this.state=X.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case Y.LESS_THAN_SIGN:{this.state=X.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case Y.NULL:{this._err(we.unexpectedNullCharacter),this._emitChars(ai);break}case Y.EOF:{this._err(we.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDash(t){switch(t){case Y.HYPHEN_MINUS:{this.state=X.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case Y.LESS_THAN_SIGN:{this.state=X.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case Y.NULL:{this._err(we.unexpectedNullCharacter),this.state=X.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(ai);break}case Y.EOF:{this._err(we.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=X.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDashDash(t){switch(t){case Y.HYPHEN_MINUS:{this._emitChars("-");break}case Y.LESS_THAN_SIGN:{this.state=X.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case Y.GREATER_THAN_SIGN:{this.state=X.SCRIPT_DATA,this._emitChars(">");break}case Y.NULL:{this._err(we.unexpectedNullCharacter),this.state=X.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(ai);break}case Y.EOF:{this._err(we.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=X.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedLessThanSign(t){t===Y.SOLIDUS?(this.state=X.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=X.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateScriptDataDoubleEscapeEnd(t){if(this.preprocessor.startsWith(ja.SCRIPT,!1)&&Ofe(this.preprocessor.peek(ja.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<ja.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=X.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=X.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateBeforeAttributeName(t){switch(t){case Y.SPACE:case Y.LINE_FEED:case Y.TABULATION:case Y.FORM_FEED:break;case Y.SOLIDUS:case Y.GREATER_THAN_SIGN:case Y.EOF:{this.state=X.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case Y.EQUALS_SIGN:{this._err(we.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=X.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=X.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateAttributeName(t){switch(t){case Y.SPACE:case Y.LINE_FEED:case Y.TABULATION:case Y.FORM_FEED:case Y.SOLIDUS:case Y.GREATER_THAN_SIGN:case Y.EOF:{this._leaveAttrName(),this.state=X.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case Y.EQUALS_SIGN:{this._leaveAttrName(),this.state=X.BEFORE_ATTRIBUTE_VALUE;break}case Y.QUOTATION_MARK:case Y.APOSTROPHE:case Y.LESS_THAN_SIGN:{this._err(we.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(t);break}case Y.NULL:{this._err(we.unexpectedNullCharacter),this.currentAttr.name+=ai;break}default:this.currentAttr.name+=String.fromCodePoint(US(t)?oP(t):t)}}_stateAfterAttributeName(t){switch(t){case Y.SPACE:case Y.LINE_FEED:case Y.TABULATION:case Y.FORM_FEED:break;case Y.SOLIDUS:{this.state=X.SELF_CLOSING_START_TAG;break}case Y.EQUALS_SIGN:{this.state=X.BEFORE_ATTRIBUTE_VALUE;break}case Y.GREATER_THAN_SIGN:{this.state=X.DATA,this.emitCurrentTagToken();break}case Y.EOF:{this._err(we.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=X.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateBeforeAttributeValue(t){switch(t){case Y.SPACE:case Y.LINE_FEED:case Y.TABULATION:case Y.FORM_FEED:break;case Y.QUOTATION_MARK:{this.state=X.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case Y.APOSTROPHE:{this.state=X.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case Y.GREATER_THAN_SIGN:{this._err(we.missingAttributeValue),this.state=X.DATA,this.emitCurrentTagToken();break}default:this.state=X.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(t)}}_stateAttributeValueDoubleQuoted(t){switch(t){case Y.QUOTATION_MARK:{this.state=X.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case Y.AMPERSAND:{this.returnState=X.ATTRIBUTE_VALUE_DOUBLE_QUOTED,this.state=X.CHARACTER_REFERENCE;break}case Y.NULL:{this._err(we.unexpectedNullCharacter),this.currentAttr.value+=ai;break}case Y.EOF:{this._err(we.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueSingleQuoted(t){switch(t){case Y.APOSTROPHE:{this.state=X.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case Y.AMPERSAND:{this.returnState=X.ATTRIBUTE_VALUE_SINGLE_QUOTED,this.state=X.CHARACTER_REFERENCE;break}case Y.NULL:{this._err(we.unexpectedNullCharacter),this.currentAttr.value+=ai;break}case Y.EOF:{this._err(we.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueUnquoted(t){switch(t){case Y.SPACE:case Y.LINE_FEED:case Y.TABULATION:case Y.FORM_FEED:{this._leaveAttrValue(),this.state=X.BEFORE_ATTRIBUTE_NAME;break}case Y.AMPERSAND:{this.returnState=X.ATTRIBUTE_VALUE_UNQUOTED,this.state=X.CHARACTER_REFERENCE;break}case Y.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=X.DATA,this.emitCurrentTagToken();break}case Y.NULL:{this._err(we.unexpectedNullCharacter),this.currentAttr.value+=ai;break}case Y.QUOTATION_MARK:case Y.APOSTROPHE:case Y.LESS_THAN_SIGN:case Y.EQUALS_SIGN:case Y.GRAVE_ACCENT:{this._err(we.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(t);break}case Y.EOF:{this._err(we.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAfterAttributeValueQuoted(t){switch(t){case Y.SPACE:case Y.LINE_FEED:case Y.TABULATION:case Y.FORM_FEED:{this._leaveAttrValue(),this.state=X.BEFORE_ATTRIBUTE_NAME;break}case Y.SOLIDUS:{this._leaveAttrValue(),this.state=X.SELF_CLOSING_START_TAG;break}case Y.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=X.DATA,this.emitCurrentTagToken();break}case Y.EOF:{this._err(we.eofInTag),this._emitEOFToken();break}default:this._err(we.missingWhitespaceBetweenAttributes),this.state=X.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateSelfClosingStartTag(t){switch(t){case Y.GREATER_THAN_SIGN:{const n=this.currentToken;n.selfClosing=!0,this.state=X.DATA,this.emitCurrentTagToken();break}case Y.EOF:{this._err(we.eofInTag),this._emitEOFToken();break}default:this._err(we.unexpectedSolidusInTag),this.state=X.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateBogusComment(t){const n=this.currentToken;switch(t){case Y.GREATER_THAN_SIGN:{this.state=X.DATA,this.emitCurrentComment(n);break}case Y.EOF:{this.emitCurrentComment(n),this._emitEOFToken();break}case Y.NULL:{this._err(we.unexpectedNullCharacter),n.data+=ai;break}default:n.data+=String.fromCodePoint(t)}}_stateMarkupDeclarationOpen(t){this._consumeSequenceIfMatch(ja.DASH_DASH,!0)?(this._createCommentToken(ja.DASH_DASH.length+1),this.state=X.COMMENT_START):this._consumeSequenceIfMatch(ja.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(ja.DOCTYPE.length+1),this.state=X.DOCTYPE):this._consumeSequenceIfMatch(ja.CDATA_START,!0)?this.inForeignNode?this.state=X.CDATA_SECTION:(this._err(we.cdataInHtmlContent),this._createCommentToken(ja.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=X.BOGUS_COMMENT):this._ensureHibernation()||(this._err(we.incorrectlyOpenedComment),this._createCommentToken(2),this.state=X.BOGUS_COMMENT,this._stateBogusComment(t))}_stateCommentStart(t){switch(t){case Y.HYPHEN_MINUS:{this.state=X.COMMENT_START_DASH;break}case Y.GREATER_THAN_SIGN:{this._err(we.abruptClosingOfEmptyComment),this.state=X.DATA;const n=this.currentToken;this.emitCurrentComment(n);break}default:this.state=X.COMMENT,this._stateComment(t)}}_stateCommentStartDash(t){const n=this.currentToken;switch(t){case Y.HYPHEN_MINUS:{this.state=X.COMMENT_END;break}case Y.GREATER_THAN_SIGN:{this._err(we.abruptClosingOfEmptyComment),this.state=X.DATA,this.emitCurrentComment(n);break}case Y.EOF:{this._err(we.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=X.COMMENT,this._stateComment(t)}}_stateComment(t){const n=this.currentToken;switch(t){case Y.HYPHEN_MINUS:{this.state=X.COMMENT_END_DASH;break}case Y.LESS_THAN_SIGN:{n.data+="<",this.state=X.COMMENT_LESS_THAN_SIGN;break}case Y.NULL:{this._err(we.unexpectedNullCharacter),n.data+=ai;break}case Y.EOF:{this._err(we.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+=String.fromCodePoint(t)}}_stateCommentLessThanSign(t){const n=this.currentToken;switch(t){case Y.EXCLAMATION_MARK:{n.data+="!",this.state=X.COMMENT_LESS_THAN_SIGN_BANG;break}case Y.LESS_THAN_SIGN:{n.data+="<";break}default:this.state=X.COMMENT,this._stateComment(t)}}_stateCommentLessThanSignBang(t){t===Y.HYPHEN_MINUS?this.state=X.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=X.COMMENT,this._stateComment(t))}_stateCommentLessThanSignBangDash(t){t===Y.HYPHEN_MINUS?this.state=X.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=X.COMMENT_END_DASH,this._stateCommentEndDash(t))}_stateCommentLessThanSignBangDashDash(t){t!==Y.GREATER_THAN_SIGN&&t!==Y.EOF&&this._err(we.nestedComment),this.state=X.COMMENT_END,this._stateCommentEnd(t)}_stateCommentEndDash(t){const n=this.currentToken;switch(t){case Y.HYPHEN_MINUS:{this.state=X.COMMENT_END;break}case Y.EOF:{this._err(we.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=X.COMMENT,this._stateComment(t)}}_stateCommentEnd(t){const n=this.currentToken;switch(t){case Y.GREATER_THAN_SIGN:{this.state=X.DATA,this.emitCurrentComment(n);break}case Y.EXCLAMATION_MARK:{this.state=X.COMMENT_END_BANG;break}case Y.HYPHEN_MINUS:{n.data+="-";break}case Y.EOF:{this._err(we.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--",this.state=X.COMMENT,this._stateComment(t)}}_stateCommentEndBang(t){const n=this.currentToken;switch(t){case Y.HYPHEN_MINUS:{n.data+="--!",this.state=X.COMMENT_END_DASH;break}case Y.GREATER_THAN_SIGN:{this._err(we.incorrectlyClosedComment),this.state=X.DATA,this.emitCurrentComment(n);break}case Y.EOF:{this._err(we.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--!",this.state=X.COMMENT,this._stateComment(t)}}_stateDoctype(t){switch(t){case Y.SPACE:case Y.LINE_FEED:case Y.TABULATION:case Y.FORM_FEED:{this.state=X.BEFORE_DOCTYPE_NAME;break}case Y.GREATER_THAN_SIGN:{this.state=X.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t);break}case Y.EOF:{this._err(we.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(we.missingWhitespaceBeforeDoctypeName),this.state=X.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t)}}_stateBeforeDoctypeName(t){if(US(t))this._createDoctypeToken(String.fromCharCode(oP(t))),this.state=X.DOCTYPE_NAME;else switch(t){case Y.SPACE:case Y.LINE_FEED:case Y.TABULATION:case Y.FORM_FEED:break;case Y.NULL:{this._err(we.unexpectedNullCharacter),this._createDoctypeToken(ai),this.state=X.DOCTYPE_NAME;break}case Y.GREATER_THAN_SIGN:{this._err(we.missingDoctypeName),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=X.DATA;break}case Y.EOF:{this._err(we.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(t)),this.state=X.DOCTYPE_NAME}}_stateDoctypeName(t){const n=this.currentToken;switch(t){case Y.SPACE:case Y.LINE_FEED:case Y.TABULATION:case Y.FORM_FEED:{this.state=X.AFTER_DOCTYPE_NAME;break}case Y.GREATER_THAN_SIGN:{this.state=X.DATA,this.emitCurrentDoctype(n);break}case Y.NULL:{this._err(we.unexpectedNullCharacter),n.name+=ai;break}case Y.EOF:{this._err(we.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.name+=String.fromCodePoint(US(t)?oP(t):t)}}_stateAfterDoctypeName(t){const n=this.currentToken;switch(t){case Y.SPACE:case Y.LINE_FEED:case Y.TABULATION:case Y.FORM_FEED:break;case Y.GREATER_THAN_SIGN:{this.state=X.DATA,this.emitCurrentDoctype(n);break}case Y.EOF:{this._err(we.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(ja.PUBLIC,!1)?this.state=X.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(ja.SYSTEM,!1)?this.state=X.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(we.invalidCharacterSequenceAfterDoctypeName),n.forceQuirks=!0,this.state=X.BOGUS_DOCTYPE,this._stateBogusDoctype(t))}}_stateAfterDoctypePublicKeyword(t){const n=this.currentToken;switch(t){case Y.SPACE:case Y.LINE_FEED:case Y.TABULATION:case Y.FORM_FEED:{this.state=X.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case Y.QUOTATION_MARK:{this._err(we.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=X.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case Y.APOSTROPHE:{this._err(we.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=X.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case Y.GREATER_THAN_SIGN:{this._err(we.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=X.DATA,this.emitCurrentDoctype(n);break}case Y.EOF:{this._err(we.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(we.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=X.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case Y.SPACE:case Y.LINE_FEED:case Y.TABULATION:case Y.FORM_FEED:break;case Y.QUOTATION_MARK:{n.publicId="",this.state=X.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case Y.APOSTROPHE:{n.publicId="",this.state=X.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case Y.GREATER_THAN_SIGN:{this._err(we.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=X.DATA,this.emitCurrentDoctype(n);break}case Y.EOF:{this._err(we.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(we.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=X.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypePublicIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case Y.QUOTATION_MARK:{this.state=X.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case Y.NULL:{this._err(we.unexpectedNullCharacter),n.publicId+=ai;break}case Y.GREATER_THAN_SIGN:{this._err(we.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=X.DATA;break}case Y.EOF:{this._err(we.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateDoctypePublicIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case Y.APOSTROPHE:{this.state=X.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case Y.NULL:{this._err(we.unexpectedNullCharacter),n.publicId+=ai;break}case Y.GREATER_THAN_SIGN:{this._err(we.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=X.DATA;break}case Y.EOF:{this._err(we.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateAfterDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case Y.SPACE:case Y.LINE_FEED:case Y.TABULATION:case Y.FORM_FEED:{this.state=X.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case Y.GREATER_THAN_SIGN:{this.state=X.DATA,this.emitCurrentDoctype(n);break}case Y.QUOTATION_MARK:{this._err(we.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=X.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case Y.APOSTROPHE:{this._err(we.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=X.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case Y.EOF:{this._err(we.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(we.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=X.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBetweenDoctypePublicAndSystemIdentifiers(t){const n=this.currentToken;switch(t){case Y.SPACE:case Y.LINE_FEED:case Y.TABULATION:case Y.FORM_FEED:break;case Y.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=X.DATA;break}case Y.QUOTATION_MARK:{n.systemId="",this.state=X.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case Y.APOSTROPHE:{n.systemId="",this.state=X.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case Y.EOF:{this._err(we.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(we.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=X.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateAfterDoctypeSystemKeyword(t){const n=this.currentToken;switch(t){case Y.SPACE:case Y.LINE_FEED:case Y.TABULATION:case Y.FORM_FEED:{this.state=X.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case Y.QUOTATION_MARK:{this._err(we.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=X.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case Y.APOSTROPHE:{this._err(we.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=X.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case Y.GREATER_THAN_SIGN:{this._err(we.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=X.DATA,this.emitCurrentDoctype(n);break}case Y.EOF:{this._err(we.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(we.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=X.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case Y.SPACE:case Y.LINE_FEED:case Y.TABULATION:case Y.FORM_FEED:break;case Y.QUOTATION_MARK:{n.systemId="",this.state=X.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case Y.APOSTROPHE:{n.systemId="",this.state=X.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case Y.GREATER_THAN_SIGN:{this._err(we.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=X.DATA,this.emitCurrentDoctype(n);break}case Y.EOF:{this._err(we.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(we.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=X.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypeSystemIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case Y.QUOTATION_MARK:{this.state=X.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case Y.NULL:{this._err(we.unexpectedNullCharacter),n.systemId+=ai;break}case Y.GREATER_THAN_SIGN:{this._err(we.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=X.DATA;break}case Y.EOF:{this._err(we.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateDoctypeSystemIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case Y.APOSTROPHE:{this.state=X.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case Y.NULL:{this._err(we.unexpectedNullCharacter),n.systemId+=ai;break}case Y.GREATER_THAN_SIGN:{this._err(we.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=X.DATA;break}case Y.EOF:{this._err(we.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateAfterDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case Y.SPACE:case Y.LINE_FEED:case Y.TABULATION:case Y.FORM_FEED:break;case Y.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=X.DATA;break}case Y.EOF:{this._err(we.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(we.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=X.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBogusDoctype(t){const n=this.currentToken;switch(t){case Y.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=X.DATA;break}case Y.NULL:{this._err(we.unexpectedNullCharacter);break}case Y.EOF:{this.emitCurrentDoctype(n),this._emitEOFToken();break}}}_stateCdataSection(t){switch(t){case Y.RIGHT_SQUARE_BRACKET:{this.state=X.CDATA_SECTION_BRACKET;break}case Y.EOF:{this._err(we.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateCdataSectionBracket(t){t===Y.RIGHT_SQUARE_BRACKET?this.state=X.CDATA_SECTION_END:(this._emitChars("]"),this.state=X.CDATA_SECTION,this._stateCdataSection(t))}_stateCdataSectionEnd(t){switch(t){case Y.GREATER_THAN_SIGN:{this.state=X.DATA;break}case Y.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=X.CDATA_SECTION,this._stateCdataSection(t)}}_stateCharacterReference(t){t===Y.NUMBER_SIGN?this.state=X.NUMERIC_CHARACTER_REFERENCE:mU(t)?(this.state=X.NAMED_CHARACTER_REFERENCE,this._stateNamedCharacterReference(t)):(this._flushCodePointConsumedAsCharacterReference(Y.AMPERSAND),this._reconsumeInState(this.returnState,t))}_stateNamedCharacterReference(t){const n=this._matchNamedCharacterReference(t);if(!this._ensureHibernation())if(n){for(let r=0;r<n.length;r++)this._flushCodePointConsumedAsCharacterReference(n[r]);this.state=this.returnState}else this._flushCodePointConsumedAsCharacterReference(Y.AMPERSAND),this.state=X.AMBIGUOUS_AMPERSAND}_stateAmbiguousAmpersand(t){mU(t)?this._flushCodePointConsumedAsCharacterReference(t):(t===Y.SEMICOLON&&this._err(we.unknownNamedCharacterReference),this._reconsumeInState(this.returnState,t))}_stateNumericCharacterReference(t){this.charRefCode=0,t===Y.LATIN_SMALL_X||t===Y.LATIN_CAPITAL_X?this.state=X.HEXADEMICAL_CHARACTER_REFERENCE_START:zT(t)?(this.state=X.DECIMAL_CHARACTER_REFERENCE,this._stateDecimalCharacterReference(t)):(this._err(we.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(Y.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(Y.NUMBER_SIGN),this._reconsumeInState(this.returnState,t))}_stateHexademicalCharacterReferenceStart(t){Ayt(t)?(this.state=X.HEXADEMICAL_CHARACTER_REFERENCE,this._stateHexademicalCharacterReference(t)):(this._err(we.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(Y.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(Y.NUMBER_SIGN),this._unconsume(2),this.state=this.returnState)}_stateHexademicalCharacterReference(t){zIe(t)?this.charRefCode=this.charRefCode*16+t-55:UIe(t)?this.charRefCode=this.charRefCode*16+t-87:zT(t)?this.charRefCode=this.charRefCode*16+t-48:t===Y.SEMICOLON?this.state=X.NUMERIC_CHARACTER_REFERENCE_END:(this._err(we.missingSemicolonAfterCharacterReference),this.state=X.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateDecimalCharacterReference(t){zT(t)?this.charRefCode=this.charRefCode*10+t-48:t===Y.SEMICOLON?this.state=X.NUMERIC_CHARACTER_REFERENCE_END:(this._err(we.missingSemicolonAfterCharacterReference),this.state=X.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateNumericCharacterReferenceEnd(t){if(this.charRefCode===Y.NULL)this._err(we.nullCharacterReference),this.charRefCode=Y.REPLACEMENT_CHARACTER;else if(this.charRefCode>1114111)this._err(we.characterReferenceOutsideUnicodeRange),this.charRefCode=Y.REPLACEMENT_CHARACTER;else if(NIe(this.charRefCode))this._err(we.surrogateCharacterReference),this.charRefCode=Y.REPLACEMENT_CHARACTER;else if(LIe(this.charRefCode))this._err(we.noncharacterCharacterReference);else if(DIe(this.charRefCode)||this.charRefCode===Y.CARRIAGE_RETURN){this._err(we.controlCharacterReference);const n=Syt.get(this.charRefCode);n!==void 0&&(this.charRefCode=n)}this._flushCodePointConsumedAsCharacterReference(this.charRefCode),this._reconsumeInState(this.returnState,t)}}const HIe=new Set([T.DD,T.DT,T.LI,T.OPTGROUP,T.OPTION,T.P,T.RB,T.RP,T.RT,T.RTC]),Pfe=new Set([...HIe,T.CAPTION,T.COLGROUP,T.TBODY,T.TD,T.TFOOT,T.TH,T.THEAD,T.TR]),aP=new Map([[T.APPLET,Ae.HTML],[T.CAPTION,Ae.HTML],[T.HTML,Ae.HTML],[T.MARQUEE,Ae.HTML],[T.OBJECT,Ae.HTML],[T.TABLE,Ae.HTML],[T.TD,Ae.HTML],[T.TEMPLATE,Ae.HTML],[T.TH,Ae.HTML],[T.ANNOTATION_XML,Ae.MATHML],[T.MI,Ae.MATHML],[T.MN,Ae.MATHML],[T.MO,Ae.MATHML],[T.MS,Ae.MATHML],[T.MTEXT,Ae.MATHML],[T.DESC,Ae.SVG],[T.FOREIGN_OBJECT,Ae.SVG],[T.TITLE,Ae.SVG]]),Oyt=[T.H1,T.H2,T.H3,T.H4,T.H5,T.H6],Pyt=[T.TR,T.TEMPLATE,T.HTML],kyt=[T.TBODY,T.TFOOT,T.THEAD,T.TEMPLATE,T.HTML],$yt=[T.TABLE,T.TEMPLATE,T.HTML],Ryt=[T.TD,T.TH];class Nyt{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(t,n,r){this.treeAdapter=n,this.handler=r,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=T.UNKNOWN,this.current=t}_indexOf(t){return this.items.lastIndexOf(t,this.stackTop)}_isInTemplate(){return this.currentTagId===T.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===Ae.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(t,n){this.stackTop++,this.items[this.stackTop]=t,this.current=t,this.tagIDs[this.stackTop]=n,this.currentTagId=n,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(t,n,!0)}pop(){const t=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!0)}replace(t,n){const r=this._indexOf(t);this.items[r]=n,r===this.stackTop&&(this.current=n)}insertAfter(t,n,r){const i=this._indexOf(t)+1;this.items.splice(i,0,n),this.tagIDs.splice(i,0,r),this.stackTop++,i===this.stackTop&&this._updateCurrentElement(),this.handler.onItemPush(this.current,this.currentTagId,i===this.stackTop)}popUntilTagNamePopped(t){let n=this.stackTop+1;do n=this.tagIDs.lastIndexOf(t,n-1);while(n>0&&this.treeAdapter.getNamespaceURI(this.items[n])!==Ae.HTML);this.shortenToLength(n<0?0:n)}shortenToLength(t){for(;this.stackTop>=t;){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,this.stackTop<t)}}popUntilElementPopped(t){const n=this._indexOf(t);this.shortenToLength(n<0?0:n)}popUntilPopped(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r<0?0:r)}popUntilNumberedHeaderPopped(){this.popUntilPopped(Oyt,Ae.HTML)}popUntilTableCellPopped(){this.popUntilPopped(Ryt,Ae.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(t,n){for(let r=this.stackTop;r>=0;r--)if(t.includes(this.tagIDs[r])&&this.treeAdapter.getNamespaceURI(this.items[r])===n)return r;return-1}clearBackTo(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r+1)}clearBackToTableContext(){this.clearBackTo($yt,Ae.HTML)}clearBackToTableBodyContext(){this.clearBackTo(kyt,Ae.HTML)}clearBackToTableRowContext(){this.clearBackTo(Pyt,Ae.HTML)}remove(t){const n=this._indexOf(t);n>=0&&(n===this.stackTop?this.pop():(this.items.splice(n,1),this.tagIDs.splice(n,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===T.BODY?this.items[1]:null}contains(t){return this._indexOf(t)>-1}getCommonAncestor(t){const n=this._indexOf(t)-1;return n>=0?this.items[n]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===T.HTML}hasInScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Ae.HTML)return!0;if(aP.get(r)===i)return!1}return!0}hasNumberedHeaderInScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t],r=this.treeAdapter.getNamespaceURI(this.items[t]);if(jIe(n)&&r===Ae.HTML)return!0;if(aP.get(n)===r)return!1}return!0}hasInListItemScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Ae.HTML)return!0;if((r===T.UL||r===T.OL)&&i===Ae.HTML||aP.get(r)===i)return!1}return!0}hasInButtonScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Ae.HTML)return!0;if(r===T.BUTTON&&i===Ae.HTML||aP.get(r)===i)return!1}return!0}hasInTableScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===Ae.HTML){if(r===t)return!0;if(r===T.TABLE||r===T.TEMPLATE||r===T.HTML)return!1}}return!0}hasTableBodyContextInTableScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t];if(this.treeAdapter.getNamespaceURI(this.items[t])===Ae.HTML){if(n===T.TBODY||n===T.THEAD||n===T.TFOOT)return!0;if(n===T.TABLE||n===T.HTML)return!1}}return!0}hasInSelectScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===Ae.HTML){if(r===t)return!0;if(r!==T.OPTION&&r!==T.OPTGROUP)return!1}}return!0}generateImpliedEndTags(){for(;HIe.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;Pfe.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(t){for(;this.currentTagId!==t&&Pfe.has(this.currentTagId);)this.pop()}}const z9=3;var Fc;(function(e){e[e.Marker=0]="Marker",e[e.Element=1]="Element"})(Fc=Fc||(Fc={}));const kfe={type:Fc.Marker};class Dyt{constructor(t){this.treeAdapter=t,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(t,n){const r=[],i=n.length,s=this.treeAdapter.getTagName(t),o=this.treeAdapter.getNamespaceURI(t);for(let a=0;a<this.entries.length;a++){const u=this.entries[a];if(u.type===Fc.Marker)break;const{element:l}=u;if(this.treeAdapter.getTagName(l)===s&&this.treeAdapter.getNamespaceURI(l)===o){const c=this.treeAdapter.getAttrList(l);c.length===i&&r.push({idx:a,attrs:c})}}return r}_ensureNoahArkCondition(t){if(this.entries.length<z9)return;const n=this.treeAdapter.getAttrList(t),r=this._getNoahArkConditionCandidates(t,n);if(r.length<z9)return;const i=new Map(n.map(o=>[o.name,o.value]));let s=0;for(let o=0;o<r.length;o++){const a=r[o];a.attrs.every(u=>i.get(u.name)===u.value)&&(s+=1,s>=z9&&this.entries.splice(a.idx,1))}}insertMarker(){this.entries.unshift(kfe)}pushElement(t,n){this._ensureNoahArkCondition(t),this.entries.unshift({type:Fc.Element,element:t,token:n})}insertElementAfterBookmark(t,n){const r=this.entries.indexOf(this.bookmark);this.entries.splice(r,0,{type:Fc.Element,element:t,token:n})}removeEntry(t){const n=this.entries.indexOf(t);n>=0&&this.entries.splice(n,1)}clearToLastMarker(){const t=this.entries.indexOf(kfe);t>=0?this.entries.splice(0,t+1):this.entries.length=0}getElementEntryInScopeWithTagName(t){const n=this.entries.find(r=>r.type===Fc.Marker||this.treeAdapter.getTagName(r.element)===t);return n&&n.type===Fc.Element?n:null}getElementEntry(t){return this.entries.find(n=>n.type===Fc.Element&&n.element===t)}}function $fe(e){return{nodeName:"#text",value:e,parentNode:null}}const I_={createDocument(){return{nodeName:"#document",mode:ju.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(e,t,n){return{nodeName:e,tagName:e,attrs:n,namespaceURI:t,childNodes:[],parentNode:null}},createCommentNode(e){return{nodeName:"#comment",data:e,parentNode:null}},appendChild(e,t){e.childNodes.push(t),t.parentNode=e},insertBefore(e,t,n){const r=e.childNodes.indexOf(n);e.childNodes.splice(r,0,t),t.parentNode=e},setTemplateContent(e,t){e.content=t},getTemplateContent(e){return e.content},setDocumentType(e,t,n,r){const i=e.childNodes.find(s=>s.nodeName==="#documentType");if(i)i.name=t,i.publicId=n,i.systemId=r;else{const s={nodeName:"#documentType",name:t,publicId:n,systemId:r,parentNode:null};I_.appendChild(e,s)}},setDocumentMode(e,t){e.mode=t},getDocumentMode(e){return e.mode},detachNode(e){if(e.parentNode){const t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}},insertText(e,t){if(e.childNodes.length>0){const n=e.childNodes[e.childNodes.length-1];if(I_.isTextNode(n)){n.value+=t;return}}I_.appendChild(e,$fe(t))},insertTextBefore(e,t,n){const r=e.childNodes[e.childNodes.indexOf(n)-1];r&&I_.isTextNode(r)?r.value+=t:I_.insertBefore(e,$fe(t),n)},adoptAttributes(e,t){const n=new Set(e.attrs.map(r=>r.name));for(let r=0;r<t.length;r++)n.has(t[r].name)||e.attrs.push(t[r])},getFirstChild(e){return e.childNodes[0]},getChildNodes(e){return e.childNodes},getParentNode(e){return e.parentNode},getAttrList(e){return e.attrs},getTagName(e){return e.tagName},getNamespaceURI(e){return e.namespaceURI},getTextNodeContent(e){return e.value},getCommentNodeContent(e){return e.data},getDocumentTypeNodeName(e){return e.name},getDocumentTypeNodePublicId(e){return e.publicId},getDocumentTypeNodeSystemId(e){return e.systemId},isTextNode(e){return e.nodeName==="#text"},isCommentNode(e){return e.nodeName==="#comment"},isDocumentTypeNode(e){return e.nodeName==="#documentType"},isElementNode(e){return Object.prototype.hasOwnProperty.call(e,"tagName")},setNodeSourceCodeLocation(e,t){e.sourceCodeLocation=t},getNodeSourceCodeLocation(e){return e.sourceCodeLocation},updateNodeSourceCodeLocation(e,t){e.sourceCodeLocation={...e.sourceCodeLocation,...t}}},qIe="html",Lyt="about:legacy-compat",Myt="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",WIe=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],Fyt=[...WIe,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],Byt=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),GIe=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],jyt=[...GIe,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function Rfe(e,t){return t.some(n=>e.startsWith(n))}function zyt(e){return e.name===qIe&&e.publicId===null&&(e.systemId===null||e.systemId===Lyt)}function Uyt(e){if(e.name!==qIe)return ju.QUIRKS;const{systemId:t}=e;if(t&&t.toLowerCase()===Myt)return ju.QUIRKS;let{publicId:n}=e;if(n!==null){if(n=n.toLowerCase(),Byt.has(n))return ju.QUIRKS;let r=t===null?Fyt:WIe;if(Rfe(n,r))return ju.QUIRKS;if(r=t===null?GIe:jyt,Rfe(n,r))return ju.LIMITED_QUIRKS}return ju.NO_QUIRKS}const Nfe={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},Vyt="definitionurl",Hyt="definitionURL",qyt=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(e=>[e.toLowerCase(),e])),Wyt=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:Ae.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:Ae.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:Ae.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:Ae.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:Ae.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:Ae.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:Ae.XLINK}],["xml:base",{prefix:"xml",name:"base",namespace:Ae.XML}],["xml:lang",{prefix:"xml",name:"lang",namespace:Ae.XML}],["xml:space",{prefix:"xml",name:"space",namespace:Ae.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:Ae.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:Ae.XMLNS}]]),Gyt=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(e=>[e.toLowerCase(),e])),Yyt=new Set([T.B,T.BIG,T.BLOCKQUOTE,T.BODY,T.BR,T.CENTER,T.CODE,T.DD,T.DIV,T.DL,T.DT,T.EM,T.EMBED,T.H1,T.H2,T.H3,T.H4,T.H5,T.H6,T.HEAD,T.HR,T.I,T.IMG,T.LI,T.LISTING,T.MENU,T.META,T.NOBR,T.OL,T.P,T.PRE,T.RUBY,T.S,T.SMALL,T.SPAN,T.STRONG,T.STRIKE,T.SUB,T.SUP,T.TABLE,T.TT,T.U,T.UL,T.VAR]);function Kyt(e){const t=e.tagID;return t===T.FONT&&e.attrs.some(({name:r})=>r===bg.COLOR||r===bg.SIZE||r===bg.FACE)||Yyt.has(t)}function YIe(e){for(let t=0;t<e.attrs.length;t++)if(e.attrs[t].name===Vyt){e.attrs[t].name=Hyt;break}}function KIe(e){for(let t=0;t<e.attrs.length;t++){const n=qyt.get(e.attrs[t].name);n!=null&&(e.attrs[t].name=n)}}function IY(e){for(let t=0;t<e.attrs.length;t++){const n=Wyt.get(e.attrs[t].name);n&&(e.attrs[t].prefix=n.prefix,e.attrs[t].name=n.name,e.attrs[t].namespace=n.namespace)}}function Xyt(e){const t=Gyt.get(e.tagName);t!=null&&(e.tagName=t,e.tagID=OE(e.tagName))}function Qyt(e,t){return t===Ae.MATHML&&(e===T.MI||e===T.MO||e===T.MN||e===T.MS||e===T.MTEXT)}function Jyt(e,t,n){if(t===Ae.MATHML&&e===T.ANNOTATION_XML){for(let r=0;r<n.length;r++)if(n[r].name===bg.ENCODING){const i=n[r].value.toLowerCase();return i===Nfe.TEXT_HTML||i===Nfe.APPLICATION_XML}}return t===Ae.SVG&&(e===T.FOREIGN_OBJECT||e===T.DESC||e===T.TITLE)}function Zyt(e,t,n,r){return(!r||r===Ae.HTML)&&Jyt(e,t,n)||(!r||r===Ae.MATHML)&&Qyt(e,t)}const e1t="hidden",t1t=8,n1t=3;var ee;(function(e){e[e.INITIAL=0]="INITIAL",e[e.BEFORE_HTML=1]="BEFORE_HTML",e[e.BEFORE_HEAD=2]="BEFORE_HEAD",e[e.IN_HEAD=3]="IN_HEAD",e[e.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",e[e.AFTER_HEAD=5]="AFTER_HEAD",e[e.IN_BODY=6]="IN_BODY",e[e.TEXT=7]="TEXT",e[e.IN_TABLE=8]="IN_TABLE",e[e.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",e[e.IN_CAPTION=10]="IN_CAPTION",e[e.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",e[e.IN_TABLE_BODY=12]="IN_TABLE_BODY",e[e.IN_ROW=13]="IN_ROW",e[e.IN_CELL=14]="IN_CELL",e[e.IN_SELECT=15]="IN_SELECT",e[e.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",e[e.IN_TEMPLATE=17]="IN_TEMPLATE",e[e.AFTER_BODY=18]="AFTER_BODY",e[e.IN_FRAMESET=19]="IN_FRAMESET",e[e.AFTER_FRAMESET=20]="AFTER_FRAMESET",e[e.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",e[e.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(ee||(ee={}));const r1t={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},XIe=new Set([T.TABLE,T.TBODY,T.TFOOT,T.THEAD,T.TR]),Dfe={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:I_,onParseError:null};let Lfe=class{constructor(t,n,r=null,i=null){this.fragmentContext=r,this.scriptHandler=i,this.currentToken=null,this.stopped=!1,this.insertionMode=ee.INITIAL,this.originalInsertionMode=ee.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...Dfe,...t},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=n??this.treeAdapter.createDocument(),this.tokenizer=new Iyt(this.options,this),this.activeFormattingElements=new Dyt(this.treeAdapter),this.fragmentContextID=r?OE(this.treeAdapter.getTagName(r)):T.UNKNOWN,this._setContextModes(r??this.document,this.fragmentContextID),this.openElements=new Nyt(this.document,this.treeAdapter,this)}static parse(t,n){const r=new this(n);return r.tokenizer.write(t,!0),r.document}static getFragmentParser(t,n){const r={...Dfe,...n};t??(t=r.treeAdapter.createElement(me.TEMPLATE,Ae.HTML,[]));const i=r.treeAdapter.createElement("documentmock",Ae.HTML,[]),s=new this(r,i,t);return s.fragmentContextID===T.TEMPLATE&&s.tmplInsertionModeStack.unshift(ee.IN_TEMPLATE),s._initTokenizerForFragmentParsing(),s._insertFakeRootElement(),s._resetInsertionMode(),s._findFormInFragmentContext(),s}getFragment(){const t=this.treeAdapter.getFirstChild(this.document),n=this.treeAdapter.createDocumentFragment();return this._adoptNodes(t,n),n}_err(t,n,r){var i;if(!this.onParseError)return;const s=(i=t.location)!==null&&i!==void 0?i:r1t,o={code:n,startLine:s.startLine,startCol:s.startCol,startOffset:s.startOffset,endLine:r?s.startLine:s.endLine,endCol:r?s.startCol:s.endCol,endOffset:r?s.startOffset:s.endOffset};this.onParseError(o)}onItemPush(t,n,r){var i,s;(s=(i=this.treeAdapter).onItemPush)===null||s===void 0||s.call(i,t),r&&this.openElements.stackTop>0&&this._setContextModes(t,n)}onItemPop(t,n){var r,i;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(t,this.currentToken),(i=(r=this.treeAdapter).onItemPop)===null||i===void 0||i.call(r,t,this.openElements.current),n){let s,o;this.openElements.stackTop===0&&this.fragmentContext?(s=this.fragmentContext,o=this.fragmentContextID):{current:s,currentTagId:o}=this.openElements,this._setContextModes(s,o)}}_setContextModes(t,n){const r=t===this.document||this.treeAdapter.getNamespaceURI(t)===Ae.HTML;this.currentNotInHTML=!r,this.tokenizer.inForeignNode=!r&&!this._isIntegrationPoint(n,t)}_switchToTextParsing(t,n){this._insertElement(t,Ae.HTML),this.tokenizer.state=n,this.originalInsertionMode=this.insertionMode,this.insertionMode=ee.TEXT}switchToPlaintextParsing(){this.insertionMode=ee.TEXT,this.originalInsertionMode=ee.IN_BODY,this.tokenizer.state=Hi.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let t=this.fragmentContext;for(;t;){if(this.treeAdapter.getTagName(t)===me.FORM){this.formElement=t;break}t=this.treeAdapter.getParentNode(t)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==Ae.HTML))switch(this.fragmentContextID){case T.TITLE:case T.TEXTAREA:{this.tokenizer.state=Hi.RCDATA;break}case T.STYLE:case T.XMP:case T.IFRAME:case T.NOEMBED:case T.NOFRAMES:case T.NOSCRIPT:{this.tokenizer.state=Hi.RAWTEXT;break}case T.SCRIPT:{this.tokenizer.state=Hi.SCRIPT_DATA;break}case T.PLAINTEXT:{this.tokenizer.state=Hi.PLAINTEXT;break}}}_setDocumentType(t){const n=t.name||"",r=t.publicId||"",i=t.systemId||"";if(this.treeAdapter.setDocumentType(this.document,n,r,i),t.location){const o=this.treeAdapter.getChildNodes(this.document).find(a=>this.treeAdapter.isDocumentTypeNode(a));o&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}}_attachElementToTree(t,n){if(this.options.sourceCodeLocationInfo){const r=n&&{...n,startTag:n};this.treeAdapter.setNodeSourceCodeLocation(t,r)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(t);else{const r=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(r,t)}}_appendElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location)}_insertElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location),this.openElements.push(r,t.tagID)}_insertFakeElement(t,n){const r=this.treeAdapter.createElement(t,Ae.HTML,[]);this._attachElementToTree(r,null),this.openElements.push(r,n)}_insertTemplate(t){const n=this.treeAdapter.createElement(t.tagName,Ae.HTML,t.attrs),r=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(n,r),this._attachElementToTree(n,t.location),this.openElements.push(n,t.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,null)}_insertFakeRootElement(){const t=this.treeAdapter.createElement(me.HTML,Ae.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(t,null),this.treeAdapter.appendChild(this.openElements.current,t),this.openElements.push(t,T.HTML)}_appendCommentNode(t,n){const r=this.treeAdapter.createCommentNode(t.data);this.treeAdapter.appendChild(n,r),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,t.location)}_insertCharacters(t){let n,r;if(this._shouldFosterParentOnInsertion()?({parent:n,beforeElement:r}=this._findFosterParentingLocation(),r?this.treeAdapter.insertTextBefore(n,t.chars,r):this.treeAdapter.insertText(n,t.chars)):(n=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(n,t.chars)),!t.location)return;const i=this.treeAdapter.getChildNodes(n),s=r?i.lastIndexOf(r):i.length,o=i[s-1];if(this.treeAdapter.getNodeSourceCodeLocation(o)){const{endLine:u,endCol:l,endOffset:c}=t.location;this.treeAdapter.updateNodeSourceCodeLocation(o,{endLine:u,endCol:l,endOffset:c})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}_adoptNodes(t,n){for(let r=this.treeAdapter.getFirstChild(t);r;r=this.treeAdapter.getFirstChild(t))this.treeAdapter.detachNode(r),this.treeAdapter.appendChild(n,r)}_setEndLocation(t,n){if(this.treeAdapter.getNodeSourceCodeLocation(t)&&n.location){const r=n.location,i=this.treeAdapter.getTagName(t),s=n.type===En.END_TAG&&i===n.tagName?{endTag:{...r},endLine:r.endLine,endCol:r.endCol,endOffset:r.endOffset}:{endLine:r.startLine,endCol:r.startCol,endOffset:r.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(t,s)}}shouldProcessStartTagTokenInForeignContent(t){if(!this.currentNotInHTML)return!1;let n,r;return this.openElements.stackTop===0&&this.fragmentContext?(n=this.fragmentContext,r=this.fragmentContextID):{current:n,currentTagId:r}=this.openElements,t.tagID===T.SVG&&this.treeAdapter.getTagName(n)===me.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(n)===Ae.MATHML?!1:this.tokenizer.inForeignNode||(t.tagID===T.MGLYPH||t.tagID===T.MALIGNMARK)&&!this._isIntegrationPoint(r,n,Ae.HTML)}_processToken(t){switch(t.type){case En.CHARACTER:{this.onCharacter(t);break}case En.NULL_CHARACTER:{this.onNullCharacter(t);break}case En.COMMENT:{this.onComment(t);break}case En.DOCTYPE:{this.onDoctype(t);break}case En.START_TAG:{this._processStartTag(t);break}case En.END_TAG:{this.onEndTag(t);break}case En.EOF:{this.onEof(t);break}case En.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(t);break}}}_isIntegrationPoint(t,n,r){const i=this.treeAdapter.getNamespaceURI(n),s=this.treeAdapter.getAttrList(n);return Zyt(t,i,s,r)}_reconstructActiveFormattingElements(){const t=this.activeFormattingElements.entries.length;if(t){const n=this.activeFormattingElements.entries.findIndex(i=>i.type===Fc.Marker||this.openElements.contains(i.element)),r=n<0?t-1:n-1;for(let i=r;i>=0;i--){const s=this.activeFormattingElements.entries[i];this._insertElement(s.token,this.treeAdapter.getNamespaceURI(s.element)),s.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=ee.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(T.P),this.openElements.popUntilTagNamePopped(T.P)}_resetInsertionMode(){for(let t=this.openElements.stackTop;t>=0;t--)switch(t===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[t]){case T.TR:{this.insertionMode=ee.IN_ROW;return}case T.TBODY:case T.THEAD:case T.TFOOT:{this.insertionMode=ee.IN_TABLE_BODY;return}case T.CAPTION:{this.insertionMode=ee.IN_CAPTION;return}case T.COLGROUP:{this.insertionMode=ee.IN_COLUMN_GROUP;return}case T.TABLE:{this.insertionMode=ee.IN_TABLE;return}case T.BODY:{this.insertionMode=ee.IN_BODY;return}case T.FRAMESET:{this.insertionMode=ee.IN_FRAMESET;return}case T.SELECT:{this._resetInsertionModeForSelect(t);return}case T.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case T.HTML:{this.insertionMode=this.headElement?ee.AFTER_HEAD:ee.BEFORE_HEAD;return}case T.TD:case T.TH:{if(t>0){this.insertionMode=ee.IN_CELL;return}break}case T.HEAD:{if(t>0){this.insertionMode=ee.IN_HEAD;return}break}}this.insertionMode=ee.IN_BODY}_resetInsertionModeForSelect(t){if(t>0)for(let n=t-1;n>0;n--){const r=this.openElements.tagIDs[n];if(r===T.TEMPLATE)break;if(r===T.TABLE){this.insertionMode=ee.IN_SELECT_IN_TABLE;return}}this.insertionMode=ee.IN_SELECT}_isElementCausesFosterParenting(t){return XIe.has(t)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let t=this.openElements.stackTop;t>=0;t--){const n=this.openElements.items[t];switch(this.openElements.tagIDs[t]){case T.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(n)===Ae.HTML)return{parent:this.treeAdapter.getTemplateContent(n),beforeElement:null};break}case T.TABLE:{const r=this.treeAdapter.getParentNode(n);return r?{parent:r,beforeElement:n}:{parent:this.openElements.items[t-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(t){const n=this._findFosterParentingLocation();n.beforeElement?this.treeAdapter.insertBefore(n.parent,t,n.beforeElement):this.treeAdapter.appendChild(n.parent,t)}_isSpecialElement(t,n){const r=this.treeAdapter.getNamespaceURI(t);return xyt[r].has(n)}onCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){Rvt(this,t);return}switch(this.insertionMode){case ee.INITIAL:{Yx(this,t);break}case ee.BEFORE_HTML:{UT(this,t);break}case ee.BEFORE_HEAD:{VT(this,t);break}case ee.IN_HEAD:{HT(this,t);break}case ee.IN_HEAD_NO_SCRIPT:{qT(this,t);break}case ee.AFTER_HEAD:{WT(this,t);break}case ee.IN_BODY:case ee.IN_CAPTION:case ee.IN_CELL:case ee.IN_TEMPLATE:{JIe(this,t);break}case ee.TEXT:case ee.IN_SELECT:case ee.IN_SELECT_IN_TABLE:{this._insertCharacters(t);break}case ee.IN_TABLE:case ee.IN_TABLE_BODY:case ee.IN_ROW:{U9(this,t);break}case ee.IN_TABLE_TEXT:{iOe(this,t);break}case ee.IN_COLUMN_GROUP:{hD(this,t);break}case ee.AFTER_BODY:{pD(this,t);break}case ee.AFTER_AFTER_BODY:{Gk(this,t);break}}}onNullCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){$vt(this,t);return}switch(this.insertionMode){case ee.INITIAL:{Yx(this,t);break}case ee.BEFORE_HTML:{UT(this,t);break}case ee.BEFORE_HEAD:{VT(this,t);break}case ee.IN_HEAD:{HT(this,t);break}case ee.IN_HEAD_NO_SCRIPT:{qT(this,t);break}case ee.AFTER_HEAD:{WT(this,t);break}case ee.TEXT:{this._insertCharacters(t);break}case ee.IN_TABLE:case ee.IN_TABLE_BODY:case ee.IN_ROW:{U9(this,t);break}case ee.IN_COLUMN_GROUP:{hD(this,t);break}case ee.AFTER_BODY:{pD(this,t);break}case ee.AFTER_AFTER_BODY:{Gk(this,t);break}}}onComment(t){if(this.skipNextNewLine=!1,this.currentNotInHTML){gU(this,t);return}switch(this.insertionMode){case ee.INITIAL:case ee.BEFORE_HTML:case ee.BEFORE_HEAD:case ee.IN_HEAD:case ee.IN_HEAD_NO_SCRIPT:case ee.AFTER_HEAD:case ee.IN_BODY:case ee.IN_TABLE:case ee.IN_CAPTION:case ee.IN_COLUMN_GROUP:case ee.IN_TABLE_BODY:case ee.IN_ROW:case ee.IN_CELL:case ee.IN_SELECT:case ee.IN_SELECT_IN_TABLE:case ee.IN_TEMPLATE:case ee.IN_FRAMESET:case ee.AFTER_FRAMESET:{gU(this,t);break}case ee.IN_TABLE_TEXT:{Kx(this,t);break}case ee.AFTER_BODY:{c1t(this,t);break}case ee.AFTER_AFTER_BODY:case ee.AFTER_AFTER_FRAMESET:{f1t(this,t);break}}}onDoctype(t){switch(this.skipNextNewLine=!1,this.insertionMode){case ee.INITIAL:{d1t(this,t);break}case ee.BEFORE_HEAD:case ee.IN_HEAD:case ee.IN_HEAD_NO_SCRIPT:case ee.AFTER_HEAD:{this._err(t,we.misplacedDoctype);break}case ee.IN_TABLE_TEXT:{Kx(this,t);break}}}onStartTag(t){this.skipNextNewLine=!1,this.currentToken=t,this._processStartTag(t),t.selfClosing&&!t.ackSelfClosing&&this._err(t,we.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(t){this.shouldProcessStartTagTokenInForeignContent(t)?Nvt(this,t):this._startTagOutsideForeignContent(t)}_startTagOutsideForeignContent(t){switch(this.insertionMode){case ee.INITIAL:{Yx(this,t);break}case ee.BEFORE_HTML:{h1t(this,t);break}case ee.BEFORE_HEAD:{m1t(this,t);break}case ee.IN_HEAD:{bf(this,t);break}case ee.IN_HEAD_NO_SCRIPT:{v1t(this,t);break}case ee.AFTER_HEAD:{b1t(this,t);break}case ee.IN_BODY:{oa(this,t);break}case ee.IN_TABLE:{fw(this,t);break}case ee.IN_TABLE_TEXT:{Kx(this,t);break}case ee.IN_CAPTION:{gvt(this,t);break}case ee.IN_COLUMN_GROUP:{kY(this,t);break}case ee.IN_TABLE_BODY:{L6(this,t);break}case ee.IN_ROW:{M6(this,t);break}case ee.IN_CELL:{_vt(this,t);break}case ee.IN_SELECT:{aOe(this,t);break}case ee.IN_SELECT_IN_TABLE:{wvt(this,t);break}case ee.IN_TEMPLATE:{xvt(this,t);break}case ee.AFTER_BODY:{Tvt(this,t);break}case ee.IN_FRAMESET:{Avt(this,t);break}case ee.AFTER_FRAMESET:{Ivt(this,t);break}case ee.AFTER_AFTER_BODY:{Pvt(this,t);break}case ee.AFTER_AFTER_FRAMESET:{kvt(this,t);break}}}onEndTag(t){this.skipNextNewLine=!1,this.currentToken=t,this.currentNotInHTML?Dvt(this,t):this._endTagOutsideForeignContent(t)}_endTagOutsideForeignContent(t){switch(this.insertionMode){case ee.INITIAL:{Yx(this,t);break}case ee.BEFORE_HTML:{p1t(this,t);break}case ee.BEFORE_HEAD:{g1t(this,t);break}case ee.IN_HEAD:{y1t(this,t);break}case ee.IN_HEAD_NO_SCRIPT:{_1t(this,t);break}case ee.AFTER_HEAD:{w1t(this,t);break}case ee.IN_BODY:{D6(this,t);break}case ee.TEXT:{ovt(this,t);break}case ee.IN_TABLE:{iA(this,t);break}case ee.IN_TABLE_TEXT:{Kx(this,t);break}case ee.IN_CAPTION:{yvt(this,t);break}case ee.IN_COLUMN_GROUP:{vvt(this,t);break}case ee.IN_TABLE_BODY:{yU(this,t);break}case ee.IN_ROW:{oOe(this,t);break}case ee.IN_CELL:{bvt(this,t);break}case ee.IN_SELECT:{uOe(this,t);break}case ee.IN_SELECT_IN_TABLE:{Evt(this,t);break}case ee.IN_TEMPLATE:{Svt(this,t);break}case ee.AFTER_BODY:{cOe(this,t);break}case ee.IN_FRAMESET:{Cvt(this,t);break}case ee.AFTER_FRAMESET:{Ovt(this,t);break}case ee.AFTER_AFTER_BODY:{Gk(this,t);break}}}onEof(t){switch(this.insertionMode){case ee.INITIAL:{Yx(this,t);break}case ee.BEFORE_HTML:{UT(this,t);break}case ee.BEFORE_HEAD:{VT(this,t);break}case ee.IN_HEAD:{HT(this,t);break}case ee.IN_HEAD_NO_SCRIPT:{qT(this,t);break}case ee.AFTER_HEAD:{WT(this,t);break}case ee.IN_BODY:case ee.IN_TABLE:case ee.IN_CAPTION:case ee.IN_COLUMN_GROUP:case ee.IN_TABLE_BODY:case ee.IN_ROW:case ee.IN_CELL:case ee.IN_SELECT:case ee.IN_SELECT_IN_TABLE:{nOe(this,t);break}case ee.TEXT:{avt(this,t);break}case ee.IN_TABLE_TEXT:{Kx(this,t);break}case ee.IN_TEMPLATE:{lOe(this,t);break}case ee.AFTER_BODY:case ee.IN_FRAMESET:case ee.AFTER_FRAMESET:case ee.AFTER_AFTER_BODY:case ee.AFTER_AFTER_FRAMESET:{PY(this,t);break}}}onWhitespaceCharacter(t){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,t.chars.charCodeAt(0)===Y.LINE_FEED)){if(t.chars.length===1)return;t.chars=t.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(t);return}switch(this.insertionMode){case ee.IN_HEAD:case ee.IN_HEAD_NO_SCRIPT:case ee.AFTER_HEAD:case ee.TEXT:case ee.IN_COLUMN_GROUP:case ee.IN_SELECT:case ee.IN_SELECT_IN_TABLE:case ee.IN_FRAMESET:case ee.AFTER_FRAMESET:{this._insertCharacters(t);break}case ee.IN_BODY:case ee.IN_CAPTION:case ee.IN_CELL:case ee.IN_TEMPLATE:case ee.AFTER_BODY:case ee.AFTER_AFTER_BODY:case ee.AFTER_AFTER_FRAMESET:{QIe(this,t);break}case ee.IN_TABLE:case ee.IN_TABLE_BODY:case ee.IN_ROW:{U9(this,t);break}case ee.IN_TABLE_TEXT:{rOe(this,t);break}}}};function i1t(e,t){let n=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return n?e.openElements.contains(n.element)?e.openElements.hasInScope(t.tagID)||(n=null):(e.activeFormattingElements.removeEntry(n),n=null):tOe(e,t),n}function s1t(e,t){let n=null,r=e.openElements.stackTop;for(;r>=0;r--){const i=e.openElements.items[r];if(i===t.element)break;e._isSpecialElement(i,e.openElements.tagIDs[r])&&(n=i)}return n||(e.openElements.shortenToLength(r<0?0:r),e.activeFormattingElements.removeEntry(t)),n}function o1t(e,t,n){let r=t,i=e.openElements.getCommonAncestor(t);for(let s=0,o=i;o!==n;s++,o=i){i=e.openElements.getCommonAncestor(o);const a=e.activeFormattingElements.getElementEntry(o),u=a&&s>=n1t;!a||u?(u&&e.activeFormattingElements.removeEntry(a),e.openElements.remove(o)):(o=a1t(e,a),r===t&&(e.activeFormattingElements.bookmark=a),e.treeAdapter.detachNode(r),e.treeAdapter.appendChild(o,r),r=o)}return r}function a1t(e,t){const n=e.treeAdapter.getNamespaceURI(t.element),r=e.treeAdapter.createElement(t.token.tagName,n,t.token.attrs);return e.openElements.replace(t.element,r),t.element=r,r}function u1t(e,t,n){const r=e.treeAdapter.getTagName(t),i=OE(r);if(e._isElementCausesFosterParenting(i))e._fosterParentElement(n);else{const s=e.treeAdapter.getNamespaceURI(t);i===T.TEMPLATE&&s===Ae.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,n)}}function l1t(e,t,n){const r=e.treeAdapter.getNamespaceURI(n.element),{token:i}=n,s=e.treeAdapter.createElement(i.tagName,r,i.attrs);e._adoptNodes(t,s),e.treeAdapter.appendChild(t,s),e.activeFormattingElements.insertElementAfterBookmark(s,i),e.activeFormattingElements.removeEntry(n),e.openElements.remove(n.element),e.openElements.insertAfter(t,s,i.tagID)}function OY(e,t){for(let n=0;n<t1t;n++){const r=i1t(e,t);if(!r)break;const i=s1t(e,r);if(!i)break;e.activeFormattingElements.bookmark=r;const s=o1t(e,i,r.element),o=e.openElements.getCommonAncestor(r.element);e.treeAdapter.detachNode(s),o&&u1t(e,o,s),l1t(e,i,r)}}function gU(e,t){e._appendCommentNode(t,e.openElements.currentTmplContentOrNode)}function c1t(e,t){e._appendCommentNode(t,e.openElements.items[0])}function f1t(e,t){e._appendCommentNode(t,e.document)}function PY(e,t){if(e.stopped=!0,t.location){const n=e.fragmentContext?0:2;for(let r=e.openElements.stackTop;r>=n;r--)e._setEndLocation(e.openElements.items[r],t);if(!e.fragmentContext&&e.openElements.stackTop>=0){const r=e.openElements.items[0],i=e.treeAdapter.getNodeSourceCodeLocation(r);if(i&&!i.endTag&&(e._setEndLocation(r,t),e.openElements.stackTop>=1)){const s=e.openElements.items[1],o=e.treeAdapter.getNodeSourceCodeLocation(s);o&&!o.endTag&&e._setEndLocation(s,t)}}}}function d1t(e,t){e._setDocumentType(t);const n=t.forceQuirks?ju.QUIRKS:Uyt(t);zyt(t)||e._err(t,we.nonConformingDoctype),e.treeAdapter.setDocumentMode(e.document,n),e.insertionMode=ee.BEFORE_HTML}function Yx(e,t){e._err(t,we.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,ju.QUIRKS),e.insertionMode=ee.BEFORE_HTML,e._processToken(t)}function h1t(e,t){t.tagID===T.HTML?(e._insertElement(t,Ae.HTML),e.insertionMode=ee.BEFORE_HEAD):UT(e,t)}function p1t(e,t){const n=t.tagID;(n===T.HTML||n===T.HEAD||n===T.BODY||n===T.BR)&&UT(e,t)}function UT(e,t){e._insertFakeRootElement(),e.insertionMode=ee.BEFORE_HEAD,e._processToken(t)}function m1t(e,t){switch(t.tagID){case T.HTML:{oa(e,t);break}case T.HEAD:{e._insertElement(t,Ae.HTML),e.headElement=e.openElements.current,e.insertionMode=ee.IN_HEAD;break}default:VT(e,t)}}function g1t(e,t){const n=t.tagID;n===T.HEAD||n===T.BODY||n===T.HTML||n===T.BR?VT(e,t):e._err(t,we.endTagWithoutMatchingOpenElement)}function VT(e,t){e._insertFakeElement(me.HEAD,T.HEAD),e.headElement=e.openElements.current,e.insertionMode=ee.IN_HEAD,e._processToken(t)}function bf(e,t){switch(t.tagID){case T.HTML:{oa(e,t);break}case T.BASE:case T.BASEFONT:case T.BGSOUND:case T.LINK:case T.META:{e._appendElement(t,Ae.HTML),t.ackSelfClosing=!0;break}case T.TITLE:{e._switchToTextParsing(t,Hi.RCDATA);break}case T.NOSCRIPT:{e.options.scriptingEnabled?e._switchToTextParsing(t,Hi.RAWTEXT):(e._insertElement(t,Ae.HTML),e.insertionMode=ee.IN_HEAD_NO_SCRIPT);break}case T.NOFRAMES:case T.STYLE:{e._switchToTextParsing(t,Hi.RAWTEXT);break}case T.SCRIPT:{e._switchToTextParsing(t,Hi.SCRIPT_DATA);break}case T.TEMPLATE:{e._insertTemplate(t),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=ee.IN_TEMPLATE,e.tmplInsertionModeStack.unshift(ee.IN_TEMPLATE);break}case T.HEAD:{e._err(t,we.misplacedStartTagForHeadElement);break}default:HT(e,t)}}function y1t(e,t){switch(t.tagID){case T.HEAD:{e.openElements.pop(),e.insertionMode=ee.AFTER_HEAD;break}case T.BODY:case T.BR:case T.HTML:{HT(e,t);break}case T.TEMPLATE:{Tv(e,t);break}default:e._err(t,we.endTagWithoutMatchingOpenElement)}}function Tv(e,t){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==T.TEMPLATE&&e._err(t,we.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(T.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(t,we.endTagWithoutMatchingOpenElement)}function HT(e,t){e.openElements.pop(),e.insertionMode=ee.AFTER_HEAD,e._processToken(t)}function v1t(e,t){switch(t.tagID){case T.HTML:{oa(e,t);break}case T.BASEFONT:case T.BGSOUND:case T.HEAD:case T.LINK:case T.META:case T.NOFRAMES:case T.STYLE:{bf(e,t);break}case T.NOSCRIPT:{e._err(t,we.nestedNoscriptInHead);break}default:qT(e,t)}}function _1t(e,t){switch(t.tagID){case T.NOSCRIPT:{e.openElements.pop(),e.insertionMode=ee.IN_HEAD;break}case T.BR:{qT(e,t);break}default:e._err(t,we.endTagWithoutMatchingOpenElement)}}function qT(e,t){const n=t.type===En.EOF?we.openElementsLeftAfterEof:we.disallowedContentInNoscriptInHead;e._err(t,n),e.openElements.pop(),e.insertionMode=ee.IN_HEAD,e._processToken(t)}function b1t(e,t){switch(t.tagID){case T.HTML:{oa(e,t);break}case T.BODY:{e._insertElement(t,Ae.HTML),e.framesetOk=!1,e.insertionMode=ee.IN_BODY;break}case T.FRAMESET:{e._insertElement(t,Ae.HTML),e.insertionMode=ee.IN_FRAMESET;break}case T.BASE:case T.BASEFONT:case T.BGSOUND:case T.LINK:case T.META:case T.NOFRAMES:case T.SCRIPT:case T.STYLE:case T.TEMPLATE:case T.TITLE:{e._err(t,we.abandonedHeadElementChild),e.openElements.push(e.headElement,T.HEAD),bf(e,t),e.openElements.remove(e.headElement);break}case T.HEAD:{e._err(t,we.misplacedStartTagForHeadElement);break}default:WT(e,t)}}function w1t(e,t){switch(t.tagID){case T.BODY:case T.HTML:case T.BR:{WT(e,t);break}case T.TEMPLATE:{Tv(e,t);break}default:e._err(t,we.endTagWithoutMatchingOpenElement)}}function WT(e,t){e._insertFakeElement(me.BODY,T.BODY),e.insertionMode=ee.IN_BODY,N6(e,t)}function N6(e,t){switch(t.type){case En.CHARACTER:{JIe(e,t);break}case En.WHITESPACE_CHARACTER:{QIe(e,t);break}case En.COMMENT:{gU(e,t);break}case En.START_TAG:{oa(e,t);break}case En.END_TAG:{D6(e,t);break}case En.EOF:{nOe(e,t);break}}}function QIe(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function JIe(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function E1t(e,t){e.openElements.tmplCount===0&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}function x1t(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e.openElements.tmplCount===0&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(n,t.attrs))}function S1t(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&n&&(e.treeAdapter.detachNode(n),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,Ae.HTML),e.insertionMode=ee.IN_FRAMESET)}function T1t(e,t){e.openElements.hasInButtonScope(T.P)&&e._closePElement(),e._insertElement(t,Ae.HTML)}function A1t(e,t){e.openElements.hasInButtonScope(T.P)&&e._closePElement(),jIe(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(t,Ae.HTML)}function C1t(e,t){e.openElements.hasInButtonScope(T.P)&&e._closePElement(),e._insertElement(t,Ae.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}function I1t(e,t){const n=e.openElements.tmplCount>0;(!e.formElement||n)&&(e.openElements.hasInButtonScope(T.P)&&e._closePElement(),e._insertElement(t,Ae.HTML),n||(e.formElement=e.openElements.current))}function O1t(e,t){e.framesetOk=!1;const n=t.tagID;for(let r=e.openElements.stackTop;r>=0;r--){const i=e.openElements.tagIDs[r];if(n===T.LI&&i===T.LI||(n===T.DD||n===T.DT)&&(i===T.DD||i===T.DT)){e.openElements.generateImpliedEndTagsWithExclusion(i),e.openElements.popUntilTagNamePopped(i);break}if(i!==T.ADDRESS&&i!==T.DIV&&i!==T.P&&e._isSpecialElement(e.openElements.items[r],i))break}e.openElements.hasInButtonScope(T.P)&&e._closePElement(),e._insertElement(t,Ae.HTML)}function P1t(e,t){e.openElements.hasInButtonScope(T.P)&&e._closePElement(),e._insertElement(t,Ae.HTML),e.tokenizer.state=Hi.PLAINTEXT}function k1t(e,t){e.openElements.hasInScope(T.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(T.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,Ae.HTML),e.framesetOk=!1}function $1t(e,t){const n=e.activeFormattingElements.getElementEntryInScopeWithTagName(me.A);n&&(OY(e,t),e.openElements.remove(n.element),e.activeFormattingElements.removeEntry(n)),e._reconstructActiveFormattingElements(),e._insertElement(t,Ae.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function R1t(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Ae.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function N1t(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope(T.NOBR)&&(OY(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,Ae.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function D1t(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Ae.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}function L1t(e,t){e.treeAdapter.getDocumentMode(e.document)!==ju.QUIRKS&&e.openElements.hasInButtonScope(T.P)&&e._closePElement(),e._insertElement(t,Ae.HTML),e.framesetOk=!1,e.insertionMode=ee.IN_TABLE}function ZIe(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,Ae.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function eOe(e){const t=MIe(e,bg.TYPE);return t!=null&&t.toLowerCase()===e1t}function M1t(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,Ae.HTML),eOe(t)||(e.framesetOk=!1),t.ackSelfClosing=!0}function F1t(e,t){e._appendElement(t,Ae.HTML),t.ackSelfClosing=!0}function B1t(e,t){e.openElements.hasInButtonScope(T.P)&&e._closePElement(),e._appendElement(t,Ae.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function j1t(e,t){t.tagName=me.IMG,t.tagID=T.IMG,ZIe(e,t)}function z1t(e,t){e._insertElement(t,Ae.HTML),e.skipNextNewLine=!0,e.tokenizer.state=Hi.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=ee.TEXT}function U1t(e,t){e.openElements.hasInButtonScope(T.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,Hi.RAWTEXT)}function V1t(e,t){e.framesetOk=!1,e._switchToTextParsing(t,Hi.RAWTEXT)}function Mfe(e,t){e._switchToTextParsing(t,Hi.RAWTEXT)}function H1t(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Ae.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===ee.IN_TABLE||e.insertionMode===ee.IN_CAPTION||e.insertionMode===ee.IN_TABLE_BODY||e.insertionMode===ee.IN_ROW||e.insertionMode===ee.IN_CELL?ee.IN_SELECT_IN_TABLE:ee.IN_SELECT}function q1t(e,t){e.openElements.currentTagId===T.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,Ae.HTML)}function W1t(e,t){e.openElements.hasInScope(T.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,Ae.HTML)}function G1t(e,t){e.openElements.hasInScope(T.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(T.RTC),e._insertElement(t,Ae.HTML)}function Y1t(e,t){e._reconstructActiveFormattingElements(),YIe(t),IY(t),t.selfClosing?e._appendElement(t,Ae.MATHML):e._insertElement(t,Ae.MATHML),t.ackSelfClosing=!0}function K1t(e,t){e._reconstructActiveFormattingElements(),KIe(t),IY(t),t.selfClosing?e._appendElement(t,Ae.SVG):e._insertElement(t,Ae.SVG),t.ackSelfClosing=!0}function Ffe(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Ae.HTML)}function oa(e,t){switch(t.tagID){case T.I:case T.S:case T.B:case T.U:case T.EM:case T.TT:case T.BIG:case T.CODE:case T.FONT:case T.SMALL:case T.STRIKE:case T.STRONG:{R1t(e,t);break}case T.A:{$1t(e,t);break}case T.H1:case T.H2:case T.H3:case T.H4:case T.H5:case T.H6:{A1t(e,t);break}case T.P:case T.DL:case T.OL:case T.UL:case T.DIV:case T.DIR:case T.NAV:case T.MAIN:case T.MENU:case T.ASIDE:case T.CENTER:case T.FIGURE:case T.FOOTER:case T.HEADER:case T.HGROUP:case T.DIALOG:case T.DETAILS:case T.ADDRESS:case T.ARTICLE:case T.SECTION:case T.SUMMARY:case T.FIELDSET:case T.BLOCKQUOTE:case T.FIGCAPTION:{T1t(e,t);break}case T.LI:case T.DD:case T.DT:{O1t(e,t);break}case T.BR:case T.IMG:case T.WBR:case T.AREA:case T.EMBED:case T.KEYGEN:{ZIe(e,t);break}case T.HR:{B1t(e,t);break}case T.RB:case T.RTC:{W1t(e,t);break}case T.RT:case T.RP:{G1t(e,t);break}case T.PRE:case T.LISTING:{C1t(e,t);break}case T.XMP:{U1t(e,t);break}case T.SVG:{K1t(e,t);break}case T.HTML:{E1t(e,t);break}case T.BASE:case T.LINK:case T.META:case T.STYLE:case T.TITLE:case T.SCRIPT:case T.BGSOUND:case T.BASEFONT:case T.TEMPLATE:{bf(e,t);break}case T.BODY:{x1t(e,t);break}case T.FORM:{I1t(e,t);break}case T.NOBR:{N1t(e,t);break}case T.MATH:{Y1t(e,t);break}case T.TABLE:{L1t(e,t);break}case T.INPUT:{M1t(e,t);break}case T.PARAM:case T.TRACK:case T.SOURCE:{F1t(e,t);break}case T.IMAGE:{j1t(e,t);break}case T.BUTTON:{k1t(e,t);break}case T.APPLET:case T.OBJECT:case T.MARQUEE:{D1t(e,t);break}case T.IFRAME:{V1t(e,t);break}case T.SELECT:{H1t(e,t);break}case T.OPTION:case T.OPTGROUP:{q1t(e,t);break}case T.NOEMBED:{Mfe(e,t);break}case T.FRAMESET:{S1t(e,t);break}case T.TEXTAREA:{z1t(e,t);break}case T.NOSCRIPT:{e.options.scriptingEnabled?Mfe(e,t):Ffe(e,t);break}case T.PLAINTEXT:{P1t(e,t);break}case T.COL:case T.TH:case T.TD:case T.TR:case T.HEAD:case T.FRAME:case T.TBODY:case T.TFOOT:case T.THEAD:case T.CAPTION:case T.COLGROUP:break;default:Ffe(e,t)}}function X1t(e,t){if(e.openElements.hasInScope(T.BODY)&&(e.insertionMode=ee.AFTER_BODY,e.options.sourceCodeLocationInfo)){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e._setEndLocation(n,t)}}function Q1t(e,t){e.openElements.hasInScope(T.BODY)&&(e.insertionMode=ee.AFTER_BODY,cOe(e,t))}function J1t(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n))}function Z1t(e){const t=e.openElements.tmplCount>0,{formElement:n}=e;t||(e.formElement=null),(n||t)&&e.openElements.hasInScope(T.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped(T.FORM):n&&e.openElements.remove(n))}function evt(e){e.openElements.hasInButtonScope(T.P)||e._insertFakeElement(me.P,T.P),e._closePElement()}function tvt(e){e.openElements.hasInListItemScope(T.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(T.LI),e.openElements.popUntilTagNamePopped(T.LI))}function nvt(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilTagNamePopped(n))}function rvt(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}function ivt(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker())}function svt(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(me.BR,T.BR),e.openElements.pop(),e.framesetOk=!1}function tOe(e,t){const n=t.tagName,r=t.tagID;for(let i=e.openElements.stackTop;i>0;i--){const s=e.openElements.items[i],o=e.openElements.tagIDs[i];if(r===o&&(r!==T.UNKNOWN||e.treeAdapter.getTagName(s)===n)){e.openElements.generateImpliedEndTagsWithExclusion(r),e.openElements.stackTop>=i&&e.openElements.shortenToLength(i);break}if(e._isSpecialElement(s,o))break}}function D6(e,t){switch(t.tagID){case T.A:case T.B:case T.I:case T.S:case T.U:case T.EM:case T.TT:case T.BIG:case T.CODE:case T.FONT:case T.NOBR:case T.SMALL:case T.STRIKE:case T.STRONG:{OY(e,t);break}case T.P:{evt(e);break}case T.DL:case T.UL:case T.OL:case T.DIR:case T.DIV:case T.NAV:case T.PRE:case T.MAIN:case T.MENU:case T.ASIDE:case T.BUTTON:case T.CENTER:case T.FIGURE:case T.FOOTER:case T.HEADER:case T.HGROUP:case T.DIALOG:case T.ADDRESS:case T.ARTICLE:case T.DETAILS:case T.SECTION:case T.SUMMARY:case T.LISTING:case T.FIELDSET:case T.BLOCKQUOTE:case T.FIGCAPTION:{J1t(e,t);break}case T.LI:{tvt(e);break}case T.DD:case T.DT:{nvt(e,t);break}case T.H1:case T.H2:case T.H3:case T.H4:case T.H5:case T.H6:{rvt(e);break}case T.BR:{svt(e);break}case T.BODY:{X1t(e,t);break}case T.HTML:{Q1t(e,t);break}case T.FORM:{Z1t(e);break}case T.APPLET:case T.OBJECT:case T.MARQUEE:{ivt(e,t);break}case T.TEMPLATE:{Tv(e,t);break}default:tOe(e,t)}}function nOe(e,t){e.tmplInsertionModeStack.length>0?lOe(e,t):PY(e,t)}function ovt(e,t){var n;t.tagID===T.SCRIPT&&((n=e.scriptHandler)===null||n===void 0||n.call(e,e.openElements.current)),e.openElements.pop(),e.insertionMode=e.originalInsertionMode}function avt(e,t){e._err(t,we.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e.onEof(t)}function U9(e,t){if(XIe.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=ee.IN_TABLE_TEXT,t.type){case En.CHARACTER:{iOe(e,t);break}case En.WHITESPACE_CHARACTER:{rOe(e,t);break}}else GC(e,t)}function uvt(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,Ae.HTML),e.insertionMode=ee.IN_CAPTION}function lvt(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,Ae.HTML),e.insertionMode=ee.IN_COLUMN_GROUP}function cvt(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(me.COLGROUP,T.COLGROUP),e.insertionMode=ee.IN_COLUMN_GROUP,kY(e,t)}function fvt(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,Ae.HTML),e.insertionMode=ee.IN_TABLE_BODY}function dvt(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(me.TBODY,T.TBODY),e.insertionMode=ee.IN_TABLE_BODY,L6(e,t)}function hvt(e,t){e.openElements.hasInTableScope(T.TABLE)&&(e.openElements.popUntilTagNamePopped(T.TABLE),e._resetInsertionMode(),e._processStartTag(t))}function pvt(e,t){eOe(t)?e._appendElement(t,Ae.HTML):GC(e,t),t.ackSelfClosing=!0}function mvt(e,t){!e.formElement&&e.openElements.tmplCount===0&&(e._insertElement(t,Ae.HTML),e.formElement=e.openElements.current,e.openElements.pop())}function fw(e,t){switch(t.tagID){case T.TD:case T.TH:case T.TR:{dvt(e,t);break}case T.STYLE:case T.SCRIPT:case T.TEMPLATE:{bf(e,t);break}case T.COL:{cvt(e,t);break}case T.FORM:{mvt(e,t);break}case T.TABLE:{hvt(e,t);break}case T.TBODY:case T.TFOOT:case T.THEAD:{fvt(e,t);break}case T.INPUT:{pvt(e,t);break}case T.CAPTION:{uvt(e,t);break}case T.COLGROUP:{lvt(e,t);break}default:GC(e,t)}}function iA(e,t){switch(t.tagID){case T.TABLE:{e.openElements.hasInTableScope(T.TABLE)&&(e.openElements.popUntilTagNamePopped(T.TABLE),e._resetInsertionMode());break}case T.TEMPLATE:{Tv(e,t);break}case T.BODY:case T.CAPTION:case T.COL:case T.COLGROUP:case T.HTML:case T.TBODY:case T.TD:case T.TFOOT:case T.TH:case T.THEAD:case T.TR:break;default:GC(e,t)}}function GC(e,t){const n=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,N6(e,t),e.fosterParentingEnabled=n}function rOe(e,t){e.pendingCharacterTokens.push(t)}function iOe(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function Kx(e,t){let n=0;if(e.hasNonWhitespacePendingCharacterToken)for(;n<e.pendingCharacterTokens.length;n++)GC(e,e.pendingCharacterTokens[n]);else for(;n<e.pendingCharacterTokens.length;n++)e._insertCharacters(e.pendingCharacterTokens[n]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}const sOe=new Set([T.CAPTION,T.COL,T.COLGROUP,T.TBODY,T.TD,T.TFOOT,T.TH,T.THEAD,T.TR]);function gvt(e,t){const n=t.tagID;sOe.has(n)?e.openElements.hasInTableScope(T.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(T.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ee.IN_TABLE,fw(e,t)):oa(e,t)}function yvt(e,t){const n=t.tagID;switch(n){case T.CAPTION:case T.TABLE:{e.openElements.hasInTableScope(T.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(T.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ee.IN_TABLE,n===T.TABLE&&iA(e,t));break}case T.BODY:case T.COL:case T.COLGROUP:case T.HTML:case T.TBODY:case T.TD:case T.TFOOT:case T.TH:case T.THEAD:case T.TR:break;default:D6(e,t)}}function kY(e,t){switch(t.tagID){case T.HTML:{oa(e,t);break}case T.COL:{e._appendElement(t,Ae.HTML),t.ackSelfClosing=!0;break}case T.TEMPLATE:{bf(e,t);break}default:hD(e,t)}}function vvt(e,t){switch(t.tagID){case T.COLGROUP:{e.openElements.currentTagId===T.COLGROUP&&(e.openElements.pop(),e.insertionMode=ee.IN_TABLE);break}case T.TEMPLATE:{Tv(e,t);break}case T.COL:break;default:hD(e,t)}}function hD(e,t){e.openElements.currentTagId===T.COLGROUP&&(e.openElements.pop(),e.insertionMode=ee.IN_TABLE,e._processToken(t))}function L6(e,t){switch(t.tagID){case T.TR:{e.openElements.clearBackToTableBodyContext(),e._insertElement(t,Ae.HTML),e.insertionMode=ee.IN_ROW;break}case T.TH:case T.TD:{e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(me.TR,T.TR),e.insertionMode=ee.IN_ROW,M6(e,t);break}case T.CAPTION:case T.COL:case T.COLGROUP:case T.TBODY:case T.TFOOT:case T.THEAD:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ee.IN_TABLE,fw(e,t));break}default:fw(e,t)}}function yU(e,t){const n=t.tagID;switch(t.tagID){case T.TBODY:case T.TFOOT:case T.THEAD:{e.openElements.hasInTableScope(n)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ee.IN_TABLE);break}case T.TABLE:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ee.IN_TABLE,iA(e,t));break}case T.BODY:case T.CAPTION:case T.COL:case T.COLGROUP:case T.HTML:case T.TD:case T.TH:case T.TR:break;default:iA(e,t)}}function M6(e,t){switch(t.tagID){case T.TH:case T.TD:{e.openElements.clearBackToTableRowContext(),e._insertElement(t,Ae.HTML),e.insertionMode=ee.IN_CELL,e.activeFormattingElements.insertMarker();break}case T.CAPTION:case T.COL:case T.COLGROUP:case T.TBODY:case T.TFOOT:case T.THEAD:case T.TR:{e.openElements.hasInTableScope(T.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ee.IN_TABLE_BODY,L6(e,t));break}default:fw(e,t)}}function oOe(e,t){switch(t.tagID){case T.TR:{e.openElements.hasInTableScope(T.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ee.IN_TABLE_BODY);break}case T.TABLE:{e.openElements.hasInTableScope(T.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ee.IN_TABLE_BODY,yU(e,t));break}case T.TBODY:case T.TFOOT:case T.THEAD:{(e.openElements.hasInTableScope(t.tagID)||e.openElements.hasInTableScope(T.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ee.IN_TABLE_BODY,yU(e,t));break}case T.BODY:case T.CAPTION:case T.COL:case T.COLGROUP:case T.HTML:case T.TD:case T.TH:break;default:iA(e,t)}}function _vt(e,t){const n=t.tagID;sOe.has(n)?(e.openElements.hasInTableScope(T.TD)||e.openElements.hasInTableScope(T.TH))&&(e._closeTableCell(),M6(e,t)):oa(e,t)}function bvt(e,t){const n=t.tagID;switch(n){case T.TD:case T.TH:{e.openElements.hasInTableScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ee.IN_ROW);break}case T.TABLE:case T.TBODY:case T.TFOOT:case T.THEAD:case T.TR:{e.openElements.hasInTableScope(n)&&(e._closeTableCell(),oOe(e,t));break}case T.BODY:case T.CAPTION:case T.COL:case T.COLGROUP:case T.HTML:break;default:D6(e,t)}}function aOe(e,t){switch(t.tagID){case T.HTML:{oa(e,t);break}case T.OPTION:{e.openElements.currentTagId===T.OPTION&&e.openElements.pop(),e._insertElement(t,Ae.HTML);break}case T.OPTGROUP:{e.openElements.currentTagId===T.OPTION&&e.openElements.pop(),e.openElements.currentTagId===T.OPTGROUP&&e.openElements.pop(),e._insertElement(t,Ae.HTML);break}case T.INPUT:case T.KEYGEN:case T.TEXTAREA:case T.SELECT:{e.openElements.hasInSelectScope(T.SELECT)&&(e.openElements.popUntilTagNamePopped(T.SELECT),e._resetInsertionMode(),t.tagID!==T.SELECT&&e._processStartTag(t));break}case T.SCRIPT:case T.TEMPLATE:{bf(e,t);break}}}function uOe(e,t){switch(t.tagID){case T.OPTGROUP:{e.openElements.stackTop>0&&e.openElements.currentTagId===T.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===T.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===T.OPTGROUP&&e.openElements.pop();break}case T.OPTION:{e.openElements.currentTagId===T.OPTION&&e.openElements.pop();break}case T.SELECT:{e.openElements.hasInSelectScope(T.SELECT)&&(e.openElements.popUntilTagNamePopped(T.SELECT),e._resetInsertionMode());break}case T.TEMPLATE:{Tv(e,t);break}}}function wvt(e,t){const n=t.tagID;n===T.CAPTION||n===T.TABLE||n===T.TBODY||n===T.TFOOT||n===T.THEAD||n===T.TR||n===T.TD||n===T.TH?(e.openElements.popUntilTagNamePopped(T.SELECT),e._resetInsertionMode(),e._processStartTag(t)):aOe(e,t)}function Evt(e,t){const n=t.tagID;n===T.CAPTION||n===T.TABLE||n===T.TBODY||n===T.TFOOT||n===T.THEAD||n===T.TR||n===T.TD||n===T.TH?e.openElements.hasInTableScope(n)&&(e.openElements.popUntilTagNamePopped(T.SELECT),e._resetInsertionMode(),e.onEndTag(t)):uOe(e,t)}function xvt(e,t){switch(t.tagID){case T.BASE:case T.BASEFONT:case T.BGSOUND:case T.LINK:case T.META:case T.NOFRAMES:case T.SCRIPT:case T.STYLE:case T.TEMPLATE:case T.TITLE:{bf(e,t);break}case T.CAPTION:case T.COLGROUP:case T.TBODY:case T.TFOOT:case T.THEAD:{e.tmplInsertionModeStack[0]=ee.IN_TABLE,e.insertionMode=ee.IN_TABLE,fw(e,t);break}case T.COL:{e.tmplInsertionModeStack[0]=ee.IN_COLUMN_GROUP,e.insertionMode=ee.IN_COLUMN_GROUP,kY(e,t);break}case T.TR:{e.tmplInsertionModeStack[0]=ee.IN_TABLE_BODY,e.insertionMode=ee.IN_TABLE_BODY,L6(e,t);break}case T.TD:case T.TH:{e.tmplInsertionModeStack[0]=ee.IN_ROW,e.insertionMode=ee.IN_ROW,M6(e,t);break}default:e.tmplInsertionModeStack[0]=ee.IN_BODY,e.insertionMode=ee.IN_BODY,oa(e,t)}}function Svt(e,t){t.tagID===T.TEMPLATE&&Tv(e,t)}function lOe(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(T.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(t)):PY(e,t)}function Tvt(e,t){t.tagID===T.HTML?oa(e,t):pD(e,t)}function cOe(e,t){var n;if(t.tagID===T.HTML){if(e.fragmentContext||(e.insertionMode=ee.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===T.HTML){e._setEndLocation(e.openElements.items[0],t);const r=e.openElements.items[1];r&&!(!((n=e.treeAdapter.getNodeSourceCodeLocation(r))===null||n===void 0)&&n.endTag)&&e._setEndLocation(r,t)}}else pD(e,t)}function pD(e,t){e.insertionMode=ee.IN_BODY,N6(e,t)}function Avt(e,t){switch(t.tagID){case T.HTML:{oa(e,t);break}case T.FRAMESET:{e._insertElement(t,Ae.HTML);break}case T.FRAME:{e._appendElement(t,Ae.HTML),t.ackSelfClosing=!0;break}case T.NOFRAMES:{bf(e,t);break}}}function Cvt(e,t){t.tagID===T.FRAMESET&&!e.openElements.isRootHtmlElementCurrent()&&(e.openElements.pop(),!e.fragmentContext&&e.openElements.currentTagId!==T.FRAMESET&&(e.insertionMode=ee.AFTER_FRAMESET))}function Ivt(e,t){switch(t.tagID){case T.HTML:{oa(e,t);break}case T.NOFRAMES:{bf(e,t);break}}}function Ovt(e,t){t.tagID===T.HTML&&(e.insertionMode=ee.AFTER_AFTER_FRAMESET)}function Pvt(e,t){t.tagID===T.HTML?oa(e,t):Gk(e,t)}function Gk(e,t){e.insertionMode=ee.IN_BODY,N6(e,t)}function kvt(e,t){switch(t.tagID){case T.HTML:{oa(e,t);break}case T.NOFRAMES:{bf(e,t);break}}}function $vt(e,t){t.chars=ai,e._insertCharacters(t)}function Rvt(e,t){e._insertCharacters(t),e.framesetOk=!1}function fOe(e){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==Ae.HTML&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current);)e.openElements.pop()}function Nvt(e,t){if(Kyt(t))fOe(e),e._startTagOutsideForeignContent(t);else{const n=e._getAdjustedCurrentElement(),r=e.treeAdapter.getNamespaceURI(n);r===Ae.MATHML?YIe(t):r===Ae.SVG&&(Xyt(t),KIe(t)),IY(t),t.selfClosing?e._appendElement(t,r):e._insertElement(t,r),t.ackSelfClosing=!0}}function Dvt(e,t){if(t.tagID===T.P||t.tagID===T.BR){fOe(e),e._endTagOutsideForeignContent(t);return}for(let n=e.openElements.stackTop;n>0;n--){const r=e.openElements.items[n];if(e.treeAdapter.getNamespaceURI(r)===Ae.HTML){e._endTagOutsideForeignContent(t);break}const i=e.treeAdapter.getTagName(r);if(i.toLowerCase()===t.tagName){t.tagName=i,e.openElements.shortenToLength(n);break}}}me.AREA,me.BASE,me.BASEFONT,me.BGSOUND,me.BR,me.COL,me.EMBED,me.FRAME,me.HR,me.IMG,me.INPUT,me.KEYGEN,me.LINK,me.META,me.PARAM,me.SOURCE,me.TRACK,me.WBR;const dOe=hOe("end"),Av=hOe("start");function hOe(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}const pOe=function(e){if(e==null)return Bvt;if(typeof e=="function")return F6(e);if(typeof e=="object")return Array.isArray(e)?Lvt(e):Mvt(e);if(typeof e=="string")return Fvt(e);throw new Error("Expected function, string, or object as test")};function Lvt(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=pOe(e[n]);return F6(r);function r(...i){let s=-1;for(;++s<t.length;)if(t[s].apply(this,i))return!0;return!1}}function Mvt(e){const t=e;return F6(n);function n(r){const i=r;let s;for(s in e)if(i[s]!==t[s])return!1;return!0}}function Fvt(e){return F6(t);function t(n){return n&&n.type===e}}function F6(e){return t;function t(n,r,i){return!!(jvt(n)&&e.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function Bvt(){return!0}function jvt(e){return e!==null&&typeof e=="object"&&"type"in e}const mOe=[],zvt=!0,Bfe=!1,Uvt="skip";function Vvt(e,t,n,r){let i;typeof t=="function"&&typeof n!="function"?(r=n,n=t):i=t;const s=pOe(i),o=r?-1:1;a(e,void 0,[])();function a(u,l,c){const f=u&&typeof u=="object"?u:{};if(typeof f.type=="string"){const h=typeof f.tagName=="string"?f.tagName:typeof f.name=="string"?f.name:void 0;Object.defineProperty(d,"name",{value:"node ("+(u.type+(h?"<"+h+">":""))+")"})}return d;function d(){let h=mOe,p,m,g;if((!t||s(u,l,c[c.length-1]||void 0))&&(h=Hvt(n(u,c)),h[0]===Bfe))return h;if("children"in u&&u.children){const y=u;if(y.children&&h[0]!==Uvt)for(m=(r?y.children.length:-1)+o,g=c.concat(y);m>-1&&m<y.children.length;){const v=y.children[m];if(p=a(v,m,g)(),p[0]===Bfe)return p;m=typeof p[1]=="number"?p[1]:m+o}}return h}}}function Hvt(e){return Array.isArray(e)?e:typeof e=="number"?[zvt,e]:e==null?mOe:[e]}function qvt(e,t,n,r){let i,s,o;typeof t=="function"&&typeof n!="function"?(s=void 0,o=t,i=n):(s=t,o=n,i=r),Vvt(e,s,a,i);function a(u,l){const c=l[l.length-1],f=c?c.children.indexOf(u):void 0;return o(u,f,c)}}const Wvt=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),jfe={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function gOe(e,t){const n=n_t(e),r=$Ie("type",{handlers:{root:Gvt,element:Yvt,text:Kvt,comment:vOe,doctype:Xvt,raw:Jvt},unknown:Zvt}),i={parser:n?new Lfe(jfe):Lfe.getFragmentParser(void 0,jfe),handle(a){r(a,i)},stitches:!1,options:t||{}};r(e,i),PE(i,Av());const s=n?i.parser.document:i.parser.getFragment(),o=Y0t(s,{file:i.options.file});return i.stitches&&qvt(o,"comment",function(a,u,l){const c=a;if(c.value.stitch&&l&&u!==void 0){const f=l.children;return f[u]=c.value.stitch,u}}),o.type==="root"&&o.children.length===1&&o.children[0].type===e.type?o.children[0]:o}function yOe(e,t){let n=-1;if(e)for(;++n<e.length;)t.handle(e[n])}function Gvt(e,t){yOe(e.children,t)}function Yvt(e,t){e_t(e,t),yOe(e.children,t),t_t(e,t)}function Kvt(e,t){const n={type:En.CHARACTER,chars:e.value,location:YC(e)};PE(t,Av(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function Xvt(e,t){const n={type:En.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:YC(e)};PE(t,Av(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function Qvt(e,t){t.stitches=!0;const n=r_t(e);if("children"in e&&"children"in n){const r=gOe({type:"root",children:e.children},t.options);n.children=r.children}vOe({type:"comment",value:{stitch:n}},t)}function vOe(e,t){const n=e.value,r={type:En.COMMENT,data:n,location:YC(e)};PE(t,Av(e)),t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken)}function Jvt(e,t){if(t.parser.tokenizer.preprocessor.html="",t.parser.tokenizer.preprocessor.pos=-1,t.parser.tokenizer.preprocessor.lastGapPos=-2,t.parser.tokenizer.preprocessor.gapStack=[],t.parser.tokenizer.preprocessor.skipNextNewLine=!1,t.parser.tokenizer.preprocessor.lastChunkWritten=!1,t.parser.tokenizer.preprocessor.endOfChunkHit=!1,t.parser.tokenizer.preprocessor.isEol=!1,_Oe(t,Av(e)),t.parser.tokenizer.write(e.value,!1),t.parser.tokenizer._runParsingLoop(),t.parser.tokenizer.state===72||t.parser.tokenizer.state===78){t.parser.tokenizer.preprocessor.lastChunkWritten=!0;const n=t.parser.tokenizer._consume();t.parser.tokenizer._callState(n)}}function Zvt(e,t){const n=e;if(t.options.passThrough&&t.options.passThrough.includes(n.type))Qvt(n,t);else{let r="";throw Wvt.has(n.type)&&(r=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+n.type+"` node"+r)}}function PE(e,t){_Oe(e,t);const n=e.parser.tokenizer.currentCharacterToken;n&&n.location&&(n.location.endLine=e.parser.tokenizer.preprocessor.line,n.location.endCol=e.parser.tokenizer.preprocessor.col+1,n.location.endOffset=e.parser.tokenizer.preprocessor.offset+1,e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)),e.parser.tokenizer.paused=!1,e.parser.tokenizer.inLoop=!1,e.parser.tokenizer.active=!1,e.parser.tokenizer.returnState=Hi.DATA,e.parser.tokenizer.charRefCode=-1,e.parser.tokenizer.consumedAfterSnapshot=-1,e.parser.tokenizer.currentLocation=null,e.parser.tokenizer.currentCharacterToken=null,e.parser.tokenizer.currentToken=null,e.parser.tokenizer.currentAttr={name:"",value:""}}function _Oe(e,t){if(t&&t.offset!==void 0){const n={startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:-1,endCol:-1,endOffset:-1};e.parser.tokenizer.preprocessor.lineStartPos=-t.column+1,e.parser.tokenizer.preprocessor.droppedBufferSize=t.offset,e.parser.tokenizer.preprocessor.line=t.line,e.parser.tokenizer.currentLocation=n}}function e_t(e,t){if(t.parser.tokenizer.state===Hi.PLAINTEXT)return;PE(t,Av(e));const n=t.parser.openElements.current;let r="namespaceURI"in n?n.namespaceURI:zy.html;r===zy.html&&e.tagName==="svg"&&(r=zy.svg);const i=Z0t({...e,children:[]},{space:r===zy.svg?"svg":"html"}),s="attrs"in i?i.attrs:[],o={type:En.START_TAG,tagName:e.tagName,tagID:OE(e.tagName),selfClosing:!1,ackSelfClosing:!1,attrs:s,location:YC(e)};t.parser.currentToken=o,t.parser._processToken(t.parser.currentToken),t.parser.tokenizer.lastStartTagName=e.tagName}function t_t(e,t){if(!t.parser.tokenizer.inForeignNode&&ayt.includes(e.tagName)||t.parser.tokenizer.state===Hi.PLAINTEXT)return;PE(t,dOe(e));const n={type:En.END_TAG,tagName:e.tagName,tagID:OE(e.tagName),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:YC(e)};t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken),n.tagName===t.parser.tokenizer.lastStartTagName&&(t.parser.tokenizer.state===Hi.RCDATA||t.parser.tokenizer.state===Hi.RAWTEXT||t.parser.tokenizer.state===Hi.SCRIPT_DATA)&&(t.parser.tokenizer.state=Hi.DATA)}function n_t(e){const t=e.type==="root"?e.children[0]:e;return!!(t&&(t.type==="doctype"||t.type==="element"&&t.tagName==="html"))}function YC(e){const t=Av(e)||{line:void 0,column:void 0,offset:void 0},n=dOe(e)||{line:void 0,column:void 0,offset:void 0};return{startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:n.line,endCol:n.column,endOffset:n.offset}}function r_t(e){return"children"in e?Sfe({...e,children:[]}):Sfe(e)}function i_t(e){return function(t,n){return gOe(t,{...e,file:n})}}function mu({text:e}){const t={img:({node:n,...r})=>R.jsx(xE,{...r}),p:({node:n,...r})=>R.jsx(Rt,{...r,pb:8}),h1:({node:n,...r})=>R.jsx(Mc,{order:1,...r,pb:12}),h2:({node:n,...r})=>R.jsx(Mc,{order:2,...r,pb:12}),h3:({node:n,...r})=>R.jsx(Mc,{order:3,...r,pb:12}),h4:({node:n,...r})=>R.jsx(Mc,{order:4,...r,pb:12}),h5:({node:n,...r})=>R.jsx(Mc,{order:5,...r,pb:12}),h6:({node:n,...r})=>R.jsx(Mc,{order:6,...r,pb:12}),a:({node:n,...r})=>R.jsx(Mxe,{...r}),ul:({node:n,...r})=>R.jsx(lw,{withPadding:!0,...r,pb:8}),ol:({node:n,...r})=>R.jsx(lw,{type:"ordered",withPadding:!0,...r,pb:8})};return R.jsx("div",{style:{display:"inherit"},children:R.jsx(TIe,{components:t,rehypePlugins:[i_t],children:e})})}function s_t({response:e,disabled:t,answer:n}){const{prompt:r,required:i,options:s}=e;return R.jsx(yN.Group,{label:R.jsx(mu,{text:r}),withAsterisk:i,...n,error:xv(e,n,s),size:"md",children:R.jsx(Jl,{mt:"md",children:s.map(o=>R.jsx(yN,{disabled:t,value:o.value,label:o.label},o.value))})})}function o_t({response:e,disabled:t,answer:n}){const{placeholder:r,prompt:i,required:s,options:o}=e;return R.jsx(VAe,{disabled:t,label:R.jsx(mu,{text:i}),placeholder:r,data:o,withAsterisk:s,radius:"md",size:"md",...n,error:xv(e,n,o)})}function a_t({response:e,answer:t}){const{prompt:n}=e;return R.jsxs(R.Fragment,{children:[R.jsx(Rt,{fz:"md",fw:500,children:R.jsx(mu,{text:n})}),R.jsx(lw,{children:Array.isArray(t.value)&&t.value.map(r=>R.jsx(lw.Item,{children:r},r))})]})}function bOe({response:e,disabled:t,answer:n}){const{prompt:r,required:i,options:s,leftLabel:o,rightLabel:a}=e;return R.jsxs(GN.Group,{name:`radioInput${e.id}`,label:R.jsx(mu,{text:r}),withAsterisk:i,size:"md",...n,error:xv(e,n,s),children:[o?R.jsx(Rt,{children:o}):null,R.jsx(Jl,{mt:"xs",children:s.map(u=>R.jsx(GN,{disabled:t,value:u.value,label:u.label},u.label))}),R.jsx(Rt,{children:a})]},e.id)}function u_t({response:e,disabled:t,answer:n}){const{preset:r}=e,i=[];for(let o=1;o<=+r;o+=1)i.push({label:`${o}`,value:`${o}`});const s={...e,type:"radio",options:i};return R.jsx(bOe,{disabled:t,response:s,answer:n})}function l_t({response:e,disabled:t,answer:n}){const{prompt:r,required:i,min:s,max:o,placeholder:a}=e;return R.jsx(yAe,{disabled:t,placeholder:a,label:R.jsx(mu,{text:r}),withAsterisk:i,radius:"md",size:"md",min:s,max:o,...n,error:xv(e,n)})}function c_t({response:e,disabled:t,answer:n}){const{prompt:r,required:i,options:s}=e,o=xv(e,n);return R.jsx(is.Wrapper,{withAsterisk:i,label:R.jsx(mu,{text:r}),error:o,size:"md",children:R.jsx(JG,{disabled:t,labelAlwaysOn:!0,sx:{marginTop:"5px",marginBottom:"30px"},marks:s,...n,styles:a=>({mark:{width:12,height:12,borderRadius:6,transform:"translateX(-3px) translateY(-2px)"},markFilled:{borderColor:a.colors.blue[6]},markLabel:{fontSize:a.fontSizes.sm,marginBottom:5,marginTop:0},thumb:{height:24,width:24,backgroundColor:a.white,borderWidth:1,boxShadow:a.shadows.sm},label:{top:-4,height:28,lineHeight:28,width:28,padding:0,display:"flex",justifyContent:"center",alignItems:"center",fontWeight:700,color:"orange",backgroundColor:"transparent"}})})})}function f_t({response:e,disabled:t,answer:n}){const{placeholder:r,prompt:i,required:s}=e;return R.jsx(KG,{disabled:t,placeholder:r,label:R.jsx(mu,{text:i}),radius:"md",size:"md",withAsterisk:s,...n,value:n.value||"",error:xv(e,n)})}function d_t({response:e,disabled:t,answer:n}){const{placeholder:r,prompt:i,required:s}=e;return R.jsx(b2e,{disabled:t,placeholder:r,label:R.jsx(mu,{text:i}),radius:"md",size:"md",withAsterisk:s,...n,value:n.value||"",error:xv(e,n)})}function h_t({response:e,answer:t,storedAnswer:n}){const r=(n?{value:n}:t)||{value:void 0},i=!!n,[s]=pG(),o=A.useMemo(()=>{if(e.paramCapture){const a=s.get(e.paramCapture);return i||!!a}return i},[i,e.paramCapture,s]);return R.jsxs(At,{sx:{margin:10,padding:5},children:[e.type==="numerical"&&R.jsx(l_t,{response:e,disabled:o,answer:r}),e.type==="shortText"&&R.jsx(f_t,{response:e,disabled:o,answer:r}),e.type==="longText"&&R.jsx(d_t,{response:e,disabled:o,answer:r}),e.type==="likert"&&R.jsx(u_t,{response:e,disabled:o,answer:r}),e.type==="dropdown"&&R.jsx(o_t,{response:e,disabled:o,answer:r}),e.type==="slider"&&R.jsx(c_t,{response:e,disabled:o,answer:r}),e.type==="radio"&&R.jsx(bOe,{response:e,disabled:o,answer:r}),e.type==="checkbox"&&R.jsx(s_t,{response:e,disabled:o,answer:r}),e.type==="iframe"&&R.jsx(a_t,{response:e,answer:r})]})}function mD({config:e,location:t,status:n,style:r}){var y,v;const i=cc(),s=th()[i],o=n==null?void 0:n.answer,a=e,u=((y=a==null?void 0:a.response)==null?void 0:y.filter(_=>_.location?_.location===t:t==="belowStimulus"))||[],l=Kp(),{updateResponseBlockValidation:c}=Yp(),f=Tht(u,i,o||{}),[d,h]=A.useState(!1),{iframeAnswers:p}=_f(_=>_),m=(((v=a==null?void 0:a.correctAnswer)==null?void 0:v.length)||0)>0,g=t===((a==null?void 0:a.nextButtonLocation)||"belowStimulus");return A.useEffect(()=>{const _=u.find(b=>b.type==="iframe");if(_){const b=_.id;f.setValues({...f.values,[b]:p})}},[p]),A.useEffect(()=>{l(c({location:t,identifier:`${s}_${i}`,status:f.isValid(),values:u1(f.values)}))},[f.values,i,t]),R.jsxs("div",{style:r,children:[u.map(_=>{var b,E;return R.jsx(L.Fragment,{children:_.hidden?"":R.jsxs(R.Fragment,{children:[R.jsx(h_t,{storedAnswer:o?o[_.id]:void 0,answer:{...f.getInputProps(_.id,{type:_.type==="checkbox"?"checkbox":"input"})},response:_}),m&&d&&R.jsx(Rt,{children:`The correct answer is: ${(E=(b=a.correctAnswer)==null?void 0:b.find(w=>w.id===_.id))==null?void 0:E.answer}`})]})},`${_.id}-${i}`)}),R.jsxs(Jl,{position:"right",spacing:"xs",mt:"xl",children:[m&&g&&R.jsx(cu,{onClick:()=>h(!0),disabled:!f.isValid(),children:"Check Answer"}),g&&R.jsx(Qdt,{disabled:m&&!d,setCheckClicked:h,label:a.nextButtonText||"Next"})]})]})}const uP="@REVISIT_COMMS",p_t={minHeight:"500px",width:"100%",border:0,marginTop:"-50px"};function m_t({currentConfig:e}){const{setIframeAnswers:t}=Yp(),n=Kp(),r=dCe(),i=A.useRef(null),s=A.useMemo(()=>crypto.randomUUID?crypto.randomUUID():`testID-${Date.now()}`,[]),o=cc(),a=th()[o],u=vv(),l=A.useCallback((c,f)=>{var d,h;(h=(d=i.current)==null?void 0:d.contentWindow)==null||h.postMessage({error:!1,type:`${uP}/${c}`,iframeId:s,message:f},"*")},[i,s]);return A.useEffect(()=>{const c=f=>{const{data:d}=f;if(typeof d=="object"&&s===d.iframeId)switch(d.type){case`${uP}/WINDOW_READY`:e.parameters&&l("STUDY_DATA",e.parameters);break;case`${uP}/READY`:i.current&&(i.current.style.height=`${d.message.documentHeight}px`);break;case`${uP}/ANSWERS`:n(t(d.message.answer));break}};return window.addEventListener("message",c),()=>window.removeEventListener("message",c)},[n,o,r,s,u,e,l]),R.jsx("div",{children:R.jsx("iframe",{ref:i,src:`${vf}${e.path}?trialid=${a}&id=${s}`,style:p_t})})}const g_t={maxWidth:"100%"};function y_t({currentConfig:e}){const t={...g_t,...e.style};return R.jsx(xE,{mx:"auto",src:`${vf}${e.path}`,style:t})}function zfe(e,t){let n,r;if(t===void 0)for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(n===void 0?s>=s&&(n=r=s):(n>s&&(n=s),r<s&&(r=s)))}return[n,r]}class Ufe extends Map{constructor(t,n=xOe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(vU(this,t))}has(t){return super.has(vU(this,t))}set(t,n){return super.set(wOe(this,t),n)}delete(t){return super.delete(EOe(this,t))}}class gD extends Set{constructor(t,n=xOe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(vU(this,t))}add(t){return super.add(wOe(this,t))}delete(t){return super.delete(EOe(this,t))}}function vU({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function wOe({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function EOe({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function xOe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function v_t(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}var __t={value:()=>{}};function B6(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Yk(n)}function Yk(e){this._=e}function b_t(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Yk.prototype=B6.prototype={constructor:Yk,on:function(e,t){var n=this._,r=b_t(e+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(e=r[s]).type)&&(i=w_t(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(i=(e=r[s]).type)n[i]=Vfe(n[i],e.name,t);else if(t==null)for(i in n)n[i]=Vfe(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Yk(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function w_t(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function Vfe(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=__t,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var _U="http://www.w3.org/1999/xhtml";const Hfe={svg:"http://www.w3.org/2000/svg",xhtml:_U,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function j6(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Hfe.hasOwnProperty(t)?{space:Hfe[t],local:e}:e}function E_t(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===_U&&t.documentElement.namespaceURI===_U?t.createElement(e):t.createElementNS(n,e)}}function x_t(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function SOe(e){var t=j6(e);return(t.local?x_t:E_t)(t)}function S_t(){}function $Y(e){return e==null?S_t:function(){return this.querySelector(e)}}function T_t(e){typeof e!="function"&&(e=$Y(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=new Array(o),u,l,c=0;c<o;++c)(u=s[c])&&(l=e.call(u,u.__data__,c,s))&&("__data__"in u&&(l.__data__=u.__data__),a[c]=l);return new Aa(r,this._parents)}function TOe(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function A_t(){return[]}function AOe(e){return e==null?A_t:function(){return this.querySelectorAll(e)}}function C_t(e){return function(){return TOe(e.apply(this,arguments))}}function I_t(e){typeof e=="function"?e=C_t(e):e=AOe(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var o=t[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&(r.push(e.call(u,u.__data__,l,o)),i.push(u));return new Aa(r,i)}function COe(e){return function(){return this.matches(e)}}function IOe(e){return function(t){return t.matches(e)}}var O_t=Array.prototype.find;function P_t(e){return function(){return O_t.call(this.children,e)}}function k_t(){return this.firstElementChild}function $_t(e){return this.select(e==null?k_t:P_t(typeof e=="function"?e:IOe(e)))}var R_t=Array.prototype.filter;function N_t(){return Array.from(this.children)}function D_t(e){return function(){return R_t.call(this.children,e)}}function L_t(e){return this.selectAll(e==null?N_t:D_t(typeof e=="function"?e:IOe(e)))}function M_t(e){typeof e!="function"&&(e=COe(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new Aa(r,this._parents)}function OOe(e){return new Array(e.length)}function F_t(){return new Aa(this._enter||this._groups.map(OOe),this._parents)}function yD(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}yD.prototype={constructor:yD,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function B_t(e){return function(){return e}}function j_t(e,t,n,r,i,s){for(var o=0,a,u=t.length,l=s.length;o<l;++o)(a=t[o])?(a.__data__=s[o],r[o]=a):n[o]=new yD(e,s[o]);for(;o<u;++o)(a=t[o])&&(i[o]=a)}function z_t(e,t,n,r,i,s,o){var a,u,l=new Map,c=t.length,f=s.length,d=new Array(c),h;for(a=0;a<c;++a)(u=t[a])&&(d[a]=h=o.call(u,u.__data__,a,t)+"",l.has(h)?i[a]=u:l.set(h,u));for(a=0;a<f;++a)h=o.call(e,s[a],a,s)+"",(u=l.get(h))?(r[a]=u,u.__data__=s[a],l.delete(h)):n[a]=new yD(e,s[a]);for(a=0;a<c;++a)(u=t[a])&&l.get(d[a])===u&&(i[a]=u)}function U_t(e){return e.__data__}function V_t(e,t){if(!arguments.length)return Array.from(this,U_t);var n=t?z_t:j_t,r=this._parents,i=this._groups;typeof e!="function"&&(e=B_t(e));for(var s=i.length,o=new Array(s),a=new Array(s),u=new Array(s),l=0;l<s;++l){var c=r[l],f=i[l],d=f.length,h=H_t(e.call(c,c&&c.__data__,l,r)),p=h.length,m=a[l]=new Array(p),g=o[l]=new Array(p),y=u[l]=new Array(d);n(c,f,m,g,y,h,t);for(var v=0,_=0,b,E;v<p;++v)if(b=m[v]){for(v>=_&&(_=v+1);!(E=g[_])&&++_<p;);b._next=E||null}}return o=new Aa(o,r),o._enter=a,o._exit=u,o}function H_t(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function q_t(){return new Aa(this._exit||this._groups.map(OOe),this._parents)}function W_t(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function G_t(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),u=0;u<o;++u)for(var l=n[u],c=r[u],f=l.length,d=a[u]=new Array(f),h,p=0;p<f;++p)(h=l[p]||c[p])&&(d[p]=h);for(;u<i;++u)a[u]=n[u];return new Aa(a,this._parents)}function Y_t(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function K_t(e){e||(e=X_t);function t(f,d){return f&&d?e(f.__data__,d.__data__):!f-!d}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,u=i[s]=new Array(a),l,c=0;c<a;++c)(l=o[c])&&(u[c]=l);u.sort(t)}return new Aa(i,this._parents).order()}function X_t(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Q_t(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function J_t(){return Array.from(this)}function Z_t(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function ebt(){let e=0;for(const t of this)++e;return e}function tbt(){return!this.node()}function nbt(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&e.call(a,a.__data__,s,i);return this}function rbt(e){return function(){this.removeAttribute(e)}}function ibt(e){return function(){this.removeAttributeNS(e.space,e.local)}}function sbt(e,t){return function(){this.setAttribute(e,t)}}function obt(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function abt(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function ubt(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function lbt(e,t){var n=j6(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?ibt:rbt:typeof t=="function"?n.local?ubt:abt:n.local?obt:sbt)(n,t))}function POe(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function cbt(e){return function(){this.style.removeProperty(e)}}function fbt(e,t,n){return function(){this.style.setProperty(e,t,n)}}function dbt(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function hbt(e,t,n){return arguments.length>1?this.each((t==null?cbt:typeof t=="function"?dbt:fbt)(e,t,n??"")):dw(this.node(),e)}function dw(e,t){return e.style.getPropertyValue(t)||POe(e).getComputedStyle(e,null).getPropertyValue(t)}function pbt(e){return function(){delete this[e]}}function mbt(e,t){return function(){this[e]=t}}function gbt(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function ybt(e,t){return arguments.length>1?this.each((t==null?pbt:typeof t=="function"?gbt:mbt)(e,t)):this.node()[e]}function kOe(e){return e.trim().split(/^|\s+/)}function RY(e){return e.classList||new $Oe(e)}function $Oe(e){this._node=e,this._names=kOe(e.getAttribute("class")||"")}$Oe.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function ROe(e,t){for(var n=RY(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function NOe(e,t){for(var n=RY(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function vbt(e){return function(){ROe(this,e)}}function _bt(e){return function(){NOe(this,e)}}function bbt(e,t){return function(){(t.apply(this,arguments)?ROe:NOe)(this,e)}}function wbt(e,t){var n=kOe(e+"");if(arguments.length<2){for(var r=RY(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?bbt:t?vbt:_bt)(n,t))}function Ebt(){this.textContent=""}function xbt(e){return function(){this.textContent=e}}function Sbt(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Tbt(e){return arguments.length?this.each(e==null?Ebt:(typeof e=="function"?Sbt:xbt)(e)):this.node().textContent}function Abt(){this.innerHTML=""}function Cbt(e){return function(){this.innerHTML=e}}function Ibt(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Obt(e){return arguments.length?this.each(e==null?Abt:(typeof e=="function"?Ibt:Cbt)(e)):this.node().innerHTML}function Pbt(){this.nextSibling&&this.parentNode.appendChild(this)}function kbt(){return this.each(Pbt)}function $bt(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Rbt(){return this.each($bt)}function Nbt(e){var t=typeof e=="function"?e:SOe(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Dbt(){return null}function Lbt(e,t){var n=typeof e=="function"?e:SOe(e),r=t==null?Dbt:typeof t=="function"?t:$Y(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Mbt(){var e=this.parentNode;e&&e.removeChild(this)}function Fbt(){return this.each(Mbt)}function Bbt(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function jbt(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function zbt(e){return this.select(e?jbt:Bbt)}function Ubt(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Vbt(e){return function(t){e.call(this,t,this.__data__)}}function Hbt(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function qbt(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function Wbt(e,t,n){return function(){var r=this.__on,i,s=Vbt(t);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function Gbt(e,t,n){var r=Hbt(e+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var u=0,l=a.length,c;u<l;++u)for(i=0,c=a[u];i<s;++i)if((o=r[i]).type===c.type&&o.name===c.name)return c.value}return}for(a=t?Wbt:qbt,i=0;i<s;++i)this.each(a(r[i],t,n));return this}function DOe(e,t,n){var r=POe(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Ybt(e,t){return function(){return DOe(this,e,t)}}function Kbt(e,t){return function(){return DOe(this,e,t.apply(this,arguments))}}function Xbt(e,t){return this.each((typeof t=="function"?Kbt:Ybt)(e,t))}function*Qbt(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var NY=[null];function Aa(e,t){this._groups=e,this._parents=t}function KC(){return new Aa([[document.documentElement]],NY)}function Jbt(){return this}Aa.prototype=KC.prototype={constructor:Aa,select:T_t,selectAll:I_t,selectChild:$_t,selectChildren:L_t,filter:M_t,data:V_t,enter:F_t,exit:q_t,join:W_t,merge:G_t,selection:Jbt,order:Y_t,sort:K_t,call:Q_t,nodes:J_t,node:Z_t,size:ebt,empty:tbt,each:nbt,attr:lbt,style:hbt,property:ybt,classed:wbt,text:Tbt,html:Obt,raise:kbt,lower:Rbt,append:Nbt,insert:Lbt,remove:Fbt,clone:zbt,datum:Ubt,on:Gbt,dispatch:Xbt,[Symbol.iterator]:Qbt};function Qi(e){return typeof e=="string"?new Aa([[document.querySelector(e)]],[document.documentElement]):new Aa([[e]],NY)}function Zbt(e){let t;for(;t=e.sourceEvent;)e=t;return e}function bU(e,t){if(e=Zbt(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}function ewt(e){return typeof e=="string"?new Aa([document.querySelectorAll(e)],[document.documentElement]):new Aa([TOe(e)],NY)}const wU={capture:!0,passive:!1};function EU(e){e.preventDefault(),e.stopImmediatePropagation()}function twt(e){var t=e.document.documentElement,n=Qi(e).on("dragstart.drag",EU,wU);"onselectstart"in t?n.on("selectstart.drag",EU,wU):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function nwt(e,t){var n=e.document.documentElement,r=Qi(e).on("dragstart.drag",null);t&&(r.on("click.drag",EU,wU),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function kE(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function XC(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function C0(){}var $1=.7,hw=1/$1,Ob="\\s*([+-]?\\d+)\\s*",sA="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Sd="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",rwt=/^#([0-9a-f]{3,8})$/,iwt=new RegExp(`^rgb\\(${Ob},${Ob},${Ob}\\)$`),swt=new RegExp(`^rgb\\(${Sd},${Sd},${Sd}\\)$`),owt=new RegExp(`^rgba\\(${Ob},${Ob},${Ob},${sA}\\)$`),awt=new RegExp(`^rgba\\(${Sd},${Sd},${Sd},${sA}\\)$`),uwt=new RegExp(`^hsl\\(${sA},${Sd},${Sd}\\)$`),lwt=new RegExp(`^hsla\\(${sA},${Sd},${Sd},${sA}\\)$`),qfe={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};kE(C0,R1,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Wfe,formatHex:Wfe,formatHex8:cwt,formatHsl:fwt,formatRgb:Gfe,toString:Gfe});function Wfe(){return this.rgb().formatHex()}function cwt(){return this.rgb().formatHex8()}function fwt(){return LOe(this).formatHsl()}function Gfe(){return this.rgb().formatRgb()}function R1(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=rwt.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Yfe(t):n===3?new Fs(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?lP(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?lP(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=iwt.exec(e))?new Fs(t[1],t[2],t[3],1):(t=swt.exec(e))?new Fs(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=owt.exec(e))?lP(t[1],t[2],t[3],t[4]):(t=awt.exec(e))?lP(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=uwt.exec(e))?Qfe(t[1],t[2]/100,t[3]/100,1):(t=lwt.exec(e))?Qfe(t[1],t[2]/100,t[3]/100,t[4]):qfe.hasOwnProperty(e)?Yfe(qfe[e]):e==="transparent"?new Fs(NaN,NaN,NaN,0):null}function Yfe(e){return new Fs(e>>16&255,e>>8&255,e&255,1)}function lP(e,t,n,r){return r<=0&&(e=t=n=NaN),new Fs(e,t,n,r)}function DY(e){return e instanceof C0||(e=R1(e)),e?(e=e.rgb(),new Fs(e.r,e.g,e.b,e.opacity)):new Fs}function Vg(e,t,n,r){return arguments.length===1?DY(e):new Fs(e,t,n,r??1)}function Fs(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}kE(Fs,Vg,XC(C0,{brighter(e){return e=e==null?hw:Math.pow(hw,e),new Fs(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?$1:Math.pow($1,e),new Fs(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Fs(l1(this.r),l1(this.g),l1(this.b),vD(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Kfe,formatHex:Kfe,formatHex8:dwt,formatRgb:Xfe,toString:Xfe}));function Kfe(){return`#${Uy(this.r)}${Uy(this.g)}${Uy(this.b)}`}function dwt(){return`#${Uy(this.r)}${Uy(this.g)}${Uy(this.b)}${Uy((isNaN(this.opacity)?1:this.opacity)*255)}`}function Xfe(){const e=vD(this.opacity);return`${e===1?"rgb(":"rgba("}${l1(this.r)}, ${l1(this.g)}, ${l1(this.b)}${e===1?")":`, ${e})`}`}function vD(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function l1(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Uy(e){return e=l1(e),(e<16?"0":"")+e.toString(16)}function Qfe(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new zc(e,t,n,r)}function LOe(e){if(e instanceof zc)return new zc(e.h,e.s,e.l,e.opacity);if(e instanceof C0||(e=R1(e)),!e)return new zc;if(e instanceof zc)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,a=s-i,u=(s+i)/2;return a?(t===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-t)/a+2:o=(t-n)/a+4,a/=u<.5?s+i:2-s-i,o*=60):a=u>0&&u<1?0:o,new zc(o,a,u,e.opacity)}function _D(e,t,n,r){return arguments.length===1?LOe(e):new zc(e,t,n,r??1)}function zc(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}kE(zc,_D,XC(C0,{brighter(e){return e=e==null?hw:Math.pow(hw,e),new zc(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?$1:Math.pow($1,e),new zc(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Fs(V9(e>=240?e-240:e+120,i,r),V9(e,i,r),V9(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new zc(Jfe(this.h),cP(this.s),cP(this.l),vD(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=vD(this.opacity);return`${e===1?"hsl(":"hsla("}${Jfe(this.h)}, ${cP(this.s)*100}%, ${cP(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Jfe(e){return e=(e||0)%360,e<0?e+360:e}function cP(e){return Math.max(0,Math.min(1,e||0))}function V9(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const MOe=Math.PI/180,FOe=180/Math.PI,bD=18,BOe=.96422,jOe=1,zOe=.82521,UOe=4/29,Pb=6/29,VOe=3*Pb*Pb,hwt=Pb*Pb*Pb;function HOe(e){if(e instanceof Td)return new Td(e.l,e.a,e.b,e.opacity);if(e instanceof Gh)return qOe(e);e instanceof Fs||(e=DY(e));var t=G9(e.r),n=G9(e.g),r=G9(e.b),i=H9((.2225045*t+.7168786*n+.0606169*r)/jOe),s,o;return t===n&&n===r?s=o=i:(s=H9((.4360747*t+.3850649*n+.1430804*r)/BOe),o=H9((.0139322*t+.0971045*n+.7141733*r)/zOe)),new Td(116*i-16,500*(s-i),200*(i-o),e.opacity)}function wD(e,t,n,r){return arguments.length===1?HOe(e):new Td(e,t,n,r??1)}function Td(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}kE(Td,wD,XC(C0,{brighter(e){return new Td(this.l+bD*(e??1),this.a,this.b,this.opacity)},darker(e){return new Td(this.l-bD*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=BOe*q9(t),e=jOe*q9(e),n=zOe*q9(n),new Fs(W9(3.1338561*t-1.6168667*e-.4906146*n),W9(-.9787684*t+1.9161415*e+.033454*n),W9(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function H9(e){return e>hwt?Math.pow(e,1/3):e/VOe+UOe}function q9(e){return e>Pb?e*e*e:VOe*(e-UOe)}function W9(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function G9(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function pwt(e){if(e instanceof Gh)return new Gh(e.h,e.c,e.l,e.opacity);if(e instanceof Td||(e=HOe(e)),e.a===0&&e.b===0)return new Gh(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*FOe;return new Gh(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function ED(e,t,n,r){return arguments.length===1?pwt(e):new Gh(e,t,n,r??1)}function Gh(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function qOe(e){if(isNaN(e.h))return new Td(e.l,0,0,e.opacity);var t=e.h*MOe;return new Td(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}kE(Gh,ED,XC(C0,{brighter(e){return new Gh(this.h,this.c,this.l+bD*(e??1),this.opacity)},darker(e){return new Gh(this.h,this.c,this.l-bD*(e??1),this.opacity)},rgb(){return qOe(this).rgb()}}));var WOe=-.14861,LY=1.78277,MY=-.29227,z6=-.90649,oA=1.97294,Zfe=oA*z6,ede=oA*LY,tde=LY*MY-z6*WOe;function mwt(e){if(e instanceof c1)return new c1(e.h,e.s,e.l,e.opacity);e instanceof Fs||(e=DY(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(tde*r+Zfe*t-ede*n)/(tde+Zfe-ede),s=r-i,o=(oA*(n-i)-MY*s)/z6,a=Math.sqrt(o*o+s*s)/(oA*i*(1-i)),u=a?Math.atan2(o,s)*FOe-120:NaN;return new c1(u<0?u+360:u,a,i,e.opacity)}function xU(e,t,n,r){return arguments.length===1?mwt(e):new c1(e,t,n,r??1)}function c1(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}kE(c1,xU,XC(C0,{brighter(e){return e=e==null?hw:Math.pow(hw,e),new c1(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?$1:Math.pow($1,e),new c1(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*MOe,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new Fs(255*(t+n*(WOe*r+LY*i)),255*(t+n*(MY*r+z6*i)),255*(t+n*(oA*r)),this.opacity)}}));function GOe(e,t,n,r,i){var s=e*e,o=s*e;return((1-3*e+3*s-o)*t+(4-6*s+3*o)*n+(1+3*e+3*s-3*o)*r+o*i)/6}function YOe(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],s=e[r+1],o=r>0?e[r-1]:2*i-s,a=r<t-1?e[r+2]:2*s-i;return GOe((n-r/t)*t,o,i,s,a)}}function KOe(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],s=e[r%t],o=e[(r+1)%t],a=e[(r+2)%t];return GOe((n-r/t)*t,i,s,o,a)}}const U6=e=>()=>e;function XOe(e,t){return function(n){return e+n*t}}function gwt(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function V6(e,t){var n=t-e;return n?XOe(e,n>180||n<-180?n-360*Math.round(n/360):n):U6(isNaN(e)?t:e)}function ywt(e){return(e=+e)==1?Bs:function(t,n){return n-t?gwt(t,n,e):U6(isNaN(t)?n:t)}}function Bs(e,t){var n=t-e;return n?XOe(e,n):U6(isNaN(e)?t:e)}const aA=function e(t){var n=ywt(t);function r(i,s){var o=n((i=Vg(i)).r,(s=Vg(s)).r),a=n(i.g,s.g),u=n(i.b,s.b),l=Bs(i.opacity,s.opacity);return function(c){return i.r=o(c),i.g=a(c),i.b=u(c),i.opacity=l(c),i+""}}return r.gamma=e,r}(1);function QOe(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),s=new Array(n),o,a;for(o=0;o<n;++o)a=Vg(t[o]),r[o]=a.r||0,i[o]=a.g||0,s[o]=a.b||0;return r=e(r),i=e(i),s=e(s),a.opacity=1,function(u){return a.r=r(u),a.g=i(u),a.b=s(u),a+""}}}var vwt=QOe(YOe),_wt=QOe(KOe);function FY(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function JOe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function bwt(e,t){return(JOe(t)?FY:ZOe)(e,t)}function ZOe(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=Xp(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function ePe(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Nl(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function tPe(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Xp(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var SU=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Y9=new RegExp(SU.source,"g");function wwt(e){return function(){return e}}function Ewt(e){return function(t){return e(t)+""}}function BY(e,t){var n=SU.lastIndex=Y9.lastIndex=0,r,i,s,o=-1,a=[],u=[];for(e=e+"",t=t+"";(r=SU.exec(e))&&(i=Y9.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,u.push({i:o,x:Nl(r,i)})),n=Y9.lastIndex;return n<t.length&&(s=t.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?u[0]?Ewt(u[0].x):wwt(t):(t=u.length,function(l){for(var c=0,f;c<t;++c)a[(f=u[c]).i]=f.x(l);return a.join("")})}function Xp(e,t){var n=typeof t,r;return t==null||n==="boolean"?U6(t):(n==="number"?Nl:n==="string"?(r=R1(t))?(t=r,aA):BY:t instanceof R1?aA:t instanceof Date?ePe:JOe(t)?FY:Array.isArray(t)?ZOe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?tPe:Nl)(e,t)}function xwt(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function Swt(e,t){var n=V6(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}function QC(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var nde=180/Math.PI,TU={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function nPe(e,t,n,r,i,s){var o,a,u;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,u/=a),e*r<t*n&&(e=-e,t=-t,u=-u,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*nde,skewX:Math.atan(u)*nde,scaleX:o,scaleY:a}}var fP;function Twt(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?TU:nPe(t.a,t.b,t.c,t.d,t.e,t.f)}function Awt(e){return e==null||(fP||(fP=document.createElementNS("http://www.w3.org/2000/svg","g")),fP.setAttribute("transform",e),!(e=fP.transform.baseVal.consolidate()))?TU:(e=e.matrix,nPe(e.a,e.b,e.c,e.d,e.e,e.f))}function rPe(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function s(l,c,f,d,h,p){if(l!==f||c!==d){var m=h.push("translate(",null,t,null,n);p.push({i:m-4,x:Nl(l,f)},{i:m-2,x:Nl(c,d)})}else(f||d)&&h.push("translate("+f+t+d+n)}function o(l,c,f,d){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:Nl(l,c)})):c&&f.push(i(f)+"rotate("+c+r)}function a(l,c,f,d){l!==c?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:Nl(l,c)}):c&&f.push(i(f)+"skewX("+c+r)}function u(l,c,f,d,h,p){if(l!==f||c!==d){var m=h.push(i(h)+"scale(",null,",",null,")");p.push({i:m-4,x:Nl(l,f)},{i:m-2,x:Nl(c,d)})}else(f!==1||d!==1)&&h.push(i(h)+"scale("+f+","+d+")")}return function(l,c){var f=[],d=[];return l=e(l),c=e(c),s(l.translateX,l.translateY,c.translateX,c.translateY,f,d),o(l.rotate,c.rotate,f,d),a(l.skewX,c.skewX,f,d),u(l.scaleX,l.scaleY,c.scaleX,c.scaleY,f,d),l=c=null,function(h){for(var p=-1,m=d.length,g;++p<m;)f[(g=d[p]).i]=g.x(h);return f.join("")}}}var iPe=rPe(Twt,"px, ","px)","deg)"),sPe=rPe(Awt,", ",")",")"),Cwt=1e-12;function rde(e){return((e=Math.exp(e))+1/e)/2}function Iwt(e){return((e=Math.exp(e))-1/e)/2}function Owt(e){return((e=Math.exp(2*e))-1)/(e+1)}const Pwt=function e(t,n,r){function i(s,o){var a=s[0],u=s[1],l=s[2],c=o[0],f=o[1],d=o[2],h=c-a,p=f-u,m=h*h+p*p,g,y;if(m<Cwt)y=Math.log(d/l)/t,g=function(x){return[a+x*h,u+x*p,l*Math.exp(t*x*y)]};else{var v=Math.sqrt(m),_=(d*d-l*l+r*m)/(2*l*n*v),b=(d*d-l*l-r*m)/(2*d*n*v),E=Math.log(Math.sqrt(_*_+1)-_),w=Math.log(Math.sqrt(b*b+1)-b);y=(w-E)/t,g=function(x){var S=x*y,I=rde(E),C=l/(n*v)*(I*Owt(t*S+E)-Iwt(E));return[a+C*h,u+C*p,l*I/rde(t*S+E)]}}return g.duration=y*1e3*t/Math.SQRT2,g}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,u=a*a;return e(o,a,u)},i}(Math.SQRT2,2,4);function oPe(e){return function(t,n){var r=e((t=_D(t)).h,(n=_D(n)).h),i=Bs(t.s,n.s),s=Bs(t.l,n.l),o=Bs(t.opacity,n.opacity);return function(a){return t.h=r(a),t.s=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const kwt=oPe(V6);var $wt=oPe(Bs);function Rwt(e,t){var n=Bs((e=wD(e)).l,(t=wD(t)).l),r=Bs(e.a,t.a),i=Bs(e.b,t.b),s=Bs(e.opacity,t.opacity);return function(o){return e.l=n(o),e.a=r(o),e.b=i(o),e.opacity=s(o),e+""}}function aPe(e){return function(t,n){var r=e((t=ED(t)).h,(n=ED(n)).h),i=Bs(t.c,n.c),s=Bs(t.l,n.l),o=Bs(t.opacity,n.opacity);return function(a){return t.h=r(a),t.c=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const Nwt=aPe(V6);var Dwt=aPe(Bs);function uPe(e){return function t(n){n=+n;function r(i,s){var o=e((i=xU(i)).h,(s=xU(s)).h),a=Bs(i.s,s.s),u=Bs(i.l,s.l),l=Bs(i.opacity,s.opacity);return function(c){return i.h=o(c),i.s=a(c),i.l=u(Math.pow(c,n)),i.opacity=l(c),i+""}}return r.gamma=t,r}(1)}const Lwt=uPe(V6);var Mwt=uPe(Bs);function jY(e,t){t===void 0&&(t=e,e=Xp);for(var n=0,r=t.length-1,i=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(i,i=t[++n]);return function(o){var a=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return s[a](o-a)}}function Fwt(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}const Bwt=Object.freeze(Object.defineProperty({__proto__:null,interpolate:Xp,interpolateArray:bwt,interpolateBasis:YOe,interpolateBasisClosed:KOe,interpolateCubehelix:Lwt,interpolateCubehelixLong:Mwt,interpolateDate:ePe,interpolateDiscrete:xwt,interpolateHcl:Nwt,interpolateHclLong:Dwt,interpolateHsl:kwt,interpolateHslLong:$wt,interpolateHue:Swt,interpolateLab:Rwt,interpolateNumber:Nl,interpolateNumberArray:FY,interpolateObject:tPe,interpolateRgb:aA,interpolateRgbBasis:vwt,interpolateRgbBasisClosed:_wt,interpolateRound:QC,interpolateString:BY,interpolateTransformCss:iPe,interpolateTransformSvg:sPe,interpolateZoom:Pwt,piecewise:jY,quantize:Fwt},Symbol.toStringTag,{value:"Module"}));var pw=0,VS=0,Xx=0,lPe=1e3,xD,HS,SD=0,N1=0,H6=0,uA=typeof performance=="object"&&performance.now?performance:Date,cPe=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function q6(){return N1||(cPe(jwt),N1=uA.now()+H6)}function jwt(){N1=0}function lA(){this._call=this._time=this._next=null}lA.prototype=zY.prototype={constructor:lA,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?q6():+n)+(t==null?0:+t),!this._next&&HS!==this&&(HS?HS._next=this:xD=this,HS=this),this._call=e,this._time=n,AU()},stop:function(){this._call&&(this._call=null,this._time=1/0,AU())}};function zY(e,t,n){var r=new lA;return r.restart(e,t,n),r}function zwt(){q6(),++pw;for(var e=xD,t;e;)(t=N1-e._time)>=0&&e._call.call(void 0,t),e=e._next;--pw}function ide(){N1=(SD=uA.now())+H6,pw=VS=0;try{zwt()}finally{pw=0,Vwt(),N1=0}}function Uwt(){var e=uA.now(),t=e-SD;t>lPe&&(H6-=t,SD=e)}function Vwt(){for(var e,t=xD,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:xD=n);HS=e,AU(r)}function AU(e){if(!pw){VS&&(VS=clearTimeout(VS));var t=e-N1;t>24?(e<1/0&&(VS=setTimeout(ide,e-uA.now()-H6)),Xx&&(Xx=clearInterval(Xx))):(Xx||(SD=uA.now(),Xx=setInterval(Uwt,lPe)),pw=1,cPe(ide))}}function sde(e,t,n){var r=new lA;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}function Hwt(e,t,n){var r=new lA,i=t;return t==null?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(s,o,a){o=+o,a=a==null?q6():+a,r._restart(function u(l){l+=i,r._restart(u,i+=o,a),s(l)},o,a)},r.restart(e,t,n),r)}var qwt=B6("start","end","cancel","interrupt"),Wwt=[],fPe=0,ode=1,CU=2,Kk=3,ade=4,IU=5,Xk=6;function W6(e,t,n,r,i,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;Gwt(e,n,{name:t,index:r,group:i,on:qwt,tween:Wwt,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:fPe})}function UY(e,t){var n=wf(e,t);if(n.state>fPe)throw new Error("too late; already scheduled");return n}function nh(e,t){var n=wf(e,t);if(n.state>Kk)throw new Error("too late; already running");return n}function wf(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Gwt(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=zY(s,0,n.time);function s(l){n.state=ode,n.timer.restart(o,n.delay,n.time),n.delay<=l&&o(l-n.delay)}function o(l){var c,f,d,h;if(n.state!==ode)return u();for(c in r)if(h=r[c],h.name===n.name){if(h.state===Kk)return sde(o);h.state===ade?(h.state=Xk,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[c]):+c<t&&(h.state=Xk,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[c])}if(sde(function(){n.state===Kk&&(n.state=ade,n.timer.restart(a,n.delay,n.time),a(l))}),n.state=CU,n.on.call("start",e,e.__data__,n.index,n.group),n.state===CU){for(n.state=Kk,i=new Array(d=n.tween.length),c=0,f=-1;c<d;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=h);i.length=f+1}}function a(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(u),n.state=IU,1),f=-1,d=i.length;++f<d;)i[f].call(e,c);n.state===IU&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=Xk,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function OU(e,t){var n=e.__transition,r,i,s=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){s=!1;continue}i=r.state>CU&&r.state<IU,r.state=Xk,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}s&&delete e.__transition}}function Ywt(e){return this.each(function(){OU(this,e)})}function Kwt(e,t){var n,r;return function(){var i=nh(this,e),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function Xwt(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=nh(this,e),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:t,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===t){i[u]=a;break}u===l&&i.push(a)}s.tween=i}}function Qwt(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=wf(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?Kwt:Xwt)(n,e,t))}function VY(e,t,n){var r=e._id;return e.each(function(){var i=nh(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return wf(i,r).value[t]}}function dPe(e,t){var n;return(typeof t=="number"?Nl:t instanceof R1?aA:(n=R1(t))?(t=n,aA):BY)(e,t)}function Jwt(e){return function(){this.removeAttribute(e)}}function Zwt(e){return function(){this.removeAttributeNS(e.space,e.local)}}function eEt(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttribute(e);return o===i?null:o===r?s:s=t(r=o,n)}}function tEt(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?s:s=t(r=o,n)}}function nEt(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function rEt(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function iEt(e,t){var n=j6(e),r=n==="transform"?sPe:dPe;return this.attrTween(e,typeof t=="function"?(n.local?rEt:nEt)(n,r,VY(this,"attr."+e,t)):t==null?(n.local?Zwt:Jwt)(n):(n.local?tEt:eEt)(n,r,t))}function sEt(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function oEt(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function aEt(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&oEt(e,s)),n}return i._value=t,i}function uEt(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&sEt(e,s)),n}return i._value=t,i}function lEt(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=j6(e);return this.tween(n,(r.local?aEt:uEt)(r,t))}function cEt(e,t){return function(){UY(this,e).delay=+t.apply(this,arguments)}}function fEt(e,t){return t=+t,function(){UY(this,e).delay=t}}function dEt(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?cEt:fEt)(t,e)):wf(this.node(),t).delay}function hEt(e,t){return function(){nh(this,e).duration=+t.apply(this,arguments)}}function pEt(e,t){return t=+t,function(){nh(this,e).duration=t}}function mEt(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?hEt:pEt)(t,e)):wf(this.node(),t).duration}function gEt(e,t){if(typeof t!="function")throw new Error;return function(){nh(this,e).ease=t}}function yEt(e){var t=this._id;return arguments.length?this.each(gEt(t,e)):wf(this.node(),t).ease}function vEt(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;nh(this,e).ease=n}}function _Et(e){if(typeof e!="function")throw new Error;return this.each(vEt(this._id,e))}function bEt(e){typeof e!="function"&&(e=COe(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new Tp(r,this._parents,this._name,this._id)}function wEt(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var u=t[a],l=n[a],c=u.length,f=o[a]=new Array(c),d,h=0;h<c;++h)(d=u[h]||l[h])&&(f[h]=d);for(;a<r;++a)o[a]=t[a];return new Tp(o,this._parents,this._name,this._id)}function EEt(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function xEt(e,t,n){var r,i,s=EEt(t)?UY:nh;return function(){var o=s(this,e),a=o.on;a!==r&&(i=(r=a).copy()).on(t,n),o.on=i}}function SEt(e,t){var n=this._id;return arguments.length<2?wf(this.node(),n).on.on(e):this.each(xEt(n,e,t))}function TEt(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function AEt(){return this.on("end.remove",TEt(this._id))}function CEt(e){var t=this._name,n=this._id;typeof e!="function"&&(e=$Y(e));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],u=a.length,l=s[o]=new Array(u),c,f,d=0;d<u;++d)(c=a[d])&&(f=e.call(c,c.__data__,d,a))&&("__data__"in c&&(f.__data__=c.__data__),l[d]=f,W6(l[d],t,n,d,l,wf(c,n)));return new Tp(s,this._parents,t,n)}function IEt(e){var t=this._name,n=this._id;typeof e!="function"&&(e=AOe(e));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var u=r[a],l=u.length,c,f=0;f<l;++f)if(c=u[f]){for(var d=e.call(c,c.__data__,f,u),h,p=wf(c,n),m=0,g=d.length;m<g;++m)(h=d[m])&&W6(h,t,n,m,d,p);s.push(d),o.push(c)}return new Tp(s,o,t,n)}var OEt=KC.prototype.constructor;function PEt(){return new OEt(this._groups,this._parents)}function kEt(e,t){var n,r,i;return function(){var s=dw(this,e),o=(this.style.removeProperty(e),dw(this,e));return s===o?null:s===n&&o===r?i:i=t(n=s,r=o)}}function hPe(e){return function(){this.style.removeProperty(e)}}function $Et(e,t,n){var r,i=n+"",s;return function(){var o=dw(this,e);return o===i?null:o===r?s:s=t(r=o,n)}}function REt(e,t,n){var r,i,s;return function(){var o=dw(this,e),a=n(this),u=a+"";return a==null&&(u=a=(this.style.removeProperty(e),dw(this,e))),o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a))}}function NEt(e,t){var n,r,i,s="style."+t,o="end."+s,a;return function(){var u=nh(this,e),l=u.on,c=u.value[s]==null?a||(a=hPe(t)):void 0;(l!==n||i!==c)&&(r=(n=l).copy()).on(o,i=c),u.on=r}}function DEt(e,t,n){var r=(e+="")=="transform"?iPe:dPe;return t==null?this.styleTween(e,kEt(e,r)).on("end.style."+e,hPe(e)):typeof t=="function"?this.styleTween(e,REt(e,r,VY(this,"style."+e,t))).each(NEt(this._id,e)):this.styleTween(e,$Et(e,r,t),n).on("end.style."+e,null)}function LEt(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function MEt(e,t,n){var r,i;function s(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&LEt(e,o,n)),r}return s._value=t,s}function FEt(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,MEt(e,t,n??""))}function BEt(e){return function(){this.textContent=e}}function jEt(e){return function(){var t=e(this);this.textContent=t??""}}function zEt(e){return this.tween("text",typeof e=="function"?jEt(VY(this,"text",e)):BEt(e==null?"":e+""))}function UEt(e){return function(t){this.textContent=e.call(this,t)}}function VEt(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&UEt(i)),t}return r._value=e,r}function HEt(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,VEt(e))}function qEt(){for(var e=this._name,t=this._id,n=pPe(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)if(u=o[l]){var c=wf(u,t);W6(u,e,n,l,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Tp(r,this._parents,e,n)}function WEt(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var a={value:o},u={value:function(){--i===0&&s()}};n.each(function(){var l=nh(this,r),c=l.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(u)),l.on=t}),i===0&&s()})}var GEt=0;function Tp(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function pPe(){return++GEt}var _h=KC.prototype;Tp.prototype={constructor:Tp,select:CEt,selectAll:IEt,selectChild:_h.selectChild,selectChildren:_h.selectChildren,filter:bEt,merge:wEt,selection:PEt,transition:qEt,call:_h.call,nodes:_h.nodes,node:_h.node,size:_h.size,empty:_h.empty,each:_h.each,on:SEt,attr:iEt,attrTween:lEt,style:DEt,styleTween:FEt,text:zEt,textTween:HEt,remove:AEt,tween:Qwt,delay:dEt,duration:mEt,ease:yEt,easeVarying:_Et,end:WEt,[Symbol.iterator]:_h[Symbol.iterator]};const YEt=e=>+e;function KEt(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var XEt={time:null,delay:0,duration:250,ease:KEt};function QEt(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function JEt(e){var t,n;e instanceof Tp?(t=e._id,e=e._name):(t=pPe(),(n=XEt).time=q6(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&W6(u,e,t,l,o,n||QEt(u,t));return new Tp(r,this._parents,e,t)}KC.prototype.interrupt=Ywt;KC.prototype.transition=JEt;const K9=e=>()=>e;function ZEt(e,{sourceEvent:t,target:n,selection:r,mode:i,dispatch:s}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:s}})}function ext(e){e.stopImmediatePropagation()}function X9(e){e.preventDefault(),e.stopImmediatePropagation()}var ude={name:"drag"},Q9={name:"space"},a_={name:"handle"},u_={name:"center"};const{abs:lde,max:Co,min:Io}=Math;function cde(e){return[+e[0],+e[1]]}function PU(e){return[cde(e[0]),cde(e[1])]}var Qk={name:"x",handles:["w","e"].map(cA),input:function(e,t){return e==null?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},Jk={name:"y",handles:["n","s"].map(cA),input:function(e,t){return e==null?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},txt={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(cA),input:function(e){return e==null?null:PU(e)},output:function(e){return e}},bh={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},fde={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},dde={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},nxt={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},rxt={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function cA(e){return{type:e}}function ixt(e){return!e.ctrlKey&&!e.button}function sxt(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function oxt(){return navigator.maxTouchPoints||"ontouchstart"in this}function J9(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function axt(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function uxt(){return HY(Qk)}function lxt(){return HY(Jk)}function cxt(){return HY(txt)}function HY(e){var t=sxt,n=ixt,r=oxt,i=!0,s=B6("start","brush","end"),o=6,a;function u(g){var y=g.property("__brush",m).selectAll(".overlay").data([cA("overlay")]);y.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",bh.overlay).merge(y).each(function(){var _=J9(this).extent;Qi(this).attr("x",_[0][0]).attr("y",_[0][1]).attr("width",_[1][0]-_[0][0]).attr("height",_[1][1]-_[0][1])}),g.selectAll(".selection").data([cA("selection")]).enter().append("rect").attr("class","selection").attr("cursor",bh.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var v=g.selectAll(".handle").data(e.handles,function(_){return _.type});v.exit().remove(),v.enter().append("rect").attr("class",function(_){return"handle handle--"+_.type}).attr("cursor",function(_){return bh[_.type]}),g.each(l).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",d).filter(r).on("touchstart.brush",d).on("touchmove.brush",h).on("touchend.brush touchcancel.brush",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}u.move=function(g,y,v){g.tween?g.on("start.brush",function(_){c(this,arguments).beforestart().start(_)}).on("interrupt.brush end.brush",function(_){c(this,arguments).end(_)}).tween("brush",function(){var _=this,b=_.__brush,E=c(_,arguments),w=b.selection,x=e.input(typeof y=="function"?y.apply(this,arguments):y,b.extent),S=Xp(w,x);function I(C){b.selection=C===1&&x===null?null:S(C),l.call(_),E.brush()}return w!==null&&x!==null?I:I(1)}):g.each(function(){var _=this,b=arguments,E=_.__brush,w=e.input(typeof y=="function"?y.apply(_,b):y,E.extent),x=c(_,b).beforestart();OU(_),E.selection=w===null?null:w,l.call(_),x.start(v).brush(v).end(v)})},u.clear=function(g,y){u.move(g,null,y)};function l(){var g=Qi(this),y=J9(this).selection;y?(g.selectAll(".selection").style("display",null).attr("x",y[0][0]).attr("y",y[0][1]).attr("width",y[1][0]-y[0][0]).attr("height",y[1][1]-y[0][1]),g.selectAll(".handle").style("display",null).attr("x",function(v){return v.type[v.type.length-1]==="e"?y[1][0]-o/2:y[0][0]-o/2}).attr("y",function(v){return v.type[0]==="s"?y[1][1]-o/2:y[0][1]-o/2}).attr("width",function(v){return v.type==="n"||v.type==="s"?y[1][0]-y[0][0]+o:o}).attr("height",function(v){return v.type==="e"||v.type==="w"?y[1][1]-y[0][1]+o:o})):g.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function c(g,y,v){var _=g.__brush.emitter;return _&&(!v||!_.clean)?_:new f(g,y,v)}function f(g,y,v){this.that=g,this.args=y,this.state=g.__brush,this.active=0,this.clean=v}f.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(g,y){return this.starting?(this.starting=!1,this.emit("start",g,y)):this.emit("brush",g),this},brush:function(g,y){return this.emit("brush",g,y),this},end:function(g,y){return--this.active===0&&(delete this.state.emitter,this.emit("end",g,y)),this},emit:function(g,y,v){var _=Qi(this.that).datum();s.call(g,this.that,new ZEt(g,{sourceEvent:y,target:u,selection:e.output(this.state.selection),mode:v,dispatch:s}),_)}};function d(g){if(a&&!g.touches||!n.apply(this,arguments))return;var y=this,v=g.target.__data__.type,_=(i&&g.metaKey?v="overlay":v)==="selection"?ude:i&&g.altKey?u_:a_,b=e===Jk?null:nxt[v],E=e===Qk?null:rxt[v],w=J9(y),x=w.extent,S=w.selection,I=x[0][0],C,O,z=x[0][1],N,$,D=x[1][0],B,V,j=x[1][1],G,U,P=0,k=0,H,M=b&&E&&i&&g.shiftKey,F,J,se=Array.from(g.touches||[g],Oe=>{const Le=Oe.identifier;return Oe=bU(Oe,y),Oe.point0=Oe.slice(),Oe.identifier=Le,Oe});OU(y);var ae=c(y,arguments,!0).beforestart();if(v==="overlay"){S&&(H=!0);const Oe=[se[0],se[1]||se[0]];w.selection=S=[[C=e===Jk?I:Io(Oe[0][0],Oe[1][0]),N=e===Qk?z:Io(Oe[0][1],Oe[1][1])],[B=e===Jk?D:Co(Oe[0][0],Oe[1][0]),G=e===Qk?j:Co(Oe[0][1],Oe[1][1])]],se.length>1&&Fe(g)}else C=S[0][0],N=S[0][1],B=S[1][0],G=S[1][1];O=C,$=N,V=B,U=G;var ce=Qi(y).attr("pointer-events","none"),le=ce.selectAll(".overlay").attr("cursor",bh[v]);if(g.touches)ae.moved=ue,ae.ended=ke;else{var ge=Qi(g.view).on("mousemove.brush",ue,!0).on("mouseup.brush",ke,!0);i&&ge.on("keydown.brush",Ge,!0).on("keyup.brush",Re,!0),twt(g.view)}l.call(y),ae.start(g,_.name);function ue(Oe){for(const Le of Oe.changedTouches||[Oe])for(const Ut of se)Ut.identifier===Le.identifier&&(Ut.cur=bU(Le,y));if(M&&!F&&!J&&se.length===1){const Le=se[0];lde(Le.cur[0]-Le[0])>lde(Le.cur[1]-Le[1])?J=!0:F=!0}for(const Le of se)Le.cur&&(Le[0]=Le.cur[0],Le[1]=Le.cur[1]);H=!0,X9(Oe),Fe(Oe)}function Fe(Oe){const Le=se[0],Ut=Le.point0;var Qe;switch(P=Le[0]-Ut[0],k=Le[1]-Ut[1],_){case Q9:case ude:{b&&(P=Co(I-C,Io(D-B,P)),O=C+P,V=B+P),E&&(k=Co(z-N,Io(j-G,k)),$=N+k,U=G+k);break}case a_:{se[1]?(b&&(O=Co(I,Io(D,se[0][0])),V=Co(I,Io(D,se[1][0])),b=1),E&&($=Co(z,Io(j,se[0][1])),U=Co(z,Io(j,se[1][1])),E=1)):(b<0?(P=Co(I-C,Io(D-C,P)),O=C+P,V=B):b>0&&(P=Co(I-B,Io(D-B,P)),O=C,V=B+P),E<0?(k=Co(z-N,Io(j-N,k)),$=N+k,U=G):E>0&&(k=Co(z-G,Io(j-G,k)),$=N,U=G+k));break}case u_:{b&&(O=Co(I,Io(D,C-P*b)),V=Co(I,Io(D,B+P*b))),E&&($=Co(z,Io(j,N-k*E)),U=Co(z,Io(j,G+k*E)));break}}V<O&&(b*=-1,Qe=C,C=B,B=Qe,Qe=O,O=V,V=Qe,v in fde&&le.attr("cursor",bh[v=fde[v]])),U<$&&(E*=-1,Qe=N,N=G,G=Qe,Qe=$,$=U,U=Qe,v in dde&&le.attr("cursor",bh[v=dde[v]])),w.selection&&(S=w.selection),F&&(O=S[0][0],V=S[1][0]),J&&($=S[0][1],U=S[1][1]),(S[0][0]!==O||S[0][1]!==$||S[1][0]!==V||S[1][1]!==U)&&(w.selection=[[O,$],[V,U]],l.call(y),ae.brush(Oe,_.name))}function ke(Oe){if(ext(Oe),Oe.touches){if(Oe.touches.length)return;a&&clearTimeout(a),a=setTimeout(function(){a=null},500)}else nwt(Oe.view,H),ge.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);ce.attr("pointer-events","all"),le.attr("cursor",bh.overlay),w.selection&&(S=w.selection),axt(S)&&(w.selection=null,l.call(y)),ae.end(Oe,_.name)}function Ge(Oe){switch(Oe.keyCode){case 16:{M=b&&E;break}case 18:{_===a_&&(b&&(B=V-P*b,C=O+P*b),E&&(G=U-k*E,N=$+k*E),_=u_,Fe(Oe));break}case 32:{(_===a_||_===u_)&&(b<0?B=V-P:b>0&&(C=O-P),E<0?G=U-k:E>0&&(N=$-k),_=Q9,le.attr("cursor",bh.selection),Fe(Oe));break}default:return}X9(Oe)}function Re(Oe){switch(Oe.keyCode){case 16:{M&&(F=J=M=!1,Fe(Oe));break}case 18:{_===u_&&(b<0?B=V:b>0&&(C=O),E<0?G=U:E>0&&(N=$),_=a_,Fe(Oe));break}case 32:{_===Q9&&(Oe.altKey?(b&&(B=V-P*b,C=O+P*b),E&&(G=U-k*E,N=$+k*E),_=u_):(b<0?B=V:b>0&&(C=O),E<0?G=U:E>0&&(N=$),_=a_),le.attr("cursor",bh[v]),Fe(Oe));break}default:return}X9(Oe)}}function h(g){c(this,arguments).moved(g)}function p(g){c(this,arguments).ended(g)}function m(){var g=this.__brush||{selection:null};return g.extent=PU(t.apply(this,arguments)),g.dim=e,g}return u.extent=function(g){return arguments.length?(t=typeof g=="function"?g:K9(PU(g)),u):t},u.filter=function(g){return arguments.length?(n=typeof g=="function"?g:K9(!!g),u):n},u.touchable=function(g){return arguments.length?(r=typeof g=="function"?g:K9(!!g),u):r},u.handleSize=function(g){return arguments.length?(o=+g,u):o},u.keyModifiers=function(g){return arguments.length?(i=!!g,u):i},u.on=function(){var g=s.on.apply(s,arguments);return g===s?u:g},u}const kU=Math.PI,$U=2*kU,hy=1e-6,fxt=$U-hy;function mPe(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function dxt(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return mPe;const n=10**t;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let qY=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?mPe:dxt(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,s,o){this._append`C${+t},${+n},${+r},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(t,n,r,i,s){if(t=+t,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,u=r-t,l=i-n,c=o-t,f=a-n,d=c*c+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(d>hy)if(!(Math.abs(f*u-l*c)>hy)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let h=r-o,p=i-a,m=u*u+l*l,g=h*h+p*p,y=Math.sqrt(m),v=Math.sqrt(d),_=s*Math.tan((kU-Math.acos((m+d-g)/(2*y*v)))/2),b=_/v,E=_/y;Math.abs(b-1)>hy&&this._append`L${t+b*c},${n+b*f}`,this._append`A${s},${s},0,0,${+(f*h>c*p)},${this._x1=t+E*u},${this._y1=n+E*l}`}}arc(t,n,r,i,s,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),u=r*Math.sin(i),l=t+a,c=n+u,f=1^o,d=o?i-s:s-i;this._x1===null?this._append`M${l},${c}`:(Math.abs(this._x1-l)>hy||Math.abs(this._y1-c)>hy)&&this._append`L${l},${c}`,r&&(d<0&&(d=d%$U+$U),d>fxt?this._append`A${r},${r},0,1,${f},${t-a},${n-u}A${r},${r},0,1,${f},${this._x1=l},${this._y1=c}`:d>hy&&this._append`A${r},${r},0,${+(d>=kU)},${f},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function G6(){return new qY}G6.prototype=qY.prototype;const ap=11102230246251565e-32,Oo=134217729,hxt=(3+8*ap)*ap;function Z9(e,t,n,r,i){let s,o,a,u,l=t[0],c=r[0],f=0,d=0;c>l==c>-l?(s=l,l=t[++f]):(s=c,c=r[++d]);let h=0;if(f<e&&d<n)for(c>l==c>-l?(o=l+s,a=s-(o-l),l=t[++f]):(o=c+s,a=s-(o-c),c=r[++d]),s=o,a!==0&&(i[h++]=a);f<e&&d<n;)c>l==c>-l?(o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++f]):(o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++d]),s=o,a!==0&&(i[h++]=a);for(;f<e;)o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++f],s=o,a!==0&&(i[h++]=a);for(;d<n;)o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++d],s=o,a!==0&&(i[h++]=a);return(s!==0||h===0)&&(i[h++]=s),h}function pxt(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function JC(e){return new Float64Array(e)}const mxt=(3+16*ap)*ap,gxt=(2+12*ap)*ap,yxt=(9+64*ap)*ap*ap,l_=JC(4),hde=JC(8),pde=JC(12),mde=JC(16),ua=JC(4);function vxt(e,t,n,r,i,s,o){let a,u,l,c,f,d,h,p,m,g,y,v,_,b,E,w,x,S;const I=e-i,C=n-i,O=t-s,z=r-s;b=I*z,d=Oo*I,h=d-(d-I),p=I-h,d=Oo*z,m=d-(d-z),g=z-m,E=p*g-(b-h*m-p*m-h*g),w=O*C,d=Oo*O,h=d-(d-O),p=O-h,d=Oo*C,m=d-(d-C),g=C-m,x=p*g-(w-h*m-p*m-h*g),y=E-x,f=E-y,l_[0]=E-(y+f)+(f-x),v=b+y,f=v-b,_=b-(v-f)+(y-f),y=_-w,f=_-y,l_[1]=_-(y+f)+(f-w),S=v+y,f=S-v,l_[2]=v-(S-f)+(y-f),l_[3]=S;let N=pxt(4,l_),$=gxt*o;if(N>=$||-N>=$||(f=e-I,a=e-(I+f)+(f-i),f=n-C,l=n-(C+f)+(f-i),f=t-O,u=t-(O+f)+(f-s),f=r-z,c=r-(z+f)+(f-s),a===0&&u===0&&l===0&&c===0)||($=yxt*o+hxt*Math.abs(N),N+=I*c+z*a-(O*l+C*u),N>=$||-N>=$))return N;b=a*z,d=Oo*a,h=d-(d-a),p=a-h,d=Oo*z,m=d-(d-z),g=z-m,E=p*g-(b-h*m-p*m-h*g),w=u*C,d=Oo*u,h=d-(d-u),p=u-h,d=Oo*C,m=d-(d-C),g=C-m,x=p*g-(w-h*m-p*m-h*g),y=E-x,f=E-y,ua[0]=E-(y+f)+(f-x),v=b+y,f=v-b,_=b-(v-f)+(y-f),y=_-w,f=_-y,ua[1]=_-(y+f)+(f-w),S=v+y,f=S-v,ua[2]=v-(S-f)+(y-f),ua[3]=S;const D=Z9(4,l_,4,ua,hde);b=I*c,d=Oo*I,h=d-(d-I),p=I-h,d=Oo*c,m=d-(d-c),g=c-m,E=p*g-(b-h*m-p*m-h*g),w=O*l,d=Oo*O,h=d-(d-O),p=O-h,d=Oo*l,m=d-(d-l),g=l-m,x=p*g-(w-h*m-p*m-h*g),y=E-x,f=E-y,ua[0]=E-(y+f)+(f-x),v=b+y,f=v-b,_=b-(v-f)+(y-f),y=_-w,f=_-y,ua[1]=_-(y+f)+(f-w),S=v+y,f=S-v,ua[2]=v-(S-f)+(y-f),ua[3]=S;const B=Z9(D,hde,4,ua,pde);b=a*c,d=Oo*a,h=d-(d-a),p=a-h,d=Oo*c,m=d-(d-c),g=c-m,E=p*g-(b-h*m-p*m-h*g),w=u*l,d=Oo*u,h=d-(d-u),p=u-h,d=Oo*l,m=d-(d-l),g=l-m,x=p*g-(w-h*m-p*m-h*g),y=E-x,f=E-y,ua[0]=E-(y+f)+(f-x),v=b+y,f=v-b,_=b-(v-f)+(y-f),y=_-w,f=_-y,ua[1]=_-(y+f)+(f-w),S=v+y,f=S-v,ua[2]=v-(S-f)+(y-f),ua[3]=S;const V=Z9(B,pde,4,ua,mde);return mde[V-1]}function dP(e,t,n,r,i,s){const o=(t-s)*(n-i),a=(e-i)*(r-s),u=o-a;if(o===0||a===0||o>0!=a>0)return u;const l=Math.abs(o+a);return Math.abs(u)>=mxt*l?u:-vxt(e,t,n,r,i,s,l)}const gde=Math.pow(2,-52),hP=new Uint32Array(512);class TD{static from(t,n=xxt,r=Sxt){const i=t.length,s=new Float64Array(i*2);for(let o=0;o<i;o++){const a=t[o];s[2*o]=n(a),s[2*o+1]=r(a)}return new TD(s)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:s}=this,o=t.length>>1;let a=1/0,u=1/0,l=-1/0,c=-1/0;for(let C=0;C<o;C++){const O=t[2*C],z=t[2*C+1];O<a&&(a=O),z<u&&(u=z),O>l&&(l=O),z>c&&(c=z),this._ids[C]=C}const f=(a+l)/2,d=(u+c)/2;let h=1/0,p,m,g;for(let C=0;C<o;C++){const O=eB(f,d,t[2*C],t[2*C+1]);O<h&&(p=C,h=O)}const y=t[2*p],v=t[2*p+1];h=1/0;for(let C=0;C<o;C++){if(C===p)continue;const O=eB(y,v,t[2*C],t[2*C+1]);O<h&&O>0&&(m=C,h=O)}let _=t[2*m],b=t[2*m+1],E=1/0;for(let C=0;C<o;C++){if(C===p||C===m)continue;const O=wxt(y,v,_,b,t[2*C],t[2*C+1]);O<E&&(g=C,E=O)}let w=t[2*g],x=t[2*g+1];if(E===1/0){for(let z=0;z<o;z++)this._dists[z]=t[2*z]-t[0]||t[2*z+1]-t[1];Z_(this._ids,this._dists,0,o-1);const C=new Uint32Array(o);let O=0;for(let z=0,N=-1/0;z<o;z++){const $=this._ids[z];this._dists[$]>N&&(C[O++]=$,N=this._dists[$])}this.hull=C.subarray(0,O),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(dP(y,v,_,b,w,x)<0){const C=m,O=_,z=b;m=g,_=w,b=x,g=C,w=O,x=z}const S=Ext(y,v,_,b,w,x);this._cx=S.x,this._cy=S.y;for(let C=0;C<o;C++)this._dists[C]=eB(t[2*C],t[2*C+1],S.x,S.y);Z_(this._ids,this._dists,0,o-1),this._hullStart=p;let I=3;r[p]=n[g]=m,r[m]=n[p]=g,r[g]=n[m]=p,i[p]=0,i[m]=1,i[g]=2,s.fill(-1),s[this._hashKey(y,v)]=p,s[this._hashKey(_,b)]=m,s[this._hashKey(w,x)]=g,this.trianglesLen=0,this._addTriangle(p,m,g,-1,-1,-1);for(let C=0,O,z;C<this._ids.length;C++){const N=this._ids[C],$=t[2*N],D=t[2*N+1];if(C>0&&Math.abs($-O)<=gde&&Math.abs(D-z)<=gde||(O=$,z=D,N===p||N===m||N===g))continue;let B=0;for(let P=0,k=this._hashKey($,D);P<this._hashSize&&(B=s[(k+P)%this._hashSize],!(B!==-1&&B!==r[B]));P++);B=n[B];let V=B,j;for(;j=r[V],dP($,D,t[2*V],t[2*V+1],t[2*j],t[2*j+1])>=0;)if(V=j,V===B){V=-1;break}if(V===-1)continue;let G=this._addTriangle(V,N,r[V],-1,-1,i[V]);i[N]=this._legalize(G+2),i[V]=G,I++;let U=r[V];for(;j=r[U],dP($,D,t[2*U],t[2*U+1],t[2*j],t[2*j+1])<0;)G=this._addTriangle(U,N,j,i[N],-1,i[U]),i[N]=this._legalize(G+2),r[U]=U,I--,U=j;if(V===B)for(;j=n[V],dP($,D,t[2*j],t[2*j+1],t[2*V],t[2*V+1])<0;)G=this._addTriangle(j,N,V,-1,i[V],i[j]),this._legalize(G+2),i[j]=G,r[V]=V,I--,V=j;this._hullStart=n[N]=V,r[V]=n[U]=N,r[N]=U,s[this._hashKey($,D)]=N,s[this._hashKey(t[2*V],t[2*V+1])]=V}this.hull=new Uint32Array(I);for(let C=0,O=this._hullStart;C<I;C++)this.hull[C]=O,O=r[O];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(_xt(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:i}=this;let s=0,o=0;for(;;){const a=r[t],u=t-t%3;if(o=u+(t+2)%3,a===-1){if(s===0)break;t=hP[--s];continue}const l=a-a%3,c=u+(t+1)%3,f=l+(a+2)%3,d=n[o],h=n[t],p=n[c],m=n[f];if(bxt(i[2*d],i[2*d+1],i[2*h],i[2*h+1],i[2*p],i[2*p+1],i[2*m],i[2*m+1])){n[t]=m,n[a]=d;const y=r[f];if(y===-1){let _=this._hullStart;do{if(this._hullTri[_]===f){this._hullTri[_]=t;break}_=this._hullPrev[_]}while(_!==this._hullStart)}this._link(t,y),this._link(a,r[o]),this._link(o,f);const v=l+(a+1)%3;s<hP.length&&(hP[s++]=v)}else{if(s===0)break;t=hP[--s]}}return o}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,s,o){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=r,this._link(a,i),this._link(a+1,s),this._link(a+2,o),this.trianglesLen+=3,a}}function _xt(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function eB(e,t,n,r){const i=e-n,s=t-r;return i*i+s*s}function bxt(e,t,n,r,i,s,o,a){const u=e-o,l=t-a,c=n-o,f=r-a,d=i-o,h=s-a,p=u*u+l*l,m=c*c+f*f,g=d*d+h*h;return u*(f*g-m*h)-l*(c*g-m*d)+p*(c*h-f*d)<0}function wxt(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=(l*c-a*f)*d,p=(o*f-u*c)*d;return h*h+p*p}function Ext(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=e+(l*c-a*f)*d,p=t+(o*f-u*c)*d;return{x:h,y:p}}function Z_(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const s=e[i],o=t[s];let a=i-1;for(;a>=n&&t[e[a]]>o;)e[a+1]=e[a--];e[a+1]=s}else{const i=n+r>>1;let s=n+1,o=r;Qx(e,i,s),t[e[n]]>t[e[r]]&&Qx(e,n,r),t[e[s]]>t[e[r]]&&Qx(e,s,r),t[e[n]]>t[e[s]]&&Qx(e,n,s);const a=e[s],u=t[a];for(;;){do s++;while(t[e[s]]<u);do o--;while(t[e[o]]>u);if(o<s)break;Qx(e,s,o)}e[n+1]=e[o],e[o]=a,r-s+1>=o-n?(Z_(e,t,s,r),Z_(e,t,n,o-1)):(Z_(e,t,n,o-1),Z_(e,t,s,r))}}function Qx(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function xxt(e){return e[0]}function Sxt(e){return e[1]}var yde={},tB={},nB=34,Jx=10,rB=13;function gPe(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function Txt(e,t){var n=gPe(e);return function(r,i){return t(n(r),i,e)}}function vde(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function Va(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function Axt(e){return e<0?"-"+Va(-e,6):e>9999?"+"+Va(e,6):Va(e,4)}function Cxt(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":Axt(e.getUTCFullYear())+"-"+Va(e.getUTCMonth()+1,2)+"-"+Va(e.getUTCDate(),2)+(i?"T"+Va(t,2)+":"+Va(n,2)+":"+Va(r,2)+"."+Va(i,3)+"Z":r?"T"+Va(t,2)+":"+Va(n,2)+":"+Va(r,2)+"Z":n||t?"T"+Va(t,2)+":"+Va(n,2)+"Z":"")}function yPe(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(f,d){var h,p,m=i(f,function(g,y){if(h)return h(g,y-1);p=g,h=d?Txt(g,d):gPe(g)});return m.columns=p||[],m}function i(f,d){var h=[],p=f.length,m=0,g=0,y,v=p<=0,_=!1;f.charCodeAt(p-1)===Jx&&--p,f.charCodeAt(p-1)===rB&&--p;function b(){if(v)return tB;if(_)return _=!1,yde;var w,x=m,S;if(f.charCodeAt(x)===nB){for(;m++<p&&f.charCodeAt(m)!==nB||f.charCodeAt(++m)===nB;);return(w=m)>=p?v=!0:(S=f.charCodeAt(m++))===Jx?_=!0:S===rB&&(_=!0,f.charCodeAt(m)===Jx&&++m),f.slice(x+1,w-1).replace(/""/g,'"')}for(;m<p;){if((S=f.charCodeAt(w=m++))===Jx)_=!0;else if(S===rB)_=!0,f.charCodeAt(m)===Jx&&++m;else if(S!==n)continue;return f.slice(x,w)}return v=!0,f.slice(x,p)}for(;(y=b())!==tB;){for(var E=[];y!==yde&&y!==tB;)E.push(y),y=b();d&&(E=d(E,g++))==null||h.push(E)}return h}function s(f,d){return f.map(function(h){return d.map(function(p){return c(h[p])}).join(e)})}function o(f,d){return d==null&&(d=vde(f)),[d.map(c).join(e)].concat(s(f,d)).join(`
`)}function a(f,d){return d==null&&(d=vde(f)),s(f,d).join(`
`)}function u(f){return f.map(l).join(`
`)}function l(f){return f.map(c).join(e)}function c(f){return f==null?"":f instanceof Date?Cxt(f):t.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:o,formatBody:a,formatRows:u,formatRow:l,formatValue:c}}var Ixt=yPe(","),Oxt=Ixt.parse;function Pxt(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function kxt(e,t){return fetch(e,t).then(Pxt)}function $xt(e){return function(t,n,r){return arguments.length===2&&typeof n=="function"&&(r=n,n=void 0),kxt(t,n).then(function(i){return e(i,r)})}}var Rxt=$xt(Oxt);function Nxt(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var s,o=n.length,a,u=0,l=0;for(s=0;s<o;++s)a=n[s],u+=a.x,l+=a.y;for(u=(u/o-e)*r,l=(l/o-t)*r,s=0;s<o;++s)a=n[s],a.x-=u,a.y-=l}return i.initialize=function(s){n=s},i.x=function(s){return arguments.length?(e=+s,i):e},i.y=function(s){return arguments.length?(t=+s,i):t},i.strength=function(s){return arguments.length?(r=+s,i):r},i}function Dxt(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return vPe(this.cover(t,n),t,n,e)}function vPe(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,s=e._root,o={data:r},a=e._x0,u=e._y0,l=e._x1,c=e._y1,f,d,h,p,m,g,y,v;if(!s)return e._root=o,e;for(;s.length;)if((m=t>=(f=(a+l)/2))?a=f:l=f,(g=n>=(d=(u+c)/2))?u=d:c=d,i=s,!(s=s[y=g<<1|m]))return i[y]=o,e;if(h=+e._x.call(null,s.data),p=+e._y.call(null,s.data),t===h&&n===p)return o.next=s,i?i[y]=o:e._root=o,e;do i=i?i[y]=new Array(4):e._root=new Array(4),(m=t>=(f=(a+l)/2))?a=f:l=f,(g=n>=(d=(u+c)/2))?u=d:c=d;while((y=g<<1|m)===(v=(p>=d)<<1|h>=f));return i[v]=s,i[y]=o,e}function Lxt(e){var t,n,r=e.length,i,s,o=new Array(r),a=new Array(r),u=1/0,l=1/0,c=-1/0,f=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(s=+this._y.call(null,t))||(o[n]=i,a[n]=s,i<u&&(u=i),i>c&&(c=i),s<l&&(l=s),s>f&&(f=s));if(u>c||l>f)return this;for(this.cover(u,l).cover(c,f),n=0;n<r;++n)vPe(this,o[n],a[n],e[n]);return this}function Mxt(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,s=(r=Math.floor(t))+1;else{for(var o=i-n||1,a=this._root,u,l;n>e||e>=i||r>t||t>=s;)switch(l=(t<r)<<1|e<n,u=new Array(4),u[l]=a,a=u,o*=2,l){case 0:i=n+o,s=r+o;break;case 1:n=i-o,s=r+o;break;case 2:i=n+o,r=s-o;break;case 3:n=i-o,r=s-o;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=r,this._x1=i,this._y1=s,this}function Fxt(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function Bxt(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function va(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function jxt(e,t,n){var r,i=this._x0,s=this._y0,o,a,u,l,c=this._x1,f=this._y1,d=[],h=this._root,p,m;for(h&&d.push(new va(h,i,s,c,f)),n==null?n=1/0:(i=e-n,s=t-n,c=e+n,f=t+n,n*=n);p=d.pop();)if(!(!(h=p.node)||(o=p.x0)>c||(a=p.y0)>f||(u=p.x1)<i||(l=p.y1)<s))if(h.length){var g=(o+u)/2,y=(a+l)/2;d.push(new va(h[3],g,y,u,l),new va(h[2],o,y,g,l),new va(h[1],g,a,u,y),new va(h[0],o,a,g,y)),(m=(t>=y)<<1|e>=g)&&(p=d[d.length-1],d[d.length-1]=d[d.length-1-m],d[d.length-1-m]=p)}else{var v=e-+this._x.call(null,h.data),_=t-+this._y.call(null,h.data),b=v*v+_*_;if(b<n){var E=Math.sqrt(n=b);i=e-E,s=t-E,c=e+E,f=t+E,r=h.data}}return r}function zxt(e){if(isNaN(c=+this._x.call(null,e))||isNaN(f=+this._y.call(null,e)))return this;var t,n=this._root,r,i,s,o=this._x0,a=this._y0,u=this._x1,l=this._y1,c,f,d,h,p,m,g,y;if(!n)return this;if(n.length)for(;;){if((p=c>=(d=(o+u)/2))?o=d:u=d,(m=f>=(h=(a+l)/2))?a=h:l=h,t=n,!(n=n[g=m<<1|p]))return this;if(!n.length)break;(t[g+1&3]||t[g+2&3]||t[g+3&3])&&(r=t,y=g)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,i?(s?i.next=s:delete i.next,this):t?(s?t[g]=s:delete t[g],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[y]=n:this._root=n),this):(this._root=s,this)}function Uxt(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function Vxt(){return this._root}function Hxt(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function qxt(e){var t=[],n,r=this._root,i,s,o,a,u;for(r&&t.push(new va(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,s=n.x0,o=n.y0,a=n.x1,u=n.y1)&&r.length){var l=(s+a)/2,c=(o+u)/2;(i=r[3])&&t.push(new va(i,l,c,a,u)),(i=r[2])&&t.push(new va(i,s,c,l,u)),(i=r[1])&&t.push(new va(i,l,o,a,c)),(i=r[0])&&t.push(new va(i,s,o,l,c))}return this}function Wxt(e){var t=[],n=[],r;for(this._root&&t.push(new va(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var s,o=r.x0,a=r.y0,u=r.x1,l=r.y1,c=(o+u)/2,f=(a+l)/2;(s=i[0])&&t.push(new va(s,o,a,c,f)),(s=i[1])&&t.push(new va(s,c,a,u,f)),(s=i[2])&&t.push(new va(s,o,f,c,l)),(s=i[3])&&t.push(new va(s,c,f,u,l))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function Gxt(e){return e[0]}function Yxt(e){return arguments.length?(this._x=e,this):this._x}function Kxt(e){return e[1]}function Xxt(e){return arguments.length?(this._y=e,this):this._y}function WY(e,t,n){var r=new GY(t??Gxt,n??Kxt,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function GY(e,t,n,r,i,s){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function _de(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var Na=WY.prototype=GY.prototype;Na.copy=function(){var e=new GY(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=_de(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=_de(r));return e};Na.add=Dxt;Na.addAll=Lxt;Na.cover=Mxt;Na.data=Fxt;Na.extent=Bxt;Na.find=jxt;Na.remove=zxt;Na.removeAll=Uxt;Na.root=Vxt;Na.size=Hxt;Na.visit=qxt;Na.visitAfter=Wxt;Na.x=Yxt;Na.y=Xxt;function _a(e){return function(){return e}}function Xm(e){return(e()-.5)*1e-6}function Qxt(e){return e.x+e.vx}function Jxt(e){return e.y+e.vy}function Zxt(e){var t,n,r,i=1,s=1;typeof e!="function"&&(e=_a(e==null?1:+e));function o(){for(var l,c=t.length,f,d,h,p,m,g,y=0;y<s;++y)for(f=WY(t,Qxt,Jxt).visitAfter(a),l=0;l<c;++l)d=t[l],m=n[d.index],g=m*m,h=d.x+d.vx,p=d.y+d.vy,f.visit(v);function v(_,b,E,w,x){var S=_.data,I=_.r,C=m+I;if(S){if(S.index>d.index){var O=h-S.x-S.vx,z=p-S.y-S.vy,N=O*O+z*z;N<C*C&&(O===0&&(O=Xm(r),N+=O*O),z===0&&(z=Xm(r),N+=z*z),N=(C-(N=Math.sqrt(N)))/N*i,d.vx+=(O*=N)*(C=(I*=I)/(g+I)),d.vy+=(z*=N)*C,S.vx-=O*(C=1-C),S.vy-=z*C)}return}return b>h+C||w<h-C||E>p+C||x<p-C}}function a(l){if(l.data)return l.r=n[l.data.index];for(var c=l.r=0;c<4;++c)l[c]&&l[c].r>l.r&&(l.r=l[c].r)}function u(){if(t){var l,c=t.length,f;for(n=new Array(c),l=0;l<c;++l)f=t[l],n[f.index]=+e(f,l,t)}}return o.initialize=function(l,c){t=l,r=c,u()},o.iterations=function(l){return arguments.length?(s=+l,o):s},o.strength=function(l){return arguments.length?(i=+l,o):i},o.radius=function(l){return arguments.length?(e=typeof l=="function"?l:_a(+l),u(),o):e},o}function eSt(e){return e.index}function bde(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function tSt(e){var t=eSt,n=f,r,i=_a(30),s,o,a,u,l,c=1;e==null&&(e=[]);function f(g){return 1/Math.min(a[g.source.index],a[g.target.index])}function d(g){for(var y=0,v=e.length;y<c;++y)for(var _=0,b,E,w,x,S,I,C;_<v;++_)b=e[_],E=b.source,w=b.target,x=w.x+w.vx-E.x-E.vx||Xm(l),S=w.y+w.vy-E.y-E.vy||Xm(l),I=Math.sqrt(x*x+S*S),I=(I-s[_])/I*g*r[_],x*=I,S*=I,w.vx-=x*(C=u[_]),w.vy-=S*C,E.vx+=x*(C=1-C),E.vy+=S*C}function h(){if(o){var g,y=o.length,v=e.length,_=new Map(o.map((E,w)=>[t(E,w,o),E])),b;for(g=0,a=new Array(y);g<v;++g)b=e[g],b.index=g,typeof b.source!="object"&&(b.source=bde(_,b.source)),typeof b.target!="object"&&(b.target=bde(_,b.target)),a[b.source.index]=(a[b.source.index]||0)+1,a[b.target.index]=(a[b.target.index]||0)+1;for(g=0,u=new Array(v);g<v;++g)b=e[g],u[g]=a[b.source.index]/(a[b.source.index]+a[b.target.index]);r=new Array(v),p(),s=new Array(v),m()}}function p(){if(o)for(var g=0,y=e.length;g<y;++g)r[g]=+n(e[g],g,e)}function m(){if(o)for(var g=0,y=e.length;g<y;++g)s[g]=+i(e[g],g,e)}return d.initialize=function(g,y){o=g,l=y,h()},d.links=function(g){return arguments.length?(e=g,h(),d):e},d.id=function(g){return arguments.length?(t=g,d):t},d.iterations=function(g){return arguments.length?(c=+g,d):c},d.strength=function(g){return arguments.length?(n=typeof g=="function"?g:_a(+g),p(),d):n},d.distance=function(g){return arguments.length?(i=typeof g=="function"?g:_a(+g),m(),d):i},d}const nSt=1664525,rSt=1013904223,wde=4294967296;function iSt(){let e=1;return()=>(e=(nSt*e+rSt)%wde)/wde}function sSt(e){return e.x}function oSt(e){return e.y}var aSt=10,uSt=Math.PI*(3-Math.sqrt(5));function lSt(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),s=0,o=.6,a=new Map,u=zY(f),l=B6("tick","end"),c=iSt();e==null&&(e=[]);function f(){d(),l.call("tick",t),n<r&&(u.stop(),l.call("end",t))}function d(m){var g,y=e.length,v;m===void 0&&(m=1);for(var _=0;_<m;++_)for(n+=(s-n)*i,a.forEach(function(b){b(n)}),g=0;g<y;++g)v=e[g],v.fx==null?v.x+=v.vx*=o:(v.x=v.fx,v.vx=0),v.fy==null?v.y+=v.vy*=o:(v.y=v.fy,v.vy=0);return t}function h(){for(var m=0,g=e.length,y;m<g;++m){if(y=e[m],y.index=m,y.fx!=null&&(y.x=y.fx),y.fy!=null&&(y.y=y.fy),isNaN(y.x)||isNaN(y.y)){var v=aSt*Math.sqrt(.5+m),_=m*uSt;y.x=v*Math.cos(_),y.y=v*Math.sin(_)}(isNaN(y.vx)||isNaN(y.vy))&&(y.vx=y.vy=0)}}function p(m){return m.initialize&&m.initialize(e,c),m}return h(),t={tick:d,restart:function(){return u.restart(f),t},stop:function(){return u.stop(),t},nodes:function(m){return arguments.length?(e=m,h(),a.forEach(p),t):e},alpha:function(m){return arguments.length?(n=+m,t):n},alphaMin:function(m){return arguments.length?(r=+m,t):r},alphaDecay:function(m){return arguments.length?(i=+m,t):+i},alphaTarget:function(m){return arguments.length?(s=+m,t):s},velocityDecay:function(m){return arguments.length?(o=1-m,t):1-o},randomSource:function(m){return arguments.length?(c=m,a.forEach(p),t):c},force:function(m,g){return arguments.length>1?(g==null?a.delete(m):a.set(m,p(g)),t):a.get(m)},find:function(m,g,y){var v=0,_=e.length,b,E,w,x,S;for(y==null?y=1/0:y*=y,v=0;v<_;++v)x=e[v],b=m-x.x,E=g-x.y,w=b*b+E*E,w<y&&(S=x,y=w);return S},on:function(m,g){return arguments.length>1?(l.on(m,g),t):l.on(m)}}}function cSt(){var e,t,n,r,i=_a(-30),s,o=1,a=1/0,u=.81;function l(h){var p,m=e.length,g=WY(e,sSt,oSt).visitAfter(f);for(r=h,p=0;p<m;++p)t=e[p],g.visit(d)}function c(){if(e){var h,p=e.length,m;for(s=new Array(p),h=0;h<p;++h)m=e[h],s[m.index]=+i(m,h,e)}}function f(h){var p=0,m,g,y=0,v,_,b;if(h.length){for(v=_=b=0;b<4;++b)(m=h[b])&&(g=Math.abs(m.value))&&(p+=m.value,y+=g,v+=g*m.x,_+=g*m.y);h.x=v/y,h.y=_/y}else{m=h,m.x=m.data.x,m.y=m.data.y;do p+=s[m.data.index];while(m=m.next)}h.value=p}function d(h,p,m,g){if(!h.value)return!0;var y=h.x-t.x,v=h.y-t.y,_=g-p,b=y*y+v*v;if(_*_/u<b)return b<a&&(y===0&&(y=Xm(n),b+=y*y),v===0&&(v=Xm(n),b+=v*v),b<o&&(b=Math.sqrt(o*b)),t.vx+=y*h.value*r/b,t.vy+=v*h.value*r/b),!0;if(h.length||b>=a)return;(h.data!==t||h.next)&&(y===0&&(y=Xm(n),b+=y*y),v===0&&(v=Xm(n),b+=v*v),b<o&&(b=Math.sqrt(o*b)));do h.data!==t&&(_=s[h.data.index]*r/b,t.vx+=y*_,t.vy+=v*_);while(h=h.next)}return l.initialize=function(h,p){e=h,n=p,c()},l.strength=function(h){return arguments.length?(i=typeof h=="function"?h:_a(+h),c(),l):i},l.distanceMin=function(h){return arguments.length?(o=h*h,l):Math.sqrt(o)},l.distanceMax=function(h){return arguments.length?(a=h*h,l):Math.sqrt(a)},l.theta=function(h){return arguments.length?(u=h*h,l):Math.sqrt(u)},l}function fSt(e){var t=_a(.1),n,r,i;typeof e!="function"&&(e=_a(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vx+=(i[u]-c.x)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:_a(+a),o(),s):t},s.x=function(a){return arguments.length?(e=typeof a=="function"?a:_a(+a),o(),s):e},s}function dSt(e){var t=_a(.1),n,r,i;typeof e!="function"&&(e=_a(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vy+=(i[u]-c.y)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:_a(+a),o(),s):t},s.y=function(a){return arguments.length?(e=typeof a=="function"?a:_a(+a),o(),s):e},s}function hSt(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function AD(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function mw(e){return e=AD(Math.abs(e)),e?e[1]:NaN}function pSt(e,t){return function(n,r){for(var i=n.length,s=[],o=0,a=e[0],u=0;i>0&&a>0&&(u+a+1>r&&(a=Math.max(1,r-u)),s.push(n.substring(i-=a,i+a)),!((u+=a+1)>r));)a=e[o=(o+1)%e.length];return s.reverse().join(t)}}function mSt(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var gSt=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function D1(e){if(!(t=gSt.exec(e)))throw new Error("invalid format: "+e);var t;return new YY({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}D1.prototype=YY.prototype;function YY(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}YY.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function ySt(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var _Pe;function vSt(e,t){var n=AD(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(_Pe=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+AD(e,Math.max(0,t+s-1))[0]}function Ede(e,t){var n=AD(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const xde={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:hSt,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Ede(e*100,t),r:Ede,s:vSt,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Sde(e){return e}var Tde=Array.prototype.map,Ade=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function bPe(e){var t=e.grouping===void 0||e.thousands===void 0?Sde:pSt(Tde.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?Sde:mSt(Tde.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function l(f){f=D1(f);var d=f.fill,h=f.align,p=f.sign,m=f.symbol,g=f.zero,y=f.width,v=f.comma,_=f.precision,b=f.trim,E=f.type;E==="n"?(v=!0,E="g"):xde[E]||(_===void 0&&(_=12),b=!0,E="g"),(g||d==="0"&&h==="=")&&(g=!0,d="0",h="=");var w=m==="$"?n:m==="#"&&/[boxX]/.test(E)?"0"+E.toLowerCase():"",x=m==="$"?r:/[%p]/.test(E)?o:"",S=xde[E],I=/[defgprs%]/.test(E);_=_===void 0?6:/[gprs]/.test(E)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_));function C(O){var z=w,N=x,$,D,B;if(E==="c")N=S(O)+N,O="";else{O=+O;var V=O<0||1/O<0;if(O=isNaN(O)?u:S(Math.abs(O),_),b&&(O=ySt(O)),V&&+O==0&&p!=="+"&&(V=!1),z=(V?p==="("?p:a:p==="-"||p==="("?"":p)+z,N=(E==="s"?Ade[8+_Pe/3]:"")+N+(V&&p==="("?")":""),I){for($=-1,D=O.length;++$<D;)if(B=O.charCodeAt($),48>B||B>57){N=(B===46?i+O.slice($+1):O.slice($))+N,O=O.slice(0,$);break}}}v&&!g&&(O=t(O,1/0));var j=z.length+O.length+N.length,G=j<y?new Array(y-j+1).join(d):"";switch(v&&g&&(O=t(G+O,G.length?y-N.length:1/0),G=""),h){case"<":O=z+O+N+G;break;case"=":O=z+G+O+N;break;case"^":O=G.slice(0,j=G.length>>1)+z+O+N+G.slice(j);break;default:O=G+z+O+N;break}return s(O)}return C.toString=function(){return f+""},C}function c(f,d){var h=l((f=D1(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(mw(d)/3)))*3,m=Math.pow(10,-p),g=Ade[8+p/3];return function(y){return h(m*y)+g}}return{format:l,formatPrefix:c}}var pP,$E,KY;_St({thousands:",",grouping:[3],currency:["$",""]});function _St(e){return pP=bPe(e),$E=pP.format,KY=pP.formatPrefix,pP}function wPe(e){return Math.max(0,-mw(Math.abs(e)))}function EPe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(mw(t)/3)))*3-mw(Math.abs(e)))}function xPe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,mw(t)-mw(e))+1}function bSt(e,t){return e.parent===t.parent?1:2}function wSt(e){return e.reduce(ESt,0)/e.length}function ESt(e,t){return e+t.x}function xSt(e){return 1+e.reduce(SSt,0)}function SSt(e,t){return Math.max(e,t.y)}function TSt(e){for(var t;t=e.children;)e=t[0];return e}function ASt(e){for(var t;t=e.children;)e=t[t.length-1];return e}function CSt(){var e=bSt,t=1,n=1,r=!1;function i(s){var o,a=0;s.eachAfter(function(d){var h=d.children;h?(d.x=wSt(h),d.y=xSt(h)):(d.x=o?a+=e(d,o):0,d.y=0,o=d)});var u=TSt(s),l=ASt(s),c=u.x-e(u,l)/2,f=l.x+e(l,u)/2;return s.eachAfter(r?function(d){d.x=(d.x-s.x)*t,d.y=(s.y-d.y)*n}:function(d){d.x=(d.x-c)/(f-c)*t,d.y=(1-(s.y?d.y/s.y:1))*n})}return i.separation=function(s){return arguments.length?(e=s,i):e},i.size=function(s){return arguments.length?(r=!1,t=+s[0],n=+s[1],i):r?null:[t,n]},i.nodeSize=function(s){return arguments.length?(r=!0,t=+s[0],n=+s[1],i):r?[t,n]:null},i}function ISt(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function OSt(){return this.eachAfter(ISt)}function PSt(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function kSt(e,t){for(var n=this,r=[n],i,s,o=-1;n=r.pop();)if(e.call(t,n,++o,this),i=n.children)for(s=i.length-1;s>=0;--s)r.push(i[s]);return this}function $St(e,t){for(var n=this,r=[n],i=[],s,o,a,u=-1;n=r.pop();)if(i.push(n),s=n.children)for(o=0,a=s.length;o<a;++o)r.push(s[o]);for(;n=i.pop();)e.call(t,n,++u,this);return this}function RSt(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function NSt(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function DSt(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function LSt(e){for(var t=this,n=MSt(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function MSt(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function FSt(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function BSt(){return Array.from(this)}function jSt(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function zSt(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*USt(){var e=this,t,n=[e],r,i,s;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,s=r.length;i<s;++i)n.push(r[i]);while(n.length)}function Y6(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=qSt)):t===void 0&&(t=HSt);for(var n=new gw(e),r,i=[n],s,o,a,u;r=i.pop();)if((o=t(r.data))&&(u=(o=Array.from(o)).length))for(r.children=o,a=u-1;a>=0;--a)i.push(s=o[a]=new gw(o[a])),s.parent=r,s.depth=r.depth+1;return n.eachBefore(SPe)}function VSt(){return Y6(this).eachBefore(WSt)}function HSt(e){return e.children}function qSt(e){return Array.isArray(e)?e[1]:null}function WSt(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function SPe(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function gw(e){this.data=e,this.depth=this.height=0,this.parent=null}gw.prototype=Y6.prototype={constructor:gw,count:OSt,each:PSt,eachAfter:$St,eachBefore:kSt,find:RSt,sum:NSt,sort:DSt,path:LSt,ancestors:FSt,descendants:BSt,leaves:jSt,links:zSt,copy:VSt,[Symbol.iterator]:USt};function Zk(e){return e==null?null:TPe(e)}function TPe(e){if(typeof e!="function")throw new Error;return e}function Cy(){return 0}function O_(e){return function(){return e}}const GSt=1664525,YSt=1013904223,Cde=4294967296;function KSt(){let e=1;return()=>(e=(GSt*e+YSt)%Cde)/Cde}function XSt(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function QSt(e,t){let n=e.length,r,i;for(;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function JSt(e,t){for(var n=0,r=(e=QSt(Array.from(e),t)).length,i=[],s,o;n<r;)s=e[n],o&&APe(o,s)?++n:(o=eTt(i=ZSt(i,s)),n=0);return o}function ZSt(e,t){var n,r;if(iB(t,e))return[t];for(n=0;n<e.length;++n)if(mP(t,e[n])&&iB(qS(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(mP(qS(e[n],e[r]),t)&&mP(qS(e[n],t),e[r])&&mP(qS(e[r],t),e[n])&&iB(CPe(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function mP(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function APe(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function iB(e,t){for(var n=0;n<t.length;++n)if(!APe(e,t[n]))return!1;return!0}function eTt(e){switch(e.length){case 1:return tTt(e[0]);case 2:return qS(e[0],e[1]);case 3:return CPe(e[0],e[1],e[2])}}function tTt(e){return{x:e.x,y:e.y,r:e.r}}function qS(e,t){var n=e.x,r=e.y,i=e.r,s=t.x,o=t.y,a=t.r,u=s-n,l=o-r,c=a-i,f=Math.sqrt(u*u+l*l);return{x:(n+s+u/f*c)/2,y:(r+o+l/f*c)/2,r:(f+i+a)/2}}function CPe(e,t,n){var r=e.x,i=e.y,s=e.r,o=t.x,a=t.y,u=t.r,l=n.x,c=n.y,f=n.r,d=r-o,h=r-l,p=i-a,m=i-c,g=u-s,y=f-s,v=r*r+i*i-s*s,_=v-o*o-a*a+u*u,b=v-l*l-c*c+f*f,E=h*p-d*m,w=(p*b-m*_)/(E*2)-r,x=(m*g-p*y)/E,S=(h*_-d*b)/(E*2)-i,I=(d*y-h*g)/E,C=x*x+I*I-1,O=2*(s+w*x+S*I),z=w*w+S*S-s*s,N=-(Math.abs(C)>1e-6?(O+Math.sqrt(O*O-4*C*z))/(2*C):z/O);return{x:r+w+x*N,y:i+S+I*N,r:N}}function Ide(e,t,n){var r=e.x-t.x,i,s,o=e.y-t.y,a,u,l=r*r+o*o;l?(s=t.r+n.r,s*=s,u=e.r+n.r,u*=u,s>u?(i=(l+u-s)/(2*l),a=Math.sqrt(Math.max(0,u/l-i*i)),n.x=e.x-i*r-a*o,n.y=e.y-i*o+a*r):(i=(l+s-u)/(2*l),a=Math.sqrt(Math.max(0,s/l-i*i)),n.x=t.x+i*r-a*o,n.y=t.y+i*o+a*r)):(n.x=t.x+n.r,n.y=t.y)}function Ode(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function Pde(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,s=(t.y*n.r+n.y*t.r)/r;return i*i+s*s}function gP(e){this._=e,this.next=null,this.previous=null}function nTt(e,t){if(!(s=(e=XSt(e)).length))return 0;var n,r,i,s,o,a,u,l,c,f,d;if(n=e[0],n.x=0,n.y=0,!(s>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(s>2))return n.r+r.r;Ide(r,n,i=e[2]),n=new gP(n),r=new gP(r),i=new gP(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(u=3;u<s;++u){Ide(n._,r._,i=e[u]),i=new gP(i),l=r.next,c=n.previous,f=r._.r,d=n._.r;do if(f<=d){if(Ode(l._,i._)){r=l,n.next=r,r.previous=n,--u;continue e}f+=l._.r,l=l.next}else{if(Ode(c._,i._)){n=c,n.next=r,r.previous=n,--u;continue e}d+=c._.r,c=c.previous}while(l!==c.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,o=Pde(n);(i=i.next)!==r;)(a=Pde(i))<o&&(n=i,o=a);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=JSt(n,t),u=0;u<s;++u)n=e[u],n.x-=i.x,n.y-=i.y;return i.r}function rTt(e){return Math.sqrt(e.value)}function IPe(){var e=null,t=1,n=1,r=Cy;function i(s){const o=KSt();return s.x=t/2,s.y=n/2,e?s.eachBefore(kde(e)).eachAfter(sB(r,.5,o)).eachBefore($de(1)):s.eachBefore(kde(rTt)).eachAfter(sB(Cy,1,o)).eachAfter(sB(r,s.r/Math.min(t,n),o)).eachBefore($de(Math.min(t,n)/(2*s.r))),s}return i.radius=function(s){return arguments.length?(e=Zk(s),i):e},i.size=function(s){return arguments.length?(t=+s[0],n=+s[1],i):[t,n]},i.padding=function(s){return arguments.length?(r=typeof s=="function"?s:O_(+s),i):r},i}function kde(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function sB(e,t,n){return function(r){if(i=r.children){var i,s,o=i.length,a=e(r)*t||0,u;if(a)for(s=0;s<o;++s)i[s].r+=a;if(u=nTt(i,n),a)for(s=0;s<o;++s)i[s].r-=a;r.r=u+a}}}function $de(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function OPe(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function ZC(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(r-t)/e.value;++a<u;)o=s[a],o.y0=n,o.y1=i,o.x0=t,o.x1=t+=o.value*l}function iTt(){var e=1,t=1,n=0,r=!1;function i(o){var a=o.height+1;return o.x0=o.y0=n,o.x1=e,o.y1=t/a,o.eachBefore(s(t,a)),r&&o.eachBefore(OPe),o}function s(o,a){return function(u){u.children&&ZC(u,u.x0,o*(u.depth+1)/a,u.x1,o*(u.depth+2)/a);var l=u.x0,c=u.y0,f=u.x1-n,d=u.y1-n;f<l&&(l=f=(l+f)/2),d<c&&(c=d=(c+d)/2),u.x0=l,u.y0=c,u.x1=f,u.y1=d}}return i.round=function(o){return arguments.length?(r=!!o,i):r},i.size=function(o){return arguments.length?(e=+o[0],t=+o[1],i):[e,t]},i.padding=function(o){return arguments.length?(n=+o,i):n},i}var sTt={depth:-1},Rde={},oB={};function oTt(e){return e.id}function aTt(e){return e.parentId}function Nde(){var e=oTt,t=aTt,n;function r(i){var s=Array.from(i),o=e,a=t,u,l,c,f,d,h,p,m,g=new Map;if(n!=null){const y=s.map((b,E)=>uTt(n(b,E,i))),v=y.map(Dde),_=new Set(y).add("");for(const b of v)_.has(b)||(_.add(b),y.push(b),v.push(Dde(b)),s.push(oB));o=(b,E)=>y[E],a=(b,E)=>v[E]}for(c=0,u=s.length;c<u;++c)l=s[c],h=s[c]=new gw(l),(p=o(l,c,i))!=null&&(p+="")&&(m=h.id=p,g.set(m,g.has(m)?Rde:h)),(p=a(l,c,i))!=null&&(p+="")&&(h.parent=p);for(c=0;c<u;++c)if(h=s[c],p=h.parent){if(d=g.get(p),!d)throw new Error("missing: "+p);if(d===Rde)throw new Error("ambiguous: "+p);d.children?d.children.push(h):d.children=[h],h.parent=d}else{if(f)throw new Error("multiple roots");f=h}if(!f)throw new Error("no root");if(n!=null){for(;f.data===oB&&f.children.length===1;)f=f.children[0],--u;for(let y=s.length-1;y>=0&&(h=s[y],h.data===oB);--y)h.data=null}if(f.parent=sTt,f.eachBefore(function(y){y.depth=y.parent.depth+1,--u}).eachBefore(SPe),f.parent=null,u>0)throw new Error("cycle");return f}return r.id=function(i){return arguments.length?(e=Zk(i),r):e},r.parentId=function(i){return arguments.length?(t=Zk(i),r):t},r.path=function(i){return arguments.length?(n=Zk(i),r):n},r}function uTt(e){e=`${e}`;let t=e.length;return RU(e,t-1)&&!RU(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function Dde(e){let t=e.length;if(t<2)return"";for(;--t>1&&!RU(e,t););return e.slice(0,t)}function RU(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function lTt(e,t){return e.parent===t.parent?1:2}function aB(e){var t=e.children;return t?t[0]:e.t}function uB(e){var t=e.children;return t?t[t.length-1]:e.t}function cTt(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function fTt(e){for(var t=0,n=0,r=e.children,i=r.length,s;--i>=0;)s=r[i],s.z+=t,s.m+=t,t+=s.s+(n+=s.c)}function dTt(e,t,n){return e.a.parent===t.parent?e.a:n}function e$(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}e$.prototype=Object.create(gw.prototype);function hTt(e){for(var t=new e$(e,0),n,r=[t],i,s,o,a;n=r.pop();)if(s=n._.children)for(n.children=new Array(a=s.length),o=a-1;o>=0;--o)r.push(i=n.children[o]=new e$(s[o],o)),i.parent=n;return(t.parent=new e$(null,0)).children=[t],t}function pTt(){var e=lTt,t=1,n=1,r=null;function i(l){var c=hTt(l);if(c.eachAfter(s),c.parent.m=-c.z,c.eachBefore(o),r)l.eachBefore(u);else{var f=l,d=l,h=l;l.eachBefore(function(v){v.x<f.x&&(f=v),v.x>d.x&&(d=v),v.depth>h.depth&&(h=v)});var p=f===d?1:e(f,d)/2,m=p-f.x,g=t/(d.x+p+m),y=n/(h.depth||1);l.eachBefore(function(v){v.x=(v.x+m)*g,v.y=v.depth*y})}return l}function s(l){var c=l.children,f=l.parent.children,d=l.i?f[l.i-1]:null;if(c){fTt(l);var h=(c[0].z+c[c.length-1].z)/2;d?(l.z=d.z+e(l._,d._),l.m=l.z-h):l.z=h}else d&&(l.z=d.z+e(l._,d._));l.parent.A=a(l,d,l.parent.A||f[0])}function o(l){l._.x=l.z+l.parent.m,l.m+=l.parent.m}function a(l,c,f){if(c){for(var d=l,h=l,p=c,m=d.parent.children[0],g=d.m,y=h.m,v=p.m,_=m.m,b;p=uB(p),d=aB(d),p&&d;)m=aB(m),h=uB(h),h.a=l,b=p.z+v-d.z-g+e(p._,d._),b>0&&(cTt(dTt(p,l,f),l,b),g+=b,y+=b),v+=p.m,g+=d.m,_+=m.m,y+=h.m;p&&!uB(h)&&(h.t=p,h.m+=v-y),d&&!aB(m)&&(m.t=d,m.m+=g-_,f=l)}return f}function u(l){l.x*=t,l.y=l.depth*n}return i.separation=function(l){return arguments.length?(e=l,i):e},i.size=function(l){return arguments.length?(r=!1,t=+l[0],n=+l[1],i):r?null:[t,n]},i.nodeSize=function(l){return arguments.length?(r=!0,t=+l[0],n=+l[1],i):r?[t,n]:null},i}function K6(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(i-n)/e.value;++a<u;)o=s[a],o.x0=t,o.x1=r,o.y0=n,o.y1=n+=o.value*l}var PPe=(1+Math.sqrt(5))/2;function kPe(e,t,n,r,i,s){for(var o=[],a=t.children,u,l,c=0,f=0,d=a.length,h,p,m=t.value,g,y,v,_,b,E,w;c<d;){h=i-n,p=s-r;do g=a[f++].value;while(!g&&f<d);for(y=v=g,E=Math.max(p/h,h/p)/(m*e),w=g*g*E,b=Math.max(v/w,w/y);f<d;++f){if(g+=l=a[f].value,l<y&&(y=l),l>v&&(v=l),w=g*g*E,_=Math.max(v/w,w/y),_>b){g-=l;break}b=_}o.push(u={value:g,dice:h<p,children:a.slice(c,f)}),u.dice?ZC(u,n,r,i,m?r+=p*g/m:s):K6(u,n,r,m?n+=h*g/m:i,s),m-=g,c=f}return o}const $Pe=function e(t){function n(r,i,s,o,a){kPe(t,r,i,s,o,a)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(PPe);function mTt(){var e=$Pe,t=!1,n=1,r=1,i=[0],s=Cy,o=Cy,a=Cy,u=Cy,l=Cy;function c(d){return d.x0=d.y0=0,d.x1=n,d.y1=r,d.eachBefore(f),i=[0],t&&d.eachBefore(OPe),d}function f(d){var h=i[d.depth],p=d.x0+h,m=d.y0+h,g=d.x1-h,y=d.y1-h;g<p&&(p=g=(p+g)/2),y<m&&(m=y=(m+y)/2),d.x0=p,d.y0=m,d.x1=g,d.y1=y,d.children&&(h=i[d.depth+1]=s(d)/2,p+=l(d)-h,m+=o(d)-h,g-=a(d)-h,y-=u(d)-h,g<p&&(p=g=(p+g)/2),y<m&&(m=y=(m+y)/2),e(d,p,m,g,y))}return c.round=function(d){return arguments.length?(t=!!d,c):t},c.size=function(d){return arguments.length?(n=+d[0],r=+d[1],c):[n,r]},c.tile=function(d){return arguments.length?(e=TPe(d),c):e},c.padding=function(d){return arguments.length?c.paddingInner(d).paddingOuter(d):c.paddingInner()},c.paddingInner=function(d){return arguments.length?(s=typeof d=="function"?d:O_(+d),c):s},c.paddingOuter=function(d){return arguments.length?c.paddingTop(d).paddingRight(d).paddingBottom(d).paddingLeft(d):c.paddingTop()},c.paddingTop=function(d){return arguments.length?(o=typeof d=="function"?d:O_(+d),c):o},c.paddingRight=function(d){return arguments.length?(a=typeof d=="function"?d:O_(+d),c):a},c.paddingBottom=function(d){return arguments.length?(u=typeof d=="function"?d:O_(+d),c):u},c.paddingLeft=function(d){return arguments.length?(l=typeof d=="function"?d:O_(+d),c):l},c}function gTt(e,t,n,r,i){var s=e.children,o,a=s.length,u,l=new Array(a+1);for(l[0]=u=o=0;o<a;++o)l[o+1]=u+=s[o].value;c(0,a,e.value,t,n,r,i);function c(f,d,h,p,m,g,y){if(f>=d-1){var v=s[f];v.x0=p,v.y0=m,v.x1=g,v.y1=y;return}for(var _=l[f],b=h/2+_,E=f+1,w=d-1;E<w;){var x=E+w>>>1;l[x]<b?E=x+1:w=x}b-l[E-1]<l[E]-b&&f+1<E&&--E;var S=l[E]-_,I=h-S;if(g-p>y-m){var C=h?(p*I+g*S)/h:g;c(f,E,S,p,m,C,y),c(E,d,I,C,m,g,y)}else{var O=h?(m*I+y*S)/h:y;c(f,E,S,p,m,g,O),c(E,d,I,p,O,g,y)}}}function yTt(e,t,n,r,i){(e.depth&1?K6:ZC)(e,t,n,r,i)}const vTt=function e(t){function n(r,i,s,o,a){if((u=r._squarify)&&u.ratio===t)for(var u,l,c,f,d=-1,h,p=u.length,m=r.value;++d<p;){for(l=u[d],c=l.children,f=l.value=0,h=c.length;f<h;++f)l.value+=c[f].value;l.dice?ZC(l,i,s,o,m?s+=(a-s)*l.value/m:a):K6(l,i,s,m?i+=(o-i)*l.value/m:o,a),m-=l.value}else r._squarify=u=kPe(t,r,i,s,o,a),u.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(PPe);function GT(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function _Tt(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function RPe(e){let t,n,r;e.length!==2?(t=GT,n=(a,u)=>GT(e(a),u),r=(a,u)=>e(a)-u):(t=e===GT||e===_Tt?e:bTt,n=e,r=e);function i(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<0?l=f+1:c=f}while(l<c)}return l}function s(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<=0?l=f+1:c=f}while(l<c)}return l}function o(a,u,l=0,c=a.length){const f=i(a,u,l,c-1);return f>l&&r(a[f-1],u)>-r(a[f],u)?f-1:f}return{left:i,center:o,right:s}}function bTt(){return 0}function NPe(e){return e===null?NaN:+e}const wTt=RPe(GT),X6=wTt.right;RPe(NPe).center;const ETt=Math.sqrt(50),xTt=Math.sqrt(10),STt=Math.sqrt(2);function CD(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=ETt?10:s>=xTt?5:s>=STt?2:1;let a,u,l;return i<0?(l=Math.pow(10,-i)/o,a=Math.round(e*l),u=Math.round(t*l),a/l<e&&++a,u/l>t&&--u,l=-l):(l=Math.pow(10,i)*o,a=Math.round(e/l),u=Math.round(t/l),a*l<e&&++a,u*l>t&&--u),u<a&&.5<=n&&n<2?CD(e,t,n*2):[a,u,l]}function NU(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,o]=r?CD(t,e,n):CD(e,t,n);if(!(s>=i))return[];const a=s-i+1,u=new Array(a);if(r)if(o<0)for(let l=0;l<a;++l)u[l]=(s-l)/-o;else for(let l=0;l<a;++l)u[l]=(s-l)*o;else if(o<0)for(let l=0;l<a;++l)u[l]=(i+l)/-o;else for(let l=0;l<a;++l)u[l]=(i+l)*o;return u}function DU(e,t,n){return t=+t,e=+e,n=+n,CD(e,t,n)[2]}function TTt(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?DU(t,e,n):DU(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function ATt(e,t,n=NPe){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),o=+n(e[s],s,e),a=+n(e[s+1],s+1,e);return o+(a-o)*(i-s)}}function CTt(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function Ef(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function I0(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const LU=Symbol("implicit");function RE(){var e=new Ufe,t=[],n=[],r=LU;function i(s){let o=e.get(s);if(o===void 0){if(r!==LU)return r;e.set(s,o=t.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new Ufe;for(const o of s)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return RE(t,n).unknown(r)},Ef.apply(i,arguments),i}function eI(){var e=RE().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,s,o,a=!1,u=0,l=0,c=.5;delete e.unknown;function f(){var d=t().length,h=i<r,p=h?i:r,m=h?r:i;s=(m-p)/Math.max(1,d-u+l*2),a&&(s=Math.floor(s)),p+=(m-p-s*(d-u))*c,o=s*(1-u),a&&(p=Math.round(p),o=Math.round(o));var g=CTt(d).map(function(y){return p+s*y});return n(h?g.reverse():g)}return e.domain=function(d){return arguments.length?(t(d),f()):t()},e.range=function(d){return arguments.length?([r,i]=d,r=+r,i=+i,f()):[r,i]},e.rangeRound=function(d){return[r,i]=d,r=+r,i=+i,a=!0,f()},e.bandwidth=function(){return o},e.step=function(){return s},e.round=function(d){return arguments.length?(a=!!d,f()):a},e.padding=function(d){return arguments.length?(u=Math.min(1,l=+d),f()):u},e.paddingInner=function(d){return arguments.length?(u=Math.min(1,d),f()):u},e.paddingOuter=function(d){return arguments.length?(l=+d,f()):l},e.align=function(d){return arguments.length?(c=Math.max(0,Math.min(1,d)),f()):c},e.copy=function(){return eI(t(),[r,i]).round(a).paddingInner(u).paddingOuter(l).align(c)},Ef.apply(f(),arguments)}function ITt(e){return function(){return e}}function MU(e){return+e}var Lde=[0,1];function iu(e){return e}function FU(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:ITt(isNaN(t)?NaN:.5)}function OTt(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function PTt(e,t,n){var r=e[0],i=e[1],s=t[0],o=t[1];return i<r?(r=FU(i,r),s=n(o,s)):(r=FU(r,i),s=n(s,o)),function(a){return s(r(a))}}function kTt(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=FU(e[o],e[o+1]),s[o]=n(t[o],t[o+1]);return function(a){var u=X6(e,a,1,r)-1;return s[u](i[u](a))}}function tI(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Q6(){var e=Lde,t=Lde,n=Xp,r,i,s,o=iu,a,u,l;function c(){var d=Math.min(e.length,t.length);return o!==iu&&(o=OTt(e[0],e[d-1])),a=d>2?kTt:PTt,u=l=null,f}function f(d){return d==null||isNaN(d=+d)?s:(u||(u=a(e.map(r),t,n)))(r(o(d)))}return f.invert=function(d){return o(i((l||(l=a(t,e.map(r),Nl)))(d)))},f.domain=function(d){return arguments.length?(e=Array.from(d,MU),c()):e.slice()},f.range=function(d){return arguments.length?(t=Array.from(d),c()):t.slice()},f.rangeRound=function(d){return t=Array.from(d),n=QC,c()},f.clamp=function(d){return arguments.length?(o=d?!0:iu,c()):o!==iu},f.interpolate=function(d){return arguments.length?(n=d,c()):n},f.unknown=function(d){return arguments.length?(s=d,f):s},function(d,h){return r=d,i=h,c()}}function DPe(){return Q6()(iu,iu)}function LPe(e,t,n,r){var i=TTt(e,t,n),s;switch(r=D1(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=EPe(i,o))&&(r.precision=s),KY(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=xPe(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=wPe(i))&&(r.precision=s-(r.type==="%")*2);break}}return $E(r)}function Cv(e){var t=e.domain;return e.ticks=function(n){var r=t();return NU(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return LPe(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,o=r[i],a=r[s],u,l,c=10;for(a<o&&(l=o,o=a,a=l,l=i,i=s,s=l);c-- >0;){if(l=DU(o,a,n),l===u)return r[i]=o,r[s]=a,t(r);if(l>0)o=Math.floor(o/l)*l,a=Math.ceil(a/l)*l;else if(l<0)o=Math.ceil(o*l)/l,a=Math.floor(a*l)/l;else break;u=l}return e},e}function Ap(){var e=DPe();return e.copy=function(){return tI(e,Ap())},Ef.apply(e,arguments),Cv(e)}function MPe(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,MU),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return MPe(e).unknown(t)},e=arguments.length?Array.from(e,MU):[0,1],Cv(n)}function FPe(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],s=e[r],o;return s<i&&(o=n,n=r,r=o,o=i,i=s,s=o),e[n]=t.floor(i),e[r]=t.ceil(s),e}function Mde(e){return Math.log(e)}function Fde(e){return Math.exp(e)}function $Tt(e){return-Math.log(-e)}function RTt(e){return-Math.exp(-e)}function NTt(e){return isFinite(e)?+("1e"+e):e<0?0:e}function DTt(e){return e===10?NTt:e===Math.E?Math.exp:t=>Math.pow(e,t)}function LTt(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function Bde(e){return(t,n)=>-e(-t,n)}function XY(e){const t=e(Mde,Fde),n=t.domain;let r=10,i,s;function o(){return i=LTt(r),s=DTt(r),n()[0]<0?(i=Bde(i),s=Bde(s),e($Tt,RTt)):e(Mde,Fde),t}return t.base=function(a){return arguments.length?(r=+a,o()):r},t.domain=function(a){return arguments.length?(n(a),o()):n()},t.ticks=a=>{const u=n();let l=u[0],c=u[u.length-1];const f=c<l;f&&([l,c]=[c,l]);let d=i(l),h=i(c),p,m;const g=a==null?10:+a;let y=[];if(!(r%1)&&h-d<g){if(d=Math.floor(d),h=Math.ceil(h),l>0){for(;d<=h;++d)for(p=1;p<r;++p)if(m=d<0?p/s(-d):p*s(d),!(m<l)){if(m>c)break;y.push(m)}}else for(;d<=h;++d)for(p=r-1;p>=1;--p)if(m=d>0?p/s(-d):p*s(d),!(m<l)){if(m>c)break;y.push(m)}y.length*2<g&&(y=NU(l,c,g))}else y=NU(d,h,Math.min(h-d,g)).map(s);return f?y.reverse():y},t.tickFormat=(a,u)=>{if(a==null&&(a=10),u==null&&(u=r===10?"s":","),typeof u!="function"&&(!(r%1)&&(u=D1(u)).precision==null&&(u.trim=!0),u=$E(u)),a===1/0)return u;const l=Math.max(1,r*a/t.ticks().length);return c=>{let f=c/s(Math.round(i(c)));return f*r<r-.5&&(f*=r),f<=l?u(c):""}},t.nice=()=>n(FPe(n(),{floor:a=>s(Math.floor(i(a))),ceil:a=>s(Math.ceil(i(a)))})),t}function BPe(){const e=XY(Q6()).domain([1,10]);return e.copy=()=>tI(e,BPe()).base(e.base()),Ef.apply(e,arguments),e}function jde(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function zde(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function QY(e){var t=1,n=e(jde(t),zde(t));return n.constant=function(r){return arguments.length?e(jde(t=+r),zde(t)):t},Cv(n)}function jPe(){var e=QY(Q6());return e.copy=function(){return tI(e,jPe()).constant(e.constant())},Ef.apply(e,arguments)}function Ude(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function MTt(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function FTt(e){return e<0?-e*e:e*e}function JY(e){var t=e(iu,iu),n=1;function r(){return n===1?e(iu,iu):n===.5?e(MTt,FTt):e(Ude(n),Ude(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},Cv(t)}function ZY(){var e=JY(Q6());return e.copy=function(){return tI(e,ZY()).exponent(e.exponent())},Ef.apply(e,arguments),e}function BTt(){return ZY.apply(null,arguments).exponent(.5)}function zPe(){var e=[],t=[],n=[],r;function i(){var o=0,a=Math.max(1,t.length);for(n=new Array(a-1);++o<a;)n[o-1]=ATt(e,o/a);return s}function s(o){return o==null||isNaN(o=+o)?r:t[X6(n,o)]}return s.invertExtent=function(o){var a=t.indexOf(o);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},s.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let a of o)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(GT),i()},s.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},s.unknown=function(o){return arguments.length?(r=o,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return zPe().domain(e).range(t).unknown(r)},Ef.apply(s,arguments)}function UPe(){var e=0,t=1,n=1,r=[.5],i=[0,1],s;function o(u){return u!=null&&u<=u?i[X6(r,u,0,n)]:s}function a(){var u=-1;for(r=new Array(n);++u<n;)r[u]=((u+1)*t-(u-n)*e)/(n+1);return o}return o.domain=function(u){return arguments.length?([e,t]=u,e=+e,t=+t,a()):[e,t]},o.range=function(u){return arguments.length?(n=(i=Array.from(u)).length-1,a()):i.slice()},o.invertExtent=function(u){var l=i.indexOf(u);return l<0?[NaN,NaN]:l<1?[e,r[0]]:l>=n?[r[n-1],t]:[r[l-1],r[l]]},o.unknown=function(u){return arguments.length&&(s=u),o},o.thresholds=function(){return r.slice()},o.copy=function(){return UPe().domain([e,t]).range(i).unknown(s)},Ef.apply(Cv(o),arguments)}function VPe(){var e=[.5],t=[0,1],n,r=1;function i(s){return s!=null&&s<=s?t[X6(e,s,0,r)]:n}return i.domain=function(s){return arguments.length?(e=Array.from(s),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var o=t.indexOf(s);return[e[o-1],e[o]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return VPe().domain(e).range(t).unknown(n)},Ef.apply(i,arguments)}const lB=new Date,cB=new Date;function As(e,t,n,r){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=(s,o)=>(t(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,a)=>{const u=[];if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return u;let l;do u.push(l=new Date(+s)),t(s,a),e(s);while(l<s&&s<o);return u},i.filter=s=>As(o=>{if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;t(o,-1),!s(o););else for(;--a>=0;)for(;t(o,1),!s(o););}),n&&(i.count=(s,o)=>(lB.setTime(+s),cB.setTime(+o),e(lB),e(cB),Math.floor(n(lB,cB))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?o=>r(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const yw=As(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);yw.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?As(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):yw);yw.range;const Yh=1e3,Ul=Yh*60,Kh=Ul*60,Cp=Kh*24,eK=Cp*7,Vde=Cp*30,fB=Cp*365,Xh=As(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Yh)},(e,t)=>(t-e)/Yh,e=>e.getUTCSeconds());Xh.range;const J6=As(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Yh)},(e,t)=>{e.setTime(+e+t*Ul)},(e,t)=>(t-e)/Ul,e=>e.getMinutes());J6.range;const Z6=As(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Ul)},(e,t)=>(t-e)/Ul,e=>e.getUTCMinutes());Z6.range;const e4=As(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Yh-e.getMinutes()*Ul)},(e,t)=>{e.setTime(+e+t*Kh)},(e,t)=>(t-e)/Kh,e=>e.getHours());e4.range;const t4=As(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Kh)},(e,t)=>(t-e)/Kh,e=>e.getUTCHours());t4.range;const up=As(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Ul)/Cp,e=>e.getDate()-1);up.range;const wg=As(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Cp,e=>e.getUTCDate()-1);wg.range;const HPe=As(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Cp,e=>Math.floor(e/Cp));HPe.range;function Iv(e){return As(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Ul)/eK)}const NE=Iv(0),ID=Iv(1),jTt=Iv(2),zTt=Iv(3),vw=Iv(4),UTt=Iv(5),VTt=Iv(6);NE.range;ID.range;jTt.range;zTt.range;vw.range;UTt.range;VTt.range;function Ov(e){return As(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/eK)}const DE=Ov(0),OD=Ov(1),HTt=Ov(2),qTt=Ov(3),_w=Ov(4),WTt=Ov(5),GTt=Ov(6);DE.range;OD.range;HTt.range;qTt.range;_w.range;WTt.range;GTt.range;const fA=As(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());fA.range;const dA=As(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());dA.range;const Fd=As(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Fd.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:As(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Fd.range;const Bd=As(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Bd.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:As(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Bd.range;function dB(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function YTt(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function KTt(e){let t,n,r;e.length!==2?(t=dB,n=(a,u)=>dB(e(a),u),r=(a,u)=>e(a)-u):(t=e===dB||e===YTt?e:XTt,n=e,r=e);function i(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<0?l=f+1:c=f}while(l<c)}return l}function s(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<=0?l=f+1:c=f}while(l<c)}return l}function o(a,u,l=0,c=a.length){const f=i(a,u,l,c-1);return f>l&&r(a[f-1],u)>-r(a[f],u)?f-1:f}return{left:i,center:o,right:s}}function XTt(){return 0}const QTt=Math.sqrt(50),JTt=Math.sqrt(10),ZTt=Math.sqrt(2);function qPe(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=QTt?10:s>=JTt?5:s>=ZTt?2:1;let a,u,l;return i<0?(l=Math.pow(10,-i)/o,a=Math.round(e*l),u=Math.round(t*l),a/l<e&&++a,u/l>t&&--u,l=-l):(l=Math.pow(10,i)*o,a=Math.round(e/l),u=Math.round(t/l),a*l<e&&++a,u*l>t&&--u),u<a&&.5<=n&&n<2?qPe(e,t,n*2):[a,u,l]}function Hde(e,t,n){return t=+t,e=+e,n=+n,qPe(e,t,n)[2]}function qde(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?Hde(t,e,n):Hde(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function WPe(e,t,n,r,i,s){const o=[[Xh,1,Yh],[Xh,5,5*Yh],[Xh,15,15*Yh],[Xh,30,30*Yh],[s,1,Ul],[s,5,5*Ul],[s,15,15*Ul],[s,30,30*Ul],[i,1,Kh],[i,3,3*Kh],[i,6,6*Kh],[i,12,12*Kh],[r,1,Cp],[r,2,2*Cp],[n,1,eK],[t,1,Vde],[t,3,3*Vde],[e,1,fB]];function a(l,c,f){const d=c<l;d&&([l,c]=[c,l]);const h=f&&typeof f.range=="function"?f:u(l,c,f),p=h?h.range(l,+c+1):[];return d?p.reverse():p}function u(l,c,f){const d=Math.abs(c-l)/f,h=KTt(([,,g])=>g).right(o,d);if(h===o.length)return e.every(qde(l/fB,c/fB,f));if(h===0)return yw.every(Math.max(qde(l,c,f),1));const[p,m]=o[d/o[h-1][2]<o[h][2]/d?h-1:h];return p.every(m)}return[a,u]}const[e2t,t2t]=WPe(Bd,dA,DE,HPe,t4,Z6),[n2t,r2t]=WPe(Fd,fA,NE,up,e4,J6);function hB(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function pB(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Zx(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function GPe(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,o=e.shortDays,a=e.months,u=e.shortMonths,l=eS(i),c=tS(i),f=eS(s),d=tS(s),h=eS(o),p=tS(o),m=eS(a),g=tS(a),y=eS(u),v=tS(u),_={a:V,A:j,b:G,B:U,c:null,d:Qde,e:Qde,f:A2t,g:L2t,G:F2t,H:x2t,I:S2t,j:T2t,L:YPe,m:C2t,M:I2t,p:P,q:k,Q:ehe,s:the,S:O2t,u:P2t,U:k2t,V:$2t,w:R2t,W:N2t,x:null,X:null,y:D2t,Y:M2t,Z:B2t,"%":Zde},b={a:H,A:M,b:F,B:J,c:null,d:Jde,e:Jde,f:V2t,g:Z2t,G:tAt,H:j2t,I:z2t,j:U2t,L:XPe,m:H2t,M:q2t,p:se,q:ae,Q:ehe,s:the,S:W2t,u:G2t,U:Y2t,V:K2t,w:X2t,W:Q2t,x:null,X:null,y:J2t,Y:eAt,Z:nAt,"%":Zde},E={a:C,A:O,b:z,B:N,c:$,d:Kde,e:Kde,f:_2t,g:Yde,G:Gde,H:Xde,I:Xde,j:m2t,L:v2t,m:p2t,M:g2t,p:I,q:h2t,Q:w2t,s:E2t,S:y2t,u:u2t,U:l2t,V:c2t,w:a2t,W:f2t,x:D,X:B,y:Yde,Y:Gde,Z:d2t,"%":b2t};_.x=w(n,_),_.X=w(r,_),_.c=w(t,_),b.x=w(n,b),b.X=w(r,b),b.c=w(t,b);function w(ce,le){return function(ge){var ue=[],Fe=-1,ke=0,Ge=ce.length,Re,Oe,Le;for(ge instanceof Date||(ge=new Date(+ge));++Fe<Ge;)ce.charCodeAt(Fe)===37&&(ue.push(ce.slice(ke,Fe)),(Oe=Wde[Re=ce.charAt(++Fe)])!=null?Re=ce.charAt(++Fe):Oe=Re==="e"?" ":"0",(Le=le[Re])&&(Re=Le(ge,Oe)),ue.push(Re),ke=Fe+1);return ue.push(ce.slice(ke,Fe)),ue.join("")}}function x(ce,le){return function(ge){var ue=Zx(1900,void 0,1),Fe=S(ue,ce,ge+="",0),ke,Ge;if(Fe!=ge.length)return null;if("Q"in ue)return new Date(ue.Q);if("s"in ue)return new Date(ue.s*1e3+("L"in ue?ue.L:0));if(le&&!("Z"in ue)&&(ue.Z=0),"p"in ue&&(ue.H=ue.H%12+ue.p*12),ue.m===void 0&&(ue.m="q"in ue?ue.q:0),"V"in ue){if(ue.V<1||ue.V>53)return null;"w"in ue||(ue.w=1),"Z"in ue?(ke=pB(Zx(ue.y,0,1)),Ge=ke.getUTCDay(),ke=Ge>4||Ge===0?OD.ceil(ke):OD(ke),ke=wg.offset(ke,(ue.V-1)*7),ue.y=ke.getUTCFullYear(),ue.m=ke.getUTCMonth(),ue.d=ke.getUTCDate()+(ue.w+6)%7):(ke=hB(Zx(ue.y,0,1)),Ge=ke.getDay(),ke=Ge>4||Ge===0?ID.ceil(ke):ID(ke),ke=up.offset(ke,(ue.V-1)*7),ue.y=ke.getFullYear(),ue.m=ke.getMonth(),ue.d=ke.getDate()+(ue.w+6)%7)}else("W"in ue||"U"in ue)&&("w"in ue||(ue.w="u"in ue?ue.u%7:"W"in ue?1:0),Ge="Z"in ue?pB(Zx(ue.y,0,1)).getUTCDay():hB(Zx(ue.y,0,1)).getDay(),ue.m=0,ue.d="W"in ue?(ue.w+6)%7+ue.W*7-(Ge+5)%7:ue.w+ue.U*7-(Ge+6)%7);return"Z"in ue?(ue.H+=ue.Z/100|0,ue.M+=ue.Z%100,pB(ue)):hB(ue)}}function S(ce,le,ge,ue){for(var Fe=0,ke=le.length,Ge=ge.length,Re,Oe;Fe<ke;){if(ue>=Ge)return-1;if(Re=le.charCodeAt(Fe++),Re===37){if(Re=le.charAt(Fe++),Oe=E[Re in Wde?le.charAt(Fe++):Re],!Oe||(ue=Oe(ce,ge,ue))<0)return-1}else if(Re!=ge.charCodeAt(ue++))return-1}return ue}function I(ce,le,ge){var ue=l.exec(le.slice(ge));return ue?(ce.p=c.get(ue[0].toLowerCase()),ge+ue[0].length):-1}function C(ce,le,ge){var ue=h.exec(le.slice(ge));return ue?(ce.w=p.get(ue[0].toLowerCase()),ge+ue[0].length):-1}function O(ce,le,ge){var ue=f.exec(le.slice(ge));return ue?(ce.w=d.get(ue[0].toLowerCase()),ge+ue[0].length):-1}function z(ce,le,ge){var ue=y.exec(le.slice(ge));return ue?(ce.m=v.get(ue[0].toLowerCase()),ge+ue[0].length):-1}function N(ce,le,ge){var ue=m.exec(le.slice(ge));return ue?(ce.m=g.get(ue[0].toLowerCase()),ge+ue[0].length):-1}function $(ce,le,ge){return S(ce,t,le,ge)}function D(ce,le,ge){return S(ce,n,le,ge)}function B(ce,le,ge){return S(ce,r,le,ge)}function V(ce){return o[ce.getDay()]}function j(ce){return s[ce.getDay()]}function G(ce){return u[ce.getMonth()]}function U(ce){return a[ce.getMonth()]}function P(ce){return i[+(ce.getHours()>=12)]}function k(ce){return 1+~~(ce.getMonth()/3)}function H(ce){return o[ce.getUTCDay()]}function M(ce){return s[ce.getUTCDay()]}function F(ce){return u[ce.getUTCMonth()]}function J(ce){return a[ce.getUTCMonth()]}function se(ce){return i[+(ce.getUTCHours()>=12)]}function ae(ce){return 1+~~(ce.getUTCMonth()/3)}return{format:function(ce){var le=w(ce+="",_);return le.toString=function(){return ce},le},parse:function(ce){var le=x(ce+="",!1);return le.toString=function(){return ce},le},utcFormat:function(ce){var le=w(ce+="",b);return le.toString=function(){return ce},le},utcParse:function(ce){var le=x(ce+="",!0);return le.toString=function(){return ce},le}}}var Wde={"-":"",_:" ",0:"0"},Ys=/^\s*\d+/,i2t=/^%/,s2t=/[\\^$*+?|[\]().{}]/g;function sr(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function o2t(e){return e.replace(s2t,"\\$&")}function eS(e){return new RegExp("^(?:"+e.map(o2t).join("|")+")","i")}function tS(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function a2t(e,t,n){var r=Ys.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function u2t(e,t,n){var r=Ys.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function l2t(e,t,n){var r=Ys.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function c2t(e,t,n){var r=Ys.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function f2t(e,t,n){var r=Ys.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function Gde(e,t,n){var r=Ys.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Yde(e,t,n){var r=Ys.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function d2t(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function h2t(e,t,n){var r=Ys.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function p2t(e,t,n){var r=Ys.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function Kde(e,t,n){var r=Ys.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function m2t(e,t,n){var r=Ys.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function Xde(e,t,n){var r=Ys.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function g2t(e,t,n){var r=Ys.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function y2t(e,t,n){var r=Ys.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function v2t(e,t,n){var r=Ys.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function _2t(e,t,n){var r=Ys.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function b2t(e,t,n){var r=i2t.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function w2t(e,t,n){var r=Ys.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function E2t(e,t,n){var r=Ys.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function Qde(e,t){return sr(e.getDate(),t,2)}function x2t(e,t){return sr(e.getHours(),t,2)}function S2t(e,t){return sr(e.getHours()%12||12,t,2)}function T2t(e,t){return sr(1+up.count(Fd(e),e),t,3)}function YPe(e,t){return sr(e.getMilliseconds(),t,3)}function A2t(e,t){return YPe(e,t)+"000"}function C2t(e,t){return sr(e.getMonth()+1,t,2)}function I2t(e,t){return sr(e.getMinutes(),t,2)}function O2t(e,t){return sr(e.getSeconds(),t,2)}function P2t(e){var t=e.getDay();return t===0?7:t}function k2t(e,t){return sr(NE.count(Fd(e)-1,e),t,2)}function KPe(e){var t=e.getDay();return t>=4||t===0?vw(e):vw.ceil(e)}function $2t(e,t){return e=KPe(e),sr(vw.count(Fd(e),e)+(Fd(e).getDay()===4),t,2)}function R2t(e){return e.getDay()}function N2t(e,t){return sr(ID.count(Fd(e)-1,e),t,2)}function D2t(e,t){return sr(e.getFullYear()%100,t,2)}function L2t(e,t){return e=KPe(e),sr(e.getFullYear()%100,t,2)}function M2t(e,t){return sr(e.getFullYear()%1e4,t,4)}function F2t(e,t){var n=e.getDay();return e=n>=4||n===0?vw(e):vw.ceil(e),sr(e.getFullYear()%1e4,t,4)}function B2t(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+sr(t/60|0,"0",2)+sr(t%60,"0",2)}function Jde(e,t){return sr(e.getUTCDate(),t,2)}function j2t(e,t){return sr(e.getUTCHours(),t,2)}function z2t(e,t){return sr(e.getUTCHours()%12||12,t,2)}function U2t(e,t){return sr(1+wg.count(Bd(e),e),t,3)}function XPe(e,t){return sr(e.getUTCMilliseconds(),t,3)}function V2t(e,t){return XPe(e,t)+"000"}function H2t(e,t){return sr(e.getUTCMonth()+1,t,2)}function q2t(e,t){return sr(e.getUTCMinutes(),t,2)}function W2t(e,t){return sr(e.getUTCSeconds(),t,2)}function G2t(e){var t=e.getUTCDay();return t===0?7:t}function Y2t(e,t){return sr(DE.count(Bd(e)-1,e),t,2)}function QPe(e){var t=e.getUTCDay();return t>=4||t===0?_w(e):_w.ceil(e)}function K2t(e,t){return e=QPe(e),sr(_w.count(Bd(e),e)+(Bd(e).getUTCDay()===4),t,2)}function X2t(e){return e.getUTCDay()}function Q2t(e,t){return sr(OD.count(Bd(e)-1,e),t,2)}function J2t(e,t){return sr(e.getUTCFullYear()%100,t,2)}function Z2t(e,t){return e=QPe(e),sr(e.getUTCFullYear()%100,t,2)}function eAt(e,t){return sr(e.getUTCFullYear()%1e4,t,4)}function tAt(e,t){var n=e.getUTCDay();return e=n>=4||n===0?_w(e):_w.ceil(e),sr(e.getUTCFullYear()%1e4,t,4)}function nAt(){return"+0000"}function Zde(){return"%"}function ehe(e){return+e}function the(e){return Math.floor(+e/1e3)}var c_,tK,JPe,n4,ZPe;rAt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function rAt(e){return c_=GPe(e),tK=c_.format,JPe=c_.parse,n4=c_.utcFormat,ZPe=c_.utcParse,c_}function iAt(e){return new Date(e)}function sAt(e){return e instanceof Date?+e:+new Date(+e)}function nK(e,t,n,r,i,s,o,a,u,l){var c=DPe(),f=c.invert,d=c.domain,h=l(".%L"),p=l(":%S"),m=l("%I:%M"),g=l("%I %p"),y=l("%a %d"),v=l("%b %d"),_=l("%B"),b=l("%Y");function E(w){return(u(w)<w?h:a(w)<w?p:o(w)<w?m:s(w)<w?g:r(w)<w?i(w)<w?y:v:n(w)<w?_:b)(w)}return c.invert=function(w){return new Date(f(w))},c.domain=function(w){return arguments.length?d(Array.from(w,sAt)):d().map(iAt)},c.ticks=function(w){var x=d();return e(x[0],x[x.length-1],w??10)},c.tickFormat=function(w,x){return x==null?E:l(x)},c.nice=function(w){var x=d();return(!w||typeof w.range!="function")&&(w=t(x[0],x[x.length-1],w??10)),w?d(FPe(x,w)):c},c.copy=function(){return tI(c,nK(e,t,n,r,i,s,o,a,u,l))},c}function eke(){return Ef.apply(nK(n2t,r2t,Fd,fA,NE,up,e4,J6,Xh,tK).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function oAt(){return Ef.apply(nK(e2t,t2t,Bd,dA,DE,wg,t4,Z6,Xh,n4).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function r4(){var e=0,t=1,n,r,i,s,o=iu,a=!1,u;function l(f){return f==null||isNaN(f=+f)?u:o(i===0?.5:(f=(s(f)-n)*i,a?Math.max(0,Math.min(1,f)):f))}l.domain=function(f){return arguments.length?([e,t]=f,n=s(e=+e),r=s(t=+t),i=n===r?0:1/(r-n),l):[e,t]},l.clamp=function(f){return arguments.length?(a=!!f,l):a},l.interpolator=function(f){return arguments.length?(o=f,l):o};function c(f){return function(d){var h,p;return arguments.length?([h,p]=d,o=f(h,p),l):[o(0),o(1)]}}return l.range=c(Xp),l.rangeRound=c(QC),l.unknown=function(f){return arguments.length?(u=f,l):u},function(f){return s=f,n=f(e),r=f(t),i=n===r?0:1/(r-n),l}}function O0(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function rK(){var e=Cv(r4()(iu));return e.copy=function(){return O0(e,rK())},I0.apply(e,arguments)}function tke(){var e=XY(r4()).domain([1,10]);return e.copy=function(){return O0(e,tke()).base(e.base())},I0.apply(e,arguments)}function nke(){var e=QY(r4());return e.copy=function(){return O0(e,nke()).constant(e.constant())},I0.apply(e,arguments)}function iK(){var e=JY(r4());return e.copy=function(){return O0(e,iK()).exponent(e.exponent())},I0.apply(e,arguments)}function aAt(){return iK.apply(null,arguments).exponent(.5)}function i4(){var e=0,t=.5,n=1,r=1,i,s,o,a,u,l=iu,c,f=!1,d;function h(m){return isNaN(m=+m)?d:(m=.5+((m=+c(m))-s)*(r*m<r*s?a:u),l(f?Math.max(0,Math.min(1,m)):m))}h.domain=function(m){return arguments.length?([e,t,n]=m,i=c(e=+e),s=c(t=+t),o=c(n=+n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h):[e,t,n]},h.clamp=function(m){return arguments.length?(f=!!m,h):f},h.interpolator=function(m){return arguments.length?(l=m,h):l};function p(m){return function(g){var y,v,_;return arguments.length?([y,v,_]=g,l=jY(m,[y,v,_]),h):[l(0),l(.5),l(1)]}}return h.range=p(Xp),h.rangeRound=p(QC),h.unknown=function(m){return arguments.length?(d=m,h):d},function(m){return c=m,i=m(e),s=m(t),o=m(n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h}}function rke(){var e=Cv(i4()(iu));return e.copy=function(){return O0(e,rke())},I0.apply(e,arguments)}function ike(){var e=XY(i4()).domain([.1,1,10]);return e.copy=function(){return O0(e,ike()).base(e.base())},I0.apply(e,arguments)}function ske(){var e=QY(i4());return e.copy=function(){return O0(e,ske()).constant(e.constant())},I0.apply(e,arguments)}function sK(){var e=JY(i4());return e.copy=function(){return O0(e,sK()).exponent(e.exponent())},I0.apply(e,arguments)}function uAt(){return sK.apply(null,arguments).exponent(.5)}function lAt(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const oke=lAt("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function yn(e){return function(){return e}}const nhe=Math.abs,Po=Math.atan2,J0=Math.cos,cAt=Math.max,mB=Math.min,Rf=Math.sin,Vy=Math.sqrt,No=1e-12,bw=Math.PI,PD=bw/2,YT=2*bw;function fAt(e){return e>1?0:e<-1?bw:Math.acos(e)}function rhe(e){return e>=1?PD:e<=-1?-PD:Math.asin(e)}function s4(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new qY(t)}function dAt(e){return e.innerRadius}function hAt(e){return e.outerRadius}function pAt(e){return e.startAngle}function mAt(e){return e.endAngle}function gAt(e){return e&&e.padAngle}function yAt(e,t,n,r,i,s,o,a){var u=n-e,l=r-t,c=o-i,f=a-s,d=f*u-c*l;if(!(d*d<No))return d=(c*(t-s)-f*(e-i))/d,[e+d*u,t+d*l]}function yP(e,t,n,r,i,s,o){var a=e-n,u=t-r,l=(o?s:-s)/Vy(a*a+u*u),c=l*u,f=-l*a,d=e+c,h=t+f,p=n+c,m=r+f,g=(d+p)/2,y=(h+m)/2,v=p-d,_=m-h,b=v*v+_*_,E=i-s,w=d*m-p*h,x=(_<0?-1:1)*Vy(cAt(0,E*E*b-w*w)),S=(w*_-v*x)/b,I=(-w*v-_*x)/b,C=(w*_+v*x)/b,O=(-w*v+_*x)/b,z=S-g,N=I-y,$=C-g,D=O-y;return z*z+N*N>$*$+D*D&&(S=C,I=O),{cx:S,cy:I,x01:-c,y01:-f,x11:S*(i/E-1),y11:I*(i/E-1)}}function BU(){var e=dAt,t=hAt,n=yn(0),r=null,i=pAt,s=mAt,o=gAt,a=null,u=s4(l);function l(){var c,f,d=+e.apply(this,arguments),h=+t.apply(this,arguments),p=i.apply(this,arguments)-PD,m=s.apply(this,arguments)-PD,g=nhe(m-p),y=m>p;if(a||(a=c=u()),h<d&&(f=h,h=d,d=f),!(h>No))a.moveTo(0,0);else if(g>YT-No)a.moveTo(h*J0(p),h*Rf(p)),a.arc(0,0,h,p,m,!y),d>No&&(a.moveTo(d*J0(m),d*Rf(m)),a.arc(0,0,d,m,p,y));else{var v=p,_=m,b=p,E=m,w=g,x=g,S=o.apply(this,arguments)/2,I=S>No&&(r?+r.apply(this,arguments):Vy(d*d+h*h)),C=mB(nhe(h-d)/2,+n.apply(this,arguments)),O=C,z=C,N,$;if(I>No){var D=rhe(I/d*Rf(S)),B=rhe(I/h*Rf(S));(w-=D*2)>No?(D*=y?1:-1,b+=D,E-=D):(w=0,b=E=(p+m)/2),(x-=B*2)>No?(B*=y?1:-1,v+=B,_-=B):(x=0,v=_=(p+m)/2)}var V=h*J0(v),j=h*Rf(v),G=d*J0(E),U=d*Rf(E);if(C>No){var P=h*J0(_),k=h*Rf(_),H=d*J0(b),M=d*Rf(b),F;if(g<bw)if(F=yAt(V,j,H,M,P,k,G,U)){var J=V-F[0],se=j-F[1],ae=P-F[0],ce=k-F[1],le=1/Rf(fAt((J*ae+se*ce)/(Vy(J*J+se*se)*Vy(ae*ae+ce*ce)))/2),ge=Vy(F[0]*F[0]+F[1]*F[1]);O=mB(C,(d-ge)/(le-1)),z=mB(C,(h-ge)/(le+1))}else O=z=0}x>No?z>No?(N=yP(H,M,V,j,h,z,y),$=yP(P,k,G,U,h,z,y),a.moveTo(N.cx+N.x01,N.cy+N.y01),z<C?a.arc(N.cx,N.cy,z,Po(N.y01,N.x01),Po($.y01,$.x01),!y):(a.arc(N.cx,N.cy,z,Po(N.y01,N.x01),Po(N.y11,N.x11),!y),a.arc(0,0,h,Po(N.cy+N.y11,N.cx+N.x11),Po($.cy+$.y11,$.cx+$.x11),!y),a.arc($.cx,$.cy,z,Po($.y11,$.x11),Po($.y01,$.x01),!y))):(a.moveTo(V,j),a.arc(0,0,h,v,_,!y)):a.moveTo(V,j),!(d>No)||!(w>No)?a.lineTo(G,U):O>No?(N=yP(G,U,P,k,d,-O,y),$=yP(V,j,H,M,d,-O,y),a.lineTo(N.cx+N.x01,N.cy+N.y01),O<C?a.arc(N.cx,N.cy,O,Po(N.y01,N.x01),Po($.y01,$.x01),!y):(a.arc(N.cx,N.cy,O,Po(N.y01,N.x01),Po(N.y11,N.x11),!y),a.arc(0,0,d,Po(N.cy+N.y11,N.cx+N.x11),Po($.cy+$.y11,$.cx+$.x11),y),a.arc($.cx,$.cy,O,Po($.y11,$.x11),Po($.y01,$.x01),!y))):a.arc(0,0,d,E,b,y)}if(a.closePath(),c)return a=null,c+""||null}return l.centroid=function(){var c=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,f=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-bw/2;return[J0(f)*c,Rf(f)*c]},l.innerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:yn(+c),l):e},l.outerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:yn(+c),l):t},l.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:yn(+c),l):n},l.padRadius=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:yn(+c),l):r},l.startAngle=function(c){return arguments.length?(i=typeof c=="function"?c:yn(+c),l):i},l.endAngle=function(c){return arguments.length?(s=typeof c=="function"?c:yn(+c),l):s},l.padAngle=function(c){return arguments.length?(o=typeof c=="function"?c:yn(+c),l):o},l.context=function(c){return arguments.length?(a=c??null,l):a},l}function o4(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function ake(e){this._context=e}ake.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function oK(e){return new ake(e)}function uke(e){return e[0]}function lke(e){return e[1]}function cke(e,t){var n=yn(!0),r=null,i=oK,s=null,o=s4(a);e=typeof e=="function"?e:e===void 0?uke:yn(e),t=typeof t=="function"?t:t===void 0?lke:yn(t);function a(u){var l,c=(u=o4(u)).length,f,d=!1,h;for(r==null&&(s=i(h=o())),l=0;l<=c;++l)!(l<c&&n(f=u[l],l,u))===d&&((d=!d)?s.lineStart():s.lineEnd()),d&&s.point(+e(f,l,u),+t(f,l,u));if(h)return s=null,h+""||null}return a.x=function(u){return arguments.length?(e=typeof u=="function"?u:yn(+u),a):e},a.y=function(u){return arguments.length?(t=typeof u=="function"?u:yn(+u),a):t},a.defined=function(u){return arguments.length?(n=typeof u=="function"?u:yn(!!u),a):n},a.curve=function(u){return arguments.length?(i=u,r!=null&&(s=i(r)),a):i},a.context=function(u){return arguments.length?(u==null?r=s=null:s=i(r=u),a):r},a}function fke(e,t,n){var r=null,i=yn(!0),s=null,o=oK,a=null,u=s4(l);e=typeof e=="function"?e:e===void 0?uke:yn(+e),t=typeof t=="function"?t:yn(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?lke:yn(+n);function l(f){var d,h,p,m=(f=o4(f)).length,g,y=!1,v,_=new Array(m),b=new Array(m);for(s==null&&(a=o(v=u())),d=0;d<=m;++d){if(!(d<m&&i(g=f[d],d,f))===y)if(y=!y)h=d,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),p=d-1;p>=h;--p)a.point(_[p],b[p]);a.lineEnd(),a.areaEnd()}y&&(_[d]=+e(g,d,f),b[d]=+t(g,d,f),a.point(r?+r(g,d,f):_[d],n?+n(g,d,f):b[d]))}if(v)return a=null,v+""||null}function c(){return cke().defined(i).curve(o).context(s)}return l.x=function(f){return arguments.length?(e=typeof f=="function"?f:yn(+f),r=null,l):e},l.x0=function(f){return arguments.length?(e=typeof f=="function"?f:yn(+f),l):e},l.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:yn(+f),l):r},l.y=function(f){return arguments.length?(t=typeof f=="function"?f:yn(+f),n=null,l):t},l.y0=function(f){return arguments.length?(t=typeof f=="function"?f:yn(+f),l):t},l.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:yn(+f),l):n},l.lineX0=l.lineY0=function(){return c().x(e).y(t)},l.lineY1=function(){return c().x(e).y(n)},l.lineX1=function(){return c().x(r).y(t)},l.defined=function(f){return arguments.length?(i=typeof f=="function"?f:yn(!!f),l):i},l.curve=function(f){return arguments.length?(o=f,s!=null&&(a=o(s)),l):o},l.context=function(f){return arguments.length?(f==null?s=a=null:a=o(s=f),l):s},l}function vAt(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function _At(e){return e}function bAt(){var e=_At,t=vAt,n=null,r=yn(0),i=yn(YT),s=yn(0);function o(a){var u,l=(a=o4(a)).length,c,f,d=0,h=new Array(l),p=new Array(l),m=+r.apply(this,arguments),g=Math.min(YT,Math.max(-YT,i.apply(this,arguments)-m)),y,v=Math.min(Math.abs(g)/l,s.apply(this,arguments)),_=v*(g<0?-1:1),b;for(u=0;u<l;++u)(b=p[h[u]=u]=+e(a[u],u,a))>0&&(d+=b);for(t!=null?h.sort(function(E,w){return t(p[E],p[w])}):n!=null&&h.sort(function(E,w){return n(a[E],a[w])}),u=0,f=d?(g-l*_)/d:0;u<l;++u,m=y)c=h[u],b=p[c],y=m+(b>0?b*f:0)+_,p[c]={data:a[c],index:u,value:b,startAngle:m,endAngle:y,padAngle:v};return p}return o.value=function(a){return arguments.length?(e=typeof a=="function"?a:yn(+a),o):e},o.sortValues=function(a){return arguments.length?(t=a,n=null,o):t},o.sort=function(a){return arguments.length?(n=a,t=null,o):n},o.startAngle=function(a){return arguments.length?(r=typeof a=="function"?a:yn(+a),o):r},o.endAngle=function(a){return arguments.length?(i=typeof a=="function"?a:yn(+a),o):i},o.padAngle=function(a){return arguments.length?(s=typeof a=="function"?a:yn(+a),o):s},o}const wAt={draw(e,t){const n=Vy(t/bw);e.moveTo(n,0),e.arc(0,0,n,0,YT)}};function EAt(e,t){let n=null,r=s4(i);e=typeof e=="function"?e:yn(e||wAt),t=typeof t=="function"?t:yn(t===void 0?64:+t);function i(){let s;if(n||(n=s=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(e=typeof s=="function"?s:yn(s),i):e},i.size=function(s){return arguments.length?(t=typeof s=="function"?s:yn(+s),i):t},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function Hg(){}function kD(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function a4(e){this._context=e}a4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:kD(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:kD(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function xAt(e){return new a4(e)}function dke(e){this._context=e}dke.prototype={areaStart:Hg,areaEnd:Hg,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:kD(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function SAt(e){return new dke(e)}function hke(e){this._context=e}hke.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:kD(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function TAt(e){return new hke(e)}function pke(e,t){this._basis=new a4(e),this._beta=t}pke.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],s=e[n]-r,o=t[n]-i,a=-1,u;++a<=n;)u=a/n,this._basis.point(this._beta*e[a]+(1-this._beta)*(r+u*s),this._beta*t[a]+(1-this._beta)*(i+u*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const AAt=function e(t){function n(r){return t===1?new a4(r):new pke(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function $D(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function aK(e,t){this._context=e,this._k=(1-t)/6}aK.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:$D(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:$D(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const CAt=function e(t){function n(r){return new aK(r,t)}return n.tension=function(r){return e(+r)},n}(0);function uK(e,t){this._context=e,this._k=(1-t)/6}uK.prototype={areaStart:Hg,areaEnd:Hg,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:$D(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const IAt=function e(t){function n(r){return new uK(r,t)}return n.tension=function(r){return e(+r)},n}(0);function lK(e,t){this._context=e,this._k=(1-t)/6}lK.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:$D(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const OAt=function e(t){function n(r){return new lK(r,t)}return n.tension=function(r){return e(+r)},n}(0);function cK(e,t,n){var r=e._x1,i=e._y1,s=e._x2,o=e._y2;if(e._l01_a>No){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,u=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/u,i=(i*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/u}if(e._l23_a>No){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*l+e._x1*e._l23_2a-t*e._l12_2a)/c,o=(o*l+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,s,o,e._x2,e._y2)}function mke(e,t){this._context=e,this._alpha=t}mke.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:cK(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const PAt=function e(t){function n(r){return t?new mke(r,t):new aK(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function gke(e,t){this._context=e,this._alpha=t}gke.prototype={areaStart:Hg,areaEnd:Hg,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:cK(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const kAt=function e(t){function n(r){return t?new gke(r,t):new uK(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function yke(e,t){this._context=e,this._alpha=t}yke.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:cK(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const $At=function e(t){function n(r){return t?new yke(r,t):new lK(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function vke(e){this._context=e}vke.prototype={areaStart:Hg,areaEnd:Hg,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function RAt(e){return new vke(e)}function ihe(e){return e<0?-1:1}function she(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),a=(s*i+o*r)/(r+i);return(ihe(s)+ihe(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function ohe(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function gB(e,t,n){var r=e._x0,i=e._y0,s=e._x1,o=e._y1,a=(s-r)/3;e._context.bezierCurveTo(r+a,i+a*t,s-a,o-a*n,s,o)}function RD(e){this._context=e}RD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:gB(this,this._t0,ohe(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,gB(this,ohe(this,n=she(this,e,t)),n);break;default:gB(this,this._t0,n=she(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function _ke(e){this._context=new bke(e)}(_ke.prototype=Object.create(RD.prototype)).point=function(e,t){RD.prototype.point.call(this,t,e)};function bke(e){this._context=e}bke.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function NAt(e){return new RD(e)}function DAt(e){return new _ke(e)}function wke(e){this._context=e}wke.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=ahe(e),i=ahe(t),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function ahe(e){var t,n=e.length-1,r,i=new Array(n),s=new Array(n),o=new Array(n);for(i[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,o[t]-=r*o[t-1];for(i[n-1]=o[n-1]/s[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/s[t];for(s[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function LAt(e){return new wke(e)}function u4(e,t){this._context=e,this._t=t}u4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function MAt(e){return new u4(e,.5)}function FAt(e){return new u4(e,0)}function BAt(e){return new u4(e,1)}function uhe(e,t){if((o=e.length)>1)for(var n=1,r,i,s=e[t[0]],o,a=s.length;n<o;++n)for(i=s,s=e[t[n]],r=0;r<a;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function lhe(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function jAt(e,t){return e[t]}function zAt(e){const t=[];return t.key=e,t}function UAt(){var e=yn([]),t=lhe,n=uhe,r=jAt;function i(s){var o=Array.from(e.apply(this,arguments),zAt),a,u=o.length,l=-1,c;for(const f of s)for(a=0,++l;a<u;++a)(o[a][l]=[0,+r(f,o[a].key,l,s)]).data=f;for(a=0,c=o4(t(o));a<u;++a)o[c[a]].index=a;return n(o,c),o}return i.keys=function(s){return arguments.length?(e=typeof s=="function"?s:yn(Array.from(s)),i):e},i.value=function(s){return arguments.length?(r=typeof s=="function"?s:yn(+s),i):r},i.order=function(s){return arguments.length?(t=s==null?lhe:typeof s=="function"?s:yn(Array.from(s)),i):t},i.offset=function(s){return arguments.length?(n=s??uhe,i):n},i}function WS(e,t,n){this.k=e,this.x=t,this.y=n}WS.prototype={constructor:WS,scale:function(e){return e===1?this:new WS(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new WS(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};WS.prototype;function fK({xScale:e,yRange:t,vertPosition:n,label:r,ticks:i,isDate:s=!1,showLines:o=!0,compact:a=!1}){const u=A.useMemo(()=>i.length>1?Math.abs(i[1].offset-i[0].offset):e.range()[0]-e.range()[1],[i,e]),l=A.useCallback(c=>(s?n4("%B"):$E(".2s"))(c),[s]);return R.jsxs(R.Fragment,{children:[R.jsx("g",{transform:`translate(${e.range()[0]}, ${n+25})`,children:R.jsx("foreignObject",{width:Math.abs(e.range()[0]-e.range()[1]),height:20,children:R.jsx(Bg,{children:R.jsx(Jl,{spacing:3,children:R.jsx(Rt,{size:a?10:14,style:{color:"#878E95"},children:r})})})})}),R.jsx("path",{transform:`translate(0, ${n})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),o?R.jsx("path",{transform:`translate(0, ${t[1]})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:c,offset:f})=>R.jsxs("g",{transform:`translate(${f}, ${n})`,children:[R.jsx("line",{y2:"6",stroke:"currentColor"}),o?R.jsx("line",{y2:`${-(t[0]-t[1])}`,stroke:"lightgray"}):null,R.jsx("foreignObject",{x:0-u/2,y:10,width:u,height:20,children:R.jsx(Bg,{children:R.jsx(CAe,{withinPortal:!0,label:c,children:R.jsx(Rt,{px:2,size:10,style:{textAlign:"center",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:+c==0?0:l(s?new Date(c):c)})})})})]},c))]})}const VAt=Object.freeze(Object.defineProperty({__proto__:null,XAxisBar:fK},Symbol.toStringTag,{value:"Module"}));function Eke({yScale:e,xRange:t,horizontalPosition:n,label:r,ticks:i,showLines:s,compact:o=!1}){const a=A.useMemo(()=>{const u=i.reduce((l,{value:c})=>{const{length:f}=`${c}`;return f>l?f:l},0);return u>10?60:u*6},[i]);return R.jsxs(R.Fragment,{children:[R.jsx("g",{transform:`translate(${n-a-40}, ${e.range()[1]}) rotate(-90)`,children:R.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:R.jsx(Bg,{children:R.jsx(Jl,{spacing:3,children:R.jsx(Rt,{size:o?10:14,style:{color:"#878E95"},children:r})})})})}),R.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),s?R.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:u,offset:l})=>R.jsxs("g",{transform:`translate(${n}, ${l})`,children:[R.jsx("line",{x2:"-6",stroke:"currentColor"}),s?R.jsx("line",{x2:`${t[1]-t[0]}`,stroke:"lightgray"}):null,R.jsx("g",{style:{transform:`translate(-${a+10}px, -9px)`},children:R.jsx("foreignObject",{width:a,height:20,children:R.jsx(Jl,{style:{width:"100%",height:"100%"},position:"right",children:R.jsx(Rt,{sx:{textOverflow:"ellipsis",overflow:"hidden"},size:10,children:u})})})},u)]},u))]})}const HAt=Object.freeze(Object.defineProperty({__proto__:null,YAxisBar:Eke},Symbol.toStringTag,{value:"Module"})),El={top:15,left:100,right:50,bottom:50};function jU({barsTable:e,parameters:t,data:n}){const[r,{height:i,width:s}]=wb(),o=A.useMemo(()=>s-El.left-El.right,[s]),a=A.useMemo(()=>i-El.top-El.bottom,[i]),u=A.useMemo(()=>{const d=Array.from(new Set(n.map(h=>h[t.category])));return RE(oke).domain(d)},[n,t.category]),l=A.useMemo(()=>e?Ap([El.left,o+El.left]).domain([0,v_t(e.objects().map(d=>d.count))]).nice():null,[e,o]),c=A.useMemo(()=>e?eI([El.top,a+El.top]).domain(e.array(t.category).sort()).paddingInner(.1):null,[e,a,t.category]),f=A.useMemo(()=>!l||!c||!u||!e?null:e.objects().map((d,h)=>d[t.category]===null||d.count===null?null:R.jsxs("g",{children:[R.jsx("rect",{x:El.left,y:c(d[t.category]),fill:u(d[t.category]),height:c.bandwidth(),width:l(d.count)-El.left},h),R.jsx("text",{x:l(d.count)+5,y:c(d[t.category])+c.bandwidth()/2,style:{textAlign:"center",dominantBaseline:"middle",fontSize:14},children:d.count})]},h)),[e,u,t.category,l,c]);return c&&l?R.jsxs("svg",{ref:r,style:{height:"200px",width:"550px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[R.jsx(fK,{xScale:l,yRange:c.range(),vertPosition:a+El.top,showLines:!1,label:"Count",ticks:l.ticks(5).map(d=>({value:d.toString(),offset:l(d)}))}),c?R.jsx(Eke,{yScale:c,horizontalPosition:El.left,xRange:l.range(),label:t.category,ticks:u.domain().map(d=>({value:d,offset:c(d)+c.bandwidth()/2}))}):null,f]}):R.jsx(T0,{})}const qAt=Object.freeze(Object.defineProperty({__proto__:null,Bar:jU,default:jU},Symbol.toStringTag,{value:"Module"})),nr=Array.isArray;function gu(e){return e!=null?nr(e)?e:[e]:[]}function WAt(e=0,t=1/0){return`${che(e)} < row_number() && row_number() <= ${che(t)}`}function che(e){return e<0?`count() + ${e}`:e}class xke{constructor(t){t&&(this._params=t)}params(t){return arguments.length?(t&&(this._params={...this._params,...t}),this):this._params}reify(t){return this.__reify(this,t)}count(t){return this.__count(this,t)}derive(t,n){return this.__derive(this,t,n)}filter(t){return this.__filter(this,t)}slice(t,n){return this.filter(WAt(t,n)).reify()}groupby(...t){return this.__groupby(this,t.flat())}orderby(...t){return this.__orderby(this,t.flat())}relocate(t,n){return this.__relocate(this,gu(t),n)}rename(...t){return this.__rename(this,t.flat())}rollup(t){return this.__rollup(this,t)}sample(t,n){return this.__sample(this,t,n)}select(...t){return this.__select(this,t.flat())}ungroup(){return this.__ungroup(this)}unorder(){return this.__unorder(this)}dedupe(...t){return this.__dedupe(this,t.flat())}impute(t,n){return this.__impute(this,t,n)}fold(t,n){return this.__fold(this,t,n)}pivot(t,n,r){return this.__pivot(this,t,n,r)}spread(t,n){return this.__spread(this,t,n)}unroll(t,n){return this.__unroll(this,t,n)}lookup(t,n,...r){return this.__lookup(this,t,n,r.flat())}join(t,n,r,i){return this.__join(this,t,n,r,i)}join_left(t,n,r,i){const s={...i,left:!0,right:!1};return this.__join(this,t,n,r,s)}join_right(t,n,r,i){const s={...i,left:!1,right:!0};return this.__join(this,t,n,r,s)}join_full(t,n,r,i){const s={...i,left:!0,right:!0};return this.__join(this,t,n,r,s)}cross(t,n,r){return this.__cross(this,t,n,r)}semijoin(t,n){return this.__semijoin(this,t,n)}antijoin(t,n){return this.__antijoin(this,t,n)}concat(...t){return this.__concat(this,t.flat())}union(...t){return this.__union(this,t.flat())}intersect(...t){return this.__intersect(this,t.flat())}except(...t){return this.__except(this,t.flat())}}function vn(e){throw Error(e)}function Ca(e){return typeof e=="number"}function ei(e){return typeof e=="function"}function l4(e,t){const n=Array(e);if(ei(t))for(let r=0;r<e;++r)n[r]=t(r);else n.fill(t);return n}let GAt=class extends xke{constructor(t,n,r,i,s,o,a){super(a),this._names=Object.freeze(t),this._data=r,this._total=n,this._nrows=i?i.count():n,this._mask=n!==this._nrows&&i||null,this._group=s||null,this._order=o||null}create(t){vn("Not implemented")}get[Symbol.toStringTag](){if(!this._names)return"Object";const t=this.numRows()+" row"+(this.numRows()!==1?"s":"");return`Table: ${this.numCols()+" col"+(this.numCols()!==1?"s":"")} x ${t}`+(this.isFiltered()?` (${this.totalRows()} backing)`:"")+(this.isGrouped()?`, ${this._group.size} groups`:"")+(this.isOrdered()?", ordered":"")}isFiltered(){return!!this._mask}isGrouped(){return!!this._group}isOrdered(){return!!this._order}data(){return this._data}mask(){return this._mask}groups(){return this._group}comparator(){return this._order}totalRows(){return this._total}numRows(){return this._nrows}get size(){return this._nrows}numCols(){return this._names.length}columnNames(t){return t?this._names.filter(t):this._names.slice()}columnName(t){return this._names[t]}columnIndex(t){return this._names.indexOf(t)}columnArray(t,n){return this.array(t,n)}array(t,n){vn("Not implemented")}*values(t){const n=this.getter(t),r=this.numRows();for(let i=0;i<r;++i)yield n(i)}get(t,n=0){vn("Not implemented")}getter(t){vn("Not implemented")}objects(t){vn("Not implemented")}object(t){vn("Not implemented")}[Symbol.iterator](){vn("Not implemented")}print(t={}){Ca(t)?t={limit:t}:t.limit==null&&(t.limit=10);const n=this.objects({...t,grouped:!1}),r=`${this[Symbol.toStringTag]}. Showing ${n.length} rows.`;return console.log(r),console.table(n),this}indices(t=!0){if(this._index)return this._index;const n=this.numRows(),r=new Uint32Array(n),i=this.isOrdered(),s=this.mask();let o=-1;if(s)for(let a=s.next(0);a>=0;a=s.next(a+1))r[++o]=a;else for(let a=0;a<n;++a)r[++o]=a;if(t&&i){const a=this._order,u=this._data;r.sort((l,c)=>a(l,c,u))}return(t||!i)&&(this._index=r),r}partitions(t=!0){if(this._partitions)return this._partitions;if(!this.isGrouped())return[this.indices(t)];const{keys:n,size:r}=this._group,i=l4(r,()=>[]),s=this._index,o=this.mask(),a=this.numRows();if(s&&this.isOrdered())for(let u=0,l;u<a;++u)l=s[u],i[n[l]].push(l);else if(o)for(let u=o.next(0);u>=0;u=o.next(u+1))i[n[u]].push(u);else for(let u=0;u<a;++u)i[n[u]].push(u);if(t&&!s&&this.isOrdered()){const u=this._order,l=this._data;for(let c=0;c<r;++c)i[c].sort((f,d)=>u(f,d,l))}return(t||!this.isOrdered())&&(this._partitions=i),i}scan(t,n,r=1/0,i=0){const s=this._mask,o=this._nrows,a=this._data;let u=i||0;if(u>o)return;const l=Math.min(o,u+r),c=()=>u=this._total;if(n&&this.isOrdered()||s&&this._index){const f=this.indices(),d=this._data;for(;u<l;++u)t(f[u],d,c)}else if(s){let f=l-u+1;for(u=s.nth(u);--f&&u>-1;u=s.next(u+1))t(u,a,c)}else for(;u<l;++u)t(u,a,c)}slice(t=0,n=1/0){if(this.isGrouped())return super.slice(t,n);const r=[],i=this.numRows();return t=Math.max(0,t+(t<0?i:0)),n=Math.min(i,Math.max(0,n+(n<0?i:0))),this.scan(s=>r.push(s),!0,n-t,t),this.reify(r)}reduce(t){return this.__reduce(this,t)}},YAt=class{constructor(t){this.data=t}get length(){return this.data.length}get(t){return this.data[t]}[Symbol.iterator](){return this.data[Symbol.iterator]()}},KAt=function(e){return e&&ei(e.get)?e:new YAt(e)};function Ip(e){return e instanceof Date}function ea(e){return e===Object(e)}function ND(e){return e instanceof RegExp}function xo(e){return typeof e=="string"}function XAt(e,t){const n=r=>vn(`Illegal argument type: ${r||typeof e}`);return e instanceof Map?fhe(e.entries(),t):Ip(e)?n("Date"):ND(e)?n("RegExp"):xo(e)?n():nr(e)?QAt(e,t):ei(e[Symbol.iterator])?JAt(e,t):ea(e)?fhe(Object.entries(e),t):n()}function fhe(e,t=["key","value"]){const n=[],r=[];for(const[s,o]of e)n.push(s),r.push(o);const i={};return t[0]&&(i[t[0]]=n),t[1]&&(i[t[1]]=r),i}function QAt(e,t){const n=e.length,r={},i=s=>r[s]=Array(n);if(n){t=t||Object.keys(e[0]);const s=t.map(i),o=s.length;for(let a=0;a<n;++a){const u=e[a];for(let l=0;l<o;++l)s[l][a]=u[t[l]]}}else t&&t.forEach(i);return r}function JAt(e,t){const n={},r=o=>n[o]=[];let i,s;for(const o of e){i||(t=t||Object.keys(o),i=t.map(r),s=i.length);for(let a=0;a<s;++a)i[a].push(o[t[a]])}return!i&&t&&t.forEach(r),n}const{hasOwnProperty:ZAt}=Object.prototype;function uf(e,t){return ZAt.call(e,t)}function _l(e){return e?new dhe({...e.data()},e.columnNames()):new dhe}class dhe{constructor(t,n){this.data=t||{},this.names=n||[]}add(t,n){return this.has(t)||this.names.push(t+""),this.data[t]=n}has(t){return uf(this.data,t)}new(){return this.filter=null,this.groups=this.groups||null,this.order=null,this}groupby(t){return this.groups=t,this}}const Xn=void 0,eCt=Object.getPrototypeOf(Int8Array);function nI(e){return e instanceof eCt}function Hy(e){return nr(e)||nI(e)}function qc(e){return e!=null&&e===e}const nS=e=>Hy(e)||xo(e),tCt={compact:e=>Hy(e)?e.filter(t=>qc(t)):e,concat:(...e)=>[].concat(...e),includes:(e,t,n)=>nS(e)?e.includes(t,n):!1,indexof:(e,t)=>nS(e)?e.indexOf(t):-1,join:(e,t)=>Hy(e)?e.join(t):Xn,lastindexof:(e,t)=>nS(e)?e.lastIndexOf(t):-1,length:e=>nS(e)?e.length:0,pluck:(e,t)=>Hy(e)?e.map(n=>qc(n)?n[t]:Xn):Xn,reverse:e=>Hy(e)?e.slice().reverse():xo(e)?e.split("").reverse().join(""):Xn,slice:(e,t,n)=>nS(e)?e.slice(t,n):Xn};function nCt(e,t,n,r,i){return e==null?null:e<t?-1/0:e>n?1/0:(e=Math.max(t,Math.min(e,n)),t+r*Math.floor(1e-14+(e-t)/r+(i||0)))}function t$(e,t,n="0"){const r=e+"",i=r.length;return i<t?Array(t-i+1).join(n)+r:r}const Nf=e=>(e<10?"0":"")+e,rCt=e=>e<0?"-"+t$(-e,6):e>9999?"+"+t$(e,6):t$(e,4);function Ske(e,t,n,r,i,s,o,a,u){const l=a?"Z":"";return rCt(e)+"-"+Nf(t+1)+"-"+Nf(n)+(!u||o?"T"+Nf(r)+":"+Nf(i)+":"+Nf(s)+"."+t$(o,3)+l:s?"T"+Nf(r)+":"+Nf(i)+":"+Nf(s)+l:i||r||!a?"T"+Nf(r)+":"+Nf(i)+l:"")}function Tke(e,t){return isNaN(e)?"Invalid Date":Ske(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds(),!1,t)}function c4(e,t){return isNaN(e)?"Invalid Date":Ske(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds(),!0,t)}const iCt=/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/;function sCt(e){return e.match(iCt)}function oCt(e,t=Date.parse){return sCt(e)?t(e):e}const Ake=6e4,Cke=864e5,Ike=6048e5,Oi=new Date,Pi=new Date,Bi=e=>(Oi.setTime(typeof e=="string"?oCt(e):e),Oi);function aCt(e,t,n,r,i,s,o){return arguments.length?new Date(e,t||0,n??1,r||0,i||0,s||0,o||0):new Date(Date.now())}function uCt(e,t,n,r,i,s,o){return arguments.length?new Date(Date.UTC(e,t||0,n??1,r||0,i||0,s||0,o||0)):new Date(Date.now())}function lCt(e){Pi.setTime(+e),Pi.setHours(0,0,0,0),Oi.setTime(+Pi),Oi.setMonth(0),Oi.setDate(1);const t=(Pi.getTimezoneOffset()-Oi.getTimezoneOffset())*Ake;return Math.floor(1+(Pi-Oi-t)/Cke)}function cCt(e){Pi.setTime(+e),Pi.setUTCHours(0,0,0,0);const t=Date.UTC(Pi.getUTCFullYear(),0,1);return Math.floor(1+(Pi-t)/Cke)}function fCt(e,t){const n=t||0;Pi.setTime(+e),Pi.setDate(Pi.getDate()-(Pi.getDay()+7-n)%7),Pi.setHours(0,0,0,0),Oi.setTime(+e),Oi.setMonth(0),Oi.setDate(1),Oi.setDate(1-(Oi.getDay()+7-n)%7),Oi.setHours(0,0,0,0);const r=(Pi.getTimezoneOffset()-Oi.getTimezoneOffset())*Ake;return Math.floor((1+(Pi-Oi)-r)/Ike)}function dCt(e,t){const n=t||0;return Pi.setTime(+e),Pi.setUTCDate(Pi.getUTCDate()-(Pi.getUTCDay()+7-n)%7),Pi.setUTCHours(0,0,0,0),Oi.setTime(+e),Oi.setUTCMonth(0),Oi.setUTCDate(1),Oi.setUTCDate(1-(Oi.getUTCDay()+7-n)%7),Oi.setUTCHours(0,0,0,0),Math.floor((1+(Pi-Oi))/Ike)}const hCt={format_date:(e,t)=>Tke(Bi(e),!t),format_utcdate:(e,t)=>c4(Bi(e),!t),timestamp:e=>+Bi(e),year:e=>Bi(e).getFullYear(),quarter:e=>Math.floor(Bi(e).getMonth()/3),month:e=>Bi(e).getMonth(),date:e=>Bi(e).getDate(),dayofweek:e=>Bi(e).getDay(),hours:e=>Bi(e).getHours(),minutes:e=>Bi(e).getMinutes(),seconds:e=>Bi(e).getSeconds(),milliseconds:e=>Bi(e).getMilliseconds(),utcyear:e=>Bi(e).getUTCFullYear(),utcquarter:e=>Math.floor(Bi(e).getUTCMonth()/3),utcmonth:e=>Bi(e).getUTCMonth(),utcdate:e=>Bi(e).getUTCDate(),utcdayofweek:e=>Bi(e).getUTCDay(),utchours:e=>Bi(e).getUTCHours(),utcminutes:e=>Bi(e).getUTCMinutes(),utcseconds:e=>Bi(e).getUTCSeconds(),utcmilliseconds:e=>Bi(e).getUTCMilliseconds(),datetime:aCt,dayofyear:lCt,week:fCt,utcdatetime:uCt,utcdayofyear:cCt,utcweek:dCt,now:Date.now};function dK(e,t){return e==null||t==null||e!==e||t!==t?!1:e===t?!0:Ip(e)||Ip(t)?+e==+t:ND(e)&&ND(t)?e+""==t+"":ea(e)&&ea(t)?pCt(e,t):!1}function pCt(e,t){if(Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;if(e.length||t.length)return hhe(e,t);const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length||(n.sort(),r.sort(),!hhe(n,r,(s,o)=>s===o)))return!1;const i=n.length;for(let s=0;s<i;++s){const o=n[s];if(!dK(e[o],t[o]))return!1}return!0}function hhe(e,t,n=dK){const r=e.length;if(r!==t.length)return!1;for(let i=0;i<r;++i)if(!n(e[i],t[i]))return!1;return!0}const mCt={parse_json:e=>JSON.parse(e),to_json:e=>JSON.stringify(e)};let gCt=Math.random;function LE(){return gCt()}const yCt={random:LE,is_nan:Number.isNaN,is_finite:Number.isFinite,abs:Math.abs,cbrt:Math.cbrt,ceil:Math.ceil,clz32:Math.clz32,exp:Math.exp,expm1:Math.expm1,floor:Math.floor,fround:Math.fround,greatest:Math.max,least:Math.min,log:Math.log,log10:Math.log10,log1p:Math.log1p,log2:Math.log2,pow:Math.pow,round:Math.round,sign:Math.sign,sqrt:Math.sqrt,trunc:Math.trunc,degrees:e=>180*e/Math.PI,radians:e=>Math.PI*e/180,acos:Math.acos,acosh:Math.acosh,asin:Math.asin,asinh:Math.asinh,atan:Math.atan,atan2:Math.atan2,atanh:Math.atanh,cos:Math.cos,cosh:Math.cosh,sin:Math.sin,sinh:Math.sinh,tan:Math.tan,tanh:Math.tanh};function hK(e){return e instanceof Map}function vCt(e){return e instanceof Set}function n$(e){return hK(e)||vCt(e)}function yB(e){return Array.from(e)}const _Ct={has:(e,t)=>n$(e)?e.has(t):e!=null?uf(e,t):!1,keys:e=>hK(e)?yB(e.keys()):e!=null?Object.keys(e):[],values:e=>n$(e)?yB(e.values()):e!=null?Object.values(e):[],entries:e=>n$(e)?yB(e.entries()):e!=null?Object.entries(e):[],object:e=>e?Object.fromEntries(e):Xn};function bCt(e,t,n){if(t instanceof Map){if(t.has(e))return t.get(e)}else if(uf(t,e))return t[e];return n!==void 0?n:e}function wCt(e,t,n){let r=arguments.length;e=+e,t=+t,n=r<2?(t=e,e=0,1):r<3?1:+n,r=Math.max(0,Math.ceil((t-e)/n))|0;const i=new Array(r);for(let s=0;s<r;++s)i[s]=e+s*n;return i}const ECt={parse_date:e=>e==null?e:new Date(e),parse_float:e=>e==null?e:Number.parseFloat(e),parse_int:(e,t)=>e==null?e:Number.parseInt(e,t),endswith:(e,t,n)=>e==null?!1:String(e).endsWith(t,n),match:(e,t,n)=>{const r=e==null?e:String(e).match(t);return n==null||r==null?r:typeof n=="number"?r[n]:r.groups?r.groups[n]:null},normalize:(e,t)=>e==null?e:String(e).normalize(t),padend:(e,t,n)=>e==null?e:String(e).padEnd(t,n),padstart:(e,t,n)=>e==null?e:String(e).padStart(t,n),upper:e=>e==null?e:String(e).toUpperCase(),lower:e=>e==null?e:String(e).toLowerCase(),repeat:(e,t)=>e==null?e:String(e).repeat(t),replace:(e,t,n)=>e==null?e:String(e).replace(t,String(n)),substring:(e,t,n)=>e==null?e:String(e).substring(t,n),split:(e,t,n)=>e==null?[]:String(e).split(t,n),startswith:(e,t,n)=>e==null?!1:String(e).startsWith(t,n),trim:e=>e==null?e:String(e).trim()},eb={bin:nCt,equal:dK,recode:bCt,sequence:wCt,...tCt,...hCt,...mCt,...yCt,..._Ct,...ECt};function hA(e){return typeof e=="bigint"}function jd(e){return e===void 0?e+"":hA(e)?e+"n":JSON.stringify(e)}function dn(e,t=[],n=[]){return new xCt(e,gu(t),gu(n))}let xCt=class{constructor(t,n,r){this.name=t,this.fields=n,this.params=r}toString(){const t=[...this.fields.map(n=>`d[${jd(n)}]`),...this.params.map(jd)];return`d => op.${this.name}(${t})`}toObject(){return{expr:this.toString(),func:!0}}};const Oke=e=>dn("any",e),Pke=()=>dn("count"),kke=e=>dn("array_agg",e),$ke=e=>dn("array_agg_distinct",e),Rke=(e,t)=>dn("map_agg",[e,t]),Nke=(e,t)=>dn("object_agg",[e,t]),Dke=(e,t)=>dn("entries_agg",[e,t]);({...eb});function SCt(e,t){e=n$(e)?e:new Set(e);let n=t,r=0;for(;e.has(n);)n=t+ ++r;return n}function TCt(e,t){if(!e||!t)return e;const{keys:n,rows:r,size:i}=e,s=new Int32Array(i);t.scan(c=>s[n[c]]=1);const o=s.reduce((c,f)=>c+f,0);if(o===i)return e;const a=Array(o);let u=0;for(let c=0;c<i;++c)s[c]&&(a[s[c]=u++]=r[c]);const l=new Uint32Array(n.length);return t.scan(c=>l[c]=s[n[c]]),{...e,keys:l,rows:a,size:u}}function ACt(e,t,n,r){const{keys:i,rows:s,size:o}=e;let a=s,u=o,l=null;if(n){l=new Int32Array(o),t(p=>l[i[p]]=1);const h=l.reduce((p,m)=>p+m,0);if(h!==o){a=Array(h),u=0;for(let p=0;p<o;++p)l[p]&&(a[l[p]=u++]=s[p])}}let c=-1;const f=new Uint32Array(r);return t(u!==o?h=>f[++c]=l[i[h]]:h=>f[++c]=i[h]),{...e,keys:f,rows:a,size:u}}function CCt(e,t,n,r){const i=r==="map"||r===!0?Rke:r==="entries"?Dke:r==="object"?Nke:vn('groups option must be "map", "entries", or "object".'),{names:s}=e.groups(),o=SCt(e.columnNames(),"_");let a=e.select().reify(t).create({data:{[o]:n}}).rollup({[o]:kke(o)});for(let u=s.length;--u>=0;)a=a.groupby(s.slice(0,u)).rollup({[o]:i(s[u],o)});return a.get(o)}const ICt="ArrayPattern",OCt="ArrowFunctionExpression",PCt="FunctionExpression",Eg="Identifier",ME="Literal",Lke="MemberExpression",kCt="ObjectExpression",Mke="ObjectPattern",Fke="Property",rI="Column",$Ct="Constant",RCt="Dictionary",NCt="Function",DCt="Parameter",Bke="Op",jr=(e,t)=>{const n=LCt[e.type];return n?n(e,t):vn(`Unsupported expression construct: ${e.type}`)},vB=(e,t)=>"("+jr(e.left,t)+" "+e.operator+" "+jr(e.right,t)+")",_B=(e,t)=>"("+Hf(e.params,t)+")=>"+jr(e.body,t),phe=(e,t)=>jr(e.callee,t)+"("+Hf(e.arguments,t)+")",Hf=(e,t,n=",")=>e.map(r=>jr(r,t)).join(n),jke=e=>e.computed?`[${jd(e.name)}]`:`.${e.name}`,mhe=(e,t,n)=>{const r=e.table||"";return`data${r}${jke(e)}.${n}(${t.index}${r})`},LCt={Constant:e=>e.raw,Column:(e,t)=>mhe(e,t,"get"),Dictionary:(e,t)=>mhe(e,t,"key"),Function:e=>`fn.${e.name}`,Parameter:e=>`$${jke(e)}`,Op:(e,t)=>`op(${jd(e.name)},${t.op||t.index})`,Literal:e=>e.raw,Identifier:e=>e.name,TemplateLiteral:(e,t)=>{const{quasis:n,expressions:r}=e,i=r.length;let s=n[0].value.raw;for(let o=0;o<i;)s+="${"+jr(r[o],t)+"}"+n[++o].value.raw;return"`"+s+"`"},MemberExpression:(e,t)=>{const n=!e.computed,r=jr(e.object,t),i=jr(e.property,t);return r+(n?"."+i:"["+i+"]")},CallExpression:phe,NewExpression:(e,t)=>"new "+phe(e,t),ArrayExpression:(e,t)=>"["+Hf(e.elements,t)+"]",AssignmentExpression:vB,BinaryExpression:vB,LogicalExpression:vB,UnaryExpression:(e,t)=>"("+e.operator+jr(e.argument,t)+")",ConditionalExpression:(e,t)=>"("+jr(e.test,t)+"?"+jr(e.consequent,t)+":"+jr(e.alternate,t)+")",ObjectExpression:(e,t)=>"({"+Hf(e.properties,t)+"})",Property:(e,t)=>{const n=jr(e.key,t);return(e.computed?`[${n}]`:n)+":"+jr(e.value,t)},ArrowFunctionExpression:_B,FunctionExpression:_B,FunctionDeclaration:_B,ArrayPattern:(e,t)=>"["+Hf(e.elements,t)+"]",ObjectPattern:(e,t)=>"{"+Hf(e.properties,t)+"}",VariableDeclaration:(e,t)=>e.kind+" "+Hf(e.declarations,t,","),VariableDeclarator:(e,t)=>jr(e.id,t)+"="+jr(e.init,t),SpreadElement:(e,t)=>"..."+jr(e.argument,t),BlockStatement:(e,t)=>"{"+Hf(e.body,t,";")+";}",BreakStatement:()=>"break",ExpressionStatement:(e,t)=>jr(e.expression,t),IfStatement:(e,t)=>"if ("+jr(e.test,t)+")"+jr(e.consequent,t)+(e.alternate?" else "+jr(e.alternate,t):""),SwitchStatement:(e,t)=>"switch ("+jr(e.discriminant,t)+") {"+Hf(e.cases,t,"")+"}",SwitchCase:(e,t)=>(e.test?"case "+jr(e.test,t):"default")+": "+Hf(e.consequent,t,";")+";",ReturnStatement:(e,t)=>"return "+jr(e.argument,t),Program:(e,t)=>jr(e.body[0],t)};function DD(e,t={index:"row"}){return jr(e,t)}function MCt(e,t,n=15,r=!0,i=0,s){const a=Math.LN10;if(s==null){const u=Math.ceil(Math.log(n)/a),l=t-e||Math.abs(e)||1,c=[5,2];for(s=Math.max(i,Math.pow(10,Math.round(Math.log(l)/a)-u));Math.ceil(l/s)>n;)s*=10;const f=c.length;for(let d=0;d<f;++d){const h=s/c[d];h>=i&&l/h<=n&&(s=h)}}if(r){let u=Math.log(s);const l=u>=0?0:~~(-u/a)+1,c=Math.pow(10,-l-1);u=Math.floor(e/s+c)*s,e=e<u?u-s:u,t=Math.ceil(t/s)*s}return[e,t===e?e+s:t,s]}function ww(e){const t=typeof e;return t==="string"?`"${e}"`:t!=="object"||!e?e:Ip(e)?+e:nr(e)||nI(e)?`[${e.map(ww)}]`:ND(e)?e+"":FCt(e)}function FCt(e){let t="{",n=-1;for(const r in e)++n>0&&(t+=","),t+=`"${r}":${ww(e[r])}`;return t+="}",t}function LD(e,t){const n=e.length;return n===1?(r,i)=>ww(e[0](r,i)):(r,i)=>{let s="";for(let o=0;o<n;++o){o>0&&(s+="|");const a=e[o](r,i);if(t&&(a==null||a!==a))return null;s+=ww(a)}return s}}function BCt(){const e=new Map;return{count(){return e.size},values(){return Array.from(e.values(),t=>t.v)},increment(t){const n=ww(t),r=e.get(n);r?++r.n:e.set(n,{v:t,n:1})},decrement(t){const n=ww(t),r=e.get(n);r.n===1?e.delete(n):--r.n},forEach(t){e.forEach(({v:n,n:r})=>t(n,r))}}}function $h(){}function jCt(e,t=0,n=e.length){let r=e[t++];for(let i=t;i<n;++i)r*=e[i];return r}function cs(e){return e.init=e.init||$h,e.add=e.add||$h,e.rem=e.rem||$h,e}function ghe(e,t){return e.product_v=!1,e.product=t}const zke={count:{create:()=>cs({value:e=>e.count}),param:[]},array_agg:{create:()=>cs({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[1]},object_agg:{create:()=>cs({init:e=>e.values=!0,value:e=>Object.fromEntries(e.list.values())}),param:[2]},map_agg:{create:()=>cs({init:e=>e.values=!0,value:e=>new Map(e.list.values())}),param:[2]},entries_agg:{create:()=>cs({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[2]},any:{create:()=>cs({add:(e,t)=>{e.any==null&&(e.any=t)},value:e=>e.valid?e.any:Xn}),param:[1]},valid:{create:()=>cs({value:e=>e.valid}),param:[1]},invalid:{create:()=>cs({value:e=>e.count-e.valid}),param:[1]},distinct:{create:()=>({init:e=>e.distinct=BCt(),value:e=>e.distinct.count()+(e.valid===e.count?0:1),add:(e,t)=>e.distinct.increment(t),rem:(e,t)=>e.distinct.decrement(t)}),param:[1]},array_agg_distinct:{create:()=>cs({value:e=>e.distinct.values()}),param:[1],req:["distinct"]},mode:{create:()=>cs({value:e=>{let t=Xn,n=0;return e.distinct.forEach((r,i)=>{i>n&&(n=i,t=r)}),t}}),param:[1],req:["distinct"]},sum:{create:()=>({init:e=>e.sum=0,value:e=>e.valid?e.sum:Xn,add:(e,t)=>hA(t)?e.sum===0?e.sum=t:e.sum+=t:e.sum+=+t,rem:(e,t)=>e.sum-=t}),param:[1]},product:{create:()=>({init:e=>ghe(e,1),value:e=>e.valid?e.product_v?ghe(e,jCt(e.list.values())):e.product:void 0,add:(e,t)=>hA(t)&&e.product===1?e.product=t:e.product*=t,rem:(e,t)=>t==0||t===1/0||t===-1/0?e.product_v=!0:e.product/=t}),param:[1],stream:["array_agg"]},mean:{create:()=>({init:e=>e.mean=0,value:e=>e.valid?e.mean:Xn,add:(e,t)=>{e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid},rem:(e,t)=>{e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean}}),param:[1]},average:{create:()=>cs({value:e=>e.valid?e.mean:Xn}),param:[1],req:["mean"]},variance:{create:()=>({init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):Xn,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean)}),param:[1],req:["mean"]},variancep:{create:()=>cs({value:e=>e.valid>1?e.dev/e.valid:Xn}),param:[1],req:["variance"]},stdev:{create:()=>cs({value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):Xn}),param:[1],req:["variance"]},stdevp:{create:()=>cs({value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):Xn}),param:[1],req:["variance"]},min:{create:()=>({init:e=>e.min=Xn,value:e=>e.min=Number.isNaN(e.min)?e.list.min():e.min,add:(e,t)=>{(t<e.min||e.min===Xn)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)}}),param:[1],stream:["array_agg"]},max:{create:()=>({init:e=>e.max=Xn,value:e=>e.max=Number.isNaN(e.max)?e.list.max():e.max,add:(e,t)=>{(t>e.max||e.max===Xn)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)}}),param:[1],stream:["array_agg"]},quantile:{create:e=>cs({value:t=>t.list.quantile(e)}),param:[1,1],req:["array_agg"]},median:{create:()=>cs({value:e=>e.list.quantile(.5)}),param:[1],req:["array_agg"]},covariance:{create:()=>({init:e=>{e.cov=e.mean_x=e.mean_y=e.dev_x=e.dev_y=0},value:e=>e.valid>1?e.cov/(e.valid-1):Xn,add:(e,t,n)=>{const r=t-e.mean_x,i=n-e.mean_y;e.mean_x+=r/e.valid,e.mean_y+=i/e.valid;const s=n-e.mean_y;e.dev_x+=r*(t-e.mean_x),e.dev_y+=i*s,e.cov+=r*s},rem:(e,t,n)=>{const r=t-e.mean_x,i=n-e.mean_y;e.mean_x-=e.valid?r/e.valid:e.mean_x,e.mean_y-=e.valid?i/e.valid:e.mean_y;const s=n-e.mean_y;e.dev_x-=r*(t-e.mean_x),e.dev_y-=i*s,e.cov-=r*s}}),param:[2]},covariancep:{create:()=>cs({value:e=>e.valid>1?e.cov/e.valid:Xn}),param:[2],req:["covariance"]},corr:{create:()=>cs({value:e=>e.valid>1?e.cov/(Math.sqrt(e.dev_x)*Math.sqrt(e.dev_y)):Xn}),param:[2],req:["covariance"]},bins:{create:(e,t,n,r)=>cs({value:i=>MCt(i.min,i.max,e,t,n,r)}),param:[1,4],req:["min","max"]}},yhe={create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?e=n+1:e}}},param:[]},vhe={create(){let e;return{init:()=>e=0,value:t=>{const{index:n,peer:r,size:i}=t;let s=n;if(e<s){for(;s+1<i&&r(s+1);)++s;e=s}return(1+e)/i}}},param:[]},Uke={row_number:{create(){return{init:$h,value:e=>e.index+1}},param:[]},rank:yhe,avg_rank:{create(){let e,t;return{init:()=>(e=-1,t=1),value:n=>{const r=n.index;if(r>=e){for(t=e=r+1;n.peer(e);t+=++e);t/=e-r}return t}}},param:[]},dense_rank:{create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?++e:e}}},param:[]},percent_rank:{create(){const{init:e,value:t}=yhe.create();return{init:e,value:n=>(t(n)-1)/(n.size-1)}},param:[]},cume_dist:vhe,ntile:{create(e){e=+e,e>0||vn("ntile num must be greater than zero.");const{init:t,value:n}=vhe.create();return{init:t,value:r=>Math.ceil(e*n(r))}},param:[0,1]},lag:{create(e,t=Xn){return e=+e||1,{init:$h,value:(n,r)=>{const i=n.index-e;return i>=0?n.value(i,r):t}}},param:[1,2]},lead:{create(e,t=Xn){return e=+e||1,{init:$h,value:(n,r)=>{const i=n.index+e;return i<n.size?n.value(i,r):t}}},param:[1,2]},first_value:{create(){return{init:$h,value:(e,t)=>e.value(e.i0,t)}},param:[1]},last_value:{create(){return{init:$h,value:(e,t)=>e.value(e.i1-1,t)}},param:[1]},nth_value:{create(e){return e=+e,e>0||vn("nth_value nth must be greater than zero."),{init:$h,value:(t,n)=>{const r=t.i0+(e-1);return r<t.i1?t.value(r,n):Xn}}},param:[1,1]},fill_down:{create(e=Xn){let t;return{init:()=>t=e,value:(n,r)=>{const i=n.value(n.index,r);return qc(i)?t=i:t}}},param:[1,1]},fill_up:{create(e=Xn){let t,n;return{init:()=>(t=e,n=-1),value:(r,i)=>r.index<=n?t:(n=zCt(r,i,r.index))>=0?t=r.value(n,i):(n=r.size,t=e)}},param:[1,1]}};function zCt(e,t,n){for(const r=e.size;n<r;++n)if(qc(e.value(n,t)))return n;return-1}function pK(e){return uf(zke,e)}function mK(e){return uf(Uke,e)}function Vke(e){return uf(eb,e)||e==="row_object"}function Hke(e){return pK(e)&&zke[e]}function qke(e){return mK(e)&&Uke[e]}function rS(e,t,n){return e=`"use strict"; return ${e};`,Function("fn","$",e)(t,n)}const gK={escape:(e,t,n)=>rS(e,t,n),expr:(e,t)=>rS(`(row,data,op)=>${e}`,eb,t),expr2:(e,t)=>rS(`(row0,data0,row,data)=>${e}`,eb,t),join:(e,t)=>rS(`(row1,data1,row2,data2)=>${e}`,eb,t),param:(e,t)=>rS(e,eb,t)},UCt={"==":1,"!=":1,"===":1,"!==":1};function Wke(e,t,n=0,r,i){if(e.type=rI,e.name=t,e.table=n,i&&r&&ei(r.keyFor)){const s=UCt[i.operator]?i.left===e?i.right:i.left:i.callee&&i.callee.name==="equal"?i.arguments[i.arguments[0]===e?1:0]:null;s&&s.type===ME&&VCt(i,e,s,r.keyFor(s.value))}return e}function VCt(e,t,n,r){return r<0?(e.type=ME,e.value=!1,e.raw="false"):(t.type=RCt,n.value=r,n.raw=r+""),!0}function f4(e){return nr(e)?e:hK(e)?e.entries():e?Object.entries(e):[]}const Gke="row_object";function Yke(e,t){e.type=kCt;const n=e.properties=[];for(const r of f4(t)){const[i,s]=nr(r)?r:[r,r];n.push({type:Fke,key:{type:ME,raw:jd(s)},value:Wke({computed:!0},i)})}return e}function Kke(e){return DD(Yke({},e))}function Xke(e){return gK.expr(Kke(e))}function yK(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function Mh(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(f){o(f)}}function u(c){try{l(r.throw(c))}catch(f){o(f)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(e,t||[])).next())})}function _he(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Bn(e){return this instanceof Bn?(this.v=e,this):new Bn(e)}function qy(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(d){r[d]&&(i[d]=function(h){return new Promise(function(p,m){s.push([d,h,p,m])>1||a(d,h)})})}function a(d,h){try{u(r[d](h))}catch(p){f(s[0][3],p)}}function u(d){d.value instanceof Bn?Promise.resolve(d.value.v).then(l,c):f(s[0][2],d)}function l(d){a("next",d)}function c(d){a("throw",d)}function f(d,h){d(h),s.shift(),s.length&&a(s[0][0],s[0][1])}}function bB(e){var t,n;return t={},r("next"),r("throw",function(i){throw i}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(i,s){t[i]=e[i]?function(o){return(n=!n)?{value:Bn(e[i](o)),done:!1}:s?s(o):o}:s}}function KT(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof _he=="function"?_he(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=e[s]&&function(o){return new Promise(function(a,u){o=e[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(l){s({value:l,done:a})},o)}}const HCt=new TextDecoder("utf-8"),zU=e=>HCt.decode(e),qCt=new TextEncoder,vK=e=>qCt.encode(e),[Xbn,Qke]=(()=>{const e=()=>{throw new Error("BigInt is not available in this environment")};function t(){throw e()}return t.asIntN=()=>{throw e()},t.asUintN=()=>{throw e()},typeof BigInt<"u"?[BigInt,!0]:[t,!1]})(),[Pv,Qbn]=(()=>{const e=()=>{throw new Error("BigInt64Array is not available in this environment")};class t{static get BYTES_PER_ELEMENT(){return 8}static of(){throw e()}static from(){throw e()}constructor(){throw e()}}return typeof BigInt64Array<"u"?[BigInt64Array,!0]:[t,!1]})(),[kv,Jbn]=(()=>{const e=()=>{throw new Error("BigUint64Array is not available in this environment")};class t{static get BYTES_PER_ELEMENT(){return 8}static of(){throw e()}static from(){throw e()}constructor(){throw e()}}return typeof BigUint64Array<"u"?[BigUint64Array,!0]:[t,!1]})(),WCt=e=>typeof e=="boolean",Wa=e=>typeof e=="function",P0=e=>e!=null&&Object(e)===e,d4=e=>P0(e)&&Wa(e.then),_K=e=>P0(e)&&Wa(e[Symbol.iterator]),h4=e=>P0(e)&&Wa(e[Symbol.asyncIterator]),GCt=e=>P0(e)&&"done"in e&&"value"in e,Jke=e=>"_getDOMStream"in e&&"_getNodeStream"in e,YCt=e=>P0(e)&&Wa(e.abort)&&Wa(e.getWriter)&&!Jke(e),KCt=e=>P0(e)&&Wa(e.end)&&Wa(e.write)&&WCt(e.writable)&&!Jke(e),XCt=e=>P0(e)&&Wa(e.clear)&&Wa(e.bytes)&&Wa(e.position)&&Wa(e.setPosition)&&Wa(e.capacity)&&Wa(e.getBufferIdentifier)&&Wa(e.createLong),bK=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function QCt(e){const t=e[0]?[e[0]]:[];let n,r,i,s;for(let o,a,u=0,l=0,c=e.length;++u<c;){if(o=t[l],a=e[u],!o||!a||o.buffer!==a.buffer||a.byteOffset<o.byteOffset){a&&(t[++l]=a);continue}if({byteOffset:n,byteLength:i}=o,{byteOffset:r,byteLength:s}=a,n+i<r||r+s<n){a&&(t[++l]=a);continue}t[l]=new Uint8Array(o.buffer,n,r-n+s)}return t}function MD(e,t,n=0,r=t.byteLength){const i=e.byteLength,s=new Uint8Array(e.buffer,e.byteOffset,i),o=new Uint8Array(t.buffer,t.byteOffset,Math.min(r,i));return s.set(o,n),e}function zd(e,t){const n=QCt(e),r=n.reduce((c,f)=>c+f.byteLength,0);let i,s,o,a=0,u=-1;const l=Math.min(t||Number.POSITIVE_INFINITY,r);for(const c=n.length;++u<c;){if(i=n[u],s=i.subarray(0,Math.min(i.length,l-a)),l<=a+s.length){s.length<i.length?n[u]=i.subarray(s.length):s.length===i.length&&u++,o?MD(o,s,a):o=s;break}MD(o||(o=new Uint8Array(l)),s,a),a+=s.length}return[o||new Uint8Array(0),n.slice(u),r-(o?o.byteLength:0)]}function io(e,t){let n=GCt(t)?t.value:t;return n instanceof e?e===Uint8Array?new e(n.buffer,n.byteOffset,n.byteLength):n:n?(typeof n=="string"&&(n=vK(n)),n instanceof ArrayBuffer?new e(n):n instanceof bK?new e(n):XCt(n)?io(e,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new e(0):new e(n.buffer,n.byteOffset,n.byteLength/e.BYTES_PER_ELEMENT):e.from(n)):new e(0)}const iS=e=>io(Int32Array,e),vr=e=>io(Uint8Array,e),UU=e=>(e.next(),e);function*JCt(e,t){const n=function*(i){yield i},r=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof bK?n(t):_K(t)?t:n(t);return yield*UU(function*(i){let s=null;do s=i.next(yield io(e,s));while(!s.done)}(r[Symbol.iterator]())),new e}const ZCt=e=>JCt(Uint8Array,e);function Zke(e,t){return qy(this,arguments,function*(){if(d4(t))return yield Bn(yield Bn(yield*bB(KT(Zke(e,yield Bn(t))))));const r=function(o){return qy(this,arguments,function*(){yield yield Bn(yield Bn(o))})},i=function(o){return qy(this,arguments,function*(){yield Bn(yield*bB(KT(UU(function*(a){let u=null;do u=a.next(yield u==null?void 0:u.value);while(!u.done)}(o[Symbol.iterator]())))))})},s=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof bK?r(t):_K(t)?i(t):h4(t)?t:r(t);return yield Bn(yield*bB(KT(UU(function(o){return qy(this,arguments,function*(){let a=null;do a=yield Bn(o.next(yield yield Bn(io(e,a))));while(!a.done)})}(s[Symbol.asyncIterator]()))))),yield Bn(new e)})}const eIt=e=>Zke(Uint8Array,e);function wK(e,t,n){if(e!==0){n=n.slice(0,t+1);for(let r=-1;++r<=t;)n[r]+=e}return n}function tIt(e,t){let n=0;const r=e.length;if(r!==t.length)return!1;if(r>0)do if(e[n]!==t[n])return!1;while(++n<r);return!0}const bhe={fromIterable(e){return vP(nIt(e))},fromAsyncIterable(e){return vP(rIt(e))},fromDOMStream(e){return vP(iIt(e))},fromNodeStream(e){return vP(oIt(e))},toDOMStream(e,t){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(e,t){throw new Error('"toNodeStream" not available in this environment')}},vP=e=>(e.next(),e);function*nIt(e){let t,n=!1,r=[],i,s,o,a=0;function u(){return s==="peek"?zd(r,o)[0]:([i,r,a]=zd(r,o),i)}({cmd:s,size:o}=yield null);const l=ZCt(e)[Symbol.iterator]();try{do if({done:t,value:i}=Number.isNaN(o-a)?l.next():l.next(o-a),!t&&i.byteLength>0&&(r.push(i),a+=i.byteLength),t||o<=a)do({cmd:s,size:o}=yield u());while(o<a);while(!t)}catch(c){(n=!0)&&typeof l.throw=="function"&&l.throw(c)}finally{n===!1&&typeof l.return=="function"&&l.return(null)}return null}function rIt(e){return qy(this,arguments,function*(){let n,r=!1,i=[],s,o,a,u=0;function l(){return o==="peek"?zd(i,a)[0]:([s,i,u]=zd(i,a),s)}({cmd:o,size:a}=yield yield Bn(null));const c=eIt(e)[Symbol.asyncIterator]();try{do if({done:n,value:s}=Number.isNaN(a-u)?yield Bn(c.next()):yield Bn(c.next(a-u)),!n&&s.byteLength>0&&(i.push(s),u+=s.byteLength),n||a<=u)do({cmd:o,size:a}=yield yield Bn(l()));while(a<u);while(!n)}catch(f){(r=!0)&&typeof c.throw=="function"&&(yield Bn(c.throw(f)))}finally{r===!1&&typeof c.return=="function"&&(yield Bn(c.return(new Uint8Array(0))))}return yield Bn(null)})}function iIt(e){return qy(this,arguments,function*(){let n=!1,r=!1,i=[],s,o,a,u=0;function l(){return o==="peek"?zd(i,a)[0]:([s,i,u]=zd(i,a),s)}({cmd:o,size:a}=yield yield Bn(null));const c=new sIt(e);try{do if({done:n,value:s}=Number.isNaN(a-u)?yield Bn(c.read()):yield Bn(c.read(a-u)),!n&&s.byteLength>0&&(i.push(vr(s)),u+=s.byteLength),n||a<=u)do({cmd:o,size:a}=yield yield Bn(l()));while(a<u);while(!n)}catch(f){(r=!0)&&(yield Bn(c.cancel(f)))}finally{r===!1?yield Bn(c.cancel()):e.locked&&c.releaseLock()}return yield Bn(null)})}class sIt{constructor(t){this.source=t,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(t){return Mh(this,void 0,void 0,function*(){const{reader:n,source:r}=this;n&&(yield n.cancel(t).catch(()=>{})),r&&r.locked&&this.releaseLock()})}read(t){return Mh(this,void 0,void 0,function*(){if(t===0)return{done:this.reader==null,value:new Uint8Array(0)};const n=yield this.reader.read();return!n.done&&(n.value=vr(n)),n})}}const wB=(e,t)=>{const n=i=>r([t,i]);let r;return[t,n,new Promise(i=>(r=i)&&e.once(t,n))]};function oIt(e){return qy(this,arguments,function*(){const n=[];let r="error",i=!1,s=null,o,a,u=0,l=[],c;function f(){return o==="peek"?zd(l,a)[0]:([c,l,u]=zd(l,a),c)}if({cmd:o,size:a}=yield yield Bn(null),e.isTTY)return yield yield Bn(new Uint8Array(0)),yield Bn(null);try{n[0]=wB(e,"end"),n[1]=wB(e,"error");do{if(n[2]=wB(e,"readable"),[r,s]=yield Bn(Promise.race(n.map(h=>h[2]))),r==="error")break;if((i=r==="end")||(Number.isFinite(a-u)?(c=vr(e.read(a-u)),c.byteLength<a-u&&(c=vr(e.read()))):c=vr(e.read()),c.byteLength>0&&(l.push(c),u+=c.byteLength)),i||a<=u)do({cmd:o,size:a}=yield yield Bn(f()));while(a<u)}while(!i)}finally{yield Bn(d(n,r==="error"?s:null))}return yield Bn(null);function d(h,p){return c=l=null,new Promise((m,g)=>{for(const[y,v]of h)e.off(y,v);try{const y=e.destroy;y&&y.call(e,p),p=void 0}catch(y){p=y||p}finally{p!=null?g(p):m()}})}})}var Hu;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(Hu||(Hu={}));var Zl;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(Zl||(Zl={}));var mo;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(mo||(mo={}));var Ud;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(Ud||(Ud={}));var jn;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(jn||(jn={}));var Vd;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(Vd||(Vd={}));var Ns;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(Ns||(Ns={}));var re;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.Float=3]="Float",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct=13]="Struct",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Dictionary=-1]="Dictionary",e[e.Int8=-2]="Int8",e[e.Int16=-3]="Int16",e[e.Int32=-4]="Int32",e[e.Int64=-5]="Int64",e[e.Uint8=-6]="Uint8",e[e.Uint16=-7]="Uint16",e[e.Uint32=-8]="Uint32",e[e.Uint64=-9]="Uint64",e[e.Float16=-10]="Float16",e[e.Float32=-11]="Float32",e[e.Float64=-12]="Float64",e[e.DateDay=-13]="DateDay",e[e.DateMillisecond=-14]="DateMillisecond",e[e.TimestampSecond=-15]="TimestampSecond",e[e.TimestampMillisecond=-16]="TimestampMillisecond",e[e.TimestampMicrosecond=-17]="TimestampMicrosecond",e[e.TimestampNanosecond=-18]="TimestampNanosecond",e[e.TimeSecond=-19]="TimeSecond",e[e.TimeMillisecond=-20]="TimeMillisecond",e[e.TimeMicrosecond=-21]="TimeMicrosecond",e[e.TimeNanosecond=-22]="TimeNanosecond",e[e.DenseUnion=-23]="DenseUnion",e[e.SparseUnion=-24]="SparseUnion",e[e.IntervalDayTime=-25]="IntervalDayTime",e[e.IntervalYearMonth=-26]="IntervalYearMonth"})(re||(re={}));var Ch;(function(e){e[e.OFFSET=0]="OFFSET",e[e.DATA=1]="DATA",e[e.VALIDITY=2]="VALIDITY",e[e.TYPE=3]="TYPE"})(Ch||(Ch={}));const aIt=void 0;function xg(e){if(e===null)return"null";if(e===aIt)return"undefined";switch(typeof e){case"number":return`${e}`;case"bigint":return`${e}`;case"string":return`"${e}"`}return typeof e[Symbol.toPrimitive]=="function"?e[Symbol.toPrimitive]("string"):ArrayBuffer.isView(e)?e instanceof Pv||e instanceof kv?`[${[...e].map(t=>xg(t))}]`:`[${e}]`:ArrayBuffer.isView(e)?`[${e}]`:JSON.stringify(e,(t,n)=>typeof n=="bigint"?`${n}`:n)}const uIt=Symbol.for("isArrowBigNum");function xf(e,...t){return t.length===0?Object.setPrototypeOf(io(this.TypedArray,e),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(e,...t),this.constructor.prototype)}xf.prototype[uIt]=!0;xf.prototype.toJSON=function(){return`"${f1(this)}"`};xf.prototype.valueOf=function(){return e$e(this)};xf.prototype.toString=function(){return f1(this)};xf.prototype[Symbol.toPrimitive]=function(e="default"){switch(e){case"number":return e$e(this);case"string":return f1(this);case"default":return VU(this)}return f1(this)};function kb(...e){return xf.apply(this,e)}function $b(...e){return xf.apply(this,e)}function pA(...e){return xf.apply(this,e)}Object.setPrototypeOf(kb.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf($b.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(pA.prototype,Object.create(Uint32Array.prototype));Object.assign(kb.prototype,xf.prototype,{constructor:kb,signed:!0,TypedArray:Int32Array,BigIntArray:Pv});Object.assign($b.prototype,xf.prototype,{constructor:$b,signed:!1,TypedArray:Uint32Array,BigIntArray:kv});Object.assign(pA.prototype,xf.prototype,{constructor:pA,signed:!0,TypedArray:Uint32Array,BigIntArray:kv});function e$e(e){const{buffer:t,byteOffset:n,length:r,signed:i}=e,s=new kv(t,n,r),o=i&&s[s.length-1]&BigInt(1)<<BigInt(63);let a=BigInt(o?1:0),u=BigInt(0);if(o){for(const l of s)a+=~l*(BigInt(1)<<BigInt(32)*u++);a*=BigInt(-1)}else for(const l of s)a+=l*(BigInt(1)<<BigInt(32)*u++);return a}let f1,VU;Qke?(VU=e=>e.byteLength===8?new e.BigIntArray(e.buffer,e.byteOffset,1)[0]:EB(e),f1=e=>e.byteLength===8?`${new e.BigIntArray(e.buffer,e.byteOffset,1)[0]}`:EB(e)):(f1=EB,VU=f1);function EB(e){let t="";const n=new Uint32Array(2);let r=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);const i=new Uint32Array((r=new Uint16Array(r).reverse()).buffer);let s=-1;const o=r.length-1;do{for(n[0]=r[s=0];s<o;)r[s++]=n[1]=n[0]/10,n[0]=(n[0]-n[1]*10<<16)+r[s];r[s]=n[1]=n[0]/10,n[0]=n[0]-n[1]*10,t=`${n[0]}${t}`}while(i[0]||i[1]||i[2]||i[3]);return t??"0"}class EK{static new(t,n){switch(n){case!0:return new kb(t);case!1:return new $b(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case Pv:return new kb(t)}return t.byteLength===16?new pA(t):new $b(t)}static signed(t){return new kb(t)}static unsigned(t){return new $b(t)}static decimal(t){return new pA(t)}constructor(t,n){return EK.new(t,n)}}var t$e,n$e,r$e,i$e,s$e,o$e,a$e,u$e,l$e,c$e,f$e,d$e,h$e,p$e,m$e,g$e,y$e,v$e,_$e;class Pn{static isNull(t){return(t==null?void 0:t.typeId)===re.Null}static isInt(t){return(t==null?void 0:t.typeId)===re.Int}static isFloat(t){return(t==null?void 0:t.typeId)===re.Float}static isBinary(t){return(t==null?void 0:t.typeId)===re.Binary}static isUtf8(t){return(t==null?void 0:t.typeId)===re.Utf8}static isBool(t){return(t==null?void 0:t.typeId)===re.Bool}static isDecimal(t){return(t==null?void 0:t.typeId)===re.Decimal}static isDate(t){return(t==null?void 0:t.typeId)===re.Date}static isTime(t){return(t==null?void 0:t.typeId)===re.Time}static isTimestamp(t){return(t==null?void 0:t.typeId)===re.Timestamp}static isInterval(t){return(t==null?void 0:t.typeId)===re.Interval}static isList(t){return(t==null?void 0:t.typeId)===re.List}static isStruct(t){return(t==null?void 0:t.typeId)===re.Struct}static isUnion(t){return(t==null?void 0:t.typeId)===re.Union}static isFixedSizeBinary(t){return(t==null?void 0:t.typeId)===re.FixedSizeBinary}static isFixedSizeList(t){return(t==null?void 0:t.typeId)===re.FixedSizeList}static isMap(t){return(t==null?void 0:t.typeId)===re.Map}static isDictionary(t){return(t==null?void 0:t.typeId)===re.Dictionary}static isDenseUnion(t){return Pn.isUnion(t)&&t.mode===Zl.Dense}static isSparseUnion(t){return Pn.isUnion(t)&&t.mode===Zl.Sparse}get typeId(){return re.NONE}}t$e=Symbol.toStringTag;Pn[t$e]=(e=>(e.children=null,e.ArrayType=Array,e[Symbol.toStringTag]="DataType"))(Pn.prototype);let Op=class extends Pn{toString(){return"Null"}get typeId(){return re.Null}};n$e=Symbol.toStringTag;Op[n$e]=(e=>e[Symbol.toStringTag]="Null")(Op.prototype);class Ia extends Pn{constructor(t,n){super(),this.isSigned=t,this.bitWidth=n}get typeId(){return re.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?Pv:kv}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}r$e=Symbol.toStringTag;Ia[r$e]=(e=>(e.isSigned=null,e.bitWidth=null,e[Symbol.toStringTag]="Int"))(Ia.prototype);class xK extends Ia{constructor(){super(!0,8)}get ArrayType(){return Int8Array}}class SK extends Ia{constructor(){super(!0,16)}get ArrayType(){return Int16Array}}class qg extends Ia{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}class TK extends Ia{constructor(){super(!0,64)}get ArrayType(){return Pv}}class AK extends Ia{constructor(){super(!1,8)}get ArrayType(){return Uint8Array}}class CK extends Ia{constructor(){super(!1,16)}get ArrayType(){return Uint16Array}}class IK extends Ia{constructor(){super(!1,32)}get ArrayType(){return Uint32Array}}class OK extends Ia{constructor(){super(!1,64)}get ArrayType(){return kv}}Object.defineProperty(xK.prototype,"ArrayType",{value:Int8Array});Object.defineProperty(SK.prototype,"ArrayType",{value:Int16Array});Object.defineProperty(qg.prototype,"ArrayType",{value:Int32Array});Object.defineProperty(TK.prototype,"ArrayType",{value:Pv});Object.defineProperty(AK.prototype,"ArrayType",{value:Uint8Array});Object.defineProperty(CK.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(IK.prototype,"ArrayType",{value:Uint32Array});Object.defineProperty(OK.prototype,"ArrayType",{value:kv});class Wg extends Pn{constructor(t){super(),this.precision=t}get typeId(){return re.Float}get ArrayType(){switch(this.precision){case mo.HALF:return Uint16Array;case mo.SINGLE:return Float32Array;case mo.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}i$e=Symbol.toStringTag;Wg[i$e]=(e=>(e.precision=null,e[Symbol.toStringTag]="Float"))(Wg.prototype);class b$e extends Wg{constructor(){super(mo.HALF)}}class PK extends Wg{constructor(){super(mo.SINGLE)}}class kK extends Wg{constructor(){super(mo.DOUBLE)}}Object.defineProperty(b$e.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(PK.prototype,"ArrayType",{value:Float32Array});Object.defineProperty(kK.prototype,"ArrayType",{value:Float64Array});let mA=class extends Pn{constructor(){super()}get typeId(){return re.Binary}toString(){return"Binary"}};s$e=Symbol.toStringTag;mA[s$e]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Binary"))(mA.prototype);let Ew=class extends Pn{constructor(){super()}get typeId(){return re.Utf8}toString(){return"Utf8"}};o$e=Symbol.toStringTag;Ew[o$e]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Utf8"))(Ew.prototype);let gA=class extends Pn{constructor(){super()}get typeId(){return re.Bool}toString(){return"Bool"}};a$e=Symbol.toStringTag;gA[a$e]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Bool"))(gA.prototype);let FD=class extends Pn{constructor(t,n,r=128){super(),this.scale=t,this.precision=n,this.bitWidth=r}get typeId(){return re.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}};u$e=Symbol.toStringTag;FD[u$e]=(e=>(e.scale=null,e.precision=null,e.ArrayType=Uint32Array,e[Symbol.toStringTag]="Decimal"))(FD.prototype);class xw extends Pn{constructor(t){super(),this.unit=t}get typeId(){return re.Date}toString(){return`Date${(this.unit+1)*32}<${Ud[this.unit]}>`}}l$e=Symbol.toStringTag;xw[l$e]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Date"))(xw.prototype);class lIt extends xw{constructor(){super(Ud.DAY)}}class cIt extends xw{constructor(){super(Ud.MILLISECOND)}}class Pp extends Pn{constructor(t,n){super(),this.unit=t,this.bitWidth=n}get typeId(){return re.Time}toString(){return`Time${this.bitWidth}<${jn[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return Pv}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}c$e=Symbol.toStringTag;Pp[c$e]=(e=>(e.unit=null,e.bitWidth=null,e[Symbol.toStringTag]="Time"))(Pp.prototype);class fIt extends Pp{constructor(){super(jn.SECOND,32)}}class dIt extends Pp{constructor(){super(jn.MILLISECOND,32)}}class hIt extends Pp{constructor(){super(jn.MICROSECOND,64)}}class pIt extends Pp{constructor(){super(jn.NANOSECOND,64)}}class BD extends Pn{constructor(t,n){super(),this.unit=t,this.timezone=n}get typeId(){return re.Timestamp}toString(){return`Timestamp<${jn[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}f$e=Symbol.toStringTag;BD[f$e]=(e=>(e.unit=null,e.timezone=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Timestamp"))(BD.prototype);class Sw extends Pn{constructor(t){super(),this.unit=t}get typeId(){return re.Interval}toString(){return`Interval<${Vd[this.unit]}>`}}d$e=Symbol.toStringTag;Sw[d$e]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Interval"))(Sw.prototype);class mIt extends Sw{constructor(){super(Vd.DAY_TIME)}}class gIt extends Sw{constructor(){super(Vd.YEAR_MONTH)}}let Tw=class extends Pn{constructor(t){super(),this.children=[t]}get typeId(){return re.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}};h$e=Symbol.toStringTag;Tw[h$e]=(e=>(e.children=null,e[Symbol.toStringTag]="List"))(Tw.prototype);class Uo extends Pn{constructor(t){super(),this.children=t}get typeId(){return re.Struct}toString(){return`Struct<{${this.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}p$e=Symbol.toStringTag;Uo[p$e]=(e=>(e.children=null,e[Symbol.toStringTag]="Struct"))(Uo.prototype);class yA extends Pn{constructor(t,n,r){super(),this.mode=t,this.children=r,this.typeIds=n=Int32Array.from(n),this.typeIdToChildIndex=n.reduce((i,s,o)=>(i[s]=o)&&i||i,Object.create(null))}get typeId(){return re.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(t=>`${t.type}`).join(" | ")}>`}}m$e=Symbol.toStringTag;yA[m$e]=(e=>(e.mode=null,e.typeIds=null,e.children=null,e.typeIdToChildIndex=null,e.ArrayType=Int8Array,e[Symbol.toStringTag]="Union"))(yA.prototype);let jD=class extends Pn{constructor(t){super(),this.byteWidth=t}get typeId(){return re.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}};g$e=Symbol.toStringTag;jD[g$e]=(e=>(e.byteWidth=null,e.ArrayType=Uint8Array,e[Symbol.toStringTag]="FixedSizeBinary"))(jD.prototype);let Aw=class extends Pn{constructor(t,n){super(),this.listSize=t,this.children=[n]}get typeId(){return re.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}};y$e=Symbol.toStringTag;Aw[y$e]=(e=>(e.children=null,e.listSize=null,e[Symbol.toStringTag]="FixedSizeList"))(Aw.prototype);class vA extends Pn{constructor(t,n=!1){super(),this.children=[t],this.keysSorted=n}get typeId(){return re.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}v$e=Symbol.toStringTag;vA[v$e]=(e=>(e.children=null,e.keysSorted=null,e[Symbol.toStringTag]="Map_"))(vA.prototype);const yIt=(e=>()=>++e)(-1);class Gg extends Pn{constructor(t,n,r,i){super(),this.indices=n,this.dictionary=t,this.isOrdered=i||!1,this.id=r==null?yIt():typeof r=="number"?r:r.low}get typeId(){return re.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}_$e=Symbol.toStringTag;Gg[_$e]=(e=>(e.id=null,e.indices=null,e.isOrdered=null,e.dictionary=null,e[Symbol.toStringTag]="Dictionary"))(Gg.prototype);function Gf(e){const t=e;switch(e.typeId){case re.Decimal:return e.bitWidth/32;case re.Timestamp:return 2;case re.Date:return 1+t.unit;case re.Interval:return 1+t.unit;case re.FixedSizeList:return t.listSize;case re.FixedSizeBinary:return t.byteWidth;default:return 1}}class Vn{visitMany(t,...n){return t.map((r,i)=>this.visit(r,...n.map(s=>s[i])))}visit(...t){return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(t,n=!0){return vIt(this,t,n)}getVisitFnByTypeId(t,n=!0){return P_(this,t,n)}visitNull(t,...n){return null}visitBool(t,...n){return null}visitInt(t,...n){return null}visitFloat(t,...n){return null}visitUtf8(t,...n){return null}visitBinary(t,...n){return null}visitFixedSizeBinary(t,...n){return null}visitDate(t,...n){return null}visitTimestamp(t,...n){return null}visitTime(t,...n){return null}visitDecimal(t,...n){return null}visitList(t,...n){return null}visitStruct(t,...n){return null}visitUnion(t,...n){return null}visitDictionary(t,...n){return null}visitInterval(t,...n){return null}visitFixedSizeList(t,...n){return null}visitMap(t,...n){return null}}function vIt(e,t,n=!0){return typeof t=="number"?P_(e,t,n):typeof t=="string"&&t in re?P_(e,re[t],n):t&&t instanceof Pn?P_(e,whe(t),n):t!=null&&t.type&&t.type instanceof Pn?P_(e,whe(t.type),n):P_(e,re.NONE,n)}function P_(e,t,n=!0){let r=null;switch(t){case re.Null:r=e.visitNull;break;case re.Bool:r=e.visitBool;break;case re.Int:r=e.visitInt;break;case re.Int8:r=e.visitInt8||e.visitInt;break;case re.Int16:r=e.visitInt16||e.visitInt;break;case re.Int32:r=e.visitInt32||e.visitInt;break;case re.Int64:r=e.visitInt64||e.visitInt;break;case re.Uint8:r=e.visitUint8||e.visitInt;break;case re.Uint16:r=e.visitUint16||e.visitInt;break;case re.Uint32:r=e.visitUint32||e.visitInt;break;case re.Uint64:r=e.visitUint64||e.visitInt;break;case re.Float:r=e.visitFloat;break;case re.Float16:r=e.visitFloat16||e.visitFloat;break;case re.Float32:r=e.visitFloat32||e.visitFloat;break;case re.Float64:r=e.visitFloat64||e.visitFloat;break;case re.Utf8:r=e.visitUtf8;break;case re.Binary:r=e.visitBinary;break;case re.FixedSizeBinary:r=e.visitFixedSizeBinary;break;case re.Date:r=e.visitDate;break;case re.DateDay:r=e.visitDateDay||e.visitDate;break;case re.DateMillisecond:r=e.visitDateMillisecond||e.visitDate;break;case re.Timestamp:r=e.visitTimestamp;break;case re.TimestampSecond:r=e.visitTimestampSecond||e.visitTimestamp;break;case re.TimestampMillisecond:r=e.visitTimestampMillisecond||e.visitTimestamp;break;case re.TimestampMicrosecond:r=e.visitTimestampMicrosecond||e.visitTimestamp;break;case re.TimestampNanosecond:r=e.visitTimestampNanosecond||e.visitTimestamp;break;case re.Time:r=e.visitTime;break;case re.TimeSecond:r=e.visitTimeSecond||e.visitTime;break;case re.TimeMillisecond:r=e.visitTimeMillisecond||e.visitTime;break;case re.TimeMicrosecond:r=e.visitTimeMicrosecond||e.visitTime;break;case re.TimeNanosecond:r=e.visitTimeNanosecond||e.visitTime;break;case re.Decimal:r=e.visitDecimal;break;case re.List:r=e.visitList;break;case re.Struct:r=e.visitStruct;break;case re.Union:r=e.visitUnion;break;case re.DenseUnion:r=e.visitDenseUnion||e.visitUnion;break;case re.SparseUnion:r=e.visitSparseUnion||e.visitUnion;break;case re.Dictionary:r=e.visitDictionary;break;case re.Interval:r=e.visitInterval;break;case re.IntervalDayTime:r=e.visitIntervalDayTime||e.visitInterval;break;case re.IntervalYearMonth:r=e.visitIntervalYearMonth||e.visitInterval;break;case re.FixedSizeList:r=e.visitFixedSizeList;break;case re.Map:r=e.visitMap;break}if(typeof r=="function")return r;if(!n)return()=>null;throw new Error(`Unrecognized type '${re[t]}'`)}function whe(e){switch(e.typeId){case re.Null:return re.Null;case re.Int:{const{bitWidth:t,isSigned:n}=e;switch(t){case 8:return n?re.Int8:re.Uint8;case 16:return n?re.Int16:re.Uint16;case 32:return n?re.Int32:re.Uint32;case 64:return n?re.Int64:re.Uint64}return re.Int}case re.Float:switch(e.precision){case mo.HALF:return re.Float16;case mo.SINGLE:return re.Float32;case mo.DOUBLE:return re.Float64}return re.Float;case re.Binary:return re.Binary;case re.Utf8:return re.Utf8;case re.Bool:return re.Bool;case re.Decimal:return re.Decimal;case re.Time:switch(e.unit){case jn.SECOND:return re.TimeSecond;case jn.MILLISECOND:return re.TimeMillisecond;case jn.MICROSECOND:return re.TimeMicrosecond;case jn.NANOSECOND:return re.TimeNanosecond}return re.Time;case re.Timestamp:switch(e.unit){case jn.SECOND:return re.TimestampSecond;case jn.MILLISECOND:return re.TimestampMillisecond;case jn.MICROSECOND:return re.TimestampMicrosecond;case jn.NANOSECOND:return re.TimestampNanosecond}return re.Timestamp;case re.Date:switch(e.unit){case Ud.DAY:return re.DateDay;case Ud.MILLISECOND:return re.DateMillisecond}return re.Date;case re.Interval:switch(e.unit){case Vd.DAY_TIME:return re.IntervalDayTime;case Vd.YEAR_MONTH:return re.IntervalYearMonth}return re.Interval;case re.Map:return re.Map;case re.List:return re.List;case re.Struct:return re.Struct;case re.Union:switch(e.mode){case Zl.Dense:return re.DenseUnion;case Zl.Sparse:return re.SparseUnion}return re.Union;case re.FixedSizeBinary:return re.FixedSizeBinary;case re.FixedSizeList:return re.FixedSizeList;case re.Dictionary:return re.Dictionary}throw new Error(`Unrecognized type '${re[e.typeId]}'`)}Vn.prototype.visitInt8=null;Vn.prototype.visitInt16=null;Vn.prototype.visitInt32=null;Vn.prototype.visitInt64=null;Vn.prototype.visitUint8=null;Vn.prototype.visitUint16=null;Vn.prototype.visitUint32=null;Vn.prototype.visitUint64=null;Vn.prototype.visitFloat16=null;Vn.prototype.visitFloat32=null;Vn.prototype.visitFloat64=null;Vn.prototype.visitDateDay=null;Vn.prototype.visitDateMillisecond=null;Vn.prototype.visitTimestampSecond=null;Vn.prototype.visitTimestampMillisecond=null;Vn.prototype.visitTimestampMicrosecond=null;Vn.prototype.visitTimestampNanosecond=null;Vn.prototype.visitTimeSecond=null;Vn.prototype.visitTimeMillisecond=null;Vn.prototype.visitTimeMicrosecond=null;Vn.prototype.visitTimeNanosecond=null;Vn.prototype.visitDenseUnion=null;Vn.prototype.visitSparseUnion=null;Vn.prototype.visitIntervalDayTime=null;Vn.prototype.visitIntervalYearMonth=null;const w$e=new Float64Array(1),f_=new Uint32Array(w$e.buffer);function E$e(e){const t=(e&31744)>>10,n=(e&1023)/1024,r=Math.pow(-1,(e&32768)>>15);switch(t){case 31:return r*(n?Number.NaN:1/0);case 0:return r*(n?6103515625e-14*n:0)}return r*Math.pow(2,t-15)*(1+n)}function x$e(e){if(e!==e)return 32256;w$e[0]=e;const t=(f_[1]&2147483648)>>16&65535;let n=f_[1]&2146435072,r=0;return n>=1089470464?f_[0]>0?n=31744:(n=(n&2080374784)>>16,r=(f_[1]&1048575)>>10):n<=1056964608?(r=1048576+(f_[1]&1048575),r=1048576+(r<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,r=(f_[1]&1048575)+512>>10),t|n|r&65535}class un extends Vn{}function mn(e){return(t,n,r)=>{if(t.setValid(n,r!=null))return e(t,n,r)}}const _It=(e,t,n)=>{e[t]=Math.trunc(n/864e5)},$K=(e,t,n)=>{e[t]=Math.trunc(n%4294967296),e[t+1]=Math.trunc(n/4294967296)},bIt=(e,t,n)=>{e[t]=Math.trunc(n*1e3%4294967296),e[t+1]=Math.trunc(n*1e3/4294967296)},wIt=(e,t,n)=>{e[t]=Math.trunc(n*1e6%4294967296),e[t+1]=Math.trunc(n*1e6/4294967296)},S$e=(e,t,n,r)=>{if(n+1<t.length){const{[n]:i,[n+1]:s}=t;e.set(r.subarray(0,s-i),i)}},EIt=({offset:e,values:t},n,r)=>{const i=e+n;r?t[i>>3]|=1<<i%8:t[i>>3]&=~(1<<i%8)},Qp=({values:e},t,n)=>{e[t]=n},RK=({values:e},t,n)=>{e[t]=n},T$e=({values:e},t,n)=>{e[t]=x$e(n)},xIt=(e,t,n)=>{switch(e.type.precision){case mo.HALF:return T$e(e,t,n);case mo.SINGLE:case mo.DOUBLE:return RK(e,t,n)}},NK=({values:e},t,n)=>{_It(e,t,n.valueOf())},DK=({values:e},t,n)=>{$K(e,t*2,n.valueOf())},A$e=({stride:e,values:t},n,r)=>{t.set(r.subarray(0,e),e*n)},SIt=({values:e,valueOffsets:t},n,r)=>S$e(e,t,n,r),TIt=({values:e,valueOffsets:t},n,r)=>{S$e(e,t,n,vK(r))},C$e=(e,t,n)=>{e.type.unit===Ud.DAY?NK(e,t,n):DK(e,t,n)},LK=({values:e},t,n)=>$K(e,t*2,n/1e3),MK=({values:e},t,n)=>$K(e,t*2,n),FK=({values:e},t,n)=>bIt(e,t*2,n),BK=({values:e},t,n)=>wIt(e,t*2,n),I$e=(e,t,n)=>{switch(e.type.unit){case jn.SECOND:return LK(e,t,n);case jn.MILLISECOND:return MK(e,t,n);case jn.MICROSECOND:return FK(e,t,n);case jn.NANOSECOND:return BK(e,t,n)}},jK=({values:e},t,n)=>{e[t]=n},zK=({values:e},t,n)=>{e[t]=n},UK=({values:e},t,n)=>{e[t]=n},VK=({values:e},t,n)=>{e[t]=n},O$e=(e,t,n)=>{switch(e.type.unit){case jn.SECOND:return jK(e,t,n);case jn.MILLISECOND:return zK(e,t,n);case jn.MICROSECOND:return UK(e,t,n);case jn.NANOSECOND:return VK(e,t,n)}},P$e=({values:e,stride:t},n,r)=>{e.set(r.subarray(0,t),t*n)},AIt=(e,t,n)=>{const r=e.children[0],i=e.valueOffsets,s=ec.getVisitFn(r);if(Array.isArray(n))for(let o=-1,a=i[t],u=i[t+1];a<u;)s(r,a++,n[++o]);else for(let o=-1,a=i[t],u=i[t+1];a<u;)s(r,a++,n.get(++o))},CIt=(e,t,n)=>{const r=e.children[0],{valueOffsets:i}=e,s=ec.getVisitFn(r);let{[t]:o,[t+1]:a}=i;const u=n instanceof Map?n.entries():Object.entries(n);for(const l of u)if(s(r,o,l),++o>=a)break},IIt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[s]),OIt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(s)),PIt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(i.name)),kIt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[i.name]),$It=(e,t,n)=>{const r=e.type.children.map(s=>ec.getVisitFn(s.type)),i=n instanceof Map?PIt(t,n):n instanceof rr?OIt(t,n):Array.isArray(n)?IIt(t,n):kIt(t,n);e.type.children.forEach((s,o)=>i(r[o],e.children[o],s,o))},RIt=(e,t,n)=>{e.type.mode===Zl.Dense?k$e(e,t,n):$$e(e,t,n)},k$e=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];ec.visit(i,e.valueOffsets[t],n)},$$e=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];ec.visit(i,t,n)},NIt=(e,t,n)=>{var r;(r=e.dictionary)===null||r===void 0||r.set(e.values[t],n)},R$e=(e,t,n)=>{e.type.unit===Vd.DAY_TIME?HK(e,t,n):qK(e,t,n)},HK=({values:e},t,n)=>{e.set(n.subarray(0,2),2*t)},qK=({values:e},t,n)=>{e[t]=n[0]*12+n[1]%12},DIt=(e,t,n)=>{const{stride:r}=e,i=e.children[0],s=ec.getVisitFn(i);if(Array.isArray(n))for(let o=-1,a=t*r;++o<r;)s(i,a+o,n[o]);else for(let o=-1,a=t*r;++o<r;)s(i,a+o,n.get(o))};un.prototype.visitBool=mn(EIt);un.prototype.visitInt=mn(Qp);un.prototype.visitInt8=mn(Qp);un.prototype.visitInt16=mn(Qp);un.prototype.visitInt32=mn(Qp);un.prototype.visitInt64=mn(Qp);un.prototype.visitUint8=mn(Qp);un.prototype.visitUint16=mn(Qp);un.prototype.visitUint32=mn(Qp);un.prototype.visitUint64=mn(Qp);un.prototype.visitFloat=mn(xIt);un.prototype.visitFloat16=mn(T$e);un.prototype.visitFloat32=mn(RK);un.prototype.visitFloat64=mn(RK);un.prototype.visitUtf8=mn(TIt);un.prototype.visitBinary=mn(SIt);un.prototype.visitFixedSizeBinary=mn(A$e);un.prototype.visitDate=mn(C$e);un.prototype.visitDateDay=mn(NK);un.prototype.visitDateMillisecond=mn(DK);un.prototype.visitTimestamp=mn(I$e);un.prototype.visitTimestampSecond=mn(LK);un.prototype.visitTimestampMillisecond=mn(MK);un.prototype.visitTimestampMicrosecond=mn(FK);un.prototype.visitTimestampNanosecond=mn(BK);un.prototype.visitTime=mn(O$e);un.prototype.visitTimeSecond=mn(jK);un.prototype.visitTimeMillisecond=mn(zK);un.prototype.visitTimeMicrosecond=mn(UK);un.prototype.visitTimeNanosecond=mn(VK);un.prototype.visitDecimal=mn(P$e);un.prototype.visitList=mn(AIt);un.prototype.visitStruct=mn($It);un.prototype.visitUnion=mn(RIt);un.prototype.visitDenseUnion=mn(k$e);un.prototype.visitSparseUnion=mn($$e);un.prototype.visitDictionary=mn(NIt);un.prototype.visitInterval=mn(R$e);un.prototype.visitIntervalDayTime=mn(HK);un.prototype.visitIntervalYearMonth=mn(qK);un.prototype.visitFixedSizeList=mn(DIt);un.prototype.visitMap=mn(CIt);const ec=new un,Rc=Symbol.for("parent"),Rb=Symbol.for("rowIndex");class WK{constructor(t,n){return this[Rc]=t,this[Rb]=n,new Proxy(this,new MIt)}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[Rb],n=this[Rc],r=n.type.children,i={};for(let s=-1,o=r.length;++s<o;)i[r[s].name]=yu.visit(n.children[s],t);return i}toString(){return`{${[...this].map(([t,n])=>`${xg(t)}: ${xg(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new LIt(this[Rc],this[Rb])}}class LIt{constructor(t,n){this.childIndex=0,this.children=t.children,this.rowIndex=n,this.childFields=t.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const t=this.childIndex;return t<this.numChildren?(this.childIndex=t+1,{done:!1,value:[this.childFields[t].name,yu.visit(this.children[t],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(WK.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[Rc]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Rb]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class MIt{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[Rc].type.children.map(n=>n.name)}has(t,n){return t[Rc].type.children.findIndex(r=>r.name===n)!==-1}getOwnPropertyDescriptor(t,n){if(t[Rc].type.children.findIndex(r=>r.name===n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[Rc].type.children.findIndex(i=>i.name===n);if(r!==-1){const i=yu.visit(t[Rc].children[r],t[Rb]);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[Rc].type.children.findIndex(s=>s.name===n);return i!==-1?(ec.visit(t[Rc].children[i],t[Rb],r),Reflect.set(t,n,r)):Reflect.has(t,n)||typeof n=="symbol"?Reflect.set(t,n,r):!1}}class nn extends Vn{}function ln(e){return(t,n)=>t.getValid(n)?e(t,n):null}const FIt=(e,t)=>864e5*e[t],GK=(e,t)=>4294967296*e[t+1]+(e[t]>>>0),BIt=(e,t)=>4294967296*(e[t+1]/1e3)+(e[t]>>>0)/1e3,jIt=(e,t)=>4294967296*(e[t+1]/1e6)+(e[t]>>>0)/1e6,N$e=e=>new Date(e),zIt=(e,t)=>N$e(FIt(e,t)),UIt=(e,t)=>N$e(GK(e,t)),VIt=(e,t)=>null,D$e=(e,t,n)=>{if(n+1>=t.length)return null;const r=t[n],i=t[n+1];return e.subarray(r,i)},HIt=({offset:e,values:t},n)=>{const r=e+n;return(t[r>>3]&1<<r%8)!==0},L$e=({values:e},t)=>zIt(e,t),M$e=({values:e},t)=>UIt(e,t*2),k0=({stride:e,values:t},n)=>t[e*n],qIt=({stride:e,values:t},n)=>E$e(t[e*n]),F$e=({values:e},t)=>e[t],WIt=({stride:e,values:t},n)=>t.subarray(e*n,e*(n+1)),GIt=({values:e,valueOffsets:t},n)=>D$e(e,t,n),YIt=({values:e,valueOffsets:t},n)=>{const r=D$e(e,t,n);return r!==null?zU(r):null},KIt=({values:e},t)=>e[t],XIt=({type:e,values:t},n)=>e.precision!==mo.HALF?t[n]:E$e(t[n]),QIt=(e,t)=>e.type.unit===Ud.DAY?L$e(e,t):M$e(e,t),B$e=({values:e},t)=>1e3*GK(e,t*2),j$e=({values:e},t)=>GK(e,t*2),z$e=({values:e},t)=>BIt(e,t*2),U$e=({values:e},t)=>jIt(e,t*2),JIt=(e,t)=>{switch(e.type.unit){case jn.SECOND:return B$e(e,t);case jn.MILLISECOND:return j$e(e,t);case jn.MICROSECOND:return z$e(e,t);case jn.NANOSECOND:return U$e(e,t)}},V$e=({values:e},t)=>e[t],H$e=({values:e},t)=>e[t],q$e=({values:e},t)=>e[t],W$e=({values:e},t)=>e[t],ZIt=(e,t)=>{switch(e.type.unit){case jn.SECOND:return V$e(e,t);case jn.MILLISECOND:return H$e(e,t);case jn.MICROSECOND:return q$e(e,t);case jn.NANOSECOND:return W$e(e,t)}},eOt=({values:e,stride:t},n)=>EK.decimal(e.subarray(t*n,t*(n+1))),tOt=(e,t)=>{const{valueOffsets:n,stride:r,children:i}=e,{[t*r]:s,[t*r+1]:o}=n,u=i[0].slice(s,o-s);return new rr([u])},nOt=(e,t)=>{const{valueOffsets:n,children:r}=e,{[t]:i,[t+1]:s}=n,o=r[0];return new p4(o.slice(i,s-i))},rOt=(e,t)=>new WK(e,t),iOt=(e,t)=>e.type.mode===Zl.Dense?G$e(e,t):Y$e(e,t),G$e=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return yu.visit(r,e.valueOffsets[t])},Y$e=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return yu.visit(r,t)},sOt=(e,t)=>{var n;return(n=e.dictionary)===null||n===void 0?void 0:n.get(e.values[t])},oOt=(e,t)=>e.type.unit===Vd.DAY_TIME?K$e(e,t):X$e(e,t),K$e=({values:e},t)=>e.subarray(2*t,2*(t+1)),X$e=({values:e},t)=>{const n=e[t],r=new Int32Array(2);return r[0]=Math.trunc(n/12),r[1]=Math.trunc(n%12),r},aOt=(e,t)=>{const{stride:n,children:r}=e,s=r[0].slice(t*n,n);return new rr([s])};nn.prototype.visitNull=ln(VIt);nn.prototype.visitBool=ln(HIt);nn.prototype.visitInt=ln(KIt);nn.prototype.visitInt8=ln(k0);nn.prototype.visitInt16=ln(k0);nn.prototype.visitInt32=ln(k0);nn.prototype.visitInt64=ln(F$e);nn.prototype.visitUint8=ln(k0);nn.prototype.visitUint16=ln(k0);nn.prototype.visitUint32=ln(k0);nn.prototype.visitUint64=ln(F$e);nn.prototype.visitFloat=ln(XIt);nn.prototype.visitFloat16=ln(qIt);nn.prototype.visitFloat32=ln(k0);nn.prototype.visitFloat64=ln(k0);nn.prototype.visitUtf8=ln(YIt);nn.prototype.visitBinary=ln(GIt);nn.prototype.visitFixedSizeBinary=ln(WIt);nn.prototype.visitDate=ln(QIt);nn.prototype.visitDateDay=ln(L$e);nn.prototype.visitDateMillisecond=ln(M$e);nn.prototype.visitTimestamp=ln(JIt);nn.prototype.visitTimestampSecond=ln(B$e);nn.prototype.visitTimestampMillisecond=ln(j$e);nn.prototype.visitTimestampMicrosecond=ln(z$e);nn.prototype.visitTimestampNanosecond=ln(U$e);nn.prototype.visitTime=ln(ZIt);nn.prototype.visitTimeSecond=ln(V$e);nn.prototype.visitTimeMillisecond=ln(H$e);nn.prototype.visitTimeMicrosecond=ln(q$e);nn.prototype.visitTimeNanosecond=ln(W$e);nn.prototype.visitDecimal=ln(eOt);nn.prototype.visitList=ln(tOt);nn.prototype.visitStruct=ln(rOt);nn.prototype.visitUnion=ln(iOt);nn.prototype.visitDenseUnion=ln(G$e);nn.prototype.visitSparseUnion=ln(Y$e);nn.prototype.visitDictionary=ln(sOt);nn.prototype.visitInterval=ln(oOt);nn.prototype.visitIntervalDayTime=ln(K$e);nn.prototype.visitIntervalYearMonth=ln(X$e);nn.prototype.visitFixedSizeList=ln(aOt);nn.prototype.visitMap=ln(nOt);const yu=new nn,Uc=Symbol.for("keys"),Nb=Symbol.for("vals");class p4{constructor(t){return this[Uc]=new rr([t.children[0]]).memoize(),this[Nb]=t.children[1],new Proxy(this,new lOt)}[Symbol.iterator](){return new uOt(this[Uc],this[Nb])}get size(){return this[Uc].length}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[Uc],n=this[Nb],r={};for(let i=-1,s=t.length;++i<s;)r[t.get(i)]=yu.visit(n,i);return r}toString(){return`{${[...this].map(([t,n])=>`${xg(t)}: ${xg(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class uOt{constructor(t,n){this.keys=t,this.vals=n,this.keyIndex=0,this.numKeys=t.length}[Symbol.iterator](){return this}next(){const t=this.keyIndex;return t===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(t),yu.visit(this.vals,t)]})}}class lOt{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[Uc].toArray().map(String)}has(t,n){return t[Uc].includes(n)}getOwnPropertyDescriptor(t,n){if(t[Uc].indexOf(n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[Uc].indexOf(n);if(r!==-1){const i=yu.visit(Reflect.get(t,Nb),r);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[Uc].indexOf(n);return i!==-1?(ec.visit(Reflect.get(t,Nb),i,r),Reflect.set(t,n,r)):Reflect.has(t,n)?Reflect.set(t,n,r):!1}}Object.defineProperties(p4.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[Uc]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Nb]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let Ehe;function Q$e(e,t,n,r){const{length:i=0}=e;let s=typeof t!="number"?0:t,o=typeof n!="number"?i:n;return s<0&&(s=(s%i+i)%i),o<0&&(o=(o%i+i)%i),o<s&&(Ehe=s,s=o,o=Ehe),o>i&&(o=i),r?r(e,s,o):[s,o]}const xhe=e=>e!==e;function FE(e){if(typeof e!=="object"||e===null)return xhe(e)?xhe:n=>n===e;if(e instanceof Date){const n=e.valueOf();return r=>r instanceof Date?r.valueOf()===n:!1}return ArrayBuffer.isView(e)?n=>n?tIt(e,n):!1:e instanceof Map?fOt(e):Array.isArray(e)?cOt(e):e instanceof rr?dOt(e):hOt(e,!0)}function cOt(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=FE(e[n]);return m4(t)}function fOt(e){let t=-1;const n=[];for(const r of e.values())n[++t]=FE(r);return m4(n)}function dOt(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=FE(e.get(n));return m4(t)}function hOt(e,t=!1){const n=Object.keys(e);if(!t&&n.length===0)return()=>!1;const r=[];for(let i=-1,s=n.length;++i<s;)r[i]=FE(e[n[i]]);return m4(r,n)}function m4(e,t){return n=>{if(!n||typeof n!="object")return!1;switch(n.constructor){case Array:return pOt(e,n);case Map:return She(e,n,n.keys());case p4:case WK:case Object:case void 0:return She(e,n,t||Object.keys(n))}return n instanceof rr?mOt(e,n):!1}}function pOt(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t[r]))return!1;return!0}function mOt(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t.get(r)))return!1;return!0}function She(e,t,n){const r=n[Symbol.iterator](),i=t instanceof Map?t.keys():Object.keys(t)[Symbol.iterator](),s=t instanceof Map?t.values():Object.values(t)[Symbol.iterator]();let o=0;const a=e.length;let u=s.next(),l=r.next(),c=i.next();for(;o<a&&!l.done&&!c.done&&!u.done&&!(l.value!==c.value||!e[o](u.value));++o,l=r.next(),c=i.next(),u=s.next());return o===a&&l.done&&c.done&&u.done?!0:(r.return&&r.return(),i.return&&i.return(),s.return&&s.return(),!1)}function J$e(e,t,n,r){return(n&1<<r)!==0}function gOt(e,t,n,r){return(n&1<<r)>>r}function YK(e,t,n){const r=n.byteLength+7&-8;if(e>0||n.byteLength<r){const i=new Uint8Array(r);return i.set(e%8===0?n.subarray(e>>3):Z$e(new KK(n,e,t,null,J$e)).subarray(0,r)),i}return n}function Z$e(e){const t=[];let n=0,r=0,i=0;for(const o of e)o&&(i|=1<<r),++r===8&&(t[n++]=i,i=r=0);(n===0||r>0)&&(t[n++]=i);const s=new Uint8Array(t.length+7&-8);return s.set(t),s}class KK{constructor(t,n,r,i,s){this.bytes=t,this.length=r,this.context=i,this.get=s,this.bit=n%8,this.byteIndex=n>>3,this.byte=t[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function HU(e,t,n){if(n-t<=0)return 0;if(n-t<8){let s=0;for(const o of new KK(e,t,n-t,e,gOt))s+=o;return s}const r=n>>3<<3,i=t+(t%8===0?0:8-t%8);return HU(e,t,i)+HU(e,r,n)+yOt(e,i>>3,r-i>>3)}function yOt(e,t,n){let r=0,i=Math.trunc(t);const s=new DataView(e.buffer,e.byteOffset,e.byteLength),o=n===void 0?e.byteLength:i+n;for(;o-i>=4;)r+=xB(s.getUint32(i)),i+=4;for(;o-i>=2;)r+=xB(s.getUint16(i)),i+=2;for(;o-i>=1;)r+=xB(s.getUint8(i)),i+=1;return r}function xB(e){let t=Math.trunc(e);return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),(t+(t>>>4)&252645135)*16843009>>>24}const vOt=-1;class Cr{constructor(t,n,r,i,s,o=[],a){this.type=t,this.children=o,this.dictionary=a,this.offset=Math.floor(Math.max(n||0,0)),this.length=Math.floor(Math.max(r||0,0)),this._nullCount=Math.floor(Math.max(i||0,-1));let u;s instanceof Cr?(this.stride=s.stride,this.values=s.values,this.typeIds=s.typeIds,this.nullBitmap=s.nullBitmap,this.valueOffsets=s.valueOffsets):(this.stride=Gf(t),s&&((u=s[0])&&(this.valueOffsets=u),(u=s[1])&&(this.values=u),(u=s[2])&&(this.nullBitmap=u),(u=s[3])&&(this.typeIds=u))),this.nullable=this._nullCount!==0&&this.nullBitmap&&this.nullBitmap.byteLength>0}get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get byteLength(){let t=0;const{valueOffsets:n,values:r,nullBitmap:i,typeIds:s}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),this.children.reduce((o,a)=>o+a.byteLength,t)}get nullCount(){let t=this._nullCount,n;return t<=vOt&&(n=this.nullBitmap)&&(this._nullCount=t=this.length-HU(n,this.offset,this.offset+this.length)),t}getValid(t){if(this.nullable&&this.nullCount>0){const n=this.offset+t;return(this.nullBitmap[n>>3]&1<<n%8)!==0}return!0}setValid(t,n){if(!this.nullable)return n;if(!this.nullBitmap||this.nullBitmap.byteLength<=t>>3){const{nullBitmap:u}=this._changeLengthAndBackfillNullBitmap(this.length);Object.assign(this,{nullBitmap:u,_nullCount:0})}const{nullBitmap:r,offset:i}=this,s=i+t>>3,o=(i+t)%8,a=r[s]>>o&1;return n?a===0&&(r[s]|=1<<o,this._nullCount=this.nullCount+1):a===1&&(r[s]&=~(1<<o),this._nullCount=this.nullCount-1),n}clone(t=this.type,n=this.offset,r=this.length,i=this._nullCount,s=this,o=this.children){return new Cr(t,n,r,i,s,o,this.dictionary)}slice(t,n){const{stride:r,typeId:i,children:s}=this,o=+(this._nullCount===0)-1,a=i===16?r:1,u=this._sliceBuffers(t,n,r,i);return this.clone(this.type,this.offset+t,n,o,u,s.length===0||this.valueOffsets?s:this._sliceChildren(s,a*t,a*n))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===re.Null)return this.clone(this.type,0,t,0);const{length:n,nullCount:r}=this,i=new Uint8Array((t+63&-64)>>3).fill(255,0,n>>3);i[n>>3]=(1<<n-(n&-8))-1,r>0&&i.set(YK(this.offset,n,this.nullBitmap),0);const s=this.buffers;return s[Ch.VALIDITY]=i,this.clone(this.type,0,t,r+(t-n),s)}_sliceBuffers(t,n,r,i){let s;const{buffers:o}=this;return(s=o[Ch.TYPE])&&(o[Ch.TYPE]=s.subarray(t,t+n)),(s=o[Ch.OFFSET])&&(o[Ch.OFFSET]=s.subarray(t,t+n+1))||(s=o[Ch.DATA])&&(o[Ch.DATA]=i===6?s:s.subarray(r*t,r*(t+n))),o}_sliceChildren(t,n,r){return t.map(i=>i.slice(n,r))}}Cr.prototype.children=Object.freeze([]);class XT extends Vn{visit(t){return this.getVisitFn(t.type).call(this,t)}visitNull(t){const{["type"]:n,["offset"]:r=0,["length"]:i=0}=t;return new Cr(n,r,i,0)}visitBool(t){const{["type"]:n,["offset"]:r=0}=t,i=vr(t.nullBitmap),s=io(n.ArrayType,t.data),{["length"]:o=s.length>>3,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Cr(n,r,o,a,[void 0,s,i])}visitInt(t){const{["type"]:n,["offset"]:r=0}=t,i=vr(t.nullBitmap),s=io(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Cr(n,r,o,a,[void 0,s,i])}visitFloat(t){const{["type"]:n,["offset"]:r=0}=t,i=vr(t.nullBitmap),s=io(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Cr(n,r,o,a,[void 0,s,i])}visitUtf8(t){const{["type"]:n,["offset"]:r=0}=t,i=vr(t.data),s=vr(t.nullBitmap),o=iS(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Cr(n,r,a,u,[o,i,s])}visitBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=vr(t.data),s=vr(t.nullBitmap),o=iS(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Cr(n,r,a,u,[o,i,s])}visitFixedSizeBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=vr(t.nullBitmap),s=io(n.ArrayType,t.data),{["length"]:o=s.length/Gf(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Cr(n,r,o,a,[void 0,s,i])}visitDate(t){const{["type"]:n,["offset"]:r=0}=t,i=vr(t.nullBitmap),s=io(n.ArrayType,t.data),{["length"]:o=s.length/Gf(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Cr(n,r,o,a,[void 0,s,i])}visitTimestamp(t){const{["type"]:n,["offset"]:r=0}=t,i=vr(t.nullBitmap),s=io(n.ArrayType,t.data),{["length"]:o=s.length/Gf(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Cr(n,r,o,a,[void 0,s,i])}visitTime(t){const{["type"]:n,["offset"]:r=0}=t,i=vr(t.nullBitmap),s=io(n.ArrayType,t.data),{["length"]:o=s.length/Gf(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Cr(n,r,o,a,[void 0,s,i])}visitDecimal(t){const{["type"]:n,["offset"]:r=0}=t,i=vr(t.nullBitmap),s=io(n.ArrayType,t.data),{["length"]:o=s.length/Gf(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Cr(n,r,o,a,[void 0,s,i])}visitList(t){const{["type"]:n,["offset"]:r=0,["child"]:i}=t,s=vr(t.nullBitmap),o=iS(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Cr(n,r,a,u,[o,void 0,s],[i])}visitStruct(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=vr(t.nullBitmap),{length:o=i.reduce((u,{length:l})=>Math.max(u,l),0),nullCount:a=t.nullBitmap?-1:0}=t;return new Cr(n,r,o,a,[void 0,void 0,s],i)}visitUnion(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=vr(t.nullBitmap),o=io(n.ArrayType,t.typeIds),{["length"]:a=o.length,["nullCount"]:u=t.nullBitmap?-1:0}=t;if(Pn.isSparseUnion(n))return new Cr(n,r,a,u,[void 0,void 0,s,o],i);const l=iS(t.valueOffsets);return new Cr(n,r,a,u,[l,void 0,s,o],i)}visitDictionary(t){const{["type"]:n,["offset"]:r=0}=t,i=vr(t.nullBitmap),s=io(n.indices.ArrayType,t.data),{["dictionary"]:o=new rr([new XT().visit({type:n.dictionary})])}=t,{["length"]:a=s.length,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Cr(n,r,a,u,[void 0,s,i],[],o)}visitInterval(t){const{["type"]:n,["offset"]:r=0}=t,i=vr(t.nullBitmap),s=io(n.ArrayType,t.data),{["length"]:o=s.length/Gf(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Cr(n,r,o,a,[void 0,s,i])}visitFixedSizeList(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new XT().visit({type:n.valueType})}=t,s=vr(t.nullBitmap),{["length"]:o=i.length/Gf(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Cr(n,r,o,a,[void 0,void 0,s],[i])}visitMap(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new XT().visit({type:n.childType})}=t,s=vr(t.nullBitmap),o=iS(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Cr(n,r,a,u,[o,void 0,s],[i])}}function Bo(e){return new XT().visit(e)}class The{constructor(t=0,n){this.numChunks=t,this.getChunkIterator=n,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const t=this.chunkIterator.next();if(!t.done)return t;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function eRe(e){return e.reduce((t,n)=>t+n.nullCount,0)}function tRe(e){return e.reduce((t,n,r)=>(t[r+1]=t[r]+n.length,t),new Uint32Array(e.length+1))}function nRe(e,t,n,r){const i=[];for(let s=-1,o=e.length;++s<o;){const a=e[s],u=t[s],{length:l}=a;if(u>=r)break;if(n>=u+l)continue;if(u>=n&&u+l<=r){i.push(a);continue}const c=Math.max(0,n-u),f=Math.min(r-u,l);i.push(a.slice(c,f-c))}return i.length===0&&i.push(e[0].slice(0,0)),i}function XK(e,t,n,r){let i=0,s=0,o=t.length-1;do{if(i>=o-1)return n<t[o]?r(e,i,n-t[i]):null;s=i+Math.trunc((o-i)*.5),n<t[s]?o=s:i=s}while(i<o)}function QK(e,t){return e.getValid(t)}function Db(e){function t(n,r,i){return e(n[r],i)}return function(n){const r=this.data;return XK(r,this._offsets,n,t)}}function rRe(e){let t;function n(r,i,s){return e(r[i],s,t)}return function(r,i){const s=this.data;t=i;const o=XK(s,this._offsets,r,n);return t=void 0,o}}function iRe(e){let t;function n(r,i,s){let o=s,a=0,u=0;for(let l=i-1,c=r.length;++l<c;){const f=r[l];if(~(a=e(f,t,o)))return u+a;o=0,u+=f.length}return-1}return function(r,i){t=r;const s=this.data,o=typeof i!="number"?n(s,0,0):XK(s,this._offsets,i,n);return t=void 0,o}}class rn extends Vn{}function _Ot(e,t){return t===null&&e.length>0?0:-1}function bOt(e,t){const{nullBitmap:n}=e;if(!n||e.nullCount<=0)return-1;let r=0;for(const i of new KK(n,e.offset+(t||0),e.length,n,J$e)){if(!i)return r;++r}return-1}function bn(e,t,n){if(t===void 0)return-1;if(t===null)return bOt(e,n);const r=yu.getVisitFn(e),i=FE(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}function sRe(e,t,n){const r=yu.getVisitFn(e),i=FE(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}rn.prototype.visitNull=_Ot;rn.prototype.visitBool=bn;rn.prototype.visitInt=bn;rn.prototype.visitInt8=bn;rn.prototype.visitInt16=bn;rn.prototype.visitInt32=bn;rn.prototype.visitInt64=bn;rn.prototype.visitUint8=bn;rn.prototype.visitUint16=bn;rn.prototype.visitUint32=bn;rn.prototype.visitUint64=bn;rn.prototype.visitFloat=bn;rn.prototype.visitFloat16=bn;rn.prototype.visitFloat32=bn;rn.prototype.visitFloat64=bn;rn.prototype.visitUtf8=bn;rn.prototype.visitBinary=bn;rn.prototype.visitFixedSizeBinary=bn;rn.prototype.visitDate=bn;rn.prototype.visitDateDay=bn;rn.prototype.visitDateMillisecond=bn;rn.prototype.visitTimestamp=bn;rn.prototype.visitTimestampSecond=bn;rn.prototype.visitTimestampMillisecond=bn;rn.prototype.visitTimestampMicrosecond=bn;rn.prototype.visitTimestampNanosecond=bn;rn.prototype.visitTime=bn;rn.prototype.visitTimeSecond=bn;rn.prototype.visitTimeMillisecond=bn;rn.prototype.visitTimeMicrosecond=bn;rn.prototype.visitTimeNanosecond=bn;rn.prototype.visitDecimal=bn;rn.prototype.visitList=bn;rn.prototype.visitStruct=bn;rn.prototype.visitUnion=bn;rn.prototype.visitDenseUnion=sRe;rn.prototype.visitSparseUnion=sRe;rn.prototype.visitDictionary=bn;rn.prototype.visitInterval=bn;rn.prototype.visitIntervalDayTime=bn;rn.prototype.visitIntervalYearMonth=bn;rn.prototype.visitFixedSizeList=bn;rn.prototype.visitMap=bn;const zD=new rn;class sn extends Vn{}function cn(e){const{type:t}=e;if(e.nullCount===0&&e.stride===1&&(t.typeId===re.Timestamp||t instanceof Ia&&t.bitWidth!==64||t instanceof Pp&&t.bitWidth!==64||t instanceof Wg&&t.precision!==mo.HALF))return new The(e.data.length,r=>{const i=e.data[r];return i.values.subarray(0,i.length)[Symbol.iterator]()});let n=0;return new The(e.data.length,r=>{const s=e.data[r].length,o=e.slice(n,n+s);return n+=s,new wOt(o)})}class wOt{constructor(t){this.vector=t,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}sn.prototype.visitNull=cn;sn.prototype.visitBool=cn;sn.prototype.visitInt=cn;sn.prototype.visitInt8=cn;sn.prototype.visitInt16=cn;sn.prototype.visitInt32=cn;sn.prototype.visitInt64=cn;sn.prototype.visitUint8=cn;sn.prototype.visitUint16=cn;sn.prototype.visitUint32=cn;sn.prototype.visitUint64=cn;sn.prototype.visitFloat=cn;sn.prototype.visitFloat16=cn;sn.prototype.visitFloat32=cn;sn.prototype.visitFloat64=cn;sn.prototype.visitUtf8=cn;sn.prototype.visitBinary=cn;sn.prototype.visitFixedSizeBinary=cn;sn.prototype.visitDate=cn;sn.prototype.visitDateDay=cn;sn.prototype.visitDateMillisecond=cn;sn.prototype.visitTimestamp=cn;sn.prototype.visitTimestampSecond=cn;sn.prototype.visitTimestampMillisecond=cn;sn.prototype.visitTimestampMicrosecond=cn;sn.prototype.visitTimestampNanosecond=cn;sn.prototype.visitTime=cn;sn.prototype.visitTimeSecond=cn;sn.prototype.visitTimeMillisecond=cn;sn.prototype.visitTimeMicrosecond=cn;sn.prototype.visitTimeNanosecond=cn;sn.prototype.visitDecimal=cn;sn.prototype.visitList=cn;sn.prototype.visitStruct=cn;sn.prototype.visitUnion=cn;sn.prototype.visitDenseUnion=cn;sn.prototype.visitSparseUnion=cn;sn.prototype.visitDictionary=cn;sn.prototype.visitInterval=cn;sn.prototype.visitIntervalDayTime=cn;sn.prototype.visitIntervalYearMonth=cn;sn.prototype.visitFixedSizeList=cn;sn.prototype.visitMap=cn;const JK=new sn,EOt=(e,t)=>e+t;class $0 extends Vn{visitNull(t,n){return 0}visitInt(t,n){return t.type.bitWidth/8}visitFloat(t,n){return t.type.ArrayType.BYTES_PER_ELEMENT}visitBool(t,n){return 1/8}visitDecimal(t,n){return t.type.bitWidth/8}visitDate(t,n){return(t.type.unit+1)*4}visitTime(t,n){return t.type.bitWidth/8}visitTimestamp(t,n){return t.type.unit===jn.SECOND?4:8}visitInterval(t,n){return(t.type.unit+1)*4}visitStruct(t,n){return t.children.reduce((r,i)=>r+Hd.visit(i,n),0)}visitFixedSizeBinary(t,n){return t.type.byteWidth}visitMap(t,n){return 8+t.children.reduce((r,i)=>r+Hd.visit(i,n),0)}visitDictionary(t,n){var r;return t.type.indices.bitWidth/8+(((r=t.dictionary)===null||r===void 0?void 0:r.getByteLength(t.values[n]))||0)}}const xOt=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),SOt=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),TOt=({valueOffsets:e,stride:t,children:n},r)=>{const i=n[0],{[r*t]:s}=e,{[r*t+1]:o}=e,a=Hd.getVisitFn(i.type),u=i.slice(s,o-s);let l=8;for(let c=-1,f=o-s;++c<f;)l+=a(u,c);return l},AOt=({stride:e,children:t},n)=>{const r=t[0],i=r.slice(n*e,e),s=Hd.getVisitFn(r.type);let o=0;for(let a=-1,u=i.length;++a<u;)o+=s(i,a);return o},COt=(e,t)=>e.type.mode===Zl.Dense?oRe(e,t):aRe(e,t),oRe=({type:e,children:t,typeIds:n,valueOffsets:r},i)=>{const s=e.typeIdToChildIndex[n[i]];return 8+Hd.visit(t[s],r[i])},aRe=({children:e},t)=>4+Hd.visitMany(e,e.map(()=>t)).reduce(EOt,0);$0.prototype.visitUtf8=xOt;$0.prototype.visitBinary=SOt;$0.prototype.visitList=TOt;$0.prototype.visitFixedSizeList=AOt;$0.prototype.visitUnion=COt;$0.prototype.visitDenseUnion=oRe;$0.prototype.visitSparseUnion=aRe;const Hd=new $0;var uRe;const lRe={},cRe={};class rr{constructor(t){var n,r,i;const s=t[0]instanceof rr?t.flatMap(a=>a.data):t;if(s.length===0||s.some(a=>!(a instanceof Cr)))throw new TypeError("Vector constructor expects an Array of Data instances.");const o=(n=s[0])===null||n===void 0?void 0:n.type;switch(s.length){case 0:this._offsets=[0];break;case 1:{const{get:a,set:u,indexOf:l,byteLength:c}=lRe[o.typeId],f=s[0];this.isValid=d=>QK(f,d),this.get=d=>a(f,d),this.set=(d,h)=>u(f,d,h),this.indexOf=d=>l(f,d),this.getByteLength=d=>c(f,d),this._offsets=[0,f.length];break}default:Object.setPrototypeOf(this,cRe[o.typeId]),this._offsets=tRe(s);break}this.data=s,this.type=o,this.stride=Gf(o),this.numChildren=(i=(r=o.children)===null||r===void 0?void 0:r.length)!==null&&i!==void 0?i:0,this.length=this._offsets[this._offsets.length-1]}get byteLength(){return this._byteLength===-1&&(this._byteLength=this.data.reduce((t,n)=>t+n.byteLength,0)),this._byteLength}get nullCount(){return this._nullCount===-1&&(this._nullCount=eRe(this.data)),this._nullCount}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${re[this.type.typeId]}Vector`}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}includes(t,n){return this.indexOf(t,n)>0}getByteLength(t){return 0}[Symbol.iterator](){return JK.visit(this)}concat(...t){return new rr(this.data.concat(t.flatMap(n=>n.data).flat(Number.POSITIVE_INFINITY)))}slice(t,n){return new rr(Q$e(this,t,n,({data:r,_offsets:i},s,o)=>nRe(r,i,s,o)))}toJSON(){return[...this]}toArray(){const{type:t,data:n,length:r,stride:i,ArrayType:s}=this;switch(t.typeId){case re.Int:case re.Float:case re.Decimal:case re.Time:case re.Timestamp:switch(n.length){case 0:return new s;case 1:return n[0].values.subarray(0,r*i);default:return n.reduce((o,{values:a,length:u})=>(o.array.set(a.subarray(0,u*i),o.offset),o.offset+=u*i,o),{array:new s(r*i),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(t){var n;return this.getChildAt((n=this.type.children)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.numChildren?new rr(this.data.map(({children:n})=>n[t])):null}get isMemoized(){return Pn.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(Pn.isDictionary(this.type)){const t=new UD(this.data[0].dictionary),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new rr(n)}return new UD(this)}unmemoize(){if(Pn.isDictionary(this.type)&&this.isMemoized){const t=this.data[0].dictionary.unmemoize(),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new rr(n)}return this}}uRe=Symbol.toStringTag;rr[uRe]=(e=>{e.type=Pn.prototype,e.data=[],e.length=0,e.stride=1,e.numChildren=0,e._nullCount=-1,e._byteLength=-1,e._offsets=new Uint32Array([0]),e[Symbol.isConcatSpreadable]=!0;const t=Object.keys(re).map(n=>re[n]).filter(n=>typeof n=="number"&&n!==re.NONE);for(const n of t){const r=yu.getVisitFnByTypeId(n),i=ec.getVisitFnByTypeId(n),s=zD.getVisitFnByTypeId(n),o=Hd.getVisitFnByTypeId(n);lRe[n]={get:r,set:i,indexOf:s,byteLength:o},cRe[n]=Object.create(e,{isValid:{value:Db(QK)},get:{value:Db(yu.getVisitFnByTypeId(n))},set:{value:rRe(ec.getVisitFnByTypeId(n))},indexOf:{value:iRe(zD.getVisitFnByTypeId(n))},getByteLength:{value:Db(Hd.getVisitFnByTypeId(n))}})}return"Vector"})(rr.prototype);class UD extends rr{constructor(t){super(t.data);const n=this.get,r=this.set,i=this.slice,s=new Array(this.length);Object.defineProperty(this,"get",{value(o){const a=s[o];if(a!==void 0)return a;const u=n.call(this,o);return s[o]=u,u}}),Object.defineProperty(this,"set",{value(o,a){r.call(this,o,a),s[o]=a}}),Object.defineProperty(this,"slice",{value:(o,a)=>new UD(i.call(this,o,a))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new rr(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}function IOt(e){if(!e||e.length<=0)return function(i){return!0};let t="";const n=e.filter(r=>r===r);return n.length>0&&(t=`
    switch (x) {${n.map(r=>`
        case ${OOt(r)}:`).join("")}
            return false;
    }`),e.length!==n.length&&(t=`if (x !== x) return false;
${t}`),new Function("x",`${t}
return true;`)}function OOt(e){return typeof e!="bigint"?xg(e):Qke?`${xg(e)}n`:`"${xg(e)}"`}const SB=(e,t)=>(Math.ceil(e)*t+63&-64||64)/t,POt=(e,t=0)=>e.length>=t?e.subarray(0,t):MD(new e.constructor(t),e,0);class g4{constructor(t,n=1){this.buffer=t,this.stride=n,this.BYTES_PER_ELEMENT=t.BYTES_PER_ELEMENT,this.ArrayType=t.constructor,this._resize(this.length=Math.ceil(t.length/n))}get byteLength(){return Math.ceil(this.length*this.stride)*this.BYTES_PER_ELEMENT}get reservedLength(){return this.buffer.length/this.stride}get reservedByteLength(){return this.buffer.byteLength}set(t,n){return this}append(t){return this.set(this.length,t)}reserve(t){if(t>0){this.length+=t;const n=this.stride,r=this.length*n,i=this.buffer.length;r>=i&&this._resize(i===0?SB(r*1,this.BYTES_PER_ELEMENT):SB(r*2,this.BYTES_PER_ELEMENT))}return this}flush(t=this.length){t=SB(t*this.stride,this.BYTES_PER_ELEMENT);const n=POt(this.buffer,t);return this.clear(),n}clear(){return this.length=0,this._resize(0),this}_resize(t){return this.buffer=MD(new this.ArrayType(t),this.buffer)}}g4.prototype.offset=0;class iI extends g4{last(){return this.get(this.length-1)}get(t){return this.buffer[t]}set(t,n){return this.reserve(t-this.length+1),this.buffer[t*this.stride]=n,this}}class fRe extends iI{constructor(t=new Uint8Array(0)){super(t,1/8),this.numValid=0}get numInvalid(){return this.length-this.numValid}get(t){return this.buffer[t>>3]>>t%8&1}set(t,n){const{buffer:r}=this.reserve(t-this.length+1),i=t>>3,s=t%8,o=r[i]>>s&1;return n?o===0&&(r[i]|=1<<s,++this.numValid):o===1&&(r[i]&=~(1<<s),--this.numValid),this}clear(){return this.numValid=0,super.clear()}}class dRe extends iI{constructor(t=new Int32Array(1)){super(t,1)}append(t){return this.set(this.length-1,t)}set(t,n){const r=this.length-1,i=this.reserve(t-r+1).buffer;return r<t++&&i.fill(i[r],r,t),i[t]=i[t-1]+n,this}flush(t=this.length-1){return t>this.length&&this.set(t-1,0),super.flush(t+1)}}let Au=class{constructor({type:t,nullValues:n}){this.length=0,this.finished=!1,this.type=t,this.children=[],this.nullValues=n,this.stride=Gf(t),this._nulls=new fRe,n&&n.length>0&&(this._isValid=IOt(n))}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t){throw new Error('"throughDOM" not available in this environment')}toVector(){return new rr([this.flush()])}get ArrayType(){return this.type.ArrayType}get nullCount(){return this._nulls.numInvalid}get numChildren(){return this.children.length}get byteLength(){let t=0;const{_offsets:n,_values:r,_nulls:i,_typeIds:s,children:o}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),o.reduce((a,u)=>a+u.byteLength,t)}get reservedLength(){return this._nulls.reservedLength}get reservedByteLength(){let t=0;return this._offsets&&(t+=this._offsets.reservedByteLength),this._values&&(t+=this._values.reservedByteLength),this._nulls&&(t+=this._nulls.reservedByteLength),this._typeIds&&(t+=this._typeIds.reservedByteLength),this.children.reduce((n,r)=>n+r.reservedByteLength,t)}get valueOffsets(){return this._offsets?this._offsets.buffer:null}get values(){return this._values?this._values.buffer:null}get nullBitmap(){return this._nulls?this._nulls.buffer:null}get typeIds(){return this._typeIds?this._typeIds.buffer:null}append(t){return this.set(this.length,t)}isValid(t){return this._isValid(t)}set(t,n){return this.setValid(t,this.isValid(n))&&this.setValue(t,n),this}setValue(t,n){this._setValue(this,t,n)}setValid(t,n){return this.length=this._nulls.set(t,+n).length,n}addChild(t,n=`${this.numChildren}`){throw new Error(`Cannot append children to non-nested type "${this.type}"`)}getChildAt(t){return this.children[t]||null}flush(){let t,n,r,i;const{type:s,length:o,nullCount:a,_typeIds:u,_offsets:l,_values:c,_nulls:f}=this;(n=u==null?void 0:u.flush(o))?i=l==null?void 0:l.flush(o):(i=l==null?void 0:l.flush(o))?t=c==null?void 0:c.flush(l.last()):t=c==null?void 0:c.flush(o),a>0&&(r=f==null?void 0:f.flush(o));const d=this.children.map(h=>h.flush());return this.clear(),Bo({type:s,length:o,nullCount:a,children:d,child:d[0],data:t,typeIds:n,nullBitmap:r,valueOffsets:i})}finish(){this.finished=!0;for(const t of this.children)t.finish();return this}clear(){var t,n,r,i;this.length=0,(t=this._nulls)===null||t===void 0||t.clear(),(n=this._values)===null||n===void 0||n.clear(),(r=this._offsets)===null||r===void 0||r.clear(),(i=this._typeIds)===null||i===void 0||i.clear();for(const s of this.children)s.clear();return this}};Au.prototype.length=1;Au.prototype.stride=1;Au.prototype.children=null;Au.prototype.finished=!1;Au.prototype.nullValues=null;Au.prototype._isValid=()=>!0;class R0 extends Au{constructor(t){super(t),this._values=new iI(new this.ArrayType(0),this.stride)}setValue(t,n){const r=this._values;return r.reserve(t-r.length+1),super.setValue(t,n)}}class y4 extends Au{constructor(t){super(t),this._pendingLength=0,this._offsets=new dRe}setValue(t,n){const r=this._pending||(this._pending=new Map),i=r.get(t);i&&(this._pendingLength-=i.length),this._pendingLength+=n instanceof p4?n[Uc].length:n.length,r.set(t,n)}setValid(t,n){return super.setValid(t,n)?!0:((this._pending||(this._pending=new Map)).set(t,void 0),!1)}clear(){return this._pendingLength=0,this._pending=void 0,super.clear()}flush(){return this._flush(),super.flush()}finish(){return this._flush(),super.finish()}_flush(){const t=this._pending,n=this._pendingLength;return this._pendingLength=0,this._pending=void 0,t&&t.size>0&&this._flushPending(t,n),this}}class qU{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(t,n,r,i){return t.prep(8,24),t.writeInt64(i),t.pad(4),t.writeInt32(r),t.writeInt64(n),t.offset()}}const TB=2,td=4,Fh=4,Lr=4,Im=new Int32Array(2),Ahe=new Float32Array(Im.buffer),Che=new Float64Array(Im.buffer),_P=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;let lp=class WU{constructor(t,n){this.low=t|0,this.high=n|0}static create(t,n){return t==0&&n==0?WU.ZERO:new WU(t,n)}toFloat64(){return(this.low>>>0)+this.high*4294967296}equals(t){return this.low==t.low&&this.high==t.high}};lp.ZERO=new lp(0,0);var GU;(function(e){e[e.UTF8_BYTES=1]="UTF8_BYTES",e[e.UTF16_STRING=2]="UTF16_STRING"})(GU||(GU={}));let VD=class hRe{constructor(t){this.bytes_=t,this.position_=0}static allocate(t){return new hRe(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return new lp(this.readInt32(t),this.readInt32(t+4))}readUint64(t){return new lp(this.readUint32(t),this.readUint32(t+4))}readFloat32(t){return Im[0]=this.readInt32(t),Ahe[0]}readFloat64(t){return Im[_P?0:1]=this.readInt32(t),Im[_P?1:0]=this.readInt32(t+4),Che[0]}writeInt8(t,n){this.bytes_[t]=n}writeUint8(t,n){this.bytes_[t]=n}writeInt16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeUint16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeInt32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeUint32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeInt64(t,n){this.writeInt32(t,n.low),this.writeInt32(t+4,n.high)}writeUint64(t,n){this.writeUint32(t,n.low),this.writeUint32(t+4,n.high)}writeFloat32(t,n){Ahe[0]=n,this.writeInt32(t,Im[0])}writeFloat64(t,n){Che[0]=n,this.writeInt32(t,Im[_P?0:1]),this.writeInt32(t+4,Im[_P?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+td+Fh)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let n=0;n<Fh;n++)t+=String.fromCharCode(this.readInt8(this.position_+td+n));return t}__offset(t,n){const r=t-this.readInt32(t);return n<this.readInt16(r)?this.readInt16(r+n):0}__union(t,n){return t.bb_pos=n+this.readInt32(n),t.bb=this,t}__string(t,n){t+=this.readInt32(t);const r=this.readInt32(t);let i="",s=0;if(t+=td,n===GU.UTF8_BYTES)return this.bytes_.subarray(t,t+r);for(;s<r;){let o;const a=this.readUint8(t+s++);if(a<192)o=a;else{const u=this.readUint8(t+s++);if(a<224)o=(a&31)<<6|u&63;else{const l=this.readUint8(t+s++);if(a<240)o=(a&15)<<12|(u&63)<<6|l&63;else{const c=this.readUint8(t+s++);o=(a&7)<<18|(u&63)<<12|(l&63)<<6|c&63}}}o<65536?i+=String.fromCharCode(o):(o-=65536,i+=String.fromCharCode((o>>10)+55296,(o&1023)+56320))}return i}__union_with_string(t,n){return typeof t=="string"?this.__string(n):this.__union(t,n)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+td}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(t.length!=Fh)throw new Error("FlatBuffers: file identifier must be length "+Fh);for(let n=0;n<Fh;n++)if(t.charCodeAt(n)!=this.readInt8(this.position()+td+n))return!1;return!0}createLong(t,n){return lp.create(t,n)}createScalarList(t,n){const r=[];for(let i=0;i<n;++i)t(i)!==null&&r.push(t(i));return r}createObjList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s.unpack())}return r}},pRe=class mRe{constructor(t){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null;let n;t?n=t:n=1024,this.bb=VD.allocate(n),this.space=n}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(t){this.force_defaults=t}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(t,n){t>this.minalign&&(this.minalign=t);const r=~(this.bb.capacity()-this.space+n)+1&t-1;for(;this.space<r+t+n;){const i=this.bb.capacity();this.bb=mRe.growByteBuffer(this.bb),this.space+=this.bb.capacity()-i}this.pad(r)}pad(t){for(let n=0;n<t;n++)this.bb.writeInt8(--this.space,0)}writeInt8(t){this.bb.writeInt8(this.space-=1,t)}writeInt16(t){this.bb.writeInt16(this.space-=2,t)}writeInt32(t){this.bb.writeInt32(this.space-=4,t)}writeInt64(t){this.bb.writeInt64(this.space-=8,t)}writeFloat32(t){this.bb.writeFloat32(this.space-=4,t)}writeFloat64(t){this.bb.writeFloat64(this.space-=8,t)}addInt8(t){this.prep(1,0),this.writeInt8(t)}addInt16(t){this.prep(2,0),this.writeInt16(t)}addInt32(t){this.prep(4,0),this.writeInt32(t)}addInt64(t){this.prep(8,0),this.writeInt64(t)}addFloat32(t){this.prep(4,0),this.writeFloat32(t)}addFloat64(t){this.prep(8,0),this.writeFloat64(t)}addFieldInt8(t,n,r){(this.force_defaults||n!=r)&&(this.addInt8(n),this.slot(t))}addFieldInt16(t,n,r){(this.force_defaults||n!=r)&&(this.addInt16(n),this.slot(t))}addFieldInt32(t,n,r){(this.force_defaults||n!=r)&&(this.addInt32(n),this.slot(t))}addFieldInt64(t,n,r){(this.force_defaults||!n.equals(r))&&(this.addInt64(n),this.slot(t))}addFieldFloat32(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat32(n),this.slot(t))}addFieldFloat64(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat64(n),this.slot(t))}addFieldOffset(t,n,r){(this.force_defaults||n!=r)&&(this.addOffset(n),this.slot(t))}addFieldStruct(t,n,r){n!=r&&(this.nested(n),this.slot(t))}nested(t){if(t!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")}slot(t){this.vtable!==null&&(this.vtable[t]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(t){const n=t.capacity();if(n&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const r=n<<1,i=VD.allocate(r);return i.setPosition(r-n),i.bytes().set(t.bytes(),r-n),i}addOffset(t){this.prep(td,0),this.writeInt32(this.offset()-t+td)}startObject(t){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=t;for(let n=0;n<t;n++)this.vtable[n]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const t=this.offset();let n=this.vtable_in_use-1;for(;n>=0&&this.vtable[n]==0;n--);const r=n+1;for(;n>=0;n--)this.addInt16(this.vtable[n]!=0?t-this.vtable[n]:0);const i=2;this.addInt16(t-this.object_start);const s=(r+i)*TB;this.addInt16(s);let o=0;const a=this.space;e:for(n=0;n<this.vtables.length;n++){const u=this.bb.capacity()-this.vtables[n];if(s==this.bb.readInt16(u)){for(let l=TB;l<s;l+=TB)if(this.bb.readInt16(a+l)!=this.bb.readInt16(u+l))continue e;o=this.vtables[n];break}}return o?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,o-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t}finish(t,n,r){const i=r?Lr:0;if(n){const s=n;if(this.prep(this.minalign,td+Fh+i),s.length!=Fh)throw new Error("FlatBuffers: file identifier must be length "+Fh);for(let o=Fh-1;o>=0;o--)this.writeInt8(s.charCodeAt(o))}this.prep(this.minalign,td+i),this.addOffset(t),i&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(t,n){this.finish(t,n,!0)}requiredField(t,n){const r=this.bb.capacity()-t,i=r-this.bb.readInt32(r);if(!(this.bb.readInt16(i+n)!=0))throw new Error("FlatBuffers: field "+n+" must be set")}startVector(t,n,r){this.notNested(),this.vector_num_elems=n,this.prep(td,t*n),this.prep(r,t*n)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);const n=this.createString(t);return this.string_maps.set(t,n),n}createString(t){if(!t)return 0;let n;if(t instanceof Uint8Array)n=t;else{n=[];let r=0;for(;r<t.length;){let i;const s=t.charCodeAt(r++);if(s<55296||s>=56320)i=s;else{const o=t.charCodeAt(r++);i=(s<<10)+o+-56613888}i<128?n.push(i):(i<2048?n.push(i>>6&31|192):(i<65536?n.push(i>>12&15|224):n.push(i>>18&7|240,i>>12&63|128),n.push(i>>6&63|128)),n.push(i&63|128))}}this.addInt8(0),this.startVector(1,n.length,1),this.bb.setPosition(this.space-=n.length);for(let r=0,i=this.space,s=this.bb.bytes();r<n.length;r++)s[i++]=n[r];return this.endVector()}createLong(t,n){return lp.create(t,n)}createObjectOffset(t){return t===null?0:typeof t=="string"?this.createString(t):t.pack(this)}createObjectOffsetList(t){const n=[];for(let r=0;r<t.length;++r){const i=t[r];if(i!==null)n.push(this.createObjectOffset(i));else throw new Error("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return n}createStructOffsetList(t,n){return n(this,t.length),this.createObjectOffsetList(t),this.endVector()}};class ds{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsKeyValue(t,n){return(n||new ds).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsKeyValue(t,n){return t.setPosition(t.position()+Lr),(n||new ds).__init(t.readInt32(t.position())+t.position(),t)}key(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}value(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,n){t.addFieldOffset(0,n,0)}static addValue(t,n){t.addFieldOffset(1,n,0)}static endKeyValue(t){return t.endObject()}static createKeyValue(t,n,r){return ds.startKeyValue(t),ds.addKey(t,n),ds.addValue(t,r),ds.endKeyValue(t)}}var Cw;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(Cw||(Cw={}));var Iw;(function(e){e[e.Little=0]="Little",e[e.Big=1]="Big"})(Iw||(Iw={}));var HD;(function(e){e[e.DenseArray=0]="DenseArray"})(HD||(HD={}));class zu{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInt(t,n){return(n||new zu).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInt(t,n){return t.setPosition(t.position()+Lr),(n||new zu).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startInt(t){t.startObject(2)}static addBitWidth(t,n){t.addFieldInt32(0,n,0)}static addIsSigned(t,n){t.addFieldInt8(1,+n,0)}static endInt(t){return t.endObject()}static createInt(t,n,r){return zu.startInt(t),zu.addBitWidth(t,n),zu.addIsSigned(t,r),zu.endInt(t)}}class Bh{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryEncoding(t,n){return(n||new Bh).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryEncoding(t,n){return t.setPosition(t.position()+Lr),(n||new Bh).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}indexType(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new zu).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isOrdered(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}dictionaryKind(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):HD.DenseArray}static startDictionaryEncoding(t){t.startObject(4)}static addId(t,n){t.addFieldInt64(0,n,t.createLong(0,0))}static addIndexType(t,n){t.addFieldOffset(1,n,0)}static addIsOrdered(t,n){t.addFieldInt8(2,+n,0)}static addDictionaryKind(t,n){t.addFieldInt16(3,n,HD.DenseArray)}static endDictionaryEncoding(t){return t.endObject()}}class Wy{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBinary(t,n){return(n||new Wy).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBinary(t,n){return t.setPosition(t.position()+Lr),(n||new Wy).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){return t.endObject()}static createBinary(t){return Wy.startBinary(t),Wy.endBinary(t)}}class Gy{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBool(t,n){return(n||new Gy).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBool(t,n){return t.setPosition(t.position()+Lr),(n||new Gy).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){return t.endObject()}static createBool(t){return Gy.startBool(t),Gy.endBool(t)}}var qD;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(qD||(qD={}));let r$=class k_{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDate(t,n){return(n||new k_).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDate(t,n){return t.setPosition(t.position()+Lr),(n||new k_).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):qD.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,qD.MILLISECOND)}static endDate(t){return t.endObject()}static createDate(t,n){return k_.startDate(t),k_.addUnit(t,n),k_.endDate(t)}};class Ga{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDecimal(t,n){return(n||new Ga).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDecimal(t,n){return t.setPosition(t.position()+Lr),(n||new Ga).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}bitWidth(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):128}static startDecimal(t){t.startObject(3)}static addPrecision(t,n){t.addFieldInt32(0,n,0)}static addScale(t,n){t.addFieldInt32(1,n,0)}static addBitWidth(t,n){t.addFieldInt32(2,n,128)}static endDecimal(t){return t.endObject()}static createDecimal(t,n,r,i){return Ga.startDecimal(t),Ga.addPrecision(t,n),Ga.addScale(t,r),Ga.addBitWidth(t,i),Ga.endDecimal(t)}}var Ow;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(Ow||(Ow={}));class nd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeBinary(t,n){return(n||new nd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeBinary(t,n){return t.setPosition(t.position()+Lr),(n||new nd).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeBinary(t){return t.endObject()}static createFixedSizeBinary(t,n){return nd.startFixedSizeBinary(t),nd.addByteWidth(t,n),nd.endFixedSizeBinary(t)}}class rd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeList(t,n){return(n||new rd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeList(t,n){return t.setPosition(t.position()+Lr),(n||new rd).__init(t.readInt32(t.position())+t.position(),t)}listSize(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeList(t){return t.endObject()}static createFixedSizeList(t,n){return rd.startFixedSizeList(t),rd.addListSize(t,n),rd.endFixedSizeList(t)}}var WD;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(WD||(WD={}));class id{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFloatingPoint(t,n){return(n||new id).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFloatingPoint(t,n){return t.setPosition(t.position()+Lr),(n||new id).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):WD.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(t,n){t.addFieldInt16(0,n,WD.HALF)}static endFloatingPoint(t){return t.endObject()}static createFloatingPoint(t,n){return id.startFloatingPoint(t),id.addPrecision(t,n),id.endFloatingPoint(t)}}var GD;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(GD||(GD={}));class sd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInterval(t,n){return(n||new sd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInterval(t,n){return t.setPosition(t.position()+Lr),(n||new sd).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):GD.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,GD.YEAR_MONTH)}static endInterval(t){return t.endObject()}static createInterval(t,n){return sd.startInterval(t),sd.addUnit(t,n),sd.endInterval(t)}}class Yy{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsList(t,n){return(n||new Yy).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsList(t,n){return t.setPosition(t.position()+Lr),(n||new Yy).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){return t.endObject()}static createList(t){return Yy.startList(t),Yy.endList(t)}}let i$=class $_{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMap(t,n){return(n||new $_).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMap(t,n){return t.setPosition(t.position()+Lr),(n||new $_).__init(t.readInt32(t.position())+t.position(),t)}keysSorted(){const t=this.bb.__offset(this.bb_pos,4);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startMap(t){t.startObject(1)}static addKeysSorted(t,n){t.addFieldInt8(0,+n,0)}static endMap(t){return t.endObject()}static createMap(t,n){return $_.startMap(t),$_.addKeysSorted(t,n),$_.endMap(t)}};class Ky{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsNull(t,n){return(n||new Ky).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNull(t,n){return t.setPosition(t.position()+Lr),(n||new Ky).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){return t.endObject()}static createNull(t){return Ky.startNull(t),Ky.endNull(t)}}class Xy{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsStruct_(t,n){return(n||new Xy).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsStruct_(t,n){return t.setPosition(t.position()+Lr),(n||new Xy).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){return t.endObject()}static createStruct_(t){return Xy.startStruct_(t),Xy.endStruct_(t)}}let GS=class py{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTime(t,n){return(n||new py).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTime(t,n){return t.setPosition(t.position()+Lr),(n||new py).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Ow.MILLISECOND}bitWidth(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,Ow.MILLISECOND)}static addBitWidth(t,n){t.addFieldInt32(1,n,32)}static endTime(t){return t.endObject()}static createTime(t,n,r){return py.startTime(t),py.addUnit(t,n),py.addBitWidth(t,r),py.endTime(t)}},YS=class my{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTimestamp(t,n){return(n||new my).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTimestamp(t,n){return t.setPosition(t.position()+Lr),(n||new my).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Ow.SECOND}timezone(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,Ow.SECOND)}static addTimezone(t,n){t.addFieldOffset(1,n,0)}static endTimestamp(t){return t.endObject()}static createTimestamp(t,n,r){return my.startTimestamp(t),my.addUnit(t,n),my.addTimezone(t,r),my.endTimestamp(t)}};var YD;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(YD||(YD={}));let gy=class yy{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUnion(t,n){return(n||new yy).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUnion(t,n){return t.setPosition(t.position()+Lr),(n||new yy).__init(t.readInt32(t.position())+t.position(),t)}mode(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):YD.Sparse}typeIds(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readInt32(this.bb.__vector(this.bb_pos+n)+t*4):0}typeIdsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){const t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(t,n){t.addFieldInt16(0,n,YD.Sparse)}static addTypeIds(t,n){t.addFieldOffset(1,n,0)}static createTypeIdsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addInt32(n[r]);return t.endVector()}static startTypeIdsVector(t,n){t.startVector(4,n,4)}static endUnion(t){return t.endObject()}static createUnion(t,n,r){return yy.startUnion(t),yy.addMode(t,n),yy.addTypeIds(t,r),yy.endUnion(t)}};class Qy{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUtf8(t,n){return(n||new Qy).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUtf8(t,n){return t.setPosition(t.position()+Lr),(n||new Qy).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){return t.endObject()}static createUtf8(t){return Qy.startUtf8(t),Qy.endUtf8(t)}}var gi;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.FloatingPoint=3]="FloatingPoint",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct_=13]="Struct_",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.LargeList=21]="LargeList"})(gi||(gi={}));let Cl=class s${constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsField(t,n){return(n||new s$).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsField(t,n){return t.setPosition(t.position()+Lr),(n||new s$).__init(t.readInt32(t.position())+t.position(),t)}name(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}nullable(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}typeType(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):gi.NONE}type(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.__union(t,this.bb_pos+n):null}dictionary(t){const n=this.bb.__offset(this.bb_pos,12);return n?(t||new Bh).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}children(t,n){const r=this.bb.__offset(this.bb_pos,14);return r?(n||new s$).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}childrenLength(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,16);return r?(n||new ds).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,n){t.addFieldOffset(0,n,0)}static addNullable(t,n){t.addFieldInt8(1,+n,0)}static addTypeType(t,n){t.addFieldInt8(2,n,gi.NONE)}static addType(t,n){t.addFieldOffset(3,n,0)}static addDictionary(t,n){t.addFieldOffset(4,n,0)}static addChildren(t,n){t.addFieldOffset(5,n,0)}static createChildrenVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startChildrenVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(6,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endField(t){return t.endObject()}},qf=class Th{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsSchema(t,n){return(n||new Th).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSchema(t,n){return t.setPosition(t.position()+Lr),(n||new Th).__init(t.readInt32(t.position())+t.position(),t)}endianness(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Iw.Little}fields(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new Cl).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}fieldsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new ds).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}features(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readInt64(this.bb.__vector(this.bb_pos+n)+t*8):this.bb.createLong(0,0)}featuresLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(4)}static addEndianness(t,n){t.addFieldInt16(0,n,Iw.Little)}static addFields(t,n){t.addFieldOffset(1,n,0)}static createFieldsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startFieldsVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(2,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static addFeatures(t,n){t.addFieldOffset(3,n,0)}static createFeaturesVector(t,n){t.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)t.addInt64(n[r]);return t.endVector()}static startFeaturesVector(t,n){t.startVector(8,n,8)}static endSchema(t){return t.endObject()}static finishSchemaBuffer(t,n){t.finish(n)}static finishSizePrefixedSchemaBuffer(t,n){t.finish(n,void 0,!0)}static createSchema(t,n,r,i,s){return Th.startSchema(t),Th.addEndianness(t,n),Th.addFields(t,r),Th.addCustomMetadata(t,i),Th.addFeatures(t,s),Th.endSchema(t)}};class Mu{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFooter(t,n){return(n||new Mu).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFooter(t,n){return t.setPosition(t.position()+Lr),(n||new Mu).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Cw.V1}schema(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new qf).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}dictionaries(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new qU).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}dictionariesLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(t,n){const r=this.bb.__offset(this.bb_pos,10);return r?(n||new qU).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}recordBatchesLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new ds).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,Cw.V1)}static addSchema(t,n){t.addFieldOffset(1,n,0)}static addDictionaries(t,n){t.addFieldOffset(2,n,0)}static startDictionariesVector(t,n){t.startVector(24,n,8)}static addRecordBatches(t,n){t.addFieldOffset(3,n,0)}static startRecordBatchesVector(t,n){t.startVector(24,n,8)}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endFooter(t){return t.endObject()}static finishFooterBuffer(t,n){t.finish(n)}static finishSizePrefixedFooterBuffer(t,n){t.finish(n,void 0,!0)}}class gr{constructor(t=[],n,r){this.fields=t||[],this.metadata=n||new Map,r||(r=KU(t)),this.dictionaries=r}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(t=>t.name)}toString(){return`Schema<{ ${this.fields.map((t,n)=>`${n}: ${t}`).join(", ")} }>`}select(t){const n=new Set(t),r=this.fields.filter(i=>n.has(i.name));return new gr(r,this.metadata)}selectAt(t){const n=t.map(r=>this.fields[r]).filter(Boolean);return new gr(n,this.metadata)}assign(...t){const n=t[0]instanceof gr?t[0]:Array.isArray(t[0])?new gr(t[0]):new gr(t),r=[...this.fields],i=bP(bP(new Map,this.metadata),n.metadata),s=n.fields.filter(a=>{const u=r.findIndex(l=>l.name===a.name);return~u?(r[u]=a.clone({metadata:bP(bP(new Map,r[u].metadata),a.metadata)}))&&!1:!0}),o=KU(s,new Map);return new gr([...r,...s],i,new Map([...this.dictionaries,...o]))}}gr.prototype.fields=null;gr.prototype.metadata=null;gr.prototype.dictionaries=null;let Ir=class YU{constructor(t,n,r=!1,i){this.name=t,this.type=n,this.nullable=r,this.metadata=i||new Map}static new(...t){let[n,r,i,s]=t;return t[0]&&typeof t[0]=="object"&&({name:n}=t[0],r===void 0&&(r=t[0].type),i===void 0&&(i=t[0].nullable),s===void 0&&(s=t[0].metadata)),new YU(`${n}`,r,i,s)}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...t){let[n,r,i,s]=t;return!t[0]||typeof t[0]!="object"?[n=this.name,r=this.type,i=this.nullable,s=this.metadata]=t:{name:n=this.name,type:r=this.type,nullable:i=this.nullable,metadata:s=this.metadata}=t[0],YU.new(n,r,i,s)}};Ir.prototype.type=null;Ir.prototype.name=null;Ir.prototype.nullable=null;Ir.prototype.metadata=null;function bP(e,t){return new Map([...e||new Map,...t||new Map])}function KU(e,t=new Map){for(let n=-1,r=e.length;++n<r;){const s=e[n].type;if(Pn.isDictionary(s)){if(!t.has(s.id))t.set(s.id,s.dictionary);else if(t.get(s.id)!==s.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}s.children&&s.children.length>0&&KU(s.children,t)}return t}var Ihe=lp,kOt=pRe,$Ot=VD;class XU{constructor(t,n=Hu.V4,r,i){this.schema=t,this.version=n,r&&(this._recordBatches=r),i&&(this._dictionaryBatches=i)}static decode(t){t=new $Ot(vr(t));const n=Mu.getRootAsFooter(t),r=gr.decode(n.schema());return new ROt(r,n)}static encode(t){const n=new kOt,r=gr.encode(n,t.schema);Mu.startRecordBatchesVector(n,t.numRecordBatches);for(const o of[...t.recordBatches()].slice().reverse())Yg.encode(n,o);const i=n.endVector();Mu.startDictionariesVector(n,t.numDictionaries);for(const o of[...t.dictionaryBatches()].slice().reverse())Yg.encode(n,o);const s=n.endVector();return Mu.startFooter(n),Mu.addSchema(n,r),Mu.addVersion(n,Hu.V4),Mu.addRecordBatches(n,i),Mu.addDictionaries(n,s),Mu.finishFooterBuffer(n,Mu.endFooter(n)),n.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}*recordBatches(){for(let t,n=-1,r=this.numRecordBatches;++n<r;)(t=this.getRecordBatch(n))&&(yield t)}*dictionaryBatches(){for(let t,n=-1,r=this.numDictionaries;++n<r;)(t=this.getDictionaryBatch(n))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}}class ROt extends XU{constructor(t,n){super(t,n.version()),this._footer=n}get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){const n=this._footer.recordBatches(t);if(n)return Yg.decode(n)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){const n=this._footer.dictionaries(t);if(n)return Yg.decode(n)}return null}}class Yg{constructor(t,n,r){this.metaDataLength=t,this.offset=typeof r=="number"?r:r.low,this.bodyLength=typeof n=="number"?n:n.low}static decode(t){return new Yg(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,n){const{metaDataLength:r}=n,i=new Ihe(n.offset,0),s=new Ihe(n.bodyLength,0);return qU.createBlock(t,i,r,s)}}const wP=Object.freeze({done:!0,value:void 0});class gRe{tee(){return this._getDOMStream().tee()}pipe(t,n){return this._getNodeStream().pipe(t,n)}pipeTo(t,n){return this._getDOMStream().pipeTo(t,n)}pipeThrough(t,n){return this._getDOMStream().pipeThrough(t,n)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class NOt extends gRe{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(t=>this._closedPromiseResolve=t)}get closed(){return this._closedPromise}cancel(t){return Mh(this,void 0,void 0,function*(){yield this.return(t)})}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){const{resolvers:t}=this;for(;t.length>0;)t.shift().resolve(wP);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return bhe.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return bhe.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}throw(t){return Mh(this,void 0,void 0,function*(){return yield this.abort(t),wP})}return(t){return Mh(this,void 0,void 0,function*(){return yield this.close(),wP})}read(t){return Mh(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return Mh(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(...t){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((n,r)=>{this.resolvers.push({resolve:n,reject:r})}):Promise.resolve(wP)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class AB extends NOt{write(t){if((t=vr(t)).byteLength>0)return super.write(t)}toString(t=!1){return t?zU(this.toUint8Array(!0)):this.toUint8Array(!1).then(zU)}toUint8Array(t=!1){return t?zd(this._values)[0]:Mh(this,void 0,void 0,function*(){var n,r;const i=[];let s=0;try{for(var o=KT(this),a;a=yield o.next(),!a.done;){const u=a.value;i.push(u),s+=u.byteLength}}catch(u){n={error:u}}finally{try{a&&!a.done&&(r=o.return)&&(yield r.call(o))}finally{if(n)throw n.error}}return zd(i,s)[0]})}}class yRe extends y4{constructor(t){super(t),this._values=new g4(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,vr(n))}_flushPending(t,n){const r=this._offsets,i=this._values.reserve(n).buffer;let s=0;for(const[o,a]of t)if(a===void 0)r.set(o,0);else{const u=a.length;i.set(a,s),r.set(o,u),s+=u}}}class DOt extends Au{constructor(t){super(t),this._values=new fRe}setValue(t,n){this._values.set(t,+n)}}class v4 extends R0{}v4.prototype._setValue=C$e;class vRe extends v4{}vRe.prototype._setValue=NK;class _Re extends v4{}_Re.prototype._setValue=DK;class bRe extends R0{}bRe.prototype._setValue=P$e;class LOt extends Au{constructor({type:t,nullValues:n,dictionaryHashFunction:r}){super({type:new Gg(t.dictionary,t.indices,t.id,t.isOrdered)}),this._nulls=null,this._dictionaryOffset=0,this._keysToIndices=Object.create(null),this.indices=KD({type:this.type.indices,nullValues:n}),this.dictionary=KD({type:this.type.dictionary,nullValues:null}),typeof r=="function"&&(this.valueToKey=r)}get values(){return this.indices.values}get nullCount(){return this.indices.nullCount}get nullBitmap(){return this.indices.nullBitmap}get byteLength(){return this.indices.byteLength+this.dictionary.byteLength}get reservedLength(){return this.indices.reservedLength+this.dictionary.reservedLength}get reservedByteLength(){return this.indices.reservedByteLength+this.dictionary.reservedByteLength}isValid(t){return this.indices.isValid(t)}setValid(t,n){const r=this.indices;return n=r.setValid(t,n),this.length=r.length,n}setValue(t,n){const r=this._keysToIndices,i=this.valueToKey(n);let s=r[i];return s===void 0&&(r[i]=s=this._dictionaryOffset+this.dictionary.append(n).length-1),this.indices.setValue(t,s)}flush(){const t=this.type,n=this._dictionary,r=this.dictionary.toVector(),i=this.indices.flush().clone(t);return i.dictionary=n?n.concat(r):r,this.finished||(this._dictionaryOffset+=r.length),this._dictionary=i.dictionary,this.clear(),i}finish(){return this.indices.finish(),this.dictionary.finish(),this._dictionaryOffset=0,this._keysToIndices=Object.create(null),super.finish()}clear(){return this.indices.clear(),this.dictionary.clear(),super.clear()}valueToKey(t){return typeof t=="string"?t:`${t}`}}class wRe extends R0{}wRe.prototype._setValue=A$e;class MOt extends Au{setValue(t,n){const[r]=this.children,i=t*this.stride;for(let s=-1,o=n.length;++s<o;)r.set(i+s,n[s])}addChild(t,n="0"){if(this.numChildren>0)throw new Error("FixedSizeListBuilder can only have one child.");const r=this.children.push(t);return this.type=new Aw(this.type.listSize,new Ir(n,t.type,!0)),r}}class _4 extends R0{setValue(t,n){this._values.set(t,n)}}class FOt extends _4{setValue(t,n){super.setValue(t,x$e(n))}}class BOt extends _4{}class jOt extends _4{}class b4 extends R0{}b4.prototype._setValue=R$e;class ERe extends b4{}ERe.prototype._setValue=HK;class xRe extends b4{}xRe.prototype._setValue=qK;class Jp extends R0{setValue(t,n){this._values.set(t,n)}}class zOt extends Jp{}class UOt extends Jp{}class VOt extends Jp{}class HOt extends Jp{}class qOt extends Jp{}class WOt extends Jp{}class GOt extends Jp{}class YOt extends Jp{}class KOt extends y4{constructor(t){super(t),this._offsets=new dRe}addChild(t,n="0"){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new Tw(new Ir(n,t.type,!0)),this.numChildren-1}_flushPending(t){const n=this._offsets,[r]=this.children;for(const[i,s]of t)if(typeof s>"u")n.set(i,0);else{const o=s.length,a=n.set(i,o).buffer[i];for(let u=-1;++u<o;)r.set(a+u,s[u])}}}class XOt extends y4{set(t,n){return super.set(t,n)}setValue(t,n){const r=n instanceof Map?n:new Map(Object.entries(n)),i=this._pending||(this._pending=new Map),s=i.get(t);s&&(this._pendingLength-=s.size),this._pendingLength+=r.size,i.set(t,r)}addChild(t,n=`${this.numChildren}`){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new vA(new Ir(n,t.type,!0),this.type.keysSorted),this.numChildren-1}_flushPending(t){const n=this._offsets,[r]=this.children;for(const[i,s]of t)if(s===void 0)n.set(i,0);else{let{[i]:o,[i+1]:a}=n.set(i,s.size).buffer;for(const u of s.entries())if(r.set(o,u),++o>=a)break}}}class QOt extends Au{setValue(t,n){}setValid(t,n){return this.length=Math.max(t+1,this.length),n}}class JOt extends Au{setValue(t,n){const{children:r,type:i}=this;switch(Array.isArray(n)||n.constructor){case!0:return i.children.forEach((s,o)=>r[o].set(t,n[o]));case Map:return i.children.forEach((s,o)=>r[o].set(t,n.get(s.name)));default:return i.children.forEach((s,o)=>r[o].set(t,n[s.name]))}}setValid(t,n){return super.setValid(t,n)||this.children.forEach(r=>r.setValid(t,n)),n}addChild(t,n=`${this.numChildren}`){const r=this.children.push(t);return this.type=new Uo([...this.type.children,new Ir(n,t.type,!0)]),r}}class BE extends R0{}BE.prototype._setValue=I$e;class SRe extends BE{}SRe.prototype._setValue=LK;class TRe extends BE{}TRe.prototype._setValue=MK;class ARe extends BE{}ARe.prototype._setValue=FK;class CRe extends BE{}CRe.prototype._setValue=BK;class jE extends R0{}jE.prototype._setValue=O$e;class IRe extends jE{}IRe.prototype._setValue=jK;class ORe extends jE{}ORe.prototype._setValue=zK;class PRe extends jE{}PRe.prototype._setValue=UK;class kRe extends jE{}kRe.prototype._setValue=VK;class ZK extends Au{constructor(t){super(t),this._typeIds=new iI(new Int8Array(0),1),typeof t.valueToChildTypeId=="function"&&(this._valueToChildTypeId=t.valueToChildTypeId)}get typeIdToChildIndex(){return this.type.typeIdToChildIndex}append(t,n){return this.set(this.length,t,n)}set(t,n,r){return r===void 0&&(r=this._valueToChildTypeId(this,n,t)),this.setValid(t,this.isValid(n))&&this.setValue(t,n,r),this}setValue(t,n,r){this._typeIds.set(t,r);const i=this.type.typeIdToChildIndex[r],s=this.children[i];s==null||s.set(t,n)}addChild(t,n=`${this.children.length}`){const r=this.children.push(t),{type:{children:i,mode:s,typeIds:o}}=this,a=[...i,new Ir(n,t.type)];return this.type=new yA(s,[...o,r],a),r}_valueToChildTypeId(t,n,r){throw new Error("Cannot map UnionBuilder value to child typeId. Pass the `childTypeId` as the second argument to unionBuilder.append(), or supply a `valueToChildTypeId` function as part of the UnionBuilder constructor options.")}}class ZOt extends ZK{}class ePt extends ZK{constructor(t){super(t),this._offsets=new iI(new Int32Array(0))}setValue(t,n,r){const i=this._typeIds.set(t,r).buffer[t],s=this.getChildAt(this.type.typeIdToChildIndex[i]),o=this._offsets.set(t,s.length).buffer[t];s==null||s.set(o,n)}}class $Re extends y4{constructor(t){super(t),this._values=new g4(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,vK(n))}_flushPending(t,n){}}$Re.prototype._flushPending=yRe.prototype._flushPending;class tPt extends Vn{visitNull(){return QOt}visitBool(){return DOt}visitInt(){return Jp}visitInt8(){return zOt}visitInt16(){return UOt}visitInt32(){return VOt}visitInt64(){return HOt}visitUint8(){return qOt}visitUint16(){return WOt}visitUint32(){return GOt}visitUint64(){return YOt}visitFloat(){return _4}visitFloat16(){return FOt}visitFloat32(){return BOt}visitFloat64(){return jOt}visitUtf8(){return $Re}visitBinary(){return yRe}visitFixedSizeBinary(){return wRe}visitDate(){return v4}visitDateDay(){return vRe}visitDateMillisecond(){return _Re}visitTimestamp(){return BE}visitTimestampSecond(){return SRe}visitTimestampMillisecond(){return TRe}visitTimestampMicrosecond(){return ARe}visitTimestampNanosecond(){return CRe}visitTime(){return jE}visitTimeSecond(){return IRe}visitTimeMillisecond(){return ORe}visitTimeMicrosecond(){return PRe}visitTimeNanosecond(){return kRe}visitDecimal(){return bRe}visitList(){return KOt}visitStruct(){return JOt}visitUnion(){return ZK}visitDenseUnion(){return ePt}visitSparseUnion(){return ZOt}visitDictionary(){return LOt}visitInterval(){return b4}visitIntervalDayTime(){return ERe}visitIntervalYearMonth(){return xRe}visitFixedSizeList(){return MOt}visitMap(){return XOt}}const nPt=new tPt;class on extends Vn{compareSchemas(t,n){return t===n||n instanceof t.constructor&&this.compareManyFields(t.fields,n.fields)}compareManyFields(t,n){return t===n||Array.isArray(t)&&Array.isArray(n)&&t.length===n.length&&t.every((r,i)=>this.compareFields(r,n[i]))}compareFields(t,n){return t===n||n instanceof t.constructor&&t.name===n.name&&t.nullable===n.nullable&&this.visit(t.type,n.type)}}function Cu(e,t){return t instanceof e.constructor}function sI(e,t){return e===t||Cu(e,t)}function Zp(e,t){return e===t||Cu(e,t)&&e.bitWidth===t.bitWidth&&e.isSigned===t.isSigned}function w4(e,t){return e===t||Cu(e,t)&&e.precision===t.precision}function rPt(e,t){return e===t||Cu(e,t)&&e.byteWidth===t.byteWidth}function eX(e,t){return e===t||Cu(e,t)&&e.unit===t.unit}function oI(e,t){return e===t||Cu(e,t)&&e.unit===t.unit&&e.timezone===t.timezone}function aI(e,t){return e===t||Cu(e,t)&&e.unit===t.unit&&e.bitWidth===t.bitWidth}function iPt(e,t){return e===t||Cu(e,t)&&e.children.length===t.children.length&&Kg.compareManyFields(e.children,t.children)}function sPt(e,t){return e===t||Cu(e,t)&&e.children.length===t.children.length&&Kg.compareManyFields(e.children,t.children)}function tX(e,t){return e===t||Cu(e,t)&&e.mode===t.mode&&e.typeIds.every((n,r)=>n===t.typeIds[r])&&Kg.compareManyFields(e.children,t.children)}function oPt(e,t){return e===t||Cu(e,t)&&e.id===t.id&&e.isOrdered===t.isOrdered&&Kg.visit(e.indices,t.indices)&&Kg.visit(e.dictionary,t.dictionary)}function nX(e,t){return e===t||Cu(e,t)&&e.unit===t.unit}function aPt(e,t){return e===t||Cu(e,t)&&e.listSize===t.listSize&&e.children.length===t.children.length&&Kg.compareManyFields(e.children,t.children)}function uPt(e,t){return e===t||Cu(e,t)&&e.keysSorted===t.keysSorted&&e.children.length===t.children.length&&Kg.compareManyFields(e.children,t.children)}on.prototype.visitNull=sI;on.prototype.visitBool=sI;on.prototype.visitInt=Zp;on.prototype.visitInt8=Zp;on.prototype.visitInt16=Zp;on.prototype.visitInt32=Zp;on.prototype.visitInt64=Zp;on.prototype.visitUint8=Zp;on.prototype.visitUint16=Zp;on.prototype.visitUint32=Zp;on.prototype.visitUint64=Zp;on.prototype.visitFloat=w4;on.prototype.visitFloat16=w4;on.prototype.visitFloat32=w4;on.prototype.visitFloat64=w4;on.prototype.visitUtf8=sI;on.prototype.visitBinary=sI;on.prototype.visitFixedSizeBinary=rPt;on.prototype.visitDate=eX;on.prototype.visitDateDay=eX;on.prototype.visitDateMillisecond=eX;on.prototype.visitTimestamp=oI;on.prototype.visitTimestampSecond=oI;on.prototype.visitTimestampMillisecond=oI;on.prototype.visitTimestampMicrosecond=oI;on.prototype.visitTimestampNanosecond=oI;on.prototype.visitTime=aI;on.prototype.visitTimeSecond=aI;on.prototype.visitTimeMillisecond=aI;on.prototype.visitTimeMicrosecond=aI;on.prototype.visitTimeNanosecond=aI;on.prototype.visitDecimal=sI;on.prototype.visitList=iPt;on.prototype.visitStruct=sPt;on.prototype.visitUnion=tX;on.prototype.visitDenseUnion=tX;on.prototype.visitSparseUnion=tX;on.prototype.visitDictionary=oPt;on.prototype.visitInterval=nX;on.prototype.visitIntervalDayTime=nX;on.prototype.visitIntervalYearMonth=nX;on.prototype.visitFixedSizeList=aPt;on.prototype.visitMap=uPt;const Kg=new on;function QU(e,t){return Kg.compareSchemas(e,t)}function KD(e){const t=e.type,n=new(nPt.getVisitFn(t)())(e);if(t.children&&t.children.length>0){const r=e.children||[],i={nullValues:e.nullValues},s=Array.isArray(r)?(o,a)=>r[a]||i:({name:o})=>r[o]||i;for(const[o,a]of t.children.entries()){const{type:u}=a,l=s(a,o);n.children.push(KD(Object.assign(Object.assign({},l),{type:u})))}}return n}function CB(e,t){return lPt(e,t.map(n=>n.data.concat()))}function lPt(e,t){const n=[...e.fields],r=[],i={numBatches:t.reduce((f,d)=>Math.max(f,d.length),0)};let s=0,o=0,a=-1;const u=t.length;let l,c=[];for(;i.numBatches-- >0;){for(o=Number.POSITIVE_INFINITY,a=-1;++a<u;)c[a]=l=t[a].shift(),o=Math.min(o,l?l.length:o);Number.isFinite(o)&&(c=cPt(n,o,c,t,i),o>0&&(r[s++]=Bo({type:new Uo(n),length:o,nullCount:0,children:c.slice()})))}return[e=e.assign(n),r.map(f=>new Uu(e,f))]}function cPt(e,t,n,r,i){var s;const o=(t+63&-64)>>3;for(let a=-1,u=r.length;++a<u;){const l=n[a],c=l==null?void 0:l.length;if(c>=t)c===t?n[a]=l:(n[a]=l.slice(0,t),i.numBatches=Math.max(i.numBatches,r[a].unshift(l.slice(t,c-t))));else{const f=e[a];e[a]=f.clone({nullable:!0}),n[a]=(s=l==null?void 0:l._changeLengthAndBackfillNullBitmap(t))!==null&&s!==void 0?s:Bo({type:f.type,length:t,nullCount:t,nullBitmap:new Uint8Array(o)})}}return n}var RRe;class Xa{constructor(...t){var n,r;if(t.length===0)return this.batches=[],this.schema=new gr([]),this._offsets=[0],this;let i,s;t[0]instanceof gr&&(i=t.shift()),t[t.length-1]instanceof Uint32Array&&(s=t.pop());const o=u=>{if(u){if(u instanceof Uu)return[u];if(u instanceof Xa)return u.batches;if(u instanceof Cr){if(u.type instanceof Uo)return[new Uu(new gr(u.type.children),u)]}else{if(Array.isArray(u))return u.flatMap(l=>o(l));if(typeof u[Symbol.iterator]=="function")return[...u].flatMap(l=>o(l));if(typeof u=="object"){const l=Object.keys(u),c=l.map(h=>new rr([u[h]])),f=new gr(l.map((h,p)=>new Ir(String(h),c[p].type))),[,d]=CB(f,c);return d.length===0?[new Uu(u)]:d}}}return[]},a=t.flatMap(u=>o(u));if(i=(r=i??((n=a[0])===null||n===void 0?void 0:n.schema))!==null&&r!==void 0?r:new gr([]),!(i instanceof gr))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const u of a){if(!(u instanceof Uu))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!QU(i,u.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=i,this.batches=a,this._offsets=s??tRe(this.data)}get data(){return this.batches.map(({data:t})=>t)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((t,n)=>t+n.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=eRe(this.data)),this._nullCount}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}getByteLength(t){return 0}[Symbol.iterator](){return this.batches.length>0?JK.visit(new rr(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...t){const n=this.schema,r=this.data.concat(t.flatMap(({data:i})=>i));return new Xa(n,r.map(i=>new Uu(n,i)))}slice(t,n){const r=this.schema;[t,n]=Q$e({length:this.numRows},t,n);const i=nRe(this.data,this._offsets,t,n);return new Xa(r,i.map(s=>new Uu(r,s)))}getChild(t){return this.getChildAt(this.schema.fields.findIndex(n=>n.name===t))}getChildAt(t){if(t>-1&&t<this.schema.fields.length){const n=this.data.map(r=>r.children[t]);if(n.length===0){const{type:r}=this.schema.fields[t],i=Bo({type:r,length:0,nullCount:0});n.push(i._changeLengthAndBackfillNullBitmap(this.numRows))}return new rr(n)}return null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=[...this.batches];if(t>-1&&t<this.numCols){n||(n=new rr([Bo({type:new Op,length:this.numRows})]));const s=r.fields.slice(),o=s[t].clone({type:n.type}),a=this.schema.fields.map((u,l)=>this.getChildAt(l));[s[t],a[t]]=[o,n],[r,i]=CB(r,a)}return new Xa(r,i)}select(t){const n=this.schema.fields.reduce((r,i,s)=>r.set(i.name,s),new Map);return this.selectAt(t.map(r=>n.get(r)).filter(r=>r>-1))}selectAt(t){const n=this.schema.selectAt(t),r=this.batches.map(i=>i.selectAt(t));return new Xa(n,r)}assign(t){const n=this.schema.fields,[r,i]=t.schema.fields.reduce((a,u,l)=>{const[c,f]=a,d=n.findIndex(h=>h.name===u.name);return~d?f[d]=l:c.push(l),a},[[],[]]),s=this.schema.assign(t.schema),o=[...n.map((a,u)=>[u,i[u]]).map(([a,u])=>u===void 0?this.getChildAt(a):t.getChildAt(u)),...r.map(a=>t.getChildAt(a))].filter(Boolean);return new Xa(...CB(s,o))}}RRe=Symbol.toStringTag;Xa[RRe]=(e=>(e.schema=null,e.batches=[],e._offsets=new Uint32Array([0]),e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,e.isValid=Db(QK),e.get=Db(yu.getVisitFn(re.Struct)),e.set=rRe(ec.getVisitFn(re.Struct)),e.indexOf=iRe(zD.getVisitFn(re.Struct)),e.getByteLength=Db(Hd.getVisitFn(re.Struct)),"Table"))(Xa.prototype);var NRe;let Uu=class KS{constructor(...t){switch(t.length){case 2:{if([this.schema]=t,!(this.schema instanceof gr))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=Bo({nullCount:0,type:new Uo(this.schema.fields),children:this.schema.fields.map(n=>Bo({type:n.type,nullCount:0}))})]=t,!(this.data instanceof Cr))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=Ohe(this.schema,this.data.children);break}case 1:{const[n]=t,{fields:r,children:i,length:s}=Object.keys(n).reduce((u,l,c)=>(u.children[c]=n[l],u.length=Math.max(u.length,n[l].length),u.fields[c]=Ir.new({name:l,type:n[l].type,nullable:!0}),u),{length:0,fields:new Array,children:new Array}),o=new gr(r),a=Bo({type:new Uo(r),length:s,children:i,nullCount:0});[this.schema,this.data]=Ohe(o,a.children,s);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=DRe(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(t){return this.data.getValid(t)}get(t){return yu.visit(this.data,t)}set(t,n){return ec.visit(this.data,t,n)}indexOf(t,n){return zD.visit(this.data,t,n)}getByteLength(t){return Hd.visit(this.data,t)}[Symbol.iterator](){return JK.visit(new rr([this.data]))}toArray(){return[...this]}concat(...t){return new Xa(this.schema,[this,...t])}slice(t,n){const[r]=new rr([this.data]).slice(t,n).data;return new KS(this.schema,r)}getChild(t){var n;return this.getChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.schema.fields.length?new rr([this.data.children[t]]):null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=this.data;if(t>-1&&t<this.numCols){n||(n=new rr([Bo({type:new Op,length:this.numRows})]));const s=r.fields.slice(),o=i.children.slice(),a=s[t].clone({type:n.type});[s[t],o[t]]=[a,n.data[0]],r=new gr(s,new Map(this.schema.metadata)),i=Bo({type:new Uo(s),children:o})}return new KS(r,i)}select(t){const n=this.schema.select(t),r=new Uo(n.fields),i=[];for(const s of t){const o=this.schema.fields.findIndex(a=>a.name===s);~o&&(i[o]=this.data.children[o])}return new KS(n,Bo({type:r,length:this.numRows,children:i}))}selectAt(t){const n=this.schema.selectAt(t),r=t.map(s=>this.data.children[s]).filter(Boolean),i=Bo({type:new Uo(n.fields),length:this.numRows,children:r});return new KS(n,i)}};NRe=Symbol.toStringTag;Uu[NRe]=(e=>(e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(Uu.prototype);function Ohe(e,t,n=t.reduce((r,i)=>Math.max(r,i.length),0)){var r;const i=[...e.fields],s=[...t],o=(n+63&-64)>>3;for(const[a,u]of e.fields.entries()){const l=t[a];(!l||l.length!==n)&&(i[a]=u.clone({nullable:!0}),s[a]=(r=l==null?void 0:l._changeLengthAndBackfillNullBitmap(n))!==null&&r!==void 0?r:Bo({type:u.type,length:n,nullCount:n,nullBitmap:new Uint8Array(o)}))}return[e.assign(i),Bo({type:new Uo(i),length:n,children:s})]}function DRe(e,t,n=new Map){for(let r=-1,i=e.length;++r<i;){const o=e[r].type,a=t[r];if(Pn.isDictionary(o)){if(!n.has(o.id))a.dictionary&&n.set(o.id,a.dictionary);else if(n.get(o.id)!==a.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}o.children&&o.children.length>0&&DRe(o.children,a.children,n)}return n}class fPt extends Uu{constructor(t){const n=t.fields.map(i=>Bo({type:i.type})),r=Bo({type:new Uo(t.fields),nullCount:0,children:n});super(t,r)}}var XD;(function(e){e[e.BUFFER=0]="BUFFER"})(XD||(XD={}));var QD;(function(e){e[e.LZ4_FRAME=0]="LZ4_FRAME",e[e.ZSTD=1]="ZSTD"})(QD||(QD={}));class Om{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBodyCompression(t,n){return(n||new Om).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBodyCompression(t,n){return t.setPosition(t.position()+Lr),(n||new Om).__init(t.readInt32(t.position())+t.position(),t)}codec(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):QD.LZ4_FRAME}method(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt8(this.bb_pos+t):XD.BUFFER}static startBodyCompression(t){t.startObject(2)}static addCodec(t,n){t.addFieldInt8(0,n,QD.LZ4_FRAME)}static addMethod(t,n){t.addFieldInt8(1,n,XD.BUFFER)}static endBodyCompression(t){return t.endObject()}static createBodyCompression(t,n,r){return Om.startBodyCompression(t),Om.addCodec(t,n),Om.addMethod(t,r),Om.endBodyCompression(t)}}let LRe=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(t,n,r){return t.prep(8,16),t.writeInt64(r),t.writeInt64(n),t.offset()}},MRe=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(t,n,r){return t.prep(8,16),t.writeInt64(r),t.writeInt64(n),t.offset()}},Ih=class JU{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsRecordBatch(t,n){return(n||new JU).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsRecordBatch(t,n){return t.setPosition(t.position()+Lr),(n||new JU).__init(t.readInt32(t.position())+t.position(),t)}length(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}nodes(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new MRe).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}nodesLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new LRe).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}buffersLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}compression(t){const n=this.bb.__offset(this.bb_pos,10);return n?(t||new Om).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startRecordBatch(t){t.startObject(4)}static addLength(t,n){t.addFieldInt64(0,n,t.createLong(0,0))}static addNodes(t,n){t.addFieldOffset(1,n,0)}static startNodesVector(t,n){t.startVector(16,n,8)}static addBuffers(t,n){t.addFieldOffset(2,n,0)}static startBuffersVector(t,n){t.startVector(16,n,8)}static addCompression(t,n){t.addFieldOffset(3,n,0)}static endRecordBatch(t){return t.endObject()}},R_=class ZU{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryBatch(t,n){return(n||new ZU).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryBatch(t,n){return t.setPosition(t.position()+Lr),(n||new ZU).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}data(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new Ih).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isDelta(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startDictionaryBatch(t){t.startObject(3)}static addId(t,n){t.addFieldInt64(0,n,t.createLong(0,0))}static addData(t,n){t.addFieldOffset(1,n,0)}static addIsDelta(t,n){t.addFieldInt8(2,+n,0)}static endDictionaryBatch(t){return t.endObject()}};var JD;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(JD||(JD={}));let hm=class Mf{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMessage(t,n){return(n||new Mf).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMessage(t,n){return t.setPosition(t.position()+Lr),(n||new Mf).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Cw.V1}headerType(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):JD.NONE}header(t){const n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__union(t,this.bb_pos+n):null}bodyLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new ds).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,Cw.V1)}static addHeaderType(t,n){t.addFieldInt8(1,n,JD.NONE)}static addHeader(t,n){t.addFieldOffset(2,n,0)}static addBodyLength(t,n){t.addFieldInt64(3,n,t.createLong(0,0))}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endMessage(t){return t.endObject()}static finishMessageBuffer(t,n){t.finish(n)}static finishSizePrefixedMessageBuffer(t,n){t.finish(n,void 0,!0)}static createMessage(t,n,r,i,s,o){return Mf.startMessage(t),Mf.addVersion(t,n),Mf.addHeaderType(t,r),Mf.addHeader(t,i),Mf.addBodyLength(t,s),Mf.addCustomMetadata(t,o),Mf.endMessage(t)}};var dPt=lp;class hPt extends Vn{visit(t,n){return t==null||n==null?void 0:super.visit(t,n)}visitNull(t,n){return Ky.startNull(n),Ky.endNull(n)}visitInt(t,n){return zu.startInt(n),zu.addBitWidth(n,t.bitWidth),zu.addIsSigned(n,t.isSigned),zu.endInt(n)}visitFloat(t,n){return id.startFloatingPoint(n),id.addPrecision(n,t.precision),id.endFloatingPoint(n)}visitBinary(t,n){return Wy.startBinary(n),Wy.endBinary(n)}visitBool(t,n){return Gy.startBool(n),Gy.endBool(n)}visitUtf8(t,n){return Qy.startUtf8(n),Qy.endUtf8(n)}visitDecimal(t,n){return Ga.startDecimal(n),Ga.addScale(n,t.scale),Ga.addPrecision(n,t.precision),Ga.addBitWidth(n,t.bitWidth),Ga.endDecimal(n)}visitDate(t,n){return r$.startDate(n),r$.addUnit(n,t.unit),r$.endDate(n)}visitTime(t,n){return GS.startTime(n),GS.addUnit(n,t.unit),GS.addBitWidth(n,t.bitWidth),GS.endTime(n)}visitTimestamp(t,n){const r=t.timezone&&n.createString(t.timezone)||void 0;return YS.startTimestamp(n),YS.addUnit(n,t.unit),r!==void 0&&YS.addTimezone(n,r),YS.endTimestamp(n)}visitInterval(t,n){return sd.startInterval(n),sd.addUnit(n,t.unit),sd.endInterval(n)}visitList(t,n){return Yy.startList(n),Yy.endList(n)}visitStruct(t,n){return Xy.startStruct_(n),Xy.endStruct_(n)}visitUnion(t,n){gy.startTypeIdsVector(n,t.typeIds.length);const r=gy.createTypeIdsVector(n,t.typeIds);return gy.startUnion(n),gy.addMode(n,t.mode),gy.addTypeIds(n,r),gy.endUnion(n)}visitDictionary(t,n){const r=this.visit(t.indices,n);return Bh.startDictionaryEncoding(n),Bh.addId(n,new dPt(t.id,0)),Bh.addIsOrdered(n,t.isOrdered),r!==void 0&&Bh.addIndexType(n,r),Bh.endDictionaryEncoding(n)}visitFixedSizeBinary(t,n){return nd.startFixedSizeBinary(n),nd.addByteWidth(n,t.byteWidth),nd.endFixedSizeBinary(n)}visitFixedSizeList(t,n){return rd.startFixedSizeList(n),rd.addListSize(n,t.listSize),rd.endFixedSizeList(n)}visitMap(t,n){return i$.startMap(n),i$.addKeysSorted(n,t.keysSorted),i$.endMap(n)}}const IB=new hPt;function pPt(e,t=new Map){return new gr(gPt(e,t),o$(e.customMetadata),t)}function FRe(e){return new sl(e.count,BRe(e.columns),jRe(e.columns))}function mPt(e){return new qd(FRe(e.data),e.id,e.isDelta)}function gPt(e,t){return(e.fields||[]).filter(Boolean).map(n=>Ir.fromJSON(n,t))}function Phe(e,t){return(e.children||[]).filter(Boolean).map(n=>Ir.fromJSON(n,t))}function BRe(e){return(e||[]).reduce((t,n)=>[...t,new $v(n.count,yPt(n.VALIDITY)),...BRe(n.children)],[])}function jRe(e,t=[]){for(let n=-1,r=(e||[]).length;++n<r;){const i=e[n];i.VALIDITY&&t.push(new hd(t.length,i.VALIDITY.length)),i.TYPE&&t.push(new hd(t.length,i.TYPE.length)),i.OFFSET&&t.push(new hd(t.length,i.OFFSET.length)),i.DATA&&t.push(new hd(t.length,i.DATA.length)),t=jRe(i.children,t)}return t}function yPt(e){return(e||[]).reduce((t,n)=>t+ +(n===0),0)}function vPt(e,t){let n,r,i,s,o,a;return!t||!(s=e.dictionary)?(o=$he(e,Phe(e,t)),i=new Ir(e.name,o,e.nullable,o$(e.customMetadata))):t.has(n=s.id)?(r=(r=s.indexType)?khe(r):new qg,a=new Gg(t.get(n),r,n,s.isOrdered),i=new Ir(e.name,a,e.nullable,o$(e.customMetadata))):(r=(r=s.indexType)?khe(r):new qg,t.set(n,o=$he(e,Phe(e,t))),a=new Gg(o,r,n,s.isOrdered),i=new Ir(e.name,a,e.nullable,o$(e.customMetadata))),i||null}function o$(e){return new Map(Object.entries(e||{}))}function khe(e){return new Ia(e.isSigned,e.bitWidth)}function $he(e,t){const n=e.type.name;switch(n){case"NONE":return new Op;case"null":return new Op;case"binary":return new mA;case"utf8":return new Ew;case"bool":return new gA;case"list":return new Tw((t||[])[0]);case"struct":return new Uo(t||[]);case"struct_":return new Uo(t||[])}switch(n){case"int":{const r=e.type;return new Ia(r.isSigned,r.bitWidth)}case"floatingpoint":{const r=e.type;return new Wg(mo[r.precision])}case"decimal":{const r=e.type;return new FD(r.scale,r.precision,r.bitWidth)}case"date":{const r=e.type;return new xw(Ud[r.unit])}case"time":{const r=e.type;return new Pp(jn[r.unit],r.bitWidth)}case"timestamp":{const r=e.type;return new BD(jn[r.unit],r.timezone)}case"interval":{const r=e.type;return new Sw(Vd[r.unit])}case"union":{const r=e.type;return new yA(Zl[r.mode],r.typeIds||[],t||[])}case"fixedsizebinary":{const r=e.type;return new jD(r.byteWidth)}case"fixedsizelist":{const r=e.type;return new Aw(r.listSize,(t||[])[0])}case"map":{const r=e.type;return new vA((t||[])[0],r.keysSorted)}}throw new Error(`Unrecognized type: "${n}"`)}var L1=lp,_Pt=pRe,bPt=VD;class od{constructor(t,n,r,i){this._version=n,this._headerType=r,this.body=new Uint8Array(0),i&&(this._createHeader=()=>i),this._bodyLength=typeof t=="number"?t:t.low}static fromJSON(t,n){const r=new od(0,Hu.V4,n);return r._createHeader=wPt(t,n),r}static decode(t){t=new bPt(vr(t));const n=hm.getRootAsMessage(t),r=n.bodyLength(),i=n.version(),s=n.headerType(),o=new od(r,i,s);return o._createHeader=EPt(n,s),o}static encode(t){const n=new _Pt;let r=-1;return t.isSchema()?r=gr.encode(n,t.header()):t.isRecordBatch()?r=sl.encode(n,t.header()):t.isDictionaryBatch()&&(r=qd.encode(n,t.header())),hm.startMessage(n),hm.addVersion(n,Hu.V4),hm.addHeader(n,r),hm.addHeaderType(n,t.headerType),hm.addBodyLength(n,new L1(t.bodyLength,0)),hm.finishMessageBuffer(n,hm.endMessage(n)),n.asUint8Array()}static from(t,n=0){if(t instanceof gr)return new od(0,Hu.V4,Ns.Schema,t);if(t instanceof sl)return new od(n,Hu.V4,Ns.RecordBatch,t);if(t instanceof qd)return new od(n,Hu.V4,Ns.DictionaryBatch,t);throw new Error(`Unrecognized Message header: ${t}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===Ns.Schema}isRecordBatch(){return this.headerType===Ns.RecordBatch}isDictionaryBatch(){return this.headerType===Ns.DictionaryBatch}}class sl{constructor(t,n,r){this._nodes=n,this._buffers=r,this._length=typeof t=="number"?t:t.low}get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}}class qd{constructor(t,n,r=!1){this._data=t,this._isDelta=r,this._id=typeof n=="number"?n:n.low}get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}}class hd{constructor(t,n){this.offset=typeof t=="number"?t:t.low,this.length=typeof n=="number"?n:n.low}}class $v{constructor(t,n){this.length=typeof t=="number"?t:t.low,this.nullCount=typeof n=="number"?n:n.low}}function wPt(e,t){return()=>{switch(t){case Ns.Schema:return gr.fromJSON(e);case Ns.RecordBatch:return sl.fromJSON(e);case Ns.DictionaryBatch:return qd.fromJSON(e)}throw new Error(`Unrecognized Message type: { name: ${Ns[t]}, type: ${t} }`)}}function EPt(e,t){return()=>{switch(t){case Ns.Schema:return gr.decode(e.header(new qf));case Ns.RecordBatch:return sl.decode(e.header(new Ih),e.version());case Ns.DictionaryBatch:return qd.decode(e.header(new R_),e.version())}throw new Error(`Unrecognized Message type: { name: ${Ns[t]}, type: ${t} }`)}}Ir.encode=RPt;Ir.decode=kPt;Ir.fromJSON=vPt;gr.encode=$Pt;gr.decode=xPt;gr.fromJSON=pPt;sl.encode=NPt;sl.decode=SPt;sl.fromJSON=FRe;qd.encode=DPt;qd.decode=TPt;qd.fromJSON=mPt;$v.encode=LPt;$v.decode=CPt;hd.encode=MPt;hd.decode=APt;function xPt(e,t=new Map){const n=PPt(e,t);return new gr(n,a$(e),t)}function SPt(e,t=Hu.V4){if(e.compression()!==null)throw new Error("Record batch compression not implemented");return new sl(e.length(),IPt(e),OPt(e,t))}function TPt(e,t=Hu.V4){return new qd(sl.decode(e.data(),t),e.id(),e.isDelta())}function APt(e){return new hd(e.offset(),e.length())}function CPt(e){return new $v(e.length(),e.nullCount())}function IPt(e){const t=[];for(let n,r=-1,i=-1,s=e.nodesLength();++r<s;)(n=e.nodes(r))&&(t[++i]=$v.decode(n));return t}function OPt(e,t){const n=[];for(let r,i=-1,s=-1,o=e.buffersLength();++i<o;)(r=e.buffers(i))&&(t<Hu.V4&&(r.bb_pos+=8*(i+1)),n[++s]=hd.decode(r));return n}function PPt(e,t){const n=[];for(let r,i=-1,s=-1,o=e.fieldsLength();++i<o;)(r=e.fields(i))&&(n[++s]=Ir.decode(r,t));return n}function Rhe(e,t){const n=[];for(let r,i=-1,s=-1,o=e.childrenLength();++i<o;)(r=e.children(i))&&(n[++s]=Ir.decode(r,t));return n}function kPt(e,t){let n,r,i,s,o,a;return!t||!(a=e.dictionary())?(i=Dhe(e,Rhe(e,t)),r=new Ir(e.name(),i,e.nullable(),a$(e))):t.has(n=a.id().low)?(s=(s=a.indexType())?Nhe(s):new qg,o=new Gg(t.get(n),s,n,a.isOrdered()),r=new Ir(e.name(),o,e.nullable(),a$(e))):(s=(s=a.indexType())?Nhe(s):new qg,t.set(n,i=Dhe(e,Rhe(e,t))),o=new Gg(i,s,n,a.isOrdered()),r=new Ir(e.name(),o,e.nullable(),a$(e))),r||null}function a$(e){const t=new Map;if(e)for(let n,r,i=-1,s=Math.trunc(e.customMetadataLength());++i<s;)(n=e.customMetadata(i))&&(r=n.key())!=null&&t.set(r,n.value());return t}function Nhe(e){return new Ia(e.isSigned(),e.bitWidth())}function Dhe(e,t){const n=e.typeType();switch(n){case gi.NONE:return new Op;case gi.Null:return new Op;case gi.Binary:return new mA;case gi.Utf8:return new Ew;case gi.Bool:return new gA;case gi.List:return new Tw((t||[])[0]);case gi.Struct_:return new Uo(t||[])}switch(n){case gi.Int:{const r=e.type(new zu);return new Ia(r.isSigned(),r.bitWidth())}case gi.FloatingPoint:{const r=e.type(new id);return new Wg(r.precision())}case gi.Decimal:{const r=e.type(new Ga);return new FD(r.scale(),r.precision(),r.bitWidth())}case gi.Date:{const r=e.type(new r$);return new xw(r.unit())}case gi.Time:{const r=e.type(new GS);return new Pp(r.unit(),r.bitWidth())}case gi.Timestamp:{const r=e.type(new YS);return new BD(r.unit(),r.timezone())}case gi.Interval:{const r=e.type(new sd);return new Sw(r.unit())}case gi.Union:{const r=e.type(new gy);return new yA(r.mode(),r.typeIdsArray()||[],t||[])}case gi.FixedSizeBinary:{const r=e.type(new nd);return new jD(r.byteWidth())}case gi.FixedSizeList:{const r=e.type(new rd);return new Aw(r.listSize(),(t||[])[0])}case gi.Map:{const r=e.type(new i$);return new vA((t||[])[0],r.keysSorted())}}throw new Error(`Unrecognized type: "${gi[n]}" (${n})`)}function $Pt(e,t){const n=t.fields.map(s=>Ir.encode(e,s));qf.startFieldsVector(e,n.length);const r=qf.createFieldsVector(e,n),i=t.metadata&&t.metadata.size>0?qf.createCustomMetadataVector(e,[...t.metadata].map(([s,o])=>{const a=e.createString(`${s}`),u=e.createString(`${o}`);return ds.startKeyValue(e),ds.addKey(e,a),ds.addValue(e,u),ds.endKeyValue(e)})):-1;return qf.startSchema(e),qf.addFields(e,r),qf.addEndianness(e,FPt?Iw.Little:Iw.Big),i!==-1&&qf.addCustomMetadata(e,i),qf.endSchema(e)}function RPt(e,t){let n=-1,r=-1,i=-1;const s=t.type;let o=t.typeId;Pn.isDictionary(s)?(o=s.dictionary.typeId,i=IB.visit(s,e),r=IB.visit(s.dictionary,e)):r=IB.visit(s,e);const a=(s.children||[]).map(c=>Ir.encode(e,c)),u=Cl.createChildrenVector(e,a),l=t.metadata&&t.metadata.size>0?Cl.createCustomMetadataVector(e,[...t.metadata].map(([c,f])=>{const d=e.createString(`${c}`),h=e.createString(`${f}`);return ds.startKeyValue(e),ds.addKey(e,d),ds.addValue(e,h),ds.endKeyValue(e)})):-1;return t.name&&(n=e.createString(t.name)),Cl.startField(e),Cl.addType(e,r),Cl.addTypeType(e,o),Cl.addChildren(e,u),Cl.addNullable(e,!!t.nullable),n!==-1&&Cl.addName(e,n),i!==-1&&Cl.addDictionary(e,i),l!==-1&&Cl.addCustomMetadata(e,l),Cl.endField(e)}function NPt(e,t){const n=t.nodes||[],r=t.buffers||[];Ih.startNodesVector(e,n.length);for(const o of n.slice().reverse())$v.encode(e,o);const i=e.endVector();Ih.startBuffersVector(e,r.length);for(const o of r.slice().reverse())hd.encode(e,o);const s=e.endVector();return Ih.startRecordBatch(e),Ih.addLength(e,new L1(t.length,0)),Ih.addNodes(e,i),Ih.addBuffers(e,s),Ih.endRecordBatch(e)}function DPt(e,t){const n=sl.encode(e,t.data);return R_.startDictionaryBatch(e),R_.addId(e,new L1(t.id,0)),R_.addIsDelta(e,t.isDelta),R_.addData(e,n),R_.endDictionaryBatch(e)}function LPt(e,t){return MRe.createFieldNode(e,new L1(t.length,0),new L1(t.nullCount,0))}function MPt(e,t){return LRe.createBuffer(e,new L1(t.offset,0),new L1(t.length,0))}const FPt=(()=>{const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),new Int16Array(e)[0]===256})(),eV="ARROW1",rX=new Uint8Array(eV.length);for(let e=0;e<eV.length;e+=1)rX[e]=eV.codePointAt(e);rX.length;class ss extends Vn{constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}static assemble(...t){const n=i=>i.flatMap(s=>Array.isArray(s)?n(s):s instanceof Uu?s.data.children:s.data),r=new ss;return r.visitMany(n(t)),r}visit(t){if(t instanceof rr)return this.visitMany(t.data),this;const{type:n}=t;if(!Pn.isDictionary(n)){const{length:r,nullCount:i}=t;if(r>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");Pn.isNull(n)||tf.call(this,i<=0?new Uint8Array(0):YK(t.offset,r,t.nullBitmap)),this.nodes.push(new $v(r,i))}return super.visit(t)}visitNull(t){return this}visitDictionary(t){return this.visit(t.clone(t.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function tf(e){const t=e.byteLength+7&-8;return this.buffers.push(e),this.bufferRegions.push(new hd(this._byteLength,t)),this._byteLength+=t,this}function BPt(e){const{type:t,length:n,typeIds:r,valueOffsets:i}=e;if(tf.call(this,r),t.mode===Zl.Sparse)return tV.call(this,e);if(t.mode===Zl.Dense){if(e.offset<=0)return tf.call(this,i),tV.call(this,e);{const s=r.reduce((c,f)=>Math.max(c,f),r[0]),o=new Int32Array(s+1),a=new Int32Array(s+1).fill(-1),u=new Int32Array(n),l=wK(-i[0],n,i);for(let c,f,d=-1;++d<n;)(f=a[c=r[d]])===-1&&(f=a[c]=l[c]),u[d]=l[d]-f,++o[c];tf.call(this,u);for(let c,f=-1,d=t.children.length;++f<d;)if(c=e.children[f]){const h=t.typeIds[f],p=Math.min(n,o[h]);this.visit(c.slice(a[h],p))}}}return this}function jPt(e){let t;return e.nullCount>=e.length?tf.call(this,new Uint8Array(0)):(t=e.values)instanceof Uint8Array?tf.call(this,YK(e.offset,e.length,t)):tf.call(this,Z$e(e.values))}function N0(e){return tf.call(this,e.values.subarray(0,e.length*e.stride))}function zRe(e){const{length:t,values:n,valueOffsets:r}=e,i=r[0],s=r[t],o=Math.min(s-i,n.byteLength-i);return tf.call(this,wK(-r[0],t,r)),tf.call(this,n.subarray(i,i+o)),this}function iX(e){const{length:t,valueOffsets:n}=e;return n&&tf.call(this,wK(n[0],t,n)),this.visit(e.children[0])}function tV(e){return this.visitMany(e.type.children.map((t,n)=>e.children[n]).filter(Boolean))[0]}ss.prototype.visitBool=jPt;ss.prototype.visitInt=N0;ss.prototype.visitFloat=N0;ss.prototype.visitUtf8=zRe;ss.prototype.visitBinary=zRe;ss.prototype.visitFixedSizeBinary=N0;ss.prototype.visitDate=N0;ss.prototype.visitTimestamp=N0;ss.prototype.visitTime=N0;ss.prototype.visitDecimal=N0;ss.prototype.visitList=iX;ss.prototype.visitStruct=tV;ss.prototype.visitUnion=BPt;ss.prototype.visitInterval=N0;ss.prototype.visitFixedSizeList=iX;ss.prototype.visitMap=iX;class URe extends gRe{constructor(t){super(),this._position=0,this._started=!1,this._sink=new AB,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,P0(t)||(t={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof t.autoDestroy=="boolean"?t.autoDestroy:!0,this._writeLegacyIpcFormat=typeof t.writeLegacyIpcFormat=="boolean"?t.writeLegacyIpcFormat:!1}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,n){throw new Error('"throughDOM" not available in this environment')}toString(t=!1){return this._sink.toString(t)}toUint8Array(t=!1){return this._sink.toUint8Array(t)}writeAll(t){return d4(t)?t.then(n=>this.writeAll(n)):h4(t)?uX(this,t):aX(this,t)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(t){return this._sink.toDOMStream(t)}toNodeStream(t){return this._sink.toNodeStream(t)}close(){return this.reset()._sink.close()}abort(t){return this.reset()._sink.abort(t)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(t=this._sink,n=null){return t===this._sink||t instanceof AB?this._sink=t:(this._sink=new AB,t&&YCt(t)?this.toDOMStream({type:"bytes"}).pipeTo(t):t&&KCt(t)&&this.toNodeStream({objectMode:!1}).pipe(t)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,(!n||!QU(n,this._schema))&&(n==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=n,this._writeSchema(n))),this}write(t){let n=null;if(this._sink){if(t==null)return this.finish()&&void 0;if(t instanceof Xa&&!(n=t.schema))return this.finish()&&void 0;if(t instanceof Uu&&!(n=t.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(n&&!QU(n,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,n)}t instanceof Uu?t instanceof fPt||this._writeRecordBatch(t):t instanceof Xa?this.writeAll(t.batches):_K(t)&&this.writeAll(t)}_writeMessage(t,n=8){const r=n-1,i=od.encode(t),s=i.byteLength,o=this._writeLegacyIpcFormat?4:8,a=s+o+r&~r,u=a-s-o;return t.headerType===Ns.RecordBatch?this._recordBatchBlocks.push(new Yg(a,t.bodyLength,this._position)):t.headerType===Ns.DictionaryBatch&&this._dictionaryBlocks.push(new Yg(a,t.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(a-o)),s>0&&this._write(i),this._writePadding(u)}_write(t){if(this._started){const n=vr(t);n&&n.byteLength>0&&(this._sink.write(n),this._position+=n.byteLength)}return this}_writeSchema(t){return this._writeMessage(od.from(t))}_writeFooter(t){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(rX)}_writePadding(t){return t>0?this._write(new Uint8Array(t)):this}_writeRecordBatch(t){const{byteLength:n,nodes:r,bufferRegions:i,buffers:s}=ss.assemble(t),o=new sl(t.numRows,r,i),a=od.from(o,n);return this._writeDictionaries(t)._writeMessage(a)._writeBodyBuffers(s)}_writeDictionaryBatch(t,n,r=!1){this._dictionaryDeltaOffsets.set(n,t.length+(this._dictionaryDeltaOffsets.get(n)||0));const{byteLength:i,nodes:s,bufferRegions:o,buffers:a}=ss.assemble(new rr([t])),u=new sl(t.length,s,o),l=new qd(u,n,r),c=od.from(l,i);return this._writeMessage(c)._writeBodyBuffers(a)}_writeBodyBuffers(t){let n,r,i;for(let s=-1,o=t.length;++s<o;)(n=t[s])&&(r=n.byteLength)>0&&(this._write(n),(i=(r+7&-8)-r)>0&&this._writePadding(i));return this}_writeDictionaries(t){for(let[n,r]of t.dictionaries){let i=this._dictionaryDeltaOffsets.get(n)||0;if(i===0||(r=r==null?void 0:r.slice(i)).length>0)for(const s of r.data)this._writeDictionaryBatch(s,n,i>0),i+=s.length}return this}}class sX extends URe{static writeAll(t,n){const r=new sX(n);return d4(t)?t.then(i=>r.writeAll(i)):h4(t)?uX(r,t):aX(r,t)}}class oX extends URe{static writeAll(t){const n=new oX;return d4(t)?t.then(r=>n.writeAll(r)):h4(t)?uX(n,t):aX(n,t)}constructor(){super(),this._autoDestroy=!0}_writeSchema(t){return this._writeMagic()._writePadding(2)}_writeFooter(t){const n=XU.encode(new XU(t,Hu.V4,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(t)._write(n)._write(Int32Array.of(n.byteLength))._writeMagic()}}function aX(e,t){let n=t;t instanceof Xa&&(n=t.batches,e.reset(void 0,t.schema));for(const r of n)e.write(r);return e.finish()}function uX(e,t){var n,r,i,s;return Mh(this,void 0,void 0,function*(){try{for(n=KT(t);r=yield n.next(),!r.done;){const o=r.value;e.write(o)}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}return e.finish()})}function zPt(e,t="stream"){return(t==="stream"?sX:oX).writeAll(e).toUint8Array(!0)}function lX(e,t=1){return(e*t+63&-64||64)/t}function Xg(e,t,n=e.BYTES_PER_ELEMENT){return new e(lX(t,n))}function cX(e){return e instanceof Cr?e:new Cr(e.type,0,e.length,e.nulls,e.buffers,null,e.dict)}function UPt(e){return new rr([cX(e)])}const fX=new TextEncoder;function VPt(e,t,n){const r=fX.encode(n);return e.set(r,t),r.length}function HPt(e,t,n){return fX.encodeInto(n,e.subarray(t)).written}const qPt=fX.encodeInto?HPt:VPt;function Lhe(e,t){const n=Xg(e.ArrayType,t);return{set(r,i){n[i]=r},data:()=>({type:e,length:t,buffers:[null,n]})}}function WPt(e,t){const n=Xg(e.ArrayType,t/8);return{set(r,i){r&&(n[i>>3]|=1<<i%8)},data:()=>({type:e,length:t,buffers:[null,n]})}}function GPt(e,t){const n=Xg(e.ArrayType,t);return{set(r,i){n[i]=r/864e5|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function YPt(e,t){const n=Xg(e.ArrayType,t<<1);return{set(r,i){const s=i<<1;n[s]=r%4294967296|0,n[s+1]=r/4294967296|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function KPt(e){const t=KD({type:e,nullValues:[null,void 0]});return{set(n,r){t.set(r,n)},data:()=>t.finish().flush()}}function XPt(e,t,n){const r=Xg(Int32Array,t+1),i=Xg(Uint8Array,3*n);let s=0;return{set(o,a){s+=qPt(i,s,o),r[a+1]=s},data:()=>{const o=lX(s),a=i.length>o?i.subarray(0,o):i;return{type:e,length:t,buffers:[r,a]}}}}function QPt(e,t){const n=[],r=Xg(e.indices.ArrayType,t),i=Object.create(null);let s=-1,o=0;return{set(a,u){const l=String(a);let c=i[l];c===void 0&&(o+=l.length,i[l]=c=++s,n.push(l)),r[u]=c},data:()=>({type:e,length:t,buffers:[null,r],dict:JPt(e.dictionary,n,o)})}}function JPt(e,t,n){const r=XPt(e,t.length,n);return t.forEach(r.set),UPt(r.data())}function ZPt(e,t){const n=Xg(Uint8Array,t/8);let r=0;return{set(i,s){i==null?++r:(e.set(i,s),n[s>>3]|=1<<s%8)},data:()=>{const i=e.data();return r&&(i.nulls=r,i.buffers[2]=n),i}}}function ekt(e,t,n=!0){let r;switch(e.typeId){case re.Int:r=e.bitWidth<64?Lhe:null;break;case re.Float:r=e.precision>0?Lhe:null;break;case re.Dictionary:r=e.dictionary.typeId===re.Utf8&&e.indices.typeId===re.Int&&e.indices.bitWidth<64?QPt:null;break;case re.Bool:r=WPt;break;case re.Date:r=e.unit?YPt:GPt;break}return r==null?KPt(e):n?ZPt(r(e,t),t):r(e,t)}function tkt(e,t){const n=e.length,r=lX(n,e.BYTES_PER_ELEMENT);let i=e;return n!==r&&(i=new e.constructor(r),i.set(e)),cX({type:t,length:n,buffers:[null,i]})}function VRe(e,t,n,r,i=!0){const s=ekt(r,e,i);return t(n,s.set),cX(s.data())}function dX(e){if(e instanceof Pn||e==null)return e;switch(e){case re.Binary:return new mA;case re.Bool:return new gA;case re.DateDay:return new lIt;case re.DateMillisecond:case re.Date:return new cIt;case re.Dictionary:return new Gg(new Ew,new qg);case re.Float16:return new b$e;case re.Float32:return new PK;case re.Float64:case re.Float:return new kK;case re.Int8:return new xK;case re.Int16:return new SK;case re.Int32:case re.Int:return new qg;case re.Int64:return new TK;case re.IntervalDayTime:return new mIt;case re.Interval:case re.IntervalYearMonth:return new gIt;case re.Null:return new Op;case re.TimeMicrosecond:return new hIt;case re.TimeMillisecond:case re.Time:return new dIt;case re.TimeNanosecond:return new pIt;case re.TimeSecond:return new fIt;case re.Uint8:return new AK;case re.Uint16:return new CK;case re.Uint32:return new IK;case re.Uint64:return new OK;case re.Utf8:return new Ew;default:vn(`Unsupported type code: ${jd(e)}. Use a data type constructor instead?`)}}function nkt(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function HRe(e,t){const n=nV();return e(t,n.add),n}function nV(){const e={count:0,nulls:0,bools:0,nums:0,ints:0,bigints:0,min:1/0,max:-1/0,digits:0,dates:0,utcdays:0,strings:0,strlen:0,arrays:0,minlen:1/0,maxlen:0,structs:0,add(t){if(++e.count,t==null){++e.nulls;return}const n=typeof t;if(n==="string")++e.strings;else if(n==="number")++e.nums,t<e.min&&(e.min=t),t>e.max&&(e.max=t),Number.isInteger(t)&&++e.ints;else if(n==="boolean")++e.bools;else if(n==="object")if(Ip(t))++e.dates,nkt(t)&&++e.utcdays;else if(Hy(t)){++e.arrays,t.length<e.minlen&&(e.minlen=t.length),t.length>e.maxlen&&(e.maxlen=t.length);const r=e.array_prof||(e.array_prof=nV());t.forEach(r.add)}else{++e.structs;const r=e.struct_prof||(e.struct_prof={});for(const i in t)(r[i]||(r[i]=nV())).add(t[i])}else n==="bigint"&&(++e.bigints,t<e.min&&(e.min=t),t>e.max&&(e.max=t))},type(){return dX(rkt(e))}};return e}function rkt(e){const t=e.count-e.nulls;if(t===0)return re.Null;if(e.ints===t){const n=Math.max(Math.abs(e.min)-1,e.max);return e.min<0?n>=2**31?re.Float64:n<128?re.Int8:n<32768?re.Int16:re.Int32:n>=2**32?re.Float64:n<256?re.Uint8:n<65536?re.Uint16:re.Uint32}else{if(e.nums===t)return re.Float64;if(e.bigints===t){const n=-e.min>e.max?-e.min-1n:e.max;return e.min<0?n<2**63?re.Int64:vn(`BigInt exceeds 64 bits: ${n}`):e.max<2**64?re.Uint64:vn(`BigInt exceeds 64 bits: ${e.max}`)}else{if(e.bools===t)return re.Bool;if(e.utcdays===t)return re.DateDay;if(e.dates===t)return re.DateMillisecond;if(e.arrays===t){const n=Ir.new("value",e.array_prof.type(),!0);return e.minlen===e.maxlen?new Aw(e.minlen,n):new Tw(n)}else if(e.structs===t){const n=e.struct_prof;return new Uo(Object.keys(n).map(r=>Ir.new(r,n[r].type(),!0)))}else{if(e.strings>0)return re.Dictionary;vn("Type inference failure")}}}}function ikt(e,t,n,r,i,s=!0){if(i=dX(i),!i){const o=HRe(r,t);s=o.nulls>0,i=o.type()}return VRe(n,r,t,i,s)}function skt(e,t,n,r,i,s=!0){i=dX(i);const o=e.column(t),a=!(e.isFiltered()||e.isOrdered()),u=okt(o);if(u&&a&&Mhe(u.type,i))return u;const l=o.data;if(nI(l)){const c=akt(l);if(a&&c&&Mhe(c,i))return tkt(l,c);i=i||c,s=!1}if(!i){const c=HRe(r,o);s=c.nulls>0,i=c.type()}return VRe(n,r,o,i,s)}function okt(e){return e instanceof rr?e:e.vector instanceof rr?e.vector:null}function akt(e){const n={Float32Array:PK,Float64Array:kK,Int8Array:xK,Int16Array:SK,Int32Array:qg,Uint8Array:AK,Uint16Array:CK,Uint32Array:IK,BigInt64Array:TK,BigUint64Array:OK}[e.constructor.name];return n?new n:null}function Mhe(e,t){return!e||!t?!0:e.compareTo(t)}function ukt(e,t,n){const r=Math.min(e.length,n+t);return(i,s)=>{for(let o=n;o<r;++o)s(e[o][i],o)}}function lkt(e,t,n){const r=n===0&&e.numRows()<=t&&!e.isFiltered()&&!e.isOrdered();return(i,s)=>{let o=-1;r&&Hy(i.data)?i.data.forEach(s):e.scan(a=>s(i.get(a),++o),!0,t,n)}}const ckt=()=>vn("Apache Arrow not imported, see https://github.com/uwdata/arquero#usage");function fkt(){try{return Xa}catch{ckt()}}function qRe(e,t={}){const{types:n={}}=t,{dataFrom:r,names:i,nrows:s,scan:o}=dkt(e,t),a={};i.forEach(l=>{const c=r(e,l,s,o,n[l]);c.length!==s&&vn("Column length mismatch"),a[l]=c});const u=fkt();return new u(a)}function dkt(e,t){const{columns:n,limit:r=1/0,offset:i=0}=t,s=ei(n)?n(e):nr(n)?n:null;if(nr(e))return{dataFrom:ikt,names:s||Object.keys(e[0]),nrows:Math.min(r,e.length-i),scan:ukt(e,r,i)};if(hkt(e))return{dataFrom:skt,names:s||e.columnNames(),nrows:Math.min(r,e.numRows()-i),scan:lkt(e,r,i)};vn("Unsupported input data type")}function hkt(e){return e&&ei(e.reify)}function pkt(e,t={}){const{format:n,...r}=t,i=n||"stream";if(!["stream","file"].includes(i))throw Error("Unrecognised output format");return zPt(qRe(e,r),n)}function mkt(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function gkt(e,t={}){let n=0,r=0,i=0,s=0,o=0,a=0;return e(u=>{if(++n,u==null){++r;return}const l=typeof u;if(l==="object"&&Ip(u))++i,mkt(u)&&++s;else if(l==="number"&&(++o,u===u&&(u|0)!==u)){const c=u+"",f=c.indexOf(".");if(f>=0){const d=c.indexOf("e"),h=d>0?d:c.length;a=Math.max(a,h-f-1)}}}),{align:(r+o+i)/n>.5?"r":"l",format:{utc:i===s,digits:Math.min(a,t.maxdigits||6)}}}function E4(e,t){return ei(t)?t(e):t||e.columnNames()}function WRe(e,t,n){const r=n.format||{},i=n.align||{},s={},o={};return t.forEach(a=>{const u=gkt(ykt(e,a),n);o[a]=i[a]||u.align,s[a]=r[a]||u.format}),{align:o,format:s}}function ykt(e,t){const n=e.column(t);return r=>e.scan(i=>r(n.get(i)))}function hX(e,t,n=100,r,i){const s=e.data(),o=t.length;e.scan(a=>{i.row(a);for(let u=0;u<o;++u){const l=t[u];i.cell(s[t[u]].get(a),l,u)}},!0,n,r)}function vkt(e,t={}){const n=E4(e,t.columns),r=t.format||{},i=t.delimiter||",",s=new RegExp(`["${i}
\r]`),o=l=>l==null?"":Ip(l)?c4(l,!0):s.test(l+="")?'"'+l.replace(/"/g,'""')+'"':l,a=n.map(o);let u="";return hX(e,n,t.limit||1/0,t.offset,{row(){u+=a.join(i)+`
`},cell(l,c,f){a[f]=o(r[c]?r[c](l):l)}}),u+a.join(i)}function GRe(e,t={}){if(ei(t))return t(e)+"";const n=typeof e;if(n==="object"){if(Ip(e))return t.utc?c4(e):Tke(e);{const r=JSON.stringify(e,(s,o)=>nI(o)?Array.from(o):o),i=t.maxlen||30;return r.length>i?r.slice(0,28)+""+(r[0]==="["?"]":"}"):r}}else if(n==="number"){const r=t.digits||0;let i;return e!==0&&((i=Math.abs(e))>=1e18||i<Math.pow(10,-r))?e.toExponential(r):e.toFixed(r)}else return e+""}function x4(e,t,n={}){for(const r in e)n[r]=t(e[r],r);return n}function _kt(e,t={}){const n=E4(e,t.columns),{align:r,format:i}=WRe(e,n,t),s=bkt(t),o=t.null,a=m=>m==="c"?"center":m==="r"?"right":"left",u=m=>m.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),l=(m,g)=>u(GRe(m,g)),c=o?(m,g)=>m==null?o(m):l(m,g):l;let f=-1,d=-1;const h=(m,g,y)=>{const v=y?a(r[g]):"",_=s[m]&&s[m](g,d,f)||"",b=(v?`text-align: ${v};`+(_?" ":""):"")+_;return`<${m}${b?` style="${b}"`:""}>`};let p=h("table")+h("thead")+h("tr",f)+n.map(m=>`${h("th",m,1)}${m}</th>`).join("")+"</tr></thead>"+h("tbody");return hX(e,n,t.limit,t.offset,{row(m){f=m,p+=(++d?"</tr>":"")+h("tr")},cell(m,g){p+=h("td",g,1)+c(m,i[g])+"</td>"}}),p+"</tr></tbody></table>"}function bkt(e){return x4(e.style,t=>ei(t)?t:()=>t)}function wkt(e,t=!0,n=!1){return e===void 0||e?t:n}const Ekt=e=>Ip(e)?c4(e,!0):e;function xkt(e,t={}){const n=wkt(t.schema),r=t.format||{},i=E4(e,t.columns);let s="{";return n&&(s+='"schema":{"fields":'+JSON.stringify(i.map(o=>({name:o})))+'},"data":{'),i.forEach((o,a)=>{s+=(a?",":"")+JSON.stringify(o)+":[";const u=e.column(o),l=r[o]||Ekt;let c=-1;e.scan(f=>{const d=u.get(f);s+=(++c?",":"")+JSON.stringify(l(d))},!0,t.limit,t.offset),s+="]"}),s+"}"+(n?"}":"")}function Skt(e,t={}){const n=E4(e,t.columns),{align:r,format:i}=WRe(e,n,t),s=u=>u==="c"?":-:":u==="r"?"-:":":-",o=u=>u.replace(/\|/g,"\\|");let a="|"+n.map(o).join("|")+`|
|`+n.map(u=>s(r[u])).join("|")+"|";return hX(e,n,t.limit,t.offset,{row(){a+=`
|`},cell(u,l){a+=o(GRe(u,i[l]))+"|"}}),a+`
`}function YRe(e,t){for(const[n,r]of f4(t))e.set(n,r);return e}function Tkt(e){return e.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&")}function kp(e,t,n=new Map){return t=Ca(t)?e.columnName(t):t,xo(t)?n.set(t,t):nr(t)?t.forEach(r=>kp(e,r,n)):ei(t)?kp(e,t(e),n):ea(t)?YRe(n,t):vn(`Invalid column selection: ${jd(t)}`),n}function S4(e,t){return e.toObject=t,e}function KRe(e){return nr(e)?e.map(KRe):e&&e.toObject?e.toObject():e}function Pw(){return S4(e=>e.columnNames(),()=>({all:[]}))}function XRe(...e){return e=e.flat(),S4(t=>{const n=kp(t,e);return t.columnNames(r=>!n.has(r))},()=>({not:KRe(e)}))}function Akt(e,t){return S4(n=>{let r=Ca(e)?e:n.columnIndex(e),i=Ca(t)?t:n.columnIndex(t);if(i<r){const s=i;i=r,r=s}return n.columnNames().slice(r,i+1)},()=>({range:[e,t]}))}function Ckt(e){return xo(e)&&(e=RegExp(Tkt(e))),S4(t=>t.columnNames(n=>e.test(n)),()=>({matches:[e.source,e.flags]}))}function Ikt(e){return nI(e.data)?e.data.constructor:Array}class jh extends GAt{static from(t,n){return new jh(XAt(t,n),n)}static new(t,n){if(t instanceof jh)return t;const r={},i=[];for(const[s,o]of f4(t))r[s]=o,i.push(s);return new jh(r,n||i)}constructor(t,n,r,i,s,o){x4(t,KAt,t),n=n||Object.keys(t);const a=n.length?t[n[0]].length:0;super(n,a,t,r,i,s,o)}create({data:t,names:n,filter:r,groups:i,order:s}){const o=r!==void 0?r:this.mask();return new jh(t||this._data,n||(t?null:this._names),o,i!==void 0?i:TCt(this._group,r&&o),s!==void 0?s:this._order,this._params)}assign(...t){const n=this.numRows(),r=this.reify(),i=_l(r).groupby(r.groups());return t.forEach(s=>{s=jh.new(s),s.numRows()!==n&&vn("Assign row counts do not match"),s=s.reify(),s.columnNames(o=>i.add(o,s.column(o)))}),this.create(i.new())}columns(){return this._data}column(t){return this._data[t]}columnAt(t){return this._data[this._names[t]]}array(t,n=Array){const r=this.column(t),i=new n(this.numRows());let s=-1;return this.scan(o=>i[++s]=r.get(o),!0),i}get(t,n=0){const r=this.column(t);return this.isFiltered()||this.isOrdered()?r.get(this.indices()[n]):r.get(n)}getter(t){const n=this.column(t),r=this.isFiltered()||this.isOrdered()?this.indices():null;return r?i=>n.get(r[i]):n?i=>n.get(i):vn(`Unrecognized column: ${t}`)}object(t=0){return Fhe(this)(t)}objects(t={}){const{grouped:n,limit:r,offset:i}=t,s=kp(this,t.columns||Pw()),o=Xke(s),a=[];if(this.scan((u,l)=>a.push(o(u,l)),!0,r,i),n&&this.isGrouped()){const u=[];return this.scan(l=>u.push(l),!0,r,i),CCt(this,u,a,n)}return a}*[Symbol.iterator](){const t=Fhe(this),n=this.numRows();for(let r=0;r<n;++r)yield t(r)}reify(t){const n=t?t.length:this.numRows(),r=this._names;let i,s;if(!t&&!this.isOrdered())if(this.isFiltered())n===this.totalRows()&&(i=this.data());else return this;if(!i){const o=t?u=>t.forEach(u):u=>this.scan(u,!0),a=r.length;i={};for(let u=0;u<a;++u){const l=r[u],c=this.column(l),f=i[l]=new(Ikt(c))(n);let d=-1;o(h=>f[++d]=c.get(h))}this.isGrouped()&&(s=ACt(this.groups(),o,!!t,n))}return this.create({data:i,names:r,groups:s,filter:null,order:null})}transform(...t){return t.flat().reduce((n,r)=>r(n),this)}toArrow(t){return qRe(this,t)}toArrowBuffer(t){return pkt(this,t)}toCSV(t){return vkt(this,t)}toHTML(t){return _kt(this,t)}toJSON(t){return xkt(this,t)}toMarkdown(t){return Skt(this,t)}}function Fhe(e){let t=e._builder;if(!t){const n=Xke(e.columnNames()),r=e.data();if(e.isOrdered()||e.isFiltered()){const i=e.indices();t=s=>n(i[s],r)}else t=i=>n(i,r);e._builder=t}return t}class Okt{constructor(t){this._outputs=t}size(){return this._outputs.length}outputs(){return this._outputs}init(){return{}}add(){}rem(){}write(){}}function Wn(e,t,n,r){const i=n[e.type]||n.Default;if(i&&i(e,t,r)===!1)return;const s=Pkt[e.type];s&&s(e,t,n)}const EP=(e,t,n)=>{Wn(e.argument,t,n,e)},OB=(e,t,n)=>{Wn(e.left,t,n,e),Wn(e.right,t,n,e)},Bhe=(e,t,n)=>{Wn(e.test,t,n,e),Wn(e.consequent,t,n,e),e.alternate&&Wn(e.alternate,t,n,e)},PB=(e,t,n)=>{Wf(e.params,t,n,e),Wn(e.body,t,n,e)},jhe=(e,t,n)=>{Wn(e.callee,t,n,e),Wf(e.arguments,t,n,e)},Wf=(e,t,n,r)=>{e.forEach(i=>Wn(i,t,n,r))},Pkt={TemplateLiteral:(e,t,n)=>{Wf(e.expressions,t,n,e),Wf(e.quasis,t,n,e)},MemberExpression:(e,t,n)=>{Wn(e.object,t,n,e),Wn(e.property,t,n,e)},CallExpression:jhe,NewExpression:jhe,ArrayExpression:(e,t,n)=>{Wf(e.elements,t,n,e)},AssignmentExpression:OB,AwaitExpression:EP,BinaryExpression:OB,LogicalExpression:OB,UnaryExpression:EP,UpdateExpression:EP,ConditionalExpression:Bhe,ObjectExpression:(e,t,n)=>{Wf(e.properties,t,n,e)},Property:(e,t,n)=>{Wn(e.key,t,n,e),Wn(e.value,t,n,e)},ArrowFunctionExpression:PB,FunctionExpression:PB,FunctionDeclaration:PB,VariableDeclaration:(e,t,n)=>{Wf(e.declarations,t,n,e)},VariableDeclarator:(e,t,n)=>{Wn(e.id,t,n,e),Wn(e.init,t,n,e)},SpreadElement:(e,t,n)=>{Wn(e.argument,t,n,e)},BlockStatement:(e,t,n)=>{Wf(e.body,t,n,e)},ExpressionStatement:(e,t,n)=>{Wn(e.expression,t,n,e)},IfStatement:Bhe,ForStatement:(e,t,n)=>{Wn(e.init,t,n,e),Wn(e.test,t,n,e),Wn(e.update,t,n,e),Wn(e.body,t,n,e)},WhileStatement:(e,t,n)=>{Wn(e.test,t,n,e),Wn(e.body,t,n,e)},DoWhileStatement:(e,t,n)=>{Wn(e.body,t,n,e),Wn(e.test,t,n,e)},SwitchStatement:(e,t,n)=>{Wn(e.discriminant,t,n,e),Wf(e.cases,t,n,e)},SwitchCase:(e,t,n)=>{e.test&&Wn(e.test,t,n,e),Wf(e.consequent,t,n,e)},ReturnStatement:EP,Program:(e,t,n)=>{Wn(e.body[0],t,n,e)}};function QRe(e){delete e.start,delete e.end,delete e.optional}function zhe(e){QRe(e),delete e.object,delete e.property,delete e.computed,e.table||delete e.table}function kkt(e){return Wn(e,null,{Column:zhe,Constant:zhe,Default:QRe}),e}function ps(e,t){return t&&t.type===e}function $kt(e){return ps(PCt,e)||ps(OCt,e)}function Rkt(e){return ei(e)?e:()=>e}const Nkt="Escaped functions are not valid as rollup or pivot values.";function Dkt(e,t,n){e.aggronly&&vn(Nkt);const r="(row,data)=>fn("+Kke(e.table.columnNames())+",$)";return{escape:gK.escape(r,Rkt(t.expr),n)}}var Lkt=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,81,2,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,9,5351,0,7,14,13835,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,983,6,110,6,6,9,4759,9,787719,239],JRe=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,4026,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,757,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],Mkt="-----------------------------------------------------------------------------------------------------------------------------------------------------",ZRe="------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",kB={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},$B="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",Fkt={5:$B,"5module":$B+" export import",6:$B+" const class extends export import super"},Bkt=/^in(stanceof)?$/,jkt=new RegExp("["+ZRe+"]"),zkt=new RegExp("["+ZRe+Mkt+"]");function rV(e,t){for(var n=65536,r=0;r<t.length;r+=2){if(n+=t[r],n>e)return!1;if(n+=t[r+1],n>=e)return!0}return!1}function $p(e,t){return e<65?e===36:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&jkt.test(String.fromCharCode(e)):t===!1?!1:rV(e,JRe)}function kw(e,t){return e<48?e===36:e<58?!0:e<65?!1:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&zkt.test(String.fromCharCode(e)):t===!1?!1:rV(e,JRe)||rV(e,Lkt)}var Kn=function(t,n){n===void 0&&(n={}),this.label=t,this.keyword=n.keyword,this.beforeExpr=!!n.beforeExpr,this.startsExpr=!!n.startsExpr,this.isLoop=!!n.isLoop,this.isAssign=!!n.isAssign,this.prefix=!!n.prefix,this.postfix=!!n.postfix,this.binop=n.binop||null,this.updateContext=null};function xl(e,t){return new Kn(e,{beforeExpr:!0,binop:t})}var Sl={beforeExpr:!0},za={startsExpr:!0},pX={};function Mn(e,t){return t===void 0&&(t={}),t.keyword=e,pX[e]=new Kn(e,t)}var W={num:new Kn("num",za),regexp:new Kn("regexp",za),string:new Kn("string",za),name:new Kn("name",za),privateId:new Kn("privateId",za),eof:new Kn("eof"),bracketL:new Kn("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new Kn("]"),braceL:new Kn("{",{beforeExpr:!0,startsExpr:!0}),braceR:new Kn("}"),parenL:new Kn("(",{beforeExpr:!0,startsExpr:!0}),parenR:new Kn(")"),comma:new Kn(",",Sl),semi:new Kn(";",Sl),colon:new Kn(":",Sl),dot:new Kn("."),question:new Kn("?",Sl),questionDot:new Kn("?."),arrow:new Kn("=>",Sl),template:new Kn("template"),invalidTemplate:new Kn("invalidTemplate"),ellipsis:new Kn("...",Sl),backQuote:new Kn("`",za),dollarBraceL:new Kn("${",{beforeExpr:!0,startsExpr:!0}),eq:new Kn("=",{beforeExpr:!0,isAssign:!0}),assign:new Kn("_=",{beforeExpr:!0,isAssign:!0}),incDec:new Kn("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new Kn("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:xl("||",1),logicalAND:xl("&&",2),bitwiseOR:xl("|",3),bitwiseXOR:xl("^",4),bitwiseAND:xl("&",5),equality:xl("==/!=/===/!==",6),relational:xl("</>/<=/>=",7),bitShift:xl("<</>>/>>>",8),plusMin:new Kn("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:xl("%",10),star:xl("*",10),slash:xl("/",10),starstar:new Kn("**",{beforeExpr:!0}),coalesce:xl("??",1),_break:Mn("break"),_case:Mn("case",Sl),_catch:Mn("catch"),_continue:Mn("continue"),_debugger:Mn("debugger"),_default:Mn("default",Sl),_do:Mn("do",{isLoop:!0,beforeExpr:!0}),_else:Mn("else",Sl),_finally:Mn("finally"),_for:Mn("for",{isLoop:!0}),_function:Mn("function",za),_if:Mn("if"),_return:Mn("return",Sl),_switch:Mn("switch"),_throw:Mn("throw",Sl),_try:Mn("try"),_var:Mn("var"),_const:Mn("const"),_while:Mn("while",{isLoop:!0}),_with:Mn("with"),_new:Mn("new",{beforeExpr:!0,startsExpr:!0}),_this:Mn("this",za),_super:Mn("super",za),_class:Mn("class",za),_extends:Mn("extends",Sl),_export:Mn("export"),_import:Mn("import",za),_null:Mn("null",za),_true:Mn("true",za),_false:Mn("false",za),_in:Mn("in",{beforeExpr:!0,binop:7}),_instanceof:Mn("instanceof",{beforeExpr:!0,binop:7}),_typeof:Mn("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:Mn("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:Mn("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},mc=/\r\n?|\n|\u2028|\u2029/,Ukt=new RegExp(mc.source,"g");function zE(e){return e===10||e===13||e===8232||e===8233}function eNe(e,t,n){n===void 0&&(n=e.length);for(var r=t;r<n;r++){var i=e.charCodeAt(r);if(zE(i))return r<n-1&&i===13&&e.charCodeAt(r+1)===10?r+2:r+1}return-1}var tNe=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Dl=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,nNe=Object.prototype,Vkt=nNe.hasOwnProperty,Hkt=nNe.toString,uI=Object.hasOwn||function(e,t){return Vkt.call(e,t)},Uhe=Array.isArray||function(e){return Hkt.call(e)==="[object Array]"},Vhe=Object.create(null);function Qm(e){return Vhe[e]||(Vhe[e]=new RegExp("^(?:"+e.replace(/ /g,"|")+")$"))}function Qg(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10)+55296,(e&1023)+56320))}var qkt=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,_A=function(t,n){this.line=t,this.column=n};_A.prototype.offset=function(t){return new _A(this.line,this.column+t)};var T4=function(t,n,r){this.start=n,this.end=r,t.sourceFile!==null&&(this.source=t.sourceFile)};function rNe(e,t){for(var n=1,r=0;;){var i=eNe(e,r,t);if(i<0)return new _A(n,t-r);++n,r=i}}var iV={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},Hhe=!1;function Wkt(e){var t={};for(var n in iV)t[n]=e&&uI(e,n)?e[n]:iV[n];if(t.ecmaVersion==="latest"?t.ecmaVersion=1e8:t.ecmaVersion==null?(!Hhe&&typeof console=="object"&&console.warn&&(Hhe=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),t.ecmaVersion=11):t.ecmaVersion>=2015&&(t.ecmaVersion-=2009),t.allowReserved==null&&(t.allowReserved=t.ecmaVersion<5),(!e||e.allowHashBang==null)&&(t.allowHashBang=t.ecmaVersion>=14),Uhe(t.onToken)){var r=t.onToken;t.onToken=function(i){return r.push(i)}}return Uhe(t.onComment)&&(t.onComment=Gkt(t,t.onComment)),t}function Gkt(e,t){return function(n,r,i,s,o,a){var u={type:n?"Block":"Line",value:r,start:i,end:s};e.locations&&(u.loc=new T4(this,o,a)),e.ranges&&(u.range=[i,s]),t.push(u)}}var bA=1,UE=2,mX=4,iNe=8,sNe=16,oNe=32,gX=64,aNe=128,lI=256,yX=bA|UE|lI;function vX(e,t){return UE|(e?mX:0)|(t?iNe:0)}var ZD=0,_X=1,em=2,uNe=3,lNe=4,cNe=5,Ss=function(t,n,r){this.options=t=Wkt(t),this.sourceFile=t.sourceFile,this.keywords=Qm(Fkt[t.ecmaVersion>=6?6:t.sourceType==="module"?"5module":5]);var i="";t.allowReserved!==!0&&(i=kB[t.ecmaVersion>=6?6:t.ecmaVersion===5?5:3],t.sourceType==="module"&&(i+=" await")),this.reservedWords=Qm(i);var s=(i?i+" ":"")+kB.strict;this.reservedWordsStrict=Qm(s),this.reservedWordsStrictBind=Qm(s+" "+kB.strictBind),this.input=String(n),this.containsEsc=!1,r?(this.pos=r,this.lineStart=this.input.lastIndexOf(`
`,r-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(mc).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=W.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=t.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&t.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(bA),this.regexpState=null,this.privateNameStack=[]},rh={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};Ss.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)};rh.inFunction.get=function(){return(this.currentVarScope().flags&UE)>0};rh.inGenerator.get=function(){return(this.currentVarScope().flags&iNe)>0&&!this.currentVarScope().inClassFieldInit};rh.inAsync.get=function(){return(this.currentVarScope().flags&mX)>0&&!this.currentVarScope().inClassFieldInit};rh.canAwait.get=function(){for(var e=this.scopeStack.length-1;e>=0;e--){var t=this.scopeStack[e];if(t.inClassFieldInit||t.flags&lI)return!1;if(t.flags&UE)return(t.flags&mX)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction};rh.allowSuper.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&gX)>0||n||this.options.allowSuperOutsideMethod};rh.allowDirectSuper.get=function(){return(this.currentThisScope().flags&aNe)>0};rh.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())};rh.allowNewDotTarget.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&(UE|lI))>0||n};rh.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&lI)>0};Ss.extend=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];for(var r=this,i=0;i<t.length;i++)r=t[i](r);return r};Ss.parse=function(t,n){return new this(n,t).parse()};Ss.parseExpressionAt=function(t,n,r){var i=new this(r,t,n);return i.nextToken(),i.parseExpression()};Ss.tokenizer=function(t,n){return new this(n,t)};Object.defineProperties(Ss.prototype,rh);var Da=Ss.prototype,Ykt=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;Da.strictDirective=function(e){if(this.options.ecmaVersion<5)return!1;for(;;){Dl.lastIndex=e,e+=Dl.exec(this.input)[0].length;var t=Ykt.exec(this.input.slice(e));if(!t)return!1;if((t[1]||t[2])==="use strict"){Dl.lastIndex=e+t[0].length;var n=Dl.exec(this.input),r=n.index+n[0].length,i=this.input.charAt(r);return i===";"||i==="}"||mc.test(n[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(i)||i==="!"&&this.input.charAt(r+1)==="=")}e+=t[0].length,Dl.lastIndex=e,e+=Dl.exec(this.input)[0].length,this.input[e]===";"&&e++}};Da.eat=function(e){return this.type===e?(this.next(),!0):!1};Da.isContextual=function(e){return this.type===W.name&&this.value===e&&!this.containsEsc};Da.eatContextual=function(e){return this.isContextual(e)?(this.next(),!0):!1};Da.expectContextual=function(e){this.eatContextual(e)||this.unexpected()};Da.canInsertSemicolon=function(){return this.type===W.eof||this.type===W.braceR||mc.test(this.input.slice(this.lastTokEnd,this.start))};Da.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0};Da.semicolon=function(){!this.eat(W.semi)&&!this.insertSemicolon()&&this.unexpected()};Da.afterTrailingComma=function(e,t){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0};Da.expect=function(e){this.eat(e)||this.unexpected()};Da.unexpected=function(e){this.raise(e??this.start,"Unexpected token")};var A4=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};Da.checkPatternErrors=function(e,t){if(e){e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element");var n=t?e.parenthesizedAssign:e.parenthesizedBind;n>-1&&this.raiseRecoverable(n,t?"Assigning to rvalue":"Parenthesized pattern")}};Da.checkExpressionErrors=function(e,t){if(!e)return!1;var n=e.shorthandAssign,r=e.doubleProto;if(!t)return n>=0||r>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),r>=0&&this.raiseRecoverable(r,"Redefinition of __proto__ property")};Da.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")};Da.isSimpleAssignTarget=function(e){return e.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(e.expression):e.type==="Identifier"||e.type==="MemberExpression"};var Ot=Ss.prototype;Ot.parseTopLevel=function(e){var t=Object.create(null);for(e.body||(e.body=[]);this.type!==W.eof;){var n=this.parseStatement(null,!0,t);e.body.push(n)}if(this.inModule)for(var r=0,i=Object.keys(this.undefinedExports);r<i.length;r+=1){var s=i[r];this.raiseRecoverable(this.undefinedExports[s].start,"Export '"+s+"' is not defined")}return this.adaptDirectivePrologue(e.body),this.next(),e.sourceType=this.options.sourceType,this.finishNode(e,"Program")};var bX={kind:"loop"},Kkt={kind:"switch"};Ot.isLet=function(e){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;Dl.lastIndex=this.pos;var t=Dl.exec(this.input),n=this.pos+t[0].length,r=this.input.charCodeAt(n);if(r===91||r===92)return!0;if(e)return!1;if(r===123||r>55295&&r<56320)return!0;if($p(r,!0)){for(var i=n+1;kw(r=this.input.charCodeAt(i),!0);)++i;if(r===92||r>55295&&r<56320)return!0;var s=this.input.slice(n,i);if(!Bkt.test(s))return!0}return!1};Ot.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;Dl.lastIndex=this.pos;var e=Dl.exec(this.input),t=this.pos+e[0].length,n;return!mc.test(this.input.slice(this.pos,t))&&this.input.slice(t,t+8)==="function"&&(t+8===this.input.length||!(kw(n=this.input.charCodeAt(t+8))||n>55295&&n<56320))};Ot.parseStatement=function(e,t,n){var r=this.type,i=this.startNode(),s;switch(this.isLet(e)&&(r=W._var,s="let"),r){case W._break:case W._continue:return this.parseBreakContinueStatement(i,r.keyword);case W._debugger:return this.parseDebuggerStatement(i);case W._do:return this.parseDoStatement(i);case W._for:return this.parseForStatement(i);case W._function:return e&&(this.strict||e!=="if"&&e!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(i,!1,!e);case W._class:return e&&this.unexpected(),this.parseClass(i,!0);case W._if:return this.parseIfStatement(i);case W._return:return this.parseReturnStatement(i);case W._switch:return this.parseSwitchStatement(i);case W._throw:return this.parseThrowStatement(i);case W._try:return this.parseTryStatement(i);case W._const:case W._var:return s=s||this.value,e&&s!=="var"&&this.unexpected(),this.parseVarStatement(i,s);case W._while:return this.parseWhileStatement(i);case W._with:return this.parseWithStatement(i);case W.braceL:return this.parseBlock(!0,i);case W.semi:return this.parseEmptyStatement(i);case W._export:case W._import:if(this.options.ecmaVersion>10&&r===W._import){Dl.lastIndex=this.pos;var o=Dl.exec(this.input),a=this.pos+o[0].length,u=this.input.charCodeAt(a);if(u===40||u===46)return this.parseExpressionStatement(i,this.parseExpression())}return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),r===W._import?this.parseImport(i):this.parseExport(i,n);default:if(this.isAsyncFunction())return e&&this.unexpected(),this.next(),this.parseFunctionStatement(i,!0,!e);var l=this.value,c=this.parseExpression();return r===W.name&&c.type==="Identifier"&&this.eat(W.colon)?this.parseLabeledStatement(i,l,c,e):this.parseExpressionStatement(i,c)}};Ot.parseBreakContinueStatement=function(e,t){var n=t==="break";this.next(),this.eat(W.semi)||this.insertSemicolon()?e.label=null:this.type!==W.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var r=0;r<this.labels.length;++r){var i=this.labels[r];if((e.label==null||i.name===e.label.name)&&(i.kind!=null&&(n||i.kind==="loop")||e.label&&n))break}return r===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,n?"BreakStatement":"ContinueStatement")};Ot.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")};Ot.parseDoStatement=function(e){return this.next(),this.labels.push(bX),e.body=this.parseStatement("do"),this.labels.pop(),this.expect(W._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(W.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")};Ot.parseForStatement=function(e){this.next();var t=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(bX),this.enterScope(0),this.expect(W.parenL),this.type===W.semi)return t>-1&&this.unexpected(t),this.parseFor(e,null);var n=this.isLet();if(this.type===W._var||this.type===W._const||n){var r=this.startNode(),i=n?"let":this.value;return this.next(),this.parseVar(r,!0,i),this.finishNode(r,"VariableDeclaration"),(this.type===W._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&r.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===W._in?t>-1&&this.unexpected(t):e.await=t>-1),this.parseForIn(e,r)):(t>-1&&this.unexpected(t),this.parseFor(e,r))}var s=this.isContextual("let"),o=!1,a=new A4,u=this.parseExpression(t>-1?"await":!0,a);return this.type===W._in||(o=this.options.ecmaVersion>=6&&this.isContextual("of"))?(this.options.ecmaVersion>=9&&(this.type===W._in?t>-1&&this.unexpected(t):e.await=t>-1),s&&o&&this.raise(u.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(u,!1,a),this.checkLValPattern(u),this.parseForIn(e,u)):(this.checkExpressionErrors(a,!0),t>-1&&this.unexpected(t),this.parseFor(e,u))};Ot.parseFunctionStatement=function(e,t,n){return this.next(),this.parseFunction(e,QT|(n?0:sV),!1,t)};Ot.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement("if"),e.alternate=this.eat(W._else)?this.parseStatement("if"):null,this.finishNode(e,"IfStatement")};Ot.parseReturnStatement=function(e){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(W.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")};Ot.parseSwitchStatement=function(e){this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(W.braceL),this.labels.push(Kkt),this.enterScope(0);for(var t,n=!1;this.type!==W.braceR;)if(this.type===W._case||this.type===W._default){var r=this.type===W._case;t&&this.finishNode(t,"SwitchCase"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),r?t.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,t.test=null),this.expect(W.colon)}else t||this.unexpected(),t.consequent.push(this.parseStatement(null));return this.exitScope(),t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")};Ot.parseThrowStatement=function(e){return this.next(),mc.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};var Xkt=[];Ot.parseCatchClauseParam=function(){var e=this.parseBindingAtom(),t=e.type==="Identifier";return this.enterScope(t?oNe:0),this.checkLValPattern(e,t?lNe:em),this.expect(W.parenR),e};Ot.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===W._catch){var t=this.startNode();this.next(),this.eat(W.parenL)?t.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),t.param=null,this.enterScope(0)),t.body=this.parseBlock(!1),this.exitScope(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(W._finally)?this.parseBlock():null,!e.handler&&!e.finalizer&&this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")};Ot.parseVarStatement=function(e,t,n){return this.next(),this.parseVar(e,!1,t,n),this.semicolon(),this.finishNode(e,"VariableDeclaration")};Ot.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(bX),e.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(e,"WhileStatement")};Ot.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement("with"),this.finishNode(e,"WithStatement")};Ot.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")};Ot.parseLabeledStatement=function(e,t,n,r){for(var i=0,s=this.labels;i<s.length;i+=1){var o=s[i];o.name===t&&this.raise(n.start,"Label '"+t+"' is already declared")}for(var a=this.type.isLoop?"loop":this.type===W._switch?"switch":null,u=this.labels.length-1;u>=0;u--){var l=this.labels[u];if(l.statementStart===e.start)l.statementStart=this.start,l.kind=a;else break}return this.labels.push({name:t,kind:a,statementStart:this.start}),e.body=this.parseStatement(r?r.indexOf("label")===-1?r+"label":r:"label"),this.labels.pop(),e.label=n,this.finishNode(e,"LabeledStatement")};Ot.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")};Ot.parseBlock=function(e,t,n){for(e===void 0&&(e=!0),t===void 0&&(t=this.startNode()),t.body=[],this.expect(W.braceL),e&&this.enterScope(0);this.type!==W.braceR;){var r=this.parseStatement(null);t.body.push(r)}return n&&(this.strict=!1),this.next(),e&&this.exitScope(),this.finishNode(t,"BlockStatement")};Ot.parseFor=function(e,t){return e.init=t,this.expect(W.semi),e.test=this.type===W.semi?null:this.parseExpression(),this.expect(W.semi),e.update=this.type===W.parenR?null:this.parseExpression(),this.expect(W.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,"ForStatement")};Ot.parseForIn=function(e,t){var n=this.type===W._in;return this.next(),t.type==="VariableDeclaration"&&t.declarations[0].init!=null&&(!n||this.options.ecmaVersion<8||this.strict||t.kind!=="var"||t.declarations[0].id.type!=="Identifier")&&this.raise(t.start,(n?"for-in":"for-of")+" loop variable declaration may not have an initializer"),e.left=t,e.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(W.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,n?"ForInStatement":"ForOfStatement")};Ot.parseVar=function(e,t,n,r){for(e.declarations=[],e.kind=n;;){var i=this.startNode();if(this.parseVarId(i,n),this.eat(W.eq)?i.init=this.parseMaybeAssign(t):!r&&n==="const"&&!(this.type===W._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():!r&&i.id.type!=="Identifier"&&!(t&&(this.type===W._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):i.init=null,e.declarations.push(this.finishNode(i,"VariableDeclarator")),!this.eat(W.comma))break}return e};Ot.parseVarId=function(e,t){e.id=this.parseBindingAtom(),this.checkLValPattern(e.id,t==="var"?_X:em,!1)};var QT=1,sV=2,fNe=4;Ot.parseFunction=function(e,t,n,r,i){this.initFunction(e),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!r)&&(this.type===W.star&&t&sV&&this.unexpected(),e.generator=this.eat(W.star)),this.options.ecmaVersion>=8&&(e.async=!!r),t&QT&&(e.id=t&fNe&&this.type!==W.name?null:this.parseIdent(),e.id&&!(t&sV)&&this.checkLValSimple(e.id,this.strict||e.generator||e.async?this.treatFunctionsAsVar?_X:em:uNe));var s=this.yieldPos,o=this.awaitPos,a=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(vX(e.async,e.generator)),t&QT||(e.id=this.type===W.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,n,!1,i),this.yieldPos=s,this.awaitPos=o,this.awaitIdentPos=a,this.finishNode(e,t&QT?"FunctionDeclaration":"FunctionExpression")};Ot.parseFunctionParams=function(e){this.expect(W.parenL),e.params=this.parseBindingList(W.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()};Ot.parseClass=function(e,t){this.next();var n=this.strict;this.strict=!0,this.parseClassId(e,t),this.parseClassSuper(e);var r=this.enterClassBody(),i=this.startNode(),s=!1;for(i.body=[],this.expect(W.braceL);this.type!==W.braceR;){var o=this.parseClassElement(e.superClass!==null);o&&(i.body.push(o),o.type==="MethodDefinition"&&o.kind==="constructor"?(s&&this.raiseRecoverable(o.start,"Duplicate constructor in the same class"),s=!0):o.key&&o.key.type==="PrivateIdentifier"&&Qkt(r,o)&&this.raiseRecoverable(o.key.start,"Identifier '#"+o.key.name+"' has already been declared"))}return this.strict=n,this.next(),e.body=this.finishNode(i,"ClassBody"),this.exitClassBody(),this.finishNode(e,t?"ClassDeclaration":"ClassExpression")};Ot.parseClassElement=function(e){if(this.eat(W.semi))return null;var t=this.options.ecmaVersion,n=this.startNode(),r="",i=!1,s=!1,o="method",a=!1;if(this.eatContextual("static")){if(t>=13&&this.eat(W.braceL))return this.parseClassStaticBlock(n),n;this.isClassElementNameStart()||this.type===W.star?a=!0:r="static"}if(n.static=a,!r&&t>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===W.star)&&!this.canInsertSemicolon()?s=!0:r="async"),!r&&(t>=9||!s)&&this.eat(W.star)&&(i=!0),!r&&!s&&!i){var u=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?o=u:r=u)}if(r?(n.computed=!1,n.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),n.key.name=r,this.finishNode(n.key,"Identifier")):this.parseClassElementName(n),t<13||this.type===W.parenL||o!=="method"||i||s){var l=!n.static&&e3(n,"constructor"),c=l&&e;l&&o!=="method"&&this.raise(n.key.start,"Constructor can't have get/set modifier"),n.kind=l?"constructor":o,this.parseClassMethod(n,i,s,c)}else this.parseClassField(n);return n};Ot.isClassElementNameStart=function(){return this.type===W.name||this.type===W.privateId||this.type===W.num||this.type===W.string||this.type===W.bracketL||this.type.keyword};Ot.parseClassElementName=function(e){this.type===W.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),e.computed=!1,e.key=this.parsePrivateIdent()):this.parsePropertyName(e)};Ot.parseClassMethod=function(e,t,n,r){var i=e.key;e.kind==="constructor"?(t&&this.raise(i.start,"Constructor can't be a generator"),n&&this.raise(i.start,"Constructor can't be an async method")):e.static&&e3(e,"prototype")&&this.raise(i.start,"Classes may not have a static property named prototype");var s=e.value=this.parseMethod(t,n,r);return e.kind==="get"&&s.params.length!==0&&this.raiseRecoverable(s.start,"getter should have no params"),e.kind==="set"&&s.params.length!==1&&this.raiseRecoverable(s.start,"setter should have exactly one param"),e.kind==="set"&&s.params[0].type==="RestElement"&&this.raiseRecoverable(s.params[0].start,"Setter cannot use rest params"),this.finishNode(e,"MethodDefinition")};Ot.parseClassField=function(e){if(e3(e,"constructor")?this.raise(e.key.start,"Classes can't have a field named 'constructor'"):e.static&&e3(e,"prototype")&&this.raise(e.key.start,"Classes can't have a static field named 'prototype'"),this.eat(W.eq)){var t=this.currentThisScope(),n=t.inClassFieldInit;t.inClassFieldInit=!0,e.value=this.parseMaybeAssign(),t.inClassFieldInit=n}else e.value=null;return this.semicolon(),this.finishNode(e,"PropertyDefinition")};Ot.parseClassStaticBlock=function(e){e.body=[];var t=this.labels;for(this.labels=[],this.enterScope(lI|gX);this.type!==W.braceR;){var n=this.parseStatement(null);e.body.push(n)}return this.next(),this.exitScope(),this.labels=t,this.finishNode(e,"StaticBlock")};Ot.parseClassId=function(e,t){this.type===W.name?(e.id=this.parseIdent(),t&&this.checkLValSimple(e.id,em,!1)):(t===!0&&this.unexpected(),e.id=null)};Ot.parseClassSuper=function(e){e.superClass=this.eat(W._extends)?this.parseExprSubscripts(null,!1):null};Ot.enterClassBody=function(){var e={declared:Object.create(null),used:[]};return this.privateNameStack.push(e),e.declared};Ot.exitClassBody=function(){var e=this.privateNameStack.pop(),t=e.declared,n=e.used;if(this.options.checkPrivateFields)for(var r=this.privateNameStack.length,i=r===0?null:this.privateNameStack[r-1],s=0;s<n.length;++s){var o=n[s];uI(t,o.name)||(i?i.used.push(o):this.raiseRecoverable(o.start,"Private field '#"+o.name+"' must be declared in an enclosing class"))}};function Qkt(e,t){var n=t.key.name,r=e[n],i="true";return t.type==="MethodDefinition"&&(t.kind==="get"||t.kind==="set")&&(i=(t.static?"s":"i")+t.kind),r==="iget"&&i==="iset"||r==="iset"&&i==="iget"||r==="sget"&&i==="sset"||r==="sset"&&i==="sget"?(e[n]="true",!1):r?!0:(e[n]=i,!1)}function e3(e,t){var n=e.computed,r=e.key;return!n&&(r.type==="Identifier"&&r.name===t||r.type==="Literal"&&r.value===t)}Ot.parseExportAllDeclaration=function(e,t){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(e.exported=this.parseModuleExportName(),this.checkExport(t,e.exported,this.lastTokStart)):e.exported=null),this.expectContextual("from"),this.type!==W.string&&this.unexpected(),e.source=this.parseExprAtom(),this.semicolon(),this.finishNode(e,"ExportAllDeclaration")};Ot.parseExport=function(e,t){if(this.next(),this.eat(W.star))return this.parseExportAllDeclaration(e,t);if(this.eat(W._default))return this.checkExport(t,"default",this.lastTokStart),e.declaration=this.parseExportDefaultDeclaration(),this.finishNode(e,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())e.declaration=this.parseExportDeclaration(e),e.declaration.type==="VariableDeclaration"?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id,e.declaration.id.start),e.specifiers=[],e.source=null;else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual("from"))this.type!==W.string&&this.unexpected(),e.source=this.parseExprAtom();else{for(var n=0,r=e.specifiers;n<r.length;n+=1){var i=r[n];this.checkUnreserved(i.local),this.checkLocalExport(i.local),i.local.type==="Literal"&&this.raise(i.local.start,"A string literal cannot be used as an exported binding without `from`.")}e.source=null}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")};Ot.parseExportDeclaration=function(e){return this.parseStatement(null)};Ot.parseExportDefaultDeclaration=function(){var e;if(this.type===W._function||(e=this.isAsyncFunction())){var t=this.startNode();return this.next(),e&&this.next(),this.parseFunction(t,QT|fNe,!1,e)}else if(this.type===W._class){var n=this.startNode();return this.parseClass(n,"nullableID")}else{var r=this.parseMaybeAssign();return this.semicolon(),r}};Ot.checkExport=function(e,t,n){e&&(typeof t!="string"&&(t=t.type==="Identifier"?t.name:t.value),uI(e,t)&&this.raiseRecoverable(n,"Duplicate export '"+t+"'"),e[t]=!0)};Ot.checkPatternExport=function(e,t){var n=t.type;if(n==="Identifier")this.checkExport(e,t,t.start);else if(n==="ObjectPattern")for(var r=0,i=t.properties;r<i.length;r+=1){var s=i[r];this.checkPatternExport(e,s)}else if(n==="ArrayPattern")for(var o=0,a=t.elements;o<a.length;o+=1){var u=a[o];u&&this.checkPatternExport(e,u)}else n==="Property"?this.checkPatternExport(e,t.value):n==="AssignmentPattern"?this.checkPatternExport(e,t.left):n==="RestElement"&&this.checkPatternExport(e,t.argument)};Ot.checkVariableExport=function(e,t){if(e)for(var n=0,r=t;n<r.length;n+=1){var i=r[n];this.checkPatternExport(e,i.id)}};Ot.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()};Ot.parseExportSpecifier=function(e){var t=this.startNode();return t.local=this.parseModuleExportName(),t.exported=this.eatContextual("as")?this.parseModuleExportName():t.local,this.checkExport(e,t.exported,t.exported.start),this.finishNode(t,"ExportSpecifier")};Ot.parseExportSpecifiers=function(e){var t=[],n=!0;for(this.expect(W.braceL);!this.eat(W.braceR);){if(n)n=!1;else if(this.expect(W.comma),this.afterTrailingComma(W.braceR))break;t.push(this.parseExportSpecifier(e))}return t};Ot.parseImport=function(e){return this.next(),this.type===W.string?(e.specifiers=Xkt,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===W.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(e,"ImportDeclaration")};Ot.parseImportSpecifier=function(){var e=this.startNode();return e.imported=this.parseModuleExportName(),this.eatContextual("as")?e.local=this.parseIdent():(this.checkUnreserved(e.imported),e.local=e.imported),this.checkLValSimple(e.local,em),this.finishNode(e,"ImportSpecifier")};Ot.parseImportDefaultSpecifier=function(){var e=this.startNode();return e.local=this.parseIdent(),this.checkLValSimple(e.local,em),this.finishNode(e,"ImportDefaultSpecifier")};Ot.parseImportNamespaceSpecifier=function(){var e=this.startNode();return this.next(),this.expectContextual("as"),e.local=this.parseIdent(),this.checkLValSimple(e.local,em),this.finishNode(e,"ImportNamespaceSpecifier")};Ot.parseImportSpecifiers=function(){var e=[],t=!0;if(this.type===W.name&&(e.push(this.parseImportDefaultSpecifier()),!this.eat(W.comma)))return e;if(this.type===W.star)return e.push(this.parseImportNamespaceSpecifier()),e;for(this.expect(W.braceL);!this.eat(W.braceR);){if(t)t=!1;else if(this.expect(W.comma),this.afterTrailingComma(W.braceR))break;e.push(this.parseImportSpecifier())}return e};Ot.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===W.string){var e=this.parseLiteral(this.value);return qkt.test(e.value)&&this.raise(e.start,"An export name cannot include a lone surrogate."),e}return this.parseIdent(!0)};Ot.adaptDirectivePrologue=function(e){for(var t=0;t<e.length&&this.isDirectiveCandidate(e[t]);++t)e[t].directive=e[t].expression.raw.slice(1,-1)};Ot.isDirectiveCandidate=function(e){return this.options.ecmaVersion>=5&&e.type==="ExpressionStatement"&&e.expression.type==="Literal"&&typeof e.expression.value=="string"&&(this.input[e.start]==='"'||this.input[e.start]==="'")};var gc=Ss.prototype;gc.toAssignable=function(e,t,n){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&e.name==="await"&&this.raise(e.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.toAssignable(s,t),s.type==="RestElement"&&(s.argument.type==="ArrayPattern"||s.argument.type==="ObjectPattern")&&this.raise(s.argument.start,"Unexpected token")}break;case"Property":e.kind!=="init"&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,t);break;case"ArrayExpression":e.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(e.elements,t);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,t),e.argument.type==="AssignmentPattern"&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":e.operator!=="="&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);break;case"ParenthesizedExpression":this.toAssignable(e.expression,t,n);break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return e};gc.toAssignableList=function(e,t){for(var n=e.length,r=0;r<n;r++){var i=e[r];i&&this.toAssignable(i,t)}if(n){var s=e[n-1];this.options.ecmaVersion===6&&t&&s&&s.type==="RestElement"&&s.argument.type!=="Identifier"&&this.unexpected(s.argument.start)}return e};gc.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")};gc.parseRestBinding=function(){var e=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==W.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")};gc.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case W.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(W.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case W.braceL:return this.parseObj(!0)}return this.parseIdent()};gc.parseBindingList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);)if(s?s=!1:this.expect(W.comma),t&&this.type===W.comma)i.push(null);else{if(n&&this.afterTrailingComma(e))break;if(this.type===W.ellipsis){var o=this.parseRestBinding();this.parseBindingListItem(o),i.push(o),this.type===W.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}else i.push(this.parseAssignableListItem(r))}return i};gc.parseAssignableListItem=function(e){var t=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(t),t};gc.parseBindingListItem=function(e){return e};gc.parseMaybeDefault=function(e,t,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(W.eq))return n;var r=this.startNodeAt(e,t);return r.left=n,r.right=this.parseMaybeAssign(),this.finishNode(r,"AssignmentPattern")};gc.checkLValSimple=function(e,t,n){t===void 0&&(t=ZD);var r=t!==ZD;switch(e.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(r?"Binding ":"Assigning to ")+e.name+" in strict mode"),r&&(t===em&&e.name==="let"&&this.raiseRecoverable(e.start,"let is disallowed as a lexically bound name"),n&&(uI(n,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),n[e.name]=!0),t!==cNe&&this.declareName(e.name,t,e.start));break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":r&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ParenthesizedExpression":return r&&this.raiseRecoverable(e.start,"Binding parenthesized expression"),this.checkLValSimple(e.expression,t,n);default:this.raise(e.start,(r?"Binding":"Assigning to")+" rvalue")}};gc.checkLValPattern=function(e,t,n){switch(t===void 0&&(t=ZD),e.type){case"ObjectPattern":for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,t,n)}break;case"ArrayPattern":for(var o=0,a=e.elements;o<a.length;o+=1){var u=a[o];u&&this.checkLValInnerPattern(u,t,n)}break;default:this.checkLValSimple(e,t,n)}};gc.checkLValInnerPattern=function(e,t,n){switch(t===void 0&&(t=ZD),e.type){case"Property":this.checkLValInnerPattern(e.value,t,n);break;case"AssignmentPattern":this.checkLValPattern(e.left,t,n);break;case"RestElement":this.checkLValPattern(e.argument,t,n);break;default:this.checkLValPattern(e,t,n)}};var Sc=function(t,n,r,i,s){this.token=t,this.isExpr=!!n,this.preserveSpace=!!r,this.override=i,this.generator=!!s},fi={b_stat:new Sc("{",!1),b_expr:new Sc("{",!0),b_tmpl:new Sc("${",!1),p_stat:new Sc("(",!1),p_expr:new Sc("(",!0),q_tmpl:new Sc("`",!0,!0,function(e){return e.tryReadTemplateToken()}),f_stat:new Sc("function",!1),f_expr:new Sc("function",!0),f_expr_gen:new Sc("function",!0,!1,null,!0),f_gen:new Sc("function",!1,!1,null,!0)},VE=Ss.prototype;VE.initialContext=function(){return[fi.b_stat]};VE.curContext=function(){return this.context[this.context.length-1]};VE.braceIsBlock=function(e){var t=this.curContext();return t===fi.f_expr||t===fi.f_stat?!0:e===W.colon&&(t===fi.b_stat||t===fi.b_expr)?!t.isExpr:e===W._return||e===W.name&&this.exprAllowed?mc.test(this.input.slice(this.lastTokEnd,this.start)):e===W._else||e===W.semi||e===W.eof||e===W.parenR||e===W.arrow?!0:e===W.braceL?t===fi.b_stat:e===W._var||e===W._const||e===W.name?!1:!this.exprAllowed};VE.inGeneratorContext=function(){for(var e=this.context.length-1;e>=1;e--){var t=this.context[e];if(t.token==="function")return t.generator}return!1};VE.updateContext=function(e){var t,n=this.type;n.keyword&&e===W.dot?this.exprAllowed=!1:(t=n.updateContext)?t.call(this,e):this.exprAllowed=n.beforeExpr};VE.overrideContext=function(e){this.curContext()!==e&&(this.context[this.context.length-1]=e)};W.parenR.updateContext=W.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var e=this.context.pop();e===fi.b_stat&&this.curContext().token==="function"&&(e=this.context.pop()),this.exprAllowed=!e.isExpr};W.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?fi.b_stat:fi.b_expr),this.exprAllowed=!0};W.dollarBraceL.updateContext=function(){this.context.push(fi.b_tmpl),this.exprAllowed=!0};W.parenL.updateContext=function(e){var t=e===W._if||e===W._for||e===W._with||e===W._while;this.context.push(t?fi.p_stat:fi.p_expr),this.exprAllowed=!0};W.incDec.updateContext=function(){};W._function.updateContext=W._class.updateContext=function(e){e.beforeExpr&&e!==W._else&&!(e===W.semi&&this.curContext()!==fi.p_stat)&&!(e===W._return&&mc.test(this.input.slice(this.lastTokEnd,this.start)))&&!((e===W.colon||e===W.braceL)&&this.curContext()===fi.b_stat)?this.context.push(fi.f_expr):this.context.push(fi.f_stat),this.exprAllowed=!1};W.colon.updateContext=function(){this.curContext().token==="function"&&this.context.pop(),this.exprAllowed=!0};W.backQuote.updateContext=function(){this.curContext()===fi.q_tmpl?this.context.pop():this.context.push(fi.q_tmpl),this.exprAllowed=!1};W.star.updateContext=function(e){if(e===W._function){var t=this.context.length-1;this.context[t]===fi.f_expr?this.context[t]=fi.f_expr_gen:this.context[t]=fi.f_gen}this.exprAllowed=!0};W.name.updateContext=function(e){var t=!1;this.options.ecmaVersion>=6&&e!==W.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t};var Kt=Ss.prototype;Kt.checkPropClash=function(e,t,n){if(!(this.options.ecmaVersion>=9&&e.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var r=e.key,i;switch(r.type){case"Identifier":i=r.name;break;case"Literal":i=String(r.value);break;default:return}var s=e.kind;if(this.options.ecmaVersion>=6){i==="__proto__"&&s==="init"&&(t.proto&&(n?n.doubleProto<0&&(n.doubleProto=r.start):this.raiseRecoverable(r.start,"Redefinition of __proto__ property")),t.proto=!0);return}i="$"+i;var o=t[i];if(o){var a;s==="init"?a=this.strict&&o.init||o.get||o.set:a=o.init||o[s],a&&this.raiseRecoverable(r.start,"Redefinition of property")}else o=t[i]={init:!1,get:!1,set:!1};o[s]=!0}};Kt.parseExpression=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeAssign(e,t);if(this.type===W.comma){var s=this.startNodeAt(n,r);for(s.expressions=[i];this.eat(W.comma);)s.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(s,"SequenceExpression")}return i};Kt.parseMaybeAssign=function(e,t,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(e);this.exprAllowed=!1}var r=!1,i=-1,s=-1,o=-1;t?(i=t.parenthesizedAssign,s=t.trailingComma,o=t.doubleProto,t.parenthesizedAssign=t.trailingComma=-1):(t=new A4,r=!0);var a=this.start,u=this.startLoc;(this.type===W.parenL||this.type===W.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=e==="await");var l=this.parseMaybeConditional(e,t);if(n&&(l=n.call(this,l,a,u)),this.type.isAssign){var c=this.startNodeAt(a,u);return c.operator=this.value,this.type===W.eq&&(l=this.toAssignable(l,!1,t)),r||(t.parenthesizedAssign=t.trailingComma=t.doubleProto=-1),t.shorthandAssign>=l.start&&(t.shorthandAssign=-1),this.type===W.eq?this.checkLValPattern(l):this.checkLValSimple(l),c.left=l,this.next(),c.right=this.parseMaybeAssign(e),o>-1&&(t.doubleProto=o),this.finishNode(c,"AssignmentExpression")}else r&&this.checkExpressionErrors(t,!0);return i>-1&&(t.parenthesizedAssign=i),s>-1&&(t.trailingComma=s),l};Kt.parseMaybeConditional=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return i;if(this.eat(W.question)){var s=this.startNodeAt(n,r);return s.test=i,s.consequent=this.parseMaybeAssign(),this.expect(W.colon),s.alternate=this.parseMaybeAssign(e),this.finishNode(s,"ConditionalExpression")}return i};Kt.parseExprOps=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeUnary(t,!1,!1,e);return this.checkExpressionErrors(t)||i.start===n&&i.type==="ArrowFunctionExpression"?i:this.parseExprOp(i,n,r,-1,e)};Kt.parseExprOp=function(e,t,n,r,i){var s=this.type.binop;if(s!=null&&(!i||this.type!==W._in)&&s>r){var o=this.type===W.logicalOR||this.type===W.logicalAND,a=this.type===W.coalesce;a&&(s=W.logicalAND.binop);var u=this.value;this.next();var l=this.start,c=this.startLoc,f=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,i),l,c,s,i),d=this.buildBinary(t,n,e,f,u,o||a);return(o&&this.type===W.coalesce||a&&(this.type===W.logicalOR||this.type===W.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(d,t,n,r,i)}return e};Kt.buildBinary=function(e,t,n,r,i,s){r.type==="PrivateIdentifier"&&this.raise(r.start,"Private identifier can only be left side of binary expression");var o=this.startNodeAt(e,t);return o.left=n,o.operator=i,o.right=r,this.finishNode(o,s?"LogicalExpression":"BinaryExpression")};Kt.parseMaybeUnary=function(e,t,n,r){var i=this.start,s=this.startLoc,o;if(this.isContextual("await")&&this.canAwait)o=this.parseAwait(r),t=!0;else if(this.type.prefix){var a=this.startNode(),u=this.type===W.incDec;a.operator=this.value,a.prefix=!0,this.next(),a.argument=this.parseMaybeUnary(null,!0,u,r),this.checkExpressionErrors(e,!0),u?this.checkLValSimple(a.argument):this.strict&&a.operator==="delete"&&a.argument.type==="Identifier"?this.raiseRecoverable(a.start,"Deleting local variable in strict mode"):a.operator==="delete"&&dNe(a.argument)?this.raiseRecoverable(a.start,"Private fields can not be deleted"):t=!0,o=this.finishNode(a,u?"UpdateExpression":"UnaryExpression")}else if(!t&&this.type===W.privateId)(r||this.privateNameStack.length===0)&&this.options.checkPrivateFields&&this.unexpected(),o=this.parsePrivateIdent(),this.type!==W._in&&this.unexpected();else{if(o=this.parseExprSubscripts(e,r),this.checkExpressionErrors(e))return o;for(;this.type.postfix&&!this.canInsertSemicolon();){var l=this.startNodeAt(i,s);l.operator=this.value,l.prefix=!1,l.argument=o,this.checkLValSimple(o),this.next(),o=this.finishNode(l,"UpdateExpression")}}if(!n&&this.eat(W.starstar))if(t)this.unexpected(this.lastTokStart);else return this.buildBinary(i,s,o,this.parseMaybeUnary(null,!1,!1,r),"**",!1);else return o};function dNe(e){return e.type==="MemberExpression"&&e.property.type==="PrivateIdentifier"||e.type==="ChainExpression"&&dNe(e.expression)}Kt.parseExprSubscripts=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprAtom(e,t);if(i.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return i;var s=this.parseSubscripts(i,n,r,!1,t);return e&&s.type==="MemberExpression"&&(e.parenthesizedAssign>=s.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=s.start&&(e.parenthesizedBind=-1),e.trailingComma>=s.start&&(e.trailingComma=-1)),s};Kt.parseSubscripts=function(e,t,n,r,i){for(var s=this.options.ecmaVersion>=8&&e.type==="Identifier"&&e.name==="async"&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&e.end-e.start===5&&this.potentialArrowAt===e.start,o=!1;;){var a=this.parseSubscript(e,t,n,r,s,o,i);if(a.optional&&(o=!0),a===e||a.type==="ArrowFunctionExpression"){if(o){var u=this.startNodeAt(t,n);u.expression=a,a=this.finishNode(u,"ChainExpression")}return a}e=a}};Kt.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(W.arrow)};Kt.parseSubscriptAsyncArrow=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!0,r)};Kt.parseSubscript=function(e,t,n,r,i,s,o){var a=this.options.ecmaVersion>=11,u=a&&this.eat(W.questionDot);r&&u&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var l=this.eat(W.bracketL);if(l||u&&this.type!==W.parenL&&this.type!==W.backQuote||this.eat(W.dot)){var c=this.startNodeAt(t,n);c.object=e,l?(c.property=this.parseExpression(),this.expect(W.bracketR)):this.type===W.privateId&&e.type!=="Super"?c.property=this.parsePrivateIdent():c.property=this.parseIdent(this.options.allowReserved!=="never"),c.computed=!!l,a&&(c.optional=u),e=this.finishNode(c,"MemberExpression")}else if(!r&&this.eat(W.parenL)){var f=new A4,d=this.yieldPos,h=this.awaitPos,p=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var m=this.parseExprList(W.parenR,this.options.ecmaVersion>=8,!1,f);if(i&&!u&&this.shouldParseAsyncArrow())return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=d,this.awaitPos=h,this.awaitIdentPos=p,this.parseSubscriptAsyncArrow(t,n,m,o);this.checkExpressionErrors(f,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=h||this.awaitPos,this.awaitIdentPos=p||this.awaitIdentPos;var g=this.startNodeAt(t,n);g.callee=e,g.arguments=m,a&&(g.optional=u),e=this.finishNode(g,"CallExpression")}else if(this.type===W.backQuote){(u||s)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var y=this.startNodeAt(t,n);y.tag=e,y.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(y,"TaggedTemplateExpression")}return e};Kt.parseExprAtom=function(e,t,n){this.type===W.slash&&this.readRegexp();var r,i=this.potentialArrowAt===this.start;switch(this.type){case W._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),r=this.startNode(),this.next(),this.type===W.parenL&&!this.allowDirectSuper&&this.raise(r.start,"super() call outside constructor of a subclass"),this.type!==W.dot&&this.type!==W.bracketL&&this.type!==W.parenL&&this.unexpected(),this.finishNode(r,"Super");case W._this:return r=this.startNode(),this.next(),this.finishNode(r,"ThisExpression");case W.name:var s=this.start,o=this.startLoc,a=this.containsEsc,u=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!a&&u.name==="async"&&!this.canInsertSemicolon()&&this.eat(W._function))return this.overrideContext(fi.f_expr),this.parseFunction(this.startNodeAt(s,o),0,!1,!0,t);if(i&&!this.canInsertSemicolon()){if(this.eat(W.arrow))return this.parseArrowExpression(this.startNodeAt(s,o),[u],!1,t);if(this.options.ecmaVersion>=8&&u.name==="async"&&this.type===W.name&&!a&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return u=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(W.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(s,o),[u],!0,t)}return u;case W.regexp:var l=this.value;return r=this.parseLiteral(l.value),r.regex={pattern:l.pattern,flags:l.flags},r;case W.num:case W.string:return this.parseLiteral(this.value);case W._null:case W._true:case W._false:return r=this.startNode(),r.value=this.type===W._null?null:this.type===W._true,r.raw=this.type.keyword,this.next(),this.finishNode(r,"Literal");case W.parenL:var c=this.start,f=this.parseParenAndDistinguishExpression(i,t);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(f)&&(e.parenthesizedAssign=c),e.parenthesizedBind<0&&(e.parenthesizedBind=c)),f;case W.bracketL:return r=this.startNode(),this.next(),r.elements=this.parseExprList(W.bracketR,!0,!0,e),this.finishNode(r,"ArrayExpression");case W.braceL:return this.overrideContext(fi.b_expr),this.parseObj(!1,e);case W._function:return r=this.startNode(),this.next(),this.parseFunction(r,0);case W._class:return this.parseClass(this.startNode(),!1);case W._new:return this.parseNew();case W.backQuote:return this.parseTemplate();case W._import:return this.options.ecmaVersion>=11?this.parseExprImport(n):this.unexpected();default:return this.parseExprAtomDefault()}};Kt.parseExprAtomDefault=function(){this.unexpected()};Kt.parseExprImport=function(e){var t=this.startNode();this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import");var n=this.parseIdent(!0);if(this.type===W.parenL&&!e)return this.parseDynamicImport(t);if(this.type===W.dot)return t.meta=n,this.parseImportMeta(t);this.unexpected()};Kt.parseDynamicImport=function(e){if(this.next(),e.source=this.parseMaybeAssign(),!this.eat(W.parenR)){var t=this.start;this.eat(W.comma)&&this.eat(W.parenR)?this.raiseRecoverable(t,"Trailing comma is not allowed in import()"):this.unexpected(t)}return this.finishNode(e,"ImportExpression")};Kt.parseImportMeta=function(e){this.next();var t=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="meta"&&this.raiseRecoverable(e.property.start,"The only valid meta property for import is 'import.meta'"),t&&this.raiseRecoverable(e.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(e.start,"Cannot use 'import.meta' outside a module"),this.finishNode(e,"MetaProperty")};Kt.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),t.raw.charCodeAt(t.raw.length-1)===110&&(t.bigint=t.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(t,"Literal")};Kt.parseParenExpression=function(){this.expect(W.parenL);var e=this.parseExpression();return this.expect(W.parenR),e};Kt.shouldParseArrow=function(e){return!this.canInsertSemicolon()};Kt.parseParenAndDistinguishExpression=function(e,t){var n=this.start,r=this.startLoc,i,s=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var o=this.start,a=this.startLoc,u=[],l=!0,c=!1,f=new A4,d=this.yieldPos,h=this.awaitPos,p;for(this.yieldPos=0,this.awaitPos=0;this.type!==W.parenR;)if(l?l=!1:this.expect(W.comma),s&&this.afterTrailingComma(W.parenR,!0)){c=!0;break}else if(this.type===W.ellipsis){p=this.start,u.push(this.parseParenItem(this.parseRestBinding())),this.type===W.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}else u.push(this.parseMaybeAssign(!1,f,this.parseParenItem));var m=this.lastTokEnd,g=this.lastTokEndLoc;if(this.expect(W.parenR),e&&this.shouldParseArrow(u)&&this.eat(W.arrow))return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=d,this.awaitPos=h,this.parseParenArrowList(n,r,u,t);(!u.length||c)&&this.unexpected(this.lastTokStart),p&&this.unexpected(p),this.checkExpressionErrors(f,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=h||this.awaitPos,u.length>1?(i=this.startNodeAt(o,a),i.expressions=u,this.finishNodeAt(i,"SequenceExpression",m,g)):i=u[0]}else i=this.parseParenExpression();if(this.options.preserveParens){var y=this.startNodeAt(n,r);return y.expression=i,this.finishNode(y,"ParenthesizedExpression")}else return i};Kt.parseParenItem=function(e){return e};Kt.parseParenArrowList=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!1,r)};var Jkt=[];Kt.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var e=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===W.dot){var t=this.startNodeAt(e.start,e.startLoc);t.name="new",e.meta=this.finishNode(t,"Identifier"),this.next();var n=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="target"&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is 'new.target'"),n&&this.raiseRecoverable(e.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(e.start,"'new.target' can only be used in functions and class static block"),this.finishNode(e,"MetaProperty")}var r=this.start,i=this.startLoc;return e.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),r,i,!0,!1),this.eat(W.parenL)?e.arguments=this.parseExprList(W.parenR,this.options.ecmaVersion>=8,!1):e.arguments=Jkt,this.finishNode(e,"NewExpression")};Kt.parseTemplateElement=function(e){var t=e.isTagged,n=this.startNode();return this.type===W.invalidTemplate?(t||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value,cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),n.tail=this.type===W.backQuote,this.finishNode(n,"TemplateElement")};Kt.parseTemplate=function(e){e===void 0&&(e={});var t=e.isTagged;t===void 0&&(t=!1);var n=this.startNode();this.next(),n.expressions=[];var r=this.parseTemplateElement({isTagged:t});for(n.quasis=[r];!r.tail;)this.type===W.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(W.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(W.braceR),n.quasis.push(r=this.parseTemplateElement({isTagged:t}));return this.next(),this.finishNode(n,"TemplateLiteral")};Kt.isAsyncProp=function(e){return!e.computed&&e.key.type==="Identifier"&&e.key.name==="async"&&(this.type===W.name||this.type===W.num||this.type===W.string||this.type===W.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===W.star)&&!mc.test(this.input.slice(this.lastTokEnd,this.start))};Kt.parseObj=function(e,t){var n=this.startNode(),r=!0,i={};for(n.properties=[],this.next();!this.eat(W.braceR);){if(r)r=!1;else if(this.expect(W.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(W.braceR))break;var s=this.parseProperty(e,t);e||this.checkPropClash(s,i,t),n.properties.push(s)}return this.finishNode(n,e?"ObjectPattern":"ObjectExpression")};Kt.parseProperty=function(e,t){var n=this.startNode(),r,i,s,o;if(this.options.ecmaVersion>=9&&this.eat(W.ellipsis))return e?(n.argument=this.parseIdent(!1),this.type===W.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(n,"RestElement")):(n.argument=this.parseMaybeAssign(!1,t),this.type===W.comma&&t&&t.trailingComma<0&&(t.trailingComma=this.start),this.finishNode(n,"SpreadElement"));this.options.ecmaVersion>=6&&(n.method=!1,n.shorthand=!1,(e||t)&&(s=this.start,o=this.startLoc),e||(r=this.eat(W.star)));var a=this.containsEsc;return this.parsePropertyName(n),!e&&!a&&this.options.ecmaVersion>=8&&!r&&this.isAsyncProp(n)?(i=!0,r=this.options.ecmaVersion>=9&&this.eat(W.star),this.parsePropertyName(n)):i=!1,this.parsePropertyValue(n,e,r,i,s,o,t,a),this.finishNode(n,"Property")};Kt.parseGetterSetter=function(e){e.kind=e.key.name,this.parsePropertyName(e),e.value=this.parseMethod(!1);var t=e.kind==="get"?0:1;if(e.value.params.length!==t){var n=e.value.start;e.kind==="get"?this.raiseRecoverable(n,"getter should have no params"):this.raiseRecoverable(n,"setter should have exactly one param")}else e.kind==="set"&&e.value.params[0].type==="RestElement"&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")};Kt.parsePropertyValue=function(e,t,n,r,i,s,o,a){(n||r)&&this.type===W.colon&&this.unexpected(),this.eat(W.colon)?(e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,o),e.kind="init"):this.options.ecmaVersion>=6&&this.type===W.parenL?(t&&this.unexpected(),e.kind="init",e.method=!0,e.value=this.parseMethod(n,r)):!t&&!a&&this.options.ecmaVersion>=5&&!e.computed&&e.key.type==="Identifier"&&(e.key.name==="get"||e.key.name==="set")&&this.type!==W.comma&&this.type!==W.braceR&&this.type!==W.eq?((n||r)&&this.unexpected(),this.parseGetterSetter(e)):this.options.ecmaVersion>=6&&!e.computed&&e.key.type==="Identifier"?((n||r)&&this.unexpected(),this.checkUnreserved(e.key),e.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=i),e.kind="init",t?e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key)):this.type===W.eq&&o?(o.shorthandAssign<0&&(o.shorthandAssign=this.start),e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key))):e.value=this.copyNode(e.key),e.shorthand=!0):this.unexpected()};Kt.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(W.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(W.bracketR),e.key;e.computed=!1}return e.key=this.type===W.num||this.type===W.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")};Kt.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)};Kt.parseMethod=function(e,t,n){var r=this.startNode(),i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.initFunction(r),this.options.ecmaVersion>=6&&(r.generator=e),this.options.ecmaVersion>=8&&(r.async=!!t),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(vX(t,r.generator)|gX|(n?aNe:0)),this.expect(W.parenL),r.params=this.parseBindingList(W.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(r,!1,!0,!1),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(r,"FunctionExpression")};Kt.parseArrowExpression=function(e,t,n,r){var i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.enterScope(vX(n,!1)|sNe),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0,!1,r),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(e,"ArrowFunctionExpression")};Kt.parseFunctionBody=function(e,t,n,r){var i=t&&this.type!==W.braceL,s=this.strict,o=!1;if(i)e.body=this.parseMaybeAssign(r),e.expression=!0,this.checkParams(e,!1);else{var a=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);(!s||a)&&(o=this.strictDirective(this.end),o&&a&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var u=this.labels;this.labels=[],o&&(this.strict=!0),this.checkParams(e,!s&&!o&&!t&&!n&&this.isSimpleParamList(e.params)),this.strict&&e.id&&this.checkLValSimple(e.id,cNe),e.body=this.parseBlock(!1,void 0,o&&!s),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=u}this.exitScope()};Kt.isSimpleParamList=function(e){for(var t=0,n=e;t<n.length;t+=1){var r=n[t];if(r.type!=="Identifier")return!1}return!0};Kt.checkParams=function(e,t){for(var n=Object.create(null),r=0,i=e.params;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,_X,t?null:n)}};Kt.parseExprList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);){if(s)s=!1;else if(this.expect(W.comma),t&&this.afterTrailingComma(e))break;var o=void 0;n&&this.type===W.comma?o=null:this.type===W.ellipsis?(o=this.parseSpread(r),r&&this.type===W.comma&&r.trailingComma<0&&(r.trailingComma=this.start)):o=this.parseMaybeAssign(!1,r),i.push(o)}return i};Kt.checkUnreserved=function(e){var t=e.start,n=e.end,r=e.name;if(this.inGenerator&&r==="yield"&&this.raiseRecoverable(t,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&r==="arguments"&&this.raiseRecoverable(t,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(r==="arguments"||r==="await")&&this.raise(t,"Cannot use "+r+" in class static initialization block"),this.keywords.test(r)&&this.raise(t,"Unexpected keyword '"+r+"'"),!(this.options.ecmaVersion<6&&this.input.slice(t,n).indexOf("\\")!==-1)){var i=this.strict?this.reservedWordsStrict:this.reservedWords;i.test(r)&&(!this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(t,"The keyword '"+r+"' is reserved"))}};Kt.parseIdent=function(e){var t=this.parseIdentNode();return this.next(!!e),this.finishNode(t,"Identifier"),e||(this.checkUnreserved(t),t.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=t.start)),t};Kt.parseIdentNode=function(){var e=this.startNode();return this.type===W.name?e.name=this.value:this.type.keyword?(e.name=this.type.keyword,(e.name==="class"||e.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop(),this.type=W.name):this.unexpected(),e};Kt.parsePrivateIdent=function(){var e=this.startNode();return this.type===W.privateId?e.name=this.value:this.unexpected(),this.next(),this.finishNode(e,"PrivateIdentifier"),this.options.checkPrivateFields&&(this.privateNameStack.length===0?this.raise(e.start,"Private field '#"+e.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(e)),e};Kt.parseYield=function(e){this.yieldPos||(this.yieldPos=this.start);var t=this.startNode();return this.next(),this.type===W.semi||this.canInsertSemicolon()||this.type!==W.star&&!this.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(W.star),t.argument=this.parseMaybeAssign(e)),this.finishNode(t,"YieldExpression")};Kt.parseAwait=function(e){this.awaitPos||(this.awaitPos=this.start);var t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(null,!0,!1,e),this.finishNode(t,"AwaitExpression")};var t3=Ss.prototype;t3.raise=function(e,t){var n=rNe(this.input,e);t+=" ("+n.line+":"+n.column+")";var r=new SyntaxError(t);throw r.pos=e,r.loc=n,r.raisedAt=this.pos,r};t3.raiseRecoverable=t3.raise;t3.curPosition=function(){if(this.options.locations)return new _A(this.curLine,this.pos-this.lineStart)};var D0=Ss.prototype,Zkt=function(t){this.flags=t,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};D0.enterScope=function(e){this.scopeStack.push(new Zkt(e))};D0.exitScope=function(){this.scopeStack.pop()};D0.treatFunctionsAsVarInScope=function(e){return e.flags&UE||!this.inModule&&e.flags&bA};D0.declareName=function(e,t,n){var r=!1;if(t===em){var i=this.currentScope();r=i.lexical.indexOf(e)>-1||i.functions.indexOf(e)>-1||i.var.indexOf(e)>-1,i.lexical.push(e),this.inModule&&i.flags&bA&&delete this.undefinedExports[e]}else if(t===lNe){var s=this.currentScope();s.lexical.push(e)}else if(t===uNe){var o=this.currentScope();this.treatFunctionsAsVar?r=o.lexical.indexOf(e)>-1:r=o.lexical.indexOf(e)>-1||o.var.indexOf(e)>-1,o.functions.push(e)}else for(var a=this.scopeStack.length-1;a>=0;--a){var u=this.scopeStack[a];if(u.lexical.indexOf(e)>-1&&!(u.flags&oNe&&u.lexical[0]===e)||!this.treatFunctionsAsVarInScope(u)&&u.functions.indexOf(e)>-1){r=!0;break}if(u.var.push(e),this.inModule&&u.flags&bA&&delete this.undefinedExports[e],u.flags&yX)break}r&&this.raiseRecoverable(n,"Identifier '"+e+"' has already been declared")};D0.checkLocalExport=function(e){this.scopeStack[0].lexical.indexOf(e.name)===-1&&this.scopeStack[0].var.indexOf(e.name)===-1&&(this.undefinedExports[e.name]=e)};D0.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]};D0.currentVarScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&yX)return t}};D0.currentThisScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&yX&&!(t.flags&sNe))return t}};var C4=function(t,n,r){this.type="",this.start=n,this.end=0,t.options.locations&&(this.loc=new T4(t,r)),t.options.directSourceFile&&(this.sourceFile=t.options.directSourceFile),t.options.ranges&&(this.range=[n,0])},cI=Ss.prototype;cI.startNode=function(){return new C4(this,this.start,this.startLoc)};cI.startNodeAt=function(e,t){return new C4(this,e,t)};function hNe(e,t,n,r){return e.type=t,e.end=n,this.options.locations&&(e.loc.end=r),this.options.ranges&&(e.range[1]=n),e}cI.finishNode=function(e,t){return hNe.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)};cI.finishNodeAt=function(e,t,n,r){return hNe.call(this,e,t,n,r)};cI.copyNode=function(e){var t=new C4(this,e.start,this.startLoc);for(var n in e)t[n]=e[n];return t};var pNe="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",mNe=pNe+" Extended_Pictographic",gNe=mNe,yNe=gNe+" EBase EComp EMod EPres ExtPict",vNe=yNe,e$t=vNe,t$t={9:pNe,10:mNe,11:gNe,12:yNe,13:vNe,14:e$t},n$t="Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji",r$t={9:"",10:"",11:"",12:"",13:"",14:n$t},qhe="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",_Ne="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",bNe=_Ne+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",wNe=bNe+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",ENe=wNe+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",xNe=ENe+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",i$t=xNe+" Hrkt Katakana_Or_Hiragana Kawi Nag_Mundari Nagm Unknown Zzzz",s$t={9:_Ne,10:bNe,11:wNe,12:ENe,13:xNe,14:i$t},SNe={};function o$t(e){var t=SNe[e]={binary:Qm(t$t[e]+" "+qhe),binaryOfStrings:Qm(r$t[e]),nonBinary:{General_Category:Qm(qhe),Script:Qm(s$t[e])}};t.nonBinary.Script_Extensions=t.nonBinary.Script,t.nonBinary.gc=t.nonBinary.General_Category,t.nonBinary.sc=t.nonBinary.Script,t.nonBinary.scx=t.nonBinary.Script_Extensions}for(var RB=0,Whe=[9,10,11,12,13,14];RB<Whe.length;RB+=1){var a$t=Whe[RB];o$t(a$t)}var _t=Ss.prototype,ih=function(t){this.parser=t,this.validFlags="gim"+(t.options.ecmaVersion>=6?"uy":"")+(t.options.ecmaVersion>=9?"s":"")+(t.options.ecmaVersion>=13?"d":"")+(t.options.ecmaVersion>=15?"v":""),this.unicodeProperties=SNe[t.options.ecmaVersion>=14?14:t.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};ih.prototype.reset=function(t,n,r){var i=r.indexOf("v")!==-1,s=r.indexOf("u")!==-1;this.start=t|0,this.source=n+"",this.flags=r,i&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=s&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=s&&this.parser.options.ecmaVersion>=9)};ih.prototype.raise=function(t){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+t)};ih.prototype.at=function(t,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(t>=i)return-1;var s=r.charCodeAt(t);if(!(n||this.switchU)||s<=55295||s>=57344||t+1>=i)return s;var o=r.charCodeAt(t+1);return o>=56320&&o<=57343?(s<<10)+o-56613888:s};ih.prototype.nextIndex=function(t,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(t>=i)return i;var s=r.charCodeAt(t),o;return!(n||this.switchU)||s<=55295||s>=57344||t+1>=i||(o=r.charCodeAt(t+1))<56320||o>57343?t+1:t+2};ih.prototype.current=function(t){return t===void 0&&(t=!1),this.at(this.pos,t)};ih.prototype.lookahead=function(t){return t===void 0&&(t=!1),this.at(this.nextIndex(this.pos,t),t)};ih.prototype.advance=function(t){t===void 0&&(t=!1),this.pos=this.nextIndex(this.pos,t)};ih.prototype.eat=function(t,n){return n===void 0&&(n=!1),this.current(n)===t?(this.advance(n),!0):!1};ih.prototype.eatChars=function(t,n){n===void 0&&(n=!1);for(var r=this.pos,i=0,s=t;i<s.length;i+=1){var o=s[i],a=this.at(r,n);if(a===-1||a!==o)return!1;r=this.nextIndex(r,n)}return this.pos=r,!0};_t.validateRegExpFlags=function(e){for(var t=e.validFlags,n=e.flags,r=!1,i=!1,s=0;s<n.length;s++){var o=n.charAt(s);t.indexOf(o)===-1&&this.raise(e.start,"Invalid regular expression flag"),n.indexOf(o,s+1)>-1&&this.raise(e.start,"Duplicate regular expression flag"),o==="u"&&(r=!0),o==="v"&&(i=!0)}this.options.ecmaVersion>=15&&r&&i&&this.raise(e.start,"Invalid regular expression flag")};_t.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&this.options.ecmaVersion>=9&&e.groupNames.length>0&&(e.switchN=!0,this.regexp_pattern(e))};_t.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue="",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames.length=0,e.backReferenceNames.length=0,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),(e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets")),e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(var t=0,n=e.backReferenceNames;t<n.length;t+=1){var r=n[t];e.groupNames.indexOf(r)===-1&&e.raise("Invalid named capture referenced")}};_t.regexp_disjunction=function(e){for(this.regexp_alternative(e);e.eat(124);)this.regexp_alternative(e);this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat"),e.eat(123)&&e.raise("Lone quantifier brackets")};_t.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););};_t.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise("Invalid quantifier"),!0):(e.switchU?this.regexp_eatAtom(e):this.regexp_eatExtendedAtom(e))?(this.regexp_eatQuantifier(e),!0):!1};_t.regexp_eatAssertion=function(e){var t=e.pos;if(e.lastAssertionIsQuantifiable=!1,e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=t}if(e.eat(40)&&e.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=e.eat(60)),e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise("Unterminated group"),e.lastAssertionIsQuantifiable=!n,!0}return e.pos=t,!1};_t.regexp_eatQuantifier=function(e,t){return t===void 0&&(t=!1),this.regexp_eatQuantifierPrefix(e,t)?(e.eat(63),!0):!1};_t.regexp_eatQuantifierPrefix=function(e,t){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,t)};_t.regexp_eatBracedQuantifier=function(e,t){var n=e.pos;if(e.eat(123)){var r=0,i=-1;if(this.regexp_eatDecimalDigits(e)&&(r=e.lastIntValue,e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(i=e.lastIntValue),e.eat(125)))return i!==-1&&i<r&&!t&&e.raise("numbers out of order in {} quantifier"),!0;e.switchU&&!t&&e.raise("Incomplete quantifier"),e.pos=n}return!1};_t.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)};_t.regexp_eatReverseSolidusAtomEscape=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=t}return!1};_t.regexp_eatUncapturingGroup=function(e){var t=e.pos;if(e.eat(40)){if(e.eat(63)&&e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise("Unterminated group")}e.pos=t}return!1};_t.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(e):e.current()===63&&e.raise("Invalid group"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1};_t.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)};_t.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat"),!1};_t.regexp_eatSyntaxCharacter=function(e){var t=e.current();return TNe(t)?(e.lastIntValue=t,e.advance(),!0):!1};function TNe(e){return e===36||e>=40&&e<=43||e===46||e===63||e>=91&&e<=94||e>=123&&e<=125}_t.regexp_eatPatternCharacters=function(e){for(var t=e.pos,n=0;(n=e.current())!==-1&&!TNe(n);)e.advance();return e.pos!==t};_t.regexp_eatExtendedPatternCharacter=function(e){var t=e.current();return t!==-1&&t!==36&&!(t>=40&&t<=43)&&t!==46&&t!==63&&t!==91&&t!==94&&t!==124?(e.advance(),!0):!1};_t.regexp_groupSpecifier=function(e){if(e.eat(63)){if(this.regexp_eatGroupName(e)){e.groupNames.indexOf(e.lastStringValue)!==-1&&e.raise("Duplicate capture group name"),e.groupNames.push(e.lastStringValue);return}e.raise("Invalid group")}};_t.regexp_eatGroupName=function(e){if(e.lastStringValue="",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise("Invalid capture group name")}return!1};_t.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue="",this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=Qg(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=Qg(e.lastIntValue);return!0}return!1};_t.regexp_eatRegExpIdentifierStart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),u$t(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function u$t(e){return $p(e,!0)||e===36||e===95}_t.regexp_eatRegExpIdentifierPart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),l$t(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function l$t(e){return kw(e,!0)||e===36||e===95||e===8204||e===8205}_t.regexp_eatAtomEscape=function(e){return this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e)?!0:(e.switchU&&(e.current()===99&&e.raise("Invalid unicode escape"),e.raise("Invalid escape")),!1)};_t.regexp_eatBackReference=function(e){var t=e.pos;if(this.regexp_eatDecimalEscape(e)){var n=e.lastIntValue;if(e.switchU)return n>e.maxBackReference&&(e.maxBackReference=n),!0;if(n<=e.numCapturingParens)return!0;e.pos=t}return!1};_t.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise("Invalid named reference")}return!1};_t.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e,!1)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)};_t.regexp_eatCControlLetter=function(e){var t=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=t}return!1};_t.regexp_eatZero=function(e){return e.current()===48&&!I4(e.lookahead())?(e.lastIntValue=0,e.advance(),!0):!1};_t.regexp_eatControlEscape=function(e){var t=e.current();return t===116?(e.lastIntValue=9,e.advance(),!0):t===110?(e.lastIntValue=10,e.advance(),!0):t===118?(e.lastIntValue=11,e.advance(),!0):t===102?(e.lastIntValue=12,e.advance(),!0):t===114?(e.lastIntValue=13,e.advance(),!0):!1};_t.regexp_eatControlLetter=function(e){var t=e.current();return ANe(t)?(e.lastIntValue=t%32,e.advance(),!0):!1};function ANe(e){return e>=65&&e<=90||e>=97&&e<=122}_t.regexp_eatRegExpUnicodeEscapeSequence=function(e,t){t===void 0&&(t=!1);var n=e.pos,r=t||e.switchU;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){var i=e.lastIntValue;if(r&&i>=55296&&i<=56319){var s=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var o=e.lastIntValue;if(o>=56320&&o<=57343)return e.lastIntValue=(i-55296)*1024+(o-56320)+65536,!0}e.pos=s,e.lastIntValue=i}return!0}if(r&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&c$t(e.lastIntValue))return!0;r&&e.raise("Invalid unicode escape"),e.pos=n}return!1};function c$t(e){return e>=0&&e<=1114111}_t.regexp_eatIdentityEscape=function(e){if(e.switchU)return this.regexp_eatSyntaxCharacter(e)?!0:e.eat(47)?(e.lastIntValue=47,!0):!1;var t=e.current();return t!==99&&(!e.switchN||t!==107)?(e.lastIntValue=t,e.advance(),!0):!1};_t.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;var t=e.current();if(t>=49&&t<=57){do e.lastIntValue=10*e.lastIntValue+(t-48),e.advance();while((t=e.current())>=48&&t<=57);return!0}return!1};var CNe=0,Rp=1,Ml=2;_t.regexp_eatCharacterClassEscape=function(e){var t=e.current();if(f$t(t))return e.lastIntValue=-1,e.advance(),Rp;var n=!1;if(e.switchU&&this.options.ecmaVersion>=9&&((n=t===80)||t===112)){e.lastIntValue=-1,e.advance();var r;if(e.eat(123)&&(r=this.regexp_eatUnicodePropertyValueExpression(e))&&e.eat(125))return n&&r===Ml&&e.raise("Invalid property name"),r;e.raise("Invalid property name")}return CNe};function f$t(e){return e===100||e===68||e===115||e===83||e===119||e===87}_t.regexp_eatUnicodePropertyValueExpression=function(e){var t=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var n=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e)){var r=e.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(e,n,r),Rp}}if(e.pos=t,this.regexp_eatLoneUnicodePropertyNameOrValue(e)){var i=e.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(e,i)}return CNe};_t.regexp_validateUnicodePropertyNameAndValue=function(e,t,n){uI(e.unicodeProperties.nonBinary,t)||e.raise("Invalid property name"),e.unicodeProperties.nonBinary[t].test(n)||e.raise("Invalid property value")};_t.regexp_validateUnicodePropertyNameOrValue=function(e,t){if(e.unicodeProperties.binary.test(t))return Rp;if(e.switchV&&e.unicodeProperties.binaryOfStrings.test(t))return Ml;e.raise("Invalid property name")};_t.regexp_eatUnicodePropertyName=function(e){var t=0;for(e.lastStringValue="";INe(t=e.current());)e.lastStringValue+=Qg(t),e.advance();return e.lastStringValue!==""};function INe(e){return ANe(e)||e===95}_t.regexp_eatUnicodePropertyValue=function(e){var t=0;for(e.lastStringValue="";d$t(t=e.current());)e.lastStringValue+=Qg(t),e.advance();return e.lastStringValue!==""};function d$t(e){return INe(e)||I4(e)}_t.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)};_t.regexp_eatCharacterClass=function(e){if(e.eat(91)){var t=e.eat(94),n=this.regexp_classContents(e);return e.eat(93)||e.raise("Unterminated character class"),t&&n===Ml&&e.raise("Negated character class may contain strings"),!0}return!1};_t.regexp_classContents=function(e){return e.current()===93?Rp:e.switchV?this.regexp_classSetExpression(e):(this.regexp_nonEmptyClassRanges(e),Rp)};_t.regexp_nonEmptyClassRanges=function(e){for(;this.regexp_eatClassAtom(e);){var t=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassAtom(e)){var n=e.lastIntValue;e.switchU&&(t===-1||n===-1)&&e.raise("Invalid character class"),t!==-1&&n!==-1&&t>n&&e.raise("Range out of order in character class")}}};_t.regexp_eatClassAtom=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){var n=e.current();(n===99||kNe(n))&&e.raise("Invalid class escape"),e.raise("Invalid escape")}e.pos=t}var r=e.current();return r!==93?(e.lastIntValue=r,e.advance(),!0):!1};_t.regexp_eatClassEscape=function(e){var t=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=t}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)};_t.regexp_classSetExpression=function(e){var t=Rp,n;if(!this.regexp_eatClassSetRange(e))if(n=this.regexp_eatClassSetOperand(e)){n===Ml&&(t=Ml);for(var r=e.pos;e.eatChars([38,38]);){if(e.current()!==38&&(n=this.regexp_eatClassSetOperand(e))){n!==Ml&&(t=Rp);continue}e.raise("Invalid character in character class")}if(r!==e.pos)return t;for(;e.eatChars([45,45]);)this.regexp_eatClassSetOperand(e)||e.raise("Invalid character in character class");if(r!==e.pos)return t}else e.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(e)){if(n=this.regexp_eatClassSetOperand(e),!n)return t;n===Ml&&(t=Ml)}};_t.regexp_eatClassSetRange=function(e){var t=e.pos;if(this.regexp_eatClassSetCharacter(e)){var n=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassSetCharacter(e)){var r=e.lastIntValue;return n!==-1&&r!==-1&&n>r&&e.raise("Range out of order in character class"),!0}e.pos=t}return!1};_t.regexp_eatClassSetOperand=function(e){return this.regexp_eatClassSetCharacter(e)?Rp:this.regexp_eatClassStringDisjunction(e)||this.regexp_eatNestedClass(e)};_t.regexp_eatNestedClass=function(e){var t=e.pos;if(e.eat(91)){var n=e.eat(94),r=this.regexp_classContents(e);if(e.eat(93))return n&&r===Ml&&e.raise("Negated character class may contain strings"),r;e.pos=t}if(e.eat(92)){var i=this.regexp_eatCharacterClassEscape(e);if(i)return i;e.pos=t}return null};_t.regexp_eatClassStringDisjunction=function(e){var t=e.pos;if(e.eatChars([92,113])){if(e.eat(123)){var n=this.regexp_classStringDisjunctionContents(e);if(e.eat(125))return n}else e.raise("Invalid escape");e.pos=t}return null};_t.regexp_classStringDisjunctionContents=function(e){for(var t=this.regexp_classString(e);e.eat(124);)this.regexp_classString(e)===Ml&&(t=Ml);return t};_t.regexp_classString=function(e){for(var t=0;this.regexp_eatClassSetCharacter(e);)t++;return t===1?Rp:Ml};_t.regexp_eatClassSetCharacter=function(e){var t=e.pos;if(e.eat(92))return this.regexp_eatCharacterEscape(e)||this.regexp_eatClassSetReservedPunctuator(e)?!0:e.eat(98)?(e.lastIntValue=8,!0):(e.pos=t,!1);var n=e.current();return n<0||n===e.lookahead()&&h$t(n)||p$t(n)?!1:(e.advance(),e.lastIntValue=n,!0)};function h$t(e){return e===33||e>=35&&e<=38||e>=42&&e<=44||e===46||e>=58&&e<=64||e===94||e===96||e===126}function p$t(e){return e===40||e===41||e===45||e===47||e>=91&&e<=93||e>=123&&e<=125}_t.regexp_eatClassSetReservedPunctuator=function(e){var t=e.current();return m$t(t)?(e.lastIntValue=t,e.advance(),!0):!1};function m$t(e){return e===33||e===35||e===37||e===38||e===44||e===45||e>=58&&e<=62||e===64||e===96||e===126}_t.regexp_eatClassControlLetter=function(e){var t=e.current();return I4(t)||t===95?(e.lastIntValue=t%32,e.advance(),!0):!1};_t.regexp_eatHexEscapeSequence=function(e){var t=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape"),e.pos=t}return!1};_t.regexp_eatDecimalDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;I4(n=e.current());)e.lastIntValue=10*e.lastIntValue+(n-48),e.advance();return e.pos!==t};function I4(e){return e>=48&&e<=57}_t.regexp_eatHexDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;ONe(n=e.current());)e.lastIntValue=16*e.lastIntValue+PNe(n),e.advance();return e.pos!==t};function ONe(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function PNe(e){return e>=65&&e<=70?10+(e-65):e>=97&&e<=102?10+(e-97):e-48}_t.regexp_eatLegacyOctalEscapeSequence=function(e){if(this.regexp_eatOctalDigit(e)){var t=e.lastIntValue;if(this.regexp_eatOctalDigit(e)){var n=e.lastIntValue;t<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=t*64+n*8+e.lastIntValue:e.lastIntValue=t*8+n}else e.lastIntValue=t;return!0}return!1};_t.regexp_eatOctalDigit=function(e){var t=e.current();return kNe(t)?(e.lastIntValue=t-48,e.advance(),!0):(e.lastIntValue=0,!1)};function kNe(e){return e>=48&&e<=55}_t.regexp_eatFixedHexDigits=function(e,t){var n=e.pos;e.lastIntValue=0;for(var r=0;r<t;++r){var i=e.current();if(!ONe(i))return e.pos=n,!1;e.lastIntValue=16*e.lastIntValue+PNe(i),e.advance()}return!0};var wX=function(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new T4(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])},Nn=Ss.prototype;Nn.next=function(e){!e&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new wX(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()};Nn.getToken=function(){return this.next(),new wX(this)};typeof Symbol<"u"&&(Nn[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.getToken();return{done:t.type===W.eof,value:t}}}});Nn.nextToken=function(){var e=this.curContext();if((!e||!e.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(W.eof);if(e.override)return e.override(this);this.readToken(this.fullCharCodeAtPos())};Nn.readToken=function(e){return $p(e,this.options.ecmaVersion>=6)||e===92?this.readWord():this.getTokenFromCode(e)};Nn.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);if(e<=55295||e>=56320)return e;var t=this.input.charCodeAt(this.pos+1);return t<=56319||t>=57344?e:(e<<10)+t-56613888};Nn.skipBlockComment=function(){var e=this.options.onComment&&this.curPosition(),t=this.pos,n=this.input.indexOf("*/",this.pos+=2);if(n===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=n+2,this.options.locations)for(var r=void 0,i=t;(r=eNe(this.input,i,this.pos))>-1;)++this.curLine,i=this.lineStart=r;this.options.onComment&&this.options.onComment(!0,this.input.slice(t+2,n),t,this.pos,e,this.curPosition())};Nn.skipLineComment=function(e){for(var t=this.pos,n=this.options.onComment&&this.curPosition(),r=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!zE(r);)r=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,n,this.curPosition())};Nn.skipSpace=function(){e:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(e>8&&e<14||e>=5760&&tNe.test(String.fromCharCode(e)))++this.pos;else break e}}};Nn.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=e,this.value=t,this.updateContext(n)};Nn.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&e===46&&t===46?(this.pos+=3,this.finishToken(W.ellipsis)):(++this.pos,this.finishToken(W.dot))};Nn.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):e===61?this.finishOp(W.assign,2):this.finishOp(W.slash,1)};Nn.readToken_mult_modulo_exp=function(e){var t=this.input.charCodeAt(this.pos+1),n=1,r=e===42?W.star:W.modulo;return this.options.ecmaVersion>=7&&e===42&&t===42&&(++n,r=W.starstar,t=this.input.charCodeAt(this.pos+2)),t===61?this.finishOp(W.assign,n+1):this.finishOp(r,n)};Nn.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);if(t===e){if(this.options.ecmaVersion>=12){var n=this.input.charCodeAt(this.pos+2);if(n===61)return this.finishOp(W.assign,3)}return this.finishOp(e===124?W.logicalOR:W.logicalAND,2)}return t===61?this.finishOp(W.assign,2):this.finishOp(e===124?W.bitwiseOR:W.bitwiseAND,1)};Nn.readToken_caret=function(){var e=this.input.charCodeAt(this.pos+1);return e===61?this.finishOp(W.assign,2):this.finishOp(W.bitwiseXOR,1)};Nn.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?t===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||mc.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(W.incDec,2):t===61?this.finishOp(W.assign,2):this.finishOp(W.plusMin,1)};Nn.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),n=1;return t===e?(n=e===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+n)===61?this.finishOp(W.assign,n+1):this.finishOp(W.bitShift,n)):t===33&&e===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(t===61&&(n=2),this.finishOp(W.relational,n))};Nn.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return t===61?this.finishOp(W.equality,this.input.charCodeAt(this.pos+2)===61?3:2):e===61&&t===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(W.arrow)):this.finishOp(e===61?W.eq:W.prefix,1)};Nn.readToken_question=function(){var e=this.options.ecmaVersion;if(e>=11){var t=this.input.charCodeAt(this.pos+1);if(t===46){var n=this.input.charCodeAt(this.pos+2);if(n<48||n>57)return this.finishOp(W.questionDot,2)}if(t===63){if(e>=12){var r=this.input.charCodeAt(this.pos+2);if(r===61)return this.finishOp(W.assign,3)}return this.finishOp(W.coalesce,2)}}return this.finishOp(W.question,1)};Nn.readToken_numberSign=function(){var e=this.options.ecmaVersion,t=35;if(e>=13&&(++this.pos,t=this.fullCharCodeAtPos(),$p(t,!0)||t===92))return this.finishToken(W.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+Qg(t)+"'")};Nn.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(W.parenL);case 41:return++this.pos,this.finishToken(W.parenR);case 59:return++this.pos,this.finishToken(W.semi);case 44:return++this.pos,this.finishToken(W.comma);case 91:return++this.pos,this.finishToken(W.bracketL);case 93:return++this.pos,this.finishToken(W.bracketR);case 123:return++this.pos,this.finishToken(W.braceL);case 125:return++this.pos,this.finishToken(W.braceR);case 58:return++this.pos,this.finishToken(W.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(W.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(t===120||t===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(t===111||t===79)return this.readRadixNumber(8);if(t===98||t===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 63:return this.readToken_question();case 126:return this.finishOp(W.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+Qg(e)+"'")};Nn.finishOp=function(e,t){var n=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,n)};Nn.readRegexp=function(){for(var e,t,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var r=this.input.charAt(this.pos);if(mc.test(r)&&this.raise(n,"Unterminated regular expression"),e)e=!1;else{if(r==="[")t=!0;else if(r==="]"&&t)t=!1;else if(r==="/"&&!t)break;e=r==="\\"}++this.pos}var i=this.input.slice(n,this.pos);++this.pos;var s=this.pos,o=this.readWord1();this.containsEsc&&this.unexpected(s);var a=this.regexpState||(this.regexpState=new ih(this));a.reset(n,i,o),this.validateRegExpFlags(a),this.validateRegExpPattern(a);var u=null;try{u=new RegExp(i,o)}catch{}return this.finishToken(W.regexp,{pattern:i,flags:o,value:u})};Nn.readInt=function(e,t,n){for(var r=this.options.ecmaVersion>=12&&t===void 0,i=n&&this.input.charCodeAt(this.pos)===48,s=this.pos,o=0,a=0,u=0,l=t??1/0;u<l;++u,++this.pos){var c=this.input.charCodeAt(this.pos),f=void 0;if(r&&c===95){i&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),a===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),u===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),a=c;continue}if(c>=97?f=c-97+10:c>=65?f=c-65+10:c>=48&&c<=57?f=c-48:f=1/0,f>=e)break;a=c,o=o*e+f}return r&&a===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===s||t!=null&&this.pos-s!==t?null:o};function g$t(e,t){return t?parseInt(e,8):parseFloat(e.replace(/_/g,""))}function $Ne(e){return typeof BigInt!="function"?null:BigInt(e.replace(/_/g,""))}Nn.readRadixNumber=function(e){var t=this.pos;this.pos+=2;var n=this.readInt(e);return n==null&&this.raise(this.start+2,"Expected number in radix "+e),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(n=$Ne(this.input.slice(t,this.pos)),++this.pos):$p(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(W.num,n)};Nn.readNumber=function(e){var t=this.pos;!e&&this.readInt(10,void 0,!0)===null&&this.raise(t,"Invalid number");var n=this.pos-t>=2&&this.input.charCodeAt(t)===48;n&&this.strict&&this.raise(t,"Invalid number");var r=this.input.charCodeAt(this.pos);if(!n&&!e&&this.options.ecmaVersion>=11&&r===110){var i=$Ne(this.input.slice(t,this.pos));return++this.pos,$p(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(W.num,i)}n&&/[89]/.test(this.input.slice(t,this.pos))&&(n=!1),r===46&&!n&&(++this.pos,this.readInt(10),r=this.input.charCodeAt(this.pos)),(r===69||r===101)&&!n&&(r=this.input.charCodeAt(++this.pos),(r===43||r===45)&&++this.pos,this.readInt(10)===null&&this.raise(t,"Invalid number")),$p(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var s=g$t(this.input.slice(t,this.pos),n);return this.finishToken(W.num,s)};Nn.readCodePoint=function(){var e=this.input.charCodeAt(this.pos),t;if(e===123){this.options.ecmaVersion<6&&this.unexpected();var n=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(n,"Code point out of bounds")}else t=this.readHexChar(4);return t};Nn.readString=function(e){for(var t="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var r=this.input.charCodeAt(this.pos);if(r===e)break;r===92?(t+=this.input.slice(n,this.pos),t+=this.readEscapedChar(!1),n=this.pos):r===8232||r===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(zE(r)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(n,this.pos++),this.finishToken(W.string,t)};var RNe={};Nn.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e===RNe)this.readInvalidTemplateToken();else throw e}this.inTemplateElement=!1};Nn.invalidStringToken=function(e,t){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw RNe;this.raise(e,t)};Nn.readTmplToken=function(){for(var e="",t=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(n===96||n===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===W.template||this.type===W.invalidTemplate)?n===36?(this.pos+=2,this.finishToken(W.dollarBraceL)):(++this.pos,this.finishToken(W.backQuote)):(e+=this.input.slice(t,this.pos),this.finishToken(W.template,e));if(n===92)e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(!0),t=this.pos;else if(zE(n)){switch(e+=this.input.slice(t,this.pos),++this.pos,n){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:e+=`
`;break;default:e+=String.fromCharCode(n);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}};Nn.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(W.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")};Nn.readEscapedChar=function(e){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return Qg(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),e){var n=this.pos-1;this.invalidStringToken(n,"Invalid escape sequence in template string")}default:if(t>=48&&t<=55){var r=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],i=parseInt(r,8);return i>255&&(r=r.slice(0,-1),i=parseInt(r,8)),this.pos+=r.length-1,t=this.input.charCodeAt(this.pos),(r!=="0"||t===56||t===57)&&(this.strict||e)&&this.invalidStringToken(this.pos-1-r.length,e?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(i)}return zE(t)?"":String.fromCharCode(t)}};Nn.readHexChar=function(e){var t=this.pos,n=this.readInt(16,e);return n===null&&this.invalidStringToken(t,"Bad character escape sequence"),n};Nn.readWord1=function(){this.containsEsc=!1;for(var e="",t=!0,n=this.pos,r=this.options.ecmaVersion>=6;this.pos<this.input.length;){var i=this.fullCharCodeAtPos();if(kw(i,r))this.pos+=i<=65535?1:2;else if(i===92){this.containsEsc=!0,e+=this.input.slice(n,this.pos);var s=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var o=this.readCodePoint();(t?$p:kw)(o,r)||this.invalidStringToken(s,"Invalid Unicode escape"),e+=Qg(o),n=this.pos}else break;t=!1}return e+this.input.slice(n,this.pos)};Nn.readWord=function(){var e=this.readWord1(),t=W.name;return this.keywords.test(e)&&(t=pX[e]),this.finishToken(t,e)};var y$t="8.11.2";Ss.acorn={Parser:Ss,version:y$t,defaultOptions:iV,Position:_A,SourceLocation:T4,getLineInfo:rNe,Node:C4,TokenType:Kn,tokTypes:W,keywordTypes:pX,TokContext:Sc,tokContexts:fi,isIdentifierChar:kw,isIdentifierStart:$p,Token:wX,isNewLine:zE,lineBreak:mc,lineBreakG:Ukt,nonASCIIwhitespace:tNe};function v$t(e,t){return Ss.parse(e,t)}const EX={undefined:"void(0)",Infinity:"Number.POSITIVE_INFINITY",NaN:"Number.NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2"},_$t={ecmaVersion:11},Ghe="$",b$t="d",w$t="d1",E$t="d2",ro=e=>(t,n)=>n.error(t,e+" not allowed"),x$t=ro("Aggregate function"),S$t=ro("Window function"),T$t="Invalid argument",xX="Invalid column reference",A$t=xX+" (must be input to an aggregate function)",NNe="Invalid function call",C$t="Invalid member expression",I$t="Invalid operator parameter",O$t="Invalid param reference",P$t="Invalid variable reference",k$t="Variable not accessible in operator call",$$t="Unsupported variable declaration",R$t="Unsupported destructuring pattern",DNe="Table expressions do not support closures",LNe="Use aq.escape(fn) to use a function as-is (including closures)",N$t="use table.params({ name: value }) to define dynamic parameters",D$t="use aq.addFunction(name, fn) to add new op functions",L$t=`
Note: ${DNe}. ${LNe}, or ${N$t}.`,MNe=`
Note: ${DNe}. ${LNe}, or ${D$t}.`,M$t=`The ${Gke} method is not valid in multi-table expressions.`;function F$t(e,t){const n=B$t(t);let r=e.root=n;return e.spec=t,e.tuple=null,e.tuple1=null,e.tuple2=null,e.$param=null,e.$op=0,e.scope=new Set,e.paramsRef=new Map,e.columnRef=new Map,$kt(r)?(z$t(r,e),r=r.body):e.join?(e.scope.add(e.tuple1=w$t),e.scope.add(e.tuple2=E$t),e.scope.add(e.$param=Ghe)):(e.scope.add(e.tuple=b$t),e.scope.add(e.$param=Ghe)),Wn(r,e,SX),e.root}function B$t(e){try{const t=e.field?j$t(e):nr(e)?jd(e):e;return v$t(`expr=(${t})`,_$t).body[0].expression.right}catch{vn(`Expression parse error: ${e+""}`)}}function j$t(e){const t=JSON.stringify(e+"");return e.table?`(a,b)=>b[${t}]`:`d=>d[${t}]`}const SX={FunctionDeclaration:ro("Function definitions"),ForStatement:ro("For loops"),ForOfStatement:ro("For-of loops"),ForInStatement:ro("For-in loops"),WhileStatement:ro("While loops"),DoWhileStatement:ro("Do-while loops"),AwaitExpression:ro("Await expressions"),ArrowFunctionExpression:ro("Function definitions"),AssignmentExpression:ro("Assignments"),FunctionExpression:ro("Function definitions"),NewExpression:ro('Use of "new"'),UpdateExpression:ro("Update expressions"),VariableDeclarator(e,t){uV(e.id,t)},Identifier(e,t,n){jNe(e,t,n)&&!t.scope.has(e.name)&&t.error(e,P$t,L$t)},CallExpression(e,t){const n=FNe(e.callee),r=Hke(n)||qke(n);if(r){if((t.join||t.aggregate===!1)&&pK(n)&&x$t(e,t),(t.join||t.window===!1)&&mK(n)&&S$t(e,t),t.$op=1,t.ast)aV(e,n,t),e.arguments.forEach(i=>Wn(i,t,oV));else{const i=t.op(U$t(t,r,n,e.arguments));Object.assign(e,{type:Bke,name:i.id})}return t.$op=0,!1}else Vke(n)?aV(e,n,t):t.error(e,NNe,MNe)},MemberExpression(e,t,n){const{object:r,property:i}=e;if(!ps(Eg,r))return;const{name:s}=r;if(BNe(e)&&ps(Eg,i)&&uf(EX,i.name)){VNe(e,i.name);return}const o=s===t.tuple?0:s===t.tuple1?1:s===t.tuple2?2:-1;if(o>=0)return Yhe(e,o,t,zNe,n);if(s===t.$param)return Yhe(e,o,t,H$t);t.paramsRef.has(s)?wA(e,t.paramsRef.get(s)):t.columnRef.has(s)?UNe(r,s,t,e):uf(t.params,s)&&wA(r,s)}};function Yhe(e,t,n,r,i){const{property:s,computed:o}=e;let a;if(!o)a=s.name;else if(ps(ME,s))a=s.value;else try{Wn(s,n,SX,e),a=n.param(s)}catch{n.error(e,C$t)}return r(e,a,t,n,i),!1}const oV={...SX,VariableDeclarator:ro("Variable declaration in operator call"),Identifier(e,t,n){jNe(e,t,n)&&t.error(e,k$t)},CallExpression(e,t){const n=FNe(e.callee);Vke(n)?aV(e,n,t):t.error(e,NNe,MNe)}};function z$t(e,t){e.generator&&ro("Generator functions")(e,t),e.async&&ro("Async functions")(e,t);const{params:n}=e,r=n.length,i=o=>(a,u)=>t.columnRef.set(a,[u,o]),s=(o,a)=>t.paramsRef.set(o,a);r&&(t.join?(sS(t,n[0],"tuple1",i(1)),r>1&&sS(t,n[1],"tuple2",i(2)),r>2&&sS(t,n[2],"$param",s)):(sS(t,n[0],"tuple",i(0)),r>1&&sS(t,n[1],"$param",s))),t.root=e.body}function sS(e,t,n,r){ps(Eg,t)?(e.scope.add(t.name),e[n]=t.name):ps(Mke,t)&&t.properties.forEach(i=>{const s=ps(Eg,i.key)?i.key.name:ps(ME,i.key)?i.key.value:e.error(i,T$t);ps(Eg,i.value)||e.error(i.value,R$t),r(i.value.name,s)})}function U$t(e,t,n,r){const i=[],s=[],o=t.param[0]||0,a=o+(t.param[1]||0);return r.forEach((u,l)=>{l<o?(Wn(u,e,oV),i.push(e.field(u))):l<a?(Wn(u,e,oV),s.push(e.param(u))):e.error(u,I$t)}),{name:n,fields:i,params:s,...e.spec.window||{}}}function FNe(e){return ps(Eg,e)?e.name:ps(Lke,e)?BNe(e)?V$t(e.property.name):e.property.name:null}function BNe(e){return ps(Eg,e.object)&&e.object.name==="Math"}function V$t(e){return e==="max"?"greatest":e==="min"?"least":e}function jNe(e,t,n){const{name:r}=e;if(!(ps(Lke,n)&&n.property===e)){if(!(ps(Fke,n)&&n.key===e))if(t.paramsRef.has(r))wA(e,t.paramsRef.get(r));else if(t.columnRef.has(r))UNe(e,r,t,n);else if(uf(t.params,r))wA(e,r);else if(uf(EX,r))VNe(e,r);else return!0}}function zNe(e,t,n,r,i){const s=n===0?r.table:n>0?r.join[n-1]:null,o=s&&s.column(t);s&&!o&&r.error(e,xX),r.aggronly&&!r.$op&&r.error(e,A$t),Wke(e,t,n,o,i)}function UNe(e,t,n,r){const[i,s]=n.columnRef.get(t);zNe(e,i,s,n,r)}function H$t(e,t,n,r){r.params&&!uf(r.params,t)&&r.error(e,O$t),wA(e,t)}function wA(e,t){e.type=DCt,e.name=t}function VNe(e,t){e.type=$Ct,e.name=t,e.raw=EX[t]}function aV(e,t,n){if(t===Gke){const r=n.table;r||n.error(e,M$t),Yke(e,e.arguments.length?e.arguments.map(i=>{const s=n.param(i),o=Ca(s)?r.columnName(s):s;return r.column(o)||n.error(i,xX),o}):r.columnNames())}else e.callee={type:NCt,name:t}}function uV(e,t){ps(Eg,e)?t.scope.add(e.name):ps(ICt,e)?e.elements.forEach(n=>uV(n,t)):ps(Mke,e)?e.properties.forEach(n=>uV(n.value,t)):t.error(e.id,$$t)}const q$t={[rI]:1,[Bke]:1};function vu(e,t={}){const n=t.generate||DD,r=t.compiler||gK,i=G$t(t),s={},o={},a=[],u=[];let l=0,c=-1;const f=t.join?r.join:t.index==1?r.expr2:r.expr,d={op(m){const g=W$t(m);return o[g]||(m.id=++c,o[g]=m)},field(m){const g=n(m);return s[g]||(s[g]=++l)},param(m){return ps(ME,m)?m.value:r.param(n(m),i)},value(m,g){a.push(m);const y=g.escape||(t.ast?kkt(g):f(n(g),i));u.push(y),q$t[g.type]&&y!==g&&ea(y)&&(y.field=g.name)},error(m,g,y=""){const v=m.start-6,_=m.end-6,b=String(d.spec).slice(v,_);vn(`${g}: "${b}"${y}`)}};Object.assign(d,t,{params:i});for(const[m,g]of f4(e))d.value(m+"",g.escape?Dkt(d,g,i):F$t(d,g));if(t.ast)return{names:a,exprs:u};const h=[];for(const m in s)h[s[m]]=r.expr(m,i);const p=Object.values(o);return p.forEach(m=>m.fields=m.fields.map(g=>h[g])),{names:a,exprs:u,ops:p}}function W$t(e){let t=`${e.name}(${e.fields.concat(e.params).join(",")})`;if(e.frame){const n=e.frame.map(r=>Number.isFinite(r)?Math.abs(r):-1);t+=`[${n},${!!e.peers}]`}return t}function G$t(e){return(e.table?NB(e.table):e.join?{...NB(e.join[1]),...NB(e.join[0])}:{})||{}}function NB(e){return e&&ei(e.params)?e.params():{}}const HNe="Expr",Tc="ExprList",qNe="ExprNumber",XS="ExprObject",tb="JoinKeys",n3="JoinValues",Il="Options",TX="OrderKeys",wm="SelectionList",Iy="TableRef",nb="TableRefList",Y$t="Descending",K$t="Query",X$t="Selection",Q$t="Verb",J$t="Window";function O4(e,t){return e&&e.expr?new Khe({...e,...t}):new Khe(t,e)}class Khe{constructor(t,n){this.expr=n,Object.assign(this,t)}toString(){return String(this.expr)}toObject(){return{...this,expr:this.toString(),...ei(this.expr)?{func:!0}:{}}}}function Z$t(e){return O4(e,{desc:!0})}function M1(e,t,n=0){const r=n?{field:!0,table:n}:{field:!0};return O4(e,t?{expr:t,...r}:r)}function eRt(e,t,n){return O4(e,{window:{frame:t||[-1/0,0],peers:!!n}})}function tRt(e){const t=n=>n;return t.toString=()=>e,t}function Xhe(e,t){return t=t&&ei(t.query)?t.query():t,t&&ei(t.evaluate)?t.evaluate(null,e):e(t)}function WNe(e){return ea(e)&&(nr(e.all)||nr(e.matches)||nr(e.not)||nr(e.range))}function EA(e){return e&&ei(e.toObject)?e.toObject():ei(e)?{expr:String(e),func:!0}:nr(e)?e.map(EA):ea(e)?x4(e,t=>EA(t)):e}function AX(e){return nr(e)?e.map(AX):ea(e)?nr(e.verbs)?IX.from(e):nr(e.all)?Pw():nr(e.range)?Akt(...e.range):nr(e.match)?Ckt(RegExp(...e.match)):nr(e.not)?XRe(e.not.map(EA)):nRt(e):e}function nRt(e){let t=e,n=e.expr;if(n!=null){if(e.field===!0?t=n=M1(n):e.func===!0&&(t=n=tRt(n)),ea(e.window)){const{frame:r,peers:i}=e.window;t=n=eRt(n,r,i)}e.desc===!0&&(t=Z$t(n))}return e===t?x4(e,r=>AX(r)):t}function rRt(e){return nr(e)?e.map(iRt):e}function iRt(e){const t=[];return gu(e).forEach(n=>{Ca(n)?t.push(n):xo(n)?t.push(M1(n,null)):ea(n)&&n.expr||ei(n)?t.push(n):vn(`Invalid key value: ${n+""}`)}),t}function sRt(e){return nr(e)?e.map(oRt):e}function oRt(e,t){return t<2?gu(e):e}function aRt(e){const t=[];return e.forEach(n=>{const r=n.expr!=null?n.expr:n;if(ea(r)&&!ei(r))for(const i in r)t.push(r[i]);else n=Ca(r)?r:xo(r)?M1(n):ei(r)?n:vn(`Invalid orderby field: ${n+""}`),t.push(n)}),t}const uRt={[HNe]:XNe,[Tc]:$w,[qNe]:pRt,[XS]:Jg,[tb]:mRt,[n3]:gRt,[TX]:$w,[wm]:dRt};function lRt(e,t,n){return t===Iy?Qhe(e):t===nb?e.map(Qhe):GNe(EA(e),t,n)}function GNe(e,t,n){return t===Il?e&&cRt(e,n):uRt[t](e)}function cRt(e,t={}){const n={};for(const r in e){const i=e[r];n[r]=t[r]?GNe(i,t[r]):i}return n}function fRt(e,t){return vu({expr:e},{...t,ast:!0}).exprs[0]}function CX(e){return{type:rI,name:e}}function YNe(e){return{type:rI,index:e}}function Jg(e,t){if(xo(e))return fRt(e,t);if(e.expr){let n;if(e.field===!0?n=CX(e.expr):e.func===!0&&(n=Jg(e.expr,t)),n)return e.desc&&(n={type:Y$t,expr:n}),e.window&&(n={type:J$t,expr:n,...e.window}),n}return Object.keys(e).map(n=>({...Jg(e[n],t),as:n}))}function KNe(e){const t=X$t;return e.all?{type:t,operator:"all"}:e.not?{type:t,operator:"not",arguments:$w(e.not)}:e.range?{type:t,operator:"range",arguments:$w(e.range)}:e.matches?{type:t,operator:"matches",arguments:e.matches}:vn("Invalid input")}function dRt(e){return gu(e).map(hRt).flat()}function hRt(e){return WNe(e)?KNe(e):Ca(e)?YNe(e):xo(e)?CX(e):ea(e)?Object.keys(e).map(t=>({type:rI,name:t,as:e[t]})):vn("Invalid input")}function XNe(e){return WNe(e)?KNe(e):Ca(e)?YNe(e):xo(e)?CX(e):ea(e)?Jg(e):vn("Invalid input")}function $w(e){return gu(e).map(XNe).flat()}function pRt(e){return Ca(e)?e:Jg(e)}function mRt(e){return nr(e)?e.map($w):Jg(e,{join:!0})}function gRt(e){return nr(e)?e.map((t,n)=>n<2?$w(t):Jg(t,{join:!0})):Jg(e,{join:!0})}function Qhe(e){return e&&ei(e.toAST)?e.toAST():e}class QNe{constructor(t,n=[],r=[]){this.verb=t,this.schema=n,n.forEach((i,s)=>{const o=i.type,a=r[s],u=o===tb?rRt(a):o===n3?sRt(a):o===TX?aRt(a):a;this[i.name]=u!==void 0?u:i.default})}static from(t){const n=lV[t.verb],r=(n.schema||[]).map(({name:i})=>AX(t[i]));return n(...r)}evaluate(t,n){const r=this.schema.map(({name:i,type:s})=>{const o=this[i];return s===Iy?Xhe(n,o):s===nb?o.map(a=>Xhe(n,a)):o});return t[this.verb](...r)}toObject(){const t={verb:this.verb};return this.schema.forEach(({name:n})=>{t[n]=EA(this[n])}),t}toAST(){const t={type:Q$t,verb:this.verb};return this.schema.forEach(({name:n,type:r,props:i})=>{t[n]=lRt(this[n],r,i)}),t}}function Ar(e,t){return Object.assign((...n)=>new QNe(e,t,n),{schema:t})}const lV={count:Ar("count",[{name:"options",type:Il}]),derive:Ar("derive",[{name:"values",type:XS},{name:"options",type:Il,props:{before:wm,after:wm}}]),filter:Ar("filter",[{name:"criteria",type:XS}]),groupby:Ar("groupby",[{name:"keys",type:Tc}]),orderby:Ar("orderby",[{name:"keys",type:TX}]),relocate:Ar("relocate",[{name:"columns",type:wm},{name:"options",type:Il,props:{before:wm,after:wm}}]),rename:Ar("rename",[{name:"columns",type:wm}]),rollup:Ar("rollup",[{name:"values",type:XS}]),sample:Ar("sample",[{name:"size",type:qNe},{name:"options",type:Il,props:{weight:HNe}}]),select:Ar("select",[{name:"columns",type:wm}]),ungroup:Ar("ungroup"),unorder:Ar("unorder"),reify:Ar("reify"),dedupe:Ar("dedupe",[{name:"keys",type:Tc,default:[]}]),impute:Ar("impute",[{name:"values",type:XS},{name:"options",type:Il,props:{expand:Tc}}]),fold:Ar("fold",[{name:"values",type:Tc},{name:"options",type:Il}]),pivot:Ar("pivot",[{name:"keys",type:Tc},{name:"values",type:Tc},{name:"options",type:Il}]),spread:Ar("spread",[{name:"values",type:Tc},{name:"options",type:Il}]),unroll:Ar("unroll",[{name:"values",type:Tc},{name:"options",type:Il,props:{drop:Tc}}]),lookup:Ar("lookup",[{name:"table",type:Iy},{name:"on",type:tb},{name:"values",type:Tc}]),join:Ar("join",[{name:"table",type:Iy},{name:"on",type:tb},{name:"values",type:n3},{name:"options",type:Il}]),cross:Ar("cross",[{name:"table",type:Iy},{name:"values",type:n3},{name:"options",type:Il}]),semijoin:Ar("semijoin",[{name:"table",type:Iy},{name:"on",type:tb}]),antijoin:Ar("antijoin",[{name:"table",type:Iy},{name:"on",type:tb}]),concat:Ar("concat",[{name:"tables",type:nb}]),union:Ar("union",[{name:"tables",type:nb}]),intersect:Ar("intersect",[{name:"tables",type:nb}]),except:Ar("except",[{name:"tables",type:nb}])};let IX=class JNe extends xke{constructor(t,n,r){super(n),this._verbs=t||[],this._table=r}static from({verbs:t,table:n,params:r}){return new JNe(t.map(QNe.from),r,n)}get[Symbol.toStringTag](){return this._verbs?`Query: ${this._verbs.length} verbs`+(this._table?` on '${this._table}'`:""):"Object"}get length(){return this._verbs.length}get tableName(){return this._table}params(t){return arguments.length?(this._params={...this._params,...t},this):this._params}evaluate(t,n){t=t||n(this._table);for(const r of this._verbs)t=r.evaluate(t.params(this._params),n);return t}toObject(){return Jhe(this,"toObject")}toJSON(){return this.toObject()}toAST(){return Jhe(this,"toAST",{type:K$t})}};function Jhe(e,t,n){return{...n,verbs:e._verbs.map(r=>r[t]()),...e._params?{params:e._params}:null,...e._table?{table:e._table}:null}}function yRt(e,t){return new IX(e._verbs.concat(t),e._params,e._table)}for(const e in lV){const t=lV[e];IX.prototype["__"+e]=function(n,...r){return yRt(n,t(...r))}}function HE(e,t,...n){const r=["_","$"],i=r.slice(0,n.length);return i.push('"use strict"; const '+n.map((s,o)=>s.map((a,u)=>`${r[o]}${u} = ${r[o]}[${u}]`).join(", ")).join(", ")+`; return (${e}) => ${t};`),Function(...i)(...n)}function vRt(e,t=[]){return e.groupby(t.length?t:e.columnNames()).filter("row_number() === 1").ungroup().reify()}function OX(e,t){const n=_l();return t.forEach((r,i)=>{const s=xo(r)?r:i;if(s){const o=e.column(i)||vn(`Unrecognized column: ${i}`);n.add(s,o)}}),e.create(n)}function ZNe(e,t,{before:n,after:r}={}){const i=n!=null,s=r!=null;i||s||vn("relocate requires a before or after option."),i&&s&&vn("relocate accepts only one of the before or after options."),t=kp(e,t);const o=[...kp(e,i?n:r).keys()],a=i?o[0]:o.pop(),u=new Map;return e.columnNames().forEach(l=>{const c=!t.has(l);if(l===a){s&&c&&u.set(l,l);for(const[f,d]of t)u.set(f,d);if(s)return}c&&u.set(l,l)}),OX(e,u)}function fI(e,t=r=>r,n=""){const r=e.length;if(!r)return"";let i=t(e[0],0);for(let s=1;s<r;++s)i+=n+t(e[s],s);return i}function PX(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function _Rt(e,t=0,n=e.length){let r=n?e[t++]:Xn;for(let i=t;i<n;++i)r>e[i]&&(r=e[i]);return r}function bRt(e,t=0,n=e.length){let r=n?e[t++]:Xn;for(let i=t;i<n;++i)r<e[i]&&(r=e[i]);return r}function xP(e){return hA(e)?e:+e}function wRt(e,t){const n=e.length;if(!n)return Xn;if((t=+t)<=0||n<2)return xP(e[0]);if(t>=1)return xP(e[n-1]);const r=(n-1)*t,i=Math.floor(r),s=xP(e[i]);return hA(s)?s:s+(xP(e[i+1])-s)*(r-i)}class ERt{constructor(t){this._values=t||[],this._sorted=null,this._start=0}values(t){return this._start&&(this._values=this._values.slice(this._start),this._start=0),t?this._values.slice():this._values}add(t){this._values.push(t),this._sorted=null}rem(){this._start+=1,this._sorted=null}min(){return this._sorted&&this._sorted.length?this._sorted[0]:_Rt(this._values,this._start)}max(){return this._sorted&&this._sorted.length?this._sorted[this._sorted.length-1]:bRt(this._values,this._start)}quantile(t){return this._sorted||(this._sorted=this.values(!0),this._sorted.sort(PX)),wRt(this._sorted,t)}}const r3=(e,t,n)=>HE(t,"{"+fI(e,(r,i)=>`_${i}.${n}(${t});`)+"}",e);function xRt(e,t){const{ops:n,output:r}=SRt(e,t),i=e[0].fields,s=i.length,o=s===0?kX:s===1?TRt:s===2?ARt:vn("Unsupported field count: "+s);return new o(i,n,r,t)}function SRt(e,t){const n={},r=[];function i(o,a=[]){const u=o+":"+a;if(n[u])return n[u];const l=Hke(o),c=l.create(...a);return t<0&&l.stream&&l.stream.forEach(f=>i(f,[])),l.req&&l.req.forEach(f=>i(f,[])),n[u]=c,r.push(c),c}const s=e.map(o=>{const a=i(o.name,o.params);return a.output=o.id,a});return{ops:r,output:s}}class kX extends Okt{constructor(t,n,r,i){super(r),this._op=n,this._fields=t,this._stream=!!i}init(){const t={count:0,valid:0,stream:this._stream};return this._op.forEach(n=>n.init(t)),t.values&&(t.list=new ERt),t}write(t,n,r){const i=this._outputs,s=i.length;for(let o=0;o<s;++o)n[i[o].output][r]=i[o].value(t);return 1}_add(){}_rem(){}add(t){++t.count}rem(t){--t.count}}class TRt extends kX{constructor(t,n,r,i){super(t,n,r,i);const s=["state","v1","v2"];this._add=r3(n,s,"add"),this._rem=r3(n,s,"rem")}add(t,n,r){const i=this._fields[0](n,r);++t.count,qc(i)&&(++t.valid,t.list&&t.list.add(i),this._add(t,i))}rem(t,n,r){const i=this._fields[0](n,r);--t.count,qc(i)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i))}}class ARt extends kX{constructor(t,n,r,i){super(t,n,r,i);const s=["state","v1","v2"];this._add=r3(n,s,"add"),this._rem=r3(n,s,"rem")}add(t,n,r){const i=this._fields[0](n,r),s=this._fields[1](n,r);++t.count,qc(i)&&qc(s)&&(++t.valid,t.list&&t.list.add([i,s]),this._add(t,i,s))}rem(t,n,r){const i=this._fields[0](n,r),s=this._fields[1](n,r);--t.count,qc(i)&&qc(s)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i,s))}}function Rv(e,t,n){if(t.length){const r=e.data(),{keys:i}=e.groups()||{},s=qE(e,t),o=i?(a,u)=>s[a][i[u]]:a=>s[a][0];n=n.map(a=>u=>a(u,r,o))}return n}function qE(e,t,n){if(!t.length)return n;const r=eDe(t),i=e.groups(),s=i?i.size:1;return n=n||l4(t.length,()=>Array(s)),s>1?r.forEach(o=>{const a=nDe(e,o,i);for(let u=0;u<s;++u)o.write(a[u],n,u)}):r.forEach(o=>{const a=tDe(e,o);o.write(a,n,0)}),n}function eDe(e,t){const n=[],r={};for(const i of e){const s=i.fields.map(o=>o+"").join(",");(r[s]||(r[s]=[])).push(i)}for(const i in r)n.push(xRt(r[i],t));return n}function tDe(e,t){const n=t.init(),r=e.totalRows(),i=e.data(),s=e.mask();if(e.isOrdered()){const o=e.indices();for(let a=0;a<r;++a)t.add(n,o[a],i)}else if(s)for(let o=s.next(0);o>=0;o=s.next(o+1))t.add(n,o,i);else for(let o=0;o<r;++o)t.add(n,o,i);return n}function nDe(e,t,n){const{keys:r,size:i}=n,s=l4(i,()=>t.init()),o=e.data();if(e.isOrdered()){const a=e.indices(),u=a.length;for(let l=0;l<u;++l){const c=a[l];t.add(s[r[c]],c,o)}}else if(e.isFiltered()){const a=e.mask();for(let u=a.next(0);u>=0;u=a.next(u+1))t.add(s[r[u]],u,o)}else{const a=e.totalRows();for(let u=0;u<a;++u)t.add(s[r[u]],u,o)}return s}function rDe(e,t){const{get:n,names:r,rows:i,size:s}=t,o=r.length;for(let a=0;a<o;++a){const u=e.add(r[a],Array(s)),l=n[a];for(let c=0;c<s;++c)u[c]=l(i[c])}}function iDe(e){return{left(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){const s=r+i>>>1;e(t[s],n)<0?r=s+1:i=s}return r},right(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){const s=r+i>>>1;e(t[s],n)>0?i=s:r=s+1}return r}}}const Zhe=iDe(PX);function CRt(e,t,n,r,i){let s,o,a,u,l;const c=m=>o[m-1]===o[m],f=r.length,d=i.length,h=r.length?HE(["w","r","k"],"{"+fI(r,(m,g)=>`r[_${g}.id][k]=_${g}.value(w,_${g}.get);`)+"}",r):()=>{},p={i0:0,i1:0,index:0,size:0,peer:c,init(m,g,y,v){p.index=p.i0=p.i1=0,p.size=g.length,s=m,o=g,u=y,l=v,a=i?i.map(_=>_.init()):null;for(let _=0;_<f;++_)r[_].init();return p},value(m,g){return g(s[m],e)},step(m){const[g,y]=t,v=p.size,_=p.i0,b=p.i1;p.i0=g!=null?Math.max(0,m-Math.abs(g)):0,p.i1=y!=null?Math.min(v,m+Math.abs(y)+1):v,p.index=m,n&&(p.i0>0&&c(p.i0)&&(p.i0=Zhe.left(o,o[p.i0])),p.i1<v&&c(p.i1)&&(p.i1=Zhe.right(o,o[p.i1-1])));for(let E=0;E<d;++E){const w=i[E],x=a[E];for(let S=_;S<p.i0;++S)w.rem(x,s[S],e);for(let S=b;S<p.i1;++S)w.add(x,s[S],e);w.write(x,u,l)}return h(p,u,l),u}};return p}const IRt=e=>(e.frame||[null,null]).map(t=>Number.isFinite(t)?Math.abs(t):null),ORt=e=>!!e.peers;function PRt(e){const{id:t,name:n,fields:r=[],params:i=[]}=e,s=qke(n).create(...i);return r.length&&(s.get=r[0]),s.id=t,s}function kRt(e,t,n,r={},i){const s=e.data(),o=$Rt(i,s),a=o.length,u=HE(["r","d","op"],"{"+fI(t,(l,c)=>`_${c}[r] = $${c}(r, d, op);`)+"}",t,n);e.partitions().forEach((l,c)=>{const f=l.length,d=RRt(e,l);for(let p=0;p<a;++p)o[p].init(l,d,r,c);const h=p=>r[p][c];for(let p=0;p<f;++p){for(let m=0;m<a;++m)o[m].step(p);u(l[p],s,h)}})}function $Rt(e,t){const n={};return e.forEach(r=>{const i=IRt(r),s=ORt(r),o=`${i},${s}`,{aggOps:a,winOps:u}=n[o]||(n[o]={frame:i,peers:s,aggOps:[],winOps:[]});pK(r.name)?a.push(r):u.push(PRt(r))}),Object.values(n).map(r=>CRt(t,r.frame,r.peers,r.winOps,eDe(r.aggOps,r.frame[0]!=null?-1:1)))}function RRt(e,t){if(e.isOrdered()){const n=e.comparator(),r=e.data(),i=t.length,s=new Uint32Array(i);for(let o=1,a=0;o<i;++o)s[o]=n(t[o-1],t[o],r)?++a:a;return s}else return t}function NRt(e){return mK(e.name)||e.frame&&(Number.isFinite(e.frame[0])||Number.isFinite(e.frame[1]))}function $X(e,{names:t,exprs:n,ops:r},i={}){const s=e.totalRows(),o=_l(i.drop?null:e),a=t.map(d=>o.add(d,Array(s))),[u,l]=DRt(r),c=e.isGrouped()?e.groups().size:1,f=qE(e,u,l4(r.length,()=>Array(c)));return l.length?kRt(e,a,n,f,l):LRt(e,a,n,f),e.create(o)}function DRt(e){const t=[],n=[],r=e.length;for(let i=0;i<r;++i){const s=e[i];s.id=i,(NRt(s)?n:t).push(s)}return[t,n]}function LRt(e,t,n,r){const i=e.mask(),s=e.data(),{keys:o}=e.groups()||{},a=o?(l,c)=>r[l][o[c]]:l=>r[l][0],u=t.length;for(let l=0;l<u;++l){const c=n[l],f=t[l];if(i)for(let d=i.next(0);d>=0;d=i.next(d+1))f[d]=c(d,s,a);else{const d=e.totalRows();for(let h=0;h<d;++h)f[h]=c(h,s,a)}}}function MRt(e,t,n={}){const r=$X(e,vu(t,{table:e}),n);return n.drop||n.before==null&&n.after==null?r:ZNe(r,Object.keys(t).filter(i=>!e.column(i)),n)}function FRt(e,t){if(t.length===0)return e;const n=e.columnNames();return t.reduce((r,i)=>r.antijoin(i.select(n)),e).dedupe()}const SP=2147483648,BRt=4294967295;class sDe{constructor(t){this._size=t,this._bits=new Uint32Array(Math.ceil(t/32))}get length(){return this._size}count(){const t=this._bits.length;let n=0;for(let r=0;r<t;++r)for(let i=this._bits[r];i;++n)i&=i-1;return n}get(t){return this._bits[t>>5]&SP>>>t}set(t){this._bits[t>>5]|=SP>>>t}clear(t){this._bits[t>>5]&=~(SP>>>t)}scan(t){for(let n=this.next(0);n>=0;n=this.next(n+1))t(n)}next(t){const n=this._bits,r=n.length;let i=t>>5,s=n[i]&BRt>>>t;for(;i<r;s=n[++i])if(s!==0)return(i<<5)+Math.clz32(s);return-1}nth(t){let n=this.next(0);for(;t--&&n>=0;)n=this.next(n+1);return n}not(){const t=this._bits,n=t.length;for(let i=0;i<n;++i)t[i]=~t[i];const r=this._size%32;return r&&(t[n-1]&=SP>>r-1),this}and(t){if(t){const n=this._bits,r=t._bits,i=n.length;for(let s=0;s<i;++s)n[s]&=r[s]}return this}or(t){if(t){const n=this._bits,r=t._bits,i=n.length;for(let s=0;s<i;++s)n[s]|=r[s]}return this}}function jRt(e,t){const n=e.totalRows(),r=e.mask(),i=e.data(),s=new sDe(n);if(r)for(let o=r.next(0);o>=0;o=r.next(o+1))t(o,i)&&s.set(o);else for(let o=0;o<n;++o)t(o,i)&&s.set(o);return e.create({filter:s})}function zRt(e,t){const n=vu({p:t},{table:e});let r=n.exprs[0];if(n.ops.length){const{data:i}=$X(e,n,{drop:!0}).column("p");r=s=>i[s]}return jRt(e,r)}function oDe(e,{names:t=[],exprs:n=[],ops:r=[]},i={}){if(!t.length)return e;const s=i.limit>0?+i.limit:1/0,o=i.index?i.index===!0?"index":i.index+"":null,a=new Set(i.drop),u=Rv(e,r,n),l=_l(),c=new Set(t),f=[],d=[],h=[];e.columnNames().forEach(b=>{if(!a.has(b)){const E=l.add(b,[]);c.has(b)||(f.push(e.column(b)),d.push(E))}}),t.forEach(b=>{a.has(b)||(l.has(b)||l.add(b,[]),h.push(l.data[b]))});const p=o?l.add(o,[]):null;let m=0;const g=f.length,y=h.length,v=(b,E)=>{for(let w=0;w<g;++w)d[w].length=m+E,d[w].fill(f[w].get(b),m,m+E)},_=p?(b,E)=>{for(let w=0;w<E;++w)p[b+w]=w}:()=>{};if(y===1){const b=u[0],E=h[0];e.scan((w,x)=>{const S=gu(b(w,x)),I=Math.min(S.length,s);v(w,I);for(let C=0;C<I;++C)E[m+C]=S[C];_(m,I),m+=I})}else e.scan((b,E)=>{let w=0;const x=u.map(S=>{const I=gu(S(b,E));return w=Math.min(Math.max(w,I.length),s),I});v(b,w);for(let S=0;S<y;++S){const I=h[S],C=x[S];for(let O=0;O<w;++O)I[m+O]=C[O]}_(m,w),m+=w});return e.create(l.new())}function URt(e,{names:t=[],exprs:n=[],ops:r=[]},i={}){if(t.length===0)return e;const[s="key",o="value"]=i.as||[],a=Rv(e,r,n);return oDe(e,{names:[s,o],exprs:[()=>t,(u,l)=>a.map(c=>c(u,l))]},{...i,drop:t})}function lf(e,t,n,r={window:!1}){const i=new Map,s=o=>{o=Ca(o)?t.columnName(o):o,xo(o)?i.set(o,M1(o)):ei(o)?kp(t,o).forEach(s):ea(o)?YRe(i,o):vn(`Invalid ${e} value: ${o+""}`)};return gu(n).forEach(s),r.preparse&&r.preparse(i),vu(i,{table:t,...r})}function VRt(e,t,n){return URt(e,lf("fold",e,t),n)}function epe(e,t,n,r){const i=n&&n.length;return HRt(i?qRt(e,n,r):e,t,i)}function HRt(e,{names:t,exprs:n,ops:r},i){const s=Rv(e,r,n),o=i?null:_l(e),a=e.totalRows();return t.forEach((u,l)=>{const c=e.column(u),f=i?c.data:o.add(u,Array(a)),d=s[l];e.scan(h=>{const p=c.get(h);f[h]=qc(p)?p:d(h)})}),i?e:e.create(o)}function qRt(e,t,n){const r=e.groups(),i=e.data(),s=(r?r.names:[]).concat(t),o=(r?r.get:[]).concat(t.map(p=>e.getter(p))),a=new Set,u=LD(o);e.scan((p,m)=>a.add(u(p,m)));const l=e.columnNames(),c=_l(),f=l.map(p=>c.add(p,[]));l.forEach((p,m)=>{const g=i[p],y=f[m];e.scan(v=>y.push(g.get(v)))});const d=LD(o.map((p,m)=>g=>g[m])),h=HE("v","{"+f.map((p,m)=>`_${m}.push(v[$${m}]);`).join("")+"}",f,l.map(p=>s.indexOf(p)));if(r){let p=r.keys.length;const m=n.reduce((y,v)=>y*v.length,r.size),g=new Uint32Array(m+(p-a.size));g.set(r.keys),tpe(r,n,(y,v)=>{a.has(d(y))||(h(y),g[p++]=v[0])}),c.groupby({...r,keys:g})}else tpe(r,n,p=>{a.has(d(p))||h(p)});return e.create(c.new())}function tpe(e,t,n){const r=e?e.get.length:0,i=e?1:0,s=i+t.length,o=new Int32Array(s),a=new Int32Array(s),u=[];if(e){const{get:c,rows:f,size:d}=e;o[0]=d,u.push((h,p)=>{const m=f[p];for(let g=0;g<r;++g)h[g]=c[g](m)})}t.forEach((c,f)=>{const d=f+r;o[f+i]=c.length,u.push((h,p)=>h[d]=c[p])});const l=Array(r+t.length);for(let c=0;c<s;++c)u[c](l,0);n(l,a);for(let c=s-1;c>=0;){const f=++a[c];f<o[c]?(u[c](l,f),n(l,a),c=s-1):(a[c]=0,u[c](l,0),--c)}}function RX(e,{names:t,exprs:n,ops:r}){const i=_l(),s=e.groups();return s&&rDe(i,s),WRt(t,n,s,qE(e,r),i),e.create(i.new())}function WRt(e,t,n,r=[],i){if(!t.length)return;const s=n?n.size:1,o=(u,l)=>r[u][l],a=e.length;for(let u=0;u<a;++u){const l=t[u];if(l.field!=null)i.add(e[u],r[l.field]);else if(s>1){const c=i.add(e[u],Array(s));for(let f=0;f<s;++f)c[f]=l(f,null,o)}else i.add(e[u],[l(0,null,o)])}}function GRt(e,t,n={}){if(t=vu(t,{table:e}),t.names.forEach(r=>e.column(r)?0:vn(`Invalid impute column ${jd(r)}`)),n.expand){const r={preparse:YRt,aggronly:!0},i=lf("impute",e,n.expand,r),s=RX(e.ungroup(),i);return epe(e,t,i.names,i.names.map(o=>s.get(o,0)))}else return epe(e,t)}function YRt(e){e.forEach((t,n)=>t.field?e.set(n,$ke(t+"")):0)}function KRt(e,t){const n=e.columnNames();return t.length?t.reduce((r,i)=>r.semijoin(i.select(n)),e).dedupe():e.reify([])}function aDe(e,t){const n=new Map;return e.scan((r,i)=>{const s=t(r,i);s!=null&&s===s&&n.set(s,r)}),n}function XRt(e,t,n){const r=new Map,i=e.length;for(let s=0;s<i;++s){const o=e[s],a=n(o,t);a!=null&&a===a&&(r.has(a)?r.get(a).push(s):r.set(a,[s]))}return r}function QRt(e,t){const n=["i","a","j","b"];return HE(n,"{"+fI(e,(r,i)=>`_${i}.push($${i}(${n}));`)+"}",e,t)}function JRt(e,t,n,{names:r,exprs:i},s={}){const o=e.data(),a=e.indices(!1),u=a.length,l=new Int32Array(u),c=t.data(),f=t.indices(!1),d=f.length,h=new Int32Array(d),p=r.length,m=_l(),g=Array(p),y=Array(p);for(let b=0;b<r.length;++b)g[b]=m.add(r[b],[]),y[b]=i[b];const v=QRt(g,y);if((nr(n)?eNt:ZRt)(v,n,o,c,a,f,l,h,u,d),s.left)for(let b=0;b<u;++b)l[b]||v(a[b],o,-1,c);if(s.right)for(let b=0;b<d;++b)h[b]||v(-1,o,f[b],c);return e.create(m.new())}function ZRt(e,t,n,r,i,s,o,a,u,l){for(let c=0;c<u;++c){const f=i[c];for(let d=0;d<l;++d){const h=s[d];t(f,n,h,r)&&(e(f,n,h,r),o[c]=1,a[d]=1)}}}function eNt(e,[t,n],r,i,s,o,a,u,l,c){let f,d,h,p,m,g,y,v,_=e;l>=c?(f=r,d=t,h=a,p=s,m=i,g=n,y=u,v=o):(f=i,d=n,h=u,p=o,m=r,g=t,y=a,v=s,_=(w,x,S,I)=>e(S,I,w,x));const b=XRt(v,m,g),E=p.length;for(let w=0;w<E;++w){const x=p[w],S=b.get(d(x,f));if(S){const I=S.length;for(let C=0;C<I;++C){const O=S[C];_(x,f,v[O],m),y[O]=1}h[w]=1}}}function i3(e,t,n){const r=new Map;gu(n).forEach((s,o)=>{s=Ca(s)?t.columnName(s):s,xo(s)?r.set(o,M1(s)):ei(s)||ea(s)&&s.expr?r.set(o,s):vn(`Invalid ${e} key value: ${s+""}`)});const i=vu(r,{table:t,aggregate:!1,window:!1});return LD(i.exprs,!0)}function tNt(e,t){const n=new Set(t);return e.filter(r=>n.has(r))}function NX(e,t,n){if(n)xo(n)?n=[n,n]:nr(n)&&n.length===1&&(n=[n[0],n[0]]);else{const r=tNt(e.columnNames(),t.columnNames());r.length||vn("Natural join requires shared column names."),n=[r,r]}return n}function uDe(e,t,n,r){return n.length!==r.length&&vn("Mismatched number of join keys"),[i3("join",e,n),i3("join",t,r)]}const nNt={aggregate:!1,window:!1},rNt={...nNt,index:1};function npe(e,t,n,r,i={}){n=NX(e,t,n);const s={join:[e,t]};let o;if(nr(n)){const[a,u]=n.map(gu);o=uDe(e,t,a,u),r||(r=iNt(e,a,u,i))}else o=vu({on:n},s).exprs[0],r||(r=[Pw(),Pw()]);return JRt(e,t,o,sNt(e,t,r,s,i&&i.suffix),i)}function iNt(e,t,n,r){const i=[];t.forEach((o,a)=>xo(o)&&o===n[a]?i.push(o):0);const s=XRe(i);if(r.left&&r.right){const o=new Set(i);return[e.columnNames().map(a=>{const u=`[${jd(a)}]`;return o.has(a)?{[a]:`(a, b) => a${u} == null ? b${u} : a${u}`}:a}),s]}return r.right?[s,Pw()]:[Pw(),s]}function sNt(e,t,n,r,i=[]){if(nr(n)){let s,o,a,u=n.length;s=o=a={names:[],exprs:[]},u--&&(s=lf("join",e,n[0],r)),u--&&(o=lf("join",t,n[1],rNt)),u--&&(a=vu(n[2],r));const l=new Set,c=new Set(s.names);return o.names.forEach(f=>{c.has(f)&&l.add(f)}),l.size&&(rpe(s.names,l,i[0]||"_1"),rpe(o.names,l,i[1]||"_2")),{names:s.names.concat(o.names,a.names),exprs:s.exprs.concat(o.exprs,a.exprs)}}else return vu(n,r)}function rpe(e,t,n){e.forEach((r,i)=>t.has(r)?e[i]=r+n:0)}function oNt(e,t,n,r={}){const i=new sDe(e.totalRows());return(nr(n)?aNt:uNt)(i,e,t,n),r.anti&&i.not().and(e.mask()),e.create({filter:i})}function aNt(e,t,n,[r,i]){const s=aDe(n,i);t.scan((o,a)=>{s.get(r(o,a))>=0&&e.set(o)})}function uNt(e,t,n,r){const i=t.numRows(),s=n.numRows(),o=t.data(),a=n.data();if(t.isFiltered()||n.isFiltered()){const u=t.indices(!1),l=n.indices(!1);for(let c=0;c<i;++c){const f=u[c];for(let d=0;d<s;++d)if(r(f,o,l[d],a)){e.set(f);break}}}else for(let u=0;u<i;++u)for(let l=0;l<s;++l)if(r(u,o,l,a)){e.set(u);break}}function ipe(e,t,n,r){n=NX(e,t,n);const i=nr(n)?uDe(e,t,...n.map(gu)):vu({on:n},{join:[e,t]}).exprs[0];return oNt(e,t,i,r)}function lNt(e,t,[n,r],{names:i,exprs:s,ops:o}){const a=_l(e),u=e.totalRows();i.forEach(d=>a.add(d,Array(u).fill(Xn)));const l=aDe(t,r),c=HE(["lr","rr","data"],"{"+fI(i,(d,h)=>`_[${h}][lr] = $[${h}](rr, data);`)+"}",i.map(d=>a.data[d]),Rv(t,o,s)),f=t.data();return e.scan((d,h)=>{const p=l.get(n(d,h));p>=0&&c(d,p,f)}),e.create(a)}function cNt(e,t,n,r){return n=NX(e,t,n),lNt(e,t,[i3("lookup",e,n[0]),i3("lookup",t,n[1])],lf("lookup",t,r))}const cV=(e,t)=>e??t;function fNt(e,t,n,r={}){const{keys:i,keyColumn:s}=dNt(e,t,r),o=cV(r.valueSeparator,"_"),a=n.names.length>1?(l,c)=>c+o+i[l]:l=>i[l],u=i.map(l=>qE(e,n.ops.map(c=>{if(c.name==="count"){const d=h=>l===s[h]?1:NaN;return d.toString=()=>l+":1",{...c,name:"sum",fields:[d]}}const f=c.fields.map(d=>{const h=(p,m)=>l===s[p]?d(p,m):NaN;return h.toString=()=>l+":"+d,h});return{...c,fields:f}})));return e.create(hNt(n,a,e.groups(),u))}function dNt(e,t,n){const r=n.limit>0?+n.limit:1/0,i=cV(n.sort,!0),s=cV(n.keySeparator,"_"),o=Rv(e,t.ops,t.exprs),a=o.length===1?o[0]:(f,d)=>o.map(h=>h(f,d)).join(s),u=Array(e.totalRows());e.scan((f,d)=>u[f]=a(f,d));const l=qE(e.ungroup(),[{id:0,name:"array_agg_distinct",fields:[f=>u[f]],params:[]}])[0][0],c=i?l.sort():l;return{keys:Number.isFinite(r)?c.slice(0,r):c,keyColumn:u}}function hNt({names:e,exprs:t},n,r,i){const s=r?r.size:1,o=_l(),a=i.length,u=e.length;let l;const c=(f,d)=>l[f][d];r&&rDe(o,r);for(let f=0;f<u;++f){const d=t[f];if(d.field!=null)for(let h=0;h<a;++h)o.add(n(h,e[f]),i[h][d.field]);else if(s>1)for(let h=0;h<a;++h){l=i[h];const p=o.add(n(h,e[f]),Array(s));for(let m=0;m<s;++m)p[m]=d(m,null,c)}else for(let h=0;h<a;++h)l=i[h],o.add(n(h,e[f]),[d(0,null,c)])}return o.new()}function pNt(e,t,n,r){return fNt(e,lf("fold",e,t),lf("fold",e,n,{preparse:mNt,aggronly:!0}),r)}function mNt(e){e.forEach((t,n)=>t.field?e.set(n,Oke(t+"")):0)}function gNt(e,t){const n=new Map;return e.columnNames(r=>(n.set(r,r),0)),OX(e,kp(e,t,n))}function spe(e,t){return RX(e,vu(t,{table:e,aggronly:!0,window:!1}))}function yNt(e,t,n,r){return(t?r?_Nt:vNt:r?wNt:bNt)(e.length,e,n,r)}function vNt(e,t,n){const r=n.length;for(let i=0;i<e;++i)t[i]=n[r*LE()|0];return t}function _Nt(e,t,n,r){const i=n.length,s=new Float64Array(i);let o=0;for(let u=0;u<i;++u)s[u]=o+=r(n[u]);const a=iDe(PX).right;for(let u=0;u<e;++u)t[u]=n[a(s,o*LE())];return t}function bNt(e,t,n){const r=n.length;if(e>=r)return n;for(let i=0;i<e;++i)t[i]=n[i];for(let i=e;i<r;++i){const s=i*LE();s<e&&(t[s|0]=n[i])}return t}function wNt(e,t,n,r){const i=n.length;if(e>=i)return n;const s=new Float32Array(i),o=new Uint32Array(i);for(let a=0;a<i;++a)o[a]=a,s[a]=-Math.log(LE())/r(n[a]);o.sort((a,u)=>s[a]-s[u]);for(let a=0;a<e;++a)t[a]=n[o[a]];return t}function ENt(e,t=0,n=e.length){let r=n-(t=+t);for(;r;){const i=LE()*r--|0,s=e[r+t];e[r+t]=e[i+t],e[i+t]=s}return e}function xNt(e,t,n,r={}){const{replace:i,shuffle:s}=r,o=e.partitions(!1);let a=0;t=o.map((c,f)=>{let d=t(f);return a+=d=i?d:Math.min(c.length,d),d});const u=new Uint32Array(a);let l=0;return o.forEach((c,f)=>{const d=t[f],h=u.subarray(l,l+=d);!i&&d===c.length?h.set(c):yNt(h,i,c,n)}),s!==!1&&(o.length>1||!i)&&ENt(u),e.reify(u)}function SNt(e,t,n={}){return xNt(e,TNt(e,t),ANt(e,n.weight),n)}const lDe=e=>t=>e.get(t)||0;function TNt(e,t){return Ca(t)?()=>t:lDe(RX(e,vu({size:t},{table:e,window:!1})).column("size"))}function ANt(e,t){return t==null?null:(t=Ca(t)?e.columnName(t):t,lDe(xo(t)?e.column(t):$X(e,vu({w:t},{table:e}),{drop:!0}).column("w")))}function CNt(e,t){return OX(e,kp(e,t))}function INt(e,{names:t,exprs:n,ops:r=[]},i={}){if(t.length===0)return e;const s=t.length===1&&i.as||[],o=i.drop==null?!0:!!i.drop,a=i.limit==null?s.length||1/0:Math.max(1,+i.limit||1),u=Rv(e,r,n),l=_l(),c=t.reduce((d,h,p)=>d.set(h,p),new Map),f=(d,h)=>{const p=ONt(e,u[d],a),m=p.length;for(let g=0;g<m;++g)l.add(s[g]||`${h}_${g+1}`,p[g])};return e.columnNames().forEach(d=>{c.has(d)?(o||l.add(d,e.column(d)),f(c.get(d),d),c.delete(d)):l.add(d,e.column(d))}),c.forEach(f),e.create(l)}function ONt(e,t,n){const r=e.totalRows(),i=[];return e.scan((s,o)=>{const a=gu(t(s,o)),u=Math.min(a.length,n);for(;i.length<u;)i.push(Array(r).fill(Xn));for(let l=0;l<u;++l)i[l][s]=a[l]}),i}function PNt(e,t,n){return INt(e,lf("spread",e,t),n)}function kNt(e,t){return e.concat(t).dedupe()}function $Nt(e,t,n){return oDe(e,lf("unroll",e,t),n&&n.drop?{...n,drop:lf("unroll",e,n.drop).names}:n)}function RNt(e,t){return e.create({groups:NNt(e,t)})}function NNt(e,{names:t=[],exprs:n=[],ops:r=[]}){const i=t.length;if(i===0)return null;if(i===1&&!e.isFiltered()&&n[0].field){const h=e.column(n[0].field);if(h.groups)return h.groups(t)}let s=Rv(e,r,n);const o=LD(s),a=e.totalRows(),u=new Uint32Array(a),l={},c=[],f=e.data(),d=e.mask();if(d)for(let h=d.next(0);h>=0;h=d.next(h+1)){const p=o(h,f)+"",m=l[p];u[h]=m??(l[p]=c.push(h)-1)}else for(let h=0;h<a;++h){const p=o(h,f)+"",m=l[p];u[h]=m??(l[p]=c.push(h)-1)}return r.length||(s=s.map(h=>p=>h(p,f))),{keys:u,get:s,names:t,rows:c,size:c.length}}function DNt(e,t){return RNt(e,lf("groupby",e,t))}function LNt(e,t){return e.create({order:t})}const MNt=(e,t,n,r)=>`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
    : (u > v || v == null) && u != null ? ${r}
    : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
    : v !== v && u === u ? ${r} : `;function FNt(e,t){const n=[],r=[],i=[];let s=null,o="0",a="0";e.isGrouped()&&(s=e.groups().keys,o="ka",a="kb");const{ops:u}=vu(t,{table:e,value:(h,p)=>{if(n.push(h),p.escape){const m=g=>`fn[${i.length}](${g}, data)`;r.push([m("a"),m("b")]),i.push(p.escape)}else r.push([DD(p,{index:"a",op:o}),DD(p,{index:"b",op:a})])},window:!1}),l=qE(e,u),c=(h,p)=>l[h][p],f=n.length;let d="return (a, b) => {"+(c&&e.isGrouped()?"const ka = keys[a], kb = keys[b];":"")+"let u, v; return ";for(let h=0;h<f;++h){const p=t.get(n[h]).desc?-1:1,[m,g]=r[h];d+=MNt(m,g,-p,p)}return d+="0;};",Function("op","keys","fn","data",d)(c,s,i,e.data())}function BNt(e,t){return LNt(e,jNt(e,t))}function jNt(e,t){let n=-1;const r=new Map,i=s=>r.set(++n+"",s);return t.forEach(s=>{const o=s.expr!=null?s.expr:s;if(ea(o)&&!ei(o))for(const a in o)i(o[a]);else i(Ca(o)?M1(s,e.columnName(o)):xo(o)?M1(s):ei(o)?s:vn(`Invalid orderby field: ${s+""}`))}),FNt(e,r)}function zNt(e,t){const n=e.numRows(),r=n+t.reduce((o,a)=>o+a.numRows(),0);if(n===r)return e;const i=[e,...t],s=_l();return e.columnNames().forEach(o=>{const a=Array(r);let u=0;i.forEach(l=>{const c=l.column(o)||{get:()=>Xn};l.scan(f=>a[u++]=c.get(f))}),s.add(o,a)}),e.create(s.new())}function UNt(e,t){const n=_l(),r=e.groups(),{get:i,names:s=[],rows:o,size:a=1}=r||{},u=new Uint32Array(a+1);s.forEach(d=>n.add(d,null));const l=r?nDe(e,t,r):[tDe(e,t)];t.outputs().map(d=>n.add(d,[]));const c=u.length-1;let f=0;for(let d=0;d<c;++d)f+=u[d+1]=t.write(l[d],n.data,u[d]);if(r){const d=e.data();s.forEach((h,p)=>{const m=n.data[h]=Array(f),g=i[p];for(let y=0,v=0;y<a;++y)m.fill(g(o[y],d),v,v+=u[y+1])})}return e.create(n.new())}function VNt(e){return e.isGrouped()?e.create({groups:null}):e}function HNt(e){return e.isOrdered()?e.create({order:null}):e}const qNt={__antijoin:(e,t,n)=>ipe(e,t,n,{anti:!0}),__count:(e,t={})=>spe(e,{[t.as||"count"]:Pke()}),__cross:(e,t,n,r)=>npe(e,t,()=>!0,n,{...r,left:!0,right:!0}),__concat:zNt,__dedupe:vRt,__derive:MRt,__except:FRt,__filter:zRt,__fold:VRt,__impute:GRt,__intersect:KRt,__join:npe,__lookup:cNt,__pivot:pNt,__relocate:ZNe,__rename:gNt,__rollup:spe,__sample:SNt,__select:CNt,__semijoin:ipe,__spread:PNt,__union:kNt,__unroll:$Nt,__groupby:DNt,__orderby:BNt,__ungroup:VNt,__unorder:HNt,__reduce:UNt};Object.assign(jh.prototype,qNt);function WNt(e,t){return jh.from(e,t)}function DB(e){return O4(e,{escape:!0,toString(){vn("Escaped values can not be serialized.")}})}jh.prototype;function GNt(){const e=new Map;return{listen(t,n){return e.has(t)||e.set(t,[]),e.get(t).push(n),()=>{e.set(t,(e.get(t)||[]).filter(r=>r!==n))}},fire(t,n){const r=e.get(t);r&&r.forEach(i=>i(n))}}}let TP;const YNt=new Uint8Array(16);function KNt(){if(!TP&&(TP=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!TP))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return TP(YNt)}const Zs=[];for(let e=0;e<256;++e)Zs.push((e+256).toString(16).slice(1));function XNt(e,t=0){return(Zs[e[t+0]]+Zs[e[t+1]]+Zs[e[t+2]]+Zs[e[t+3]]+"-"+Zs[e[t+4]]+Zs[e[t+5]]+"-"+Zs[e[t+6]]+Zs[e[t+7]]+"-"+Zs[e[t+8]]+Zs[e[t+9]]+"-"+Zs[e[t+10]]+Zs[e[t+11]]+Zs[e[t+12]]+Zs[e[t+13]]+Zs[e[t+14]]+Zs[e[t+15]]).toLowerCase()}const QNt=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),ope={randomUUID:QNt};function ape(e,t,n){if(ope.randomUUID&&!t&&!e)return ope.randomUUID();e=e||{};const r=e.random||(e.rng||KNt)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){n=n||0;for(let i=0;i<16;++i)t[n+i]=r[i];return t}return XNt(r)}let Ad=class{static get(){let t=ape();for(;this.ids.has(t);)t=ape();return this.ids.set(t,!0),t}};Ad.ids=new Map;function Cd(e){return"parent"in e}function JNt(e){const{label:t=void 0,state:n,initialArtifact:r,initialMetadata:i}=e,s={annotation:[],bookmark:[]},o=Object.keys(i||{}).reduce((u,l)=>(u[l]=[],i&&i[l]&&u[l].push({type:l,id:Ad.get(),val:i[l],createdOn:Date.now()}),u),s),a=r?[{id:Ad.get(),createdOn:Date.now(),val:r}]:[];return{id:Ad.get(),label:t||"Root",event:"Root",children:[],level:0,createdOn:Date.now(),meta:o,artifacts:a,state:{type:"checkpoint",val:n}}}function ZNt({parent:e,state:t,label:n,sideEffects:r={do:[],undo:[]},initialMetadata:i,initialArtifact:s,event:o}){const a={annotation:[],bookmark:[]},u=Object.keys(i||{}).reduce((c,f)=>(c[f]=[],i&&i[f]&&c[f].push({type:f,id:Ad.get(),val:i[f],createdOn:Date.now()}),c),a),l=s?[{id:Ad.get(),createdOn:Date.now(),val:s}]:[];return{id:Ad.get(),label:n,event:o,children:[],parent:e.id,createdOn:Date.now(),meta:u,artifacts:l,sideEffects:r,state:t,level:e.level+1}}function ki(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if({}.NODE_ENV!=="production"){var i=uDt[e],s=i?typeof i=="function"?i.apply(null,n):i:"unknown error nr: "+e;throw Error("[Immer] "+s)}throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(o){return"'"+o+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function F1(e){return!!e&&!!e[ol]}function Zg(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===lDt}(e)||Array.isArray(e)||!!e[JT]||!!(!((t=e.constructor)===null||t===void 0)&&t[JT])||P4(e)||k4(e))}function Rw(e,t,n){n===void 0&&(n=!1),e0(e)===0?(n?Object.keys:jX)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function e0(e){var t=e[ol];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:P4(e)?2:k4(e)?3:0}function xA(e,t){return e0(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function u$(e,t){return e0(e)===2?e.get(t):e[t]}function cDe(e,t,n){var r=e0(e);r===2?e.set(t,n):r===3?(e.delete(t),e.add(n)):e[t]=n}function eDt(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function P4(e){return oDt&&e instanceof Map}function k4(e){return aDt&&e instanceof Set}function vy(e){return e.o||e.t}function DX(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=cDt(e);delete t[ol];for(var n=jX(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function LX(e,t){return t===void 0&&(t=!1),MX(e)||F1(e)||!Zg(e)||(e0(e)>1&&(e.set=e.add=e.clear=e.delete=tDt),Object.freeze(e),t&&Rw(e,function(n,r){return LX(r,!0)},!0)),e}function tDt(){ki(2)}function MX(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function Id(e){var t=pV[e];return t||ki(18,e),t}function nDt(e,t){pV[e]||(pV[e]=t)}function upe(){return{}.NODE_ENV==="production"||Nw||ki(0),Nw}function LB(e,t){t&&(Id("Patches"),e.u=[],e.s=[],e.v=t)}function s3(e){fV(e),e.p.forEach(rDt),e.p=null}function fV(e){e===Nw&&(Nw=e.l)}function lpe(e){return Nw={p:[],l:Nw,h:e,m:!0,_:0}}function rDt(e){var t=e[ol];t.i===0||t.i===1?t.j():t.O=!0}function MB(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.g||Id("ES5").S(t,e,r),r?(n[ol].P&&(s3(t),ki(4)),Zg(e)&&(e=o3(t,e),t.l||a3(t,e)),t.u&&Id("Patches").M(n[ol].t,e,t.u,t.s)):e=o3(t,n,[]),s3(t),t.u&&t.v(t.u,t.s),e!==BX?e:void 0}function o3(e,t,n){if(MX(t))return t;var r=t[ol];if(!r)return Rw(t,function(s,o){return cpe(e,r,t,s,o,n)},!0),t;if(r.A!==e)return t;if(!r.P)return a3(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=DX(r.k):r.o;Rw(r.i===3?new Set(i):i,function(s,o){return cpe(e,r,i,s,o,n)}),a3(e,i,!1),n&&e.u&&Id("Patches").R(r,n,e.u,e.s)}return r.o}function cpe(e,t,n,r,i,s){if({}.NODE_ENV!=="production"&&i===n&&ki(5),F1(i)){var o=o3(e,i,s&&t&&t.i!==3&&!xA(t.D,r)?s.concat(r):void 0);if(cDe(n,r,o),!F1(o))return;e.m=!1}if(Zg(i)&&!MX(i)){if(!e.h.F&&e._<1)return;o3(e,i),t&&t.A.l||a3(e,i)}}function a3(e,t,n){n===void 0&&(n=!1),e.h.F&&e.m&&LX(t,n)}function FB(e,t){var n=e[ol];return(n?vy(n):e)[t]}function fpe(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function dV(e){e.P||(e.P=!0,e.l&&dV(e.l))}function BB(e){e.o||(e.o=DX(e.t))}function hV(e,t,n){var r=P4(t)?Id("MapSet").N(t,n):k4(t)?Id("MapSet").T(t,n):e.g?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:upe(),P:!1,I:!1,D:{},l:s,t:i,k:null,o:null,j:null,C:!1},u=a,l=mV;o&&(u=[a],l=QS);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return a.k=d,a.j=f,d}(t,n):Id("ES5").J(t,n);return(n?n.A:upe()).p.push(r),r}function iDt(e){return F1(e)||ki(22,e),function t(n){if(!Zg(n))return n;var r,i=n[ol],s=e0(n);if(i){if(!i.P&&(i.i<4||!Id("ES5").K(i)))return i.t;i.I=!0,r=dpe(n,s),i.I=!1}else r=dpe(n,s);return Rw(r,function(o,a){i&&u$(i.t,o)===a||cDe(r,o,t(a))}),s===3?new Set(r):r}(e)}function dpe(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return DX(e)}function sDt(){function e(r){if(!Zg(r))return r;if(Array.isArray(r))return r.map(e);if(P4(r))return new Map(Array.from(r.entries()).map(function(o){return[o[0],e(o[1])]}));if(k4(r))return new Set(Array.from(r).map(e));var i=Object.create(Object.getPrototypeOf(r));for(var s in r)i[s]=e(r[s]);return xA(r,JT)&&(i[JT]=r[JT]),i}function t(r){return F1(r)?e(r):r}var n="add";nDt("Patches",{$:function(r,i){return i.forEach(function(s){for(var o=s.path,a=s.op,u=r,l=0;l<o.length-1;l++){var c=e0(u),f=""+o[l];c!==0&&c!==1||f!=="__proto__"&&f!=="constructor"||ki(24),typeof u=="function"&&f==="prototype"&&ki(24),typeof(u=u$(u,f))!="object"&&ki(15,o.join("/"))}var d=e0(u),h=e(s.value),p=o[o.length-1];switch(a){case"replace":switch(d){case 2:return u.set(p,h);case 3:ki(16);default:return u[p]=h}case n:switch(d){case 1:return p==="-"?u.push(h):u.splice(p,0,h);case 2:return u.set(p,h);case 3:return u.add(h);default:return u[p]=h}case"remove":switch(d){case 1:return u.splice(p,1);case 2:return u.delete(p);case 3:return u.delete(s.value);default:return delete u[p]}default:ki(17,a)}}),r},R:function(r,i,s,o){switch(r.i){case 0:case 4:case 2:return function(a,u,l,c){var f=a.t,d=a.o;Rw(a.D,function(h,p){var m=u$(f,h),g=u$(d,h),y=p?xA(f,h)?"replace":n:"remove";if(m!==g||y!=="replace"){var v=u.concat(h);l.push(y==="remove"?{op:y,path:v}:{op:y,path:v,value:g}),c.push(y===n?{op:"remove",path:v}:y==="remove"?{op:n,path:v,value:t(m)}:{op:"replace",path:v,value:t(m)})}})}(r,i,s,o);case 5:case 1:return function(a,u,l,c){var f=a.t,d=a.D,h=a.o;if(h.length<f.length){var p=[h,f];f=p[0],h=p[1];var m=[c,l];l=m[0],c=m[1]}for(var g=0;g<f.length;g++)if(d[g]&&h[g]!==f[g]){var y=u.concat([g]);l.push({op:"replace",path:y,value:t(h[g])}),c.push({op:"replace",path:y,value:t(f[g])})}for(var v=f.length;v<h.length;v++){var _=u.concat([v]);l.push({op:n,path:_,value:t(h[v])})}f.length<h.length&&c.push({op:"replace",path:u.concat(["length"]),value:f.length})}(r,i,s,o);case 3:return function(a,u,l,c){var f=a.t,d=a.o,h=0;f.forEach(function(p){if(!d.has(p)){var m=u.concat([h]);l.push({op:"remove",path:m,value:p}),c.unshift({op:n,path:m,value:p})}h++}),h=0,d.forEach(function(p){if(!f.has(p)){var m=u.concat([h]);l.push({op:n,path:m,value:p}),c.unshift({op:"remove",path:m,value:p})}h++})}(r,i,s,o)}},M:function(r,i,s,o){s.push({op:"replace",path:[],value:i===BX?void 0:i}),o.push({op:"replace",path:[],value:r})}})}var hpe,Nw,FX=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",oDt=typeof Map<"u",aDt=typeof Set<"u",ppe=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",BX=FX?Symbol.for("immer-nothing"):((hpe={})["immer-nothing"]=!0,hpe),JT=FX?Symbol.for("immer-draftable"):"__$immer_draftable",ol=FX?Symbol.for("immer-state"):"__$immer_state",uDt={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(e){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+e},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(e){return"Cannot apply patch, path doesn't resolve: "+e},16:'Sets cannot have "replace" patches.',17:function(e){return"Unsupported patch operation: "+e},18:function(e){return"The plugin for '"+e+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+e+"()` when initializing your application."},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(e){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+e+"'"},22:function(e){return"'current' expects a draft, got: "+e},23:function(e){return"'original' expects a draft, got: "+e},24:"Patching reserved attributes like __proto__, prototype and constructor is not allowed"},lDt=""+Object.prototype.constructor,jX=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,cDt=Object.getOwnPropertyDescriptors||function(e){var t={};return jX(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},pV={},mV={get:function(e,t){if(t===ol)return e;var n=vy(e);if(!xA(n,t))return function(i,s,o){var a,u=fpe(s,o);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!Zg(r)?r:r===FB(e.t,t)?(BB(e),e.o[t]=hV(e.A.h,r,e)):r},has:function(e,t){return t in vy(e)},ownKeys:function(e){return Reflect.ownKeys(vy(e))},set:function(e,t,n){var r=fpe(vy(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=FB(vy(e),t),s=i==null?void 0:i[ol];if(s&&s.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(eDt(n,i)&&(n!==void 0||xA(e.t,t)))return!0;BB(e),dV(e)}return e.o[t]===n&&typeof n!="number"&&(n!==void 0||t in e.o)||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return FB(e.t,t)!==void 0||t in e.t?(e.D[t]=!1,BB(e),dV(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=vy(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){ki(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){ki(12)}},QS={};Rw(mV,function(e,t){QS[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),QS.deleteProperty=function(e,t){return{}.NODE_ENV!=="production"&&isNaN(parseInt(t))&&ki(13),QS.set.call(this,e,t,void 0)},QS.set=function(e,t,n){return{}.NODE_ENV!=="production"&&t!=="length"&&isNaN(parseInt(t))&&ki(14),mV.set.call(this,e[0],t,n,e[0])};var fDt=function(){function e(n){var r=this;this.g=ppe,this.F=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var u=r;return function(m){var g=this;m===void 0&&(m=a);for(var y=arguments.length,v=Array(y>1?y-1:0),_=1;_<y;_++)v[_-1]=arguments[_];return u.produce(m,function(b){var E;return(E=s).call.apply(E,[g,b].concat(v))})}}var l;if(typeof s!="function"&&ki(6),o!==void 0&&typeof o!="function"&&ki(7),Zg(i)){var c=lpe(r),f=hV(r,i,void 0),d=!0;try{l=s(f),d=!1}finally{d?s3(c):fV(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(m){return LB(c,o),MB(m,c)},function(m){throw s3(c),m}):(LB(c,o),MB(l,c))}if(!i||typeof i!="object"){if((l=s(i))===void 0&&(l=i),l===BX&&(l=void 0),r.F&&LX(l,!0),o){var h=[],p=[];Id("Patches").M(i,l,h,p),o(h,p)}return l}ki(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(f))})};var o,a,u=r.produce(i,s,function(l,c){o=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,o,a]}):[u,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){Zg(n)||ki(8),F1(n)&&(n=iDt(n));var r=lpe(this),i=hV(this,n,void 0);return i[ol].C=!0,fV(r),i},t.finishDraft=function(n,r){var i=n&&n[ol];({}).NODE_ENV!=="production"&&(i&&i.C||ki(9),i.I&&ki(10));var s=i.A;return LB(s,r),MB(void 0,s)},t.setAutoFreeze=function(n){this.F=n},t.setUseProxies=function(n){n&&!ppe&&ki(20),this.g=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=Id("Patches").$;return F1(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),al=new fDt,dDt=al.produce;al.produceWithPatches.bind(al);al.setAutoFreeze.bind(al);al.setUseProxies.bind(al);al.applyPatches.bind(al);al.createDraft.bind(al);al.finishDraft.bind(al);function hDt(e,t={}){const{artifact:n=void 0,metadata:r=void 0,rootLabel:i="Root"}=t,s=JNt({state:e,label:i,initialArtifact:n,initialMetadata:r}),o={nodes:{[s.id]:s},root:s.id,current:s.id};return xCe({name:"provenance-graph",initialState:o,reducers:{addMetadata(a,u){const{id:l,meta:c}=u.payload,f=a.nodes[l].meta,d=Object.keys(c).reduce((h,p)=>(h[p]||(h[p]=[]),h[p].push({type:p,id:Ad.get(),val:c[p],createdOn:Date.now()}),h),f);a.nodes[u.payload.id].meta=d},addArtifact(a,u){a.nodes[u.payload.id].artifacts.push({id:Ad.get(),createdOn:Date.now(),val:u.payload.artifact})},changeCurrent(a,u){a.current=u.payload},addNode(a,{payload:u}){a.nodes[u.id]=u,a.nodes[u.parent].children.push(u.id),a.current=u.id},load(a,{payload:u}){return u}}})}function pDt(e){const t=new Map,{reducer:n,actions:r,getInitialState:i}=hDt(e),s=Wdt();s.startListening({matcher:hce(r.changeCurrent,r.addNode),effect:(a,u)=>{u.cancelActiveListeners(),t.forEach(l=>{const c=hce(r.addNode)(a),{skipOnNew:f}=l.config;f&&c||l.func(c?"new":"traversal")})}});const o=wCe({reducer:n,middleware:a=>a().prepend(s.middleware)});return{initialState:i(),get backend(){return o.getState()},get current(){return o.getState().nodes[o.getState().current]},get root(){return o.getState().nodes[o.getState().root]},currentChange(a,u){const l={id:Ad.get(),func:a,config:u};return t.set(l.id,l),()=>t.delete(l.id)},update:o.dispatch,...r}}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var mDt=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),gDt=Object.prototype.hasOwnProperty;function gV(e,t){return gDt.call(e,t)}function yV(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)gV(e,i)&&r.push(i);return r}function su(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function vV(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function _y(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function fDe(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function _V(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(_V(e[t]))return!0}else if(typeof e=="object"){for(var r=yV(e),i=r.length,s=0;s<i;s++)if(_V(e[r[s]]))return!0}}return!1}function mpe(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var dDe=function(e){mDt(t,e);function t(n,r,i,s,o){var a=this.constructor,u=e.call(this,mpe(n,{name:r,index:i,operation:s,tree:o}))||this;return u.name=r,u.index=i,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=mpe(n,{name:r,index:i,operation:s,tree:o}),u}return t}(Error),Ai=dDe,yDt=su,rb={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=u3(n,this.path);r&&(r=su(r));var i=d1(n,{op:"remove",path:this.from}).removed;return d1(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=u3(n,this.from);return d1(n,{op:"add",path:this.path,value:su(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:SA(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},vDt={add:function(e,t,n){return vV(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:rb.move,copy:rb.copy,test:rb.test,_get:rb._get};function u3(e,t){if(t=="")return e;var n={op:"_get",path:t};return d1(e,n),n.value}function d1(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):l3(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=u3(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=SA(e,t.value),o.test===!1)throw new Ai("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new Ai("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=su(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=l3;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=fDe(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!vV(h))throw new Ai("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);vV(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new Ai("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=vDt[t.op].call(t,l,h,e);if(o.test===!1)throw new Ai("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=f){var o=rb[t.op].call(t,l,h,e);if(o.test===!1)throw new Ai("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new Ai("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function $4(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new Ai("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=su(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=d1(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function _Dt(e,t,n){var r=d1(e,t);if(r.test===!1)throw new Ai("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function l3(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new Ai("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(rb[e.op]){if(typeof e.path!="string")throw new Ai("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Ai('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Ai("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Ai("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&_V(e.value))throw new Ai("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new Ai("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new Ai("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=hDe([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new Ai("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Ai("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function hDe(e,t,n){try{if(!Array.isArray(e))throw new Ai("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)$4(su(t),su(e),n||!0);else{n=n||l3;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof Ai)return i;throw i}}function SA(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!SA(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!SA(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const bDt=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:Ai,_areEquals:SA,applyOperation:d1,applyPatch:$4,applyReducer:_Dt,deepClone:yDt,getValueByPointer:u3,validate:hDe,validator:l3},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var zX=new WeakMap,wDt=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),EDt=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function xDt(e){return zX.get(e)}function SDt(e,t){return e.observers.get(t)}function TDt(e,t){e.observers.delete(t.callback)}function ADt(e,t){t.unobserve()}function CDt(e,t){var n=[],r,i=xDt(e);if(!i)i=new wDt(e),zX.set(e,i);else{var s=SDt(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=su(e),t){r.callback=t,r.next=null;var o=function(){bV(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){bV(r),clearTimeout(r.next),TDt(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new EDt(t,r)),r}function bV(e,t){t===void 0&&(t=!1);var n=zX.get(e.object);UX(n.value,e.object,e.patches,"",t),e.patches.length&&$4(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function UX(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=yV(t),o=yV(e),a=!1,u=o.length-1;u>=0;u--){var l=o[u],c=e[l];if(gV(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?UX(c,f,n,r+"/"+_y(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+_y(l),value:su(c)}),n.push({op:"replace",path:r+"/"+_y(l),value:su(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+_y(l),value:su(c)}),n.push({op:"remove",path:r+"/"+_y(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var u=0;u<s.length;u++){var l=s[u];!gV(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+_y(l),value:su(t[l])})}}}function pDe(e,t,n){n===void 0&&(n=!1);var r=[];return UX(e,t,r,"",n),r}const IDt=Object.freeze(Object.defineProperty({__proto__:null,compare:pDe,generate:bV,observe:CDt,unobserve:ADt},Symbol.toStringTag,{value:"Module"}));Object.assign({},bDt,IDt,{JsonPatchError:dDe,deepClone:su,escapePathComponent:_y,unescapePathComponent:fDe});var JS=(e=>(e.TRAVERSAL_START="Traversal_Start",e.TRAVERSAL_END="Traversal_End",e))(JS||{});function l$(e,t){const n=e.state;if(n.type==="checkpoint")return n.val;const{checkpointRef:r}=n,i=t[r],s=gDe(i,e,t);s.shift();const o=s.map(u=>t[u]).map(u=>u.state.val).reduce((u,l)=>[...u,...l],[]),a=l$(i,t);return $4(a,su(o),!0,!1).newDocument}function ODt(e,t){const n=Object.keys(e).length;return new Set(t.map(r=>r.path.split("/")[0])).size<n/2?"patch":"checkpoint"}function mDe({registry:e,initialState:t}){let n=!1;const r=GNt(),i=pDt(t);function s(c){return i.backend.nodes[c]}r.listen(JS.TRAVERSAL_START,()=>{n=!0}),r.listen(JS.TRAVERSAL_END,()=>{n=!1});const o={add(c,f=i.current.id){i.update(i.addMetadata({id:f,meta:c}))},latestOfType(c,f=i.current.id){var d;return(d=i.backend.nodes[f].meta[c])==null?void 0:d.at(-1)},allOfType(c,f=i.current.id){return i.backend.nodes[f].meta[c]},latest(c=i.current.id){const f=i.backend.nodes[c].meta,d=Object.keys(f).reduce((h,p)=>{const m=f[p].at(-1);return m&&(h[p]=m),h},{});return Object.keys(d).length>0?d:void 0},all(c=i.current.id){return i.backend.nodes[c].meta},types(c=i.current.id){return Object.keys(i.backend.nodes[c].meta)}},a={add(c,f=i.current.id){i.update(i.addArtifact({id:f,artifact:c}))},latest(c=i.current.id){return i.backend.nodes[c].artifacts.at(-1)},all(c=i.current.id){return i.backend.nodes[c].artifacts}},u={add(c,f=i.current.id){o.add({annotation:c},f)},latest(c=i.current.id){var f;return(f=o.latestOfType("annotation",c))==null?void 0:f.val},all(c=i.current.id){var f;return(f=o.allOfType("annotation",c))==null?void 0:f.map(d=>d.val)}},l={add(c=i.current.id){o.add({bookmark:!0},c)},remove(c=i.current.id){o.add({bookmark:!1},c)},is(c=i.current.id){var f;return!!((f=o.latestOfType("bookmark",c))!=null&&f.val)},toggle(c=i.current.id){l.is(c)?l.remove(c):l.add(c)}};return{registry:e,get isTraversing(){return n},getState(c=i.current){return l$(c,i.backend.nodes)},graph:i,get current(){return i.current},get root(){return i.root},record({label:c,state:f,sideEffects:d,eventType:h,onlySideEffects:p=!1}){let m=null,g=null;const y=l$(this.current,this.graph.backend.nodes);if(p)g={type:"checkpoint",val:f};else{const v=pDe(y,f);if(ODt(f,v)==="checkpoint")g={type:"checkpoint",val:f};else{const _=this.current.state.type==="checkpoint"?this.current.id:this.current.state.checkpointRef;g={type:"patch",val:v,checkpointRef:_}}}if(!g)throw new Error(`Could not calculate new state. Previous state is: ${JSON.stringify(this.current.state,null,2)}`);if(m=ZNt({label:c,state:g,parent:this.current,sideEffects:d,event:h}),!m)throw new Error("State Node creation failed!");i.update(i.addNode(m))},async apply(c,f){const d=e.get(f.type),h=l$(this.current,this.graph.backend.nodes);if(d.config.hasSideEffects){const{do:p=f,undo:m}=d.func(f.payload);this.record({label:c,state:h,sideEffects:{do:[p],undo:[m]},eventType:d.config.eventType})}else{const p=d.func(h,f.payload);this.record({label:c,state:p,sideEffects:{do:[],undo:[]},eventType:d.config.eventType})}},async to(c){r.fire(JS.TRAVERSAL_START);const f=gDe(i.current,i.backend.nodes[c],i.backend.nodes),d=[];for(let h=0;h<f.length-1;++h){const p=s(f[h]),m=s(f[h+1]);kDt(p,m)?Cd(p)&&d.push(...p.sideEffects.undo):Cd(m)&&d.push(...m.sideEffects.do)}for(const h of d){const p=e.get(h.type).func;await p(h.payload)}i.update(i.changeCurrent(c)),r.fire(JS.TRAVERSAL_END)},undo(){const{current:c}=i;return Cd(c)?this.to(c.parent):Promise.resolve(console.warn("Already at root!"))},redo(c="latest"){const{current:f}=i;return f.children.length>0?this.to(f.children[c==="oldest"?0:f.children.length-1]):Promise.resolve(console.warn("Already at latest in this branch!"))},currentChange(c,f=!1){return i.currentChange(c,{skipOnNew:f})},done(){console.log("Setup later for URL sharing.")},tree(){return yDe(i.root,i.backend.nodes)},on(c,f){r.listen(c,f)},export(){return JSON.stringify(i.backend)},exportObject(){return JSON.parse(JSON.stringify(i.backend))},import(c){const f=JSON.parse(c),d=f.current;f.current=f.root,i.update(i.load(f)),this.to(d)},importObject(c){const f=c.current;c.current=c.root,i.update(i.load(c)),this.to(f)},metadata:o,artifact:a,annotations:u,bookmarks:l}}function PDt(e,t,n){let[r,i]=[e,t];r.level>i.level&&([r,i]=[i,r]);let s=i.level-r.level;for(;Cd(i)&&s!==0;)i=n[i.parent],s-=1;if(r.id===i.id)return r.id;for(;r.id!==i.id;)Cd(r)&&(r=n[r.parent]),Cd(i)&&(i=n[i.parent]);return r.id}function gDe(e,t,n){const r=PDt(e,t,n),i=n[r],s=[],o=[];let[a,u]=[e,t];for(;a.id!==i.id;)s.push(a),Cd(a)&&(a=n[a.parent]);for(s.push(a);u.id!==i.id;)o.push(u),Cd(u)&&(u=n[u.parent]);const l=o.reverse();return[...s,...l].map(c=>c.id)}function kDt(e,t){if(Cd(e)&&e.parent===t.id)return!0;if(Cd(t)&&t.parent===e.id)return!1;throw new Error("Incorrect use of function. Nodes are not connected to each other.")}function yDe(e,t){return{...e,children:e.children.map(n=>yDe(t[n],t)),name:`${e.label}`}}sDt();function $Dt(e){return e.length===2?dDt(e):e}class R4{static create(){return new R4}constructor(){this.registry=new Map}has(t){return this.registry.has(t)}register(t,n,r){const i=n.length===2;if(n.length>2)throw new Error("Incorrect action function signature. Action function can only have two arguments at most!");if(this.has(t))throw new Error(`Already registered: ${t}`);const{label:s=t,eventType:o=t}=r||{};return this.registry.set(t,{func:$Dt(n),config:{hasSideEffects:!i,label:typeof s=="string"?()=>s:s,eventType:o}}),xd(t)}get(t){const n=this.registry.get(t);if(!n)throw new Error(`Not registered: ${t}`);return n}}var RDt="Expected a function",gpe=NaN,NDt="[object Symbol]",DDt=/^\s+|\s+$/g,LDt=/^[-+]0x[0-9a-f]+$/i,MDt=/^0b[01]+$/i,FDt=/^0o[0-7]+$/i,BDt=parseInt,jDt=typeof nu=="object"&&nu&&nu.Object===Object&&nu,zDt=typeof self=="object"&&self&&self.Object===Object&&self,UDt=jDt||zDt||Function("return this")(),VDt=Object.prototype,HDt=VDt.toString,qDt=Math.max,WDt=Math.min,jB=function(){return UDt.Date.now()};function GDt(e,t,n){var r,i,s,o,a,u,l=0,c=!1,f=!1,d=!0;if(typeof e!="function")throw new TypeError(RDt);t=ype(t)||0,wV(n)&&(c=!!n.leading,f="maxWait"in n,s=f?qDt(ype(n.maxWait)||0,t):s,d="trailing"in n?!!n.trailing:d);function h(w){var x=r,S=i;return r=i=void 0,l=w,o=e.apply(S,x),o}function p(w){return l=w,a=setTimeout(y,t),c?h(w):o}function m(w){var x=w-u,S=w-l,I=t-x;return f?WDt(I,s-S):I}function g(w){var x=w-u,S=w-l;return u===void 0||x>=t||x<0||f&&S>=s}function y(){var w=jB();if(g(w))return v(w);a=setTimeout(y,m(w))}function v(w){return a=void 0,d&&r?h(w):(r=i=void 0,o)}function _(){a!==void 0&&clearTimeout(a),l=0,r=u=i=a=void 0}function b(){return a===void 0?o:v(jB())}function E(){var w=jB(),x=g(w);if(r=arguments,i=this,u=w,x){if(a===void 0)return p(u);if(f)return a=setTimeout(y,t),h(u)}return a===void 0&&(a=setTimeout(y,t)),o}return E.cancel=_,E.flush=b,E}function wV(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function YDt(e){return!!e&&typeof e=="object"}function KDt(e){return typeof e=="symbol"||YDt(e)&&HDt.call(e)==NDt}function ype(e){if(typeof e=="number")return e;if(KDt(e))return gpe;if(wV(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=wV(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(DDt,"");var n=MDt.test(e);return n||FDt.test(e)?BDt(e.slice(2),n?2:8):LDt.test(e)?gpe:+e}var XDt=GDt;const Ff=pl(XDt);function vDe({yScale:e,xRange:t,horizontalPosition:n,label:r}){const i=A.useMemo(()=>e.ticks(5).map(o=>({value:o,yOffset:e(o)})),[e]),s=A.useMemo(()=>$E(".2s"),[]);return R.jsxs(R.Fragment,{children:[R.jsx("g",{transform:`translate(${n-60}, ${e.range()[0]}) rotate(-90)`,children:R.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:R.jsx(Bg,{children:R.jsx(Jl,{spacing:3,children:R.jsx(Rt,{size:14,style:{color:"#878E95"},children:r})})})})}),R.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),R.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),i.map(({value:o,yOffset:a})=>R.jsxs("g",{transform:`translate(${n}, ${a})`,children:[R.jsx("line",{x2:"-6",stroke:"currentColor"}),R.jsx("line",{x2:`${t[1]-t[0]}`,stroke:`${o===0?"black":"lightgray"}`}),R.jsx("text",{style:{dominantBaseline:"middle",fontSize:"10px",textAnchor:"end",transform:"translateX(-8px)",fill:"black",font:"Roboto"},children:s(o)},o)]},o))]})}const QDt=Object.freeze(Object.defineProperty({__proto__:null,YAxis:vDe},Symbol.toStringTag,{value:"Module"})),zB=15;function _De({xScale:e,yScale:t,setBrushedSpace:n,params:r,data:i,brushState:s,isSelect:o=!0}){const[a,u]=A.useState([0,0]),[l,c]=A.useState(!1);return A.useEffect(()=>{const f=Qi("#scatterSvgBrushStudy");if(f){const d=f.node().getBoundingClientRect();f.on("mousemove",h=>{const p=[h.clientX-d.x,h.clientY-d.y];if(u(p),l){const m=i.filter(g=>Math.abs(e(g[r.x])-p[0])<zB&&Math.abs(t(g[r.y])-p[1])<zB);if(h.ctrlKey||h.metaKey||!o){const g=new Set(s.ids);m.forEach(v=>{g.has(v[r.ids])&&g.delete(v[r.ids])});const y=Array.from(g);n([[a[0],a[1]],[a[0],a[1]]],e,t,y.length===0?"clear":"drag",y)}else{const g=Array.from(new Set([...s.ids,...m.map(y=>y[r.ids])]));g.length>0&&n([[a[0],a[1]],[a[0],a[1]]],e,t,"drag",g)}}}),f.on("mousedown",h=>{c(!0),h.stopPropagation(),h.preventDefault()}),f.on("mouseup",()=>{c(!1)})}},[s.ids,i,l,o,r,e,t]),R.jsx("circle",{style:{cursor:l?"pointer":"default"},r:zB,fill:"darkgray",opacity:.5,cx:a[0],cy:a[1]})}const JDt=Object.freeze(Object.defineProperty({__proto__:null,Paintbrush:_De},Symbol.toStringTag,{value:"Module"})),oi={top:15,left:100,right:15,bottom:70};function EV({setFilteredTable:e,brushState:t,setBrushedSpace:n,brushType:r,params:i,data:s,brushedPoints:o}){const[a,{height:u,width:l}]=wb(),[c]=wb(),[f]=wb(),[d,h]=A.useState(!0),p=A.useMemo(()=>l-oi.left-oi.right,[l]),m=A.useMemo(()=>u-oi.top-oi.bottom,[u]),g=A.useMemo(()=>{const C=Array.from(new Set(s.map(O=>O[i.category])));return RE(oke).domain(C)},[s,i.category]),{xMin:y,yMin:v,xMax:_,yMax:b}=A.useMemo(()=>{const C=s.map(B=>+B[i.x]).filter(B=>B!==null),[O,z]=zfe(C),N=s.map(B=>+B[i.y]).filter(B=>B!==null),[$,D]=zfe(N);return{xMin:O,xMax:z,yMin:$,yMax:D}},[s,i.x,i.y]),E=A.useMemo(()=>{const C=_-y;return p<=0?null:i.dataType==="date"?eke([oi.left,p+oi.left]).domain([new Date("2014-12-20"),new Date("2016-01-10")]):Ap([oi.left,p+oi.left]).domain([y-C/10,_+C/10]).nice()},[i.dataType,p,_,y]),w=A.useMemo(()=>{const C=b-v;return m<=0?null:Ap([m+oi.top,oi.top]).domain([v-C/10,b+C/10]).nice()},[m,b,v]),x=A.useMemo(()=>{if(!E||!w)return()=>null;if(r==="Axis Selection"){const C=uxt().extent([[oi.left,oi.top+m-5],[oi.left+p,oi.top+m+5]]).on("brush end",z=>{z.sourceEvent!==void 0&&n([[z.selection[0],null],[z.selection[1],null]],E,w,z.mode)}),O=lxt().extent([[oi.left-5,oi.top],[oi.left+5,oi.top+m]]).on("brush end",z=>{z.sourceEvent!==void 0&&n([[null,z.selection[0]],[null,z.selection[1]]],E,w,z.mode)});return c.current&&f.current&&(Qi(f.current).call(O),Qi(c.current).call(C),t.hasBrush||(Qi(f.current).call(O.move,[w(b),w(v)]),Qi(c.current).call(C.move,[E(new Date("2015-01-02")),E(new Date("2015-12-31"))]),n([[E(new Date("2015-01-02")),w(b)],[E(new Date("2015-12-31")),w(v)]],E,w,"drag"))),()=>{Qi(f.current).call(O.move,[w(b),w(v)]),Qi(c.current).call(C.move,[E(new Date("2015-01-02")),E(new Date("2015-12-31"))]),n([[E(new Date("2015-01-02")),w(b)],[E(new Date("2015-12-31")),w(v)]],E,w,"clear")}}if(r==="Rectangular Selection"){const C=cxt().extent([[oi.left,oi.top],[oi.left+p,oi.top+m]]).on("brush",O=>{O.sourceEvent!==void 0&&n([[O.selection[0][0],O.selection[0][1]],[O.selection[1][0],O.selection[1][1]]],E,w,O.mode)}).on("end",O=>{O.selection===null&&O.sourceEvent!==void 0&&(Qi(a.current).call(C.move,null),e(null))});return Qi(a.current).call(C),()=>{Qi(a.current).call(C.move,null),n([[null,null],[null,null]],E,w,"clear")}}return r==="Slider Selection"?()=>n([[E(y),w(b)],[E(_),w(v)]],E,w,"clear"):r==="Paintbrush Selection"?()=>n([[E(y),w(b)],[E(_),w(v)]],E,w,"clear",[]):()=>null},[t,r,c,f,m,a,n,p,_,y,E,b,v,w]);A.useEffect(()=>{r==="Slider Selection"&&E&&w&&n([[E(y),w(b)],[E(_),w(v)]],E,w,null)},[r,_,y,E,b,v,w]);const S=A.useMemo(()=>o.length===0?null:new Set(o),[o]),I=A.useMemo(()=>!E||!w?null:s.map((C,O)=>{if(C[i.x]===null||C[i.y]===null)return null;const z=i.dataType==="date"?E(new Date(C[i.x])):E(C[i.x]);return R.jsx("circle",{opacity:S&&!S.has(C[i.ids])?.3:1,r:3,fill:S&&!S.has(C[i.ids])?"lightgray":g(C[i.category]),cx:z,cy:w(C[i.y])},O)}),[S,g,s,i.category,i.ids,i.x,i.y,E,w]);return A.useEffect(()=>{r==="Axis Selection"&&ewt(".handle").style("fill","darkgrey")},[t,r]),R.jsxs(Km,{children:[R.jsxs(Jl,{children:[R.jsx(cu,{ml:60,compact:!0,style:{width:"130px"},disabled:o.length===0,onClick:()=>{e(null),x==null||x()},children:"Clear Selection"}),i.brushType==="Paintbrush Selection"?R.jsx(jAe,{defaultChecked:!0,value:d?"Select":"De-Select",onChange:C=>h(C==="Select"),data:[{label:"Select",value:"Select"},{label:"De-Select",value:"De-Select",disabled:o.length===0}]}):null]}),R.jsxs(Jl,{style:{width:"100%",height:"100%"},noWrap:!0,children:[R.jsxs("svg",{id:"scatterSvgBrushStudy",ref:a,style:{height:"500px",width:i.brushType==="Axis Selection"?"800px":"530px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[E&&w?R.jsxs("g",{children:[R.jsx(vDe,{yScale:w,label:i.y,horizontalPosition:oi.left,xRange:E.range()}),R.jsx(fK,{xScale:E,yRange:w.range(),isDate:i.dataType==="date",vertPosition:m+oi.top,label:i.x,ticks:E.ticks(i.brushType==="Axis Selection"?12:5).map(C=>({value:C.toString(),offset:E(C)}))})]}):null,I,R.jsx("g",{id:"brushXRef",ref:c}),R.jsx("g",{id:"brushYRef",ref:f}),E&&w&&r==="Paintbrush Selection"?R.jsx(_De,{brushState:t,setBrushedSpace:n,params:i,data:s,isSelect:d,xScale:E,yScale:w}):null]}),r==="Slider Selection"&&E&&w?R.jsxs(Km,{style:{flexGrow:1},spacing:50,children:[R.jsxs(Km,{spacing:0,children:[R.jsx(Rt,{children:i.x}),R.jsx(Hz,{minRange:1,label:null,min:E.domain()[0],max:E.domain()[1],labelAlwaysOn:!1,onChange:C=>{n([[E(C[0]),t.y1],[E(C[1]),t.y2]],E,w,"drag")},style:{width:"300px"},marks:E.ticks(5).map(C=>({value:C,label:C})),value:[E.invert(t.x1),E.invert(t.x2)]})]}),R.jsxs(Km,{spacing:0,children:[R.jsx(Rt,{children:i.y}),R.jsx(Hz,{minRange:1,label:null,min:w.domain()[0],max:w.domain()[1],onChange:C=>{n([[t.x1,w(C[1])],[t.x2,w(C[0])]],E,w,"drag")},style:{width:"300px"},marks:w.ticks(5).map(C=>({value:C,label:C})),value:[w.invert(t.y2),w.invert(t.y1)]})]})]}):null]})]})}const ZDt=Object.freeze(Object.defineProperty({__proto__:null,Scatter:EV,default:EV},Symbol.toStringTag,{value:"Module"}));function vpe({parameters:e,setAnswer:t}){const[n,r]=A.useState(null),[i,s]=A.useState({hasBrush:!1,x1:0,y1:0,x2:0,y2:0,ids:[]}),[o,a]=A.useState(null);A.useEffect(()=>{Rxt(`./data/${e.dataset}.csv`).then(g=>{a(g)})},[e]);const u=A.useMemo(()=>o?WNt(o):null,[o]),{actions:l,trrack:c}=A.useMemo(()=>{const g=R4.create(),y=g.register("brush",(w,x)=>(w.all={brush:x},w)),v=g.register("brushMove",(w,x)=>(w.all={brush:x},w)),_=g.register("brushResize",(w,x)=>(w.all={brush:x},w)),b=g.register("brushClear",(w,x)=>(w.all={brush:x},w)),E=mDe({registry:g,initialState:{all:{hasBrush:!1,x1:null,x2:null,y1:null,y2:null,ids:[]}}});return{actions:{brush:y,brushMove:v,brushResize:_,clearBrush:b},trrack:E}},[]),f=A.useCallback((g,y)=>{g==="drag"?c.apply("Move Brush",l.brushMove(y)):g==="handle"&&c.apply("Brush",l.brush(y))},[l,c]),d=A.useMemo(()=>Ff(f,100,{maxWait:100}),[f]),h=A.useCallback((g,y,v,_,b)=>{if(!y||!v)return;const E=y.invert(g[0][0]||i.x1),w=y.invert(g[1][0]||i.x2),x=v.invert(g[1][1]||i.y2),S=v.invert(g[0][1]||i.y1);let I=null;if(_==="clear")I=u;else if(b){const O=new Set(b);I=u.filter(DB(z=>O.has(z[e.ids])))}else e.brushType==="Axis Selection"?I=u.filter(DB(O=>new Date(O[e.x])>=new Date(E)&&new Date(O[e.x])<=new Date(w)&&O[e.y]>=x&&O[e.y]<=S)):I=u.filter(DB(O=>O[e.x]>=E&&O[e.x]<=w&&O[e.y]>=x&&O[e.y]<=S));const C={x1:g[0][0]||(i==null?void 0:i.x1)||0,x2:g[1][0]||(i==null?void 0:i.x2)||0,y1:g[0][1]||(i==null?void 0:i.y1)||0,y2:g[1][1]||(i==null?void 0:i.y2)||0,hasBrush:_!=="clear",ids:_!=="clear"?I==null?void 0:I.array("id"):[]};s(C),_==="drag"||_==="handle"?d(_,C):_==="clear"&&c.apply("Clear Brush",l.clearBrush(C)),r(I),t({status:!0,provenanceGraph:c.graph.backend,answers:{}})},[i,u,e,c,t,d,l]),p=A.useMemo(()=>n?n==null?void 0:n.groupby(e.category).count():u?u==null?void 0:u.groupby(e.category).count():null,[n,u,e.category]),m=A.useCallback(g=>{r(g)},[]);return o?R.jsxs(Km,{spacing:"xs",children:[R.jsx(EV,{brushedPoints:i==null?void 0:i.ids,data:o,params:e,brushType:e.brushType,setBrushedSpace:h,brushState:i,setFilteredTable:m}),R.jsx(jU,{data:o,parameters:e,barsTable:p})]}):R.jsx(T0,{})}const e3t=Object.freeze(Object.defineProperty({__proto__:null,BrushPlot:vpe,default:vpe},Symbol.toStringTag,{value:"Module"})),t3t=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),_pe=e=>{const t={...e,marginTop:e.marginTop||10,marginRight:e.marginRight||10,marginBottom:e.marginBottom||40,marginLeft:e.marginLeft||75};return{...t,boundedHeight:t.height?Math.max(t.height-t.marginTop-t.marginBottom,0):0,boundedWidth:t.width?Math.max(t.width-t.marginLeft-t.marginRight,0):0}},WE=e=>{const t=A.useRef(null),n=_pe(e),[r,i]=A.useState(0),[s,o]=A.useState(0);A.useEffect(()=>{const u=t.current;if(u){const l=new ResizeObserver(c=>{if(!Array.isArray(c)||!c.length)return;const f=c[0];r!==f.contentRect.width&&i(f.contentRect.width),s!==f.contentRect.height&&o(f.contentRect.height)});return l.observe(u),()=>l.unobserve(u)}return()=>null},[s,r]);const a=_pe({...n,width:n.width||r,height:n.height||s});return[t,a]},n3t=Object.freeze(Object.defineProperty({__proto__:null,useChartDimensions:WE},Symbol.toStringTag,{value:"Module"}));function bDe({data:e,xScale:t,yScale:n,height:r}){return R.jsx("g",{children:e.map((i,s)=>R.jsx("rect",{x:t(i.name),y:n(i.value),width:t.bandwidth(),height:r-n(i.value),fill:"transparent",stroke:"currentColor"},s))})}const r3t=Object.freeze(Object.defineProperty({__proto__:null,Bars:bDe},Symbol.toStringTag,{value:"Module"}));function VX({domain:e=[0,100],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=A.useMemo(()=>{const o=Ap().domain(e).range(t),a=t[1]-t[0],l=Math.max(1,Math.floor(a/30));return i(o.ticks(l).map(c=>({value:c,xOffset:o(c)})))},[e,t,i]);return R.jsxs("g",{children:[R.jsx("path",{d:["M",0,t[0],"h",r,"V",t[1],"h",-r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>R.jsxs("g",{transform:`translate(0,${a})`,children:[R.jsx("line",{x2:`${r}`,stroke:"currentColor"}),R.jsx("text",{style:{fontSize:"10px",textAnchor:"middle",transform:"translateX(-10px)"},children:o},o)]},o))]})}const i3t=Object.freeze(Object.defineProperty({__proto__:null,NumericAxisV:VX},Symbol.toStringTag,{value:"Module"}));function wDe({domain:e=["A","B","C","D","E"],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=A.useMemo(()=>{const o=eI().domain(e).range(t).padding(.2);return i(e.map(a=>({value:a,xOffset:(o(a)||0)+o.bandwidth()/2-5})))},[e,t,i]);return R.jsxs("g",{children:[R.jsx("path",{d:["M",t[0],r,"v",-r,"H",t[1],"v",r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>R.jsx("g",{transform:`translate(${a}, 10)`,children:R.jsx("circle",{r:2,cx:0,cy:0,children:o},o)},o))]})}const s3t=Object.freeze(Object.defineProperty({__proto__:null,OrdinalAxisHWithDotMarks:wDe},Symbol.toStringTag,{value:"Module"})),o3t={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,width:400,height:400};function a3t({parameters:e}){const[n,r]=WE(o3t),i=eI().domain(e.data.map(u=>u.name)).range([0,r.boundedWidth]).padding(.2),s=Ap().domain([100,0]).range([0,r.boundedHeight]),o=u=>u.filter((l,c)=>c===0||c===u.length-1),a=u=>u.filter((l,c)=>e.selectedIndices.includes(c));return R.jsx("div",{className:"Chart__wrapper",ref:n,style:{height:400},children:R.jsx("svg",{width:r.width,height:r.height,children:R.jsxs("g",{transform:`translate(${[r.marginLeft,r.marginTop].join(",")})`,children:[R.jsx("g",{transform:`translate(${[6,r.boundedHeight].join(",")})`,children:R.jsx(wDe,{domain:i.domain(),range:i.range(),withTick:!0,tickLen:0,tickFilter:a})}),R.jsx("g",{transform:`translate(${[0,0].join(",")})`,children:R.jsx(VX,{domain:s.domain(),range:s.range(),withTick:!0,tickLen:6,tickFilter:o})}),R.jsx("g",{transform:`translate(${[0,0].join(",")})`,children:R.jsx(bDe,{data:e.data,xScale:i,yScale:s,height:r.boundedHeight})})]})})})}const u3t=Object.freeze(Object.defineProperty({__proto__:null,default:a3t},Symbol.toStringTag,{value:"Module"}));function EDe({data:e}){return R.jsx("g",{children:e.map(({bubble:t},n)=>R.jsx("circle",{cx:t.x,cy:t.y,r:t.r,fill:"transparent",stroke:"currentColor"},n))})}const l3t=Object.freeze(Object.defineProperty({__proto__:null,Bubbles:EDe},Symbol.toStringTag,{value:"Module"}));function HX({positions:e}){return R.jsx("g",{children:e.map((t,n)=>R.jsx("circle",{cx:t.x,cy:t.y,r:2,fill:"black",stroke:"currentColor"},n))})}const c3t=Object.freeze(Object.defineProperty({__proto__:null,DotMarks:HX},Symbol.toStringTag,{value:"Module"})),f3t={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:400},d3t=({data:e},t=100,n=100)=>{const i={children:e.map(a=>+a.value).map(a=>({value:a}))},s=IPe().size([t-10,n-10]).padding(1.5),o=Y6(i).sum(a=>a.value);return s(o).descendants().filter(a=>!a.children).map((a,u)=>({bubble:a,data:e[u]}))},h3t=(e,t)=>e.filter((n,r)=>t.includes(r)).map(({bubble:n})=>({x:n.x,y:n.y}));function p3t({parameters:e}){const[t,n]=WE(f3t),r=d3t(e,n.width,n.height),i=h3t(r,e.selectedIndices);return R.jsx("div",{className:"Chart__wrapper",ref:t,style:{height:"400px"},children:R.jsx("svg",{width:n.width,height:n.height,children:R.jsxs("g",{transform:`translate(${[n.marginLeft/2,n.marginTop/2].join(",")})`,children:[R.jsx(EDe,{data:r}),R.jsx(HX,{positions:i})]})})})}const m3t=Object.freeze(Object.defineProperty({__proto__:null,default:p3t},Symbol.toStringTag,{value:"Module"}));function xDe({arcs:e}){return R.jsx("g",{children:e.map((t,n)=>R.jsx("path",{d:t(),fill:"transparent",stroke:"currentColor"},n))})}const g3t=Object.freeze(Object.defineProperty({__proto__:null,Slices:xDe},Symbol.toStringTag,{value:"Module"}));function SDe({positions:e}){return R.jsx("g",{children:e.map((t,n)=>R.jsx("g",{transform:`translate(${t.centroid()})`,children:R.jsx("circle",{r:2,cx:0,cy:0},n)},n))})}const y3t=Object.freeze(Object.defineProperty({__proto__:null,SlicesDotMarks:SDe},Symbol.toStringTag,{value:"Module"})),v3t={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:500},_3t=bAt().value(e=>e.value),oS=150;function b3t({parameters:e}){const[t,n]=WE(v3t),r=_3t(e.data),i=r.map(o=>BU().innerRadius(0).outerRadius(oS).startAngle(o.startAngle).endAngle(o.endAngle)),s=r.map(o=>BU().outerRadius(oS+10).innerRadius(oS+10).startAngle(o.startAngle).endAngle(o.endAngle)).filter((o,a)=>e.selectedIndices.includes(a));return R.jsx("div",{className:"Chart__wrapper",ref:t,style:{height:400},children:R.jsx("svg",{width:n.width,height:n.height,children:R.jsxs("g",{transform:`translate(${[n.marginLeft+oS,n.marginTop+oS].join(",")})`,children:[R.jsx(xDe,{arcs:i}),R.jsx(SDe,{positions:s})]})})})}const w3t=Object.freeze(Object.defineProperty({__proto__:null,default:b3t},Symbol.toStringTag,{value:"Module"}));function TDe({domain:e=[0,100],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=A.useMemo(()=>{const o=Ap().domain(e).range(t),a=t[1]-t[0],l=Math.max(1,Math.floor(a/30));return i(o.ticks(l).map(c=>({value:c,xOffset:o(c)})))},[e,t,i]);return R.jsxs("g",{children:[R.jsx("path",{d:["M",t[0],r,"v",-r,"H",t[1],"v",r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>R.jsxs("g",{transform:`translate(${a}, 0)`,children:[R.jsx("line",{y2:`${r}`,stroke:"currentColor"}),R.jsx("text",{style:{fontSize:"10px",textAnchor:"middle",transform:"translateY(20px)"},children:o},o)]},o))]})}const E3t=Object.freeze(Object.defineProperty({__proto__:null,NumericAxisH:TDe},Symbol.toStringTag,{value:"Module"}));function ADe({data:e,barWidth:t,yScale:n}){return R.jsx("g",{children:e.map((r,i)=>R.jsx("rect",{x:t/2,y:n(r[0][1]),width:t,height:n(r[0][0])-n(r[0][1]),fill:"transparent",stroke:"currentColor"},i))})}const x3t=Object.freeze(Object.defineProperty({__proto__:null,StackedBars:ADe},Symbol.toStringTag,{value:"Module"})),S3t={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:400};function T3t({parameters:e}){const[n,r]=WE(S3t),i=eI().domain(e.data.map(h=>h.name)).range([0,r.boundedWidth]).padding(.2),s=Ap().domain([100,0]).range([0,r.boundedWidth]),o=h=>h.filter((p,m)=>m===0||m===h.length-1),a=h=>h.filter((p,m)=>e.selectedIndices.includes(m)),u=h=>{const p=h.map(_=>+_.value),g=p.reduce((_,b)=>Number(_)+Number(b))/100,y={};p.forEach((_,b)=>{y[String.fromCharCode(b+65)]=_/g});const v=[y];return UAt().keys(e.data.map(_=>_.name))(v)},l=(h,p,m)=>h.filter((y,v)=>p.includes(v)).map(y=>({x:m,y:s(y[0][1])+.5*(s(y[0][0])-s(y[0][1]))})),c=u(e.data),f=Math.min(r.width,r.height)/2-20,d=l(c,e.selectedIndices,f);return R.jsx("div",{className:"Chart__wrapper",ref:n,style:{height:"400"},children:R.jsx("svg",{width:r.width,height:r.height,children:R.jsxs("g",{transform:`translate(${[r.marginLeft,r.marginTop].join(",")})`,children:[R.jsx("g",{transform:`translate(${[6,r.boundedHeight].join(",")})`,children:R.jsx(TDe,{domain:i.domain(),range:i.range(),withTick:!0,tickLen:0,tickFilter:a})}),R.jsx("g",{transform:"translate(0, 0)",children:R.jsx(VX,{domain:s.domain(),range:s.range(),withTick:!0,tickLen:6,tickFilter:o})}),R.jsxs("g",{transform:"translate(0, 0)",children:[R.jsx(ADe,{data:c,barWidth:f,yScale:s}),R.jsx(HX,{positions:d})]})]})})})}const A3t=Object.freeze(Object.defineProperty({__proto__:null,default:T3t},Symbol.toStringTag,{value:"Module"})),C3t={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:650,width:850};function I3t({parameters:e,setAnswer:t}){const[n,r]=WE(C3t),[i,s]=A.useState(100),[o,a]=A.useState(100),[u,l]=A.useState(300),{taskid:c}=e,{actions:f,trrack:d}=A.useMemo(()=>{const p=R4.create(),m=p.register("click",(y,v)=>(y.clickX=v.clickX,y.clickY=v.clickY,y.distance=v.distance,y)),g=mDe({registry:p,initialState:{distance:0,speed:10,clickX:0,clickY:0}});return{actions:{clickAction:m},trrack:g}},[]),h=A.useCallback(p=>{const m=Qi("#movingCircle"),g=Qi("#clickAccuracySvg"),y=bU(p,g.node()),v=[+m.attr("cx"),+m.attr("cy")],_=`${Math.round(Math.sqrt((y[0]-v[0])**2+(y[1]-v[1])**2))}px`;d.apply("Clicked",f.clickAction({distance:+_,clickX:y[0],clickY:y[1]})),t({status:!0,provenanceGraph:d.graph.backend,answers:{[c]:_}})},[f,t,c,d]);return A.useEffect(()=>{const p=Math.random()*800,m=Math.random()*600,y=Math.sqrt((p-i)**2+(m-o)**2)/u*1e3;Qi(n.current).select("circle").transition().duration(y).ease(YEt).attr("cx",p).attr("cy",m).on("end",()=>{s(p),a(m)})},[n,u,i,o]),R.jsxs(R.Fragment,{children:[R.jsx("div",{className:"Chart__wrapper",ref:n,onClick:h,style:{height:"650px"},children:R.jsx("svg",{id:"clickAccuracySvg",width:r.width,height:r.height,children:R.jsxs("g",{transform:`translate(${[r.marginLeft/2,r.marginTop/2].join(",")})`,children:[R.jsx("rect",{width:"800",height:"600",stroke:"black",strokeWidth:"5",fill:"none"}),R.jsx("circle",{id:"movingCircle",cx:"100",cy:"100",r:"10"})]})})}),R.jsxs(At,{children:["Adjust speed (px/s):",R.jsx(JG,{w:800,min:10,max:1e3,value:u,onChange:l})]})]})}const O3t=Object.freeze(Object.defineProperty({__proto__:null,default:I3t},Symbol.toStringTag,{value:"Module"}));var P3t={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},k3t=Object.defineProperty,$3t=Object.defineProperties,R3t=Object.getOwnPropertyDescriptors,c3=Object.getOwnPropertySymbols,CDe=Object.prototype.hasOwnProperty,IDe=Object.prototype.propertyIsEnumerable,bpe=(e,t,n)=>t in e?k3t(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,wpe=(e,t)=>{for(var n in t||(t={}))CDe.call(t,n)&&bpe(e,n,t[n]);if(c3)for(var n of c3(t))IDe.call(t,n)&&bpe(e,n,t[n]);return e},N3t=(e,t)=>$3t(e,R3t(t)),D3t=(e,t)=>{var n={};for(var r in e)CDe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&c3)for(var r of c3(e))t.indexOf(r)<0&&IDe.call(e,r)&&(n[r]=e[r]);return n},Iu=(e,t,n)=>{const r=A.forwardRef((i,s)=>{var o=i,{color:a="currentColor",size:u=24,stroke:l=2,children:c}=o,f=D3t(o,["color","size","stroke","children"]);return A.createElement("svg",wpe(N3t(wpe({ref:s},P3t),{width:u,height:u,stroke:a,strokeWidth:l,className:`tabler-icon tabler-icon-${e}`}),f),[...n.map(([d,h])=>A.createElement(d,h)),...c||[]])});return r.propTypes={color:Mt.string,size:Mt.oneOfType([Mt.string,Mt.number]),stroke:Mt.oneOfType([Mt.string,Mt.number])},r.displayName=`${t}`,r},L3t=Iu("alert-circle","IconAlertCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 8v4",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]),M3t=Iu("arrows-shuffle","IconArrowsShuffle",[["path",{d:"M18 4l3 3l-3 3",key:"svg-0"}],["path",{d:"M18 20l3 -3l-3 -3",key:"svg-1"}],["path",{d:"M3 7h3a5 5 0 0 1 5 5a5 5 0 0 0 5 5h5",key:"svg-2"}],["path",{d:"M21 7h-5a4.978 4.978 0 0 0 -3 1m-4 8a4.984 4.984 0 0 1 -3 1h-3",key:"svg-3"}]]),F3t=Iu("brain","IconBrain",[["path",{d:"M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8",key:"svg-0"}],["path",{d:"M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8",key:"svg-1"}],["path",{d:"M17.5 16a3.5 3.5 0 0 0 0 -7h-.5",key:"svg-2"}],["path",{d:"M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0",key:"svg-3"}],["path",{d:"M6.5 16a3.5 3.5 0 0 1 0 -7h.5",key:"svg-4"}],["path",{d:"M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10",key:"svg-5"}]]),B3t=Iu("browser-plus","IconBrowserPlus",[["path",{d:"M4 4m0 1a1 1 0 0 1 1 -1h14a1 1 0 0 1 1 1v14a1 1 0 0 1 -1 1h-14a1 1 0 0 1 -1 -1z",key:"svg-0"}],["path",{d:"M4 8h16",key:"svg-1"}],["path",{d:"M8 4v4",key:"svg-2"}],["path",{d:"M10 14h4",key:"svg-3"}],["path",{d:"M12 12v4",key:"svg-4"}]]),UB=Iu("chevron-right","IconChevronRight",[["path",{d:"M9 6l6 6l-6 6",key:"svg-0"}]]),Epe=Iu("circle-check","IconCircleCheck",[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}],["path",{d:"M9 12l2 2l4 -4",key:"svg-1"}]]),j3t=Iu("code-dots","IconCodeDots",[["path",{d:"M15 12h.01",key:"svg-0"}],["path",{d:"M12 12h.01",key:"svg-1"}],["path",{d:"M9 12h.01",key:"svg-2"}],["path",{d:"M6 19a2 2 0 0 1 -2 -2v-4l-1 -1l1 -1v-4a2 2 0 0 1 2 -2",key:"svg-3"}],["path",{d:"M18 19a2 2 0 0 0 2 -2v-4l1 -1l-1 -1v-4a2 2 0 0 0 -2 -2",key:"svg-4"}]]),ODe=Iu("code-plus","IconCodePlus",[["path",{d:"M9 12h6",key:"svg-0"}],["path",{d:"M12 9v6",key:"svg-1"}],["path",{d:"M6 19a2 2 0 0 1 -2 -2v-4l-1 -1l1 -1v-4a2 2 0 0 1 2 -2",key:"svg-2"}],["path",{d:"M18 19a2 2 0 0 0 2 -2v-4l1 -1l-1 -1v-4a2 2 0 0 0 -2 -2",key:"svg-3"}]]),z3t=Iu("dots-vertical","IconDotsVertical",[["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]),U3t=Iu("layout-dashboard","IconLayoutDashboard",[["path",{d:"M4 4h6v8h-6z",key:"svg-0"}],["path",{d:"M4 16h6v4h-6z",key:"svg-1"}],["path",{d:"M14 12h6v8h-6z",key:"svg-2"}],["path",{d:"M14 4h6v4h-6z",key:"svg-3"}]]),V3t=Iu("mail","IconMail",[["path",{d:"M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z",key:"svg-0"}],["path",{d:"M3 7l9 6l9 -6",key:"svg-1"}]]),xpe=Iu("schema","IconSchema",[["path",{d:"M5 2h5v4h-5z",key:"svg-0"}],["path",{d:"M15 10h5v4h-5z",key:"svg-1"}],["path",{d:"M5 18h5v4h-5z",key:"svg-2"}],["path",{d:"M5 10h5v4h-5z",key:"svg-3"}],["path",{d:"M10 12h5",key:"svg-4"}],["path",{d:"M7.5 6v4",key:"svg-5"}],["path",{d:"M7.5 14v4",key:"svg-6"}]]),qX=Iu("table","IconTable",[["path",{d:"M3 5a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-14z",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}]]),H3t=Iu("zoom-question","IconZoomQuestion",[["path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0",key:"svg-0"}],["path",{d:"M21 21l-6 -6",key:"svg-1"}],["path",{d:"M10 13l0 .01",key:"svg-2"}],["path",{d:"M10 10a1.5 1.5 0 1 0 -1.14 -2.474",key:"svg-3"}]]);function Spe({rankings:e}){return R.jsx("div",{style:{fontFamily:"sans-serif"},children:R.jsx("div",{children:e.map((t,n)=>R.jsx("div",{style:{textAlign:"center",marginBottom:1,padding:2,background:`${t===0?"#AEC7E8":"#FF9896"}`},children:t===0?"Group A":"Group B"},n))})})}function q3t({parameters:e,setAnswer:t}){const n=cc(),r=th()[n],[i,s]=A.useState(""),{goToNextStep:o,isNextDisabled:a}=DCe(),u=A.useMemo(()=>Math.floor(Math.random()*2)===0?"r1":"r2",[]),[l]=A.useState(new URLSearchParams(window.location.search)),c=(l.get("admin")||"f")==="t",f=A.useCallback(p=>{s(p),t({status:!0,answers:{[`${r}/leftARP`]:u==="r1"?e.data.r1ARP:e.data.r2ARP,[`${r}/rightARP`]:u==="r2"?e.data.r1ARP:e.data.r2ARP,[`${r}/leftRanking`]:JSON.stringify(u==="r1"?e.data.r1:e.data.r2),[`${r}/rightRanking`]:JSON.stringify(u==="r2"?e.data.r1:e.data.r2),[`${r}/choice`]:p,[`${r}/correctChoice`]:u==="r1"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP)?"left":"right"}})},[r,u,e.data,t]),d=A.useCallback(()=>{a||o()},[a,o]);A.useEffect(()=>{const p=RXe([["ArrowLeft",()=>f("left")],["ArrowRight",()=>f("right")],["Enter",d]]);return document.body.addEventListener("keydown",p),()=>{document.body.removeEventListener("keydown",p)}},[f,d]);let h=!1;return u==="r1"?(i==="left"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP)||i==="right"&&parseFloat(e.data.r2ARP)<parseFloat(e.data.r1ARP))&&(h=!0):(i==="left"&&parseFloat(e.data.r2ARP)<parseFloat(e.data.r1ARP)||i==="right"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP))&&(h=!0),R.jsxs("div",{children:[R.jsxs(Gu,{children:[R.jsxs(Gu.Col,{span:2,children:[R.jsx(Spe,{rankings:u==="r1"?e.data.r1:e.data.r2}),R.jsx(cu,{fullWidth:!0,disabled:i==="left",onClick:()=>{f("left")},children:i==="left"?R.jsx(Epe,{}):"Select this ranking"}),c&&i&&R.jsx("div",{children:u==="r1"?e.data.r1ARP:e.data.r2ARP})]}),R.jsxs(Gu.Col,{span:2,children:[R.jsx(Spe,{rankings:u==="r1"?e.data.r2:e.data.r1}),R.jsx(cu,{fullWidth:!0,disabled:i==="right",onClick:()=>{f("right")},children:i==="right"?R.jsx(Epe,{}):"Select this ranking"}),c&&i&&R.jsx("div",{children:u==="r1"?e.data.r2ARP:e.data.r1ARP})]})]}),c&&i&&R.jsx("div",{style:{padding:20,textAlign:"center",width:300},children:h?"CORRECT":"INCORRECT"})]})}const W3t=Object.freeze(Object.defineProperty({__proto__:null,default:q3t},Symbol.toStringTag,{value:"Module"})),G3t=Object.assign({"../public/demo-brush-interactions/assets/Bar.tsx":qAt,"../public/demo-brush-interactions/assets/BrushPlot.tsx":e3t,"../public/demo-brush-interactions/assets/Paintbrush.tsx":JDt,"../public/demo-brush-interactions/assets/Scatter.tsx":ZDt,"../public/demo-brush-interactions/assets/XAxisBar.tsx":VAt,"../public/demo-brush-interactions/assets/YAxis.tsx":QDt,"../public/demo-brush-interactions/assets/YAxisBar.tsx":HAt,"../public/demo-brush-interactions/assets/types.ts":t3t,"../public/demo-cleveland/assets/BarChart.tsx":u3t,"../public/demo-cleveland/assets/BubbleChart.tsx":m3t,"../public/demo-cleveland/assets/PieChart.tsx":w3t,"../public/demo-cleveland/assets/StackedBarChart.tsx":A3t,"../public/demo-cleveland/assets/chartcomponents/Bars.tsx":r3t,"../public/demo-cleveland/assets/chartcomponents/Bubbles.tsx":l3t,"../public/demo-cleveland/assets/chartcomponents/DotMarks.tsx":c3t,"../public/demo-cleveland/assets/chartcomponents/NumericAxisH.tsx":E3t,"../public/demo-cleveland/assets/chartcomponents/NumericAxisV.tsx":i3t,"../public/demo-cleveland/assets/chartcomponents/OrdinalAxisHWithDotMarks.tsx":s3t,"../public/demo-cleveland/assets/chartcomponents/Slices.tsx":g3t,"../public/demo-cleveland/assets/chartcomponents/SlicesDotMarks.tsx":y3t,"../public/demo-cleveland/assets/chartcomponents/StackedBars.tsx":x3t,"../public/demo-cleveland/assets/hooks/useChartDimensions.tsx":n3t,"../public/demo-click-accuracy-test/assets/ClickAccuracyTest.tsx":O3t,"../public/demo-fairness-jnd/assets/FairnessJND.tsx":W3t});function Y3t({currentConfig:e}){const t=cc(),n=th()[t],r=`../public/${e.path}`,i=G3t[r].default,s=Kp(),{updateResponseBlockValidation:o,setIframeAnswers:a}=Yp();function u({status:l,provenanceGraph:c,answers:f}){s(o({location:"sidebar",identifier:`${n}_${t}`,status:l,values:f,provenanceGraph:c})),s(a(Object.values(f).map(d=>d)))}return R.jsx(A.Suspense,{fallback:R.jsx("div",{children:"Loading..."}),children:R.jsx(i,{parameters:e.parameters,setAnswer:u})})}function K3t({currentConfig:e}){const[t,n]=A.useState(null);return A.useEffect(()=>{fetch(`${vf}${e.path}`).then(r=>r.text()).then(r=>n(r))},[e]),t===null?null:R.jsx(mu,{text:t})}function B1(){return _f(e=>e.config)}const X3t={},Q3t=Object.freeze(Object.defineProperty({__proto__:null,default:X3t},Symbol.toStringTag,{value:"Module"})),J3t=EHe(Q3t);var Z3t=J3t;function eLt(e,t){var n,r="",i=0,s=!0,o=0,a;function u(){return a=e.charAt(o),o++,a}for(u(),a==="-"&&(r="-",u());a>="0"&&a<="9";)s&&(a=="0"?i++:s=!1),r+=a,u();if(s&&i--,a===".")for(r+=".";u()&&a>="0"&&a<="9";)r+=a;if(a==="e"||a==="E")for(r+=a,u(),(a==="-"||a==="+")&&(r+=a,u());a>="0"&&a<="9";)r+=a,u();for(;a&&a<=" ";)u();if(t&&(a===","||a==="}"||a==="]"||a==="#"||a==="/"&&(e[o]==="/"||e[o]==="*"))&&(a=0),n=+r,!(a||i||!isFinite(n)))return n}function tLt(e,t){return Object.defineProperty&&Object.defineProperty(e,"__COMMENTS__",{enumerable:!1,writable:!0}),e.__COMMENTS__=t||{}}function nLt(e){Object.defineProperty(e,"__COMMENTS__",{value:void 0})}function rLt(e){return e.__COMMENTS__}function iLt(e){if(!e)return"";var t=e.split(`
`),n,r,i,s;for(i=0;i<t.length;i++)for(n=t[i],s=n.length,r=0;r<s;r++){var o=n[r];if(o==="#")break;if(o==="/"&&(n[r+1]==="/"||n[r+1]==="*")){n[r+1]==="*"&&(i=t.length);break}else if(o>" "){t[i]="# "+n;break}}return t.join(`
`)}var N4={EOL:Z3t.EOL||`
`,tryParseNumber:eLt,createComment:tLt,removeComment:nLt,getComment:rLt,forceComment:iLt},sLt="3.2.1";function oLt(e,t){if(Object.prototype.toString.apply(e)!=="[object Array]"){if(e)throw new Error("dsf option must contain an array!");return Tpe}else if(e.length===0)return Tpe;var n=[];function r(i){return{}.toString.call(i)==="[object Function]"}return e.forEach(function(i){if(!i.name||!r(i.parse)||!r(i.stringify))throw new Error("extension does not match the DSF interface");n.push(function(){try{if(t=="parse")return i.parse.apply(null,arguments);if(t=="stringify"){var s=i.stringify.apply(null,arguments);if(s!==void 0&&(typeof s!="string"||s.length===0||s[0]==='"'||[].some.call(s,function(o){return uLt(o)})))throw new Error("value may not be empty, start with a quote or contain a punctuator character except colon: "+s);return s}else throw new Error("Invalid type")}catch(o){throw new Error("DSF-"+i.name+" failed; "+o.message)}})}),aLt.bind(null,n)}function aLt(e,t){if(e)for(var n=0;n<e.length;n++){var r=e[n](t);if(r!==void 0)return r}}function Tpe(){}function uLt(e){return e==="{"||e==="}"||e==="["||e==="]"||e===","}function PDe(){return{name:"math",parse:function(e){switch(e){case"+inf":case"inf":case"+Inf":case"Inf":return 1/0;case"-inf":case"-Inf":return-1/0;case"nan":case"NaN":return NaN}},stringify:function(e){if(typeof e=="number"){if(1/e===-1/0)return"-0";if(e===1/0)return"Inf";if(e===-1/0)return"-Inf";if(isNaN(e))return"NaN"}}}}PDe.description="support for Inf/inf, -Inf/-inf, Nan/naN and -0";function kDe(e){var t=e&&e.out;return{name:"hex",parse:function(n){if(/^0x[0-9A-Fa-f]+$/.test(n))return parseInt(n,16)},stringify:function(n){if(t&&Number.isInteger(n))return"0x"+n.toString(16)}}}kDe.description="parse hexadecimal numbers prefixed with 0x";function $De(){return{name:"date",parse:function(e){if(/^\d{4}-\d{2}-\d{2}$/.test(e)||/^\d{4}-\d{2}-\d{2}T\d{2}\:\d{2}\:\d{2}(?:.\d+)(?:Z|[+-]\d{2}:\d{2})$/.test(e)){var t=Date.parse(e);if(!isNaN(t))return new Date(t)}},stringify:function(e){if(Object.prototype.toString.call(e)==="[object Date]"){var t=e.toISOString();return t.indexOf("T00:00:00.000Z",t.length-14)!==-1?t.substr(0,10):t}}}}$De.description="support ISO dates";var WX={loadDsf:oLt,std:{math:PDe,hex:kDe,date:$De}},lLt=function(e,t){var n=N4,r=WX,i,s,o,a={'"':'"',"'":"'","\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},u,l;function c(){s=0,o=" "}function f($){return $==="{"||$==="}"||$==="["||$==="]"||$===","||$===":"}function d($){var D,B=0,V=1;for(D=s-1;D>0&&i[D]!==`
`;D--,B++);for(;D>0;D--)i[D]===`
`&&V++;throw new Error($+" at line "+V+","+B+" >>>"+i.substr(s-B,20)+" ...")}function h(){return o=i.charAt(s),s++,o}function p($){return i.charAt(s+$)}function m($){for(var D="",B=o;h();){if(o===B)return h(),$&&B==="'"&&o==="'"&&D.length===0?(h(),g()):D;if(o==="\\")if(h(),o==="u"){for(var V=0,j=0;j<4;j++){h();var G=o.charCodeAt(0),U;o>="0"&&o<="9"?U=G-48:o>="a"&&o<="f"?U=G-97+10:o>="A"&&o<="F"?U=G-65+10:d("Bad \\u char "+o),V=V*16+U}D+=String.fromCharCode(V)}else if(typeof a[o]=="string")D+=a[o];else break;else o===`
`||o==="\r"?d("Bad string containing newline"):D+=o}d("Bad string")}function g(){for(var $="",D=0,B=0;;){var V=p(-B-5);if(!V||V===`
`)break;B++}function j(){for(var G=B;o&&o<=" "&&o!==`
`&&G-- >0;)h()}for(;o&&o<=" "&&o!==`
`;)h();for(o===`
`&&(h(),j());;){if(!o)d("Bad multiline string");else if(o==="'"){if(D++,h(),D===3)return $.slice(-1)===`
`&&($=$.slice(0,-1)),$;continue}else for(;D>0;)$+="'",D--;o===`
`?($+=`
`,h(),j()):(o!=="\r"&&($+=o),h())}}function y(){if(o==='"'||o==="'")return m(!1);for(var $="",D=s,B=-1;;){if(o===":")return $?B>=0&&B!==$.length&&(s=D+B,d("Found whitespace in your key name (use quotes to include)")):d("Found ':' but no key name (for an empty key name use quotes)"),$;o<=" "?o?B<0&&(B=$.length):d("Found EOF while looking for a key name (check your syntax)"):f(o)?d("Found '"+o+"' where a key name was expected (check your syntax or use quotes if the key name includes {}[],: or whitespace)"):$+=o,h()}}function v(){for(;o;){for(;o&&o<=" ";)h();if(o==="#"||o==="/"&&p(0)==="/")for(;o&&o!==`
`;)h();else if(o==="/"&&p(0)==="*"){for(h(),h();o&&!(o==="*"&&p(0)==="/");)h();o&&(h(),h())}else break}}function _(){var $=o;for(f(o)&&d("Found a punctuator character '"+o+"' when expecting a quoteless string (check your syntax)");;){h();var D=o==="\r"||o===`
`||o==="";if(D||o===","||o==="}"||o==="]"||o==="#"||o==="/"&&(p(0)==="/"||p(0)==="*")){var B=$[0];switch(B){case"f":if($.trim()==="false")return!1;break;case"n":if($.trim()==="null")return null;break;case"t":if($.trim()==="true")return!0;break;default:if(B==="-"||B>="0"&&B<="9"){var V=n.tryParseNumber($);if(V!==void 0)return V}}if(D){$=$.trim();var j=l($);return j!==void 0?j:$}}$+=o}}function b($,D){var B;for($--,B=s-2;B>$&&i[B]<=" "&&i[B]!==`
`;B--);i[B]===`
`&&B--,i[B]==="\r"&&B--;var V=i.substr($,B-$+1);for(B=0;B<V.length;B++)if(V[B]>" "){var j=V.indexOf(`
`);if(j>=0){var G=[V.substr(0,j),V.substr(j+1)];return D&&G[0].trim().length===0&&G.shift(),G}else return[V]}return[]}function E($){function D(V,j){var G,U,P,k;switch(typeof V){case"string":V.indexOf(j)>=0&&(k=V);break;case"object":if(Object.prototype.toString.apply(V)==="[object Array]")for(G=0,P=V.length;G<P;G++)k=D(V[G],j)||k;else for(U in V)Object.prototype.hasOwnProperty.call(V,U)&&(k=D(V[U],j)||k)}return k}function B(V){var j=D($,V);return j?"found '"+V+`' in a string value, your mistake could be with:
  > `+j+`
  (unquoted strings contain everything up to the next line!)`:""}return B("}")||B("]")}function w(){var $=[],D,B,V;try{if(u&&(D=n.createComment($,{a:[]})),h(),B=s,v(),D&&(V=b(B,!0).join(`
`)),o==="]")return h(),D&&(D.e=[V]),$;for(;o;){if($.push(S()),B=s,v(),o===","&&(h(),B=s,v()),D){var j=b(B);D.a.push([V||"",j[0]||""]),V=j[1]}if(o==="]")return h(),D&&(D.a[D.a.length-1][1]+=V||""),$;v()}d("End of input while parsing an array (missing ']')")}catch(G){throw G.hint=G.hint||E($),G}}function x($){var D="",B={},V,j,G;try{if(u&&(V=n.createComment(B,{c:{},o:[]})),$?j=1:(h(),j=s),v(),V&&(G=b(j,!0).join(`
`)),o==="}"&&!$)return V&&(V.e=[G]),h(),B;for(;o;){if(D=y(),v(),o!==":"&&d("Expected ':' instead of '"+o+"'"),h(),B[D]=S(),j=s,v(),o===","&&(h(),j=s,v()),V){var U=b(j);V.c[D]=[G||"",U[0]||""],G=U[1],V.o.push(D)}if(o==="}"&&!$)return h(),V&&(V.c[D][1]+=G||""),B;v()}if($)return B;d("End of input while parsing an object (missing '}')")}catch(P){throw P.hint=P.hint||E(B),P}}function S(){switch(v(),o){case"{":return x();case"[":return w();case"'":case'"':return m(!0);default:return _()}}function I($,D){var B=s;if(v(),o&&d("Syntax error, found trailing characters"),u){var V=D.join(`
`),j=b(B).join(`
`);if(j||V){var G=n.createComment($,n.getComment($));G.r=[V,j]}}return $}function C(){v();var $=u?b(1):null;switch(o){case"{":return I(x(),$);case"[":return I(w(),$);default:return I(S(),$)}}function O(){v();var $=u?b(1):null;switch(o){case"{":return I(x(),$);case"[":return I(w(),$)}try{return I(x(!0),$)}catch(D){c();try{return I(S(),$)}catch{throw D}}}if(typeof e!="string")throw new Error("source is not a string");var z=null,N=!0;return t&&typeof t=="object"&&(u=t.keepWsc,z=t.dsf,N=t.legacyRoot!==!1),l=r.loadDsf(z,"parse"),i=e,c(),N?O():C()},cLt=function(e,t){var n=N4,r=WX,i={obj:["{","}"],arr:["[","]"],key:["",""],qkey:['"','"'],col:[":",""],com:[",",""],str:["",""],qstr:['"','"'],mstr:["'''","'''"],num:["",""],lit:["",""],dsf:["",""],esc:["\\",""],uni:["\\u",""],rem:["",""]},s=n.EOL,o="  ",a=!1,u=!1,l=!1,c=!1,f=0,d=1,h="",p=null,m=!1,g=i;if(t&&typeof t=="object"){t.quotes=t.quotes==="always"?"strings":t.quotes,(t.eol===`
`||t.eol===`\r
`)&&(s=t.eol),a=t.keepWsc,f=t.condense||0,u=t.bracesSameLine,l=t.quotes==="all"||t.quotes==="keys",c=t.quotes==="all"||t.quotes==="strings"||t.separator===!0,c||t.multiline=="off"?d=0:d=t.multiline=="no-tabs"?2:1,h=t.separator===!0?g.com[0]:"",p=t.dsf,m=t.sortProps,typeof t.space=="number"?o=new Array(t.space+1).join(" "):typeof t.space=="string"&&(o=t.space),t.colors===!0&&(g={obj:["\x1B[37m{\x1B[0m","\x1B[37m}\x1B[0m"],arr:["\x1B[37m[\x1B[0m","\x1B[37m]\x1B[0m"],key:["\x1B[33m","\x1B[0m"],qkey:['\x1B[33m"','"\x1B[0m'],col:["\x1B[37m:\x1B[0m",""],com:["\x1B[37m,\x1B[0m",""],str:["\x1B[37;1m","\x1B[0m"],qstr:['\x1B[37;1m"','"\x1B[0m'],mstr:["\x1B[37;1m'''","'''\x1B[0m"],num:["\x1B[36;1m","\x1B[0m"],lit:["\x1B[36m","\x1B[0m"],dsf:["\x1B[37m","\x1B[0m"],esc:["\x1B[31m\\","\x1B[0m"],uni:["\x1B[31m\\u","\x1B[0m"],rem:["\x1B[35m","\x1B[0m"]});var y,v=Object.keys(i);for(y=v.length-1;y>=0;y--){var _=v[y];g[_].push(i[_][0].length,i[_][1].length)}}var b,E="---\u2028--\uFEFF-",w=new RegExp('[\\\\\\"\0-'+E+"]","g"),x=new RegExp(`^\\s|^"|^'|^#|^\\/\\*|^\\/\\/|^\\{|^\\}|^\\[|^\\]|^:|^,|\\s$|[\0-`+E+"]","g"),S=new RegExp("'''|^[\\s]+$|[\0-"+(d===2?"	":"\b")+"\v\f-"+E+"]","g"),I=new RegExp("^(true|false|null)\\s*((,|\\]|\\}|#|//|/\\*).*)?$"),C={"\b":"b","	":"t","\n":"n","\f":"f","\r":"r",'"':'"',"\\":"\\"},O=/[,\{\[\}\]\s:#"']|\/\/|\/\*/,z="",N=0;function $(k,H){return N+=k[0].length+k[1].length-k[2]-k[3],k[0]+H+k[1]}function D(k){return k.replace(w,function(H){var M=C[H];return typeof M=="string"?$(g.esc,M):$(g.uni,("0000"+H.charCodeAt(0).toString(16)).slice(-4))})}function B(k,H,M,F){return k?(x.lastIndex=0,I.lastIndex=0,c||M||x.test(k)||n.tryParseNumber(k,!0)!==void 0||I.test(k)?(w.lastIndex=0,S.lastIndex=0,w.test(k)?!S.test(k)&&!F&&d?V(k,H):$(g.qstr,D(k)):$(g.qstr,k)):$(g.str,k)):$(g.qstr,"")}function V(k,H){var M,F=k.replace(/\r/g,"").split(`
`);if(H+=o,F.length===1)return $(g.mstr,F[0]);var J=s+H+g.mstr[0];for(M=0;M<F.length;M++)J+=s,F[M]&&(J+=H+F[M]);return J+s+H+g.mstr[1]}function j(k){return k?l||O.test(k)?(w.lastIndex=0,$(g.qkey,w.test(k)?D(k):k)):$(g.key,k):'""'}function G(k,H,M,F){function J(vt){return vt&&vt[vt[0]==="\r"?1:0]===`
`}function se(vt){return vt&&!J(vt)}function ae(vt,In,Wt){if(!vt)return"";vt=n.forceComment(vt);var Vt,hr=vt.length;for(Vt=0;Vt<hr&&vt[Vt]<=" ";Vt++);return Wt&&Vt>0&&(vt=vt.substr(Vt)),Vt<hr?In+$(g.rem,vt):vt}var ce=b(k);if(ce!==void 0)return $(g.dsf,ce);switch(typeof k){case"string":return B(k,z,H,F);case"number":return isFinite(k)?$(g.num,String(k)):$(g.lit,"null");case"boolean":return $(g.lit,String(k));case"object":if(!k)return $(g.lit,"null");var le;a&&(le=n.getComment(k));var ge=Object.prototype.toString.apply(k)==="[object Array]",ue=z;z+=o;var Fe=s+ue,ke=s+z,Ge=M||u?"":Fe,Re=[],Oe,Le=f?[]:null,Ut=c,Qe=d,je=h?"":g.com[0],bt=0,et,ut,lt,jt,Dn,he,_e,Pe,it;if(ge){for(et=0,ut=k.length;et<ut;et++){if(Oe=et<ut-1,le?(he=le.a[et]||[],_e=se(he[1]),Re.push(ae(he[0],`
`)+ke),Le&&(he[0]||he[1]||_e)&&(Le=null)):Re.push(ke),N=0,jt=k[et],Re.push(G(jt,le?_e:!1,!0)+(Oe?h:"")),Le){switch(typeof jt){case"string":N=0,c=!0,d=0,Le.push(G(jt,!1,!0)+(Oe?g.com[0]:"")),c=Ut,d=Qe;break;case"object":if(jt){Le=null;break}default:Le.push(Re[Re.length-1]+(Oe?je:""));break}Oe&&(N+=g.com[0].length-g.com[2]),bt+=N}le&&he[1]&&Re.push(ae(he[1],_e?" ":`
`,_e))}ut===0?le&&le.e&&Re.push(ae(le.e[0],`
`)+Fe):Re.push(Fe),Re.length===0?Pe=$(g.arr,""):(Pe=Ge+$(g.arr,Re.join("")),Le&&(it=Le.join(" "),it.length-bt<=f&&(Pe=$(g.arr,it))))}else{var Ye=le?le.o.slice():[],at=[];for(lt in k)Object.prototype.hasOwnProperty.call(k,lt)&&Ye.indexOf(lt)<0&&at.push(lt);m&&at.sort();var tt=Ye.concat(at);for(et=0,ut=tt.length;et<ut;et++)if(Oe=et<ut-1,lt=tt[et],le?(he=le.c[lt]||[],_e=se(he[1]),Re.push(ae(he[0],`
`)+ke),Le&&(he[0]||he[1]||_e)&&(Le=null)):Re.push(ke),N=0,jt=k[lt],Dn=G(jt,le&&_e),Re.push(j(lt)+g.col[0]+(J(Dn)?"":" ")+Dn+(Oe?h:"")),le&&he[1]&&Re.push(ae(he[1],_e?" ":`
`,_e)),Le){switch(typeof jt){case"string":N=0,c=!0,d=0,Dn=G(jt,!1),c=Ut,d=Qe,Le.push(j(lt)+g.col[0]+" "+Dn+(Oe?g.com[0]:""));break;case"object":if(jt){Le=null;break}default:Le.push(Re[Re.length-1]+(Oe?je:""));break}N+=g.col[0].length-g.col[2],Oe&&(N+=g.com[0].length-g.com[2]),bt+=N}ut===0?le&&le.e&&Re.push(ae(le.e[0],`
`)+Fe):Re.push(Fe),Re.length===0?Pe=$(g.obj,""):(Pe=Ge+$(g.obj,Re.join("")),Le&&(it=Le.join(" "),it.length-bt<=f&&(Pe=$(g.obj,it))))}return z=ue,Pe}}b=r.loadDsf(p,"stringify");var U="",P=a?P=(n.getComment(e)||{}).r:null;return P&&P[0]&&(U=P[0]+`
`),U+=G(e,null,!0,!0),P&&(U+=P[1]||""),U},Lb=N4;function ZT(e,t,n){var r;return e&&(r={b:e}),t&&((r=r||{}).a=t),n&&((r=r||{}).x=n),r}function xV(e,t){if(!(e===null||typeof e!="object")){var n=Lb.getComment(e);n&&Lb.removeComment(e);var r,i,s,o;if(Object.prototype.toString.apply(e)==="[object Array]"){for(o={a:{}},r=0,i=e.length;r<i;r++)Ape(o.a,r,n.a[r],xV(e[r]))&&(s=!0);!s&&n.e&&(o.e=ZT(n.e[0],n.e[1]),s=!0)}else{o={s:{}};var a,u=Object.keys(e);for(n&&n.o?(a=[],n.o.concat(u).forEach(function(c){Object.prototype.hasOwnProperty.call(e,c)&&a.indexOf(c)<0&&a.push(c)})):a=u,o.o=a,r=0,i=a.length;r<i;r++){var l=a[r];Ape(o.s,l,n.c[l],xV(e[l]))&&(s=!0)}!s&&n.e&&(o.e=ZT(n.e[0],n.e[1]),s=!0)}return t&&n&&n.r&&(o.r=ZT(n.r[0],n.r[1])),s?o:void 0}}function fLt(){var e="";return[].forEach.call(arguments,function(t){t&&t.trim()!==""&&(e&&(e+="; "),e+=t.trim())}),e}function dLt(e,t){var n=[];if(SV(e,t,n,[]),n.length>0){var r=f3(t,null,1);r+=`
# Orphaned comments:
`,n.forEach(function(i){r+=("# "+i.path.join("/")+": "+fLt(i.b,i.a,i.e)).replace(`
`,"\\n ")+`
`}),f3(t,r,1)}}function Ape(e,t,n,r){var i=ZT(n?n[0]:void 0,n?n[1]:void 0,r);return i&&(e[t]=i),i}function e2(e,t){var n=ZT(t.b,t.a);return n.path=e,n}function t2(e,t,n){if(e){var r,i;if(e.a)for(r=0,i=e.a.length;r<i;r++){var s=n.slice().concat([r]),o=e.a[r];o&&(t.push(e2(s,o)),t2(o.x,t,s))}else e.o&&e.o.forEach(function(a){var u=n.slice().concat([a]),l=e.s[a];l&&(t.push(e2(u,l)),t2(l.x,t,u))});e.e&&t.push(e2(n,e.e))}}function SV(e,t,n,r){if(e){if(t===null||typeof t!="object"){t2(e,n,r);return}var i,s=Lb.createComment(t);if(r.length===0&&e.r&&(s.r=[e.r.b,e.r.a]),Object.prototype.toString.apply(t)==="[object Array]"){s.a=[];var o=e.a||{};for(var a in o)if(o.hasOwnProperty(a)){i=parseInt(a);var u=e.a[a];if(u){var l=r.slice().concat([i]);i<t.length?(s.a[i]=[u.b,u.a],SV(u.x,t[i],n,l)):(n.push(e2(l,u)),t2(u.x,n,l))}}i===0&&e.e&&(s.e=[e.e.b,e.e.a])}else s.c={},s.o=[],(e.o||[]).forEach(function(c){var f=r.slice().concat([c]),d=e.s[c];Object.prototype.hasOwnProperty.call(t,c)?(s.o.push(c),d&&(s.c[c]=[d.b,d.a],SV(d.x,t[c],n,f))):d&&(n.push(e2(f,d)),t2(d.x,n,f))}),e.e&&(s.e=[e.e.b,e.e.a])}}function f3(e,t,n){var r=Lb.createComment(e,Lb.getComment(e));return r.r||(r.r=["",""]),(t||t==="")&&(r.r[n]=Lb.forceComment(t)),r.r[n]||""}var hLt={extract:function(e){return xV(e,!0)},merge:dLt,header:function(e,t){return f3(e,t,0)},footer:function(e,t){return f3(e,t,1)}};/*!
 * Hjson v3.2.1
 * https://hjson.github.io
 *
 * Copyright 2014-2017 Christian Zangl, MIT license
 * Details and documentation:
 * https://github.com/hjson/hjson-js
 *
 * This code is based on the the JSON version by Douglas Crockford:
 * https://github.com/douglascrockford/JSON-js (json_parse.js, json2.js)
 */var Cpe=N4,pLt=sLt,Ipe=lLt,Ope=cLt,mLt=hLt,gLt=WX,GX={parse:Ipe,stringify:Ope,endOfLine:function(){return Cpe.EOL},setEndOfLine:function(e){(e===`
`||e===`\r
`)&&(Cpe.EOL=e)},version:pLt,rt:{parse:function(e,t){return(t=t||{}).keepWsc=!0,Ipe(e,t)},stringify:function(e,t){return(t=t||{}).keepWsc=!0,Ope(e,t)}},comments:mLt,dsf:gLt.std},TV={exports:{}},RDe={},nf={},Dw={},dI={},Cn={},TA={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class n extends t{constructor(v){if(super(),!e.IDENTIFIER.test(v))throw new Error("CodeGen: name must be a valid identifier");this.str=v}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=n;class r extends t{constructor(v){super(),this._items=typeof v=="string"?[v]:v}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const v=this._items[0];return v===""||v==='""'}get str(){var v;return(v=this._str)!==null&&v!==void 0?v:this._str=this._items.reduce((_,b)=>`${_}${b}`,"")}get names(){var v;return(v=this._names)!==null&&v!==void 0?v:this._names=this._items.reduce((_,b)=>(b instanceof n&&(_[b.str]=(_[b.str]||0)+1),_),{})}}e._Code=r,e.nil=new r("");function i(y,...v){const _=[y[0]];let b=0;for(;b<v.length;)a(_,v[b]),_.push(y[++b]);return new r(_)}e._=i;const s=new r("+");function o(y,...v){const _=[h(y[0])];let b=0;for(;b<v.length;)_.push(s),a(_,v[b]),_.push(s,h(y[++b]));return u(_),new r(_)}e.str=o;function a(y,v){v instanceof r?y.push(...v._items):v instanceof n?y.push(v):y.push(f(v))}e.addCodeArg=a;function u(y){let v=1;for(;v<y.length-1;){if(y[v]===s){const _=l(y[v-1],y[v+1]);if(_!==void 0){y.splice(v-1,3,_);continue}y[v++]="+"}v++}}function l(y,v){if(v==='""')return y;if(y==='""')return v;if(typeof y=="string")return v instanceof n||y[y.length-1]!=='"'?void 0:typeof v!="string"?`${y.slice(0,-1)}${v}"`:v[0]==='"'?y.slice(0,-1)+v.slice(1):void 0;if(typeof v=="string"&&v[0]==='"'&&!(y instanceof n))return`"${y}${v.slice(1)}`}function c(y,v){return v.emptyStr()?y:y.emptyStr()?v:o`${y}${v}`}e.strConcat=c;function f(y){return typeof y=="number"||typeof y=="boolean"||y===null?y:h(Array.isArray(y)?y.join(","):y)}function d(y){return new r(h(y))}e.stringify=d;function h(y){return JSON.stringify(y).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=h;function p(y){return typeof y=="string"&&e.IDENTIFIER.test(y)?new r(`.${y}`):i`[${y}]`}e.getProperty=p;function m(y){if(typeof y=="string"&&e.IDENTIFIER.test(y))return new r(`${y}`);throw new Error(`CodeGen: invalid export name: ${y}, use explicit $id name mapping`)}e.getEsmExportName=m;function g(y){return new r(y.toString())}e.regexpCode=g})(TA);var AV={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=TA;class n extends Error{constructor(l){super(`CodeGen: "code" for ${l} not defined`),this.value=l.value}}var r;(function(u){u[u.Started=0]="Started",u[u.Completed=1]="Completed"})(r=e.UsedValueState||(e.UsedValueState={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class i{constructor({prefixes:l,parent:c}={}){this._names={},this._prefixes=l,this._parent=c}toName(l){return l instanceof t.Name?l:this.name(l)}name(l){return new t.Name(this._newName(l))}_newName(l){const c=this._names[l]||this._nameGroup(l);return`${l}${c.index++}`}_nameGroup(l){var c,f;if(!((f=(c=this._parent)===null||c===void 0?void 0:c._prefixes)===null||f===void 0)&&f.has(l)||this._prefixes&&!this._prefixes.has(l))throw new Error(`CodeGen: prefix "${l}" is not allowed in this scope`);return this._names[l]={prefix:l,index:0}}}e.Scope=i;class s extends t.Name{constructor(l,c){super(c),this.prefix=l}setValue(l,{property:c,itemIndex:f}){this.value=l,this.scopePath=(0,t._)`.${new t.Name(c)}[${f}]`}}e.ValueScopeName=s;const o=(0,t._)`\n`;class a extends i{constructor(l){super(l),this._values={},this._scope=l.scope,this.opts={...l,_n:l.lines?o:t.nil}}get(){return this._scope}name(l){return new s(l,this._newName(l))}value(l,c){var f;if(c.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const d=this.toName(l),{prefix:h}=d,p=(f=c.key)!==null&&f!==void 0?f:c.ref;let m=this._values[h];if(m){const v=m.get(p);if(v)return v}else m=this._values[h]=new Map;m.set(p,d);const g=this._scope[h]||(this._scope[h]=[]),y=g.length;return g[y]=c.ref,d.setValue(c,{property:h,itemIndex:y}),d}getValue(l,c){const f=this._values[l];if(f)return f.get(c)}scopeRefs(l,c=this._values){return this._reduceValues(c,f=>{if(f.scopePath===void 0)throw new Error(`CodeGen: name "${f}" has no value`);return(0,t._)`${l}${f.scopePath}`})}scopeCode(l=this._values,c,f){return this._reduceValues(l,d=>{if(d.value===void 0)throw new Error(`CodeGen: name "${d}" has no value`);return d.value.code},c,f)}_reduceValues(l,c,f={},d){let h=t.nil;for(const p in l){const m=l[p];if(!m)continue;const g=f[p]=f[p]||new Map;m.forEach(y=>{if(g.has(y))return;g.set(y,r.Started);let v=c(y);if(v){const _=this.opts.es5?e.varKinds.var:e.varKinds.const;h=(0,t._)`${h}${_} ${y} = ${v};${this.opts._n}`}else if(v=d==null?void 0:d(y))h=(0,t._)`${h}${v}${this.opts._n}`;else throw new n(y);g.set(y,r.Completed)})}return h}}e.ValueScope=a})(AV);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=TA,n=AV;var r=TA;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return r.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return r.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return r.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}});var i=AV;Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return i.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return i.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return i.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return i.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class s{optimizeNodes(){return this}optimizeNames(M,F){return this}}class o extends s{constructor(M,F,J){super(),this.varKind=M,this.name=F,this.rhs=J}render({es5:M,_n:F}){const J=M?n.varKinds.var:this.varKind,se=this.rhs===void 0?"":` = ${this.rhs}`;return`${J} ${this.name}${se};`+F}optimizeNames(M,F){if(M[this.name.str])return this.rhs&&(this.rhs=$(this.rhs,M,F)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class a extends s{constructor(M,F,J){super(),this.lhs=M,this.rhs=F,this.sideEffects=J}render({_n:M}){return`${this.lhs} = ${this.rhs};`+M}optimizeNames(M,F){if(!(this.lhs instanceof t.Name&&!M[this.lhs.str]&&!this.sideEffects))return this.rhs=$(this.rhs,M,F),this}get names(){const M=this.lhs instanceof t.Name?{}:{...this.lhs.names};return N(M,this.rhs)}}class u extends a{constructor(M,F,J,se){super(M,J,se),this.op=F}render({_n:M}){return`${this.lhs} ${this.op}= ${this.rhs};`+M}}class l extends s{constructor(M){super(),this.label=M,this.names={}}render({_n:M}){return`${this.label}:`+M}}class c extends s{constructor(M){super(),this.label=M,this.names={}}render({_n:M}){return`break${this.label?` ${this.label}`:""};`+M}}class f extends s{constructor(M){super(),this.error=M}render({_n:M}){return`throw ${this.error};`+M}get names(){return this.error.names}}class d extends s{constructor(M){super(),this.code=M}render({_n:M}){return`${this.code};`+M}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(M,F){return this.code=$(this.code,M,F),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class h extends s{constructor(M=[]){super(),this.nodes=M}render(M){return this.nodes.reduce((F,J)=>F+J.render(M),"")}optimizeNodes(){const{nodes:M}=this;let F=M.length;for(;F--;){const J=M[F].optimizeNodes();Array.isArray(J)?M.splice(F,1,...J):J?M[F]=J:M.splice(F,1)}return M.length>0?this:void 0}optimizeNames(M,F){const{nodes:J}=this;let se=J.length;for(;se--;){const ae=J[se];ae.optimizeNames(M,F)||(D(M,ae.names),J.splice(se,1))}return J.length>0?this:void 0}get names(){return this.nodes.reduce((M,F)=>z(M,F.names),{})}}class p extends h{render(M){return"{"+M._n+super.render(M)+"}"+M._n}}class m extends h{}class g extends p{}g.kind="else";class y extends p{constructor(M,F){super(F),this.condition=M}render(M){let F=`if(${this.condition})`+super.render(M);return this.else&&(F+="else "+this.else.render(M)),F}optimizeNodes(){super.optimizeNodes();const M=this.condition;if(M===!0)return this.nodes;let F=this.else;if(F){const J=F.optimizeNodes();F=this.else=Array.isArray(J)?new g(J):J}if(F)return M===!1?F instanceof y?F:F.nodes:this.nodes.length?this:new y(B(M),F instanceof y?[F]:F.nodes);if(!(M===!1||!this.nodes.length))return this}optimizeNames(M,F){var J;if(this.else=(J=this.else)===null||J===void 0?void 0:J.optimizeNames(M,F),!!(super.optimizeNames(M,F)||this.else))return this.condition=$(this.condition,M,F),this}get names(){const M=super.names;return N(M,this.condition),this.else&&z(M,this.else.names),M}}y.kind="if";class v extends p{}v.kind="for";class _ extends v{constructor(M){super(),this.iteration=M}render(M){return`for(${this.iteration})`+super.render(M)}optimizeNames(M,F){if(super.optimizeNames(M,F))return this.iteration=$(this.iteration,M,F),this}get names(){return z(super.names,this.iteration.names)}}class b extends v{constructor(M,F,J,se){super(),this.varKind=M,this.name=F,this.from=J,this.to=se}render(M){const F=M.es5?n.varKinds.var:this.varKind,{name:J,from:se,to:ae}=this;return`for(${F} ${J}=${se}; ${J}<${ae}; ${J}++)`+super.render(M)}get names(){const M=N(super.names,this.from);return N(M,this.to)}}class E extends v{constructor(M,F,J,se){super(),this.loop=M,this.varKind=F,this.name=J,this.iterable=se}render(M){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(M)}optimizeNames(M,F){if(super.optimizeNames(M,F))return this.iterable=$(this.iterable,M,F),this}get names(){return z(super.names,this.iterable.names)}}class w extends p{constructor(M,F,J){super(),this.name=M,this.args=F,this.async=J}render(M){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(M)}}w.kind="func";class x extends h{render(M){return"return "+super.render(M)}}x.kind="return";class S extends p{render(M){let F="try"+super.render(M);return this.catch&&(F+=this.catch.render(M)),this.finally&&(F+=this.finally.render(M)),F}optimizeNodes(){var M,F;return super.optimizeNodes(),(M=this.catch)===null||M===void 0||M.optimizeNodes(),(F=this.finally)===null||F===void 0||F.optimizeNodes(),this}optimizeNames(M,F){var J,se;return super.optimizeNames(M,F),(J=this.catch)===null||J===void 0||J.optimizeNames(M,F),(se=this.finally)===null||se===void 0||se.optimizeNames(M,F),this}get names(){const M=super.names;return this.catch&&z(M,this.catch.names),this.finally&&z(M,this.finally.names),M}}class I extends p{constructor(M){super(),this.error=M}render(M){return`catch(${this.error})`+super.render(M)}}I.kind="catch";class C extends p{render(M){return"finally"+super.render(M)}}C.kind="finally";class O{constructor(M,F={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...F,_n:F.lines?`
`:""},this._extScope=M,this._scope=new n.Scope({parent:M}),this._nodes=[new m]}toString(){return this._root.render(this.opts)}name(M){return this._scope.name(M)}scopeName(M){return this._extScope.name(M)}scopeValue(M,F){const J=this._extScope.value(M,F);return(this._values[J.prefix]||(this._values[J.prefix]=new Set)).add(J),J}getScopeValue(M,F){return this._extScope.getValue(M,F)}scopeRefs(M){return this._extScope.scopeRefs(M,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(M,F,J,se){const ae=this._scope.toName(F);return J!==void 0&&se&&(this._constants[ae.str]=J),this._leafNode(new o(M,ae,J)),ae}const(M,F,J){return this._def(n.varKinds.const,M,F,J)}let(M,F,J){return this._def(n.varKinds.let,M,F,J)}var(M,F,J){return this._def(n.varKinds.var,M,F,J)}assign(M,F,J){return this._leafNode(new a(M,F,J))}add(M,F){return this._leafNode(new u(M,e.operators.ADD,F))}code(M){return typeof M=="function"?M():M!==t.nil&&this._leafNode(new d(M)),this}object(...M){const F=["{"];for(const[J,se]of M)F.length>1&&F.push(","),F.push(J),(J!==se||this.opts.es5)&&(F.push(":"),(0,t.addCodeArg)(F,se));return F.push("}"),new t._Code(F)}if(M,F,J){if(this._blockNode(new y(M)),F&&J)this.code(F).else().code(J).endIf();else if(F)this.code(F).endIf();else if(J)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(M){return this._elseNode(new y(M))}else(){return this._elseNode(new g)}endIf(){return this._endBlockNode(y,g)}_for(M,F){return this._blockNode(M),F&&this.code(F).endFor(),this}for(M,F){return this._for(new _(M),F)}forRange(M,F,J,se,ae=this.opts.es5?n.varKinds.var:n.varKinds.let){const ce=this._scope.toName(M);return this._for(new b(ae,ce,F,J),()=>se(ce))}forOf(M,F,J,se=n.varKinds.const){const ae=this._scope.toName(M);if(this.opts.es5){const ce=F instanceof t.Name?F:this.var("_arr",F);return this.forRange("_i",0,(0,t._)`${ce}.length`,le=>{this.var(ae,(0,t._)`${ce}[${le}]`),J(ae)})}return this._for(new E("of",se,ae,F),()=>J(ae))}forIn(M,F,J,se=this.opts.es5?n.varKinds.var:n.varKinds.const){if(this.opts.ownProperties)return this.forOf(M,(0,t._)`Object.keys(${F})`,J);const ae=this._scope.toName(M);return this._for(new E("in",se,ae,F),()=>J(ae))}endFor(){return this._endBlockNode(v)}label(M){return this._leafNode(new l(M))}break(M){return this._leafNode(new c(M))}return(M){const F=new x;if(this._blockNode(F),this.code(M),F.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(x)}try(M,F,J){if(!F&&!J)throw new Error('CodeGen: "try" without "catch" and "finally"');const se=new S;if(this._blockNode(se),this.code(M),F){const ae=this.name("e");this._currNode=se.catch=new I(ae),F(ae)}return J&&(this._currNode=se.finally=new C,this.code(J)),this._endBlockNode(I,C)}throw(M){return this._leafNode(new f(M))}block(M,F){return this._blockStarts.push(this._nodes.length),M&&this.code(M).endBlock(F),this}endBlock(M){const F=this._blockStarts.pop();if(F===void 0)throw new Error("CodeGen: not in self-balancing block");const J=this._nodes.length-F;if(J<0||M!==void 0&&J!==M)throw new Error(`CodeGen: wrong number of nodes: ${J} vs ${M} expected`);return this._nodes.length=F,this}func(M,F=t.nil,J,se){return this._blockNode(new w(M,F,J)),se&&this.code(se).endFunc(),this}endFunc(){return this._endBlockNode(w)}optimize(M=1){for(;M-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(M){return this._currNode.nodes.push(M),this}_blockNode(M){this._currNode.nodes.push(M),this._nodes.push(M)}_endBlockNode(M,F){const J=this._currNode;if(J instanceof M||F&&J instanceof F)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${F?`${M.kind}/${F.kind}`:M.kind}"`)}_elseNode(M){const F=this._currNode;if(!(F instanceof y))throw new Error('CodeGen: "else" without "if"');return this._currNode=F.else=M,this}get _root(){return this._nodes[0]}get _currNode(){const M=this._nodes;return M[M.length-1]}set _currNode(M){const F=this._nodes;F[F.length-1]=M}}e.CodeGen=O;function z(H,M){for(const F in M)H[F]=(H[F]||0)+(M[F]||0);return H}function N(H,M){return M instanceof t._CodeOrName?z(H,M.names):H}function $(H,M,F){if(H instanceof t.Name)return J(H);if(!se(H))return H;return new t._Code(H._items.reduce((ae,ce)=>(ce instanceof t.Name&&(ce=J(ce)),ce instanceof t._Code?ae.push(...ce._items):ae.push(ce),ae),[]));function J(ae){const ce=F[ae.str];return ce===void 0||M[ae.str]!==1?ae:(delete M[ae.str],ce)}function se(ae){return ae instanceof t._Code&&ae._items.some(ce=>ce instanceof t.Name&&M[ce.str]===1&&F[ce.str]!==void 0)}}function D(H,M){for(const F in M)H[F]=(H[F]||0)-(M[F]||0)}function B(H){return typeof H=="boolean"||typeof H=="number"||H===null?!H:(0,t._)`!${k(H)}`}e.not=B;const V=P(e.operators.AND);function j(...H){return H.reduce(V)}e.and=j;const G=P(e.operators.OR);function U(...H){return H.reduce(G)}e.or=U;function P(H){return(M,F)=>M===t.nil?F:F===t.nil?M:(0,t._)`${k(M)} ${H} ${k(F)}`}function k(H){return H instanceof t.Name?H:(0,t._)`(${H})`}})(Cn);var Zn={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.checkStrictMode=e.getErrorPath=e.Type=e.useFunc=e.setEvaluated=e.evaluatedPropsToName=e.mergeEvaluated=e.eachItem=e.unescapeJsonPointer=e.escapeJsonPointer=e.escapeFragment=e.unescapeFragment=e.schemaRefOrVal=e.schemaHasRulesButRef=e.schemaHasRules=e.checkUnknownRules=e.alwaysValidSchema=e.toHash=void 0;const t=Cn,n=TA;function r(w){const x={};for(const S of w)x[S]=!0;return x}e.toHash=r;function i(w,x){return typeof x=="boolean"?x:Object.keys(x).length===0?!0:(s(w,x),!o(x,w.self.RULES.all))}e.alwaysValidSchema=i;function s(w,x=w.schema){const{opts:S,self:I}=w;if(!S.strictSchema||typeof x=="boolean")return;const C=I.RULES.keywords;for(const O in x)C[O]||E(w,`unknown keyword: "${O}"`)}e.checkUnknownRules=s;function o(w,x){if(typeof w=="boolean")return!w;for(const S in w)if(x[S])return!0;return!1}e.schemaHasRules=o;function a(w,x){if(typeof w=="boolean")return!w;for(const S in w)if(S!=="$ref"&&x.all[S])return!0;return!1}e.schemaHasRulesButRef=a;function u({topSchemaRef:w,schemaPath:x},S,I,C){if(!C){if(typeof S=="number"||typeof S=="boolean")return S;if(typeof S=="string")return(0,t._)`${S}`}return(0,t._)`${w}${x}${(0,t.getProperty)(I)}`}e.schemaRefOrVal=u;function l(w){return d(decodeURIComponent(w))}e.unescapeFragment=l;function c(w){return encodeURIComponent(f(w))}e.escapeFragment=c;function f(w){return typeof w=="number"?`${w}`:w.replace(/~/g,"~0").replace(/\//g,"~1")}e.escapeJsonPointer=f;function d(w){return w.replace(/~1/g,"/").replace(/~0/g,"~")}e.unescapeJsonPointer=d;function h(w,x){if(Array.isArray(w))for(const S of w)x(S);else x(w)}e.eachItem=h;function p({mergeNames:w,mergeToName:x,mergeValues:S,resultToName:I}){return(C,O,z,N)=>{const $=z===void 0?O:z instanceof t.Name?(O instanceof t.Name?w(C,O,z):x(C,O,z),z):O instanceof t.Name?(x(C,z,O),O):S(O,z);return N===t.Name&&!($ instanceof t.Name)?I(C,$):$}}e.mergeEvaluated={props:p({mergeNames:(w,x,S)=>w.if((0,t._)`${S} !== true && ${x} !== undefined`,()=>{w.if((0,t._)`${x} === true`,()=>w.assign(S,!0),()=>w.assign(S,(0,t._)`${S} || {}`).code((0,t._)`Object.assign(${S}, ${x})`))}),mergeToName:(w,x,S)=>w.if((0,t._)`${S} !== true`,()=>{x===!0?w.assign(S,!0):(w.assign(S,(0,t._)`${S} || {}`),g(w,S,x))}),mergeValues:(w,x)=>w===!0?!0:{...w,...x},resultToName:m}),items:p({mergeNames:(w,x,S)=>w.if((0,t._)`${S} !== true && ${x} !== undefined`,()=>w.assign(S,(0,t._)`${x} === true ? true : ${S} > ${x} ? ${S} : ${x}`)),mergeToName:(w,x,S)=>w.if((0,t._)`${S} !== true`,()=>w.assign(S,x===!0?!0:(0,t._)`${S} > ${x} ? ${S} : ${x}`)),mergeValues:(w,x)=>w===!0?!0:Math.max(w,x),resultToName:(w,x)=>w.var("items",x)})};function m(w,x){if(x===!0)return w.var("props",!0);const S=w.var("props",(0,t._)`{}`);return x!==void 0&&g(w,S,x),S}e.evaluatedPropsToName=m;function g(w,x,S){Object.keys(S).forEach(I=>w.assign((0,t._)`${x}${(0,t.getProperty)(I)}`,!0))}e.setEvaluated=g;const y={};function v(w,x){return w.scopeValue("func",{ref:x,code:y[x.code]||(y[x.code]=new n._Code(x.code))})}e.useFunc=v;var _;(function(w){w[w.Num=0]="Num",w[w.Str=1]="Str"})(_=e.Type||(e.Type={}));function b(w,x,S){if(w instanceof t.Name){const I=x===_.Num;return S?I?(0,t._)`"[" + ${w} + "]"`:(0,t._)`"['" + ${w} + "']"`:I?(0,t._)`"/" + ${w}`:(0,t._)`"/" + ${w}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return S?(0,t.getProperty)(w).toString():"/"+f(w)}e.getErrorPath=b;function E(w,x,S=w.opts.strictSchema){if(S){if(x=`strict mode: ${x}`,S===!0)throw new Error(x);w.self.logger.warn(x)}}e.checkStrictMode=E})(Zn);var sh={};Object.defineProperty(sh,"__esModule",{value:!0});const ko=Cn,yLt={data:new ko.Name("data"),valCxt:new ko.Name("valCxt"),instancePath:new ko.Name("instancePath"),parentData:new ko.Name("parentData"),parentDataProperty:new ko.Name("parentDataProperty"),rootData:new ko.Name("rootData"),dynamicAnchors:new ko.Name("dynamicAnchors"),vErrors:new ko.Name("vErrors"),errors:new ko.Name("errors"),this:new ko.Name("this"),self:new ko.Name("self"),scope:new ko.Name("scope"),json:new ko.Name("json"),jsonPos:new ko.Name("jsonPos"),jsonLen:new ko.Name("jsonLen"),jsonPart:new ko.Name("jsonPart")};sh.default=yLt;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=Cn,n=Zn,r=sh;e.keywordError={message:({keyword:g})=>(0,t.str)`must pass "${g}" keyword validation`},e.keyword$DataError={message:({keyword:g,schemaType:y})=>y?(0,t.str)`"${g}" keyword must be ${y} ($data)`:(0,t.str)`"${g}" keyword is invalid ($data)`};function i(g,y=e.keywordError,v,_){const{it:b}=g,{gen:E,compositeRule:w,allErrors:x}=b,S=f(g,y,v);_??(w||x)?u(E,S):l(b,(0,t._)`[${S}]`)}e.reportError=i;function s(g,y=e.keywordError,v){const{it:_}=g,{gen:b,compositeRule:E,allErrors:w}=_,x=f(g,y,v);u(b,x),E||w||l(_,r.default.vErrors)}e.reportExtraError=s;function o(g,y){g.assign(r.default.errors,y),g.if((0,t._)`${r.default.vErrors} !== null`,()=>g.if(y,()=>g.assign((0,t._)`${r.default.vErrors}.length`,y),()=>g.assign(r.default.vErrors,null)))}e.resetErrorsCount=o;function a({gen:g,keyword:y,schemaValue:v,data:_,errsCount:b,it:E}){if(b===void 0)throw new Error("ajv implementation error");const w=g.name("err");g.forRange("i",b,r.default.errors,x=>{g.const(w,(0,t._)`${r.default.vErrors}[${x}]`),g.if((0,t._)`${w}.instancePath === undefined`,()=>g.assign((0,t._)`${w}.instancePath`,(0,t.strConcat)(r.default.instancePath,E.errorPath))),g.assign((0,t._)`${w}.schemaPath`,(0,t.str)`${E.errSchemaPath}/${y}`),E.opts.verbose&&(g.assign((0,t._)`${w}.schema`,v),g.assign((0,t._)`${w}.data`,_))})}e.extendErrors=a;function u(g,y){const v=g.const("err",y);g.if((0,t._)`${r.default.vErrors} === null`,()=>g.assign(r.default.vErrors,(0,t._)`[${v}]`),(0,t._)`${r.default.vErrors}.push(${v})`),g.code((0,t._)`${r.default.errors}++`)}function l(g,y){const{gen:v,validateName:_,schemaEnv:b}=g;b.$async?v.throw((0,t._)`new ${g.ValidationError}(${y})`):(v.assign((0,t._)`${_}.errors`,y),v.return(!1))}const c={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function f(g,y,v){const{createErrors:_}=g.it;return _===!1?(0,t._)`{}`:d(g,y,v)}function d(g,y,v={}){const{gen:_,it:b}=g,E=[h(b,v),p(g,v)];return m(g,y,E),_.object(...E)}function h({errorPath:g},{instancePath:y}){const v=y?(0,t.str)`${g}${(0,n.getErrorPath)(y,n.Type.Str)}`:g;return[r.default.instancePath,(0,t.strConcat)(r.default.instancePath,v)]}function p({keyword:g,it:{errSchemaPath:y}},{schemaPath:v,parentSchema:_}){let b=_?y:(0,t.str)`${y}/${g}`;return v&&(b=(0,t.str)`${b}${(0,n.getErrorPath)(v,n.Type.Str)}`),[c.schemaPath,b]}function m(g,{params:y,message:v},_){const{keyword:b,data:E,schemaValue:w,it:x}=g,{opts:S,propertyName:I,topSchemaRef:C,schemaPath:O}=x;_.push([c.keyword,b],[c.params,typeof y=="function"?y(g):y||(0,t._)`{}`]),S.messages&&_.push([c.message,typeof v=="function"?v(g):v]),S.verbose&&_.push([c.schema,w],[c.parentSchema,(0,t._)`${C}${O}`],[r.default.data,E]),I&&_.push([c.propertyName,I])}})(dI);Object.defineProperty(Dw,"__esModule",{value:!0});Dw.boolOrEmptySchema=Dw.topBoolOrEmptySchema=void 0;const vLt=dI,_Lt=Cn,bLt=sh,wLt={message:"boolean schema is false"};function ELt(e){const{gen:t,schema:n,validateName:r}=e;n===!1?NDe(e,!1):typeof n=="object"&&n.$async===!0?t.return(bLt.default.data):(t.assign((0,_Lt._)`${r}.errors`,null),t.return(!0))}Dw.topBoolOrEmptySchema=ELt;function xLt(e,t){const{gen:n,schema:r}=e;r===!1?(n.var(t,!1),NDe(e)):n.var(t,!0)}Dw.boolOrEmptySchema=xLt;function NDe(e,t){const{gen:n,data:r}=e,i={gen:n,keyword:"false schema",data:r,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,vLt.reportError)(i,wLt,void 0,t)}var hI={},j1={};Object.defineProperty(j1,"__esModule",{value:!0});j1.getRules=j1.isJSONType=void 0;const SLt=["string","number","integer","boolean","null","object","array"],TLt=new Set(SLt);function ALt(e){return typeof e=="string"&&TLt.has(e)}j1.isJSONType=ALt;function CLt(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}j1.getRules=CLt;var cp={};Object.defineProperty(cp,"__esModule",{value:!0});cp.shouldUseRule=cp.shouldUseGroup=cp.schemaHasRulesForType=void 0;function ILt({schema:e,self:t},n){const r=t.RULES.types[n];return r&&r!==!0&&DDe(e,r)}cp.schemaHasRulesForType=ILt;function DDe(e,t){return t.rules.some(n=>LDe(e,n))}cp.shouldUseGroup=DDe;function LDe(e,t){var n;return e[t.keyword]!==void 0||((n=t.definition.implements)===null||n===void 0?void 0:n.some(r=>e[r]!==void 0))}cp.shouldUseRule=LDe;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.reportTypeError=e.checkDataTypes=e.checkDataType=e.coerceAndCheckDataType=e.getJSONTypes=e.getSchemaTypes=e.DataType=void 0;const t=j1,n=cp,r=dI,i=Cn,s=Zn;var o;(function(_){_[_.Correct=0]="Correct",_[_.Wrong=1]="Wrong"})(o=e.DataType||(e.DataType={}));function a(_){const b=u(_.type);if(b.includes("null")){if(_.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!b.length&&_.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');_.nullable===!0&&b.push("null")}return b}e.getSchemaTypes=a;function u(_){const b=Array.isArray(_)?_:_?[_]:[];if(b.every(t.isJSONType))return b;throw new Error("type must be JSONType or JSONType[]: "+b.join(","))}e.getJSONTypes=u;function l(_,b){const{gen:E,data:w,opts:x}=_,S=f(b,x.coerceTypes),I=b.length>0&&!(S.length===0&&b.length===1&&(0,n.schemaHasRulesForType)(_,b[0]));if(I){const C=m(b,w,x.strictNumbers,o.Wrong);E.if(C,()=>{S.length?d(_,b,S):y(_)})}return I}e.coerceAndCheckDataType=l;const c=new Set(["string","number","integer","boolean","null"]);function f(_,b){return b?_.filter(E=>c.has(E)||b==="array"&&E==="array"):[]}function d(_,b,E){const{gen:w,data:x,opts:S}=_,I=w.let("dataType",(0,i._)`typeof ${x}`),C=w.let("coerced",(0,i._)`undefined`);S.coerceTypes==="array"&&w.if((0,i._)`${I} == 'object' && Array.isArray(${x}) && ${x}.length == 1`,()=>w.assign(x,(0,i._)`${x}[0]`).assign(I,(0,i._)`typeof ${x}`).if(m(b,x,S.strictNumbers),()=>w.assign(C,x))),w.if((0,i._)`${C} !== undefined`);for(const z of E)(c.has(z)||z==="array"&&S.coerceTypes==="array")&&O(z);w.else(),y(_),w.endIf(),w.if((0,i._)`${C} !== undefined`,()=>{w.assign(x,C),h(_,C)});function O(z){switch(z){case"string":w.elseIf((0,i._)`${I} == "number" || ${I} == "boolean"`).assign(C,(0,i._)`"" + ${x}`).elseIf((0,i._)`${x} === null`).assign(C,(0,i._)`""`);return;case"number":w.elseIf((0,i._)`${I} == "boolean" || ${x} === null
              || (${I} == "string" && ${x} && ${x} == +${x})`).assign(C,(0,i._)`+${x}`);return;case"integer":w.elseIf((0,i._)`${I} === "boolean" || ${x} === null
              || (${I} === "string" && ${x} && ${x} == +${x} && !(${x} % 1))`).assign(C,(0,i._)`+${x}`);return;case"boolean":w.elseIf((0,i._)`${x} === "false" || ${x} === 0 || ${x} === null`).assign(C,!1).elseIf((0,i._)`${x} === "true" || ${x} === 1`).assign(C,!0);return;case"null":w.elseIf((0,i._)`${x} === "" || ${x} === 0 || ${x} === false`),w.assign(C,null);return;case"array":w.elseIf((0,i._)`${I} === "string" || ${I} === "number"
              || ${I} === "boolean" || ${x} === null`).assign(C,(0,i._)`[${x}]`)}}}function h({gen:_,parentData:b,parentDataProperty:E},w){_.if((0,i._)`${b} !== undefined`,()=>_.assign((0,i._)`${b}[${E}]`,w))}function p(_,b,E,w=o.Correct){const x=w===o.Correct?i.operators.EQ:i.operators.NEQ;let S;switch(_){case"null":return(0,i._)`${b} ${x} null`;case"array":S=(0,i._)`Array.isArray(${b})`;break;case"object":S=(0,i._)`${b} && typeof ${b} == "object" && !Array.isArray(${b})`;break;case"integer":S=I((0,i._)`!(${b} % 1) && !isNaN(${b})`);break;case"number":S=I();break;default:return(0,i._)`typeof ${b} ${x} ${_}`}return w===o.Correct?S:(0,i.not)(S);function I(C=i.nil){return(0,i.and)((0,i._)`typeof ${b} == "number"`,C,E?(0,i._)`isFinite(${b})`:i.nil)}}e.checkDataType=p;function m(_,b,E,w){if(_.length===1)return p(_[0],b,E,w);let x;const S=(0,s.toHash)(_);if(S.array&&S.object){const I=(0,i._)`typeof ${b} != "object"`;x=S.null?I:(0,i._)`!${b} || ${I}`,delete S.null,delete S.array,delete S.object}else x=i.nil;S.number&&delete S.integer;for(const I in S)x=(0,i.and)(x,p(I,b,E,w));return x}e.checkDataTypes=m;const g={message:({schema:_})=>`must be ${_}`,params:({schema:_,schemaValue:b})=>typeof _=="string"?(0,i._)`{type: ${_}}`:(0,i._)`{type: ${b}}`};function y(_){const b=v(_);(0,r.reportError)(b,g)}e.reportTypeError=y;function v(_){const{gen:b,data:E,schema:w}=_,x=(0,s.schemaRefOrVal)(_,w,"type");return{gen:b,keyword:"type",data:E,schema:w.type,schemaCode:x,schemaValue:x,parentSchema:w,params:{},it:_}}})(hI);var D4={};Object.defineProperty(D4,"__esModule",{value:!0});D4.assignDefaults=void 0;const d_=Cn,OLt=Zn;function PLt(e,t){const{properties:n,items:r}=e.schema;if(t==="object"&&n)for(const i in n)Ppe(e,i,n[i].default);else t==="array"&&Array.isArray(r)&&r.forEach((i,s)=>Ppe(e,s,i.default))}D4.assignDefaults=PLt;function Ppe(e,t,n){const{gen:r,compositeRule:i,data:s,opts:o}=e;if(n===void 0)return;const a=(0,d_._)`${s}${(0,d_.getProperty)(t)}`;if(i){(0,OLt.checkStrictMode)(e,`default is ignored for: ${a}`);return}let u=(0,d_._)`${a} === undefined`;o.useDefaults==="empty"&&(u=(0,d_._)`${u} || ${a} === null || ${a} === ""`),r.if(u,(0,d_._)`${a} = ${(0,d_.stringify)(n)}`)}var pd={},Tn={};Object.defineProperty(Tn,"__esModule",{value:!0});Tn.validateUnion=Tn.validateArray=Tn.usePattern=Tn.callValidateCode=Tn.schemaProperties=Tn.allSchemaProperties=Tn.noPropertyInData=Tn.propertyInData=Tn.isOwnProperty=Tn.hasPropFunc=Tn.reportMissingProp=Tn.checkMissingProp=Tn.checkReportMissingProp=void 0;const Yr=Cn,YX=Zn,pm=sh,kLt=Zn;function $Lt(e,t){const{gen:n,data:r,it:i}=e;n.if(XX(n,r,t,i.opts.ownProperties),()=>{e.setParams({missingProperty:(0,Yr._)`${t}`},!0),e.error()})}Tn.checkReportMissingProp=$Lt;function RLt({gen:e,data:t,it:{opts:n}},r,i){return(0,Yr.or)(...r.map(s=>(0,Yr.and)(XX(e,t,s,n.ownProperties),(0,Yr._)`${i} = ${s}`)))}Tn.checkMissingProp=RLt;function NLt(e,t){e.setParams({missingProperty:t},!0),e.error()}Tn.reportMissingProp=NLt;function MDe(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,Yr._)`Object.prototype.hasOwnProperty`})}Tn.hasPropFunc=MDe;function KX(e,t,n){return(0,Yr._)`${MDe(e)}.call(${t}, ${n})`}Tn.isOwnProperty=KX;function DLt(e,t,n,r){const i=(0,Yr._)`${t}${(0,Yr.getProperty)(n)} !== undefined`;return r?(0,Yr._)`${i} && ${KX(e,t,n)}`:i}Tn.propertyInData=DLt;function XX(e,t,n,r){const i=(0,Yr._)`${t}${(0,Yr.getProperty)(n)} === undefined`;return r?(0,Yr.or)(i,(0,Yr.not)(KX(e,t,n))):i}Tn.noPropertyInData=XX;function FDe(e){return e?Object.keys(e).filter(t=>t!=="__proto__"):[]}Tn.allSchemaProperties=FDe;function LLt(e,t){return FDe(t).filter(n=>!(0,YX.alwaysValidSchema)(e,t[n]))}Tn.schemaProperties=LLt;function MLt({schemaCode:e,data:t,it:{gen:n,topSchemaRef:r,schemaPath:i,errorPath:s},it:o},a,u,l){const c=l?(0,Yr._)`${e}, ${t}, ${r}${i}`:t,f=[[pm.default.instancePath,(0,Yr.strConcat)(pm.default.instancePath,s)],[pm.default.parentData,o.parentData],[pm.default.parentDataProperty,o.parentDataProperty],[pm.default.rootData,pm.default.rootData]];o.opts.dynamicRef&&f.push([pm.default.dynamicAnchors,pm.default.dynamicAnchors]);const d=(0,Yr._)`${c}, ${n.object(...f)}`;return u!==Yr.nil?(0,Yr._)`${a}.call(${u}, ${d})`:(0,Yr._)`${a}(${d})`}Tn.callValidateCode=MLt;const FLt=(0,Yr._)`new RegExp`;function BLt({gen:e,it:{opts:t}},n){const r=t.unicodeRegExp?"u":"",{regExp:i}=t.code,s=i(n,r);return e.scopeValue("pattern",{key:s.toString(),ref:s,code:(0,Yr._)`${i.code==="new RegExp"?FLt:(0,kLt.useFunc)(e,i)}(${n}, ${r})`})}Tn.usePattern=BLt;function jLt(e){const{gen:t,data:n,keyword:r,it:i}=e,s=t.name("valid");if(i.allErrors){const a=t.let("valid",!0);return o(()=>t.assign(a,!1)),a}return t.var(s,!0),o(()=>t.break()),s;function o(a){const u=t.const("len",(0,Yr._)`${n}.length`);t.forRange("i",0,u,l=>{e.subschema({keyword:r,dataProp:l,dataPropType:YX.Type.Num},s),t.if((0,Yr.not)(s),a)})}}Tn.validateArray=jLt;function zLt(e){const{gen:t,schema:n,keyword:r,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(n.some(u=>(0,YX.alwaysValidSchema)(i,u))&&!i.opts.unevaluated)return;const o=t.let("valid",!1),a=t.name("_valid");t.block(()=>n.forEach((u,l)=>{const c=e.subschema({keyword:r,schemaProp:l,compositeRule:!0},a);t.assign(o,(0,Yr._)`${o} || ${a}`),e.mergeValidEvaluated(c,a)||t.if((0,Yr.not)(o))})),e.result(o,()=>e.reset(),()=>e.error(!0))}Tn.validateUnion=zLt;Object.defineProperty(pd,"__esModule",{value:!0});pd.validateKeywordUsage=pd.validSchemaType=pd.funcKeywordCode=pd.macroKeywordCode=void 0;const ha=Cn,Oy=sh,ULt=Tn,VLt=dI;function HLt(e,t){const{gen:n,keyword:r,schema:i,parentSchema:s,it:o}=e,a=t.macro.call(o.self,i,s,o),u=BDe(n,r,a);o.opts.validateSchema!==!1&&o.self.validateSchema(a,!0);const l=n.name("valid");e.subschema({schema:a,schemaPath:ha.nil,errSchemaPath:`${o.errSchemaPath}/${r}`,topSchemaRef:u,compositeRule:!0},l),e.pass(l,()=>e.error(!0))}pd.macroKeywordCode=HLt;function qLt(e,t){var n;const{gen:r,keyword:i,schema:s,parentSchema:o,$data:a,it:u}=e;GLt(u,t);const l=!a&&t.compile?t.compile.call(u.self,s,o,u):t.validate,c=BDe(r,i,l),f=r.let("valid");e.block$data(f,d),e.ok((n=t.valid)!==null&&n!==void 0?n:f);function d(){if(t.errors===!1)m(),t.modifying&&kpe(e),g(()=>e.error());else{const y=t.async?h():p();t.modifying&&kpe(e),g(()=>WLt(e,y))}}function h(){const y=r.let("ruleErrs",null);return r.try(()=>m((0,ha._)`await `),v=>r.assign(f,!1).if((0,ha._)`${v} instanceof ${u.ValidationError}`,()=>r.assign(y,(0,ha._)`${v}.errors`),()=>r.throw(v))),y}function p(){const y=(0,ha._)`${c}.errors`;return r.assign(y,null),m(ha.nil),y}function m(y=t.async?(0,ha._)`await `:ha.nil){const v=u.opts.passContext?Oy.default.this:Oy.default.self,_=!("compile"in t&&!a||t.schema===!1);r.assign(f,(0,ha._)`${y}${(0,ULt.callValidateCode)(e,c,v,_)}`,t.modifying)}function g(y){var v;r.if((0,ha.not)((v=t.valid)!==null&&v!==void 0?v:f),y)}}pd.funcKeywordCode=qLt;function kpe(e){const{gen:t,data:n,it:r}=e;t.if(r.parentData,()=>t.assign(n,(0,ha._)`${r.parentData}[${r.parentDataProperty}]`))}function WLt(e,t){const{gen:n}=e;n.if((0,ha._)`Array.isArray(${t})`,()=>{n.assign(Oy.default.vErrors,(0,ha._)`${Oy.default.vErrors} === null ? ${t} : ${Oy.default.vErrors}.concat(${t})`).assign(Oy.default.errors,(0,ha._)`${Oy.default.vErrors}.length`),(0,VLt.extendErrors)(e)},()=>e.error())}function GLt({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}function BDe(e,t,n){if(n===void 0)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword",typeof n=="function"?{ref:n}:{ref:n,code:(0,ha.stringify)(n)})}function YLt(e,t,n=!1){return!t.length||t.some(r=>r==="array"?Array.isArray(e):r==="object"?e&&typeof e=="object"&&!Array.isArray(e):typeof e==r||n&&typeof e>"u")}pd.validSchemaType=YLt;function KLt({schema:e,opts:t,self:n,errSchemaPath:r},i,s){if(Array.isArray(i.keyword)?!i.keyword.includes(s):i.keyword!==s)throw new Error("ajv implementation error");const o=i.dependencies;if(o!=null&&o.some(a=>!Object.prototype.hasOwnProperty.call(e,a)))throw new Error(`parent schema must have dependencies of ${s}: ${o.join(",")}`);if(i.validateSchema&&!i.validateSchema(e[s])){const u=`keyword "${s}" value is invalid at path "${r}": `+n.errorsText(i.validateSchema.errors);if(t.validateSchema==="log")n.logger.error(u);else throw new Error(u)}}pd.validateKeywordUsage=KLt;var Sg={};Object.defineProperty(Sg,"__esModule",{value:!0});Sg.extendSubschemaMode=Sg.extendSubschemaData=Sg.getSubschema=void 0;const ad=Cn,jDe=Zn;function XLt(e,{keyword:t,schemaProp:n,schema:r,schemaPath:i,errSchemaPath:s,topSchemaRef:o}){if(t!==void 0&&r!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(t!==void 0){const a=e.schema[t];return n===void 0?{schema:a,schemaPath:(0,ad._)`${e.schemaPath}${(0,ad.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:a[n],schemaPath:(0,ad._)`${e.schemaPath}${(0,ad.getProperty)(t)}${(0,ad.getProperty)(n)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,jDe.escapeFragment)(n)}`}}if(r!==void 0){if(i===void 0||s===void 0||o===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:r,schemaPath:i,topSchemaRef:o,errSchemaPath:s}}throw new Error('either "keyword" or "schema" must be passed')}Sg.getSubschema=XLt;function QLt(e,t,{dataProp:n,dataPropType:r,data:i,dataTypes:s,propertyName:o}){if(i!==void 0&&n!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:a}=t;if(n!==void 0){const{errorPath:l,dataPathArr:c,opts:f}=t,d=a.let("data",(0,ad._)`${t.data}${(0,ad.getProperty)(n)}`,!0);u(d),e.errorPath=(0,ad.str)`${l}${(0,jDe.getErrorPath)(n,r,f.jsPropertySyntax)}`,e.parentDataProperty=(0,ad._)`${n}`,e.dataPathArr=[...c,e.parentDataProperty]}if(i!==void 0){const l=i instanceof ad.Name?i:a.let("data",i,!0);u(l),o!==void 0&&(e.propertyName=o)}s&&(e.dataTypes=s);function u(l){e.data=l,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,l]}}Sg.extendSubschemaData=QLt;function JLt(e,{jtdDiscriminator:t,jtdMetadata:n,compositeRule:r,createErrors:i,allErrors:s}){r!==void 0&&(e.compositeRule=r),i!==void 0&&(e.createErrors=i),s!==void 0&&(e.allErrors=s),e.jtdDiscriminator=t,e.jtdMetadata=n}Sg.extendSubschemaMode=JLt;var uo={},zDe={exports:{}},Jm=zDe.exports=function(e,t,n){typeof t=="function"&&(n=t,t={}),n=t.cb||n;var r=typeof n=="function"?n:n.pre||function(){},i=n.post||function(){};c$(t,r,i,e,"",e)};Jm.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};Jm.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};Jm.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};Jm.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function c$(e,t,n,r,i,s,o,a,u,l){if(r&&typeof r=="object"&&!Array.isArray(r)){t(r,i,s,o,a,u,l);for(var c in r){var f=r[c];if(Array.isArray(f)){if(c in Jm.arrayKeywords)for(var d=0;d<f.length;d++)c$(e,t,n,f[d],i+"/"+c+"/"+d,s,i,c,r,d)}else if(c in Jm.propsKeywords){if(f&&typeof f=="object")for(var h in f)c$(e,t,n,f[h],i+"/"+c+"/"+ZLt(h),s,i,c,r,h)}else(c in Jm.keywords||e.allKeys&&!(c in Jm.skipKeywords))&&c$(e,t,n,f,i+"/"+c,s,i,c,r)}n(r,i,s,o,a,u,l)}}function ZLt(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}var eMt=zDe.exports;Object.defineProperty(uo,"__esModule",{value:!0});uo.getSchemaRefs=uo.resolveUrl=uo.normalizeId=uo._getFullPath=uo.getFullPath=uo.inlineRef=void 0;const tMt=Zn,nMt=dY,rMt=eMt,iMt=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function sMt(e,t=!0){return typeof e=="boolean"?!0:t===!0?!CV(e):t?UDe(e)<=t:!1}uo.inlineRef=sMt;const oMt=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function CV(e){for(const t in e){if(oMt.has(t))return!0;const n=e[t];if(Array.isArray(n)&&n.some(CV)||typeof n=="object"&&CV(n))return!0}return!1}function UDe(e){let t=0;for(const n in e){if(n==="$ref")return 1/0;if(t++,!iMt.has(n)&&(typeof e[n]=="object"&&(0,tMt.eachItem)(e[n],r=>t+=UDe(r)),t===1/0))return 1/0}return t}function VDe(e,t="",n){n!==!1&&(t=Mb(t));const r=e.parse(t);return HDe(e,r)}uo.getFullPath=VDe;function HDe(e,t){return e.serialize(t).split("#")[0]+"#"}uo._getFullPath=HDe;const aMt=/#\/?$/;function Mb(e){return e?e.replace(aMt,""):""}uo.normalizeId=Mb;function uMt(e,t,n){return n=Mb(n),e.resolve(t,n)}uo.resolveUrl=uMt;const lMt=/^[a-z_][-a-z0-9._]*$/i;function cMt(e,t){if(typeof e=="boolean")return{};const{schemaId:n,uriResolver:r}=this.opts,i=Mb(e[n]||t),s={"":i},o=VDe(r,i,!1),a={},u=new Set;return rMt(e,{allKeys:!0},(f,d,h,p)=>{if(p===void 0)return;const m=o+d;let g=s[p];typeof f[n]=="string"&&(g=y.call(this,f[n])),v.call(this,f.$anchor),v.call(this,f.$dynamicAnchor),s[d]=g;function y(_){const b=this.opts.uriResolver.resolve;if(_=Mb(g?b(g,_):_),u.has(_))throw c(_);u.add(_);let E=this.refs[_];return typeof E=="string"&&(E=this.refs[E]),typeof E=="object"?l(f,E.schema,_):_!==Mb(m)&&(_[0]==="#"?(l(f,a[_],_),a[_]=f):this.refs[_]=m),_}function v(_){if(typeof _=="string"){if(!lMt.test(_))throw new Error(`invalid anchor "${_}"`);y.call(this,`#${_}`)}}}),a;function l(f,d,h){if(d!==void 0&&!nMt(f,d))throw c(h)}function c(f){return new Error(`reference "${f}" resolves to more than one schema`)}}uo.getSchemaRefs=cMt;Object.defineProperty(nf,"__esModule",{value:!0});nf.getData=nf.KeywordCxt=nf.validateFunctionCode=void 0;const qDe=Dw,$pe=hI,QX=cp,d3=hI,fMt=D4,n2=pd,VB=Sg,It=Cn,Gt=sh,dMt=uo,fp=Zn,aS=dI;function hMt(e){if(YDe(e)&&(KDe(e),GDe(e))){gMt(e);return}WDe(e,()=>(0,qDe.topBoolOrEmptySchema)(e))}nf.validateFunctionCode=hMt;function WDe({gen:e,validateName:t,schema:n,schemaEnv:r,opts:i},s){i.code.es5?e.func(t,(0,It._)`${Gt.default.data}, ${Gt.default.valCxt}`,r.$async,()=>{e.code((0,It._)`"use strict"; ${Rpe(n,i)}`),mMt(e,i),e.code(s)}):e.func(t,(0,It._)`${Gt.default.data}, ${pMt(i)}`,r.$async,()=>e.code(Rpe(n,i)).code(s))}function pMt(e){return(0,It._)`{${Gt.default.instancePath}="", ${Gt.default.parentData}, ${Gt.default.parentDataProperty}, ${Gt.default.rootData}=${Gt.default.data}${e.dynamicRef?(0,It._)`, ${Gt.default.dynamicAnchors}={}`:It.nil}}={}`}function mMt(e,t){e.if(Gt.default.valCxt,()=>{e.var(Gt.default.instancePath,(0,It._)`${Gt.default.valCxt}.${Gt.default.instancePath}`),e.var(Gt.default.parentData,(0,It._)`${Gt.default.valCxt}.${Gt.default.parentData}`),e.var(Gt.default.parentDataProperty,(0,It._)`${Gt.default.valCxt}.${Gt.default.parentDataProperty}`),e.var(Gt.default.rootData,(0,It._)`${Gt.default.valCxt}.${Gt.default.rootData}`),t.dynamicRef&&e.var(Gt.default.dynamicAnchors,(0,It._)`${Gt.default.valCxt}.${Gt.default.dynamicAnchors}`)},()=>{e.var(Gt.default.instancePath,(0,It._)`""`),e.var(Gt.default.parentData,(0,It._)`undefined`),e.var(Gt.default.parentDataProperty,(0,It._)`undefined`),e.var(Gt.default.rootData,Gt.default.data),t.dynamicRef&&e.var(Gt.default.dynamicAnchors,(0,It._)`{}`)})}function gMt(e){const{schema:t,opts:n,gen:r}=e;WDe(e,()=>{n.$comment&&t.$comment&&QDe(e),wMt(e),r.let(Gt.default.vErrors,null),r.let(Gt.default.errors,0),n.unevaluated&&yMt(e),XDe(e),SMt(e)})}function yMt(e){const{gen:t,validateName:n}=e;e.evaluated=t.const("evaluated",(0,It._)`${n}.evaluated`),t.if((0,It._)`${e.evaluated}.dynamicProps`,()=>t.assign((0,It._)`${e.evaluated}.props`,(0,It._)`undefined`)),t.if((0,It._)`${e.evaluated}.dynamicItems`,()=>t.assign((0,It._)`${e.evaluated}.items`,(0,It._)`undefined`))}function Rpe(e,t){const n=typeof e=="object"&&e[t.schemaId];return n&&(t.code.source||t.code.process)?(0,It._)`/*# sourceURL=${n} */`:It.nil}function vMt(e,t){if(YDe(e)&&(KDe(e),GDe(e))){_Mt(e,t);return}(0,qDe.boolOrEmptySchema)(e,t)}function GDe({schema:e,self:t}){if(typeof e=="boolean")return!e;for(const n in e)if(t.RULES.all[n])return!0;return!1}function YDe(e){return typeof e.schema!="boolean"}function _Mt(e,t){const{schema:n,gen:r,opts:i}=e;i.$comment&&n.$comment&&QDe(e),EMt(e),xMt(e);const s=r.const("_errs",Gt.default.errors);XDe(e,s),r.var(t,(0,It._)`${s} === ${Gt.default.errors}`)}function KDe(e){(0,fp.checkUnknownRules)(e),bMt(e)}function XDe(e,t){if(e.opts.jtd)return Npe(e,[],!1,t);const n=(0,$pe.getSchemaTypes)(e.schema),r=(0,$pe.coerceAndCheckDataType)(e,n);Npe(e,n,!r,t)}function bMt(e){const{schema:t,errSchemaPath:n,opts:r,self:i}=e;t.$ref&&r.ignoreKeywordsWithRef&&(0,fp.schemaHasRulesButRef)(t,i.RULES)&&i.logger.warn(`$ref: keywords ignored in schema at path "${n}"`)}function wMt(e){const{schema:t,opts:n}=e;t.default!==void 0&&n.useDefaults&&n.strictSchema&&(0,fp.checkStrictMode)(e,"default is ignored in the schema root")}function EMt(e){const t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,dMt.resolveUrl)(e.opts.uriResolver,e.baseId,t))}function xMt(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}function QDe({gen:e,schemaEnv:t,schema:n,errSchemaPath:r,opts:i}){const s=n.$comment;if(i.$comment===!0)e.code((0,It._)`${Gt.default.self}.logger.log(${s})`);else if(typeof i.$comment=="function"){const o=(0,It.str)`${r}/$comment`,a=e.scopeValue("root",{ref:t.root});e.code((0,It._)`${Gt.default.self}.opts.$comment(${s}, ${o}, ${a}.schema)`)}}function SMt(e){const{gen:t,schemaEnv:n,validateName:r,ValidationError:i,opts:s}=e;n.$async?t.if((0,It._)`${Gt.default.errors} === 0`,()=>t.return(Gt.default.data),()=>t.throw((0,It._)`new ${i}(${Gt.default.vErrors})`)):(t.assign((0,It._)`${r}.errors`,Gt.default.vErrors),s.unevaluated&&TMt(e),t.return((0,It._)`${Gt.default.errors} === 0`))}function TMt({gen:e,evaluated:t,props:n,items:r}){n instanceof It.Name&&e.assign((0,It._)`${t}.props`,n),r instanceof It.Name&&e.assign((0,It._)`${t}.items`,r)}function Npe(e,t,n,r){const{gen:i,schema:s,data:o,allErrors:a,opts:u,self:l}=e,{RULES:c}=l;if(s.$ref&&(u.ignoreKeywordsWithRef||!(0,fp.schemaHasRulesButRef)(s,c))){i.block(()=>e3e(e,"$ref",c.all.$ref.definition));return}u.jtd||AMt(e,t),i.block(()=>{for(const d of c.rules)f(d);f(c.post)});function f(d){(0,QX.shouldUseGroup)(s,d)&&(d.type?(i.if((0,d3.checkDataType)(d.type,o,u.strictNumbers)),Dpe(e,d),t.length===1&&t[0]===d.type&&n&&(i.else(),(0,d3.reportTypeError)(e)),i.endIf()):Dpe(e,d),a||i.if((0,It._)`${Gt.default.errors} === ${r||0}`))}}function Dpe(e,t){const{gen:n,schema:r,opts:{useDefaults:i}}=e;i&&(0,fMt.assignDefaults)(e,t.type),n.block(()=>{for(const s of t.rules)(0,QX.shouldUseRule)(r,s)&&e3e(e,s.keyword,s.definition,t.type)})}function AMt(e,t){e.schemaEnv.meta||!e.opts.strictTypes||(CMt(e,t),e.opts.allowUnionTypes||IMt(e,t),OMt(e,e.dataTypes))}function CMt(e,t){if(t.length){if(!e.dataTypes.length){e.dataTypes=t;return}t.forEach(n=>{JDe(e.dataTypes,n)||JX(e,`type "${n}" not allowed by context "${e.dataTypes.join(",")}"`)}),kMt(e,t)}}function IMt(e,t){t.length>1&&!(t.length===2&&t.includes("null"))&&JX(e,"use allowUnionTypes to allow union type keyword")}function OMt(e,t){const n=e.self.RULES.all;for(const r in n){const i=n[r];if(typeof i=="object"&&(0,QX.shouldUseRule)(e.schema,i)){const{type:s}=i.definition;s.length&&!s.some(o=>PMt(t,o))&&JX(e,`missing type "${s.join(",")}" for keyword "${r}"`)}}}function PMt(e,t){return e.includes(t)||t==="number"&&e.includes("integer")}function JDe(e,t){return e.includes(t)||t==="integer"&&e.includes("number")}function kMt(e,t){const n=[];for(const r of e.dataTypes)JDe(t,r)?n.push(r):t.includes("integer")&&r==="number"&&n.push("integer");e.dataTypes=n}function JX(e,t){const n=e.schemaEnv.baseId+e.errSchemaPath;t+=` at "${n}" (strictTypes)`,(0,fp.checkStrictMode)(e,t,e.opts.strictTypes)}class ZDe{constructor(t,n,r){if((0,n2.validateKeywordUsage)(t,n,r),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=r,this.data=t.data,this.schema=t.schema[r],this.$data=n.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,fp.schemaRefOrVal)(t,this.schema,r,this.$data),this.schemaType=n.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=n,this.$data)this.schemaCode=t.gen.const("vSchema",t3e(this.$data,t));else if(this.schemaCode=this.schemaValue,!(0,n2.validSchemaType)(this.schema,n.schemaType,n.allowUndefined))throw new Error(`${r} value must be ${JSON.stringify(n.schemaType)}`);("code"in n?n.trackErrors:n.errors!==!1)&&(this.errsCount=t.gen.const("_errs",Gt.default.errors))}result(t,n,r){this.failResult((0,It.not)(t),n,r)}failResult(t,n,r){this.gen.if(t),r?r():this.error(),n?(this.gen.else(),n(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(t,n){this.failResult((0,It.not)(t),void 0,n)}fail(t){if(t===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(t),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(t){if(!this.$data)return this.fail(t);const{schemaCode:n}=this;this.fail((0,It._)`${n} !== undefined && (${(0,It.or)(this.invalid$data(),t)})`)}error(t,n,r){if(n){this.setParams(n),this._error(t,r),this.setParams({});return}this._error(t,r)}_error(t,n){(t?aS.reportExtraError:aS.reportError)(this,this.def.error,n)}$dataError(){(0,aS.reportError)(this,this.def.$dataError||aS.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,aS.resetErrorsCount)(this.gen,this.errsCount)}ok(t){this.allErrors||this.gen.if(t)}setParams(t,n){n?Object.assign(this.params,t):this.params=t}block$data(t,n,r=It.nil){this.gen.block(()=>{this.check$data(t,r),n()})}check$data(t=It.nil,n=It.nil){if(!this.$data)return;const{gen:r,schemaCode:i,schemaType:s,def:o}=this;r.if((0,It.or)((0,It._)`${i} === undefined`,n)),t!==It.nil&&r.assign(t,!0),(s.length||o.validateSchema)&&(r.elseIf(this.invalid$data()),this.$dataError(),t!==It.nil&&r.assign(t,!1)),r.else()}invalid$data(){const{gen:t,schemaCode:n,schemaType:r,def:i,it:s}=this;return(0,It.or)(o(),a());function o(){if(r.length){if(!(n instanceof It.Name))throw new Error("ajv implementation error");const u=Array.isArray(r)?r:[r];return(0,It._)`${(0,d3.checkDataTypes)(u,n,s.opts.strictNumbers,d3.DataType.Wrong)}`}return It.nil}function a(){if(i.validateSchema){const u=t.scopeValue("validate$data",{ref:i.validateSchema});return(0,It._)`!${u}(${n})`}return It.nil}}subschema(t,n){const r=(0,VB.getSubschema)(this.it,t);(0,VB.extendSubschemaData)(r,this.it,t),(0,VB.extendSubschemaMode)(r,t);const i={...this.it,...r,items:void 0,props:void 0};return vMt(i,n),i}mergeEvaluated(t,n){const{it:r,gen:i}=this;r.opts.unevaluated&&(r.props!==!0&&t.props!==void 0&&(r.props=fp.mergeEvaluated.props(i,t.props,r.props,n)),r.items!==!0&&t.items!==void 0&&(r.items=fp.mergeEvaluated.items(i,t.items,r.items,n)))}mergeValidEvaluated(t,n){const{it:r,gen:i}=this;if(r.opts.unevaluated&&(r.props!==!0||r.items!==!0))return i.if(n,()=>this.mergeEvaluated(t,It.Name)),!0}}nf.KeywordCxt=ZDe;function e3e(e,t,n,r){const i=new ZDe(e,n,t);"code"in n?n.code(i,r):i.$data&&n.validate?(0,n2.funcKeywordCode)(i,n):"macro"in n?(0,n2.macroKeywordCode)(i,n):(n.compile||n.validate)&&(0,n2.funcKeywordCode)(i,n)}const $Mt=/^\/(?:[^~]|~0|~1)*$/,RMt=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function t3e(e,{dataLevel:t,dataNames:n,dataPathArr:r}){let i,s;if(e==="")return Gt.default.rootData;if(e[0]==="/"){if(!$Mt.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);i=e,s=Gt.default.rootData}else{const l=RMt.exec(e);if(!l)throw new Error(`Invalid JSON-pointer: ${e}`);const c=+l[1];if(i=l[2],i==="#"){if(c>=t)throw new Error(u("property/index",c));return r[t-c]}if(c>t)throw new Error(u("data",c));if(s=n[t-c],!i)return s}let o=s;const a=i.split("/");for(const l of a)l&&(s=(0,It._)`${s}${(0,It.getProperty)((0,fp.unescapeJsonPointer)(l))}`,o=(0,It._)`${o} && ${s}`);return o;function u(l,c){return`Cannot access ${l} ${c} levels up, current level is ${t}`}}nf.getData=t3e;var pI={};Object.defineProperty(pI,"__esModule",{value:!0});class NMt extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}}pI.default=NMt;var mI={};Object.defineProperty(mI,"__esModule",{value:!0});const HB=uo;class DMt extends Error{constructor(t,n,r,i){super(i||`can't resolve reference ${r} from id ${n}`),this.missingRef=(0,HB.resolveUrl)(t,n,r),this.missingSchema=(0,HB.normalizeId)((0,HB.getFullPath)(t,this.missingRef))}}mI.default=DMt;var eu={};Object.defineProperty(eu,"__esModule",{value:!0});eu.resolveSchema=eu.getCompilingSchema=eu.resolveRef=eu.compileSchema=eu.SchemaEnv=void 0;const Ec=Cn,LMt=pI,Z0=sh,Vc=uo,Lpe=Zn,MMt=nf;class L4{constructor(t){var n;this.refs={},this.dynamicAnchors={};let r;typeof t.schema=="object"&&(r=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=(n=t.baseId)!==null&&n!==void 0?n:(0,Vc.normalizeId)(r==null?void 0:r[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=r==null?void 0:r.$async,this.refs={}}}eu.SchemaEnv=L4;function ZX(e){const t=n3e.call(this,e);if(t)return t;const n=(0,Vc.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:r,lines:i}=this.opts.code,{ownProperties:s}=this.opts,o=new Ec.CodeGen(this.scope,{es5:r,lines:i,ownProperties:s});let a;e.$async&&(a=o.scopeValue("Error",{ref:LMt.default,code:(0,Ec._)`require("ajv/dist/runtime/validation_error").default`}));const u=o.scopeName("validate");e.validateName=u;const l={gen:o,allErrors:this.opts.allErrors,data:Z0.default.data,parentData:Z0.default.parentData,parentDataProperty:Z0.default.parentDataProperty,dataNames:[Z0.default.data],dataPathArr:[Ec.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",this.opts.code.source===!0?{ref:e.schema,code:(0,Ec.stringify)(e.schema)}:{ref:e.schema}),validateName:u,ValidationError:a,schema:e.schema,schemaEnv:e,rootId:n,baseId:e.baseId||n,schemaPath:Ec.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,Ec._)`""`,opts:this.opts,self:this};let c;try{this._compilations.add(e),(0,MMt.validateFunctionCode)(l),o.optimize(this.opts.code.optimize);const f=o.toString();c=`${o.scopeRefs(Z0.default.scope)}return ${f}`,this.opts.code.process&&(c=this.opts.code.process(c,e));const h=new Function(`${Z0.default.self}`,`${Z0.default.scope}`,c)(this,this.scope.get());if(this.scope.value(u,{ref:h}),h.errors=null,h.schema=e.schema,h.schemaEnv=e,e.$async&&(h.$async=!0),this.opts.code.source===!0&&(h.source={validateName:u,validateCode:f,scopeValues:o._values}),this.opts.unevaluated){const{props:p,items:m}=l;h.evaluated={props:p instanceof Ec.Name?void 0:p,items:m instanceof Ec.Name?void 0:m,dynamicProps:p instanceof Ec.Name,dynamicItems:m instanceof Ec.Name},h.source&&(h.source.evaluated=(0,Ec.stringify)(h.evaluated))}return e.validate=h,e}catch(f){throw delete e.validate,delete e.validateName,c&&this.logger.error("Error compiling schema, function code:",c),f}finally{this._compilations.delete(e)}}eu.compileSchema=ZX;function FMt(e,t,n){var r;n=(0,Vc.resolveUrl)(this.opts.uriResolver,t,n);const i=e.refs[n];if(i)return i;let s=zMt.call(this,e,n);if(s===void 0){const o=(r=e.localRefs)===null||r===void 0?void 0:r[n],{schemaId:a}=this.opts;o&&(s=new L4({schema:o,schemaId:a,root:e,baseId:t}))}if(s!==void 0)return e.refs[n]=BMt.call(this,s)}eu.resolveRef=FMt;function BMt(e){return(0,Vc.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:ZX.call(this,e)}function n3e(e){for(const t of this._compilations)if(jMt(t,e))return t}eu.getCompilingSchema=n3e;function jMt(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function zMt(e,t){let n;for(;typeof(n=this.refs[t])=="string";)t=n;return n||this.schemas[t]||M4.call(this,e,t)}function M4(e,t){const n=this.opts.uriResolver.parse(t),r=(0,Vc._getFullPath)(this.opts.uriResolver,n);let i=(0,Vc.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&r===i)return qB.call(this,n,e);const s=(0,Vc.normalizeId)(r),o=this.refs[s]||this.schemas[s];if(typeof o=="string"){const a=M4.call(this,e,o);return typeof(a==null?void 0:a.schema)!="object"?void 0:qB.call(this,n,a)}if(typeof(o==null?void 0:o.schema)=="object"){if(o.validate||ZX.call(this,o),s===(0,Vc.normalizeId)(t)){const{schema:a}=o,{schemaId:u}=this.opts,l=a[u];return l&&(i=(0,Vc.resolveUrl)(this.opts.uriResolver,i,l)),new L4({schema:a,schemaId:u,root:e,baseId:i})}return qB.call(this,n,o)}}eu.resolveSchema=M4;const UMt=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function qB(e,{baseId:t,schema:n,root:r}){var i;if(((i=e.fragment)===null||i===void 0?void 0:i[0])!=="/")return;for(const a of e.fragment.slice(1).split("/")){if(typeof n=="boolean")return;const u=n[(0,Lpe.unescapeFragment)(a)];if(u===void 0)return;n=u;const l=typeof n=="object"&&n[this.opts.schemaId];!UMt.has(a)&&l&&(t=(0,Vc.resolveUrl)(this.opts.uriResolver,t,l))}let s;if(typeof n!="boolean"&&n.$ref&&!(0,Lpe.schemaHasRulesButRef)(n,this.RULES)){const a=(0,Vc.resolveUrl)(this.opts.uriResolver,t,n.$ref);s=M4.call(this,r,a)}const{schemaId:o}=this.opts;if(s=s||new L4({schema:n,schemaId:o,root:r,baseId:t}),s.schema!==s.root.schema)return s}const VMt="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",HMt="Meta-schema for $data reference (JSON AnySchema extension proposal)",qMt="object",WMt=["$data"],GMt={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},YMt=!1,KMt={$id:VMt,description:HMt,type:qMt,required:WMt,properties:GMt,additionalProperties:YMt};var eQ={},IV={exports:{}};/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */(function(e,t){(function(n,r){r(t)})(nu,function(n){function r(){for(var ne=arguments.length,Q=Array(ne),ie=0;ie<ne;ie++)Q[ie]=arguments[ie];if(Q.length>1){Q[0]=Q[0].slice(0,-1);for(var ve=Q.length-1,ye=1;ye<ve;++ye)Q[ye]=Q[ye].slice(1,-1);return Q[ve]=Q[ve].slice(1),Q.join("")}else return Q[0]}function i(ne){return"(?:"+ne+")"}function s(ne){return ne===void 0?"undefined":ne===null?"null":Object.prototype.toString.call(ne).split(" ").pop().split("]").shift().toLowerCase()}function o(ne){return ne.toUpperCase()}function a(ne){return ne!=null?ne instanceof Array?ne:typeof ne.length!="number"||ne.split||ne.setInterval||ne.call?[ne]:Array.prototype.slice.call(ne):[]}function u(ne,Q){var ie=ne;if(Q)for(var ve in Q)ie[ve]=Q[ve];return ie}function l(ne){var Q="[A-Za-z]",ie="[0-9]",ve=r(ie,"[A-Fa-f]"),ye=i(i("%[EFef]"+ve+"%"+ve+ve+"%"+ve+ve)+"|"+i("%[89A-Fa-f]"+ve+"%"+ve+ve)+"|"+i("%"+ve+ve)),pt="[\\:\\/\\?\\#\\[\\]\\@]",Ce="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",ft=r(pt,Ce),Bt=ne?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",St=ne?"[\\uE000-\\uF8FF]":"[]",Ht=r(Q,ie,"[\\-\\.\\_\\~]",Bt);i(Q+r(Q,ie,"[\\+\\-\\.]")+"*"),i(i(ye+"|"+r(Ht,Ce,"[\\:]"))+"*");var fn=i(i("25[0-5]")+"|"+i("2[0-4]"+ie)+"|"+i("1"+ie+ie)+"|"+i("0?[1-9]"+ie)+"|0?0?"+ie),Tr=i(fn+"\\."+fn+"\\."+fn+"\\."+fn),zt=i(ve+"{1,4}"),pr=i(i(zt+"\\:"+zt)+"|"+Tr),Xt=i(i(zt+"\\:")+"{6}"+pr),er=i("\\:\\:"+i(zt+"\\:")+"{5}"+pr),ni=i(i(zt)+"?\\:\\:"+i(zt+"\\:")+"{4}"+pr),ls=i(i(i(zt+"\\:")+"{0,1}"+zt)+"?\\:\\:"+i(zt+"\\:")+"{3}"+pr),Fi=i(i(i(zt+"\\:")+"{0,2}"+zt)+"?\\:\\:"+i(zt+"\\:")+"{2}"+pr),aa=i(i(i(zt+"\\:")+"{0,3}"+zt)+"?\\:\\:"+zt+"\\:"+pr),Js=i(i(i(zt+"\\:")+"{0,4}"+zt)+"?\\:\\:"+pr),mi=i(i(i(zt+"\\:")+"{0,5}"+zt)+"?\\:\\:"+zt),yt=i(i(i(zt+"\\:")+"{0,6}"+zt)+"?\\:\\:"),wn=i([Xt,er,ni,ls,Fi,aa,Js,mi,yt].join("|")),Br=i(i(Ht+"|"+ye)+"+");i("[vV]"+ve+"+\\."+r(Ht,Ce,"[\\:]")+"+"),i(i(ye+"|"+r(Ht,Ce))+"*");var Is=i(ye+"|"+r(Ht,Ce,"[\\:\\@]"));return i(i(ye+"|"+r(Ht,Ce,"[\\@]"))+"+"),i(i(Is+"|"+r("[\\/\\?]",St))+"*"),{NOT_SCHEME:new RegExp(r("[^]",Q,ie,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(r("[^\\%\\:]",Ht,Ce),"g"),NOT_HOST:new RegExp(r("[^\\%\\[\\]\\:]",Ht,Ce),"g"),NOT_PATH:new RegExp(r("[^\\%\\/\\:\\@]",Ht,Ce),"g"),NOT_PATH_NOSCHEME:new RegExp(r("[^\\%\\/\\@]",Ht,Ce),"g"),NOT_QUERY:new RegExp(r("[^\\%]",Ht,Ce,"[\\:\\@\\/\\?]",St),"g"),NOT_FRAGMENT:new RegExp(r("[^\\%]",Ht,Ce,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(r("[^]",Ht,Ce),"g"),UNRESERVED:new RegExp(Ht,"g"),OTHER_CHARS:new RegExp(r("[^\\%]",Ht,ft),"g"),PCT_ENCODED:new RegExp(ye,"g"),IPV4ADDRESS:new RegExp("^("+Tr+")$"),IPV6ADDRESS:new RegExp("^\\[?("+wn+")"+i(i("\\%25|\\%(?!"+ve+"{2})")+"("+Br+")")+"?\\]?$")}}var c=l(!1),f=l(!0),d=function(){function ne(Q,ie){var ve=[],ye=!0,pt=!1,Ce=void 0;try{for(var ft=Q[Symbol.iterator](),Bt;!(ye=(Bt=ft.next()).done)&&(ve.push(Bt.value),!(ie&&ve.length===ie));ye=!0);}catch(St){pt=!0,Ce=St}finally{try{!ye&&ft.return&&ft.return()}finally{if(pt)throw Ce}}return ve}return function(Q,ie){if(Array.isArray(Q))return Q;if(Symbol.iterator in Object(Q))return ne(Q,ie);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function(ne){if(Array.isArray(ne)){for(var Q=0,ie=Array(ne.length);Q<ne.length;Q++)ie[Q]=ne[Q];return ie}else return Array.from(ne)},p=2147483647,m=36,g=1,y=26,v=38,_=700,b=72,E=128,w="-",x=/^xn--/,S=/[^\0-\x7E]/,I=/[\x2E\u3002\uFF0E\uFF61]/g,C={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},O=m-g,z=Math.floor,N=String.fromCharCode;function $(ne){throw new RangeError(C[ne])}function D(ne,Q){for(var ie=[],ve=ne.length;ve--;)ie[ve]=Q(ne[ve]);return ie}function B(ne,Q){var ie=ne.split("@"),ve="";ie.length>1&&(ve=ie[0]+"@",ne=ie[1]),ne=ne.replace(I,".");var ye=ne.split("."),pt=D(ye,Q).join(".");return ve+pt}function V(ne){for(var Q=[],ie=0,ve=ne.length;ie<ve;){var ye=ne.charCodeAt(ie++);if(ye>=55296&&ye<=56319&&ie<ve){var pt=ne.charCodeAt(ie++);(pt&64512)==56320?Q.push(((ye&1023)<<10)+(pt&1023)+65536):(Q.push(ye),ie--)}else Q.push(ye)}return Q}var j=function(Q){return String.fromCodePoint.apply(String,h(Q))},G=function(Q){return Q-48<10?Q-22:Q-65<26?Q-65:Q-97<26?Q-97:m},U=function(Q,ie){return Q+22+75*(Q<26)-((ie!=0)<<5)},P=function(Q,ie,ve){var ye=0;for(Q=ve?z(Q/_):Q>>1,Q+=z(Q/ie);Q>O*y>>1;ye+=m)Q=z(Q/O);return z(ye+(O+1)*Q/(Q+v))},k=function(Q){var ie=[],ve=Q.length,ye=0,pt=E,Ce=b,ft=Q.lastIndexOf(w);ft<0&&(ft=0);for(var Bt=0;Bt<ft;++Bt)Q.charCodeAt(Bt)>=128&&$("not-basic"),ie.push(Q.charCodeAt(Bt));for(var St=ft>0?ft+1:0;St<ve;){for(var Ht=ye,fn=1,Tr=m;;Tr+=m){St>=ve&&$("invalid-input");var zt=G(Q.charCodeAt(St++));(zt>=m||zt>z((p-ye)/fn))&&$("overflow"),ye+=zt*fn;var pr=Tr<=Ce?g:Tr>=Ce+y?y:Tr-Ce;if(zt<pr)break;var Xt=m-pr;fn>z(p/Xt)&&$("overflow"),fn*=Xt}var er=ie.length+1;Ce=P(ye-Ht,er,Ht==0),z(ye/er)>p-pt&&$("overflow"),pt+=z(ye/er),ye%=er,ie.splice(ye++,0,pt)}return String.fromCodePoint.apply(String,ie)},H=function(Q){var ie=[];Q=V(Q);var ve=Q.length,ye=E,pt=0,Ce=b,ft=!0,Bt=!1,St=void 0;try{for(var Ht=Q[Symbol.iterator](),fn;!(ft=(fn=Ht.next()).done);ft=!0){var Tr=fn.value;Tr<128&&ie.push(N(Tr))}}catch(Se){Bt=!0,St=Se}finally{try{!ft&&Ht.return&&Ht.return()}finally{if(Bt)throw St}}var zt=ie.length,pr=zt;for(zt&&ie.push(w);pr<ve;){var Xt=p,er=!0,ni=!1,ls=void 0;try{for(var Fi=Q[Symbol.iterator](),aa;!(er=(aa=Fi.next()).done);er=!0){var Js=aa.value;Js>=ye&&Js<Xt&&(Xt=Js)}}catch(Se){ni=!0,ls=Se}finally{try{!er&&Fi.return&&Fi.return()}finally{if(ni)throw ls}}var mi=pr+1;Xt-ye>z((p-pt)/mi)&&$("overflow"),pt+=(Xt-ye)*mi,ye=Xt;var yt=!0,wn=!1,Br=void 0;try{for(var Is=Q[Symbol.iterator](),Fa;!(yt=(Fa=Is.next()).done);yt=!0){var q=Fa.value;if(q<ye&&++pt>p&&$("overflow"),q==ye){for(var te=pt,K=m;;K+=m){var fe=K<=Ce?g:K>=Ce+y?y:K-Ce;if(te<fe)break;var pe=te-fe,oe=m-fe;ie.push(N(U(fe+pe%oe,0))),te=z(pe/oe)}ie.push(N(U(te,0))),Ce=P(pt,mi,pr==zt),pt=0,++pr}}}catch(Se){wn=!0,Br=Se}finally{try{!yt&&Is.return&&Is.return()}finally{if(wn)throw Br}}++pt,++ye}return ie.join("")},M=function(Q){return B(Q,function(ie){return x.test(ie)?k(ie.slice(4).toLowerCase()):ie})},F=function(Q){return B(Q,function(ie){return S.test(ie)?"xn--"+H(ie):ie})},J={version:"2.1.0",ucs2:{decode:V,encode:j},decode:k,encode:H,toASCII:F,toUnicode:M},se={};function ae(ne){var Q=ne.charCodeAt(0),ie=void 0;return Q<16?ie="%0"+Q.toString(16).toUpperCase():Q<128?ie="%"+Q.toString(16).toUpperCase():Q<2048?ie="%"+(Q>>6|192).toString(16).toUpperCase()+"%"+(Q&63|128).toString(16).toUpperCase():ie="%"+(Q>>12|224).toString(16).toUpperCase()+"%"+(Q>>6&63|128).toString(16).toUpperCase()+"%"+(Q&63|128).toString(16).toUpperCase(),ie}function ce(ne){for(var Q="",ie=0,ve=ne.length;ie<ve;){var ye=parseInt(ne.substr(ie+1,2),16);if(ye<128)Q+=String.fromCharCode(ye),ie+=3;else if(ye>=194&&ye<224){if(ve-ie>=6){var pt=parseInt(ne.substr(ie+4,2),16);Q+=String.fromCharCode((ye&31)<<6|pt&63)}else Q+=ne.substr(ie,6);ie+=6}else if(ye>=224){if(ve-ie>=9){var Ce=parseInt(ne.substr(ie+4,2),16),ft=parseInt(ne.substr(ie+7,2),16);Q+=String.fromCharCode((ye&15)<<12|(Ce&63)<<6|ft&63)}else Q+=ne.substr(ie,9);ie+=9}else Q+=ne.substr(ie,3),ie+=3}return Q}function le(ne,Q){function ie(ve){var ye=ce(ve);return ye.match(Q.UNRESERVED)?ye:ve}return ne.scheme&&(ne.scheme=String(ne.scheme).replace(Q.PCT_ENCODED,ie).toLowerCase().replace(Q.NOT_SCHEME,"")),ne.userinfo!==void 0&&(ne.userinfo=String(ne.userinfo).replace(Q.PCT_ENCODED,ie).replace(Q.NOT_USERINFO,ae).replace(Q.PCT_ENCODED,o)),ne.host!==void 0&&(ne.host=String(ne.host).replace(Q.PCT_ENCODED,ie).toLowerCase().replace(Q.NOT_HOST,ae).replace(Q.PCT_ENCODED,o)),ne.path!==void 0&&(ne.path=String(ne.path).replace(Q.PCT_ENCODED,ie).replace(ne.scheme?Q.NOT_PATH:Q.NOT_PATH_NOSCHEME,ae).replace(Q.PCT_ENCODED,o)),ne.query!==void 0&&(ne.query=String(ne.query).replace(Q.PCT_ENCODED,ie).replace(Q.NOT_QUERY,ae).replace(Q.PCT_ENCODED,o)),ne.fragment!==void 0&&(ne.fragment=String(ne.fragment).replace(Q.PCT_ENCODED,ie).replace(Q.NOT_FRAGMENT,ae).replace(Q.PCT_ENCODED,o)),ne}function ge(ne){return ne.replace(/^0*(.*)/,"$1")||"0"}function ue(ne,Q){var ie=ne.match(Q.IPV4ADDRESS)||[],ve=d(ie,2),ye=ve[1];return ye?ye.split(".").map(ge).join("."):ne}function Fe(ne,Q){var ie=ne.match(Q.IPV6ADDRESS)||[],ve=d(ie,3),ye=ve[1],pt=ve[2];if(ye){for(var Ce=ye.toLowerCase().split("::").reverse(),ft=d(Ce,2),Bt=ft[0],St=ft[1],Ht=St?St.split(":").map(ge):[],fn=Bt.split(":").map(ge),Tr=Q.IPV4ADDRESS.test(fn[fn.length-1]),zt=Tr?7:8,pr=fn.length-zt,Xt=Array(zt),er=0;er<zt;++er)Xt[er]=Ht[er]||fn[pr+er]||"";Tr&&(Xt[zt-1]=ue(Xt[zt-1],Q));var ni=Xt.reduce(function(mi,yt,wn){if(!yt||yt==="0"){var Br=mi[mi.length-1];Br&&Br.index+Br.length===wn?Br.length++:mi.push({index:wn,length:1})}return mi},[]),ls=ni.sort(function(mi,yt){return yt.length-mi.length})[0],Fi=void 0;if(ls&&ls.length>1){var aa=Xt.slice(0,ls.index),Js=Xt.slice(ls.index+ls.length);Fi=aa.join(":")+"::"+Js.join(":")}else Fi=Xt.join(":");return pt&&(Fi+="%"+pt),Fi}else return ne}var ke=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,Ge="".match(/(){0}/)[1]===void 0;function Re(ne){var Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ie={},ve=Q.iri!==!1?f:c;Q.reference==="suffix"&&(ne=(Q.scheme?Q.scheme+":":"")+"//"+ne);var ye=ne.match(ke);if(ye){Ge?(ie.scheme=ye[1],ie.userinfo=ye[3],ie.host=ye[4],ie.port=parseInt(ye[5],10),ie.path=ye[6]||"",ie.query=ye[7],ie.fragment=ye[8],isNaN(ie.port)&&(ie.port=ye[5])):(ie.scheme=ye[1]||void 0,ie.userinfo=ne.indexOf("@")!==-1?ye[3]:void 0,ie.host=ne.indexOf("//")!==-1?ye[4]:void 0,ie.port=parseInt(ye[5],10),ie.path=ye[6]||"",ie.query=ne.indexOf("?")!==-1?ye[7]:void 0,ie.fragment=ne.indexOf("#")!==-1?ye[8]:void 0,isNaN(ie.port)&&(ie.port=ne.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?ye[4]:void 0)),ie.host&&(ie.host=Fe(ue(ie.host,ve),ve)),ie.scheme===void 0&&ie.userinfo===void 0&&ie.host===void 0&&ie.port===void 0&&!ie.path&&ie.query===void 0?ie.reference="same-document":ie.scheme===void 0?ie.reference="relative":ie.fragment===void 0?ie.reference="absolute":ie.reference="uri",Q.reference&&Q.reference!=="suffix"&&Q.reference!==ie.reference&&(ie.error=ie.error||"URI is not a "+Q.reference+" reference.");var pt=se[(Q.scheme||ie.scheme||"").toLowerCase()];if(!Q.unicodeSupport&&(!pt||!pt.unicodeSupport)){if(ie.host&&(Q.domainHost||pt&&pt.domainHost))try{ie.host=J.toASCII(ie.host.replace(ve.PCT_ENCODED,ce).toLowerCase())}catch(Ce){ie.error=ie.error||"Host's domain name can not be converted to ASCII via punycode: "+Ce}le(ie,c)}else le(ie,ve);pt&&pt.parse&&pt.parse(ie,Q)}else ie.error=ie.error||"URI can not be parsed.";return ie}function Oe(ne,Q){var ie=Q.iri!==!1?f:c,ve=[];return ne.userinfo!==void 0&&(ve.push(ne.userinfo),ve.push("@")),ne.host!==void 0&&ve.push(Fe(ue(String(ne.host),ie),ie).replace(ie.IPV6ADDRESS,function(ye,pt,Ce){return"["+pt+(Ce?"%25"+Ce:"")+"]"})),(typeof ne.port=="number"||typeof ne.port=="string")&&(ve.push(":"),ve.push(String(ne.port))),ve.length?ve.join(""):void 0}var Le=/^\.\.?\//,Ut=/^\/\.(\/|$)/,Qe=/^\/\.\.(\/|$)/,je=/^\/?(?:.|\n)*?(?=\/|$)/;function bt(ne){for(var Q=[];ne.length;)if(ne.match(Le))ne=ne.replace(Le,"");else if(ne.match(Ut))ne=ne.replace(Ut,"/");else if(ne.match(Qe))ne=ne.replace(Qe,"/"),Q.pop();else if(ne==="."||ne==="..")ne="";else{var ie=ne.match(je);if(ie){var ve=ie[0];ne=ne.slice(ve.length),Q.push(ve)}else throw new Error("Unexpected dot segment condition")}return Q.join("")}function et(ne){var Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ie=Q.iri?f:c,ve=[],ye=se[(Q.scheme||ne.scheme||"").toLowerCase()];if(ye&&ye.serialize&&ye.serialize(ne,Q),ne.host&&!ie.IPV6ADDRESS.test(ne.host)){if(Q.domainHost||ye&&ye.domainHost)try{ne.host=Q.iri?J.toUnicode(ne.host):J.toASCII(ne.host.replace(ie.PCT_ENCODED,ce).toLowerCase())}catch(ft){ne.error=ne.error||"Host's domain name can not be converted to "+(Q.iri?"Unicode":"ASCII")+" via punycode: "+ft}}le(ne,ie),Q.reference!=="suffix"&&ne.scheme&&(ve.push(ne.scheme),ve.push(":"));var pt=Oe(ne,Q);if(pt!==void 0&&(Q.reference!=="suffix"&&ve.push("//"),ve.push(pt),ne.path&&ne.path.charAt(0)!=="/"&&ve.push("/")),ne.path!==void 0){var Ce=ne.path;!Q.absolutePath&&(!ye||!ye.absolutePath)&&(Ce=bt(Ce)),pt===void 0&&(Ce=Ce.replace(/^\/\//,"/%2F")),ve.push(Ce)}return ne.query!==void 0&&(ve.push("?"),ve.push(ne.query)),ne.fragment!==void 0&&(ve.push("#"),ve.push(ne.fragment)),ve.join("")}function ut(ne,Q){var ie=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},ve=arguments[3],ye={};return ve||(ne=Re(et(ne,ie),ie),Q=Re(et(Q,ie),ie)),ie=ie||{},!ie.tolerant&&Q.scheme?(ye.scheme=Q.scheme,ye.userinfo=Q.userinfo,ye.host=Q.host,ye.port=Q.port,ye.path=bt(Q.path||""),ye.query=Q.query):(Q.userinfo!==void 0||Q.host!==void 0||Q.port!==void 0?(ye.userinfo=Q.userinfo,ye.host=Q.host,ye.port=Q.port,ye.path=bt(Q.path||""),ye.query=Q.query):(Q.path?(Q.path.charAt(0)==="/"?ye.path=bt(Q.path):((ne.userinfo!==void 0||ne.host!==void 0||ne.port!==void 0)&&!ne.path?ye.path="/"+Q.path:ne.path?ye.path=ne.path.slice(0,ne.path.lastIndexOf("/")+1)+Q.path:ye.path=Q.path,ye.path=bt(ye.path)),ye.query=Q.query):(ye.path=ne.path,Q.query!==void 0?ye.query=Q.query:ye.query=ne.query),ye.userinfo=ne.userinfo,ye.host=ne.host,ye.port=ne.port),ye.scheme=ne.scheme),ye.fragment=Q.fragment,ye}function lt(ne,Q,ie){var ve=u({scheme:"null"},ie);return et(ut(Re(ne,ve),Re(Q,ve),ve,!0),ve)}function jt(ne,Q){return typeof ne=="string"?ne=et(Re(ne,Q),Q):s(ne)==="object"&&(ne=Re(et(ne,Q),Q)),ne}function Dn(ne,Q,ie){return typeof ne=="string"?ne=et(Re(ne,ie),ie):s(ne)==="object"&&(ne=et(ne,ie)),typeof Q=="string"?Q=et(Re(Q,ie),ie):s(Q)==="object"&&(Q=et(Q,ie)),ne===Q}function he(ne,Q){return ne&&ne.toString().replace(!Q||!Q.iri?c.ESCAPE:f.ESCAPE,ae)}function _e(ne,Q){return ne&&ne.toString().replace(!Q||!Q.iri?c.PCT_ENCODED:f.PCT_ENCODED,ce)}var Pe={scheme:"http",domainHost:!0,parse:function(Q,ie){return Q.host||(Q.error=Q.error||"HTTP URIs must have a host."),Q},serialize:function(Q,ie){var ve=String(Q.scheme).toLowerCase()==="https";return(Q.port===(ve?443:80)||Q.port==="")&&(Q.port=void 0),Q.path||(Q.path="/"),Q}},it={scheme:"https",domainHost:Pe.domainHost,parse:Pe.parse,serialize:Pe.serialize};function Ye(ne){return typeof ne.secure=="boolean"?ne.secure:String(ne.scheme).toLowerCase()==="wss"}var at={scheme:"ws",domainHost:!0,parse:function(Q,ie){var ve=Q;return ve.secure=Ye(ve),ve.resourceName=(ve.path||"/")+(ve.query?"?"+ve.query:""),ve.path=void 0,ve.query=void 0,ve},serialize:function(Q,ie){if((Q.port===(Ye(Q)?443:80)||Q.port==="")&&(Q.port=void 0),typeof Q.secure=="boolean"&&(Q.scheme=Q.secure?"wss":"ws",Q.secure=void 0),Q.resourceName){var ve=Q.resourceName.split("?"),ye=d(ve,2),pt=ye[0],Ce=ye[1];Q.path=pt&&pt!=="/"?pt:void 0,Q.query=Ce,Q.resourceName=void 0}return Q.fragment=void 0,Q}},tt={scheme:"wss",domainHost:at.domainHost,parse:at.parse,serialize:at.serialize},vt={},In="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",Wt="[0-9A-Fa-f]",Vt=i(i("%[EFef]"+Wt+"%"+Wt+Wt+"%"+Wt+Wt)+"|"+i("%[89A-Fa-f]"+Wt+"%"+Wt+Wt)+"|"+i("%"+Wt+Wt)),hr="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",Yn="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",ku=r(Yn,'[\\"\\\\]'),Mr="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",us=new RegExp(In,"g"),ti=new RegExp(Vt,"g"),Ei=new RegExp(r("[^]",hr,"[\\.]",'[\\"]',ku),"g"),qr=new RegExp(r("[^]",In,Mr),"g"),yr=qr;function gt(ne){var Q=ce(ne);return Q.match(us)?Q:ne}var Fr={scheme:"mailto",parse:function(Q,ie){var ve=Q,ye=ve.to=ve.path?ve.path.split(","):[];if(ve.path=void 0,ve.query){for(var pt=!1,Ce={},ft=ve.query.split("&"),Bt=0,St=ft.length;Bt<St;++Bt){var Ht=ft[Bt].split("=");switch(Ht[0]){case"to":for(var fn=Ht[1].split(","),Tr=0,zt=fn.length;Tr<zt;++Tr)ye.push(fn[Tr]);break;case"subject":ve.subject=_e(Ht[1],ie);break;case"body":ve.body=_e(Ht[1],ie);break;default:pt=!0,Ce[_e(Ht[0],ie)]=_e(Ht[1],ie);break}}pt&&(ve.headers=Ce)}ve.query=void 0;for(var pr=0,Xt=ye.length;pr<Xt;++pr){var er=ye[pr].split("@");if(er[0]=_e(er[0]),ie.unicodeSupport)er[1]=_e(er[1],ie).toLowerCase();else try{er[1]=J.toASCII(_e(er[1],ie).toLowerCase())}catch(ni){ve.error=ve.error||"Email address's domain name can not be converted to ASCII via punycode: "+ni}ye[pr]=er.join("@")}return ve},serialize:function(Q,ie){var ve=Q,ye=a(Q.to);if(ye){for(var pt=0,Ce=ye.length;pt<Ce;++pt){var ft=String(ye[pt]),Bt=ft.lastIndexOf("@"),St=ft.slice(0,Bt).replace(ti,gt).replace(ti,o).replace(Ei,ae),Ht=ft.slice(Bt+1);try{Ht=ie.iri?J.toUnicode(Ht):J.toASCII(_e(Ht,ie).toLowerCase())}catch(pr){ve.error=ve.error||"Email address's domain name can not be converted to "+(ie.iri?"Unicode":"ASCII")+" via punycode: "+pr}ye[pt]=St+"@"+Ht}ve.path=ye.join(",")}var fn=Q.headers=Q.headers||{};Q.subject&&(fn.subject=Q.subject),Q.body&&(fn.body=Q.body);var Tr=[];for(var zt in fn)fn[zt]!==vt[zt]&&Tr.push(zt.replace(ti,gt).replace(ti,o).replace(qr,ae)+"="+fn[zt].replace(ti,gt).replace(ti,o).replace(yr,ae));return Tr.length&&(ve.query=Tr.join("&")),ve}},xi=/^([^\:]+)\:(.*)/,Yi={scheme:"urn",parse:function(Q,ie){var ve=Q.path&&Q.path.match(xi),ye=Q;if(ve){var pt=ie.scheme||ye.scheme||"urn",Ce=ve[1].toLowerCase(),ft=ve[2],Bt=pt+":"+(ie.nid||Ce),St=se[Bt];ye.nid=Ce,ye.nss=ft,ye.path=void 0,St&&(ye=St.parse(ye,ie))}else ye.error=ye.error||"URN can not be parsed.";return ye},serialize:function(Q,ie){var ve=ie.scheme||Q.scheme||"urn",ye=Q.nid,pt=ve+":"+(ie.nid||ye),Ce=se[pt];Ce&&(Q=Ce.serialize(Q,ie));var ft=Q,Bt=Q.nss;return ft.path=(ye||ie.nid)+":"+Bt,ft}},Qs=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,Ma={scheme:"urn:uuid",parse:function(Q,ie){var ve=Q;return ve.uuid=ve.nss,ve.nss=void 0,!ie.tolerant&&(!ve.uuid||!ve.uuid.match(Qs))&&(ve.error=ve.error||"UUID is not valid."),ve},serialize:function(Q,ie){var ve=Q;return ve.nss=(Q.uuid||"").toLowerCase(),ve}};se[Pe.scheme]=Pe,se[it.scheme]=it,se[at.scheme]=at,se[tt.scheme]=tt,se[Fr.scheme]=Fr,se[Yi.scheme]=Yi,se[Ma.scheme]=Ma,n.SCHEMES=se,n.pctEncChar=ae,n.pctDecChars=ce,n.parse=Re,n.removeDotSegments=bt,n.serialize=et,n.resolveComponents=ut,n.resolve=lt,n.normalize=jt,n.equal=Dn,n.escapeComponent=he,n.unescapeComponent=_e,Object.defineProperty(n,"__esModule",{value:!0})})})(IV,IV.exports);var XMt=IV.exports;Object.defineProperty(eQ,"__esModule",{value:!0});const r3e=XMt;r3e.code='require("ajv/dist/runtime/uri").default';eQ.default=r3e;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=nf;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var n=Cn;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return n.CodeGen}});const r=pI,i=mI,s=j1,o=eu,a=Cn,u=uo,l=hI,c=Zn,f=KMt,d=eQ,h=(U,P)=>new RegExp(U,P);h.code="new RegExp";const p=["removeAdditional","useDefaults","coerceTypes"],m=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),g={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},y={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},v=200;function _(U){var P,k,H,M,F,J,se,ae,ce,le,ge,ue,Fe,ke,Ge,Re,Oe,Le,Ut,Qe,je,bt,et,ut,lt;const jt=U.strict,Dn=(P=U.code)===null||P===void 0?void 0:P.optimize,he=Dn===!0||Dn===void 0?1:Dn||0,_e=(H=(k=U.code)===null||k===void 0?void 0:k.regExp)!==null&&H!==void 0?H:h,Pe=(M=U.uriResolver)!==null&&M!==void 0?M:d.default;return{strictSchema:(J=(F=U.strictSchema)!==null&&F!==void 0?F:jt)!==null&&J!==void 0?J:!0,strictNumbers:(ae=(se=U.strictNumbers)!==null&&se!==void 0?se:jt)!==null&&ae!==void 0?ae:!0,strictTypes:(le=(ce=U.strictTypes)!==null&&ce!==void 0?ce:jt)!==null&&le!==void 0?le:"log",strictTuples:(ue=(ge=U.strictTuples)!==null&&ge!==void 0?ge:jt)!==null&&ue!==void 0?ue:"log",strictRequired:(ke=(Fe=U.strictRequired)!==null&&Fe!==void 0?Fe:jt)!==null&&ke!==void 0?ke:!1,code:U.code?{...U.code,optimize:he,regExp:_e}:{optimize:he,regExp:_e},loopRequired:(Ge=U.loopRequired)!==null&&Ge!==void 0?Ge:v,loopEnum:(Re=U.loopEnum)!==null&&Re!==void 0?Re:v,meta:(Oe=U.meta)!==null&&Oe!==void 0?Oe:!0,messages:(Le=U.messages)!==null&&Le!==void 0?Le:!0,inlineRefs:(Ut=U.inlineRefs)!==null&&Ut!==void 0?Ut:!0,schemaId:(Qe=U.schemaId)!==null&&Qe!==void 0?Qe:"$id",addUsedSchema:(je=U.addUsedSchema)!==null&&je!==void 0?je:!0,validateSchema:(bt=U.validateSchema)!==null&&bt!==void 0?bt:!0,validateFormats:(et=U.validateFormats)!==null&&et!==void 0?et:!0,unicodeRegExp:(ut=U.unicodeRegExp)!==null&&ut!==void 0?ut:!0,int32range:(lt=U.int32range)!==null&&lt!==void 0?lt:!0,uriResolver:Pe}}class b{constructor(P={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,P=this.opts={...P,..._(P)};const{es5:k,lines:H}=this.opts.code;this.scope=new a.ValueScope({scope:{},prefixes:m,es5:k,lines:H}),this.logger=z(P.logger);const M=P.validateFormats;P.validateFormats=!1,this.RULES=(0,s.getRules)(),E.call(this,g,P,"NOT SUPPORTED"),E.call(this,y,P,"DEPRECATED","warn"),this._metaOpts=C.call(this),P.formats&&S.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),P.keywords&&I.call(this,P.keywords),typeof P.meta=="object"&&this.addMetaSchema(P.meta),x.call(this),P.validateFormats=M}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:P,meta:k,schemaId:H}=this.opts;let M=f;H==="id"&&(M={...f},M.id=M.$id,delete M.$id),k&&P&&this.addMetaSchema(M,M[H],!1)}defaultMeta(){const{meta:P,schemaId:k}=this.opts;return this.opts.defaultMeta=typeof P=="object"?P[k]||P:void 0}validate(P,k){let H;if(typeof P=="string"){if(H=this.getSchema(P),!H)throw new Error(`no schema with key or ref "${P}"`)}else H=this.compile(P);const M=H(k);return"$async"in H||(this.errors=H.errors),M}compile(P,k){const H=this._addSchema(P,k);return H.validate||this._compileSchemaEnv(H)}compileAsync(P,k){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:H}=this.opts;return M.call(this,P,k);async function M(le,ge){await F.call(this,le.$schema);const ue=this._addSchema(le,ge);return ue.validate||J.call(this,ue)}async function F(le){le&&!this.getSchema(le)&&await M.call(this,{$ref:le},!0)}async function J(le){try{return this._compileSchemaEnv(le)}catch(ge){if(!(ge instanceof i.default))throw ge;return se.call(this,ge),await ae.call(this,ge.missingSchema),J.call(this,le)}}function se({missingSchema:le,missingRef:ge}){if(this.refs[le])throw new Error(`AnySchema ${le} is loaded but ${ge} cannot be resolved`)}async function ae(le){const ge=await ce.call(this,le);this.refs[le]||await F.call(this,ge.$schema),this.refs[le]||this.addSchema(ge,le,k)}async function ce(le){const ge=this._loading[le];if(ge)return ge;try{return await(this._loading[le]=H(le))}finally{delete this._loading[le]}}}addSchema(P,k,H,M=this.opts.validateSchema){if(Array.isArray(P)){for(const J of P)this.addSchema(J,void 0,H,M);return this}let F;if(typeof P=="object"){const{schemaId:J}=this.opts;if(F=P[J],F!==void 0&&typeof F!="string")throw new Error(`schema ${J} must be string`)}return k=(0,u.normalizeId)(k||F),this._checkUnique(k),this.schemas[k]=this._addSchema(P,H,k,M,!0),this}addMetaSchema(P,k,H=this.opts.validateSchema){return this.addSchema(P,k,!0,H),this}validateSchema(P,k){if(typeof P=="boolean")return!0;let H;if(H=P.$schema,H!==void 0&&typeof H!="string")throw new Error("$schema must be a string");if(H=H||this.opts.defaultMeta||this.defaultMeta(),!H)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const M=this.validate(H,P);if(!M&&k){const F="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(F);else throw new Error(F)}return M}getSchema(P){let k;for(;typeof(k=w.call(this,P))=="string";)P=k;if(k===void 0){const{schemaId:H}=this.opts,M=new o.SchemaEnv({schema:{},schemaId:H});if(k=o.resolveSchema.call(this,M,P),!k)return;this.refs[P]=k}return k.validate||this._compileSchemaEnv(k)}removeSchema(P){if(P instanceof RegExp)return this._removeAllSchemas(this.schemas,P),this._removeAllSchemas(this.refs,P),this;switch(typeof P){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const k=w.call(this,P);return typeof k=="object"&&this._cache.delete(k.schema),delete this.schemas[P],delete this.refs[P],this}case"object":{const k=P;this._cache.delete(k);let H=P[this.opts.schemaId];return H&&(H=(0,u.normalizeId)(H),delete this.schemas[H],delete this.refs[H]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(P){for(const k of P)this.addKeyword(k);return this}addKeyword(P,k){let H;if(typeof P=="string")H=P,typeof k=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),k.keyword=H);else if(typeof P=="object"&&k===void 0){if(k=P,H=k.keyword,Array.isArray(H)&&!H.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if($.call(this,H,k),!k)return(0,c.eachItem)(H,F=>D.call(this,F)),this;V.call(this,k);const M={...k,type:(0,l.getJSONTypes)(k.type),schemaType:(0,l.getJSONTypes)(k.schemaType)};return(0,c.eachItem)(H,M.type.length===0?F=>D.call(this,F,M):F=>M.type.forEach(J=>D.call(this,F,M,J))),this}getKeyword(P){const k=this.RULES.all[P];return typeof k=="object"?k.definition:!!k}removeKeyword(P){const{RULES:k}=this;delete k.keywords[P],delete k.all[P];for(const H of k.rules){const M=H.rules.findIndex(F=>F.keyword===P);M>=0&&H.rules.splice(M,1)}return this}addFormat(P,k){return typeof k=="string"&&(k=new RegExp(k)),this.formats[P]=k,this}errorsText(P=this.errors,{separator:k=", ",dataVar:H="data"}={}){return!P||P.length===0?"No errors":P.map(M=>`${H}${M.instancePath} ${M.message}`).reduce((M,F)=>M+k+F)}$dataMetaSchema(P,k){const H=this.RULES.all;P=JSON.parse(JSON.stringify(P));for(const M of k){const F=M.split("/").slice(1);let J=P;for(const se of F)J=J[se];for(const se in H){const ae=H[se];if(typeof ae!="object")continue;const{$data:ce}=ae.definition,le=J[se];ce&&le&&(J[se]=G(le))}}return P}_removeAllSchemas(P,k){for(const H in P){const M=P[H];(!k||k.test(H))&&(typeof M=="string"?delete P[H]:M&&!M.meta&&(this._cache.delete(M.schema),delete P[H]))}}_addSchema(P,k,H,M=this.opts.validateSchema,F=this.opts.addUsedSchema){let J;const{schemaId:se}=this.opts;if(typeof P=="object")J=P[se];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof P!="boolean")throw new Error("schema must be object or boolean")}let ae=this._cache.get(P);if(ae!==void 0)return ae;H=(0,u.normalizeId)(J||H);const ce=u.getSchemaRefs.call(this,P,H);return ae=new o.SchemaEnv({schema:P,schemaId:se,meta:k,baseId:H,localRefs:ce}),this._cache.set(ae.schema,ae),F&&!H.startsWith("#")&&(H&&this._checkUnique(H),this.refs[H]=ae),M&&this.validateSchema(P,!0),ae}_checkUnique(P){if(this.schemas[P]||this.refs[P])throw new Error(`schema with key or id "${P}" already exists`)}_compileSchemaEnv(P){if(P.meta?this._compileMetaSchema(P):o.compileSchema.call(this,P),!P.validate)throw new Error("ajv implementation error");return P.validate}_compileMetaSchema(P){const k=this.opts;this.opts=this._metaOpts;try{o.compileSchema.call(this,P)}finally{this.opts=k}}}e.default=b,b.ValidationError=r.default,b.MissingRefError=i.default;function E(U,P,k,H="error"){for(const M in U){const F=M;F in P&&this.logger[H](`${k}: option ${M}. ${U[F]}`)}}function w(U){return U=(0,u.normalizeId)(U),this.schemas[U]||this.refs[U]}function x(){const U=this.opts.schemas;if(U)if(Array.isArray(U))this.addSchema(U);else for(const P in U)this.addSchema(U[P],P)}function S(){for(const U in this.opts.formats){const P=this.opts.formats[U];P&&this.addFormat(U,P)}}function I(U){if(Array.isArray(U)){this.addVocabulary(U);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const P in U){const k=U[P];k.keyword||(k.keyword=P),this.addKeyword(k)}}function C(){const U={...this.opts};for(const P of p)delete U[P];return U}const O={log(){},warn(){},error(){}};function z(U){if(U===!1)return O;if(U===void 0)return console;if(U.log&&U.warn&&U.error)return U;throw new Error("logger must implement log, warn and error methods")}const N=/^[a-z_$][a-z0-9_$:-]*$/i;function $(U,P){const{RULES:k}=this;if((0,c.eachItem)(U,H=>{if(k.keywords[H])throw new Error(`Keyword ${H} is already defined`);if(!N.test(H))throw new Error(`Keyword ${H} has invalid name`)}),!!P&&P.$data&&!("code"in P||"validate"in P))throw new Error('$data keyword must have "code" or "validate" function')}function D(U,P,k){var H;const M=P==null?void 0:P.post;if(k&&M)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:F}=this;let J=M?F.post:F.rules.find(({type:ae})=>ae===k);if(J||(J={type:k,rules:[]},F.rules.push(J)),F.keywords[U]=!0,!P)return;const se={keyword:U,definition:{...P,type:(0,l.getJSONTypes)(P.type),schemaType:(0,l.getJSONTypes)(P.schemaType)}};P.before?B.call(this,J,se,P.before):J.rules.push(se),F.all[U]=se,(H=P.implements)===null||H===void 0||H.forEach(ae=>this.addKeyword(ae))}function B(U,P,k){const H=U.rules.findIndex(M=>M.keyword===k);H>=0?U.rules.splice(H,0,P):(U.rules.push(P),this.logger.warn(`rule ${k} is not defined`))}function V(U){let{metaSchema:P}=U;P!==void 0&&(U.$data&&this.opts.$data&&(P=G(P)),U.validateSchema=this.compile(P,!0))}const j={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function G(U){return{anyOf:[U,j]}}})(RDe);var tQ={},nQ={},rQ={};Object.defineProperty(rQ,"__esModule",{value:!0});const QMt={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};rQ.default=QMt;var z1={};Object.defineProperty(z1,"__esModule",{value:!0});z1.callRef=z1.getValidate=void 0;const JMt=mI,Mpe=Tn,Ha=Cn,h_=sh,Fpe=eu,AP=Zn,ZMt={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:n,it:r}=e,{baseId:i,schemaEnv:s,validateName:o,opts:a,self:u}=r,{root:l}=s;if((n==="#"||n==="#/")&&i===l.baseId)return f();const c=Fpe.resolveRef.call(u,l,i,n);if(c===void 0)throw new JMt.default(r.opts.uriResolver,i,n);if(c instanceof Fpe.SchemaEnv)return d(c);return h(c);function f(){if(s===l)return f$(e,o,s,s.$async);const p=t.scopeValue("root",{ref:l});return f$(e,(0,Ha._)`${p}.validate`,l,l.$async)}function d(p){const m=i3e(e,p);f$(e,m,p,p.$async)}function h(p){const m=t.scopeValue("schema",a.code.source===!0?{ref:p,code:(0,Ha.stringify)(p)}:{ref:p}),g=t.name("valid"),y=e.subschema({schema:p,dataTypes:[],schemaPath:Ha.nil,topSchemaRef:m,errSchemaPath:n},g);e.mergeEvaluated(y),e.ok(g)}}};function i3e(e,t){const{gen:n}=e;return t.validate?n.scopeValue("validate",{ref:t.validate}):(0,Ha._)`${n.scopeValue("wrapper",{ref:t})}.validate`}z1.getValidate=i3e;function f$(e,t,n,r){const{gen:i,it:s}=e,{allErrors:o,schemaEnv:a,opts:u}=s,l=u.passContext?h_.default.this:Ha.nil;r?c():f();function c(){if(!a.$async)throw new Error("async schema referenced by sync schema");const p=i.let("valid");i.try(()=>{i.code((0,Ha._)`await ${(0,Mpe.callValidateCode)(e,t,l)}`),h(t),o||i.assign(p,!0)},m=>{i.if((0,Ha._)`!(${m} instanceof ${s.ValidationError})`,()=>i.throw(m)),d(m),o||i.assign(p,!1)}),e.ok(p)}function f(){e.result((0,Mpe.callValidateCode)(e,t,l),()=>h(t),()=>d(t))}function d(p){const m=(0,Ha._)`${p}.errors`;i.assign(h_.default.vErrors,(0,Ha._)`${h_.default.vErrors} === null ? ${m} : ${h_.default.vErrors}.concat(${m})`),i.assign(h_.default.errors,(0,Ha._)`${h_.default.vErrors}.length`)}function h(p){var m;if(!s.opts.unevaluated)return;const g=(m=n==null?void 0:n.validate)===null||m===void 0?void 0:m.evaluated;if(s.props!==!0)if(g&&!g.dynamicProps)g.props!==void 0&&(s.props=AP.mergeEvaluated.props(i,g.props,s.props));else{const y=i.var("props",(0,Ha._)`${p}.evaluated.props`);s.props=AP.mergeEvaluated.props(i,y,s.props,Ha.Name)}if(s.items!==!0)if(g&&!g.dynamicItems)g.items!==void 0&&(s.items=AP.mergeEvaluated.items(i,g.items,s.items));else{const y=i.var("items",(0,Ha._)`${p}.evaluated.items`);s.items=AP.mergeEvaluated.items(i,y,s.items,Ha.Name)}}}z1.callRef=f$;z1.default=ZMt;Object.defineProperty(nQ,"__esModule",{value:!0});const e6t=rQ,t6t=z1,n6t=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",e6t.default,t6t.default];nQ.default=n6t;var iQ={},sQ={};Object.defineProperty(sQ,"__esModule",{value:!0});const h3=Cn,mm=h3.operators,p3={maximum:{okStr:"<=",ok:mm.LTE,fail:mm.GT},minimum:{okStr:">=",ok:mm.GTE,fail:mm.LT},exclusiveMaximum:{okStr:"<",ok:mm.LT,fail:mm.GTE},exclusiveMinimum:{okStr:">",ok:mm.GT,fail:mm.LTE}},r6t={message:({keyword:e,schemaCode:t})=>(0,h3.str)`must be ${p3[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,h3._)`{comparison: ${p3[e].okStr}, limit: ${t}}`},i6t={keyword:Object.keys(p3),type:"number",schemaType:"number",$data:!0,error:r6t,code(e){const{keyword:t,data:n,schemaCode:r}=e;e.fail$data((0,h3._)`${n} ${p3[t].fail} ${r} || isNaN(${n})`)}};sQ.default=i6t;var oQ={};Object.defineProperty(oQ,"__esModule",{value:!0});const r2=Cn,s6t={message:({schemaCode:e})=>(0,r2.str)`must be multiple of ${e}`,params:({schemaCode:e})=>(0,r2._)`{multipleOf: ${e}}`},o6t={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:s6t,code(e){const{gen:t,data:n,schemaCode:r,it:i}=e,s=i.opts.multipleOfPrecision,o=t.let("res"),a=s?(0,r2._)`Math.abs(Math.round(${o}) - ${o}) > 1e-${s}`:(0,r2._)`${o} !== parseInt(${o})`;e.fail$data((0,r2._)`(${r} === 0 || (${o} = ${n}/${r}, ${a}))`)}};oQ.default=o6t;var aQ={},uQ={};Object.defineProperty(uQ,"__esModule",{value:!0});function s3e(e){const t=e.length;let n=0,r=0,i;for(;r<t;)n++,i=e.charCodeAt(r++),i>=55296&&i<=56319&&r<t&&(i=e.charCodeAt(r),(i&64512)===56320&&r++);return n}uQ.default=s3e;s3e.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty(aQ,"__esModule",{value:!0});const Py=Cn,a6t=Zn,u6t=uQ,l6t={message({keyword:e,schemaCode:t}){const n=e==="maxLength"?"more":"fewer";return(0,Py.str)`must NOT have ${n} than ${t} characters`},params:({schemaCode:e})=>(0,Py._)`{limit: ${e}}`},c6t={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:l6t,code(e){const{keyword:t,data:n,schemaCode:r,it:i}=e,s=t==="maxLength"?Py.operators.GT:Py.operators.LT,o=i.opts.unicode===!1?(0,Py._)`${n}.length`:(0,Py._)`${(0,a6t.useFunc)(e.gen,u6t.default)}(${n})`;e.fail$data((0,Py._)`${o} ${s} ${r}`)}};aQ.default=c6t;var lQ={};Object.defineProperty(lQ,"__esModule",{value:!0});const f6t=Tn,m3=Cn,d6t={message:({schemaCode:e})=>(0,m3.str)`must match pattern "${e}"`,params:({schemaCode:e})=>(0,m3._)`{pattern: ${e}}`},h6t={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:d6t,code(e){const{data:t,$data:n,schema:r,schemaCode:i,it:s}=e,o=s.opts.unicodeRegExp?"u":"",a=n?(0,m3._)`(new RegExp(${i}, ${o}))`:(0,f6t.usePattern)(e,r);e.fail$data((0,m3._)`!${a}.test(${t})`)}};lQ.default=h6t;var cQ={};Object.defineProperty(cQ,"__esModule",{value:!0});const i2=Cn,p6t={message({keyword:e,schemaCode:t}){const n=e==="maxProperties"?"more":"fewer";return(0,i2.str)`must NOT have ${n} than ${t} properties`},params:({schemaCode:e})=>(0,i2._)`{limit: ${e}}`},m6t={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:p6t,code(e){const{keyword:t,data:n,schemaCode:r}=e,i=t==="maxProperties"?i2.operators.GT:i2.operators.LT;e.fail$data((0,i2._)`Object.keys(${n}).length ${i} ${r}`)}};cQ.default=m6t;var fQ={};Object.defineProperty(fQ,"__esModule",{value:!0});const uS=Tn,s2=Cn,g6t=Zn,y6t={message:({params:{missingProperty:e}})=>(0,s2.str)`must have required property '${e}'`,params:({params:{missingProperty:e}})=>(0,s2._)`{missingProperty: ${e}}`},v6t={keyword:"required",type:"object",schemaType:"array",$data:!0,error:y6t,code(e){const{gen:t,schema:n,schemaCode:r,data:i,$data:s,it:o}=e,{opts:a}=o;if(!s&&n.length===0)return;const u=n.length>=a.loopRequired;if(o.allErrors?l():c(),a.strictRequired){const h=e.parentSchema.properties,{definedProperties:p}=e.it;for(const m of n)if((h==null?void 0:h[m])===void 0&&!p.has(m)){const g=o.schemaEnv.baseId+o.errSchemaPath,y=`required property "${m}" is not defined at "${g}" (strictRequired)`;(0,g6t.checkStrictMode)(o,y,o.opts.strictRequired)}}function l(){if(u||s)e.block$data(s2.nil,f);else for(const h of n)(0,uS.checkReportMissingProp)(e,h)}function c(){const h=t.let("missing");if(u||s){const p=t.let("valid",!0);e.block$data(p,()=>d(h,p)),e.ok(p)}else t.if((0,uS.checkMissingProp)(e,n,h)),(0,uS.reportMissingProp)(e,h),t.else()}function f(){t.forOf("prop",r,h=>{e.setParams({missingProperty:h}),t.if((0,uS.noPropertyInData)(t,i,h,a.ownProperties),()=>e.error())})}function d(h,p){e.setParams({missingProperty:h}),t.forOf(h,r,()=>{t.assign(p,(0,uS.propertyInData)(t,i,h,a.ownProperties)),t.if((0,s2.not)(p),()=>{e.error(),t.break()})},s2.nil)}}};fQ.default=v6t;var dQ={};Object.defineProperty(dQ,"__esModule",{value:!0});const o2=Cn,_6t={message({keyword:e,schemaCode:t}){const n=e==="maxItems"?"more":"fewer";return(0,o2.str)`must NOT have ${n} than ${t} items`},params:({schemaCode:e})=>(0,o2._)`{limit: ${e}}`},b6t={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:_6t,code(e){const{keyword:t,data:n,schemaCode:r}=e,i=t==="maxItems"?o2.operators.GT:o2.operators.LT;e.fail$data((0,o2._)`${n}.length ${i} ${r}`)}};dQ.default=b6t;var hQ={},gI={};Object.defineProperty(gI,"__esModule",{value:!0});const o3e=dY;o3e.code='require("ajv/dist/runtime/equal").default';gI.default=o3e;Object.defineProperty(hQ,"__esModule",{value:!0});const WB=hI,to=Cn,w6t=Zn,E6t=gI,x6t={message:({params:{i:e,j:t}})=>(0,to.str)`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>(0,to._)`{i: ${e}, j: ${t}}`},S6t={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:x6t,code(e){const{gen:t,data:n,$data:r,schema:i,parentSchema:s,schemaCode:o,it:a}=e;if(!r&&!i)return;const u=t.let("valid"),l=s.items?(0,WB.getSchemaTypes)(s.items):[];e.block$data(u,c,(0,to._)`${o} === false`),e.ok(u);function c(){const p=t.let("i",(0,to._)`${n}.length`),m=t.let("j");e.setParams({i:p,j:m}),t.assign(u,!0),t.if((0,to._)`${p} > 1`,()=>(f()?d:h)(p,m))}function f(){return l.length>0&&!l.some(p=>p==="object"||p==="array")}function d(p,m){const g=t.name("item"),y=(0,WB.checkDataTypes)(l,g,a.opts.strictNumbers,WB.DataType.Wrong),v=t.const("indices",(0,to._)`{}`);t.for((0,to._)`;${p}--;`,()=>{t.let(g,(0,to._)`${n}[${p}]`),t.if(y,(0,to._)`continue`),l.length>1&&t.if((0,to._)`typeof ${g} == "string"`,(0,to._)`${g} += "_"`),t.if((0,to._)`typeof ${v}[${g}] == "number"`,()=>{t.assign(m,(0,to._)`${v}[${g}]`),e.error(),t.assign(u,!1).break()}).code((0,to._)`${v}[${g}] = ${p}`)})}function h(p,m){const g=(0,w6t.useFunc)(t,E6t.default),y=t.name("outer");t.label(y).for((0,to._)`;${p}--;`,()=>t.for((0,to._)`${m} = ${p}; ${m}--;`,()=>t.if((0,to._)`${g}(${n}[${p}], ${n}[${m}])`,()=>{e.error(),t.assign(u,!1).break(y)})))}}};hQ.default=S6t;var pQ={};Object.defineProperty(pQ,"__esModule",{value:!0});const OV=Cn,T6t=Zn,A6t=gI,C6t={message:"must be equal to constant",params:({schemaCode:e})=>(0,OV._)`{allowedValue: ${e}}`},I6t={keyword:"const",$data:!0,error:C6t,code(e){const{gen:t,data:n,$data:r,schemaCode:i,schema:s}=e;r||s&&typeof s=="object"?e.fail$data((0,OV._)`!${(0,T6t.useFunc)(t,A6t.default)}(${n}, ${i})`):e.fail((0,OV._)`${s} !== ${n}`)}};pQ.default=I6t;var mQ={};Object.defineProperty(mQ,"__esModule",{value:!0});const ZS=Cn,O6t=Zn,P6t=gI,k6t={message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,ZS._)`{allowedValues: ${e}}`},$6t={keyword:"enum",schemaType:"array",$data:!0,error:k6t,code(e){const{gen:t,data:n,$data:r,schema:i,schemaCode:s,it:o}=e;if(!r&&i.length===0)throw new Error("enum must have non-empty array");const a=i.length>=o.opts.loopEnum;let u;const l=()=>u??(u=(0,O6t.useFunc)(t,P6t.default));let c;if(a||r)c=t.let("valid"),e.block$data(c,f);else{if(!Array.isArray(i))throw new Error("ajv implementation error");const h=t.const("vSchema",s);c=(0,ZS.or)(...i.map((p,m)=>d(h,m)))}e.pass(c);function f(){t.assign(c,!1),t.forOf("v",s,h=>t.if((0,ZS._)`${l()}(${n}, ${h})`,()=>t.assign(c,!0).break()))}function d(h,p){const m=i[p];return typeof m=="object"&&m!==null?(0,ZS._)`${l()}(${n}, ${h}[${p}])`:(0,ZS._)`${n} === ${m}`}}};mQ.default=$6t;Object.defineProperty(iQ,"__esModule",{value:!0});const R6t=sQ,N6t=oQ,D6t=aQ,L6t=lQ,M6t=cQ,F6t=fQ,B6t=dQ,j6t=hQ,z6t=pQ,U6t=mQ,V6t=[R6t.default,N6t.default,D6t.default,L6t.default,M6t.default,F6t.default,B6t.default,j6t.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},z6t.default,U6t.default];iQ.default=V6t;var gQ={},GE={};Object.defineProperty(GE,"__esModule",{value:!0});GE.validateAdditionalItems=void 0;const ky=Cn,PV=Zn,H6t={message:({params:{len:e}})=>(0,ky.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,ky._)`{limit: ${e}}`},q6t={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:H6t,code(e){const{parentSchema:t,it:n}=e,{items:r}=t;if(!Array.isArray(r)){(0,PV.checkStrictMode)(n,'"additionalItems" is ignored when "items" is not an array of schemas');return}a3e(e,r)}};function a3e(e,t){const{gen:n,schema:r,data:i,keyword:s,it:o}=e;o.items=!0;const a=n.const("len",(0,ky._)`${i}.length`);if(r===!1)e.setParams({len:t.length}),e.pass((0,ky._)`${a} <= ${t.length}`);else if(typeof r=="object"&&!(0,PV.alwaysValidSchema)(o,r)){const l=n.var("valid",(0,ky._)`${a} <= ${t.length}`);n.if((0,ky.not)(l),()=>u(l)),e.ok(l)}function u(l){n.forRange("i",t.length,a,c=>{e.subschema({keyword:s,dataProp:c,dataPropType:PV.Type.Num},l),o.allErrors||n.if((0,ky.not)(l),()=>n.break())})}}GE.validateAdditionalItems=a3e;GE.default=q6t;var yQ={},YE={};Object.defineProperty(YE,"__esModule",{value:!0});YE.validateTuple=void 0;const Bpe=Cn,d$=Zn,W6t=Tn,G6t={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:t,it:n}=e;if(Array.isArray(t))return u3e(e,"additionalItems",t);n.items=!0,!(0,d$.alwaysValidSchema)(n,t)&&e.ok((0,W6t.validateArray)(e))}};function u3e(e,t,n=e.schema){const{gen:r,parentSchema:i,data:s,keyword:o,it:a}=e;c(i),a.opts.unevaluated&&n.length&&a.items!==!0&&(a.items=d$.mergeEvaluated.items(r,n.length,a.items));const u=r.name("valid"),l=r.const("len",(0,Bpe._)`${s}.length`);n.forEach((f,d)=>{(0,d$.alwaysValidSchema)(a,f)||(r.if((0,Bpe._)`${l} > ${d}`,()=>e.subschema({keyword:o,schemaProp:d,dataProp:d},u)),e.ok(u))});function c(f){const{opts:d,errSchemaPath:h}=a,p=n.length,m=p===f.minItems&&(p===f.maxItems||f[t]===!1);if(d.strictTuples&&!m){const g=`"${o}" is ${p}-tuple, but minItems or maxItems/${t} are not specified or different at path "${h}"`;(0,d$.checkStrictMode)(a,g,d.strictTuples)}}}YE.validateTuple=u3e;YE.default=G6t;Object.defineProperty(yQ,"__esModule",{value:!0});const Y6t=YE,K6t={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,Y6t.validateTuple)(e,"items")};yQ.default=K6t;var vQ={};Object.defineProperty(vQ,"__esModule",{value:!0});const jpe=Cn,X6t=Zn,Q6t=Tn,J6t=GE,Z6t={message:({params:{len:e}})=>(0,jpe.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,jpe._)`{limit: ${e}}`},e4t={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:Z6t,code(e){const{schema:t,parentSchema:n,it:r}=e,{prefixItems:i}=n;r.items=!0,!(0,X6t.alwaysValidSchema)(r,t)&&(i?(0,J6t.validateAdditionalItems)(e,i):e.ok((0,Q6t.validateArray)(e)))}};vQ.default=e4t;var _Q={};Object.defineProperty(_Q,"__esModule",{value:!0});const Ol=Cn,CP=Zn,t4t={message:({params:{min:e,max:t}})=>t===void 0?(0,Ol.str)`must contain at least ${e} valid item(s)`:(0,Ol.str)`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>t===void 0?(0,Ol._)`{minContains: ${e}}`:(0,Ol._)`{minContains: ${e}, maxContains: ${t}}`},n4t={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:t4t,code(e){const{gen:t,schema:n,parentSchema:r,data:i,it:s}=e;let o,a;const{minContains:u,maxContains:l}=r;s.opts.next?(o=u===void 0?1:u,a=l):o=1;const c=t.const("len",(0,Ol._)`${i}.length`);if(e.setParams({min:o,max:a}),a===void 0&&o===0){(0,CP.checkStrictMode)(s,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&o>a){(0,CP.checkStrictMode)(s,'"minContains" > "maxContains" is always invalid'),e.fail();return}if((0,CP.alwaysValidSchema)(s,n)){let m=(0,Ol._)`${c} >= ${o}`;a!==void 0&&(m=(0,Ol._)`${m} && ${c} <= ${a}`),e.pass(m);return}s.items=!0;const f=t.name("valid");a===void 0&&o===1?h(f,()=>t.if(f,()=>t.break())):o===0?(t.let(f,!0),a!==void 0&&t.if((0,Ol._)`${i}.length > 0`,d)):(t.let(f,!1),d()),e.result(f,()=>e.reset());function d(){const m=t.name("_valid"),g=t.let("count",0);h(m,()=>t.if(m,()=>p(g)))}function h(m,g){t.forRange("i",0,c,y=>{e.subschema({keyword:"contains",dataProp:y,dataPropType:CP.Type.Num,compositeRule:!0},m),g()})}function p(m){t.code((0,Ol._)`${m}++`),a===void 0?t.if((0,Ol._)`${m} >= ${o}`,()=>t.assign(f,!0).break()):(t.if((0,Ol._)`${m} > ${a}`,()=>t.assign(f,!1).break()),o===1?t.assign(f,!0):t.if((0,Ol._)`${m} >= ${o}`,()=>t.assign(f,!0)))}}};_Q.default=n4t;var l3e={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=Cn,n=Zn,r=Tn;e.error={message:({params:{property:u,depsCount:l,deps:c}})=>{const f=l===1?"property":"properties";return(0,t.str)`must have ${f} ${c} when property ${u} is present`},params:({params:{property:u,depsCount:l,deps:c,missingProperty:f}})=>(0,t._)`{property: ${u},
    missingProperty: ${f},
    depsCount: ${l},
    deps: ${c}}`};const i={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(u){const[l,c]=s(u);o(u,l),a(u,c)}};function s({schema:u}){const l={},c={};for(const f in u){if(f==="__proto__")continue;const d=Array.isArray(u[f])?l:c;d[f]=u[f]}return[l,c]}function o(u,l=u.schema){const{gen:c,data:f,it:d}=u;if(Object.keys(l).length===0)return;const h=c.let("missing");for(const p in l){const m=l[p];if(m.length===0)continue;const g=(0,r.propertyInData)(c,f,p,d.opts.ownProperties);u.setParams({property:p,depsCount:m.length,deps:m.join(", ")}),d.allErrors?c.if(g,()=>{for(const y of m)(0,r.checkReportMissingProp)(u,y)}):(c.if((0,t._)`${g} && (${(0,r.checkMissingProp)(u,m,h)})`),(0,r.reportMissingProp)(u,h),c.else())}}e.validatePropertyDeps=o;function a(u,l=u.schema){const{gen:c,data:f,keyword:d,it:h}=u,p=c.name("valid");for(const m in l)(0,n.alwaysValidSchema)(h,l[m])||(c.if((0,r.propertyInData)(c,f,m,h.opts.ownProperties),()=>{const g=u.subschema({keyword:d,schemaProp:m},p);u.mergeValidEvaluated(g,p)},()=>c.var(p,!0)),u.ok(p))}e.validateSchemaDeps=a,e.default=i})(l3e);var bQ={};Object.defineProperty(bQ,"__esModule",{value:!0});const c3e=Cn,r4t=Zn,i4t={message:"property name must be valid",params:({params:e})=>(0,c3e._)`{propertyName: ${e.propertyName}}`},s4t={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:i4t,code(e){const{gen:t,schema:n,data:r,it:i}=e;if((0,r4t.alwaysValidSchema)(i,n))return;const s=t.name("valid");t.forIn("key",r,o=>{e.setParams({propertyName:o}),e.subschema({keyword:"propertyNames",data:o,dataTypes:["string"],propertyName:o,compositeRule:!0},s),t.if((0,c3e.not)(s),()=>{e.error(!0),i.allErrors||t.break()})}),e.ok(s)}};bQ.default=s4t;var F4={};Object.defineProperty(F4,"__esModule",{value:!0});const IP=Tn,Ac=Cn,o4t=sh,OP=Zn,a4t={message:"must NOT have additional properties",params:({params:e})=>(0,Ac._)`{additionalProperty: ${e.additionalProperty}}`},u4t={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:a4t,code(e){const{gen:t,schema:n,parentSchema:r,data:i,errsCount:s,it:o}=e;if(!s)throw new Error("ajv implementation error");const{allErrors:a,opts:u}=o;if(o.props=!0,u.removeAdditional!=="all"&&(0,OP.alwaysValidSchema)(o,n))return;const l=(0,IP.allSchemaProperties)(r.properties),c=(0,IP.allSchemaProperties)(r.patternProperties);f(),e.ok((0,Ac._)`${s} === ${o4t.default.errors}`);function f(){t.forIn("key",i,g=>{!l.length&&!c.length?p(g):t.if(d(g),()=>p(g))})}function d(g){let y;if(l.length>8){const v=(0,OP.schemaRefOrVal)(o,r.properties,"properties");y=(0,IP.isOwnProperty)(t,v,g)}else l.length?y=(0,Ac.or)(...l.map(v=>(0,Ac._)`${g} === ${v}`)):y=Ac.nil;return c.length&&(y=(0,Ac.or)(y,...c.map(v=>(0,Ac._)`${(0,IP.usePattern)(e,v)}.test(${g})`))),(0,Ac.not)(y)}function h(g){t.code((0,Ac._)`delete ${i}[${g}]`)}function p(g){if(u.removeAdditional==="all"||u.removeAdditional&&n===!1){h(g);return}if(n===!1){e.setParams({additionalProperty:g}),e.error(),a||t.break();return}if(typeof n=="object"&&!(0,OP.alwaysValidSchema)(o,n)){const y=t.name("valid");u.removeAdditional==="failing"?(m(g,y,!1),t.if((0,Ac.not)(y),()=>{e.reset(),h(g)})):(m(g,y),a||t.if((0,Ac.not)(y),()=>t.break()))}}function m(g,y,v){const _={keyword:"additionalProperties",dataProp:g,dataPropType:OP.Type.Str};v===!1&&Object.assign(_,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(_,y)}}};F4.default=u4t;var wQ={};Object.defineProperty(wQ,"__esModule",{value:!0});const l4t=nf,zpe=Tn,GB=Zn,Upe=F4,c4t={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,parentSchema:r,data:i,it:s}=e;s.opts.removeAdditional==="all"&&r.additionalProperties===void 0&&Upe.default.code(new l4t.KeywordCxt(s,Upe.default,"additionalProperties"));const o=(0,zpe.allSchemaProperties)(n);for(const f of o)s.definedProperties.add(f);s.opts.unevaluated&&o.length&&s.props!==!0&&(s.props=GB.mergeEvaluated.props(t,(0,GB.toHash)(o),s.props));const a=o.filter(f=>!(0,GB.alwaysValidSchema)(s,n[f]));if(a.length===0)return;const u=t.name("valid");for(const f of a)l(f)?c(f):(t.if((0,zpe.propertyInData)(t,i,f,s.opts.ownProperties)),c(f),s.allErrors||t.else().var(u,!0),t.endIf()),e.it.definedProperties.add(f),e.ok(u);function l(f){return s.opts.useDefaults&&!s.compositeRule&&n[f].default!==void 0}function c(f){e.subschema({keyword:"properties",schemaProp:f,dataProp:f},u)}}};wQ.default=c4t;var EQ={};Object.defineProperty(EQ,"__esModule",{value:!0});const Vpe=Tn,PP=Cn,Hpe=Zn,qpe=Zn,f4t={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,data:r,parentSchema:i,it:s}=e,{opts:o}=s,a=(0,Vpe.allSchemaProperties)(n),u=a.filter(m=>(0,Hpe.alwaysValidSchema)(s,n[m]));if(a.length===0||u.length===a.length&&(!s.opts.unevaluated||s.props===!0))return;const l=o.strictSchema&&!o.allowMatchingProperties&&i.properties,c=t.name("valid");s.props!==!0&&!(s.props instanceof PP.Name)&&(s.props=(0,qpe.evaluatedPropsToName)(t,s.props));const{props:f}=s;d();function d(){for(const m of a)l&&h(m),s.allErrors?p(m):(t.var(c,!0),p(m),t.if(c))}function h(m){for(const g in l)new RegExp(m).test(g)&&(0,Hpe.checkStrictMode)(s,`property ${g} matches pattern ${m} (use allowMatchingProperties)`)}function p(m){t.forIn("key",r,g=>{t.if((0,PP._)`${(0,Vpe.usePattern)(e,m)}.test(${g})`,()=>{const y=u.includes(m);y||e.subschema({keyword:"patternProperties",schemaProp:m,dataProp:g,dataPropType:qpe.Type.Str},c),s.opts.unevaluated&&f!==!0?t.assign((0,PP._)`${f}[${g}]`,!0):!y&&!s.allErrors&&t.if((0,PP.not)(c),()=>t.break())})})}}};EQ.default=f4t;var xQ={};Object.defineProperty(xQ,"__esModule",{value:!0});const d4t=Zn,h4t={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:n,it:r}=e;if((0,d4t.alwaysValidSchema)(r,n)){e.fail();return}const i=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},i),e.failResult(i,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};xQ.default=h4t;var SQ={};Object.defineProperty(SQ,"__esModule",{value:!0});const p4t=Tn,m4t={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:p4t.validateUnion,error:{message:"must match a schema in anyOf"}};SQ.default=m4t;var TQ={};Object.defineProperty(TQ,"__esModule",{value:!0});const h$=Cn,g4t=Zn,y4t={message:"must match exactly one schema in oneOf",params:({params:e})=>(0,h$._)`{passingSchemas: ${e.passing}}`},v4t={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:y4t,code(e){const{gen:t,schema:n,parentSchema:r,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(i.opts.discriminator&&r.discriminator)return;const s=n,o=t.let("valid",!1),a=t.let("passing",null),u=t.name("_valid");e.setParams({passing:a}),t.block(l),e.result(o,()=>e.reset(),()=>e.error(!0));function l(){s.forEach((c,f)=>{let d;(0,g4t.alwaysValidSchema)(i,c)?t.var(u,!0):d=e.subschema({keyword:"oneOf",schemaProp:f,compositeRule:!0},u),f>0&&t.if((0,h$._)`${u} && ${o}`).assign(o,!1).assign(a,(0,h$._)`[${a}, ${f}]`).else(),t.if(u,()=>{t.assign(o,!0),t.assign(a,f),d&&e.mergeEvaluated(d,h$.Name)})})}}};TQ.default=v4t;var AQ={};Object.defineProperty(AQ,"__esModule",{value:!0});const _4t=Zn,b4t={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:n,it:r}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");const i=t.name("valid");n.forEach((s,o)=>{if((0,_4t.alwaysValidSchema)(r,s))return;const a=e.subschema({keyword:"allOf",schemaProp:o},i);e.ok(i),e.mergeEvaluated(a)})}};AQ.default=b4t;var CQ={};Object.defineProperty(CQ,"__esModule",{value:!0});const g3=Cn,f3e=Zn,w4t={message:({params:e})=>(0,g3.str)`must match "${e.ifClause}" schema`,params:({params:e})=>(0,g3._)`{failingKeyword: ${e.ifClause}}`},E4t={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:w4t,code(e){const{gen:t,parentSchema:n,it:r}=e;n.then===void 0&&n.else===void 0&&(0,f3e.checkStrictMode)(r,'"if" without "then" and "else" is ignored');const i=Wpe(r,"then"),s=Wpe(r,"else");if(!i&&!s)return;const o=t.let("valid",!0),a=t.name("_valid");if(u(),e.reset(),i&&s){const c=t.let("ifClause");e.setParams({ifClause:c}),t.if(a,l("then",c),l("else",c))}else i?t.if(a,l("then")):t.if((0,g3.not)(a),l("else"));e.pass(o,()=>e.error(!0));function u(){const c=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);e.mergeEvaluated(c)}function l(c,f){return()=>{const d=e.subschema({keyword:c},a);t.assign(o,a),e.mergeValidEvaluated(d,o),f?t.assign(f,(0,g3._)`${c}`):e.setParams({ifClause:c})}}}};function Wpe(e,t){const n=e.schema[t];return n!==void 0&&!(0,f3e.alwaysValidSchema)(e,n)}CQ.default=E4t;var IQ={};Object.defineProperty(IQ,"__esModule",{value:!0});const x4t=Zn,S4t={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:n}){t.if===void 0&&(0,x4t.checkStrictMode)(n,`"${e}" without "if" is ignored`)}};IQ.default=S4t;Object.defineProperty(gQ,"__esModule",{value:!0});const T4t=GE,A4t=yQ,C4t=YE,I4t=vQ,O4t=_Q,P4t=l3e,k4t=bQ,$4t=F4,R4t=wQ,N4t=EQ,D4t=xQ,L4t=SQ,M4t=TQ,F4t=AQ,B4t=CQ,j4t=IQ;function z4t(e=!1){const t=[D4t.default,L4t.default,M4t.default,F4t.default,B4t.default,j4t.default,k4t.default,$4t.default,P4t.default,R4t.default,N4t.default];return e?t.push(A4t.default,I4t.default):t.push(T4t.default,C4t.default),t.push(O4t.default),t}gQ.default=z4t;var OQ={},PQ={};Object.defineProperty(PQ,"__esModule",{value:!0});const ji=Cn,U4t={message:({schemaCode:e})=>(0,ji.str)`must match format "${e}"`,params:({schemaCode:e})=>(0,ji._)`{format: ${e}}`},V4t={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:U4t,code(e,t){const{gen:n,data:r,$data:i,schema:s,schemaCode:o,it:a}=e,{opts:u,errSchemaPath:l,schemaEnv:c,self:f}=a;if(!u.validateFormats)return;i?d():h();function d(){const p=n.scopeValue("formats",{ref:f.formats,code:u.code.formats}),m=n.const("fDef",(0,ji._)`${p}[${o}]`),g=n.let("fType"),y=n.let("format");n.if((0,ji._)`typeof ${m} == "object" && !(${m} instanceof RegExp)`,()=>n.assign(g,(0,ji._)`${m}.type || "string"`).assign(y,(0,ji._)`${m}.validate`),()=>n.assign(g,(0,ji._)`"string"`).assign(y,m)),e.fail$data((0,ji.or)(v(),_()));function v(){return u.strictSchema===!1?ji.nil:(0,ji._)`${o} && !${y}`}function _(){const b=c.$async?(0,ji._)`(${m}.async ? await ${y}(${r}) : ${y}(${r}))`:(0,ji._)`${y}(${r})`,E=(0,ji._)`(typeof ${y} == "function" ? ${b} : ${y}.test(${r}))`;return(0,ji._)`${y} && ${y} !== true && ${g} === ${t} && !${E}`}}function h(){const p=f.formats[s];if(!p){v();return}if(p===!0)return;const[m,g,y]=_(p);m===t&&e.pass(b());function v(){if(u.strictSchema===!1){f.logger.warn(E());return}throw new Error(E());function E(){return`unknown format "${s}" ignored in schema at path "${l}"`}}function _(E){const w=E instanceof RegExp?(0,ji.regexpCode)(E):u.code.formats?(0,ji._)`${u.code.formats}${(0,ji.getProperty)(s)}`:void 0,x=n.scopeValue("formats",{key:s,ref:E,code:w});return typeof E=="object"&&!(E instanceof RegExp)?[E.type||"string",E.validate,(0,ji._)`${x}.validate`]:["string",E,x]}function b(){if(typeof p=="object"&&!(p instanceof RegExp)&&p.async){if(!c.$async)throw new Error("async format in sync schema");return(0,ji._)`await ${y}(${r})`}return typeof g=="function"?(0,ji._)`${y}(${r})`:(0,ji._)`${y}.test(${r})`}}}};PQ.default=V4t;Object.defineProperty(OQ,"__esModule",{value:!0});const H4t=PQ,q4t=[H4t.default];OQ.default=q4t;var Lw={};Object.defineProperty(Lw,"__esModule",{value:!0});Lw.contentVocabulary=Lw.metadataVocabulary=void 0;Lw.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];Lw.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty(tQ,"__esModule",{value:!0});const W4t=nQ,G4t=iQ,Y4t=gQ,K4t=OQ,Gpe=Lw,X4t=[W4t.default,G4t.default,(0,Y4t.default)(),K4t.default,Gpe.metadataVocabulary,Gpe.contentVocabulary];tQ.default=X4t;var kQ={},d3e={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DiscrError=void 0,function(t){t.Tag="tag",t.Mapping="mapping"}(e.DiscrError||(e.DiscrError={}))})(d3e);Object.defineProperty(kQ,"__esModule",{value:!0});const N_=Cn,kV=d3e,Ype=eu,Q4t=Zn,J4t={message:({params:{discrError:e,tagName:t}})=>e===kV.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:n}})=>(0,N_._)`{error: ${e}, tag: ${n}, tagValue: ${t}}`},Z4t={keyword:"discriminator",type:"object",schemaType:"object",error:J4t,code(e){const{gen:t,data:n,schema:r,parentSchema:i,it:s}=e,{oneOf:o}=i;if(!s.opts.discriminator)throw new Error("discriminator: requires discriminator option");const a=r.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(r.mapping)throw new Error("discriminator: mapping is not supported");if(!o)throw new Error("discriminator: requires oneOf keyword");const u=t.let("valid",!1),l=t.const("tag",(0,N_._)`${n}${(0,N_.getProperty)(a)}`);t.if((0,N_._)`typeof ${l} == "string"`,()=>c(),()=>e.error(!1,{discrError:kV.DiscrError.Tag,tag:l,tagName:a})),e.ok(u);function c(){const h=d();t.if(!1);for(const p in h)t.elseIf((0,N_._)`${l} === ${p}`),t.assign(u,f(h[p]));t.else(),e.error(!1,{discrError:kV.DiscrError.Mapping,tag:l,tagName:a}),t.endIf()}function f(h){const p=t.name("valid"),m=e.subschema({keyword:"oneOf",schemaProp:h},p);return e.mergeEvaluated(m,N_.Name),p}function d(){var h;const p={},m=y(i);let g=!0;for(let b=0;b<o.length;b++){let E=o[b];E!=null&&E.$ref&&!(0,Q4t.schemaHasRulesButRef)(E,s.self.RULES)&&(E=Ype.resolveRef.call(s.self,s.schemaEnv.root,s.baseId,E==null?void 0:E.$ref),E instanceof Ype.SchemaEnv&&(E=E.schema));const w=(h=E==null?void 0:E.properties)===null||h===void 0?void 0:h[a];if(typeof w!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);g=g&&(m||y(E)),v(w,b)}if(!g)throw new Error(`discriminator: "${a}" must be required`);return p;function y({required:b}){return Array.isArray(b)&&b.includes(a)}function v(b,E){if(b.const)_(b.const,E);else if(b.enum)for(const w of b.enum)_(w,E);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function _(b,E){if(typeof b!="string"||b in p)throw new Error(`discriminator: "${a}" values must be unique strings`);p[b]=E}}}};kQ.default=Z4t;const eFt="http://json-schema.org/draft-07/schema#",tFt="http://json-schema.org/draft-07/schema#",nFt="Core schema meta-schema",rFt={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},iFt=["object","boolean"],sFt={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},oFt={$schema:eFt,$id:tFt,title:nFt,definitions:rFt,type:iFt,properties:sFt,default:!0};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=void 0;const n=RDe,r=tQ,i=kQ,s=oFt,o=["/properties"],a="http://json-schema.org/draft-07/schema";class u extends n.default{_addVocabularies(){super._addVocabularies(),r.default.forEach(p=>this.addVocabulary(p)),this.opts.discriminator&&this.addKeyword(i.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const p=this.opts.$data?this.$dataMetaSchema(s,o):s;this.addMetaSchema(p,a,!1),this.refs["http://json-schema.org/schema"]=a}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(a)?a:void 0)}}e.exports=t=u,Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var l=nf;Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return l.KeywordCxt}});var c=Cn;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return c._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return c.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return c.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return c.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return c.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return c.CodeGen}});var f=pI;Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return f.default}});var d=mI;Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return d.default}})})(TV,TV.exports);var aFt=TV.exports;const h3e=pl(aFt),uFt="#/definitions/StudyConfig",lFt="http://json-schema.org/draft-07/schema#",cFt={Answer:{additionalProperties:!1,description:"The Answer interface is used to define the properties of an answer. Answers are used to define the correct answer for a task. These are generally used in training tasks.",properties:{acceptableHigh:{description:"The acceptable high value for the answer. This is used to define a range of acceptable answers.",type:"number"},acceptableLow:{description:"The acceptable low value for the answer. This is used to define a range of acceptable answers.",type:"number"},answer:{description:"The correct answer to the question."},id:{description:"The id of the answer. This is used to identify the answer in the data file.",type:"string"}},required:["id","answer"],type:"object"},CheckboxResponse:{additionalProperties:!1,description:"The CheckboxResponse interface is used to define the properties of a checkbox response. CheckboxResponses render as a checkbox input with user specified options.",properties:{correctAnswer:{description:"The correct answer to the response. This is used in the data download and can be shown in the admin panel."},hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},options:{description:"The options that are displayed as checkboxes.",items:{$ref:"#/definitions/Option"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},type:{const:"checkbox",type:"string"}},required:["id","location","options","prompt","required","type"],type:"object"},DropdownResponse:{additionalProperties:!1,description:"The DropdownResponse interface is used to define the properties of a dropdown response. DropdownResponses render as a select input with user specified options.",properties:{correctAnswer:{description:"The correct answer to the response. This is used in the data download and can be shown in the admin panel."},hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},options:{description:"The options that are displayed in the dropdown.",items:{$ref:"#/definitions/Option"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},type:{const:"dropdown",type:"string"}},required:["id","location","options","prompt","required","type"],type:"object"},IFrameResponse:{additionalProperties:!1,description:"The IFrameResponse interface is used to define the properties of an iframe response. IFrameResponses render as a list, that is connected to a WebsiteComponent. When data is sent from the WebsiteComponent, it is displayed in the list.",properties:{correctAnswer:{description:"The correct answer to the response. This is used in the data download and can be shown in the admin panel."},hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},type:{const:"iframe",type:"string"}},required:["id","location","prompt","required","type"],type:"object"},ImageComponent:{additionalProperties:!1,description:"The ImageComponent interface is used to define the properties of an image component. This component is used to render an image with optional styling.",properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},type:{const:"image",type:"string"}},required:["path","response","type"],type:"object"},IndividualComponent:{anyOf:[{$ref:"#/definitions/MarkdownComponent"},{$ref:"#/definitions/ReactComponent"},{$ref:"#/definitions/ImageComponent"},{$ref:"#/definitions/WebsiteComponent"},{$ref:"#/definitions/QuestionnaireComponent"}]},InheritedComponent:{additionalProperties:!1,description:"An InheritedComponent is a component that inherits properties from a baseComponent. This is used to avoid repeating properties in components. This also means that components in the baseComponents object can be partially defined, while components in the components object can inherit from them and must be fully defined and include all properties (after potentially merging with a base component).",properties:{baseComponent:{type:"string"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},type:{enum:["markdown","react-component","image","website","questionnaire"],type:"string"}},required:["baseComponent"],type:"object"},InterruptionBlock:{anyOf:[{additionalProperties:!1,properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},firstLocation:{description:"The Location of the first instance of the interruption. If this is set to 2, the interruption will be shown after the second component (inserted at index 2).",type:"number"},spacing:{description:"The number of components between breaks.",type:"number"}},required:["firstLocation","spacing","components"],type:"object"},{additionalProperties:!1,properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},numInterruptions:{description:"The number of times the interruption will be randomly added",type:"number"},spacing:{const:"random",description:"If spacing is set to random, reVISit will add interruptions randomly. These interruptions will not ever be displayed as the first component in the block.",type:"string"}},required:["spacing","numInterruptions","components"],type:"object"}]},LikertResponse:{additionalProperties:!1,description:"The LikertResponse interface is used to define the properties of a likert response. LikertResponses render as radio buttons with a user specified number of options, which can be controlled through the preset. For example, preset: 5 will render 5 radio buttons, and preset: 7 will render 7 radio buttons. LikertResponses can also have a description, and left and right labels. The left and right labels are used to label the left and right ends of the likert scale with values such as 'Strongly Disagree' and 'Strongly Agree'.",properties:{correctAnswer:{description:"The correct answer to the response. This is used in the data download and can be shown in the admin panel."},desc:{description:"The description of the likert scale.",type:"string"},hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{description:"The left label of the likert scale. E.g Strongly Disagree",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},preset:{description:"The number of options to render.",type:"number"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{description:"The right label of the likert scale. E.g Strongly Agree",type:"string"},type:{const:"likert",type:"string"}},required:["id","location","preset","prompt","required","type"],type:"object"},LongTextResponse:{additionalProperties:!1,description:"The LongTextResponse interface is used to define the properties of a long text response. LongTextResponses render as a text area that accepts any text and can optionally have a placeholder.",properties:{correctAnswer:{description:"The correct answer to the response. This is used in the data download and can be shown in the admin panel."},hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},type:{const:"longText",type:"string"}},required:["id","location","prompt","required","type"],type:"object"},MarkdownComponent:{additionalProperties:!1,description:"The MarkdownComponent interface is used to define the properties of a markdown component. The components can be used to render many different things, such as consent forms, instructions, and debriefs. Additionally, you can use the markdown component to render images, videos, and other media, with supporting text.",properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"markdown",type:"string"}},required:["path","response","type"],type:"object"},NumericalResponse:{additionalProperties:!1,description:"The NumericalResponse interface is used to define the properties of a numerical response. NumericalResponses render as a text input that only accepts numbers, and can optionally have a min and max value, or a placeholder.",properties:{correctAnswer:{description:"The correct answer to the response. This is used in the data download and can be shown in the admin panel."},hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},max:{description:"The maximum value that is accepted in the input.",type:"number"},min:{description:"The minimum value that is accepted in the input.",type:"number"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},type:{const:"numerical",type:"string"}},required:["id","location","prompt","required","type"],type:"object"},Option:{additionalProperties:!1,description:"The Option interface is used to define the options for a dropdown, slider, radio, or checkbox response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file. The Option interface is used in the Response interface.",properties:{label:{description:"The label displayed to participants.",type:"string"},value:{description:"The value stored in the participant's data.",type:["string","number"]}},required:["label","value"],type:"object"},OrderObject:{additionalProperties:!1,description:"The OrderObject interface is used to define the properties of an order object. This is used to define the order of components in a study. It supports random assignment of trials using a pure random assignment and a latin square.",properties:{components:{description:"The components that are included in the order.",items:{anyOf:[{type:"string"},{$ref:"#/definitions/OrderObject"}]},type:"array"},interruptions:{description:"The interruptions property specifies an array of interruptions. These can be used for breaks or attention checks.",items:{$ref:"#/definitions/InterruptionBlock"},type:"array"},numSamples:{description:"The number of samples to use for the random assignments. This means you can randomize across 3 components while only showing a participant 2 at a time.",type:"number"},order:{description:"The type of order. This can be random (pure random), latinSquare (random with some guarantees), or fixed.",enum:["random","latinSquare","fixed"],type:"string"}},required:["order","components"],type:"object"},QuestionnaireComponent:{additionalProperties:!1,description:"The QuestionnaireComponent interface is used to define the properties of a questionnaire component. A QuestionnaireComponent is used to render questions with different response types. The response types are also defined with these documentation. The main use case of this component type is to ask participants questions, without using markdown, websites, images, etc.",properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"questionnaire",type:"string"}},required:["response","type"],type:"object"},RadioResponse:{additionalProperties:!1,description:"The RadioResponse interface is used to define the properties of a radio response. RadioResponses render as a radio input with user specified options, and optionally left and right labels.",properties:{correctAnswer:{description:"The correct answer to the response. This is used in the data download and can be shown in the admin panel."},hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},options:{items:{$ref:"#/definitions/Option"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{type:"string"},type:{const:"radio",type:"string"}},required:["id","location","options","prompt","required","type"],type:"object"},ReactComponent:{additionalProperties:!1,description:"The ReactComponent interface is used to define the properties of a react component. This component is used to render react code with certain parameters. These parameters can be used within your react code to render different things.",properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},path:{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"react-component",type:"string"}},required:["path","response","type"],type:"object"},Response:{anyOf:[{$ref:"#/definitions/NumericalResponse"},{$ref:"#/definitions/ShortTextResponse"},{$ref:"#/definitions/LongTextResponse"},{$ref:"#/definitions/LikertResponse"},{$ref:"#/definitions/DropdownResponse"},{$ref:"#/definitions/SliderResponse"},{$ref:"#/definitions/RadioResponse"},{$ref:"#/definitions/CheckboxResponse"},{$ref:"#/definitions/IFrameResponse"}]},ResponseBlockLocation:{enum:["sidebar","aboveStimulus","belowStimulus"],type:"string"},ShortTextResponse:{additionalProperties:!1,description:"The ShortTextResponse interface is used to define the properties of a short text response. ShortTextResponses render as a text input that accepts any text and can optionally have a placeholder.",properties:{correctAnswer:{description:"The correct answer to the response. This is used in the data download and can be shown in the admin panel."},hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},type:{const:"shortText",type:"string"}},required:["id","location","prompt","required","type"],type:"object"},SliderResponse:{additionalProperties:!1,description:"The SliderResponse interface is used to define the properties of a slider response. SliderResponses render as a slider input with user specified steps. For example, you could have steps of 0, 50, and 100.",properties:{correctAnswer:{description:"The correct answer to the response. This is used in the data download and can be shown in the admin panel."},hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},options:{description:"This define the steps in the slider and the extent of the slider.",items:{$ref:"#/definitions/Option"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},type:{const:"slider",type:"string"}},required:["id","location","options","prompt","required","type"],type:"object"},StudyConfig:{additionalProperties:!1,description:"The StudyConfig interface is used to define the properties of a study configuration. These are the hjson files that live in the public folder. In our repo, one example of this would be public/cleveland/config-cleveland.json.",properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. See examples for more information",type:"string"},baseComponents:{additionalProperties:{anyOf:[{$ref:"#/definitions/IndividualComponent"},{additionalProperties:!1,properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},type:{enum:["markdown","react-component","image","website","questionnaire"],type:"string"}},type:"object"}]},description:"The components that are used in the study (baseComponents allow PartialComponents which allows for inheriting from them in components).",type:"object"},components:{additionalProperties:{anyOf:[{$ref:"#/definitions/IndividualComponent"},{$ref:"#/definitions/InheritedComponent"}]},description:"The components that are used in the study. They must be fully defined here with all properties. Some properties may be inherited from baseComponents.",type:"object"},sequence:{$ref:"#/definitions/OrderObject",description:"The order of the components in the study. This might include some randomness."},studyMetadata:{$ref:"#/definitions/StudyMetadata",description:"The metadata for the study. This is used to identify the study and version in the data file."},uiConfig:{$ref:"#/definitions/UIConfig",description:"The UI configuration for the study. This is used to configure the UI of the app."}},required:["$schema","studyMetadata","uiConfig","components","sequence"],type:"object"},StudyMetadata:{additionalProperties:!1,description:"The StudyMetadata is used to describe certain properties of a study. Some of this data is displayed on the landing page when running the app, such as the title and description. This data is also included in the data file that is downloaded at the end of the study, to help identify the study and version.",properties:{authors:{description:"The authors of your study.",items:{type:"string"},type:"array"},date:{description:"The date of your study, may be useful for the researcher.",type:"string"},description:{description:"The description of your study, shown on the landing page.",type:"string"},organizations:{description:"The organizations that are associated with your study.",items:{type:"string"},type:"array"},title:{description:"The title of your study, shown on the landing page.",type:"string"},version:{description:"The version of your study, shown on the landing page and attached to participant data. This might be useful for seeing which version of the study a participant saw.",type:"string"}},required:["title","version","authors","date","description","organizations"],type:"object"},UIConfig:{additionalProperties:!1,description:"The UIConfig is used to configure the UI of the app. This includes the logo, contact email, and whether to show a progress bar. The UIConfig is also used to configure the sidebar, which can be used to display the task instructions and capture responses.",properties:{autoDownloadStudy:{description:"Controls whether the study data is automatically downloaded at the end of the study.",type:"boolean"},autoDownloadTime:{description:"The time in milliseconds to wait before automatically downloading the study data.",type:"number"},contactEmail:{description:"The email address that used during the study if a participant clicks contact.",type:"string"},helpTextPath:{description:"The path to the help text file. This is displayed when a participant clicks help. Markdown is supported.",type:"string"},logoPath:{description:"The path to the logo image. This is displayed on the landing page and the header.",type:"string"},numSequences:{description:"The number of sequences to generate for the study. This is used to generate the random sequences for the study. The default is 1000.",type:"number"},sidebar:{description:"Controls whether the left sidebar is rendered at all. Required to be true if your response's location is set to sidebar for any question.",type:"boolean"},studyEndMsg:{description:"The message to display when the study ends.",type:"string"},urlParticipantIdParam:{description:"If the participant ID is passed in the URL, this is the name of the querystring parameter that is used to capture the participant ID (e.g. PROLIFIC_ID). This will allow a user to continue a study on different devices and browsers.",type:"string"},windowEventDebounceTime:{description:"Debounce time in milliseconds for automatically tracked window events. Defaults to 100. E.g 100 here means 1000ms / 100ms = 10 times a second, 200 here means 1000ms / 200ms = 5 times per second",type:"number"},withProgressBar:{description:"Controls whether the progress bar is rendered in the study.",type:"boolean"}},required:["contactEmail","logoPath","withProgressBar","sidebar"],type:"object"},WebsiteComponent:{additionalProperties:!1,description:"The WebsiteComponent interface is used to define the properties of a website component. A WebsiteComponent is used to render an iframe with a website inside of it. This can be used to display an external website or an html file that is located in the public folder.",properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"},path:{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"website",type:"string"}},required:["path","response","type"],type:"object"}},fFt={$ref:uFt,$schema:lFt,definitions:cFt},dFt="#/definitions/GlobalConfig",hFt="http://json-schema.org/draft-07/schema#",pFt={GlobalConfig:{additionalProperties:!1,description:"The GlobalConfig is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. See examples for more information",type:"string"},configs:{additionalProperties:{additionalProperties:!1,description:"The key is used to identify the study config file. This key is used in the configList property.",properties:{path:{description:"The path to the study config file. This should be a relative path from the public folder.",type:"string"}},required:["path"],type:"object"},description:"A required property that specifies the options for the configList property.",type:"object"},configsList:{description:"A required property that is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",items:{type:"string"},type:"array"}},required:["$schema","configs","configsList"],type:"object"}},mFt={$ref:dFt,$schema:hFt,definitions:pFt},p3e=new h3e;p3e.addSchema(mFt);const Kpe=p3e.getSchema("#/definitions/GlobalConfig"),m3e=new h3e;m3e.addSchema(fFt);const Xpe=m3e.getSchema("#/definitions/StudyConfig");function gFt(e){const t=[];return[e.configsList.every(r=>e.configs[r]===void 0?(t.push({message:`Config ${r} is not defined in configs object, but is present in configsList`}),!1):!0),t]}function B4(e){return e.baseComponent!==void 0}function yFt(e){const t=GX.parse(e),n=Kpe(t),r=gFt(t);if(n&&r[0])return t;throw console.error("Global config parsing errors",[...Kpe.errors||[],...r[1]]),Error("There was an issue validating your file global.json")}function vFt(e){const t=[];return[Object.values(e.components).every(r=>{var i;return B4(r)?!!((i=e.baseComponents)!=null&&i[r.baseComponent]):!0}),t]}function g3e(e,t){const n=GX.parse(e),r=Xpe(n),i=vFt(n);if(r&&i[0])return n;throw console.error(`${t} parsing errors`,[...Xpe.errors||[],...i[1]]),Error(`There was an issue validating your file ${t}`)}function y3e(){const e=cc(),{setAlertModal:t}=Yp(),n=Kp();A.useEffect(()=>{(new URLSearchParams(window.location.search).get("admin")||"f")==="t"||(window.history.pushState(null,"",window.location.href),window.onpopstate=()=>{window.history.pushState(null,"",window.location.href),n(t({show:!0,message:"Using the browser's back button is prohibited during the study."}))})},[e,t,n])}function _Ft(){const e=B1(),{storageEngine:t}=x0(),{answers:n}=_f(s=>s),[r,i]=A.useState(!1);return A.useEffect(()=>{const s=setInterval(async()=>{await t.verifyCompletion(n)&&(i(!0),clearInterval(s))},1e3)},[]),y3e(),R.jsx(Bg,{style:{height:"100%"},children:R.jsx(op,{direction:"column",children:r?R.jsx(Rt,{size:"xl",display:"block",children:e.uiConfig.studyEndMsg?R.jsx(mu,{text:e.uiConfig.studyEndMsg}):"Thank you for completing the study. You may close this window now."}):R.jsxs(R.Fragment,{children:[R.jsx(Rt,{size:"xl",display:"block",children:"Please wait while your answers are uploaded."}),R.jsx(J2,{h:"lg"}),R.jsx(Bg,{children:R.jsx(T0,{color:"blue"})})]})})})}function bFt(){var d;const e=B1(),t=cc(),n=th()[t],r=e.components[n],i=fY();y3e();const{storageEngine:s}=x0(),o=Kp(),{setAlertModal:a}=Yp();if(A.useEffect(()=>{(s==null?void 0:s.getEngine())!=="firebase"&&o(a({show:!0,message:"There was an issue connecting to the firebase database. This could be caused by a network issue or your adblocker. If you are using an adblocker, please disable it for this website and refresh."}))},[a,s,o]),n==="end")return R.jsx(_Ft,{});const u=B4(r)&&e.baseComponents?cY({},(d=e.baseComponents)==null?void 0:d[r.baseComponent],r):r,l=u.instruction||"",{instructionLocation:c}=u,f=e.uiConfig.sidebar&&(c==="sidebar"||c===void 0);return R.jsxs(R.Fragment,{children:[c==="aboveStimulus"&&R.jsx(mu,{text:l}),R.jsx(mD,{status:i,config:u,location:"aboveStimulus"},`${t}-above-response-block`),R.jsxs(A.Suspense,{fallback:R.jsx("div",{children:"Loading..."}),children:[u.type==="markdown"&&R.jsx(K3t,{currentConfig:u}),u.type==="website"&&R.jsx(m_t,{currentConfig:u}),u.type==="image"&&R.jsx(y_t,{currentConfig:u}),u.type==="react-component"&&R.jsx(Y3t,{currentConfig:u})]},`${t}-stimulus`),(c==="belowStimulus"||c===void 0&&!f)&&R.jsx(mu,{text:l}),R.jsx(mD,{status:i,config:u,location:"belowStimulus"},`${t}-below-response-block`)]})}function wFt(e){const[t]=pG();return R.jsx(UGe,{...e,to:{pathname:e.to,search:t.toString()}})}const $V=["description","instruction","answer","correctAnswer","startTime","endTime","duration","taskOrder"],p$=["participantId","trialId","responseId"];function a2(e,t){const n=`data:text/json;charset=utf-8,${encodeURIComponent(e)}`,r=document.createElement("a");r.setAttribute("href",n),r.setAttribute("download",t),document.body.appendChild(r),r.click(),r.remove()}function EFt(e,t,n){return Object.entries(e.answers).map(([r,i])=>{const s=r.split("_")[0],o=r.split("_")[1],a=t.components[s],u=B4(a)&&a.baseComponent&&t.baseComponents?cY({},t.baseComponents[a.baseComponent],a):a,l=i.endTime-i.startTime;return Object.entries(i.answer).map(([f,d])=>{const h={participantId:e.participantId,trialId:s,responseId:f,startTime:new Date(i.startTime).toUTCString(),endTime:new Date(i.endTime).toUTCString(),duration:l};return n.includes("description")&&(h.description=u.description),n.includes("instruction")&&(h.instruction=u.instruction),n.includes("answer")&&(h.answer=d),n.includes("correctAnswer")&&(h.correctAnswer=u.correctAnswer),n.includes("taskOrder")&&(h.taskOrder=o),h}).flat()}).flat()}async function xFt(e,t,n,r,i=[...p$,...$V]){const o=(r||await t.getAllParticipantsData()).map(c=>EFt(c,n,i)).flat(),a=c=>c.replace(/"/g,'""'),u=o.map(c=>i.map(f=>c===null?"":typeof c[f]=="string"?`"${a(c[f])}"`:JSON.stringify(c[f])).join(",")),l=[i.join(","),...u].join(`
`);a2(l,e)}function v3e({opened:e,close:t,filename:n,studyConfig:r,data:i}){const[s,o]=MXe([...p$,...$V]),a=A.useCallback(c=>{p$.every(f=>c.includes(f))&&o(c)},[o]),u=A.useMemo(()=>[...p$,...$V],[]),{storageEngine:l}=x0();return l?R.jsxs(BC,{opened:e,size:"lg",onClose:t,title:R.jsx(Rt,{size:"xl",children:"Download Tidy CSV"}),centered:!0,radius:"md",padding:"xl",children:[R.jsx(At,{children:R.jsx(uAe,{searchable:!0,limit:30,nothingFound:"Property not found",data:u,value:s,onChange:a,label:R.jsx(Rt,{fw:"bold",size:"lg",children:"Select properties to include in tidy csv:"}),placeholder:"Select atleast one property"})}),R.jsxs(op,{mt:"xl",direction:{base:"column",sm:"row"},gap:{base:"sm",sm:"lg"},justify:{sm:"space-around"},children:[R.jsx(cu,{leftIcon:R.jsx(qX,{}),onClick:()=>xFt(n,l,r,i,s),children:"Download"}),R.jsx(cu,{onClick:t,color:"red",children:"Close"})]})]}):null}function SFt({studyConfig:e}){const{storageEngine:t}=x0(),[n,{open:r,close:i}]=LT(!1),[s,o]=A.useState(),[a,u]=A.useState(""),l=e.studyMetadata.title.replace(" ","_");A.useEffect(()=>{async function m(){if(t){const g=await t.getCurrentParticipantId(),y=await t.getParticipantData();u(g),o(y)}}m()},[t]);const c=A.useCallback(async()=>{a2(JSON.stringify(s,null,2),`${l}_${a}.json`)},[s]),f=e.uiConfig.autoDownloadStudy||!1,d=f&&e.uiConfig.autoDownloadTime||-1,[h,p]=A.useState(Math.floor(d/1e3));return A.useEffect(()=>{const m=setInterval(()=>{p(g=>g-1)},1e3);return h<=0?(c(),clearInterval(m),()=>clearInterval(m)):()=>clearInterval(m)},[h]),R.jsxs(Km,{children:[R.jsx(cu,{leftIcon:R.jsx(j3t,{}),onClick:()=>a2(JSON.stringify(s,null,2),`${l}_${a}.json`),display:"block",children:"Download Current (JSON)"}),R.jsx(cu,{disabled:!(t!=null&&t.isConnected()),leftIcon:R.jsx(ODe,{}),onClick:async()=>{if(!t)return;const m=await t.getAllParticipantsData();a2(JSON.stringify(m,null,2),`${l}_all.json`)},display:"block",children:"Download All (JSON)"}),R.jsx(cu,{disabled:!(t!=null&&t.isConnected()),leftIcon:R.jsx(qX,{}),onClick:r,display:"block",children:"Download All (Tidy)"}),f&&R.jsxs(Rt,{size:"lg",children:["Study results will be downloaded in"," ",h," ","seconds. If the download does not start automatically, click above to download."]}),R.jsx(v3e,{opened:n,close:i,filename:`${l}_${a}.csv`,studyConfig:e})]})}function _3e(e,t,n,r){let i=0;for(let s=0;s<e.components.length;s+=1){const o=e.components[s];if(typeof o=="string"){if(r===e.orderPath&&o===t&&s>=n)break;i+=1}else if(i+=_3e(o,t,n,r),r.includes(o.orderPath))break}return i}function b3e(e,t){let n=0;return t.components.forEach(r=>{var i;if(typeof r=="string"&&((i=e.interruptions)!=null&&i.flatMap(s=>s.components).includes(r)))n+=1;else if(typeof r!="string"){const s=e.components.find(o=>typeof o!="string"&&o.orderPath===r.orderPath);n+=b3e(s,r)}}),n}function TFt(e,t){const n=[];return t.forEach(r=>{const i=e.findIndex(s=>typeof s=="string"?s===r:typeof r!="string"&&s.orderPath===r.orderPath);i!==-1&&(n.push(e[i]),e.splice(i,1)),i===-1&&typeof r=="string"&&n.push(r)}),n.push(...e),n}function AFt({step:e,disabled:t,fullSequence:n,startIndex:r,interruption:i,subSequence:s}){const o=y6(),a=vv(),u=cc(),l=B1(),[c,{close:f,open:d}]=LT(!1),h=e in l.components&&l.components[e],p=s&&s.components.slice(r).includes(e)?_3e(n,e,r,s.orderPath):-1,m=u===p;return R.jsxs(Vi,{position:"left",withArrow:!0,arrowSize:10,shadow:"md",opened:c,offset:20,children:[R.jsx(Vi.Target,{children:R.jsx("div",{onMouseEnter:d,onMouseLeave:f,children:R.jsx(BT,{active:m,style:{lineHeight:"32px",height:"32px"},label:R.jsxs("div",{children:[i&&R.jsx(F3t,{size:16,style:{marginRight:4,marginBottom:-2},color:"orange"}),m?R.jsx("strong",{children:e}):e]}),onClick:()=>a(`/${o}/${p}`),disabled:t})})}),h&&(h.description||h.meta)&&yv.createPortal(R.jsx(Vi.Dropdown,{onMouseLeave:f,children:R.jsx(Rt,{size:"sm",children:R.jsxs("div",{children:[h.description&&R.jsxs("div",{children:[R.jsx(Rt,{fw:900,display:"inline-block",mr:2,children:"Description:"}),R.jsx(Rt,{fw:400,component:"span",children:h.description})]}),h.meta&&R.jsxs(Rt,{children:[R.jsx(Rt,{fw:"900",component:"span",children:"Task Meta: "}),R.jsx("pre",{style:{margin:0,padding:0},children:`${JSON.stringify(h.meta,null,2)}`})]})]})})}),document.body)]})}function w3e({configSequence:e,fullSequence:t,participantSequence:n}){let r=u1(e.components);return n&&(r=TFt(u1(e.components),u1(n.components))),R.jsx("div",{children:r.map((i,s)=>{if(typeof i=="string")return R.jsx(AFt,{step:i,disabled:(n==null?void 0:n.components[s])!==i,fullSequence:t,startIndex:s,interruption:e.interruptions&&e.interruptions.findIndex(l=>l.components.includes(i))>-1||!1,subSequence:n},s);const o=n==null?void 0:n.components.find(l=>typeof l!="string"&&l.orderPath===i.orderPath),a=o?Ug(o).length-b3e(i,o):0,u=Ug(i);return R.jsx(BT,{label:R.jsxs("div",{style:{opacity:a>0?1:.5},children:["Group:",R.jsxs(FT,{ml:5,children:[a,"/",u.length]}),i.interruptions&&R.jsx(FT,{ml:5,color:"orange",children:(o==null?void 0:o.components.filter(l=>{var c;return typeof l=="string"&&((c=i.interruptions)==null?void 0:c.flatMap(f=>f.components).includes(l))}).length)||0}),R.jsx(Rt,{c:"dimmed",display:"inline",mr:5,ml:5,children:i.order}),i.order==="random"||i.order==="latinSquare"?R.jsx(M3t,{size:"15",opacity:.5,style:{marginLeft:"5px",verticalAlign:"middle"}}):null]}),defaultOpened:!0,childrenOffset:32,style:{lineHeight:"32px",height:"32px",position:"sticky",backgroundColor:"#fff"},children:R.jsx("div",{style:{borderLeft:"1px solid #e9ecef"},children:R.jsx(w3e,{configSequence:i,participantSequence:o,fullSequence:t})})},s)})})}function E3e(e,t){return typeof e=="string"?e:{...e,orderPath:t,components:e.components.map((n,r)=>E3e(n,`${t}-${r}`))}}function CFt(){const{showAdmin:e,sequence:t}=_f(o=>o),n=cc(),r=th()[n],i=B1(),s=A.useMemo(()=>{let o=u1(i.sequence);return o=E3e(o,"root"),o.components.push("end"),o},[i.sequence]);return e||r==="end"&&i.uiConfig.autoDownloadStudy?R.jsx(IG,{p:"0",width:{base:300},style:{zIndex:0},children:R.jsxs(vSe,{p:"0",children:[r==="end"&&R.jsxs("div",{style:{padding:10,paddingBottom:15,borderBottom:"1px solid #e9ecef"},children:[R.jsx(Rt,{size:"md",p:10,weight:"bold",children:"Download"}),R.jsx(SFt,{studyConfig:i})]}),R.jsx(Rt,{size:"md",p:10,weight:"bold",children:"Study Sequence"}),R.jsx(w3e,{configSequence:s,participantSequence:t,fullSequence:t})]})}):null}function IFt(){const{config:e}=_f(v=>v),t=th(),n=Kp(),{toggleShowHelpText:r,toggleShowAdmin:i}=Yp(),{storageEngine:s}=x0(),o=cc(),a=t.length-1,u=o/a*100,[l,c]=A.useState(!1),f=e==null?void 0:e.uiConfig.logoPath,d=e==null?void 0:e.uiConfig.withProgressBar,[h]=A.useState(new URLSearchParams(window.location.search)),p=h.get("admin")||"f",m=y6(),g=PGe(`/${m}`);function y(){s==null||s.nextParticipant(e).then(()=>{window.location.href=g}).catch(v=>{console.error(v)})}return R.jsx(CG,{height:"70",p:"md",children:R.jsxs(Gu,{mt:-7,align:"center",children:[R.jsx(Gu.Col,{span:4,children:R.jsxs(op,{align:"center",children:[R.jsx(xE,{maw:40,src:`${vf}${f}`,alt:"Study Logo"}),R.jsx(J2,{w:"md"}),R.jsx(Mc,{order:4,children:e==null?void 0:e.studyMetadata.title})]})}),R.jsx(Gu.Col,{span:4,children:d&&R.jsx(kAe,{radius:"md",size:"lg",value:u})}),R.jsx(Gu.Col,{span:4,children:R.jsxs(op,{align:"center",justify:"flex-end",children:[(e==null?void 0:e.uiConfig.helpTextPath)!==void 0&&R.jsx(cu,{variant:"outline",onClick:()=>n(r()),children:"Help"}),R.jsx(J2,{w:"md"}),p==="t"&&R.jsxs($l,{shadow:"md",width:200,zIndex:1,opened:l,onChange:c,children:[R.jsx($l.Target,{children:R.jsx(OR,{size:"lg",children:R.jsx(z3t,{})})}),R.jsxs($l.Dropdown,{children:[R.jsx($l.Item,{icon:R.jsx(xpe,{size:14}),onClick:()=>n(i()),children:"Admin Mode"}),R.jsx($l.Item,{component:"a",href:e!==null?`mailto:${e.uiConfig.contactEmail}`:void 0,icon:R.jsx(V3t,{size:14}),children:"Contact"}),R.jsx($l.Item,{icon:R.jsx(xpe,{size:14}),onClick:()=>y(),children:"Next Participant"})]})]})]})})]})})}function OFt(){var l;const e=(l=B1())==null?void 0:l.uiConfig.sidebar,t=B1(),n=cc(),r=th()[n],i=t.components[r],s=A.useMemo(()=>{var c;return i?B4(i)&&t.baseComponents?cY({},(c=t.baseComponents)==null?void 0:c[i.baseComponent],i):i:null},[i]),o=fY(),a=(s==null?void 0:s.instruction)||"",u=(s==null?void 0:s.instructionLocation)==="sidebar"||(s==null?void 0:s.instructionLocation)===void 0;return e&&s?R.jsxs(o1,{bg:"gray.1",display:"block",width:{base:300},style:{zIndex:0,overflowY:"scroll"},children:[u&&a!==""&&R.jsx(o1.Section,{bg:"gray.3",p:"xl",children:R.jsxs(Rt,{c:"gray.9",children:[R.jsx(Rt,{span:!0,c:"orange.8",fw:700,inherit:!0,children:"Task:"}),R.jsx(mu,{text:a})]})}),R.jsx(o1.Section,{p:"xl",children:R.jsx(mD,{status:o,config:s,location:"sidebar"},`${r}-sidebar-response-block`)})]}):R.jsx(mD,{status:o,config:s,location:"sidebar",style:{display:"hidden"}},`${r}-sidebar-response-block`)}function PFt(){const{showHelpText:e,config:t}=_f(o=>o),n=Kp(),{toggleShowHelpText:r}=Yp(),[i,s]=A.useState("");return A.useEffect(()=>{t&&t.uiConfig.helpTextPath&&fetch(`${vf}${t.uiConfig.helpTextPath}`).then(o=>o.text()).then(o=>s(o))},[t]),R.jsx(BC,{size:"70%",opened:e,withCloseButton:!1,onClose:()=>n(r()),children:R.jsx(mu,{text:i})})}function kFt(){const{alertModal:e}=_f(o=>o),{setAlertModal:t}=Yp(),n=Kp(),[r,i]=A.useState(e.show),s=A.useCallback(()=>n(t({...e,show:!1})),[e,t,n]);return A.useEffect(()=>i(e.show),[e.show]),R.jsx(BC,{opened:r,centered:!0,size:"lg",withCloseButton:!1,styles:{modal:{padding:"0 !important"}},onClose:s,children:R.jsxs(Pxe,{color:"red",radius:"xs",p:"lg",title:"Alert",icon:R.jsx(L3t,{}),onClose:s,styles:{root:{backgroundColor:"unset"}},children:[R.jsx(Rt,{my:"md",children:e.message}),R.jsx(At,{style:{float:"right"},color:"red",children:R.jsx(cu,{onClick:s,color:"red",variant:"filled",children:"Continue Study"})})]})})}function $Ft(){const e=A.useRef([]),n=B1().uiConfig.windowEventDebounceTime??100;return A.useEffect(()=>{const r=Ff(d=>{e.current.push([Date.now(),"focus",d.target instanceof HTMLElement?d.target.tagName:""])},n,{maxWait:n}),i=Ff(d=>{e.current.push([Date.now(),"input",d.data??""])},n,{maxWait:n}),s=Ff(d=>{e.current.push([Date.now(),"keypress",d.key])},n,{maxWait:n}),o=Ff(d=>{e.current.push([Date.now(),"mousedown",[d.clientX,d.clientY]])},n,{maxWait:n}),a=Ff(d=>{e.current.push([Date.now(),"mouseup",[d.clientX,d.clientY]])},n,{maxWait:n}),u=Ff(()=>{e.current.push([Date.now(),"resize",[window.innerWidth,window.innerHeight]])},n,{maxWait:n}),l=Ff(d=>{e.current.push([Date.now(),"mousemove",[d.clientX,d.clientY]])},n,{maxWait:n}),c=Ff(()=>{e.current.push([Date.now(),"scroll",[window.scrollX,window.scrollY]])},n,{maxWait:n}),f=Ff(()=>{e.current.push([Date.now(),"visibility",document.visibilityState])},n,{maxWait:n});return window.addEventListener("focus",r,!0),window.addEventListener("input",i),window.addEventListener("keypress",s),window.addEventListener("mousedown",o),window.addEventListener("mouseup",a),window.addEventListener("resize",u),window.addEventListener("mousemove",l),window.addEventListener("scroll",c),document.addEventListener("visibilitychange",f),()=>{window.removeEventListener("focus",r,!0),window.removeEventListener("input",i),window.removeEventListener("keypress",s),window.addEventListener("mousedown",o),window.addEventListener("mouseup",a),window.removeEventListener("resize",u),window.removeEventListener("mousemove",l),window.removeEventListener("scroll",c),document.removeEventListener("visibilitychange",f)}},[]),R.jsx(NCe.Provider,{value:e,children:R.jsxs(OG,{navbar:R.jsx(OFt,{}),aside:R.jsx(CFt,{}),header:R.jsx(IFt,{}),children:[R.jsx(PFt,{}),R.jsx(kFt,{}),R.jsx(VGe,{})]})})}function RFt(e,t=!1){return typeof e=="number"?Qpe(e,t):Qpe(e.length,t).map(r=>r.map(i=>e[i]))}function Qpe(e,t){if(e<0)throw new Error("Latin square size must be > 0");if(e==0)return[];if(e==1)return[[0]];let n=new Array(e);for(let s=0;s<e;s++)s<2?n[s]=s:s%2==0?n[s]=e-s/2:n[s]=Math.floor(s/2)+1;let r=[n],i=n;for(let s=1;s<e;s+=1){let o=i.map(a=>(a+1)%e);r.push(o),i=o}if(t&&e%2>0)for(let s=0;s<e;s+=1)r.push(r[s].slice().reverse());return r}function x3e(e,t,n){for(let i=0;i<e.components.length;i++){const s=e.components[i];typeof s!="string"&&(e.components[i]=x3e(s,t,`${n}-${i}`))}if(e.order==="random"){const i=e.components.sort(()=>.5-Math.random());e.components=i}else e.order==="latinSquare"&&t&&(e.components=t[n].pop().map(i=>i.startsWith("_orderObj")?e.components[+i.slice(9)]:i));let r=e.components.slice(0,e.numSamples!==void 0?e.numSamples:void 0).flat();return e.interruptions&&e.interruptions.forEach(i=>{const s=[];if(i.spacing!=="random")for(let o=0;o<r.length;o+=1)(o===i.firstLocation||o>i.firstLocation&&o%i.spacing===0)&&s.push(i.components),s.push(r[o]);if(i.spacing==="random"){const o=new Set;if(i.numInterruptions>r.length-1)throw new Error("Number of interruptions cannot be greater than the number of components");for(;o.size<i.numInterruptions;){const l=Math.floor(Math.random()*r.length-1)+1;o.add(l)}const a=Array.from(o).sort((l,c)=>l-c);let u=0;for(let l=0;l<r.length;l+=1)l===a[u]&&(s.push(i.components),u+=1),s.push(r[l])}r=s}),{orderPath:n,components:r.flat()}}function NFt(e,t){const n=u1(e);return x3e(n,t,"root")}function S3e(e,t,n,r=0){const i=n.length>0?`${n}-${r}`:"root";e.order==="latinSquare"&&t.push(i),e.components.forEach((s,o)=>{typeof s!="string"&&S3e(s,t,i,o)})}function DFt(e){const t=[];return S3e(e,t,"",0),t}function Jpe(e,t){const n=t.split("-");let r={};n.forEach(o=>{o==="root"?r=e.sequence:r=r.components[+o]});const i=r.components.map((o,a)=>typeof o=="string"?o:`_orderObj${a}`);return RFt(i.sort(()=>.5-Math.random()),!0)}function LFt(e){const n=DFt(e.sequence).map(s=>({[s]:Jpe(e,s)})).reduce((s,o)=>({...s,...o}),{}),r=e.uiConfig.numSequences||1e3,i=[];return Array.from({length:r}).forEach(()=>{const s=NFt(e.sequence,n);s.components.push("end"),i.push(s),Object.entries(n).forEach(([o,a])=>{a.length===0&&(n[o]=Jpe(e,o))})}),i}async function MFt(e,t){const n=await(await fetch(`${vf}${e}`)).text();return g3e(n,t)}async function T3e(e,t){const n=t.configsList.find(r=>ZG(r)===e);if(n){const r=t.configs[n];return await MFt(`${r.path}`,n)}return null}function FFt({globalConfig:e}){const t=y6();if(!t||!e.configsList.find(f=>ZG(f)))throw new Error("Study id invalid");const[n,r]=A.useState(null);A.useEffect(()=>{T3e(t,e).then(f=>{r(f)})},[e,t]);const[i,s]=A.useState([]),[o,a]=A.useState(null),{storageEngine:u}=x0(),[l]=pG();A.useEffect(()=>{async function f(){if(!u||!n||!t)return;await u.initializeStudyDb(t,n),await u.getSequenceArray()||await u.setSequenceArray(await LFt(n));const h=n.uiConfig.urlParticipantIdParam&&l.get(n.uiConfig.urlParticipantIdParam)||void 0,p=Object.fromEntries(l.entries()),m=await u.initializeParticipantSession(p,n,h),g=await Gdt(t,n,m.sequence,m.answers);a(g),s([{element:R.jsx($Ft,{}),children:[{path:"/",element:R.jsx(wFt,{to:"0",replace:!0})},{path:"/:index",element:R.jsx(bFt,{})}]}])}f()},[u,n,t,l]);const c=dEe(i);return!c||!o?R.jsx(At,{style:{height:"100vh"},children:R.jsx(Bg,{style:{height:"100%"},children:R.jsx(T0,{style:{height:"100%"},size:60})})}):R.jsx(RCe.Provider,{value:o,children:R.jsx(Vft,{store:o.store,children:c})})}function BFt(){return R.jsx(CG,{height:"70",p:"md",children:R.jsx(Gu,{mt:-7,align:"center",children:R.jsx(Gu.Col,{span:4,children:R.jsxs(op,{align:"center",children:[R.jsx(xE,{maw:40,src:`${vf}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),R.jsx(J2,{w:"md"}),R.jsx(Mc,{order:4,children:"ReVISit Analytics Platform"})]})})})})}function jFt(){const e=vv(),{page:t}=LM();return R.jsx(o1,{width:{base:300},style:{zIndex:0},children:R.jsxs(o1.Section,{p:"xl",children:[R.jsx(BT,{active:t==="dashboard",onClick:()=>e("/analysis/dashboard"),label:R.jsx(Rt,{fz:"lg",children:"Dashboard"}),icon:R.jsx(U3t,{color:"#4287f5"}),rightSection:R.jsx(UB,{size:"0.8rem",stroke:1.5})}),R.jsx(BT,{active:t==="browser",onClick:()=>e("/analysis/browser"),label:R.jsx(Rt,{fz:"lg",children:"Browser"}),icon:R.jsx(B3t,{color:"#4287f5"}),rightSection:R.jsx(UB,{size:"0.8rem",stroke:1.5})}),R.jsx(BT,{active:t==="about",onClick:()=>e("/analysis/about"),label:R.jsx(Rt,{fz:"lg",children:"About"}),icon:R.jsx(H3t,{color:"#4287f5"}),rightSection:R.jsx(UB,{size:"0.8rem",stroke:1.5})})]})})}function zFt(e,t="monday"){const n=new Date(e),r=n.getDay(),i=t==="sunday",s=7-(i?r+1:r);return(i&&r!==6||r!==0)&&n.setDate(n.getDate()+s),n}function A3e(e,t="monday"){const n=new Date(e),r=n.getDay()||7,i=t==="sunday",s=i?r:r-1;return(i&&r!==0||r!==1)&&n.setHours(-24*s),n}function UFt(e,t="monday"){const n=e.getMonth(),r=new Date(e.getFullYear(),n,1),i=new Date(e.getFullYear(),e.getMonth()+1,0),s=zFt(i,t),o=A3e(r,t),a=[];for(;o<=s;){const u=[];for(let l=0;l<7;l+=1)u.push(new Date(o)),o.setDate(o.getDate()+1);a.push(u)}return a}var C3e={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(nu,function(){var n=1e3,r=6e4,i=36e5,s="millisecond",o="second",a="minute",u="hour",l="day",c="week",f="month",d="quarter",h="year",p="date",m="Invalid Date",g=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function($){var D=["th","st","nd","rd"],B=$%100;return"["+$+(D[(B-20)%10]||D[B]||D[0])+"]"}},_=function($,D,B){var V=String($);return!V||V.length>=D?$:""+Array(D+1-V.length).join(B)+$},b={s:_,z:function($){var D=-$.utcOffset(),B=Math.abs(D),V=Math.floor(B/60),j=B%60;return(D<=0?"+":"-")+_(V,2,"0")+":"+_(j,2,"0")},m:function $(D,B){if(D.date()<B.date())return-$(B,D);var V=12*(B.year()-D.year())+(B.month()-D.month()),j=D.clone().add(V,f),G=B-j<0,U=D.clone().add(V+(G?-1:1),f);return+(-(V+(B-j)/(G?j-U:U-j))||0)},a:function($){return $<0?Math.ceil($)||0:Math.floor($)},p:function($){return{M:f,y:h,w:c,d:l,D:p,h:u,m:a,s:o,ms:s,Q:d}[$]||String($||"").toLowerCase().replace(/s$/,"")},u:function($){return $===void 0}},E="en",w={};w[E]=v;var x="$isDayjsObject",S=function($){return $ instanceof z||!(!$||!$[x])},I=function $(D,B,V){var j;if(!D)return E;if(typeof D=="string"){var G=D.toLowerCase();w[G]&&(j=G),B&&(w[G]=B,j=G);var U=D.split("-");if(!j&&U.length>1)return $(U[0])}else{var P=D.name;w[P]=D,j=P}return!V&&j&&(E=j),j||!V&&E},C=function($,D){if(S($))return $.clone();var B=typeof D=="object"?D:{};return B.date=$,B.args=arguments,new z(B)},O=b;O.l=I,O.i=S,O.w=function($,D){return C($,{locale:D.$L,utc:D.$u,x:D.$x,$offset:D.$offset})};var z=function(){function $(B){this.$L=I(B.locale,null,!0),this.parse(B),this.$x=this.$x||B.x||{},this[x]=!0}var D=$.prototype;return D.parse=function(B){this.$d=function(V){var j=V.date,G=V.utc;if(j===null)return new Date(NaN);if(O.u(j))return new Date;if(j instanceof Date)return new Date(j);if(typeof j=="string"&&!/Z$/i.test(j)){var U=j.match(g);if(U){var P=U[2]-1||0,k=(U[7]||"0").substring(0,3);return G?new Date(Date.UTC(U[1],P,U[3]||1,U[4]||0,U[5]||0,U[6]||0,k)):new Date(U[1],P,U[3]||1,U[4]||0,U[5]||0,U[6]||0,k)}}return new Date(j)}(B),this.init()},D.init=function(){var B=this.$d;this.$y=B.getFullYear(),this.$M=B.getMonth(),this.$D=B.getDate(),this.$W=B.getDay(),this.$H=B.getHours(),this.$m=B.getMinutes(),this.$s=B.getSeconds(),this.$ms=B.getMilliseconds()},D.$utils=function(){return O},D.isValid=function(){return this.$d.toString()!==m},D.isSame=function(B,V){var j=C(B);return this.startOf(V)<=j&&j<=this.endOf(V)},D.isAfter=function(B,V){return C(B)<this.startOf(V)},D.isBefore=function(B,V){return this.endOf(V)<C(B)},D.$g=function(B,V,j){return O.u(B)?this[V]:this.set(j,B)},D.unix=function(){return Math.floor(this.valueOf()/1e3)},D.valueOf=function(){return this.$d.getTime()},D.startOf=function(B,V){var j=this,G=!!O.u(V)||V,U=O.p(B),P=function(ce,le){var ge=O.w(j.$u?Date.UTC(j.$y,le,ce):new Date(j.$y,le,ce),j);return G?ge:ge.endOf(l)},k=function(ce,le){return O.w(j.toDate()[ce].apply(j.toDate("s"),(G?[0,0,0,0]:[23,59,59,999]).slice(le)),j)},H=this.$W,M=this.$M,F=this.$D,J="set"+(this.$u?"UTC":"");switch(U){case h:return G?P(1,0):P(31,11);case f:return G?P(1,M):P(0,M+1);case c:var se=this.$locale().weekStart||0,ae=(H<se?H+7:H)-se;return P(G?F-ae:F+(6-ae),M);case l:case p:return k(J+"Hours",0);case u:return k(J+"Minutes",1);case a:return k(J+"Seconds",2);case o:return k(J+"Milliseconds",3);default:return this.clone()}},D.endOf=function(B){return this.startOf(B,!1)},D.$set=function(B,V){var j,G=O.p(B),U="set"+(this.$u?"UTC":""),P=(j={},j[l]=U+"Date",j[p]=U+"Date",j[f]=U+"Month",j[h]=U+"FullYear",j[u]=U+"Hours",j[a]=U+"Minutes",j[o]=U+"Seconds",j[s]=U+"Milliseconds",j)[G],k=G===l?this.$D+(V-this.$W):V;if(G===f||G===h){var H=this.clone().set(p,1);H.$d[P](k),H.init(),this.$d=H.set(p,Math.min(this.$D,H.daysInMonth())).$d}else P&&this.$d[P](k);return this.init(),this},D.set=function(B,V){return this.clone().$set(B,V)},D.get=function(B){return this[O.p(B)]()},D.add=function(B,V){var j,G=this;B=Number(B);var U=O.p(V),P=function(M){var F=C(G);return O.w(F.date(F.date()+Math.round(M*B)),G)};if(U===f)return this.set(f,this.$M+B);if(U===h)return this.set(h,this.$y+B);if(U===l)return P(1);if(U===c)return P(7);var k=(j={},j[a]=r,j[u]=i,j[o]=n,j)[U]||1,H=this.$d.getTime()+B*k;return O.w(H,this)},D.subtract=function(B,V){return this.add(-1*B,V)},D.format=function(B){var V=this,j=this.$locale();if(!this.isValid())return j.invalidDate||m;var G=B||"YYYY-MM-DDTHH:mm:ssZ",U=O.z(this),P=this.$H,k=this.$m,H=this.$M,M=j.weekdays,F=j.months,J=j.meridiem,se=function(le,ge,ue,Fe){return le&&(le[ge]||le(V,G))||ue[ge].slice(0,Fe)},ae=function(le){return O.s(P%12||12,le,"0")},ce=J||function(le,ge,ue){var Fe=le<12?"AM":"PM";return ue?Fe.toLowerCase():Fe};return G.replace(y,function(le,ge){return ge||function(ue){switch(ue){case"YY":return String(V.$y).slice(-2);case"YYYY":return O.s(V.$y,4,"0");case"M":return H+1;case"MM":return O.s(H+1,2,"0");case"MMM":return se(j.monthsShort,H,F,3);case"MMMM":return se(F,H);case"D":return V.$D;case"DD":return O.s(V.$D,2,"0");case"d":return String(V.$W);case"dd":return se(j.weekdaysMin,V.$W,M,2);case"ddd":return se(j.weekdaysShort,V.$W,M,3);case"dddd":return M[V.$W];case"H":return String(P);case"HH":return O.s(P,2,"0");case"h":return ae(1);case"hh":return ae(2);case"a":return ce(P,k,!0);case"A":return ce(P,k,!1);case"m":return String(k);case"mm":return O.s(k,2,"0");case"s":return String(V.$s);case"ss":return O.s(V.$s,2,"0");case"SSS":return O.s(V.$ms,3,"0");case"Z":return U}return null}(le)||U.replace(":","")})},D.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},D.diff=function(B,V,j){var G,U=this,P=O.p(V),k=C(B),H=(k.utcOffset()-this.utcOffset())*r,M=this-k,F=function(){return O.m(U,k)};switch(P){case h:G=F()/12;break;case f:G=F();break;case d:G=F()/3;break;case c:G=(M-H)/6048e5;break;case l:G=(M-H)/864e5;break;case u:G=M/i;break;case a:G=M/r;break;case o:G=M/n;break;default:G=M}return j?G:O.a(G)},D.daysInMonth=function(){return this.endOf(f).$D},D.$locale=function(){return w[this.$L]},D.locale=function(B,V){if(!B)return this.$L;var j=this.clone(),G=I(B,V,!0);return G&&(j.$L=G),j},D.clone=function(){return O.w(this.$d,this)},D.toDate=function(){return new Date(this.valueOf())},D.toJSON=function(){return this.isValid()?this.toISOString():null},D.toISOString=function(){return this.$d.toISOString()},D.toString=function(){return this.$d.toUTCString()},$}(),N=z.prototype;return C.prototype=N,[["$ms",s],["$s",o],["$m",a],["$H",u],["$W",l],["$M",f],["$y",h],["$D",p]].forEach(function($){N[$[1]]=function(D){return this.$g(D,$[0],$[1])}}),C.extend=function($,D){return $.$i||($(D,z,C),$.$i=!0),C},C.locale=I,C.isDayjs=S,C.unix=function($){return C(1e3*$)},C.en=w[E],C.Ls=w,C.p={},C})})(C3e);var VFt=C3e.exports;const xn=pl(VFt);function HFt(e,t="MMM"){const n=[],r=new Date(2021,0,1);for(let i=0;i<12;i+=1)n.push(xn(r).locale(e).format(t)),r.setMonth(r.getMonth()+1);return n}function qFt(e,t="monday",n="dd"){const r=[],i=A3e(new Date,t);for(let s=0;s<7;s+=1)r.push(xn(i).locale(e).format(n)),i.setDate(i.getDate()+1);return r}function I3e(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()}function Np(e,t){return I3e(e,t)&&e.getDate()===t.getDate()}function WFt(e){const t=e-e%10-1,n=[];for(let r=0;r<12;r+=1){const i=t+r;n.push(i)}return n}var GFt=Object.defineProperty,YFt=Object.defineProperties,KFt=Object.getOwnPropertyDescriptors,y3=Object.getOwnPropertySymbols,O3e=Object.prototype.hasOwnProperty,P3e=Object.prototype.propertyIsEnumerable,Zpe=(e,t,n)=>t in e?GFt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,eme=(e,t)=>{for(var n in t||(t={}))O3e.call(t,n)&&Zpe(e,n,t[n]);if(y3)for(var n of y3(t))P3e.call(t,n)&&Zpe(e,n,t[n]);return e},XFt=(e,t)=>YFt(e,KFt(t)),QFt=(e,t)=>{var n={};for(var r in e)O3e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&y3)for(var r of y3(e))t.indexOf(r)<0&&P3e.call(e,r)&&(n[r]=e[r]);return n};function RV(e){var t=e,{direction:n,style:r}=t,i=QFt(t,["direction","style"]);const s=as();return L.createElement("svg",eme({viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:XFt(eme({},r),{transform:n==="right"&&s.dir==="ltr"||n==="left"&&s.dir==="rtl"?"rotate(180deg)":"none"})},i),L.createElement("path",{d:"M8.84182 3.13514C9.04327 3.32401 9.05348 3.64042 8.86462 3.84188L5.43521 7.49991L8.86462 11.1579C9.05348 11.3594 9.04327 11.6758 8.84182 11.8647C8.64036 12.0535 8.32394 12.0433 8.13508 11.8419L4.38508 7.84188C4.20477 7.64955 4.20477 7.35027 4.38508 7.15794L8.13508 3.15794C8.32394 2.95648 8.64036 2.94628 8.84182 3.13514Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}RV.displayName="@mantine/dates/ArrowIcon";var JFt=Object.defineProperty,ZFt=Object.defineProperties,e5t=Object.getOwnPropertyDescriptors,tme=Object.getOwnPropertySymbols,t5t=Object.prototype.hasOwnProperty,n5t=Object.prototype.propertyIsEnumerable,nme=(e,t,n)=>t in e?JFt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,r5t=(e,t)=>{for(var n in t||(t={}))t5t.call(t,n)&&nme(e,n,t[n]);if(tme)for(var n of tme(t))n5t.call(t,n)&&nme(e,n,t[n]);return e},i5t=(e,t)=>ZFt(e,e5t(t));const YB={xs:32,sm:40,md:44,lg:50,xl:54};var s5t=ht((e,{size:t})=>({calendarHeader:{display:"flex",justifyContent:"space-between",align:"center",marginBottom:e.fn.size({size:t,sizes:e.spacing})},calendarHeaderControl:{width:e.fn.size({size:t,sizes:YB}),height:e.fn.size({size:t,sizes:YB}),"&:disabled":{opacity:0,cursor:"default"}},calendarHeaderLevel:i5t(r5t({display:"flex",alignItems:"center",justifyContent:"center",height:e.fn.size({size:t,sizes:YB}),fontSize:e.fn.size({size:t,sizes:e.fontSizes}),padding:`0 ${e.fn.size({size:t,sizes:e.spacing})}px`,borderRadius:e.radius.sm,fontWeight:500,flex:1,textAlign:"center",color:e.colorScheme==="dark"?e.colors.dark[0]:e.black},e.fn.hover({backgroundColor:e.colorScheme==="dark"?e.colors.dark[8]:e.colors.gray[0]})),{"&:disabled":e.fn.hover({backgroundColor:"transparent",cursor:"default"})}),calendarHeaderLevelIcon:{marginLeft:4}})),o5t=Object.defineProperty,v3=Object.getOwnPropertySymbols,k3e=Object.prototype.hasOwnProperty,$3e=Object.prototype.propertyIsEnumerable,rme=(e,t,n)=>t in e?o5t(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,a5t=(e,t)=>{for(var n in t||(t={}))k3e.call(t,n)&&rme(e,n,t[n]);if(v3)for(var n of v3(t))$3e.call(t,n)&&rme(e,n,t[n]);return e},u5t=(e,t)=>{var n={};for(var r in e)k3e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&v3)for(var r of v3(e))t.indexOf(r)<0&&$3e.call(e,r)&&(n[r]=e[r]);return n};const l5t={xs:12,sm:14,md:18,lg:22,xl:28};function j4(e){var t=e,{hasNext:n,hasPrevious:r,onNext:i,onPrevious:s,onNextLevel:o,className:a,label:u,nextLevelDisabled:l,size:c,classNames:f,styles:d,__staticSelector:h="CalendarHeader",nextLabel:p,previousLabel:m,preventLevelFocus:g=!1,preventFocus:y,unstyled:v,__stopPropagation:_}=t,b=u5t(t,["hasNext","hasPrevious","onNext","onPrevious","onNextLevel","className","label","nextLevelDisabled","size","classNames","styles","__staticSelector","nextLabel","previousLabel","preventLevelFocus","preventFocus","unstyled","__stopPropagation"]);const{classes:E,cx:w,theme:x}=s5t({size:c},{classNames:f,styles:d,unstyled:v,name:h}),S=x.fn.size({size:c,sizes:l5t});return L.createElement("div",a5t({className:w(E.calendarHeader,a)},b),L.createElement(OR,{className:E.calendarHeaderControl,disabled:!r,onClick:s,"aria-label":m,onMouseDown:I=>y&&I.preventDefault(),unstyled:v,"data-mantine-stop-propagation":_||void 0},L.createElement(RV,{direction:"left",width:S,height:S})),L.createElement(_v,{unstyled:v,className:E.calendarHeaderLevel,disabled:l,onClick:o,tabIndex:g?-1:0,onMouseDown:I=>y&&I.preventDefault(),"data-mantine-stop-propagation":_||void 0},u,!l&&L.createElement(tAe,{error:!1,size:c,className:E.calendarHeaderLevelIcon})),L.createElement(OR,{className:E.calendarHeaderControl,disabled:!n,onClick:i,"aria-label":p,unstyled:v,onMouseDown:I=>y&&I.preventDefault(),"data-mantine-stop-propagation":_||void 0},L.createElement(RV,{direction:"right",width:S,height:S})))}j4.displayName="@mantine/dates/CalendarHeader";function m$(e,t){return xn(new Date(e,1,1)).format(t)}var c5t=Object.defineProperty,f5t=Object.defineProperties,d5t=Object.getOwnPropertyDescriptors,ime=Object.getOwnPropertySymbols,h5t=Object.prototype.hasOwnProperty,p5t=Object.prototype.propertyIsEnumerable,sme=(e,t,n)=>t in e?c5t(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,KB=(e,t)=>{for(var n in t||(t={}))h5t.call(t,n)&&sme(e,n,t[n]);if(ime)for(var n of ime(t))p5t.call(t,n)&&sme(e,n,t[n]);return e},m5t=(e,t)=>f5t(e,d5t(t));const g5t={xs:32,sm:40,md:46,lg:52,xl:56};var y5t=ht((e,{size:t})=>{const n=e.fn.variant({color:e.primaryColor,variant:"filled"});return{yearPicker:{width:"100%"},yearPickerControls:{display:"flex",flexWrap:"wrap",justifyContent:"center"},yearPickerControl:m5t(KB({flex:"0 0 25%",color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,height:e.fn.size({size:t,sizes:g5t}),textAlign:"center",borderRadius:e.radius.sm,fontSize:e.fn.size({size:t,sizes:e.fontSizes})},e.fn.hover({backgroundColor:e.colorScheme==="dark"?e.colors.dark[8]:e.colors.gray[0]})),{"&:disabled":KB({color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[4],cursor:"not-allowed"},e.fn.hover({backgroundColor:"transparent"}))}),yearPickerControlActive:KB({backgroundColor:n.background,color:n.color},e.fn.hover({backgroundColor:n.hover}))}}),v5t=Object.defineProperty,_3=Object.getOwnPropertySymbols,R3e=Object.prototype.hasOwnProperty,N3e=Object.prototype.propertyIsEnumerable,ome=(e,t,n)=>t in e?v5t(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,_5t=(e,t)=>{for(var n in t||(t={}))R3e.call(t,n)&&ome(e,n,t[n]);if(_3)for(var n of _3(t))N3e.call(t,n)&&ome(e,n,t[n]);return e},b5t=(e,t)=>{var n={};for(var r in e)R3e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&_3)for(var r of _3(e))t.indexOf(r)<0&&N3e.call(e,r)&&(n[r]=e[r]);return n};function D3e(e){var t=e,{className:n,styles:r,classNames:i,value:s,onChange:o,size:a,minYear:u,maxYear:l,__staticSelector:c="YearPicker",nextDecadeLabel:f,previousDecadeLabel:d,preventFocus:h,unstyled:p,yearLabelFormat:m="YYYY",__stopPropagation:g}=t,y=b5t(t,["className","styles","classNames","value","onChange","size","minYear","maxYear","__staticSelector","nextDecadeLabel","previousDecadeLabel","preventFocus","unstyled","yearLabelFormat","__stopPropagation"]);const{classes:v,cx:_}=y5t({size:a},{classNames:i,styles:r,unstyled:p,name:c}),[b,E]=A.useState(s),w=WFt(b),x=w.map(S=>L.createElement(_v,{key:S,unstyled:p,onClick:()=>o(S),disabled:S<u||S>l,onMouseDown:I=>h&&I.preventDefault(),"data-mantine-stop-propagation":g||void 0,className:_(v.yearPickerControl,{[v.yearPickerControlActive]:S===s})},m$(S,m)));return L.createElement("div",_5t({className:_(v.yearPicker,n)},y),L.createElement(j4,{unstyled:p,label:`${m$(w[0],m)}  ${m$(w[w.length-1],m)}`,hasPrevious:typeof u=="number"?u<w[0]:!0,hasNext:typeof l=="number"?l>w[w.length-1]:!0,onNext:()=>E(S=>S+10),onPrevious:()=>E(S=>S-10),nextLevelDisabled:!0,size:a,nextLabel:f,previousLabel:d,styles:r,classNames:i,__staticSelector:c,preventFocus:h,__stopPropagation:g}),L.createElement("div",{className:v.yearPickerControls},x))}D3e.displayName="@mantine/dates/YearPicker";function NV({date:e,minDate:t,maxDate:n}){const r=t instanceof Date,i=n instanceof Date;if(!i&&!r)return!0;const s=xn(e).endOf("month"),o=xn(e).startOf("month"),a=i?o.isBefore(n):!0,u=r?s.isAfter(t):!0;return a&&u}var w5t=Object.defineProperty,E5t=Object.defineProperties,x5t=Object.getOwnPropertyDescriptors,ame=Object.getOwnPropertySymbols,S5t=Object.prototype.hasOwnProperty,T5t=Object.prototype.propertyIsEnumerable,ume=(e,t,n)=>t in e?w5t(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,XB=(e,t)=>{for(var n in t||(t={}))S5t.call(t,n)&&ume(e,n,t[n]);if(ame)for(var n of ame(t))T5t.call(t,n)&&ume(e,n,t[n]);return e},A5t=(e,t)=>E5t(e,x5t(t));const C5t={xs:32,sm:40,md:46,lg:52,xl:56};var I5t=ht((e,{size:t})=>{const n=e.fn.variant({color:e.primaryColor,variant:"filled"});return{monthPicker:{width:"100%"},monthPickerControls:{display:"flex",flexWrap:"wrap",justifyContent:"center"},monthPickerControl:A5t(XB({flex:"0 0 33.3333%",color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,height:e.fn.size({size:t,sizes:C5t}),textAlign:"center",borderRadius:e.radius.sm,fontSize:e.fn.size({size:t,sizes:e.fontSizes})},e.fn.hover({backgroundColor:e.colorScheme==="dark"?e.colors.dark[8]:e.colors.gray[0]})),{"&:disabled":XB({color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[4],cursor:"not-allowed"},e.fn.hover({backgroundColor:"transparent"}))}),monthPickerControlActive:XB({backgroundColor:n.background,color:n.color},e.fn.hover({backgroundColor:n.hover}))}}),O5t=Object.defineProperty,b3=Object.getOwnPropertySymbols,L3e=Object.prototype.hasOwnProperty,M3e=Object.prototype.propertyIsEnumerable,lme=(e,t,n)=>t in e?O5t(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,P5t=(e,t)=>{for(var n in t||(t={}))L3e.call(t,n)&&lme(e,n,t[n]);if(b3)for(var n of b3(t))M3e.call(t,n)&&lme(e,n,t[n]);return e},k5t=(e,t)=>{var n={};for(var r in e)L3e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&b3)for(var r of b3(e))t.indexOf(r)<0&&M3e.call(e,r)&&(n[r]=e[r]);return n};function F3e(e){var t=e,{className:n,styles:r,classNames:i,value:s,onChange:o,locale:a,year:u,onYearChange:l,onNextLevel:c,size:f,minDate:d,maxDate:h,__staticSelector:p="MonthPicker",nextYearLabel:m,previousYearLabel:g,preventFocus:y,unstyled:v,yearLabelFormat:_="YYYY",__stopPropagation:b}=t,E=k5t(t,["className","styles","classNames","value","onChange","locale","year","onYearChange","onNextLevel","size","minDate","maxDate","__staticSelector","nextYearLabel","previousYearLabel","preventFocus","unstyled","yearLabelFormat","__stopPropagation"]);const{classes:w,cx:x}=I5t({size:f},{classNames:i,styles:r,unstyled:v,name:p}),S=HFt(a),I=d instanceof Date?d.getFullYear():void 0,C=h instanceof Date?h.getFullYear():void 0,O=S.map((z,N)=>L.createElement(_v,{key:z,unstyled:v,onClick:()=>o(N),className:x(w.monthPickerControl,{[w.monthPickerControlActive]:N===s.month&&u===s.year}),disabled:!NV({date:new Date(u,N),minDate:d,maxDate:h}),onMouseDown:$=>y&&$.preventDefault(),"data-mantine-stop-propagation":b||void 0},z));return L.createElement("div",P5t({className:x(w.monthPicker,n)},E),L.createElement(j4,{label:m$(u,_),hasNext:typeof C=="number"?u<C:!0,hasPrevious:typeof I=="number"?u>I:!0,onNext:()=>l(u+1),onPrevious:()=>l(u-1),onNextLevel:c,size:f,classNames:i,styles:r,__staticSelector:p,nextLabel:m,previousLabel:g,preventFocus:y,unstyled:v,__stopPropagation:b}),L.createElement("div",{className:w.monthPickerControls},O))}F3e.displayName="@mantine/dates/MonthPicker";function $5t({month:e,locale:t,format:n}){return Ym(xn(e).locale(t).format(n))}function R5t({focusable:e,hasValue:t,selected:n,firstInMonth:r}){return e?t?n?0:-1:r?0:-1:-1}function N5t({hasValue:e,selected:t,firstInMonth:n}){return e?t?!0:void 0:n?!0:void 0}var D5t=Object.defineProperty,L5t=Object.defineProperties,M5t=Object.getOwnPropertyDescriptors,cme=Object.getOwnPropertySymbols,F5t=Object.prototype.hasOwnProperty,B5t=Object.prototype.propertyIsEnumerable,fme=(e,t,n)=>t in e?D5t(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,QB=(e,t)=>{for(var n in t||(t={}))F5t.call(t,n)&&fme(e,n,t[n]);if(cme)for(var n of cme(t))B5t.call(t,n)&&fme(e,n,t[n]);return e},dme=(e,t)=>L5t(e,M5t(t));const g$={xs:34,sm:38,md:46,lg:58,xl:66};var j5t=ht((e,{size:t,fullWidth:n,hideOutsideDates:r})=>({day:dme(QB(dme(QB(QB({},e.fn.fontStyles()),e.fn.focusStyles()),{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",width:n?"100%":e.fn.size({size:t,sizes:g$}),height:e.fn.size({size:t,sizes:g$}),lineHeight:`${e.fn.size({size:t,sizes:g$})}px`,fontSize:e.fn.size({size:t,sizes:e.fontSizes}),padding:0,borderRadius:e.radius.sm,border:"none",cursor:"pointer",userSelect:"none",color:e.colorScheme==="dark"?e.colors.dark[0]:e.colors.gray[7],"&:disabled":{pointerEvents:"none",color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[4]}}),e.fn.hover({backgroundColor:e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[0]})),{"&[data-weekend]":{color:e.colorScheme==="dark"?e.colors.red[5]:e.colors.red[7]},"&[data-outside]":{display:r?"none":void 0,color:`${e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[4]}`},"&[data-in-range]":{backgroundColor:e.fn.variant({variant:"light"}).background,borderRadius:0},"&[data-selected]":{backgroundColor:e.fn.variant({variant:"filled"}).background,color:e.white},"&[data-first-in-range]":{borderTopLeftRadius:e.radius.sm,borderBottomLeftRadius:e.radius.sm},"&[data-last-in-range]":{borderTopRightRadius:e.radius.sm,borderBottomRightRadius:e.radius.sm}})})),z5t=Object.defineProperty,U5t=Object.defineProperties,V5t=Object.getOwnPropertyDescriptors,w3=Object.getOwnPropertySymbols,B3e=Object.prototype.hasOwnProperty,j3e=Object.prototype.propertyIsEnumerable,hme=(e,t,n)=>t in e?z5t(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,H5t=(e,t)=>{for(var n in t||(t={}))B3e.call(t,n)&&hme(e,n,t[n]);if(w3)for(var n of w3(t))j3e.call(t,n)&&hme(e,n,t[n]);return e},q5t=(e,t)=>U5t(e,V5t(t)),W5t=(e,t)=>{var n={};for(var r in e)B3e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&w3)for(var r of w3(e))t.indexOf(r)<0&&j3e.call(e,r)&&(n[r]=e[r]);return n};const z3e=A.forwardRef((e,t)=>{var n=e,{className:r,value:i,selected:s,weekend:o,outside:a,onMouseEnter:u,classNames:l,styles:c,hasValue:f,firstInRange:d,lastInRange:h,__staticSelector:p="Month",inRange:m,size:g,fullWidth:y,firstInMonth:v,focusable:_,hideOutsideDates:b,renderDay:E,unstyled:w,disabled:x,stopPropagation:S}=n,I=W5t(n,["className","value","selected","weekend","outside","onMouseEnter","classNames","styles","hasValue","firstInRange","lastInRange","__staticSelector","inRange","size","fullWidth","firstInMonth","focusable","hideOutsideDates","renderDay","unstyled","disabled","stopPropagation"]);const{classes:C,cx:O}=j5t({size:g,fullWidth:y,hideOutsideDates:b},{classNames:l,styles:c,unstyled:w,name:p});return L.createElement("button",q5t(H5t({},I),{type:"button",ref:t,disabled:x,onMouseEnter:z=>u(i,z),tabIndex:R5t({focusable:_,hasValue:f,selected:s,firstInMonth:v}),"data-autofocus":N5t({hasValue:f,selected:s,firstInMonth:v}),"data-mantine-stop-propagation":S||void 0,"data-outside":a&&!x||void 0,"data-weekend":o&&!x||void 0,"data-selected":s&&!x||void 0,"data-in-range":m&&!x||void 0,"data-first-in-range":d&&!x||void 0,"data-last-in-range":h&&!x||void 0,className:O(C.day,r)}),typeof E=="function"?E(i):i.getDate())});z3e.displayName="@mantine/core/Day";function G5t(e,t=[0,6]){return t.includes(e.getDay())}function Y5t(e,t){return!I3e(e,t)}function K5t({minDate:e,maxDate:t,excludeDate:n,disableOutsideEvents:r,date:i,outside:s}){const o=t instanceof Date&&xn(t).isBefore(i,"day"),a=e instanceof Date&&xn(e).isAfter(i,"day"),u=typeof n=="function"&&n(i);return o||a||u||!!r&&!!s}function X5t(e,t){const n=Array.isArray(t)&&t.every(a=>a instanceof Date),r=n&&[xn(t[0]).subtract(1,"day"),xn(t[1]).add(1,"day")],i=n&&Np(e,t[0]),s=n&&Np(e,t[1]),o=n&&xn(e).isAfter(r[0],"day")&&xn(e).isBefore(r[1],"day");return{firstInRange:i,lastInRange:s,inRange:o,selectedInRange:i||s}}function pme({date:e,month:t,hasValue:n,minDate:r,maxDate:i,value:s,excludeDate:o,disableOutsideEvents:a,range:u,weekendDays:l}){const c=Y5t(e,t),f=n&&(Array.isArray(s)?s.some(g=>Np(g,e)):Np(e,s)),{inRange:d,lastInRange:h,firstInRange:p,selectedInRange:m}=X5t(e,u);return{disabled:K5t({minDate:r,maxDate:i,excludeDate:o,disableOutsideEvents:a,date:e,outside:c}),weekend:G5t(e,l),selectedInRange:m,selected:f,inRange:d,firstInRange:p,lastInRange:h,outside:c}}var Q5t=Object.defineProperty,J5t=Object.defineProperties,Z5t=Object.getOwnPropertyDescriptors,mme=Object.getOwnPropertySymbols,e8t=Object.prototype.hasOwnProperty,t8t=Object.prototype.propertyIsEnumerable,gme=(e,t,n)=>t in e?Q5t(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,n8t=(e,t)=>{for(var n in t||(t={}))e8t.call(t,n)&&gme(e,n,t[n]);if(mme)for(var n of mme(t))t8t.call(t,n)&&gme(e,n,t[n]);return e},r8t=(e,t)=>J5t(e,Z5t(t)),i8t=ht((e,{fullWidth:t})=>({weekday:{color:e.colorScheme==="dark"?e.colors.dark[1]:e.colors.gray[5]},month:r8t(n8t({},e.fn.fontStyles()),{borderCollapse:"collapse",width:t?"100%":"auto",tableLayout:"fixed"}),cell:{boxSizing:"border-box",padding:0,borderTop:"1px solid transparent"},weekdayCell:{boxSizing:"border-box",padding:0,fontWeight:"normal",paddingBottom:`calc(${e.spacing.xs}px / 2)`,textAlign:"center",cursor:"default",userSelect:"none"}})),s8t=Object.defineProperty,E3=Object.getOwnPropertySymbols,U3e=Object.prototype.hasOwnProperty,V3e=Object.prototype.propertyIsEnumerable,yme=(e,t,n)=>t in e?s8t(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,o8t=(e,t)=>{for(var n in t||(t={}))U3e.call(t,n)&&yme(e,n,t[n]);if(E3)for(var n of E3(t))V3e.call(t,n)&&yme(e,n,t[n]);return e},a8t=(e,t)=>{var n={};for(var r in e)U3e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&E3)for(var r of E3(e))t.indexOf(r)<0&&V3e.call(e,r)&&(n[r]=e[r]);return n};const kP=()=>!1,u8t={disableOutsideEvents:!1,hideWeekdays:!1,__staticSelector:"Month",size:"sm",fullWidth:!1,preventFocus:!1,focusable:!0,firstDayOfWeek:"monday",hideOutsideDates:!1,weekendDays:[0,6],__stopPropagation:!0},H3e=A.forwardRef((e,t)=>{const n=Ct("Month",u8t,e),{className:r,month:i,value:s,onChange:o,disableOutsideEvents:a,locale:u,dayClassName:l,dayStyle:c,classNames:f,styles:d,minDate:h,maxDate:p,excludeDate:m,onDayMouseEnter:g,range:y,hideWeekdays:v,__staticSelector:_,size:b,fullWidth:E,preventFocus:w,focusable:x,firstDayOfWeek:S,onDayKeyDown:I,daysRefs:C,hideOutsideDates:O,isDateInRange:z=kP,isDateFirstInRange:N=kP,isDateLastInRange:$=kP,renderDay:D,weekdayLabelFormat:B,unstyled:V,weekendDays:j,__stopPropagation:G}=n,U=a8t(n,["className","month","value","onChange","disableOutsideEvents","locale","dayClassName","dayStyle","classNames","styles","minDate","maxDate","excludeDate","onDayMouseEnter","range","hideWeekdays","__staticSelector","size","fullWidth","preventFocus","focusable","firstDayOfWeek","onDayKeyDown","daysRefs","hideOutsideDates","isDateInRange","isDateFirstInRange","isDateLastInRange","renderDay","weekdayLabelFormat","unstyled","weekendDays","__stopPropagation"]),{classes:P,cx:k,theme:H}=i8t({fullWidth:E},{classNames:f,styles:d,unstyled:V,name:_}),M=u||H.datesLocale,F=UFt(i,S),J=qFt(M,S,B).map(ge=>L.createElement("th",{className:P.weekdayCell,key:ge},L.createElement(Rt,{size:b,className:P.weekday},ge.length>=2?Ym(ge):ge))),se=Array.isArray(s)?s.every(ge=>ge instanceof Date):s instanceof Date,ae=s instanceof Date&&xn(s).isAfter(xn(i).startOf("month"))&&xn(s).isBefore(xn(i).endOf("month")),ce=A.useMemo(()=>F.flatMap(ge=>ge).find(ge=>{const ue=pme({date:ge,month:i,hasValue:se,minDate:h,maxDate:p,value:s,excludeDate:m,disableOutsideEvents:a,range:y,weekendDays:j});return!ue.disabled&&!ue.outside})||xn(i).startOf("month").toDate(),[]),le=F.map((ge,ue)=>{const Fe=ge.map((ke,Ge)=>{const Re=pme({date:ke,month:i,hasValue:se,minDate:h,maxDate:p,value:s,excludeDate:m,disableOutsideEvents:a,range:y,weekendDays:j}),Oe={rowIndex:ue,cellIndex:Ge,date:ke};return L.createElement("td",{className:P.cell,key:Ge},L.createElement(z3e,{unstyled:V,ref:Le=>{C&&(Array.isArray(C[ue])||(C[ue]=[]),C[ue][Ge]=Le)},onClick:()=>typeof o=="function"&&o(ke),onMouseDown:Le=>w&&Le.preventDefault(),value:ke,outside:Re.outside,weekend:Re.weekend,inRange:Re.inRange||z(ke,Re),firstInRange:Re.firstInRange||N(ke,Re),lastInRange:Re.lastInRange||$(ke,Re),firstInMonth:Np(ke,ce),selected:Re.selected||Re.selectedInRange,hasValue:ae,onKeyDown:Le=>typeof I=="function"&&I(Oe,Le),className:typeof l=="function"?l(ke,Re):null,style:typeof c=="function"?c(ke,Re):null,disabled:Re.disabled,onMouseEnter:typeof g=="function"?g:kP,size:b,fullWidth:E,focusable:x,hideOutsideDates:O,__staticSelector:_,styles:d,classNames:f,renderDay:D,stopPropagation:G}))});return L.createElement("tr",{key:ue},Fe)});return L.createElement(At,o8t({component:"table",className:k(P.month,r),ref:t},U),!v&&L.createElement("thead",null,L.createElement("tr",null,J)),L.createElement("tbody",null,le))});H3e.displayName="@mantine/dates/Month";var l8t=Object.defineProperty,x3=Object.getOwnPropertySymbols,q3e=Object.prototype.hasOwnProperty,W3e=Object.prototype.propertyIsEnumerable,vme=(e,t,n)=>t in e?l8t(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,c8t=(e,t)=>{for(var n in t||(t={}))q3e.call(t,n)&&vme(e,n,t[n]);if(x3)for(var n of x3(t))W3e.call(t,n)&&vme(e,n,t[n]);return e},f8t=(e,t)=>{var n={};for(var r in e)q3e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&x3)for(var r of x3(e))t.indexOf(r)<0&&W3e.call(e,r)&&(n[r]=e[r]);return n};function G3e(e){var t=e,{amountOfMonths:n,paginateBy:r,month:i,locale:s,minDate:o,maxDate:a,allowLevelChange:u,size:l,daysRefs:c,onMonthChange:f,onNextLevel:d,onDayKeyDown:h,classNames:p,styles:m,__staticSelector:g="MonthsList",nextMonthLabel:y,previousMonthLabel:v,labelFormat:_,weekdayLabelFormat:b,preventFocus:E,renderDay:w,unstyled:x,__stopPropagation:S}=t,I=f8t(t,["amountOfMonths","paginateBy","month","locale","minDate","maxDate","allowLevelChange","size","daysRefs","onMonthChange","onNextLevel","onDayKeyDown","classNames","styles","__staticSelector","nextMonthLabel","previousMonthLabel","labelFormat","weekdayLabelFormat","preventFocus","renderDay","unstyled","__stopPropagation"]);const C=xn(i).add(n,"months").toDate(),O=xn(i).subtract(1,"months").toDate(),z=Array(n).fill(0).map((N,$)=>{const D=xn(i).add($,"months").toDate();return L.createElement("div",{key:$},L.createElement(j4,{hasNext:$+1===n&&NV({date:C,minDate:o,maxDate:a}),hasPrevious:$===0&&NV({date:O,minDate:o,maxDate:a}),label:$5t({month:D,locale:s,format:_}),onNext:()=>f(xn(i).add(r,"months").toDate()),onPrevious:()=>f(xn(i).subtract(r,"months").toDate()),onNextLevel:d,nextLevelDisabled:!u,size:l,classNames:p,styles:m,__staticSelector:g,nextLabel:y,previousLabel:v,preventLevelFocus:$>0,preventFocus:E,unstyled:x,__stopPropagation:S}),L.createElement(H3e,c8t({month:D,daysRefs:c.current[$],onDayKeyDown:(...B)=>h($,...B),size:l,minDate:o,maxDate:a,classNames:p,styles:m,__staticSelector:g,locale:s,focusable:$===0,preventFocus:E,renderDay:w,weekdayLabelFormat:b,unstyled:x,__stopPropagation:S},I)))});return L.createElement(L.Fragment,null,z)}G3e.displayName="@mantine/dates/MonthsList";var d8t=ht((e,{size:t,amountOfMonths:n,fullWidth:r})=>{const i=e.fn.size({size:t,sizes:g$})*7,s=n>1?i*n+(n-1)*e.spacing.md:i;return{calendarBase:{boxSizing:"border-box",display:"flex",gap:e.spacing.md,maxWidth:r?"100%":s}}}),h8t=Object.defineProperty,S3=Object.getOwnPropertySymbols,Y3e=Object.prototype.hasOwnProperty,K3e=Object.prototype.propertyIsEnumerable,_me=(e,t,n)=>t in e?h8t(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,p8t=(e,t)=>{for(var n in t||(t={}))Y3e.call(t,n)&&_me(e,n,t[n]);if(S3)for(var n of S3(t))K3e.call(t,n)&&_me(e,n,t[n]);return e},m8t=(e,t)=>{var n={};for(var r in e)Y3e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&S3)for(var r of S3(e))t.indexOf(r)<0&&K3e.call(e,r)&&(n[r]=e[r]);return n};const $Q=A.forwardRef((e,t)=>{var n=e,{className:r,classNames:i,styles:s,month:o,initialMonth:a,onMonthChange:u,locale:l,amountOfMonths:c=1,paginateBy:f=c,size:d="sm",allowLevelChange:h=!0,initialLevel:p="date",minDate:m,maxDate:g,__staticSelector:y="CalendarBase",dayClassName:v,dayStyle:_,disableOutsideEvents:b,excludeDate:E,hideWeekdays:w,fullWidth:x,preventFocus:S,firstDayOfWeek:I="monday",value:C,onChange:O,onDayMouseEnter:z,range:N,nextDecadeLabel:$,nextMonthLabel:D,nextYearLabel:B,previousDecadeLabel:V,previousMonthLabel:j,previousYearLabel:G,labelFormat:U="MMMM YYYY",weekdayLabelFormat:P,hideOutsideDates:k,isDateInRange:H,isDateFirstInRange:M,isDateLastInRange:F,renderDay:J,unstyled:se,weekendDays:ae,__stopPropagation:ce,yearLabelFormat:le="YYYY"}=n,ge=m8t(n,["className","classNames","styles","month","initialMonth","onMonthChange","locale","amountOfMonths","paginateBy","size","allowLevelChange","initialLevel","minDate","maxDate","__staticSelector","dayClassName","dayStyle","disableOutsideEvents","excludeDate","hideWeekdays","fullWidth","preventFocus","firstDayOfWeek","value","onChange","onDayMouseEnter","range","nextDecadeLabel","nextMonthLabel","nextYearLabel","previousDecadeLabel","previousMonthLabel","previousYearLabel","labelFormat","weekdayLabelFormat","hideOutsideDates","isDateInRange","isDateFirstInRange","isDateLastInRange","renderDay","unstyled","weekendDays","__stopPropagation","yearLabelFormat"]);const[ue,Fe]=A.useState(p),{classes:ke,cx:Ge,theme:Re}=d8t({size:d,fullWidth:x,amountOfMonths:ue==="date"?c:1},{name:y,styles:s,classNames:i,unstyled:se}),Oe=l||Re.datesLocale,Le=A.useRef(Array(c).fill(0).map(()=>[])),[Ut,Qe]=Ta({value:o,defaultValue:a,finalValue:new Date,onChange:u}),[je,bt]=A.useState(Ut.getFullYear()),et=m instanceof Date?m.getFullYear():100,ut=g instanceof Date?g.getFullYear():1e4,lt=6,jt=(he,_e,Pe,it=1)=>{var Ye;const at=["down","up"].includes(he),tt=at?Pe.rowIndex+(he==="down"?it:-it):Pe.rowIndex,vt=at?Pe.cellIndex:Pe.cellIndex+(he==="right"?it:-it),In=(Ye=Le.current[_e][tt])==null?void 0:Ye[vt];In&&(In.disabled?jt(he,_e,Pe,it+1):In.focus())},Dn=(he,_e,Pe)=>{var it;switch(Pe.key){case"ArrowDown":{Pe.preventDefault(),_e.rowIndex+1<Le.current[he].length&&jt("down",he,_e);break}case"ArrowUp":{Pe.preventDefault(),_e.rowIndex>0&&jt("up",he,_e);break}case"ArrowRight":{Pe.preventDefault(),_e.cellIndex!==lt?jt("right",he,_e):he+1<c&&Le.current[he+1][_e.rowIndex]&&((it=Le.current[he+1][_e.rowIndex][0])==null||it.focus());break}case"ArrowLeft":Pe.preventDefault(),_e.cellIndex!==0?jt("left",he,_e):he>0&&Le.current[he-1][_e.rowIndex]&&Le.current[he-1][_e.rowIndex][lt].focus()}};return L.createElement(At,p8t({className:Ge(ke.calendarBase,r),ref:t},ge),ue==="year"&&L.createElement(D3e,{size:d,value:je,minYear:et,maxYear:ut,onChange:he=>{bt(he),Fe("month")},classNames:i,styles:s,__staticSelector:y,__stopPropagation:ce,nextDecadeLabel:$,previousDecadeLabel:V,preventFocus:S,unstyled:se,yearLabelFormat:le}),ue==="month"&&L.createElement(F3e,{size:d,value:{month:Ut.getMonth(),year:Ut.getFullYear()},year:je,onYearChange:bt,onNextLevel:()=>Fe("year"),locale:Oe,minDate:m,maxDate:g,onChange:he=>{Qe(new Date(je,he,1)),Fe("date")},classNames:i,styles:s,__staticSelector:y,__stopPropagation:ce,nextYearLabel:B,previousYearLabel:G,preventFocus:S,unstyled:se,yearLabelFormat:le}),ue==="date"&&L.createElement(G3e,{amountOfMonths:c,paginateBy:f,month:Ut,locale:Oe,minDate:m,maxDate:g,allowLevelChange:h,size:d,daysRefs:Le,onMonthChange:Qe,onNextLevel:()=>Fe("month"),onDayKeyDown:Dn,classNames:i,styles:s,__staticSelector:y,dayClassName:v,dayStyle:_,disableOutsideEvents:b,excludeDate:E,hideWeekdays:w,fullWidth:x,preventFocus:S,firstDayOfWeek:I,value:C,range:N,onChange:O,nextMonthLabel:D,previousMonthLabel:j,labelFormat:U,weekdayLabelFormat:P,onDayMouseEnter:z,renderDay:J,hideOutsideDates:k,isDateInRange:H,isDateFirstInRange:M,isDateLastInRange:F,unstyled:se,weekendDays:ae,__stopPropagation:ce}))});$Q.displayName="@mantine/dates/CalendarBase";var g8t=Object.defineProperty,T3=Object.getOwnPropertySymbols,X3e=Object.prototype.hasOwnProperty,Q3e=Object.prototype.propertyIsEnumerable,bme=(e,t,n)=>t in e?g8t(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,y8t=(e,t)=>{for(var n in t||(t={}))X3e.call(t,n)&&bme(e,n,t[n]);if(T3)for(var n of T3(t))Q3e.call(t,n)&&bme(e,n,t[n]);return e},v8t=(e,t)=>{var n={};for(var r in e)X3e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&T3)for(var r of T3(e))t.indexOf(r)<0&&Q3e.call(e,r)&&(n[r]=e[r]);return n};const _8t={__staticSelector:"Calendar"};function J3e(e){const t=Ct("Calendar",_8t,e),{__staticSelector:n="Calendar",multiple:r,value:i,onChange:s}=t,o=v8t(t,["__staticSelector","multiple","value","onChange"]),a=u=>{if(!r)return s(u);const l=i.some(c=>Np(c,u));return s(l?i.filter(c=>!Np(c,u)):[...i,u])};return L.createElement($Q,y8t({__staticSelector:n,onChange:a,value:i},o))}J3e.displayName="@mantine/dates/Calendar";var b8t=Object.defineProperty,w8t=Object.defineProperties,E8t=Object.getOwnPropertyDescriptors,wme=Object.getOwnPropertySymbols,x8t=Object.prototype.hasOwnProperty,S8t=Object.prototype.propertyIsEnumerable,Eme=(e,t,n)=>t in e?b8t(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,T8t=(e,t)=>{for(var n in t||(t={}))x8t.call(t,n)&&Eme(e,n,t[n]);if(wme)for(var n of wme(t))S8t.call(t,n)&&Eme(e,n,t[n]);return e},A8t=(e,t)=>w8t(e,E8t(t)),C8t=ht(e=>({wrapper:A8t(T8t({},e.fn.fontStyles()),{position:"relative",cursor:"pointer"}),input:{cursor:"pointer",whiteSpace:"nowrap","&:not([data-free-input])::selection":{backgroundColor:"transparent"},"&[data-free-input]":{cursor:"text"}}})),I8t=Object.defineProperty,O8t=Object.defineProperties,P8t=Object.getOwnPropertyDescriptors,A3=Object.getOwnPropertySymbols,Z3e=Object.prototype.hasOwnProperty,eLe=Object.prototype.propertyIsEnumerable,xme=(e,t,n)=>t in e?I8t(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,lS=(e,t)=>{for(var n in t||(t={}))Z3e.call(t,n)&&xme(e,n,t[n]);if(A3)for(var n of A3(t))eLe.call(t,n)&&xme(e,n,t[n]);return e},Sme=(e,t)=>O8t(e,P8t(t)),k8t=(e,t)=>{var n={};for(var r in e)Z3e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&A3)for(var r of A3(e))t.indexOf(r)<0&&eLe.call(e,r)&&(n[r]=e[r]);return n};const $8t={xs:24,sm:30,md:34,lg:40,xl:44},R8t={in:{opacity:1,transform:"translateY(0) scale(1)"},out:{opacity:0,transform:"translateY(-25px) scale(0.93)"},common:{transformOrigin:"top left"},transitionProperty:"opacity, transform"},RQ=A.forwardRef((e,t)=>{var n=e,{classNames:r,className:i,style:s,styles:o,wrapperProps:a,required:u,allowFreeInput:l=!1,label:c,error:f,id:d,description:h,placeholder:p,shadow:m,transition:g=R8t,transitionDuration:y=100,transitionTimingFunction:v,size:_="sm",children:b,inputLabel:E,__staticSelector:w="DatePickerBase",dropdownOpened:x,setDropdownOpened:S,dropdownType:I="popover",dropdownPosition:C="flip",clearable:O=!0,clearButtonLabel:z,onClear:N,positionDependencies:$=[],zIndex:D,withinPortal:B=!1,onBlur:V,onFocus:j,onChange:G,onKeyDown:U,name:P="date",sx:k,amountOfMonths:H=1,onDropdownClose:M,onDropdownOpen:F,clickOutsideEvents:J=["mousedown","touchstart"],modalZIndex:se,errorProps:ae,labelProps:ce,descriptionProps:le,clearButtonTabIndex:ge=0,unstyled:ue,inputContainer:Fe,inputWrapperOrder:ke,modalProps:Ge,withAsterisk:Re}=n,Oe=k8t(n,["classNames","className","style","styles","wrapperProps","required","allowFreeInput","label","error","id","description","placeholder","shadow","transition","transitionDuration","transitionTimingFunction","size","children","inputLabel","__staticSelector","dropdownOpened","setDropdownOpened","dropdownType","dropdownPosition","clearable","clearButtonLabel","onClear","positionDependencies","zIndex","withinPortal","onBlur","onFocus","onChange","onKeyDown","name","sx","amountOfMonths","onDropdownClose","onDropdownOpen","clickOutsideEvents","modalZIndex","errorProps","labelProps","descriptionProps","clearButtonTabIndex","unstyled","inputContainer","inputWrapperOrder","modalProps","withAsterisk"]);const{classes:Le,cx:Ut,theme:Qe}=C8t(null,{classNames:r,styles:o,unstyled:ue,name:w}),{systemStyles:je,rest:bt}=yf(Oe),et=vl(d),ut=A.useRef(),lt=()=>{S(!1),M==null||M()},jt=()=>{S(!0),F==null||F()},Dn=()=>{S(!x),x?M==null||M():F==null||F()},he=at=>{at.key==="Escape"&&(lt(),window.setTimeout(()=>{var tt;return(tt=ut.current)==null?void 0:tt.focus()},0))},_e=O?L.createElement(bv,{variant:"transparent","aria-label":z,onClick:N,size:_,tabIndex:ge,unstyled:ue}):null,Pe=at=>{typeof V=="function"&&V(at),l&&lt()},it=at=>{typeof j=="function"&&j(at),l&&jt()},Ye=at=>{typeof U=="function"&&U(at),(at.key==="Space"||at.key==="Enter")&&!l&&(at.preventDefault(),jt())};return L.createElement(is.Wrapper,lS(lS({required:u,id:et,label:c,error:f,description:h,className:i,style:s,classNames:r,styles:o,size:_,__staticSelector:w,sx:k,errorProps:ae,descriptionProps:le,labelProps:ce,inputContainer:Fe,inputWrapperOrder:ke,unstyled:ue,withAsterisk:Re},je),a),L.createElement(Vi,{__staticSelector:w,withinPortal:B,offset:10,opened:x,transitionDuration:y,transition:g,positionDependencies:$,middlewares:{flip:C==="flip",shift:!1},position:C==="flip"?"bottom-start":C,shadow:m,onClose:lt,trapFocus:!l,withRoles:!1,clickOutsideEvents:J,zIndex:D,classNames:r,styles:o,unstyled:ue},L.createElement(Vi.Target,null,L.createElement("div",{className:Le.wrapper},L.createElement(is,lS({classNames:Sme(lS({},r),{input:Ut(Le.input,r==null?void 0:r.input)}),"data-free-input":l||void 0,styles:o,onClick:()=>l?jt():Dn(),onKeyDown:Ye,id:et,ref:Ts(t,ut),__staticSelector:w,size:_,name:P,placeholder:p,value:E,required:u,invalid:!!f,readOnly:!l,rightSection:_e,rightSectionWidth:Qe.fn.size({size:_,sizes:$8t}),onBlur:Pe,onFocus:it,onChange:G,autoComplete:"off",unstyled:ue},bt)))),I==="popover"?L.createElement(Vi.Dropdown,null,L.createElement("div",{"data-mantine-stop-propagation":x,onKeyDownCapture:he,"aria-hidden":l||void 0},b)):L.createElement(BC,Sme(lS({},Ge),{opened:x,onClose:lt,withCloseButton:!1,size:H*400,zIndex:se,unstyled:ue}),b)))});RQ.displayName="@mantine/dates/DatePickerBase";var N8t=Object.defineProperty,C3=Object.getOwnPropertySymbols,tLe=Object.prototype.hasOwnProperty,nLe=Object.prototype.propertyIsEnumerable,Tme=(e,t,n)=>t in e?N8t(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,D8t=(e,t)=>{for(var n in t||(t={}))tLe.call(t,n)&&Tme(e,n,t[n]);if(C3)for(var n of C3(t))nLe.call(t,n)&&Tme(e,n,t[n]);return e},L8t=(e,t)=>{var n={};for(var r in e)tLe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&C3)for(var r of C3(e))t.indexOf(r)<0&&nLe.call(e,r)&&(n[r]=e[r]);return n};const M8t={shadow:"sm",transitionDuration:200,closeCalendarOnChange:!0,labelFormat:"MMMM YYYY",initiallyOpened:!1,name:"date",size:"sm",dropdownType:"popover",dropdownPosition:"flip",clearable:!0,disabled:!1,fixOnBlur:!0,withinPortal:!1,firstDayOfWeek:"monday",openDropdownOnClear:!1},F8t=A.forwardRef((e,t)=>{const n=Ct("DatePicker",M8t,e),{value:r,onChange:i,defaultValue:s,classNames:o,styles:a,shadow:u,locale:l,inputFormat:c,transitionDuration:f,transitionTimingFunction:d,nextMonthLabel:h,previousMonthLabel:p,closeCalendarOnChange:m,labelFormat:g,dayClassName:y,dayStyle:v,disableOutsideEvents:_,minDate:b,maxDate:E,excludeDate:w,initialMonth:x,initiallyOpened:S,name:I,size:C,dropdownType:O,dropdownPosition:z,clearable:N,disabled:$,clearButtonLabel:D,fixOnBlur:B,allowFreeInput:V,withinPortal:j,dateParser:G,firstDayOfWeek:U,onFocus:P,onBlur:k,amountOfMonths:H,allowLevelChange:M,initialLevel:F,onDropdownClose:J,onDropdownOpen:se,hideOutsideDates:ae,hideWeekdays:ce,renderDay:le,type:ge,openDropdownOnClear:ue,unstyled:Fe,weekendDays:ke,yearLabelFormat:Ge,nextDecadeLabel:Re,nextYearLabel:Oe,previousDecadeLabel:Le,previousYearLabel:Ut}=n,Qe=L8t(n,["value","onChange","defaultValue","classNames","styles","shadow","locale","inputFormat","transitionDuration","transitionTimingFunction","nextMonthLabel","previousMonthLabel","closeCalendarOnChange","labelFormat","dayClassName","dayStyle","disableOutsideEvents","minDate","maxDate","excludeDate","initialMonth","initiallyOpened","name","size","dropdownType","dropdownPosition","clearable","disabled","clearButtonLabel","fixOnBlur","allowFreeInput","withinPortal","dateParser","firstDayOfWeek","onFocus","onBlur","amountOfMonths","allowLevelChange","initialLevel","onDropdownClose","onDropdownOpen","hideOutsideDates","hideWeekdays","renderDay","type","openDropdownOnClear","unstyled","weekendDays","yearLabelFormat","nextDecadeLabel","nextYearLabel","previousDecadeLabel","previousYearLabel"]),je=as(),bt=l||je.datesLocale,et=ge==="date"?"YYYY-MM-DD":c||je.dateFormat,[ut,lt]=A.useState(S),jt=C==="lg"||C==="xl"?"md":"sm",Dn=A.useRef(),[he,_e]=A.useState(s??null),[Pe,it]=Ta({value:r,defaultValue:s,finalValue:null,onChange:i}),[Ye,at]=A.useState(Pe||x||new Date),[tt,vt]=A.useState(!1),[In,Wt]=A.useState(Pe instanceof Date?Ym(xn(Pe).locale(bt).format(et)):""),Vt=()=>{lt(!1),J==null||J()},hr=()=>{lt(!0),se==null||se()};A.useEffect(()=>{r===null&&!tt&&Wt(""),r instanceof Date&&!tt&&Wt(Ym(xn(r).locale(bt).format(et)))},[r,tt]);const Yn=gt=>{it(gt),Wt(Ym(xn(gt).locale(bt).format(et))),m&&Vt(),window.setTimeout(()=>{var Fr;return(Fr=Dn.current)==null?void 0:Fr.focus()},0)},ku=()=>{var gt;it(null),_e(null),Wt(""),ue&&hr(),(gt=Dn.current)==null||gt.focus()},Mr=gt=>G?G(gt):xn(gt,et,bt).toDate(),us=()=>{let gt=typeof Pe=="string"?Mr(Pe):Pe;E&&xn(gt).isAfter(E)&&(gt=E),b&&xn(gt).isBefore(b)&&(gt=b),xn(gt).isValid()?(it(gt),_e(gt),Wt(Ym(xn(gt).locale(bt).format(et))),at(gt)):B&&it(he)},ti=gt=>{typeof k=="function"&&k(gt),vt(!1),V&&us()},Ei=gt=>{gt.key==="Enter"&&V&&(Vt(),us())},qr=gt=>{typeof P=="function"&&P(gt),vt(!0)},yr=gt=>{hr();const Fr=Mr(gt.target.value);xn(Fr).isValid()?(it(Fr),_e(Fr),Wt(gt.target.value),at(Fr)):Wt(gt.target.value)};return L.createElement(RQ,D8t({allowFreeInput:V,dropdownOpened:ut,setDropdownOpened:lt,shadow:u,transitionDuration:f,ref:Ts(t,Dn),size:C,styles:a,classNames:o,onChange:yr,onBlur:ti,onFocus:qr,onKeyDown:Ei,name:I,inputLabel:In,__staticSelector:"DatePicker",dropdownType:O,dropdownPosition:z,clearable:ge==="date"?!1:N&&!!Pe&&!$,clearButtonLabel:D,onClear:ku,disabled:$,withinPortal:j,amountOfMonths:H,onDropdownClose:J,onDropdownOpen:se,type:ge,unstyled:Fe},Qe),L.createElement(J3e,{classNames:o,styles:a,locale:bt,nextMonthLabel:h,previousMonthLabel:p,month:V?Ye:void 0,initialMonth:x||(Pe instanceof Date?Pe:new Date),onMonthChange:at,value:Pe instanceof Date?Pe:xn(Pe).toDate(),onChange:Yn,labelFormat:g,dayClassName:y,dayStyle:v,disableOutsideEvents:_,minDate:b,maxDate:E,excludeDate:w,__staticSelector:"DatePicker",fullWidth:O==="modal",__stopPropagation:O!=="modal",size:O==="modal"?"lg":jt,firstDayOfWeek:U,preventFocus:V,amountOfMonths:H,allowLevelChange:M,initialLevel:F,hideOutsideDates:ae,hideWeekdays:ce,renderDay:le,unstyled:Fe,weekendDays:ke,yearLabelFormat:Ge,nextDecadeLabel:Re,nextYearLabel:Oe,previousDecadeLabel:Le,previousYearLabel:Ut}))});F8t.displayName="@mantine/dates/DatePicker";var B8t=Object.defineProperty,I3=Object.getOwnPropertySymbols,rLe=Object.prototype.hasOwnProperty,iLe=Object.prototype.propertyIsEnumerable,Ame=(e,t,n)=>t in e?B8t(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,j8t=(e,t)=>{for(var n in t||(t={}))rLe.call(t,n)&&Ame(e,n,t[n]);if(I3)for(var n of I3(t))iLe.call(t,n)&&Ame(e,n,t[n]);return e},z8t=(e,t)=>{var n={};for(var r in e)rLe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&I3)for(var r of I3(e))t.indexOf(r)<0&&iLe.call(e,r)&&(n[r]=e[r]);return n};const U8t={__staticSelector:"RangeCalendar",allowSingleDateInRange:!1,amountOfMonths:1},sLe=A.forwardRef((e,t)=>{const n=Ct("RangeCalendar",U8t,e),{value:r,onChange:i,dayStyle:s,onMouseLeave:o,__staticSelector:a,allowSingleDateInRange:u,amountOfMonths:l,paginateBy:c}=n,f=z8t(n,["value","onChange","dayStyle","onMouseLeave","__staticSelector","allowSingleDateInRange","amountOfMonths","paginateBy"]),[d,h]=A.useState(null),[p,m]=A.useState(null),g=E=>{if(p instanceof Date){if(Np(E,p)&&!u)return m(null),h(null),null;const w=[E,p];return w.sort((x,S)=>x.getTime()-S.getTime()),i(w),m(null),null}return r[0]&&Np(E,r[0])&&!u?(m(null),h(null),i([null,null]),null):(i([E,null]),m(E),null)},y=E=>{typeof o=="function"&&o(E),h(null)},v=(E,w)=>{if(p instanceof Date&&d instanceof Date){const x=[d,p];return x.sort((S,I)=>S.getTime()-I.getTime()),!w.selected&&xn(E).subtract(1,"day").isBefore(x[1])&&xn(E).add(1,"day").isAfter(x[0])}return!1},_=(E,w)=>{if(p instanceof Date&&d instanceof Date){const x=[d,p];return x.sort((S,I)=>S.getTime()-I.getTime()),w.selected&&xn(E).isBefore(x[1])}return!1},b=(E,w)=>{if(p instanceof Date&&d instanceof Date){const x=[d,p];return x.sort((S,I)=>S.getTime()-I.getTime()),w.selected&&xn(E).isAfter(x[0])}return!1};return L.createElement($Q,j8t({dayStyle:s,onMouseLeave:y,onDayMouseEnter:E=>h(E),onChange:g,value:p,range:r,ref:t,__staticSelector:a,amountOfMonths:l,paginateBy:c||l,hideOutsideDates:l>1,isDateInRange:v,isDateFirstInRange:_,isDateLastInRange:b},f))});sLe.displayName="@mantine/dates/RangeCalendar";var V8t=Object.defineProperty,O3=Object.getOwnPropertySymbols,oLe=Object.prototype.hasOwnProperty,aLe=Object.prototype.propertyIsEnumerable,Cme=(e,t,n)=>t in e?V8t(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,H8t=(e,t)=>{for(var n in t||(t={}))oLe.call(t,n)&&Cme(e,n,t[n]);if(O3)for(var n of O3(t))aLe.call(t,n)&&Cme(e,n,t[n]);return e},q8t=(e,t)=>{var n={};for(var r in e)oLe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&O3)for(var r of O3(e))t.indexOf(r)<0&&aLe.call(e,r)&&(n[r]=e[r]);return n};const Ime=e=>Array.isArray(e)&&e.length===2&&e.every(t=>t instanceof Date),W8t=e=>Array.isArray(e)&&e.length===2&&e[0]instanceof Date,G8t={shadow:"sm",transitionDuration:200,closeCalendarOnChange:!0,labelFormat:"MMMM YYYY",initiallyOpened:!1,size:"sm",dropdownType:"popover",labelSeparator:"",clearable:!0,firstDayOfWeek:"monday",allowSingleDateInRange:!1,amountOfMonths:1,withinPortal:!1,openDropdownOnClear:!1},uLe=A.forwardRef((e,t)=>{const n=Ct("DateRangePicker",G8t,e),{value:r,onChange:i,defaultValue:s,classNames:o,styles:a,shadow:u,locale:l,inputFormat:c,transitionDuration:f,transitionTimingFunction:d,nextMonthLabel:h,previousMonthLabel:p,closeCalendarOnChange:m,labelFormat:g,dayClassName:y,dayStyle:v,disableOutsideEvents:_,minDate:b,maxDate:E,excludeDate:w,initialMonth:x,initiallyOpened:S,size:I,dropdownType:C,labelSeparator:O,clearable:z,clearButtonLabel:N,firstDayOfWeek:$,allowLevelChange:D,allowSingleDateInRange:B,amountOfMonths:V,withinPortal:j,initialLevel:G,onDropdownClose:U,onDropdownOpen:P,hideOutsideDates:k,hideWeekdays:H,renderDay:M,openDropdownOnClear:F,unstyled:J,weekendDays:se,yearLabelFormat:ae,nextDecadeLabel:ce,nextYearLabel:le,previousDecadeLabel:ge,previousYearLabel:ue}=n,Fe=q8t(n,["value","onChange","defaultValue","classNames","styles","shadow","locale","inputFormat","transitionDuration","transitionTimingFunction","nextMonthLabel","previousMonthLabel","closeCalendarOnChange","labelFormat","dayClassName","dayStyle","disableOutsideEvents","minDate","maxDate","excludeDate","initialMonth","initiallyOpened","size","dropdownType","labelSeparator","clearable","clearButtonLabel","firstDayOfWeek","allowLevelChange","allowSingleDateInRange","amountOfMonths","withinPortal","initialLevel","onDropdownClose","onDropdownOpen","hideOutsideDates","hideWeekdays","renderDay","openDropdownOnClear","unstyled","weekendDays","yearLabelFormat","nextDecadeLabel","nextYearLabel","previousDecadeLabel","previousYearLabel"]),ke=as(),Ge=l||ke.datesLocale,Re=c||ke.dateFormat,[Oe,Le]=A.useState(S),Ut=I==="lg"||I==="xl"?"md":"sm",Qe=A.useRef(),[je,bt]=Ta({value:r,defaultValue:s,finalValue:[null,null],onChange:i}),et=Pe=>{bt(Pe),m&&Ime(Pe)&&(Le(!1),U==null||U(),window.setTimeout(()=>{var it;return(it=Qe.current)==null?void 0:it.focus()},0))},ut=Ime(je),lt=W8t(je),jt=je[0]?Ym(xn(je[0]).locale(Ge).format(Re)):"",Dn=je[1]?Ym(xn(je[1]).locale(Ge).format(Re)):"",he=()=>{var Pe;bt([null,null]),Le(!0),F&&(P==null||P()),(Pe=Qe.current)==null||Pe.focus()},_e=Pe=>{!Pe&&lt&&je[1]===null&&he(),Le(Pe)};return L.createElement(RQ,H8t({dropdownOpened:Oe,setDropdownOpened:_e,shadow:u,transitionDuration:f,ref:Ts(t,Qe),size:I,styles:a,classNames:o,inputLabel:lt?`${jt} ${O} ${Dn}`:"",__staticSelector:"DateRangePicker",dropdownType:C,clearable:z&&lt,clearButtonLabel:N,onClear:he,withinPortal:j,amountOfMonths:V,onDropdownClose:U,onDropdownOpen:P,unstyled:J},Fe),L.createElement(sLe,{classNames:o,styles:a,locale:Ge,nextMonthLabel:h,previousMonthLabel:p,initialMonth:ut?je[0]:x,value:je,onChange:et,labelFormat:g,dayClassName:y,dayStyle:v,disableOutsideEvents:_,minDate:b,maxDate:E,excludeDate:w,__staticSelector:"DateRangePicker",fullWidth:C==="modal",firstDayOfWeek:$,size:C==="modal"?"lg":Ut,allowLevelChange:D,allowSingleDateInRange:B,amountOfMonths:V,initialLevel:G,hideOutsideDates:k,hideWeekdays:H,renderDay:M,unstyled:J,weekendDays:se,yearLabelFormat:ae,nextDecadeLabel:ce,nextYearLabel:le,previousDecadeLabel:ge,previousYearLabel:ue}))});uLe.displayName="@mantine/dates/DateRangePicker";function Tg(e){const t=parseInt(e,10);return t>=10?t.toString():`0${t}`}var Y8t=Object.defineProperty,K8t=Object.defineProperties,X8t=Object.getOwnPropertyDescriptors,Ome=Object.getOwnPropertySymbols,Q8t=Object.prototype.hasOwnProperty,J8t=Object.prototype.propertyIsEnumerable,Pme=(e,t,n)=>t in e?Y8t(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Z8t=(e,t)=>{for(var n in t||(t={}))Q8t.call(t,n)&&Pme(e,n,t[n]);if(Ome)for(var n of Ome(t))J8t.call(t,n)&&Pme(e,n,t[n]);return e},e9t=(e,t)=>K8t(e,X8t(t));const t9t={xs:20,sm:23,md:25,lg:27,xl:29};var lLe=ht((e,{size:t,hasValue:n})=>({timeInput:e9t(Z8t({},e.fn.fontStyles()),{width:e.fn.size({size:t,sizes:t9t}),appearance:"none",backgroundColor:"transparent",color:"inherit",padding:0,textAlign:"center",border:"1px solid transparent",fontSize:e.fn.size({size:t,sizes:e.fontSizes}),lineHeight:1,outline:0,"&:focus":{textAlign:n?void 0:"start"},"&::placeholder":{width:"auto",textAlign:"left"},"&[disabled]":{color:e.colorScheme==="dark"?e.colors.dark[2]:e.colors.gray[7],cursor:"not-allowed"}}),amPmInput:{textAlign:"left"}})),n9t=Object.defineProperty,P3=Object.getOwnPropertySymbols,cLe=Object.prototype.hasOwnProperty,fLe=Object.prototype.propertyIsEnumerable,kme=(e,t,n)=>t in e?n9t(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,r9t=(e,t)=>{for(var n in t||(t={}))cLe.call(t,n)&&kme(e,n,t[n]);if(P3)for(var n of P3(t))fLe.call(t,n)&&kme(e,n,t[n]);return e},i9t=(e,t)=>{var n={};for(var r in e)cLe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&P3)for(var r of P3(e))t.indexOf(r)<0&&fLe.call(e,r)&&(n[r]=e[r]);return n};const y$=A.forwardRef((e,t)=>{var n=e,{className:r,onFocus:i,onBlur:s,onChange:o,setValue:a,withSeparator:u=!1,size:l="sm",max:c,min:f=0,value:d,unstyled:h}=n,p=i9t(n,["className","onFocus","onBlur","onChange","setValue","withSeparator","size","max","min","value","unstyled"]);const[m,g]=A.useState(0),{classes:y,cx:v,theme:_}=lLe({size:l,hasValue:!!d},{name:"TimeField",unstyled:h}),b=A.useRef(),E=C=>{typeof i=="function"&&i(C),b.current.select(),g(0)},w=C=>{typeof s=="function"&&s(C),m===1&&typeof o=="function"&&o(C.currentTarget.value,!1)},x=C=>{C.stopPropagation(),b.current.select()},S=C=>{if(C.key==="ArrowUp"){C.preventDefault();const O=Tg(ef(parseInt(C.currentTarget.value,10)+1,f,c).toString());d!==O&&o(O,!1)}if(C.key==="ArrowDown"){C.preventDefault();const O=Tg(ef(parseInt(C.currentTarget.value,10)-1,f,c).toString());d!==O&&o(O,!1)}},I=C=>{g(m+1);const O=parseInt(C.currentTarget.value,10).toString();if(O==="0"&&m===0){a("00");return}o(O,!0,m>0)};return L.createElement(L.Fragment,null,L.createElement("input",r9t({type:"text",inputMode:"numeric",ref:Ts(b,t),onChange:I,onClick:x,onFocus:E,onBlur:w,onKeyDown:S,value:d,className:v(y.timeInput,r)},p)),u&&L.createElement(Rt,{size:l,unstyled:h,style:{lineHeight:1,color:d?"inherit":_.colorScheme==="dark"?_.colors.dark[2]:_.colors.gray[7]}},":"))});y$.displayName="@mantine/dates/TimeField";function JB(e){return Math.floor(e/10)}function ZB({onChange:e,nextRef:t,min:n,max:r,nextMax:i}){return(s,o,a=!1)=>{var u,l;const c=parseInt(s,10);if(!Number.isNaN(c)){if(c>JB(r)||a){const f=c%10;let d,h;c>r&&i&&f<=JB(i)?(d=Tg(JB(c).toString()),h=Tg(f.toString())):d=Tg(ef(c,n,r).toString()),e(d,h),o&&((u=t==null?void 0:t.current)==null||u.focus()),o&&((l=t==null?void 0:t.current)==null||l.select());return}e(c.toString())}}}var s9t=ht((e,{size:t})=>({timeInput:{},amPmInput:{},disabled:{cursor:"not-allowed"},controls:{display:"flex",alignItems:"center",height:e.fn.size({size:t,sizes:Fo})-2}})),o9t=Object.defineProperty,k3=Object.getOwnPropertySymbols,dLe=Object.prototype.hasOwnProperty,hLe=Object.prototype.propertyIsEnumerable,$me=(e,t,n)=>t in e?o9t(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,a9t=(e,t)=>{for(var n in t||(t={}))dLe.call(t,n)&&$me(e,n,t[n]);if(k3)for(var n of k3(t))hLe.call(t,n)&&$me(e,n,t[n]);return e},u9t=(e,t)=>{var n={};for(var r in e)dLe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&k3)for(var r of k3(e))t.indexOf(r)<0&&hLe.call(e,r)&&(n[r]=e[r]);return n};const pLe=A.forwardRef((e,t)=>{var n=e,{className:r,onChange:i,onFocus:s,size:o="sm",value:a,unstyled:u,amLabel:l,pmLabel:c}=n,f=u9t(n,["className","onChange","onFocus","size","value","unstyled","amLabel","pmLabel"]);const{classes:d,cx:h}=lLe({size:o,hasValue:!!a},{name:"AmPmInput",unstyled:u}),p=A.useRef(),m=_=>{typeof s=="function"&&s(_),p.current.select()},g=_=>{_.stopPropagation(),p.current.select()},y=_=>{(_.key==="ArrowUp"||_.key==="ArrowDown")&&(_.preventDefault(),i(a===l?c:l,!0))},v=_=>{const b=_.target.value.slice(-1).toLowerCase();if(b==="p"){_.preventDefault(),i(c,!0);return}if(b==="a"){_.preventDefault(),i(l,!0);return}i(a.toString(),!0)};return L.createElement("input",a9t({type:"text",ref:Ts(p,t),onClick:g,onFocus:m,onKeyDown:y,onChange:v,value:a,className:h(d.timeInput,d.amPmInput)},f))});pLe.displayName="@mantine/dates/AmPmInput";function l9t({amLabel:e,pmLabel:t,onChange:n,nextRef:r}){return(i,s)=>{var o,a;const u=new RegExp(`(^(${e}|${t})?$)`),l=i.toLowerCase();if(l===e||l===t){n(l),s&&((o=r==null?void 0:r.current)==null||o.focus()),s&&((a=r==null?void 0:r.current)==null||a.select());return}u.test(l)&&n(l)}}function c9t(e,t,n,r,i,s){const o=xn();let a=parseInt(e,10);const u=parseInt(t,10),l=parseInt(n,10);return Number.isNaN(a)&&(a=0),r==="12"&&(a%=12,s===i&&(a+=12)),o.hour(a).minute(Number.isNaN(u)?0:u).second(Number.isNaN(l)?0:l).millisecond(0).toDate()}function Rme(e,t,n,r){if(!(e instanceof Date))return{hours:"",minutes:"",seconds:"",amPm:""};let i=e.getHours();const s=i>=12;return t==="12"&&(i%=12,i===0&&(i+=12)),{hours:Tg(i.toString()),minutes:Tg(e.getMinutes().toString()),seconds:Tg(e.getSeconds().toString()),amPm:s?r:n}}var f9t=Object.defineProperty,d9t=Object.defineProperties,h9t=Object.getOwnPropertyDescriptors,$3=Object.getOwnPropertySymbols,mLe=Object.prototype.hasOwnProperty,gLe=Object.prototype.propertyIsEnumerable,Nme=(e,t,n)=>t in e?f9t(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,gm=(e,t)=>{for(var n in t||(t={}))mLe.call(t,n)&&Nme(e,n,t[n]);if($3)for(var n of $3(t))gLe.call(t,n)&&Nme(e,n,t[n]);return e},ej=(e,t)=>d9t(e,h9t(t)),p9t=(e,t)=>{var n={};for(var r in e)mLe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&$3)for(var r of $3(e))t.indexOf(r)<0&&gLe.call(e,r)&&(n[r]=e[r]);return n};const m9t={xs:24,sm:30,md:34,lg:40,xl:44},g9t={size:"sm",withSeconds:!1,clearable:!1,format:"24",amLabel:"am",pmLabel:"pm",timePlaceholder:"--",amPmPlaceholder:"am",disabled:!1},DV=A.forwardRef((e,t)=>{const n=Ct("TimeInput",g9t,e),{required:r,label:i,error:s,description:o,className:a,style:u,size:l,wrapperProps:c,classNames:f,styles:d,id:h,value:p,defaultValue:m,onChange:g,withSeconds:y,clearable:v,clearButtonLabel:_,format:b,amLabel:E,pmLabel:w,name:x,hoursLabel:S,minutesLabel:I,secondsLabel:C,amPmLabel:O,timePlaceholder:z,amPmPlaceholder:N,disabled:$,sx:D,nextRef:B,labelProps:V,descriptionProps:j,errorProps:G,unstyled:U,withAsterisk:P}=n,k=p9t(n,["required","label","error","description","className","style","size","wrapperProps","classNames","styles","id","value","defaultValue","onChange","withSeconds","clearable","clearButtonLabel","format","amLabel","pmLabel","name","hoursLabel","minutesLabel","secondsLabel","amPmLabel","timePlaceholder","amPmPlaceholder","disabled","sx","nextRef","labelProps","descriptionProps","errorProps","unstyled","withAsterisk"]),{classes:H,cx:M,theme:F}=s9t({size:l},{classNames:f,styles:d,unstyled:U,name:"TimeInput"}),{systemStyles:J,rest:se}=yf(k),ae=vl(h),ce=A.useRef(),le=A.useRef(),ge=A.useRef(),ue=A.useRef(),[Fe,ke]=A.useState(Rme(p||m,b,E,w)),[Ge,Re]=A.useState(p||m);_s(()=>{ke(Rme(Ge,b,E,w))},[Ge,b,E,w]),_s(()=>{(p==null?void 0:p.getTime())!==(Ge==null?void 0:Ge.getTime())&&Re(p)},[p]);const Oe=ut=>{const lt=gm(gm({},Fe),ut),jt=c9t(lt.hours,lt.minutes,lt.seconds,b,w,lt.amPm);Re(jt),typeof g=="function"&&g(jt)},Le=ZB({onChange:(ut,lt)=>{Oe({hours:ut,minutes:lt??Fe.minutes})},min:b==="12"?1:0,max:b==="12"?12:23,nextRef:le,nextMax:59}),Ut=ZB({onChange:(ut,lt)=>{Oe({minutes:ut,seconds:lt??Fe.seconds})},min:0,max:59,nextRef:y?ge:b==="12"?ue:B,nextMax:y?59:void 0}),Qe=ZB({onChange:ut=>{Oe({seconds:ut})},min:0,max:59,nextRef:b==="12"?ue:B}),je=l9t({amLabel:E,pmLabel:w,onChange:ut=>{Oe({amPm:ut})},nextRef:B}),bt=()=>{ke({hours:"",minutes:"",seconds:"",amPm:""}),Re(null),g==null||g(null),ce.current.focus()},et=v&&Ge&&!$?L.createElement(bv,{variant:"transparent","aria-label":_,onClick:bt,size:l,unstyled:U}):null;return L.createElement(is.Wrapper,gm(gm({required:r,label:i,error:s,description:o,className:a,style:u,classNames:f,styles:d,size:l,__staticSelector:"TimeInput",id:ae,sx:D,errorProps:G,descriptionProps:j,labelProps:V,unstyled:U,withAsterisk:P},J),c),L.createElement(is,gm({component:"div",__staticSelector:"TimeInput",required:r,invalid:!!s,onClick:()=>ce.current.focus(),size:l,className:M({[H.disabled]:$}),classNames:f,styles:d,disabled:$,rightSection:et,rightSectionWidth:F.fn.size({size:l,sizes:m9t}),unstyled:U},se),L.createElement("div",{className:H.controls},L.createElement(y$,{ref:Ts(ce,t),value:Fe.hours,onChange:Le,setValue:ut=>ke(lt=>ej(gm({},lt),{hours:ut})),id:ae,className:H.timeInput,withSeparator:!0,size:l,max:b==="12"?12:23,placeholder:z,"aria-label":S,disabled:$,name:x,unstyled:U}),L.createElement(y$,{ref:le,value:Fe.minutes,onChange:Ut,setValue:ut=>ke(lt=>ej(gm({},lt),{minutes:ut})),className:H.timeInput,withSeparator:y,size:l,max:59,placeholder:z,"aria-label":I,disabled:$,unstyled:U}),y&&L.createElement(y$,{ref:ge,value:Fe.seconds,onChange:Qe,setValue:ut=>ke(lt=>ej(gm({},lt),{seconds:ut})),className:H.timeInput,size:l,max:59,placeholder:z,"aria-label":C,disabled:$,unstyled:U}),b==="12"&&L.createElement(pLe,{ref:ue,value:Fe.amPm,onChange:je,placeholder:N,amLabel:E,pmLabel:w,size:l,"aria-label":O,disabled:$,unstyled:U}))))});DV.displayName="@mantine/dates/TimeInput";var y9t=ht((e,{size:t})=>({timeField:{},disabled:{opacity:.6,cursor:"not-allowed"},inputWrapper:{display:"inline-flex",alignItems:"center",height:e.fn.size({size:t,sizes:Fo})-2},separator:{paddingLeft:e.fn.size({size:t,sizes:e.spacing})/2,paddingRight:e.fn.size({size:t,sizes:e.spacing})/2,lineHeight:1}})),v9t=Object.defineProperty,R3=Object.getOwnPropertySymbols,yLe=Object.prototype.hasOwnProperty,vLe=Object.prototype.propertyIsEnumerable,Dme=(e,t,n)=>t in e?v9t(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,cS=(e,t)=>{for(var n in t||(t={}))yLe.call(t,n)&&Dme(e,n,t[n]);if(R3)for(var n of R3(t))vLe.call(t,n)&&Dme(e,n,t[n]);return e},_9t=(e,t)=>{var n={};for(var r in e)yLe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&R3)for(var r of R3(e))t.indexOf(r)<0&&vLe.call(e,r)&&(n[r]=e[r]);return n};const b9t={xs:24,sm:30,md:34,lg:40,xl:44},w9t={size:"sm",defaultValue:[null,null],withSeconds:!1,clearable:!1,format:"24",timePlaceholder:"--",amPmPlaceholder:"am",labelSeparator:"",disabled:!1},E9t=A.forwardRef((e,t)=>{const n=Ct("TimeRangeInput",w9t,e),{required:r,label:i,error:s,description:o,className:a,style:u,size:l,wrapperProps:c,classNames:f,styles:d,id:h,value:p,defaultValue:m,onChange:g,withSeconds:y,clearable:v,clearButtonLabel:_,format:b,name:E,hoursLabel:w,minutesLabel:x,secondsLabel:S,amPmLabel:I,timePlaceholder:C,amPmPlaceholder:O,labelSeparator:z,disabled:N,sx:$,labelProps:D,descriptionProps:B,errorProps:V,unstyled:j,withAsterisk:G}=n,U=_9t(n,["required","label","error","description","className","style","size","wrapperProps","classNames","styles","id","value","defaultValue","onChange","withSeconds","clearable","clearButtonLabel","format","name","hoursLabel","minutesLabel","secondsLabel","amPmLabel","timePlaceholder","amPmPlaceholder","labelSeparator","disabled","sx","labelProps","descriptionProps","errorProps","unstyled","withAsterisk"]),{classes:P,cx:k,theme:H}=y9t({size:l},{classNames:f,styles:d,unstyled:j,name:"TimeRangeInput"}),{systemStyles:M,rest:F}=yf(U),J=vl(h),se=A.useRef(),ae=A.useRef(),[ce,le]=A.useState(p??m);_s(()=>{typeof g=="function"&&g(ce)},[ce]),_s(()=>{var ke,Ge,Re,Oe;(((ke=p[0])==null?void 0:ke.getTime())!==((Ge=ce[0])==null?void 0:Ge.getTime())||((Re=p[1])==null?void 0:Re.getTime())!==((Oe=ce[1])==null?void 0:Oe.getTime()))&&le(p)},[p]);const ge=()=>{var ke;le([null,null]),(ke=se.current)==null||ke.focus()},ue=v&&ce.filter(ke=>!!ke).length>0?L.createElement(bv,{variant:"transparent","aria-label":_,onClick:ge,size:l,unstyled:j}):null,Fe={amPmLabel:I,amPmPlaceholder:O,disabled:N,format:b,hoursLabel:w,minutesLabel:x,secondsLabel:S,size:l,timePlaceholder:C,withSeconds:y};return L.createElement(is.Wrapper,cS(cS({required:r,label:i,error:s,description:o,className:a,style:u,classNames:f,styles:d,size:l,__staticSelector:"TimeRangeInput",id:J,sx:$,errorProps:V,descriptionProps:B,labelProps:D,unstyled:j,withAsterisk:G},M),c),L.createElement(is,cS({component:"div",__staticSelector:"TimeRangeInput",required:r,invalid:!!s,onClick:()=>{var ke;(ke=se.current)==null||ke.focus()},size:l,className:k({[P.disabled]:N}),classNames:f,styles:d,disabled:N,rightSection:ue,rightSectionWidth:H.fn.size({size:l,sizes:b9t}),unstyled:j},F),L.createElement("div",{className:P.inputWrapper},L.createElement(DV,cS({ref:Ts(se,t),variant:"unstyled",value:ce[0],onChange:ke=>le([ke,ce[1]]),name:E,nextRef:ae,id:J,unstyled:j},Fe)),L.createElement("span",{className:P.separator,style:{color:H.colorScheme==="dark"?H.colors.dark[2]:H.colors.gray[7]}},z),L.createElement(DV,cS({ref:ae,variant:"unstyled",value:ce[1],onChange:ke=>le([ce[0],ke]),unstyled:j},Fe)))))});E9t.displayName="@mantine/dates/TimeRangeInput";const Lme={};function LV(e,t){e===void 0&&(e=Lme),t===void 0&&(t=Lme);const n=Object.keys(e),r=Object.keys(t);return e===t||n.length===r.length&&n.every(i=>e[i]===t[i])}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var x9t=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),S9t=Object.prototype.hasOwnProperty;function MV(e,t){return S9t.call(e,t)}function FV(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)MV(e,i)&&r.push(i);return r}function Ku(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function BV(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function by(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function _Le(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function jV(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(jV(e[t]))return!0}else if(typeof e=="object"){for(var r=FV(e),i=r.length,s=0;s<i;s++)if(jV(e[r[s]]))return!0}}return!1}function Mme(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var bLe=function(e){x9t(t,e);function t(n,r,i,s,o){var a=this.constructor,u=e.call(this,Mme(n,{name:r,index:i,operation:s,tree:o}))||this;return u.name=r,u.index=i,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=Mme(n,{name:r,index:i,operation:s,tree:o}),u}return t}(Error),Ci=bLe,T9t=Ku,ib={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=N3(n,this.path);r&&(r=Ku(r));var i=h1(n,{op:"remove",path:this.from}).removed;return h1(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=N3(n,this.from);return h1(n,{op:"add",path:this.path,value:Ku(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:AA(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},A9t={add:function(e,t,n){return BV(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:ib.move,copy:ib.copy,test:ib.test,_get:ib._get};function N3(e,t){if(t=="")return e;var n={op:"_get",path:t};return h1(e,n),n.value}function h1(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):D3(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=N3(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=AA(e,t.value),o.test===!1)throw new Ci("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new Ci("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=Ku(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=D3;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=_Le(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!BV(h))throw new Ci("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);BV(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new Ci("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=A9t[t.op].call(t,l,h,e);if(o.test===!1)throw new Ci("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=f){var o=ib[t.op].call(t,l,h,e);if(o.test===!1)throw new Ci("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new Ci("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function z4(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new Ci("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=Ku(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=h1(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function C9t(e,t,n){var r=h1(e,t);if(r.test===!1)throw new Ci("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function D3(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new Ci("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(ib[e.op]){if(typeof e.path!="string")throw new Ci("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Ci('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Ci("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Ci("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&jV(e.value))throw new Ci("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new Ci("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new Ci("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=wLe([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new Ci("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Ci("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function wLe(e,t,n){try{if(!Array.isArray(e))throw new Ci("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)z4(Ku(t),Ku(e),n||!0);else{n=n||D3;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof Ci)return i;throw i}}function AA(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!AA(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!AA(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const I9t=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:Ci,_areEquals:AA,applyOperation:h1,applyPatch:z4,applyReducer:C9t,deepClone:T9t,getValueByPointer:N3,validate:wLe,validator:D3},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var NQ=new WeakMap,O9t=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),P9t=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function k9t(e){return NQ.get(e)}function $9t(e,t){return e.observers.get(t)}function R9t(e,t){e.observers.delete(t.callback)}function N9t(e,t){t.unobserve()}function D9t(e,t){var n=[],r,i=k9t(e);if(!i)i=new O9t(e),NQ.set(e,i);else{var s=$9t(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=Ku(e),t){r.callback=t,r.next=null;var o=function(){zV(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){zV(r),clearTimeout(r.next),R9t(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new P9t(t,r)),r}function zV(e,t){t===void 0&&(t=!1);var n=NQ.get(e.object);DQ(n.value,e.object,e.patches,"",t),e.patches.length&&z4(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function DQ(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=FV(t),o=FV(e),a=!1,u=o.length-1;u>=0;u--){var l=o[u],c=e[l];if(MV(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?DQ(c,f,n,r+"/"+by(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+by(l),value:Ku(c)}),n.push({op:"replace",path:r+"/"+by(l),value:Ku(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+by(l),value:Ku(c)}),n.push({op:"remove",path:r+"/"+by(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var u=0;u<s.length;u++){var l=s[u];!MV(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+by(l),value:Ku(t[l])})}}}function L9t(e,t,n){n===void 0&&(n=!1);var r=[];return DQ(e,t,r,"",n),r}const M9t=Object.freeze(Object.defineProperty({__proto__:null,compare:L9t,generate:zV,observe:D9t,unobserve:N9t},Symbol.toStringTag,{value:"Module"}));Object.assign({},I9t,M9t,{JsonPatchError:bLe,deepClone:Ku,escapePathComponent:by,unescapePathComponent:_Le});var F9t=/("(?:[^\\"]|\\.)*")|[:,]/g,B9t=function(t,n){var r,i,s;return n=n||{},r=JSON.stringify([1],void 0,n.indent===void 0?2:n.indent).slice(2,-3),i=r===""?1/0:n.maxLength===void 0?80:n.maxLength,s=n.replacer,function o(a,u,l){var c,f,d,h,p,m,g,y,v,_,b,E;if(a&&typeof a.toJSON=="function"&&(a=a.toJSON()),b=JSON.stringify(a,s),b===void 0)return b;if(g=i-u.length-l,b.length<=g&&(v=b.replace(F9t,function(w,x){return x||w+" "}),v.length<=g))return v;if(s!=null&&(a=JSON.parse(b),s=void 0),typeof a=="object"&&a!==null){if(y=u+r,d=[],f=0,Array.isArray(a))for(_="[",c="]",g=a.length;f<g;f++)d.push(o(a[f],y,f===g-1?0:1)||"null");else for(_="{",c="}",m=Object.keys(a),g=m.length;f<g;f++)h=m[f],p=JSON.stringify(h)+": ",E=o(a[h],y,p.length+(f===g-1?0:1)),E!==void 0&&d.push(p+E);if(d.length>0)return[_,r+d.join(`,
`+y),c].join(`
`+u)}return b}(t,"",0)};const tj=pl(B9t);function Ou(e,t,n){return e.fields=t||[],e.fname=n,e}function Ni(e){return e==null?null:e.fname}function Go(e){return e==null?null:e.fields}function ELe(e){return e.length===1?j9t(e[0]):z9t(e)}const j9t=e=>function(t){return t[e]},z9t=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function Te(e){throw Error(e)}function oh(e){const t=[],n=e.length;let r=null,i=0,s="",o,a,u;e=e+"";function l(){t.push(s+e.substring(o,a)),s="",o=a+1}for(o=a=0;a<n;++a)if(u=e[a],u==="\\")s+=e.substring(o,a++),o=a;else if(u===r)l(),r=null,i=-1;else{if(r)continue;o===i&&u==='"'||o===i&&u==="'"?(o=a+1,r=u):u==="."&&!i?a>o?l():o=a+1:u==="["?(a>o&&l(),i=o=a+1):u==="]"&&(i||Te("Access path missing open bracket: "+e),i>0&&l(),i=0,o=a+1)}return i&&Te("Access path missing closing bracket: "+e),r&&Te("Access path missing closing quote: "+e),a>o&&(a++,l()),t}function tc(e,t,n){const r=oh(e);return e=r.length===1?r[0]:e,Ou((n&&n.get||ELe)(r),[e],t||e)}const yI=tc("id"),ta=Ou(e=>e,[],"identity"),Bm=Ou(()=>0,[],"zero"),KE=Ou(()=>1,[],"one"),nc=Ou(()=>!0,[],"true"),Em=Ou(()=>!1,[],"false");function U9t(e,t,n){const r=[t].concat([].slice.call(n));console[e].apply(console,r)}const xLe=0,LQ=1,MQ=2,SLe=3,TLe=4;function FQ(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:U9t,r=e||xLe;return{level(i){return arguments.length?(r=+i,this):r},error(){return r>=LQ&&n(t||"error","ERROR",arguments),this},warn(){return r>=MQ&&n(t||"warn","WARN",arguments),this},info(){return r>=SLe&&n(t||"log","INFO",arguments),this},debug(){return r>=TLe&&n(t||"log","DEBUG",arguments),this}}}var Ie=Array.isArray;function st(e){return e===Object(e)}const Fme=e=>e!=="__proto__";function XE(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((r,i)=>{for(const s in i)if(s==="signals")r.signals=V9t(r.signals,i.signals);else{const o=s==="legend"?{layout:1}:s==="style"?!0:null;QE(r,s,i[s],o)}return r},{})}function QE(e,t,n,r){if(!Fme(t))return;let i,s;if(st(n)&&!Ie(n)){s=st(e[t])?e[t]:e[t]={};for(i in n)r&&(r===!0||r[i])?QE(s,i,n[i]):Fme(i)&&(s[i]=n[i])}else e[t]=n}function V9t(e,t){if(e==null)return t;const n={},r=[];function i(s){n[s.name]||(n[s.name]=1,r.push(s))}return t.forEach(i),e.forEach(i),r}function Un(e){return e[e.length-1]}function Ho(e){return e==null||e===""?null:+e}const ALe=e=>t=>e*Math.exp(t),CLe=e=>t=>Math.log(e*t),ILe=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),OLe=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,L3=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function U4(e,t,n,r){const i=n(e[0]),s=n(Un(e)),o=(s-i)*t;return[r(i-o),r(s-o)]}function PLe(e,t){return U4(e,t,Ho,ta)}function kLe(e,t){var n=Math.sign(e[0]);return U4(e,t,CLe(n),ALe(n))}function $Le(e,t,n){return U4(e,t,L3(n),L3(1/n))}function RLe(e,t,n){return U4(e,t,ILe(n),OLe(n))}function V4(e,t,n,r,i){const s=r(e[0]),o=r(Un(e)),a=t!=null?r(t):(s+o)/2;return[i(a+(s-a)*n),i(a+(o-a)*n)]}function BQ(e,t,n){return V4(e,t,n,Ho,ta)}function jQ(e,t,n){const r=Math.sign(e[0]);return V4(e,t,n,CLe(r),ALe(r))}function M3(e,t,n,r){return V4(e,t,n,L3(r),L3(1/r))}function zQ(e,t,n,r){return V4(e,t,n,ILe(r),OLe(r))}function NLe(e){return 1+~~(new Date(e).getMonth()/3)}function DLe(e){return 1+~~(new Date(e).getUTCMonth()/3)}function nt(e){return e!=null?Ie(e)?e:[e]:[]}function LLe(e,t,n){let r=e[0],i=e[1],s;return i<r&&(s=i,i=r,r=s),s=i-r,s>=n-t?[t,n]:[r=Math.min(Math.max(r,t),n-s),r+s]}function pn(e){return typeof e=="function"}const H9t="descending";function UQ(e,t,n){n=n||{},t=nt(t)||[];const r=[],i=[],s={},o=n.comparator||q9t;return nt(e).forEach((a,u)=>{a!=null&&(r.push(t[u]===H9t?-1:1),i.push(a=pn(a)?a:tc(a,null,n)),(Go(a)||[]).forEach(l=>s[l]=1))}),i.length===0?null:Ou(o(i,r),Object.keys(s))}const H4=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),q9t=(e,t)=>e.length===1?W9t(e[0],t[0]):G9t(e,t,e.length),W9t=(e,t)=>function(n,r){return H4(e(n),e(r))*t},G9t=(e,t,n)=>(t.push(0),function(r,i){let s,o=0,a=-1;for(;o===0&&++a<n;)s=e[a],o=H4(s(r),s(i));return o*t[a]});function na(e){return pn(e)?e:()=>e}function VQ(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(t(r),n=null),e)}}function hn(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function Wd(e,t){let n=0,r,i,s,o;if(e&&(r=e.length))if(t==null){for(i=e[n];n<r&&(i==null||i!==i);i=e[++n]);for(s=o=i;n<r;++n)i=e[n],i!=null&&(i<s&&(s=i),i>o&&(o=i))}else{for(i=t(e[n]);n<r&&(i==null||i!==i);i=t(e[++n]));for(s=o=i;n<r;++n)i=t(e[n]),i!=null&&(i<s&&(s=i),i>o&&(o=i))}return[s,o]}function MLe(e,t){const n=e.length;let r=-1,i,s,o,a,u;if(t==null){for(;++r<n;)if(s=e[r],s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=e[r],s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}else{for(;++r<n;)if(s=t(e[r],r,e),s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=t(e[r],r,e),s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}return[a,u]}const Y9t=Object.prototype.hasOwnProperty;function Nt(e,t){return Y9t.call(e,t)}const $P={};function JE(e){let t={},n;function r(s){return Nt(t,s)&&t[s]!==$P}const i={size:0,empty:0,object:t,has:r,get(s){return r(s)?t[s]:void 0},set(s,o){return r(s)||(++i.size,t[s]===$P&&--i.empty),t[s]=o,this},delete(s){return r(s)&&(--i.size,++i.empty,t[s]=$P),this},clear(){i.size=i.empty=0,i.object=t={}},test(s){return arguments.length?(n=s,i):n},clean(){const s={};let o=0;for(const a in t){const u=t[a];u!==$P&&(!n||!n(u))&&(s[a]=u,++o)}i.size=o,i.empty=0,i.object=t=s}};return e&&Object.keys(e).forEach(s=>{i.set(s,e[s])}),i}function FLe(e,t,n,r,i,s){if(!n&&n!==0)return s;const o=+n;let a=e[0],u=Un(e),l;u<a&&(l=a,a=u,u=l),l=Math.abs(t-a);const c=Math.abs(u-t);return l<c&&l<=o?r:c<=o?i:s}function We(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),hn(r,n)}function sb(e,t,n,r){let i=t[0],s=t[t.length-1],o;return i>s&&(o=i,i=s,s=o),n=n===void 0||n,r=r===void 0||r,(n?i<=e:i<e)&&(r?e<=s:e<s)}function L0(e){return typeof e=="boolean"}function Ag(e){return Object.prototype.toString.call(e)==="[object Date]"}function BLe(e){return e&&pn(e[Symbol.iterator])}function Jn(e){return typeof e=="number"}function jLe(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function rt(e){return typeof e=="string"}function HQ(e,t,n){e&&(e=t?nt(e).map(a=>a.replace(/\\(.)/g,"$1")):nt(e));const r=e&&e.length,i=n&&n.get||ELe,s=a=>i(t?[a]:oh(a));let o;if(!r)o=function(){return""};else if(r===1){const a=s(e[0]);o=function(u){return""+a(u)}}else{const a=e.map(s);o=function(u){let l=""+a[0](u),c=0;for(;++c<r;)l+="|"+a[c](u);return l}}return Ou(o,e,"key")}function zLe(e,t){const n=e[0],r=Un(e),i=+t;return i?i===1?r:n+i*(r-n):n}const K9t=1e4;function ULe(e){e=+e||K9t;let t,n,r;const i=()=>{t={},n={},r=0},s=(o,a)=>(++r>e&&(n=t,t={},r=1),t[o]=a);return i(),{clear:i,has:o=>Nt(t,o)||Nt(n,o),get:o=>Nt(t,o)?t[o]:Nt(n,o)?s(o,n[o]):void 0,set:(o,a)=>Nt(t,o)?t[o]=a:s(o,a)}}function VLe(e,t,n,r){const i=t.length,s=n.length;if(!s)return t;if(!i)return n;const o=r||new t.constructor(i+s);let a=0,u=0,l=0;for(;a<i&&u<s;++l)o[l]=e(t[a],n[u])>0?n[u++]:t[a++];for(;a<i;++a,++l)o[l]=t[a];for(;u<s;++u,++l)o[l]=n[u];return o}function eT(e,t){let n="";for(;--t>=0;)n+=e;return n}function HLe(e,t,n,r){const i=n||" ",s=e+"",o=t-s.length;return o<=0?s:r==="left"?eT(i,o)+s:r==="center"?eT(i,~~(o/2))+s+eT(i,Math.ceil(o/2)):s+eT(i,o)}function vI(e){return e&&Un(e)-e[0]||0}function Xe(e){return Ie(e)?"["+e.map(Xe)+"]":st(e)||rt(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function qQ(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const X9t=e=>Jn(e)||Ag(e)?e:Date.parse(e);function WQ(e,t){return t=t||X9t,e==null||e===""?null:t(e)}function GQ(e){return e==null||e===""?null:e+""}function cf(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function qLe(e,t,n,r){const i=r??"",s=e+"",o=s.length,a=Math.max(0,t-i.length);return o<=t?s:n==="left"?i+s.slice(o-a):n==="center"?s.slice(0,Math.ceil(a/2))+i+s.slice(o-~~(a/2)):s.slice(0,a)+i}function Pm(e,t,n){if(e)if(t){const r=e.length;for(let i=0;i<r;++i){const s=t(e[i]);s&&n(s,i,e)}}else e.forEach(n)}function Q9t(e){return e}function J9t(e){if(e==null)return Q9t;var t,n,r=e.scale[0],i=e.scale[1],s=e.translate[0],o=e.translate[1];return function(a,u){u||(t=n=0);var l=2,c=a.length,f=new Array(c);for(f[0]=(t+=a[0])*r+s,f[1]=(n+=a[1])*i+o;l<c;)f[l]=a[l],++l;return f}}function Z9t(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function eBt(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return Bme(e,n)})}:Bme(e,t)}function Bme(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,s=WLe(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:s}:r==null?{type:"Feature",id:n,properties:i,geometry:s}:{type:"Feature",id:n,bbox:r,properties:i,geometry:s}}function WLe(e,t){var n=J9t(e.transform),r=e.arcs;function i(c,f){f.length&&f.pop();for(var d=r[c<0?~c:c],h=0,p=d.length;h<p;++h)f.push(n(d[h],h));c<0&&Z9t(f,p)}function s(c){return n(c)}function o(c){for(var f=[],d=0,h=c.length;d<h;++d)i(c[d],f);return f.length<2&&f.push(f[0]),f}function a(c){for(var f=o(c);f.length<4;)f.push(f[0]);return f}function u(c){return c.map(a)}function l(c){var f=c.type,d;switch(f){case"GeometryCollection":return{type:f,geometries:c.geometries.map(l)};case"Point":d=s(c.coordinates);break;case"MultiPoint":d=c.coordinates.map(s);break;case"LineString":d=o(c.arcs);break;case"MultiLineString":d=c.arcs.map(o);break;case"Polygon":d=u(c.arcs);break;case"MultiPolygon":d=c.arcs.map(u);break;default:return null}return{type:f,coordinates:d}}return l(t)}function tBt(e,t){var n={},r={},i={},s=[],o=-1;t.forEach(function(l,c){var f=e.arcs[l<0?~l:l],d;f.length<3&&!f[1][0]&&!f[1][1]&&(d=t[++o],t[o]=l,t[c]=d)}),t.forEach(function(l){var c=a(l),f=c[0],d=c[1],h,p;if(h=i[f])if(delete i[h.end],h.push(l),h.end=d,p=r[d]){delete r[p.start];var m=p===h?h:h.concat(p);r[m.start=h.start]=i[m.end=p.end]=m}else r[h.start]=i[h.end]=h;else if(h=r[d])if(delete r[h.start],h.unshift(l),h.start=f,p=i[f]){delete i[p.end];var g=p===h?h:p.concat(h);r[g.start=p.start]=i[g.end=h.end]=g}else r[h.start]=i[h.end]=h;else h=[l],r[h.start=f]=i[h.end=d]=h});function a(l){var c=e.arcs[l<0?~l:l],f=c[0],d;return e.transform?(d=[0,0],c.forEach(function(h){d[0]+=h[0],d[1]+=h[1]})):d=c[c.length-1],l<0?[d,f]:[f,d]}function u(l,c){for(var f in l){var d=l[f];delete c[d.start],delete d.start,delete d.end,d.forEach(function(h){n[h<0?~h:h]=1}),s.push(d)}}return u(i,r),u(r,i),t.forEach(function(l){n[l<0?~l:l]||s.push([l])}),s}function nBt(e){return WLe(e,rBt.apply(this,arguments))}function rBt(e,t,n){var r,i,s;if(arguments.length>1)r=iBt(e,t,n);else for(i=0,r=new Array(s=e.arcs.length);i<s;++i)r[i]=i;return{type:"MultiLineString",arcs:tBt(e,r)}}function iBt(e,t,n){var r=[],i=[],s;function o(f){var d=f<0?~f:f;(i[d]||(i[d]=[])).push({i:f,g:s})}function a(f){f.forEach(o)}function u(f){f.forEach(a)}function l(f){f.forEach(u)}function c(f){switch(s=f,f.type){case"GeometryCollection":f.geometries.forEach(c);break;case"LineString":a(f.arcs);break;case"MultiLineString":case"Polygon":u(f.arcs);break;case"MultiPolygon":l(f.arcs);break}}return c(t),i.forEach(n==null?function(f){r.push(f[0].i)}:function(f){n(f[0].g,f[f.length-1].g)&&r.push(f[0].i)}),r}function Cg(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function sBt(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function _I(e){let t,n,r;e.length!==2?(t=Cg,n=(a,u)=>Cg(e(a),u),r=(a,u)=>e(a)-u):(t=e===Cg||e===sBt?e:oBt,n=e,r=e);function i(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<0?l=f+1:c=f}while(l<c)}return l}function s(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<=0?l=f+1:c=f}while(l<c)}return l}function o(a,u,l=0,c=a.length){const f=i(a,u,l,c-1);return f>l&&r(a[f-1],u)>-r(a[f],u)?f-1:f}return{left:i,center:o,right:s}}function oBt(){return 0}function GLe(e){return e===null?NaN:+e}function*aBt(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const YLe=_I(Cg),F3=YLe.right,uBt=YLe.left;_I(GLe).center;function lBt(e,t){let n=0,r,i=0,s=0;if(t===void 0)for(let o of e)o!=null&&(o=+o)>=o&&(r=o-i,i+=r/++n,s+=r*(o-i));else{let o=-1;for(let a of e)(a=t(a,++o,e))!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,s+=r*(a-i))}if(n>1)return s/(n-1)}function cBt(e,t){const n=lBt(e,t);return n&&Math.sqrt(n)}function fBt(e,t){return Array.from(t,n=>e[n])}function dBt(e=Cg){if(e===Cg)return KLe;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function KLe(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const hBt=Math.sqrt(50),pBt=Math.sqrt(10),mBt=Math.sqrt(2);function XLe(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=hBt?10:s>=pBt?5:s>=mBt?2:1;let a,u,l;return i<0?(l=Math.pow(10,-i)/o,a=Math.round(e*l),u=Math.round(t*l),a/l<e&&++a,u/l>t&&--u,l=-l):(l=Math.pow(10,i)*o,a=Math.round(e/l),u=Math.round(t/l),a*l<e&&++a,u*l>t&&--u),u<a&&.5<=n&&n<2?XLe(e,t,n*2):[a,u,l]}function jme(e,t,n){return t=+t,e=+e,n=+n,XLe(e,t,n)[2]}function CA(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?jme(t,e,n):jme(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function p1(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function UV(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function QLe(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?KLe:dBt(i);r>n;){if(r-n>600){const u=r-n+1,l=t-n+1,c=Math.log(u),f=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*f*(u-f)/u)*(l-u/2<0?-1:1),h=Math.max(n,Math.floor(t-l*f/u+d)),p=Math.min(r,Math.floor(t+(u-l)*f/u+d));QLe(e,t,h,p,i)}const s=e[t];let o=n,a=r;for(fS(e,n,t),i(e[r],s)>0&&fS(e,n,r);o<a;){for(fS(e,o,a),++o,--a;i(e[o],s)<0;)++o;for(;i(e[a],s)>0;)--a}i(e[n],s)===0?fS(e,n,a):(++a,fS(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}return e}function fS(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function VV(e,t,n){if(e=Float64Array.from(aBt(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return UV(e);if(t>=1)return p1(e);var r,i=(r-1)*t,s=Math.floor(i),o=p1(QLe(e,s).subarray(0,s+1)),a=UV(e.subarray(s+1));return o+(a-o)*(i-s)}}function gBt(e,t,n=GLe){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),o=+n(e[s],s,e),a=+n(e[s+1],s+1,e);return o+(a-o)*(i-s)}}function yBt(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(s=+s)>=s&&(++n,r+=s)}if(n)return r/n}function JLe(e,t){return VV(e,.5,t)}function Nv(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function ZLe(e,t){let n=0;if(t===void 0)for(let r of e)(r=+r)&&(n+=r);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&(n+=i)}return n}function vBt(e,...t){e=new gD(e),t=t.map(_Bt);e:for(const n of e)for(const r of t)if(!r.has(n)){e.delete(n);continue e}return e}function _Bt(e){return e instanceof gD?e:new gD(e)}function bBt(...e){const t=new gD;for(const n of e)for(const r of n)t.add(r);return t}const go="year",_u="quarter",Yo="month",ys="week",bu="date",Vo="day",Gd="dayofyear",ul="hours",ll="minutes",rc="seconds",ff="milliseconds",YQ=[go,_u,Yo,ys,bu,Vo,Gd,ul,ll,rc,ff],nj=YQ.reduce((e,t,n)=>(e[t]=1+n,e),{});function KQ(e){const t=nt(e).slice(),n={};return t.length||Te("Missing time unit."),t.forEach(i=>{Nt(nj,i)?n[i]=1:Te(`Invalid time unit: ${i}.`)}),(n[ys]||n[Vo]?1:0)+(n[_u]||n[Yo]||n[bu]?1:0)+(n[Gd]?1:0)>1&&Te(`Incompatible time units: ${e}`),t.sort((i,s)=>nj[i]-nj[s]),t}const wBt={[go]:"%Y ",[_u]:"Q%q ",[Yo]:"%b ",[bu]:"%d ",[ys]:"W%U ",[Vo]:"%a ",[Gd]:"%j ",[ul]:"%H:00",[ll]:"00:%M",[rc]:":%S",[ff]:".%L",[`${go}-${Yo}`]:"%Y-%m ",[`${go}-${Yo}-${bu}`]:"%Y-%m-%d ",[`${ul}-${ll}`]:"%H:%M"};function eMe(e,t){const n=hn({},wBt,t),r=KQ(e),i=r.length;let s="",o=0,a,u;for(o=0;o<i;)for(a=r.length;a>o;--a)if(u=r.slice(o,a).join("-"),n[u]!=null){s+=n[u],o=a;break}return s.trim()}const $y=new Date;function XQ(e){return $y.setFullYear(e),$y.setMonth(0),$y.setDate(1),$y.setHours(0,0,0,0),$y}function tMe(e){return rMe(new Date(e))}function nMe(e){return HV(new Date(e))}function rMe(e){return up.count(XQ(e.getFullYear())-1,e)}function HV(e){return NE.count(XQ(e.getFullYear())-1,e)}function qV(e){return XQ(e).getDay()}function EBt(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(-1,t,n,r,i,s,o);return a.setFullYear(e),a}return new Date(e,t,n,r,i,s,o)}function iMe(e){return oMe(new Date(e))}function sMe(e){return WV(new Date(e))}function oMe(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return wg.count(t-1,e)}function WV(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return DE.count(t-1,e)}function GV(e){return $y.setTime(Date.UTC(e,0,1)),$y.getUTCDay()}function xBt(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(Date.UTC(-1,t,n,r,i,s,o));return a.setUTCFullYear(n.y),a}return new Date(Date.UTC(e,t,n,r,i,s,o))}function aMe(e,t,n,r,i){const s=t||1,o=Un(e),a=(y,v,_)=>(_=_||y,SBt(n[_],r[_],y===o&&s,v)),u=new Date,l=cf(e),c=l[go]?a(go):na(2012),f=l[Yo]?a(Yo):l[_u]?a(_u):Bm,d=l[ys]&&l[Vo]?a(Vo,1,ys+Vo):l[ys]?a(ys,1):l[Vo]?a(Vo,1):l[bu]?a(bu,1):l[Gd]?a(Gd,1):KE,h=l[ul]?a(ul):Bm,p=l[ll]?a(ll):Bm,m=l[rc]?a(rc):Bm,g=l[ff]?a(ff):Bm;return function(y){u.setTime(+y);const v=c(u);return i(v,f(u),d(u,v),h(u),p(u),m(u),g(u))}}function SBt(e,t,n,r){const i=n<=1?e:r?(s,o)=>r+n*Math.floor((e(s,o)-r)/n):(s,o)=>n*Math.floor(e(s,o)/n);return t?(s,o)=>t(i(s,o),o):i}function Mw(e,t,n){return t+e*7-(n+6)%7}const TBt={[go]:e=>e.getFullYear(),[_u]:e=>Math.floor(e.getMonth()/3),[Yo]:e=>e.getMonth(),[bu]:e=>e.getDate(),[ul]:e=>e.getHours(),[ll]:e=>e.getMinutes(),[rc]:e=>e.getSeconds(),[ff]:e=>e.getMilliseconds(),[Gd]:e=>rMe(e),[ys]:e=>HV(e),[ys+Vo]:(e,t)=>Mw(HV(e),e.getDay(),qV(t)),[Vo]:(e,t)=>Mw(1,e.getDay(),qV(t))},ABt={[_u]:e=>3*e,[ys]:(e,t)=>Mw(e,0,qV(t))};function uMe(e,t){return aMe(e,t||1,TBt,ABt,EBt)}const CBt={[go]:e=>e.getUTCFullYear(),[_u]:e=>Math.floor(e.getUTCMonth()/3),[Yo]:e=>e.getUTCMonth(),[bu]:e=>e.getUTCDate(),[ul]:e=>e.getUTCHours(),[ll]:e=>e.getUTCMinutes(),[rc]:e=>e.getUTCSeconds(),[ff]:e=>e.getUTCMilliseconds(),[Gd]:e=>oMe(e),[ys]:e=>WV(e),[Vo]:(e,t)=>Mw(1,e.getUTCDay(),GV(t)),[ys+Vo]:(e,t)=>Mw(WV(e),e.getUTCDay(),GV(t))},IBt={[_u]:e=>3*e,[ys]:(e,t)=>Mw(e,0,GV(t))};function lMe(e,t){return aMe(e,t||1,CBt,IBt,xBt)}const OBt={[go]:Fd,[_u]:fA.every(3),[Yo]:fA,[ys]:NE,[bu]:up,[Vo]:up,[Gd]:up,[ul]:e4,[ll]:J6,[rc]:Xh,[ff]:yw},PBt={[go]:Bd,[_u]:dA.every(3),[Yo]:dA,[ys]:DE,[bu]:wg,[Vo]:wg,[Gd]:wg,[ul]:t4,[ll]:Z6,[rc]:Xh,[ff]:yw};function ZE(e){return OBt[e]}function ex(e){return PBt[e]}function cMe(e,t,n){return e?e.offset(t,n):void 0}function fMe(e,t,n){return cMe(ZE(e),t,n)}function dMe(e,t,n){return cMe(ex(e),t,n)}function hMe(e,t,n,r){return e?e.range(t,n,r):void 0}function pMe(e,t,n,r){return hMe(ZE(e),t,n,r)}function mMe(e,t,n,r){return hMe(ex(e),t,n,r)}const tT=1e3,nT=tT*60,rT=nT*60,q4=rT*24,kBt=q4*7,zme=q4*30,YV=q4*365,gMe=[go,Yo,bu,ul,ll,rc,ff],iT=gMe.slice(0,-1),sT=iT.slice(0,-1),oT=sT.slice(0,-1),$Bt=oT.slice(0,-1),RBt=[go,ys],Ume=[go,Yo],yMe=[go],dS=[[iT,1,tT],[iT,5,5*tT],[iT,15,15*tT],[iT,30,30*tT],[sT,1,nT],[sT,5,5*nT],[sT,15,15*nT],[sT,30,30*nT],[oT,1,rT],[oT,3,3*rT],[oT,6,6*rT],[oT,12,12*rT],[$Bt,1,q4],[RBt,1,kBt],[Ume,1,zme],[Ume,3,3*zme],[yMe,1,YV]];function vMe(e){const t=e.extent,n=e.maxbins||40,r=Math.abs(vI(t))/n;let i=_I(a=>a[2]).right(dS,r),s,o;return i===dS.length?(s=yMe,o=CA(t[0]/YV,t[1]/YV,n)):i?(i=dS[r/dS[i-1][2]<dS[i][2]/r?i-1:i],s=i[0],o=i[1]):(s=gMe,o=Math.max(CA(t[0],t[1],n),1)),{units:s,step:o}}function aT(e){const t={};return n=>t[n]||(t[n]=e(n))}function NBt(e,t){return n=>{const r=e(n),i=r.indexOf(t);if(i<0)return r;let s=DBt(r,i);const o=s<r.length?r.slice(s):"";for(;--s>i;)if(r[s]!=="0"){++s;break}return r.slice(0,s)+o}}function DBt(e,t){let n=e.lastIndexOf("e"),r;if(n>0)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),r>=48&&r<=57)return n+1}function _Me(e){const t=aT(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(r){const i=D1(r||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return NBt(t(i),t(".1f")(1)[1])}else return t(i)},formatSpan(r,i,s,o){o=D1(o??",f");const a=CA(r,i,s),u=Math.max(Math.abs(r),Math.abs(i));let l;if(o.precision==null)switch(o.type){case"s":return isNaN(l=EPe(a,u))||(o.precision=l),n(o,u);case"":case"e":case"g":case"p":case"r":{isNaN(l=xPe(a,u))||(o.precision=l-(o.type==="e"));break}case"f":case"%":{isNaN(l=wPe(a))||(o.precision=l-(o.type==="%")*2);break}}return t(o)}}}let KV;bMe();function bMe(){return KV=_Me({format:$E,formatPrefix:KY})}function wMe(e){return _Me(bPe(e))}function B3(e){return arguments.length?KV=wMe(e):KV}function Vme(e,t,n){n=n||{},st(n)||Te(`Invalid time multi-format specifier: ${n}`);const r=t(rc),i=t(ll),s=t(ul),o=t(bu),a=t(ys),u=t(Yo),l=t(_u),c=t(go),f=e(n[ff]||".%L"),d=e(n[rc]||":%S"),h=e(n[ll]||"%I:%M"),p=e(n[ul]||"%I %p"),m=e(n[bu]||n[Vo]||"%a %d"),g=e(n[ys]||"%b %d"),y=e(n[Yo]||"%B"),v=e(n[_u]||"%B"),_=e(n[go]||"%Y");return b=>(r(b)<b?f:i(b)<b?d:s(b)<b?h:o(b)<b?p:u(b)<b?a(b)<b?m:g:c(b)<b?l(b)<b?y:v:_)(b)}function EMe(e){const t=aT(e.format),n=aT(e.utcFormat);return{timeFormat:r=>rt(r)?t(r):Vme(t,ZE,r),utcFormat:r=>rt(r)?n(r):Vme(n,ex,r),timeParse:aT(e.parse),utcParse:aT(e.utcParse)}}let XV;xMe();function xMe(){return XV=EMe({format:tK,parse:JPe,utcFormat:n4,utcParse:ZPe})}function SMe(e){return EMe(GPe(e))}function IA(e){return arguments.length?XV=SMe(e):XV}const QV=(e,t)=>hn({},e,t);function TMe(e,t){const n=e?wMe(e):B3(),r=t?SMe(t):IA();return QV(n,r)}function QQ(e,t){const n=arguments.length;return n&&n!==2&&Te("defaultLocale expects either zero or two arguments."),n?QV(B3(e),IA(t)):QV(B3(),IA())}function LBt(){return bMe(),xMe(),QQ()}const MBt=/^(data:|([A-Za-z]+:)?\/\/)/,FBt=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,BBt=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,Hme="file://";function jBt(e,t){return n=>({options:n||{},sanitize:UBt,load:zBt,fileAccess:!!t,file:VBt(t),http:qBt(e)})}async function zBt(e,t){const n=await this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)}async function UBt(e,t){t=hn({},this.options,t);const n=this.fileAccess,r={href:null};let i,s,o;const a=FBt.test(e.replace(BBt,""));(e==null||typeof e!="string"||!a)&&Te("Sanitize failure, invalid URI: "+Xe(e));const u=MBt.test(e);return(o=t.baseURL)&&!u&&(!e.startsWith("/")&&!o.endsWith("/")&&(e="/"+e),e=o+e),s=(i=e.startsWith(Hme))||t.mode==="file"||t.mode!=="http"&&!u&&n,i?e=e.slice(Hme.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),s=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!s}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r}function VBt(e){return e?t=>new Promise((n,r)=>{e.readFile(t,(i,s)=>{i?r(i):n(s)})}):HBt}async function HBt(){Te("No file system access.")}function qBt(e){return e?async function(t,n){const r=hn({},this.options.http,n),i=n&&n.response,s=await e(t,r);return s.ok?pn(s[i])?s[i]():s.text():Te(s.status+""+s.statusText)}:WBt}async function WBt(){Te("No HTTP fetch method available.")}const GBt=e=>e!=null&&e===e,YBt=e=>e==="true"||e==="false"||e===!0||e===!1,KBt=e=>!Number.isNaN(Date.parse(e)),AMe=e=>!Number.isNaN(+e)&&!(e instanceof Date),XBt=e=>AMe(e)&&Number.isInteger(+e),JV={boolean:qQ,integer:Ho,number:Ho,date:WQ,string:GQ,unknown:ta},RP=[YBt,XBt,AMe,KBt],QBt=["boolean","integer","number","date"];function CMe(e,t){if(!e||!e.length)return"unknown";const n=e.length,r=RP.length,i=RP.map((s,o)=>o+1);for(let s=0,o=0,a,u;s<n;++s)for(u=t?e[s][t]:e[s],a=0;a<r;++a)if(i[a]&&GBt(u)&&!RP[a](u)&&(i[a]=0,++o,o===RP.length))return"string";return QBt[i.reduce((s,o)=>s===0?o:s,0)-1]}function IMe(e,t){return t.reduce((n,r)=>(n[r]=CMe(e,r),n),{})}function qme(e){const t=function(n,r){const i={delimiter:e};return JQ(n,r?hn(r,i):i)};return t.responseType="text",t}function JQ(e,t){return t.header&&(e=t.header.map(Xe).join(t.delimiter)+`
`+e),yPe(t.delimiter).parse(e+"")}JQ.responseType="text";function JBt(e){return typeof Buffer=="function"&&pn(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function ZQ(e,t){const n=t&&t.property?tc(t.property):ta;return st(e)&&!JBt(e)?ZBt(n(e),t):n(JSON.parse(e))}ZQ.responseType="json";function ZBt(e,t){return!Ie(e)&&BLe(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const ejt={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function OMe(e,t){let n,r,i,s;return e=ZQ(e,t),t&&t.feature?(n=eBt,i=t.feature):t&&t.mesh?(n=nBt,i=t.mesh,s=ejt[t.filter]):Te("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,s):Te("Invalid TopoJSON object: "+i),r&&r.features||[r]}OMe.responseType="json";const v$={dsv:JQ,csv:qme(","),tsv:qme("	"),json:ZQ,topojson:OMe};function eJ(e,t){return arguments.length>1?(v$[e]=t,this):Nt(v$,e)?v$[e]:null}function PMe(e){const t=eJ(e);return t&&t.responseType||"text"}function kMe(e,t,n,r){t=t||{};const i=eJ(t.type||"json");return i||Te("Unknown data format type: "+t.type),e=i(e,t),t.parse&&tjt(e,t.parse,n,r),Nt(e,"columns")&&delete e.columns,e}function tjt(e,t,n,r){if(!e.length)return;const i=IA();n=n||i.timeParse,r=r||i.utcParse;let s=e.columns||Object.keys(e[0]),o,a,u,l,c,f;t==="auto"&&(t=IMe(e,s)),s=Object.keys(t);const d=s.map(h=>{const p=t[h];let m,g;if(p&&(p.startsWith("date:")||p.startsWith("utc:")))return m=p.split(/:(.+)?/,2),g=m[1],(g[0]==="'"&&g[g.length-1]==="'"||g[0]==='"'&&g[g.length-1]==='"')&&(g=g.slice(1,-1)),(m[0]==="utc"?r:n)(g);if(!JV[p])throw Error("Illegal format pattern: "+h+":"+p);return JV[p]});for(u=0,c=e.length,f=s.length;u<c;++u)for(o=e[u],l=0;l<f;++l)a=s[l],o[a]=d[l](o[a])}const W4=jBt(typeof fetch<"u"&&fetch,null);function G4(e){const t=e||ta,n=[],r={};return n.add=i=>{const s=t(i);return r[s]||(r[s]=1,n.push(i)),n},n.remove=i=>{const s=t(i);if(r[s]){r[s]=0;const o=n.indexOf(i);o>=0&&n.splice(o,1)}return n},n}async function _$(e,t){try{await t(e)}catch(n){e.error(n)}}const $Me=Symbol("vega_id");let njt=1;function Y4(e){return!!(e&&kt(e))}function kt(e){return e[$Me]}function RMe(e,t){return e[$Me]=t,e}function dr(e){const t=e===Object(e)?e:{data:e};return kt(t)?t:RMe(t,njt++)}function tJ(e){return K4(e,dr({}))}function K4(e,t){for(const n in e)t[n]=e[n];return t}function NMe(e,t){return RMe(t,kt(e))}function Dv(e,t){return e?t?(n,r)=>e(n,r)||kt(t(n))-kt(t(r)):(n,r)=>e(n,r)||kt(n)-kt(r):null}function DMe(e){return e&&e.constructor===Lv}function Lv(){const e=[],t=[],n=[],r=[],i=[];let s=null,o=!1;return{constructor:Lv,insert(a){const u=nt(a),l=u.length;for(let c=0;c<l;++c)e.push(u[c]);return this},remove(a){const u=pn(a)?r:t,l=nt(a),c=l.length;for(let f=0;f<c;++f)u.push(l[f]);return this},modify(a,u,l){const c={field:u,value:na(l)};return pn(a)?(c.filter=a,i.push(c)):(c.tuple=a,n.push(c)),this},encode(a,u){return pn(a)?i.push({filter:a,field:u}):n.push({tuple:a,field:u}),this},clean(a){return s=a,this},reflow(){return o=!0,this},pulse(a,u){const l={},c={};let f,d,h,p,m,g;for(f=0,d=u.length;f<d;++f)l[kt(u[f])]=1;for(f=0,d=t.length;f<d;++f)m=t[f],l[kt(m)]=-1;for(f=0,d=r.length;f<d;++f)p=r[f],u.forEach(v=>{p(v)&&(l[kt(v)]=-1)});for(f=0,d=e.length;f<d;++f)m=e[f],g=kt(m),l[g]?l[g]=1:a.add.push(dr(e[f]));for(f=0,d=u.length;f<d;++f)m=u[f],l[kt(m)]<0&&a.rem.push(m);function y(v,_,b){b?v[_]=b(v):a.encode=_,o||(c[kt(v)]=v)}for(f=0,d=n.length;f<d;++f)h=n[f],m=h.tuple,p=h.field,g=l[kt(m)],g>0&&(y(m,p,h.value),a.modifies(p));for(f=0,d=i.length;f<d;++f)h=i[f],p=h.filter,u.forEach(v=>{p(v)&&l[kt(v)]>0&&y(v,h.field,h.value)}),a.modifies(h.field);if(o)a.mod=t.length||r.length?u.filter(v=>l[kt(v)]>0):u.slice();else for(g in c)a.mod.push(c[g]);return(s||s==null&&(t.length||r.length))&&a.clean(!0),a}}}const b$="_:mod:_";function X4(){Object.defineProperty(this,b$,{writable:!0,value:{}})}X4.prototype={set(e,t,n,r){const i=this,s=i[e],o=i[b$];return t!=null&&t>=0?(s[t]!==n||r)&&(s[t]=n,o[t+":"+e]=-1,o[e]=-1):(s!==n||r)&&(i[e]=n,o[e]=Ie(n)?1+n.length:-1),i},modified(e,t){const n=this[b$];if(arguments.length){if(Ie(e)){for(let r=0;r<e.length;++r)if(n[e[r]])return!0;return!1}}else{for(const r in n)if(n[r])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[b$]={},this}};let rjt=0;const ijt="pulse",sjt=new X4,ojt=1,ajt=2;function Dr(e,t,n,r){this.id=++rjt,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function Wme(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}Dr.prototype={targets(){return this._targets||(this._targets=G4(yI))},set(e){return this.value!==e?(this.value=e,1):0},skip:Wme(ojt),modified:Wme(ajt),parameters(e,t,n){t=t!==!1;const r=this._argval=this._argval||new X4,i=this._argops=this._argops||[],s=[];let o,a,u,l;const c=(f,d,h)=>{h instanceof Dr?(h!==this&&(t&&h.targets().add(this),s.push(h)),i.push({op:h,name:f,index:d})):r.set(f,d,h)};for(o in e)if(a=e[o],o===ijt)nt(a).forEach(f=>{f instanceof Dr?f!==this&&(f.targets().add(this),s.push(f)):Te("Pulse parameters must be operator instances.")}),this.source=a;else if(Ie(a))for(r.set(o,-1,Array(u=a.length)),l=0;l<u;++l)c(o,l,a[l]);else c(o,-1,a);return this.marshall().clear(),n&&(i.initonly=!0),s},marshall(e){const t=this._argval||sjt,n=this._argops;let r,i,s,o;if(n){const a=n.length;for(i=0;i<a;++i)r=n[i],s=r.op,o=s.modified()&&s.stamp===e,t.set(r.name,r.index,s.value,o);if(n.initonly){for(i=0;i<a;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function ujt(e,t,n,r){let i=1,s;return e instanceof Dr?s=e:e&&e.prototype instanceof Dr?s=new e:pn(e)?s=new Dr(null,e):(i=0,s=new Dr(e,t)),this.rank(s),i&&(r=n,n=t),n&&this.connect(s,s.parameters(n,r)),this.touch(s),s}function ljt(e,t){const n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank){this.rerank(e);return}}let cjt=0;function Q4(e,t,n){this.id=++cjt,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function xm(e,t,n){return new Q4(e,t,n)}Q4.prototype={_filter:nc,_apply:ta,targets(){return this._targets||(this._targets=G4(yI))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=xm(e);return this.targets().add(t),t},apply(e){const t=xm(null,e);return this.targets().add(t),t},merge(){const e=xm();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=xm();return this.targets().add(xm(null,null,VQ(e,n=>{const r=n.dataflow;t.receive(n),r&&r.run&&r.run()}))),t},between(e,t){let n=!1;return e.targets().add(xm(null,null,()=>n=!0)),t.targets().add(xm(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=nc,this._targets=null}};function fjt(e,t,n,r){const i=this,s=xm(n,r),o=function(l){l.dataflow=i;try{s.receive(l)}catch(c){i.error(c)}finally{i.run()}};let a;typeof e=="string"&&typeof document<"u"?a=document.querySelectorAll(e):a=nt(e);const u=a.length;for(let l=0;l<u;++l)a[l].addEventListener(t,o);return s}function djt(e,t){const n=this.locale();return kMe(e,t,n.timeParse,n.utcParse)}function hjt(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function pjt(e,t){const n=this;let r=0,i;try{i=await n.loader().load(e,{context:"dataflow",response:PMe(t&&t.type)});try{i=n.parse(i,t)}catch(s){r=-2,n.warn("Data ingestion failed",e,s)}}catch(s){r=-1,n.warn("Loading failed",e,s)}return{data:i,status:r}}async function mjt(e,t,n){const r=this,i=r._pending||gjt(r);i.requests+=1;const s=await r.request(t,n);return r.pulse(e,r.changeset().remove(nc).insert(s.data||[])),i.done(),s}function gjt(e){let t;const n=new Promise(r=>t=r);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const yjt={skip:!0};function vjt(e,t,n,r,i){return(e instanceof Dr?bjt:_jt)(this,e,t,n,r,i),this}function _jt(e,t,n,r,i,s){const o=hn({},s,yjt);let a,u;pn(n)||(n=na(n)),r===void 0?a=l=>e.touch(n(l)):pn(r)?(u=new Dr(null,r,i,!1),a=l=>{u.evaluate(l);const c=n(l),f=u.value;DMe(f)?e.pulse(c,f,s):e.update(c,f,o)}):a=l=>e.update(n(l),r,o),t.apply(a)}function bjt(e,t,n,r,i,s){if(r===void 0)t.targets().add(n);else{const o=s||{},a=new Dr(null,wjt(n,r),i,!1);a.modified(o.force),a.rank=t.rank,t.targets().add(a),n&&(a.skip(!0),a.value=n.value,a.targets().add(n),e.connect(n,[a]))}}function wjt(e,t){return t=pn(t)?t:na(t),e?function(n,r){const i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}function Ejt(e){e.rank=++this._rank}function xjt(e){const t=[e];let n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&Te("Cycle detected in dataflow graph.")}const j3={},Yf=1,km=2,Oh=4,Sjt=Yf|km,Gme=Yf|Oh,p_=Yf|km|Oh,Yme=8,hS=16,Kme=32,Xme=64;function Ig(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function rj(e,t){const n=[];return Pm(e,t,r=>n.push(r)),n}function Qme(e,t){const n={};return e.visit(t,r=>{n[kt(r)]=1}),r=>n[kt(r)]?null:r}function NP(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}Ig.prototype={StopPropagation:j3,ADD:Yf,REM:km,MOD:Oh,ADD_REM:Sjt,ADD_MOD:Gme,ALL:p_,REFLOW:Yme,SOURCE:hS,NO_SOURCE:Kme,NO_FIELDS:Xme,fork(e){return new Ig(this.dataflow).init(this,e)},clone(){const e=this.fork(p_);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(p_|hS)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new Ig(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&Xme)&&(n.fields=e.fields),t&Yf?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&km?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&Oh?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&Kme?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||p_;return t&Yf&&this.add.length||t&km&&this.rem.length||t&Oh&&this.mod.length},reflow(e){if(e)return this.fork(p_).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(Oh,Qme(this,Yf))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return Ie(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?Ie(e)?e.some(r=>n[r]):n[e]:!!n:!1},filter(e,t){const n=this;return e&Yf&&(n.addF=NP(n.addF,t)),e&km&&(n.remF=NP(n.remF,t)),e&Oh&&(n.modF=NP(n.modF,t)),e&hS&&(n.srcF=NP(n.srcF,t)),n},materialize(e){e=e||p_;const t=this;return e&Yf&&t.addF&&(t.add=rj(t.add,t.addF),t.addF=null),e&km&&t.remF&&(t.rem=rj(t.rem,t.remF),t.remF=null),e&Oh&&t.modF&&(t.mod=rj(t.mod,t.modF),t.modF=null),e&hS&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,r=t;if(e&hS)return Pm(n.source,n.srcF,r),n;e&Yf&&Pm(n.add,n.addF,r),e&km&&Pm(n.rem,n.remF,r),e&Oh&&Pm(n.mod,n.modF,r);const i=n.source;if(e&Yme&&i){const s=n.add.length+n.mod.length;s===i.length||(s?Pm(i,Qme(n,Gme),r):Pm(i,n.srcF,r))}return n}};function nJ(e,t,n,r){const i=this;let s=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(const o of n)if(o.stamp===t){if(o.fields){const a=i.fields||(i.fields={});for(const u in o.fields)a[u]=1}o.changed(i.ADD)&&(s|=i.ADD),o.changed(i.REM)&&(s|=i.REM),o.changed(i.MOD)&&(s|=i.MOD)}this.changes=s}We(nJ,Ig,{fork(e){const t=new Ig(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?Ie(e)?e.some(r=>n[r]):n[e]:0},filter(){Te("MultiPulse does not support filtering.")},materialize(){Te("MultiPulse does not support materialization.")},visit(e,t){const n=this,r=n.pulses,i=r.length;let s=0;if(e&n.SOURCE)for(;s<i;++s)r[s].visit(e,t);else for(;s<i;++s)r[s].stamp===n.stamp&&r[s].visit(e,t);return n}});async function Tjt(e,t,n){const r=this,i=[];if(r._pulse)return LMe(r);if(r._pending&&await r._pending,t&&await _$(r,t),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;const s=++r._clock;r._pulse=new Ig(r,s,e),r._touched.forEach(c=>r._enqueue(c,!0)),r._touched=G4(yI);let o=0,a,u,l;try{for(;r._heap.size()>0;){if(a=r._heap.pop(),a.rank!==a.qrank){r._enqueue(a,!0);continue}u=a.run(r._getPulse(a,e)),u.then?u=await u:u.async&&(i.push(u.async),u=j3),u!==j3&&a._targets&&a._targets.forEach(c=>r._enqueue(c)),++o}}catch(c){r._heap.clear(),l=c}if(r._input={},r._pulse=null,r.debug(`Pulse ${s}: ${o} operators`),l&&(r._postrun=[],r.error(l)),r._postrun.length){const c=r._postrun.sort((f,d)=>d.priority-f.priority);r._postrun=[];for(let f=0;f<c.length;++f)await _$(r,c[f].callback)}return n&&await _$(r,n),i.length&&Promise.all(i).then(c=>r.runAsync(null,()=>{c.forEach(f=>{try{f(r)}catch(d){r.error(d)}})})),r}async function Ajt(e,t,n){for(;this._running;)await this._running;const r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running}function Cjt(e,t,n){return this._pulse?LMe(this):(this.evaluate(e,t,n),this)}function Ijt(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(r){this.error(r)}}function LMe(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function Ojt(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function Pjt(e,t){const n=e.source,r=this._clock;return n&&Ie(n)?new nJ(this,r,n.map(i=>i.pulse),t):this._input[e.id]||kjt(this._pulse,n&&n.pulse)}function kjt(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==j3&&(e.source=t.source),e)}const rJ={skip:!1,force:!1};function $jt(e,t){const n=t||rJ;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function Rjt(e,t,n){const r=n||rJ;return(e.set(t)||r.force)&&this.touch(e,r),this}function Njt(e,t,n){this.touch(e,n||rJ);const r=new Ig(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this}function Djt(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),MMe(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let r;return t.length?(r=t[0],t[0]=n,Ljt(t,0,e)):r=n,r}}}function MMe(e,t,n,r){let i,s;const o=e[n];for(;n>t;){if(s=n-1>>1,i=e[s],r(o,i)<0){e[n]=i,n=s;continue}break}return e[n]=o}function Ljt(e,t,n){const r=t,i=e.length,s=e[t];let o=(t<<1)+1,a;for(;o<i;)a=o+1,a<i&&n(e[o],e[a])>=0&&(o=a),e[t]=e[o],t=o,o=(t<<1)+1;return e[t]=s,MMe(e,r,t,n)}function Fb(){this.logger(FQ()),this.logLevel(LQ),this._clock=0,this._rank=0,this._locale=QQ();try{this._loader=W4()}catch{}this._touched=G4(yI),this._input={},this._pulse=null,this._heap=Djt((e,t)=>e.qrank-t.qrank),this._postrun=[]}function pS(e){return function(){return this._log[e].apply(this,arguments)}}Fb.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:pS("error"),warn:pS("warn"),info:pS("info"),debug:pS("debug"),logLevel:pS("level"),cleanThreshold:1e4,add:ujt,connect:ljt,rank:Ejt,rerank:xjt,pulse:Njt,touch:$jt,update:Rjt,changeset:Lv,ingest:hjt,parse:djt,preload:mjt,request:pjt,events:fjt,on:vjt,evaluate:Tjt,run:Cjt,runAsync:Ajt,runAfter:Ijt,_enqueue:Ojt,_getPulse:Pjt};function Ee(e,t){Dr.call(this,e,null,t)}We(Ee,Dr,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const Fw={};function FMe(e){const t=BMe(e);return t&&t.Definition||null}function BMe(e){return e=e&&e.toLowerCase(),Nt(Fw,e)?Fw[e]:null}function*jMe(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)r=t(r,++n,e),r!=null&&r!==""&&(r=+r)>=r&&(yield r)}}function iJ(e,t,n){const r=Float64Array.from(jMe(e,n));return r.sort(Cg),t.map(i=>gBt(r,i))}function sJ(e,t){return iJ(e,[.25,.5,.75],t)}function oJ(e,t){const n=e.length,r=cBt(e,t),i=sJ(e,t),s=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,s)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function zMe(e){const t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2];let s=e.extent[0],o=e.extent[1],a,u,l,c,f,d;const h=e.span||o-s||Math.abs(s)||1;if(e.step)a=e.step;else if(e.steps){for(c=h/t,f=0,d=e.steps.length;f<d&&e.steps[f]<c;++f);a=e.steps[Math.max(0,f-1)]}else{for(u=Math.ceil(Math.log(t)/r),l=e.minstep||0,a=Math.max(l,Math.pow(n,Math.round(Math.log(h)/r)-u));Math.ceil(h/a)>t;)a*=n;for(f=0,d=i.length;f<d;++f)c=a/i[f],c>=l&&h/c<=t&&(a=c)}c=Math.log(a);const p=c>=0?0:~~(-c/r)+1,m=Math.pow(n,-p-1);return(e.nice||e.nice===void 0)&&(c=Math.floor(s/a+m)*a,s=s<c?c-a:c,o=Math.ceil(o/a)*a),{start:s,stop:o===s?s+a:o,step:a}}var ic=Math.random;function Mjt(e){ic=e}function UMe(e,t,n,r){if(!e.length)return[void 0,void 0];const i=Float64Array.from(jMe(e,r)),s=i.length,o=t;let a,u,l,c;for(l=0,c=Array(o);l<o;++l){for(a=0,u=0;u<s;++u)a+=i[~~(ic()*s)];c[l]=a/s}return c.sort(Cg),[VV(c,n/2),VV(c,1-n/2)]}function VMe(e,t,n,r){r=r||(d=>d);const i=e.length,s=new Float64Array(i);let o=0,a=1,u=r(e[0]),l=u,c=u+t,f;for(;a<i;++a){if(f=r(e[a]),f>=c){for(l=(u+l)/2;o<a;++o)s[o]=l;c=f+t,u=f}l=f}for(l=(u+l)/2;o<a;++o)s[o]=l;return n?Fjt(s,t+t/4):s}function Fjt(e,t){const n=e.length;let r=0,i=1,s,o;for(;e[r]===e[i];)++i;for(;i<n;){for(s=i+1;e[i]===e[s];)++s;if(e[i]-e[i-1]<t){for(o=i+(r+s-i-i>>1);o<i;)e[o++]=e[i];for(;o>i;)e[o--]=e[r]}r=i,i=s}return e}function Bjt(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function jjt(e,t){t==null&&(t=e,e=0);let n,r,i;const s={min(o){return arguments.length?(n=o||0,i=r-n,s):n},max(o){return arguments.length?(r=o||0,i=r-n,s):r},sample(){return n+Math.floor(i*ic())},pdf(o){return o===Math.floor(o)&&o>=n&&o<r?1/i:0},cdf(o){const a=Math.floor(o);return a<n?0:a>=r?1:(a-n+1)/i},icdf(o){return o>=0&&o<=1?n-1+Math.floor(o*i):NaN}};return s.min(e).max(t)}const HMe=Math.sqrt(2*Math.PI),zjt=Math.SQRT2;let mS=NaN;function J4(e,t){e=e||0,t=t??1;let n=0,r=0,i,s;if(mS===mS)n=mS,mS=NaN;else{do n=ic()*2-1,r=ic()*2-1,i=n*n+r*r;while(i===0||i>1);s=Math.sqrt(-2*Math.log(i)/i),n*=s,mS=r*s}return e+n*t}function aJ(e,t,n){n=n??1;const r=(e-(t||0))/n;return Math.exp(-.5*r*r)/(n*HMe)}function Z4(e,t,n){t=t||0,n=n??1;const r=(e-t)/n,i=Math.abs(r);let s;if(i>37)s=0;else{const o=Math.exp(-i*i/2);let a;i<7.07106781186547?(a=.0352624965998911*i+.700383064443688,a=a*i+6.37396220353165,a=a*i+33.912866078383,a=a*i+112.079291497871,a=a*i+221.213596169931,a=a*i+220.206867912376,s=o*a,a=.0883883476483184*i+1.75566716318264,a=a*i+16.064177579207,a=a*i+86.7807322029461,a=a*i+296.564248779674,a=a*i+637.333633378831,a=a*i+793.826512519948,a=a*i+440.413735824752,s=s/a):(a=i+.65,a=i+4/a,a=i+3/a,a=i+2/a,a=i+1/a,s=o/a/2.506628274631)}return r>0?1-s:s}function eF(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*zjt*Ujt(2*e-1)}function Ujt(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function uJ(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>J4(n,r),pdf:s=>aJ(s,n,r),cdf:s=>Z4(s,n,r),icdf:s=>eF(s,n,r)};return i.mean(e).stdev(t)}function lJ(e,t){const n=uJ();let r=0;const i={data(s){return arguments.length?(e=s,r=s?s.length:0,i.bandwidth(t)):e},bandwidth(s){return arguments.length?(t=s,!t&&e&&(t=oJ(e)),i):t},sample(){return e[~~(ic()*r)]+t*n.sample()},pdf(s){let o=0,a=0;for(;a<r;++a)o+=n.pdf((s-e[a])/t);return o/t/r},cdf(s){let o=0,a=0;for(;a<r;++a)o+=n.cdf((s-e[a])/t);return o/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(e)}function cJ(e,t){return e=e||0,t=t??1,Math.exp(e+J4()*t)}function fJ(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*HMe*e)}function dJ(e,t,n){return Z4(Math.log(e),t,n)}function hJ(e,t,n){return Math.exp(eF(e,t,n))}function qMe(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>cJ(n,r),pdf:s=>fJ(s,n,r),cdf:s=>dJ(s,n,r),icdf:s=>hJ(s,n,r)};return i.mean(e).stdev(t)}function WMe(e,t){let n=0,r;function i(o){const a=[];let u=0,l;for(l=0;l<n;++l)u+=a[l]=o[l]==null?1:+o[l];for(l=0;l<n;++l)a[l]/=u;return a}const s={weights(o){return arguments.length?(r=i(t=o||[]),s):t},distributions(o){return arguments.length?(o?(n=o.length,e=o):(n=0,e=[]),s.weights(t)):e},sample(){const o=ic();let a=e[n-1],u=r[0],l=0;for(;l<n-1;u+=r[++l])if(o<u){a=e[l];break}return a.sample()},pdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].pdf(o);return a},cdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].cdf(o);return a},icdf(){throw Error("Mixture icdf not supported.")}};return s.distributions(e).weights(t)}function pJ(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*ic()}function mJ(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function gJ(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function yJ(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function GMe(e,t){let n,r;const i={min(s){return arguments.length?(n=s||0,i):n},max(s){return arguments.length?(r=s??1,i):r},sample:()=>pJ(n,r),pdf:s=>mJ(s,n,r),cdf:s=>gJ(s,n,r),icdf:s=>yJ(s,n,r)};return t==null&&(t=e??1,e=0),i.min(e).max(t)}function vJ(e,t,n){let r=0,i=0;for(const s of e){const o=n(s);t(s)==null||o==null||isNaN(o)||(r+=(o-r)/++i)}return{coef:[r],predict:()=>r,rSquared:0}}function bI(e,t,n,r){const i=r-e*e,s=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-s*e,s]}function tF(e,t,n,r){e=e.filter(h=>{let p=t(h),m=n(h);return p!=null&&(p=+p)>=p&&m!=null&&(m=+m)>=m}),r&&e.sort((h,p)=>t(h)-t(p));const i=e.length,s=new Float64Array(i),o=new Float64Array(i);let a=0,u=0,l=0,c,f,d;for(d of e)s[a]=c=+t(d),o[a]=f=+n(d),++a,u+=(c-u)/a,l+=(f-l)/a;for(a=0;a<i;++a)s[a]-=u,o[a]-=l;return[s,o,u,l]}function wI(e,t,n,r){let i=-1,s,o;for(const a of e)s=t(a),o=n(a),s!=null&&(s=+s)>=s&&o!=null&&(o=+o)>=o&&r(s,o,++i)}function tx(e,t,n,r,i){let s=0,o=0;return wI(e,t,n,(a,u)=>{const l=u-i(a),c=u-r;s+=l*l,o+=c*c}),1-s/o}function _J(e,t,n){let r=0,i=0,s=0,o=0,a=0;wI(e,t,n,(c,f)=>{++a,r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=bI(r,i,s,o),l=c=>u[0]+u[1]*c;return{coef:u,predict:l,rSquared:tx(e,t,n,i,l)}}function YMe(e,t,n){let r=0,i=0,s=0,o=0,a=0;wI(e,t,n,(c,f)=>{++a,c=Math.log(c),r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=bI(r,i,s,o),l=c=>u[0]+u[1]*Math.log(c);return{coef:u,predict:l,rSquared:tx(e,t,n,i,l)}}function KMe(e,t,n){const[r,i,s,o]=tF(e,t,n);let a=0,u=0,l=0,c=0,f=0,d,h,p;wI(e,t,n,(v,_)=>{d=r[f++],h=Math.log(_),p=d*_,a+=(_*h-a)/f,u+=(p-u)/f,l+=(p*h-l)/f,c+=(d*p-c)/f});const[m,g]=bI(u/o,a/o,l/o,c/o),y=v=>Math.exp(m+g*(v-s));return{coef:[Math.exp(m-g*s),g],predict:y,rSquared:tx(e,t,n,o,y)}}function XMe(e,t,n){let r=0,i=0,s=0,o=0,a=0,u=0;wI(e,t,n,(f,d)=>{const h=Math.log(f),p=Math.log(d);++u,r+=(h-r)/u,i+=(p-i)/u,s+=(h*p-s)/u,o+=(h*h-o)/u,a+=(d-a)/u});const l=bI(r,i,s,o),c=f=>l[0]*Math.pow(f,l[1]);return l[0]=Math.exp(l[0]),{coef:l,predict:c,rSquared:tx(e,t,n,a,c)}}function bJ(e,t,n){const[r,i,s,o]=tF(e,t,n),a=r.length;let u=0,l=0,c=0,f=0,d=0,h,p,m,g;for(h=0;h<a;)p=r[h],m=i[h++],g=p*p,u+=(g-u)/h,l+=(g*p-l)/h,c+=(g*g-c)/h,f+=(p*m-f)/h,d+=(g*m-d)/h;const y=c-u*u,v=u*y-l*l,_=(d*u-f*l)/v,b=(f*y-d*l)/v,E=-_*u,w=x=>(x=x-s,_*x*x+b*x+E+o);return{coef:[E-b*s+_*s*s+o,b-2*_*s,_],predict:w,rSquared:tx(e,t,n,o,w)}}function QMe(e,t,n,r){if(r===0)return vJ(e,t,n);if(r===1)return _J(e,t,n);if(r===2)return bJ(e,t,n);const[i,s,o,a]=tF(e,t,n),u=i.length,l=[],c=[],f=r+1;let d,h,p,m,g;for(d=0;d<f;++d){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d)*s[p];for(l.push(m),g=new Float64Array(f),h=0;h<f;++h){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d+h);g[h]=m}c.push(g)}c.push(l);const y=Hjt(c),v=_=>{_-=o;let b=a+y[0]+y[1]*_+y[2]*_*_;for(d=3;d<f;++d)b+=y[d]*Math.pow(_,d);return b};return{coef:Vjt(f,y,-o,a),predict:v,rSquared:tx(e,t,n,a,v)}}function Vjt(e,t,n,r){const i=Array(e);let s,o,a,u;for(s=0;s<e;++s)i[s]=0;for(s=e-1;s>=0;--s)for(a=t[s],u=1,i[s]+=a,o=1;o<=s;++o)u*=(s+1-o)/o,i[s-o]+=a*Math.pow(n,o)*u;return i[0]+=r,i}function Hjt(e){const t=e.length-1,n=[];let r,i,s,o,a;for(r=0;r<t;++r){for(o=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][o])&&(o=i);for(s=r;s<t+1;++s)a=e[s][r],e[s][r]=e[s][o],e[s][o]=a;for(i=r+1;i<t;++i)for(s=t;s>=r;s--)e[s][i]-=e[s][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(a=0,s=i+1;s<t;++s)a+=e[s][i]*n[s];n[i]=(e[t][i]-a)/e[i][i]}return n}const Jme=2,Zme=1e-12;function JMe(e,t,n,r){const[i,s,o,a]=tF(e,t,n,!0),u=i.length,l=Math.max(2,~~(r*u)),c=new Float64Array(u),f=new Float64Array(u),d=new Float64Array(u).fill(1);for(let h=-1;++h<=Jme;){const p=[0,l-1];for(let g=0;g<u;++g){const y=i[g],v=p[0],_=p[1],b=y-i[v]>i[_]-y?v:_;let E=0,w=0,x=0,S=0,I=0;const C=1/Math.abs(i[b]-y||1);for(let N=v;N<=_;++N){const $=i[N],D=s[N],B=qjt(Math.abs(y-$)*C)*d[N],V=$*B;E+=B,w+=V,x+=D*B,S+=D*V,I+=$*V}const[O,z]=bI(w/E,x/E,S/E,I/E);c[g]=O+z*y,f[g]=Math.abs(s[g]-c[g]),Wjt(i,g+1,p)}if(h===Jme)break;const m=JLe(f);if(Math.abs(m)<Zme)break;for(let g=0,y,v;g<u;++g)y=f[g]/(6*m),d[g]=y>=1?Zme:(v=1-y*y)*v}return Gjt(i,c,o,a)}function qjt(e){return(e=1-e*e*e)*e*e}function Wjt(e,t,n){const r=e[t];let i=n[0],s=n[1]+1;if(!(s>=e.length))for(;t>i&&e[s]-r<=r-e[i];)n[0]=++i,n[1]=s,++s}function Gjt(e,t,n,r){const i=e.length,s=[];let o=0,a=0,u=[],l;for(;o<i;++o)l=e[o]+n,u[0]===l?u[1]+=(t[o]-u[1])/++a:(a=0,u[1]+=r,u=[l,t[o]],s.push(u));return u[1]+=r,s}const Yjt=.5*Math.PI/180;function nF(e,t,n,r){n=n||25,r=Math.max(n,r||200);const i=m=>[m,e(m)],s=t[0],o=t[1],a=o-s,u=a/r,l=[i(s)],c=[];if(n===r){for(let m=1;m<r;++m)l.push(i(s+m/n*a));return l.push(i(o)),l}else{c.push(i(o));for(let m=n;--m>0;)c.push(i(s+m/n*a))}let f=l[0],d=c[c.length-1];const h=1/a,p=Kjt(f[1],c);for(;d;){const m=i((f[0]+d[0])/2);m[0]-f[0]>=u&&Xjt(f,m,d,h,p)>Yjt?c.push(m):(f=d,l.push(d),c.pop()),d=c[c.length-1]}return l}function Kjt(e,t){let n=e,r=e;const i=t.length;for(let s=0;s<i;++s){const o=t[s][1];o<n&&(n=o),o>r&&(r=o)}return 1/(r-n)}function Xjt(e,t,n,r,i){const s=Math.atan2(i*(n[1]-e[1]),r*(n[0]-e[0])),o=Math.atan2(i*(t[1]-e[1]),r*(t[0]-e[0]));return Math.abs(s-o)}function Qjt(e){return t=>{const n=e.length;let r=1,i=String(e[0](t));for(;r<n;++r)i+="|"+e[r](t);return i}}function ZV(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:Qjt(e)}function ZMe(e,t,n){return n||e+(t?"_"+t:"")}const ij=()=>{},Jjt={init:ij,add:ij,rem:ij,idx:0},OA={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},EI=Object.keys(OA).filter(e=>e!=="__count__");function Zjt(e,t){return(n,r)=>hn({name:e,aggregate_param:r,out:n||e},Jjt,t)}[...EI,"__count__"].forEach(e=>{OA[e]=Zjt(e,OA[e])});function e6e(e,t,n){return OA[e](n,t)}function t6e(e,t){return e.idx-t.idx}function e7t(e){const t={};e.forEach(r=>t[r.name]=r);const n=r=>{r.req&&r.req.forEach(i=>{t[i]||n(t[i]=OA[i]())})};return e.forEach(n),Object.values(t).sort(t6e)}function t7t(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function n7t(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function r7t(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function i7t(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function n6e(e,t){const n=t||ta,r=e7t(e),i=e.slice().sort(t6e);function s(o){this._ops=r,this._out=i,this.cell=o,this.init()}return s.prototype.init=t7t,s.prototype.add=n7t,s.prototype.rem=r7t,s.prototype.set=i7t,s.prototype.get=n,s.fields=e.map(o=>o.out),s}function wJ(e){this._key=e?tc(e):kt,this.reset()}const So=wJ.prototype;So.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};So.add=function(e){this._add.push(e)};So.rem=function(e){this._rem.push(e)};So.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,s=Array(r-i),o={};let a,u,l;for(a=0;a<i;++a)o[n(t[a])]=1;for(a=0,u=0;a<r;++a)o[n(l=e[a])]?o[n(l)]=0:s[u++]=l;return this._rem=[],this._add=s};So.distinct=function(e){const t=this.values(),n={};let r=t.length,i=0,s;for(;--r>=0;)s=e(t[r])+"",Nt(n,s)||(n[s]=1,++i);return i};So.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=MLe(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};So.argmin=function(e){return this.extent(e)[0]||{}};So.argmax=function(e){return this.extent(e)[1]||{}};So.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};So.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};So.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=sJ(this.values(),e),this._get=e),this._q};So.q1=function(e){return this.quartile(e)[0]};So.q2=function(e){return this.quartile(e)[1]};So.q3=function(e){return this.quartile(e)[2]};So.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=UMe(this.values(),1e3,.05,e),this._get=e),this._ci};So.ci0=function(e){return this.ci(e)[0]};So.ci1=function(e){return this.ci(e)[1]};function t0(e){Ee.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}t0.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:EI},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};We(t0,Ee,{transform(e,t){const n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):Object.create(null),t.visit(t.SOURCE,s=>n.add(s))):(n.value=n.value||n.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),r.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter(()=>this.clean()),n.changes(r)},cross(){const e=this,t=e.value,n=e._dnames,r=n.map(()=>({})),i=n.length;function s(a){let u,l,c,f;for(u in a)for(c=a[u].tuple,l=0;l<i;++l)r[l][f=c[n[l]]]=f}s(e._prev),s(t);function o(a,u,l){const c=n[l],f=r[l++];for(const d in f){const h=a?a+"|"+d:d;u[c]=f[d],l<i?o(h,u,l):t[h]||e.cell(h,u)}}o("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],r={};function i(v){const _=nt(Go(v)),b=_.length;let E=0,w;for(;E<b;++E)r[w=_[E]]||(r[w]=1,t.push(w))}this._dims=nt(e.groupby),this._dnames=this._dims.map(v=>{const _=Ni(v);return i(v),n.push(_),_}),this.cellkey=e.key?e.key:ZV(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const s=e.fields||[null],o=e.ops||["count"],a=e.aggregate_params||[null],u=e.as||[],l=s.length,c={};let f,d,h,p,m,g,y;for(l!==o.length&&Te("Unmatched number of fields and aggregate ops."),y=0;y<l;++y){if(f=s[y],d=o[y],h=a[y]||null,f==null&&d!=="count"&&Te("Null aggregate field specified."),m=Ni(f),g=ZMe(d,m,u[y]),n.push(g),d==="count"){this._counts.push(g);continue}p=c[m],p||(i(f),p=c[m]=[],p.field=f,this._measures.push(p)),d!=="count"&&(this._countOnly=!1),p.push(e6e(d,h,g))}return this._measures=this._measures.map(v=>n6e(v,v.field)),Object.create(null)},cellkey:ZV(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const r=this._measures,i=r.length;n.agg=Array(i);for(let s=0;s<i;++s)n.agg[s]=new r[s](n)}return n.store&&(n.data=new wJ),n},newtuple(e,t){const n=this._dnames,r=this._dims,i=r.length,s={};for(let o=0;o<i;++o)s[n[o]]=r[o](e);return t?NMe(t.tuple,s):dr(s)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].add(r[i].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].rem(r[i].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){const r=e.agg;for(let i=0,s=r.length;i<s;++i)r[i].set(t)}return t},changes(e){const t=this._adds,n=this._mods,r=this._prev,i=this._drop,s=e.add,o=e.rem,a=e.mod;let u,l,c,f;if(r)for(l in r)u=r[l],(!i||u.num)&&o.push(u.tuple);for(c=0,f=this._alen;c<f;++c)s.push(this.celltuple(t[c])),t[c]=null;for(c=0,f=this._mlen;c<f;++c)u=n[c],(u.num===0&&i?o:a).push(this.celltuple(u)),n[c]=null;return this._alen=this._mlen=0,this._prev=null,e}});const s7t=1e-14;function EJ(e){Ee.call(this,null,e)}EJ.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};We(EJ,Ee,{transform(e,t){const n=e.interval!==!1,r=this._bins(e),i=r.start,s=r.step,o=e.as||["bin0","bin1"],a=o[0],u=o[1];let l;return e.modified()?(t=t.reflow(!0),l=t.SOURCE):l=t.modified(Go(e.field))?t.ADD_MOD:t.ADD,t.visit(l,n?c=>{const f=r(c);c[a]=f,c[u]=f==null?null:i+s*(1+(f-i)/s)}:c=>c[a]=r(c)),t.modifies(n?o:a)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=zMe(e),r=n.step;let i=n.start,s=i+Math.ceil((n.stop-i)/r)*r,o,a;(o=e.anchor)!=null&&(a=o-(i+r*Math.floor((o-i)/r)),i+=a,s+=a);const u=function(l){let c=Ho(t(l));return c==null?null:c<i?-1/0:c>s?1/0:(c=Math.max(i,Math.min(c,s-r)),i+r*Math.floor(s7t+(c-i)/r))};return u.start=i,u.stop=n.stop,u.step=r,this.value=Ou(u,Go(t),e.name||"bin_"+Ni(t))}});function r6e(e,t,n){const r=e;let i=t||[],s=n||[],o={},a=0;return{add:u=>s.push(u),remove:u=>o[r(u)]=++a,size:()=>i.length,data:(u,l)=>(a&&(i=i.filter(c=>!o[r(c)]),o={},a=0),l&&u&&i.sort(u),s.length&&(i=u?VLe(u,i,s.sort(u)):i.concat(s),s=[]),i)}}function xJ(e){Ee.call(this,[],e)}xJ.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};We(xJ,Ee,{transform(e,t){const n=t.fork(t.ALL),r=r6e(kt,this.value,n.materialize(n.ADD).add),i=e.sort,s=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(s),this.value=n.source=r.data(Dv(i),s),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function i6e(e){Dr.call(this,null,o7t,e)}We(i6e,Dr);function o7t(e){return this.value&&!e.modified()?this.value:UQ(e.fields,e.orders)}function SJ(e){Ee.call(this,null,e)}SJ.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function a7t(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}We(SJ,Ee,{transform(e,t){const n=f=>d=>{for(var h=a7t(a(d),e.case,s)||[],p,m=0,g=h.length;m<g;++m)o.test(p=h[m])||f(p)},r=this._parameterCheck(e,t),i=this._counts,s=this._match,o=this._stop,a=e.field,u=e.as||["text","count"],l=n(f=>i[f]=1+(i[f]||0)),c=n(f=>i[f]-=1);return r?t.visit(t.SOURCE,l):(t.visit(t.ADD,l),t.visit(t.REM,c)),this._finish(t,u)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],s=t[1],o=e.fork(e.NO_SOURCE|e.NO_FIELDS);let a,u,l;for(a in n)u=r[a],l=n[a]||0,!u&&l?(r[a]=u=dr({}),u[i]=a,u[s]=l,o.add.push(u)):l===0?(u&&o.rem.push(u),n[a]=null,r[a]=null):u[s]!==l&&(u[s]=l,o.mod.push(u));return o.modifies(t)}});function TJ(e){Ee.call(this,null,e)}TJ.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};We(TJ,Ee,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],s=r[1],o=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let a=this.value;return o?(a&&(n.rem=a),a=t.materialize(t.SOURCE).source,n.add=this.value=u7t(a,i,s,e.filter||nc)):n.mod=a,n.source=this.value,n.modifies(r)}});function u7t(e,t,n,r){for(var i=[],s={},o=e.length,a=0,u,l;a<o;++a)for(s[t]=l=e[a],u=0;u<o;++u)s[n]=e[u],r(s)&&(i.push(dr(s)),s={},s[t]=l);return i}const ege={kde:lJ,mixture:WMe,normal:uJ,lognormal:qMe,uniform:GMe},l7t="distributions",tge="function",c7t="field";function s6e(e,t){const n=e[tge];Nt(ege,n)||Te("Unknown distribution function: "+n);const r=ege[n]();for(const i in e)i===c7t?r.data((e.from||t()).map(e[i])):i===l7t?r[i](e[i].map(s=>s6e(s,t))):typeof r[i]===tge&&r[i](e[i]);return r}function AJ(e){Ee.call(this,null,e)}const o6e=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],f7t={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:o6e},{name:"weights",type:"number",array:!0}]};AJ.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:o6e.concat(f7t)},{name:"as",type:"string",array:!0,default:["value","density"]}]};We(AJ,Ee,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=s6e(e.distribution,d7t(t)),i=e.steps||e.minsteps||25,s=e.steps||e.maxsteps||200;let o=e.method||"pdf";o!=="pdf"&&o!=="cdf"&&Te("Invalid density method: "+o),!e.extent&&!r.data&&Te("Missing density extent parameter."),o=r[o];const a=e.as||["value","density"],u=e.extent||Wd(r.data()),l=nF(o,u,i,s).map(c=>{const f={};return f[a[0]]=c[0],f[a[1]]=c[1],dr(f)});this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function d7t(e){return()=>e.materialize(e.SOURCE).source}function a6e(e,t){return e?e.map((n,r)=>t[r]||Ni(n)):null}function CJ(e,t,n){const r=[],i=f=>f(u);let s,o,a,u,l,c;if(t==null)r.push(e.map(n));else for(s={},o=0,a=e.length;o<a;++o)u=e[o],l=t.map(i),c=s[l],c||(s[l]=c=[],c.dims=l,r.push(c)),c.push(n(u));return r}const u6e="bin";function IJ(e){Ee.call(this,null,e)}IJ.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:u6e}]};const h7t=(e,t)=>vI(Wd(e,t))/30;We(IJ,Ee,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,r=CJ(t.source,e.groupby,ta),i=e.smooth||!1,s=e.field,o=e.step||h7t(n,s),a=Dv((p,m)=>s(p)-s(m)),u=e.as||u6e,l=r.length;let c=1/0,f=-1/0,d=0,h;for(;d<l;++d){const p=r[d].sort(a);h=-1;for(const m of VMe(p,o,i,s))m<c&&(c=m),m>f&&(f=m),p[++h][u]=m}return this.value={start:c,stop:f,step:o},t.reflow(!0).modifies(u)}});function l6e(e){Dr.call(this,null,p7t,e),this.modified(!0)}We(l6e,Dr);function p7t(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:Ou(n=>t(n,e),Go(t),Ni(t))}function OJ(e){Ee.call(this,[void 0,void 0],e)}OJ.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};We(OJ,Ee,{transform(e,t){const n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field");let s=n[0],o=n[1];if((i||s==null)&&(s=1/0,o=-1/0),t.visit(i?t.SOURCE:t.ADD,a=>{const u=Ho(r(a));u!=null&&(u<s&&(s=u),u>o&&(o=u))}),!Number.isFinite(s)||!Number.isFinite(o)){let a=Ni(r);a&&(a=` for field "${a}"`),t.dataflow.warn(`Infinite extent${a}: [${s}, ${o}]`),s=o=void 0}this.value=[s,o]}});function PJ(e,t){Dr.call(this,e),this.parent=t,this.count=0}We(PJ,Dr,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function rF(e){Ee.call(this,{},e),this._keys=JE();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let r=0,i=t.active;r<i;++r)n(t[r],r,t)}}We(rF,Ee,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,r){const i=this.value;let s=Nt(i,e)&&i[e],o,a;return s?s.value.stamp<n.stamp&&(s.init(n),this.activate(s)):(a=r||(a=this._group[e])&&a.tuple,o=n.dataflow,s=new PJ(n.fork(n.NO_SOURCE),this),o.add(s).connect(t(o,e,a)),i[e]=s,this.activate(s)),s},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){const n=this._targets.filter(r=>r&&r.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,r=e?e.length:0;let i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&t[i]!=null;++i)t[i]=null;t.active=r},transform(e,t){const n=t.dataflow,r=e.key,i=e.subflow,s=this._keys,o=e.modified("key"),a=u=>this.subflow(u,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,u=>{const l=kt(u),c=s.get(l);c!==void 0&&(s.delete(l),a(c).rem(u))}),t.visit(t.ADD,u=>{const l=r(u);s.set(kt(u),l),a(l).add(u)}),o||t.modified(r.fields)?t.visit(t.MOD,u=>{const l=kt(u),c=s.get(l),f=r(u);c===f?a(f).mod(u):(s.set(l,f),a(c).rem(u),a(f).add(u))}):t.changed(t.MOD)&&t.visit(t.MOD,u=>{a(s.get(kt(u))).mod(u)}),o&&t.visit(t.REFLOW,u=>{const l=kt(u),c=s.get(l),f=r(u);c!==f&&(s.set(l,f),a(c).rem(u),a(f).add(u))}),t.clean()?n.runAfter(()=>{this.clean(),s.clean()}):s.empty>n.cleanThreshold&&n.runAfter(s.clean),t}});function c6e(e){Dr.call(this,null,m7t,e)}We(c6e,Dr);function m7t(e){return this.value&&!e.modified()?this.value:Ie(e.name)?nt(e.name).map(t=>tc(t)):tc(e.name,e.as)}function kJ(e){Ee.call(this,JE(),e)}kJ.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};We(kJ,Ee,{transform(e,t){const n=t.dataflow,r=this.value,i=t.fork(),s=i.add,o=i.rem,a=i.mod,u=e.expr;let l=!0;t.visit(t.REM,f=>{const d=kt(f);r.has(d)?r.delete(d):o.push(f)}),t.visit(t.ADD,f=>{u(f,e)?s.push(f):r.set(kt(f),1)});function c(f){const d=kt(f),h=u(f,e),p=r.get(d);h&&p?(r.delete(d),s.push(f)):!h&&!p?(r.set(d,1),o.push(f)):l&&h&&!p&&a.push(f)}return t.visit(t.MOD,c),e.modified()&&(l=!1,t.visit(t.REFLOW,c)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}});function $J(e){Ee.call(this,[],e)}$J.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};We($J,Ee,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=a6e(r,e.as||[]),s=e.index||null,o=i.length;return n.rem=this.value,t.visit(t.SOURCE,a=>{const u=r.map(p=>p(a)),l=u.reduce((p,m)=>Math.max(p,m.length),0);let c=0,f,d,h;for(;c<l;++c){for(d=tJ(a),f=0;f<o;++f)d[i[f]]=(h=u[f][c])==null?null:h;s&&(d[s]=c),n.add.push(d)}}),this.value=n.source=n.add,s&&n.modifies(s),n.modifies(i)}});function RJ(e){Ee.call(this,[],e)}RJ.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};We(RJ,Ee,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(Ni),s=e.as||["key","value"],o=s[0],a=s[1],u=r.length;return n.rem=this.value,t.visit(t.SOURCE,l=>{for(let c=0,f;c<u;++c)f=tJ(l),f[o]=i[c],f[a]=r[c](l),n.add.push(f)}),this.value=n.source=n.add,n.modifies(s)}});function NJ(e){Ee.call(this,null,e)}NJ.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};We(NJ,Ee,{transform(e,t){const n=e.expr,r=e.as,i=e.modified(),s=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(s,o=>o[r]=n(o,e))}});function f6e(e){Ee.call(this,[],e)}We(f6e,Ee,{transform(e,t){const n=t.fork(t.ALL),r=e.generator;let i=this.value,s=e.size-i.length,o,a,u;if(s>0){for(o=[];--s>=0;)o.push(u=dr(r(e))),i.push(u);n.add=n.add.length?n.materialize(n.ADD).add.concat(o):o}else a=i.slice(0,-s),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(a):a,i=i.slice(-s);return n.source=this.value=i,n}});const DP={value:"value",median:JLe,mean:yBt,min:UV,max:p1},g7t=[];function DJ(e){Ee.call(this,[],e)}DJ.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function y7t(e){var t=e.method||DP.value,n;if(DP[t]==null)Te("Unrecognized imputation method: "+t);else return t===DP.value?(n=e.value!==void 0?e.value:0,()=>n):DP[t]}function v7t(e){const t=e.field;return n=>n?t(n):NaN}We(DJ,Ee,{transform(e,t){var n=t.fork(t.ALL),r=y7t(e),i=v7t(e),s=Ni(e.field),o=Ni(e.key),a=(e.groupby||[]).map(Ni),u=_7t(t.source,e.groupby,e.key,e.keyvals),l=[],c=this.value,f=u.domain.length,d,h,p,m,g,y,v,_,b,E;for(g=0,_=u.length;g<_;++g)for(d=u[g],p=d.values,h=NaN,v=0;v<f;++v)if(d[v]==null){for(m=u.domain[v],E={_impute:!0},y=0,b=p.length;y<b;++y)E[a[y]]=p[y];E[o]=m,E[s]=Number.isNaN(h)?h=r(d,i):h,l.push(dr(E))}return l.length&&(n.add=n.materialize(n.ADD).add.concat(l)),c.length&&(n.rem=n.materialize(n.REM).rem.concat(c)),this.value=l,n}});function _7t(e,t,n,r){var i=y=>y(g),s=[],o=r?r.slice():[],a={},u={},l,c,f,d,h,p,m,g;for(o.forEach((y,v)=>a[y]=v+1),d=0,m=e.length;d<m;++d)g=e[d],p=n(g),h=a[p]||(a[p]=o.push(p)),c=(l=t?t.map(i):g7t)+"",(f=u[c])||(f=u[c]=[],s.push(f),f.values=l),f[h-1]=g;return s.domain=o,s}function LJ(e){t0.call(this,e)}LJ.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:EI},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};We(LJ,t0,{transform(e,t){const n=this,r=e.modified();let i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,s=>n.add(s))):(i=n.value=n.value||this.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),n.changes(),t.visit(t.SOURCE,s=>{hn(s,i[n.cellkey(s)].tuple)}),t.reflow(r).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function MJ(e){Ee.call(this,null,e)}MJ.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};We(MJ,Ee,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=CJ(r,e.groupby,e.field),s=(e.groupby||[]).map(Ni),o=e.bandwidth,a=e.cumulative?"cdf":"pdf",u=e.as||["value","density"],l=[];let c=e.extent,f=e.steps||e.minsteps||25,d=e.steps||e.maxsteps||200;a!=="pdf"&&a!=="cdf"&&Te("Invalid density method: "+a),e.resolve==="shared"&&(c||(c=Wd(r,e.field)),f=d=e.steps||d),i.forEach(h=>{const p=lJ(h,o)[a],m=e.counts?h.length:1,g=c||Wd(h);nF(p,g,f,d).forEach(y=>{const v={};for(let _=0;_<s.length;++_)v[s[_]]=h.dims[_];v[u[0]]=y[0],v[u[1]]=y[1]*m,l.push(dr(v))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function d6e(e){Dr.call(this,null,b7t,e)}We(d6e,Dr);function b7t(e){return this.value&&!e.modified()?this.value:HQ(e.fields,e.flat)}function h6e(e){Ee.call(this,[],e),this._pending=null}We(h6e,Ee,{transform(e,t){const n=t.dataflow;return this._pending?sj(this,t,this._pending):w7t(e)?t.StopPropagation:e.values?sj(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(i=>(this._pending=nt(i.data),s=>s.touch(this)))}:n.request(e.url,e.format).then(r=>sj(this,t,nt(r.data)))}});function w7t(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function sj(e,t,n){n.forEach(dr);const r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function FJ(e){Ee.call(this,{},e)}FJ.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};We(FJ,Ee,{transform(e,t){const n=e.fields,r=e.index,i=e.values,s=e.default==null?null:e.default,o=e.modified(),a=n.length;let u=o?t.SOURCE:t.ADD,l=t,c=e.as,f,d,h;return i?(d=i.length,a>1&&!c&&Te('Multi-field lookup requires explicit "as" parameter.'),c&&c.length!==a*d&&Te('The "as" parameter has too few output field names.'),c=c||i.map(Ni),f=function(p){for(var m=0,g=0,y,v;m<a;++m)if(v=r.get(n[m](p)),v==null)for(y=0;y<d;++y,++g)p[c[g]]=s;else for(y=0;y<d;++y,++g)p[c[g]]=i[y](v)}):(c||Te("Missing output field names."),f=function(p){for(var m=0,g;m<a;++m)g=r.get(n[m](p)),p[c[m]]=g??s}),o?l=t.reflow(!0):(h=n.some(p=>t.modified(p.fields)),u|=h?t.MOD:0),t.visit(u,f),l.modifies(c)}});function p6e(e){Dr.call(this,null,E7t,e)}We(p6e,Dr);function E7t(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let r=1/0,i=-1/0,s,o;for(s=0;s<n;++s)o=t[s],o[0]<r&&(r=o[0]),o[1]>i&&(i=o[1]);return[r,i]}function m6e(e){Dr.call(this,null,x7t,e)}We(m6e,Dr);function x7t(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function g6e(e){Ee.call(this,null,e)}We(g6e,Ee,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function BJ(e){t0.call(this,e)}BJ.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:EI,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};We(BJ,t0,{_transform:t0.prototype.transform,transform(e,t){return this._transform(S7t(e,t),t)}});function S7t(e,t){const n=e.field,r=e.value,i=(e.op==="count"?"__count__":e.op)||"sum",s=Go(n).concat(Go(r)),o=A7t(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:o.map(()=>i),fields:o.map(a=>T7t(a,n,r,s)),as:o.map(a=>a+""),modified:e.modified.bind(e)}}function T7t(e,t,n,r){return Ou(i=>t(i)===e?n(i):NaN,r,e+"")}function A7t(e,t,n){const r={},i=[];return n.visit(n.SOURCE,s=>{const o=e(s);r[o]||(r[o]=1,i.push(o))}),i.sort(H4),t?i.slice(0,t):i}function y6e(e){rF.call(this,e)}We(y6e,rF,{transform(e,t){const n=e.subflow,r=e.field,i=s=>this.subflow(kt(s),n,t,s);return(e.modified("field")||r&&t.modified(Go(r)))&&Te("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,s=>{const o=i(s);r(s).forEach(a=>o.mod(a))}),t.visit(t.ADD,s=>{const o=i(s);r(s).forEach(a=>o.add(dr(a)))}),t.visit(t.REM,s=>{const o=i(s);r(s).forEach(a=>o.rem(a))})):(t.visit(t.MOD,s=>i(s).mod(s)),t.visit(t.ADD,s=>i(s).add(s)),t.visit(t.REM,s=>i(s).rem(s))),t.clean()&&t.runAfter(()=>this.clean()),t}});function jJ(e){Ee.call(this,null,e)}jJ.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};We(jJ,Ee,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=a6e(e.fields,e.as||[]),s=r?(a,u)=>C7t(a,u,r,i):K4;let o;return this.value?o=this.value:(t=t.addAll(),o=this.value={}),t.visit(t.REM,a=>{const u=kt(a);n.rem.push(o[u]),o[u]=null}),t.visit(t.ADD,a=>{const u=s(a,dr({}));o[kt(a)]=u,n.add.push(u)}),t.visit(t.MOD,a=>{n.mod.push(s(a,o[kt(a)]))}),n}});function C7t(e,t,n,r){for(let i=0,s=n.length;i<s;++i)t[r[i]]=n[i](e);return t}function v6e(e){Ee.call(this,null,e)}We(v6e,Ee,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function zJ(e){Ee.call(this,null,e)}zJ.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const I7t=1e-14;We(zJ,Ee,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const i=t.materialize(t.SOURCE).source,s=CJ(i,e.groupby,e.field),o=(e.groupby||[]).map(Ni),a=[],u=e.step||.01,l=e.probs||Nv(u/2,1-I7t,u),c=l.length;return s.forEach(f=>{const d=iJ(f,l);for(let h=0;h<c;++h){const p={};for(let m=0;m<o.length;++m)p[o[m]]=f.dims[m];p[r[0]]=l[h],p[r[1]]=d[h],a.push(dr(p))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=a,n}});function _6e(e){Ee.call(this,null,e)}We(_6e,Ee,{transform(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,i=>{const s=kt(i);n.rem.push(r[s]),r[s]=null}),t.visit(t.ADD,i=>{const s=tJ(i);r[kt(i)]=s,n.add.push(s)}),t.visit(t.MOD,i=>{const s=r[kt(i)];for(const o in i)s[o]=i[o],n.modifies(o);n.mod.push(s)})),n}});function UJ(e){Ee.call(this,[],e),this.count=0}UJ.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};We(UJ,Ee,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,s=this.value.reduce((c,f)=>(c[kt(f)]=1,c),{});let o=this.value,a=this.count,u=0;function l(c){let f,d;o.length<i?o.push(c):(d=~~((a+1)*ic()),d<o.length&&d>=u&&(f=o[d],s[kt(f)]&&n.rem.push(f),o[d]=c)),++a}if(t.rem.length&&(t.visit(t.REM,c=>{const f=kt(c);s[f]&&(s[f]=-1,n.rem.push(c)),--a}),o=o.filter(c=>s[kt(c)]!==-1)),(t.rem.length||r)&&o.length<i&&t.source&&(u=a=o.length,t.visit(t.SOURCE,c=>{s[kt(c)]||l(c)}),u=-1),r&&o.length>i){const c=o.length-i;for(let f=0;f<c;++f)s[kt(o[f])]=-1,n.rem.push(o[f]);o=o.slice(c)}return t.mod.length&&t.visit(t.MOD,c=>{s[kt(c)]&&n.mod.push(c)}),t.add.length&&t.visit(t.ADD,l),(t.add.length||u<0)&&(n.add=o.filter(c=>!s[kt(c)])),this.count=a,this.value=n.source=o,n}});function VJ(e){Ee.call(this,null,e)}VJ.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};We(VJ,Ee,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=Nv(e.start,e.stop,e.step||1).map(i=>{const s={};return s[r]=i,dr(s)}),n.add=t.add.concat(this.value),n}});function b6e(e){Ee.call(this,null,e),this.modified(!0)}We(b6e,Ee,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function HJ(e){Ee.call(this,null,e)}const w6e=["unit0","unit1"];HJ.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:YQ,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:w6e}]};We(HJ,Ee,{transform(e,t){const n=e.field,r=e.interval!==!1,i=e.timezone==="utc",s=this._floor(e,t),o=(i?ex:ZE)(s.unit).offset,a=e.as||w6e,u=a[0],l=a[1],c=s.step;let f=s.start||1/0,d=s.stop||-1/0,h=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(Go(n)))&&(t=t.reflow(!0),h=t.SOURCE,f=1/0,d=-1/0),t.visit(h,p=>{const m=n(p);let g,y;m==null?(p[u]=null,r&&(p[l]=null)):(p[u]=g=y=s(m),r&&(p[l]=y=o(g,c)),g<f&&(f=g),y>d&&(d=y))}),s.start=f,s.stop=d,t.modifies(r?a:u)},_floor(e,t){const n=e.timezone==="utc",{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:vMe({extent:e.extent||Wd(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),s=KQ(r),o=this.value||{},a=(n?lMe:uMe)(s,i);return a.unit=Un(s),a.units=s,a.step=i,a.start=o.start,a.stop=o.stop,this.value=a}});function E6e(e){Ee.call(this,JE(),e)}We(E6e,Ee,{transform(e,t){const n=t.dataflow,r=e.field,i=this.value,s=a=>i.set(r(a),a);let o=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,s)):t.changed()?(t.visit(t.REM,a=>i.delete(r(a))),t.visit(t.ADD,s)):o=!1,this.modified(o),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}});function x6e(e){Ee.call(this,null,e)}We(x6e,Ee,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(Dv(e.sort)):t.source).map(e.field))}});function O7t(e,t,n,r){const i=PA[e](t,n);return{init:i.init||Bm,update:function(s,o){o[r]=i.next(s)}}}const PA={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){const e=PA.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,r=t.compare;let i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||Te("ntile num must be greater than zero.");const n=PA.cume_dist(),r=n.next;return{init:n.init,next:i=>Math.ceil(t*r(i))}},lag:function(e,t){return t=+t||1,{next:n=>{const r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||Te("nth_value nth must be greater than zero."),{next:n=>{const r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const r=e(n.data[n.index]);return r!=null?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{const i=r.data;return r.index<=n?t:(n=P7t(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};function P7t(e,t,n){for(let r=t.length;n<r;++n)if(e(t[n])!=null)return n;return-1}const k7t=Object.keys(PA);function S6e(e){const t=nt(e.ops),n=nt(e.fields),r=nt(e.params),i=nt(e.aggregate_params),s=nt(e.as),o=this.outputs=[],a=this.windows=[],u={},l={},c=[],f=[];let d=!0;function h(p){nt(Go(p)).forEach(m=>u[m]=1)}h(e.sort),t.forEach((p,m)=>{const g=n[m],y=r[m],v=i[m]||null,_=Ni(g),b=ZMe(p,_,s[m]);if(h(g),o.push(b),Nt(PA,p))a.push(O7t(p,g,y,b));else{if(g==null&&p!=="count"&&Te("Null aggregate field specified."),p==="count"){c.push(b);return}d=!1;let E=l[_];E||(E=l[_]=[],E.field=g,f.push(E)),E.push(e6e(p,v,b))}}),(c.length||f.length)&&(this.cell=$7t(f,c,d)),this.inputs=Object.keys(u)}const T6e=S6e.prototype;T6e.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};T6e.update=function(e,t){const n=this.cell,r=this.windows,i=e.data,s=r&&r.length;let o;if(n){for(o=e.p0;o<e.i0;++o)n.rem(i[o]);for(o=e.p1;o<e.i1;++o)n.add(i[o]);n.set(t)}for(o=0;o<s;++o)r[o].update(e,t)};function $7t(e,t,n){e=e.map(u=>n6e(u,u.field));const r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,s=r.agg=Array(i),o=0;o<i;++o)s[o]=new e[o](r);if(r.store)var a=r.data=new wJ;return r.add=function(u){if(r.num+=1,!n){a&&a.add(u);for(let l=0;l<i;++l)s[l].add(s[l].get(u),u)}},r.rem=function(u){if(r.num-=1,!n){a&&a.rem(u);for(let l=0;l<i;++l)s[l].rem(s[l].get(u),u)}},r.set=function(u){let l,c;for(a&&a.values(),l=0,c=t.length;l<c;++l)u[t[l]]=r.num;if(!n)for(l=0,c=s.length;l<c;++l)s[l].set(u)},r.init=function(){r.num=0,a&&a.reset();for(let u=0;u<i;++u)s[u].init()},r}function qJ(e){Ee.call(this,{},e),this._mlen=0,this._mods=[]}qJ.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:k7t.concat(EI)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};We(qJ,Ee,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),r=Dv(e.sort),i=ZV(e.groupby),s=a=>this.group(i(a));let o=this.state;(!o||n)&&(o=this.state=new S6e(e)),n||t.modified(o.inputs)?(this.value={},t.visit(t.SOURCE,a=>s(a).add(a))):(t.visit(t.REM,a=>s(a).remove(a)),t.visit(t.ADD,a=>s(a).add(a)));for(let a=0,u=this._mlen;a<u;++a)R7t(this._mods[a],o,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(o.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=r6e(kt),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function R7t(e,t,n,r){const i=r.sort,s=i&&!r.ignorePeers,o=r.frame||[null,0],a=e.data(n),u=a.length,l=s?_I(i):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:a,compare:i||na(-1)};t.init();for(let f=0;f<u;++f)N7t(c,o,f,u),s&&D7t(c,l),t.update(c,a[f])}function N7t(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function D7t(e,t){const n=e.i0,r=e.i1-1,i=e.compare,s=e.data,o=s.length-1;n>0&&!i(s[n],s[n-1])&&(e.i0=t.left(s,s[n])),r<o&&!i(s[r],s[r+1])&&(e.i1=t.right(s,s[r]))}const L7t=Object.freeze(Object.defineProperty({__proto__:null,aggregate:t0,bin:EJ,collect:xJ,compare:i6e,countpattern:SJ,cross:TJ,density:AJ,dotbin:IJ,expression:l6e,extent:OJ,facet:rF,field:c6e,filter:kJ,flatten:$J,fold:RJ,formula:NJ,generate:f6e,impute:DJ,joinaggregate:LJ,kde:MJ,key:d6e,load:h6e,lookup:FJ,multiextent:p6e,multivalues:m6e,params:g6e,pivot:BJ,prefacet:y6e,project:jJ,proxy:v6e,quantile:zJ,relay:_6e,sample:UJ,sequence:VJ,sieve:b6e,subflow:PJ,timeunit:HJ,tupleindex:E6e,values:x6e,window:qJ},Symbol.toStringTag,{value:"Module"}));function Og(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const M7t=()=>typeof Image<"u"?Image:null;function WJ(e,t,n){const r=e-t+n*2;return e?r>0?r:1:0}const F7t="identity",Bw="linear",Dp="log",xI="pow",SI="sqrt",iF="symlog",U1="time",V1="utc",Od="sequential",nx="diverging",jw="quantile",sF="quantize",oF="threshold",GJ="ordinal",eH="point",A6e="band",YJ="bin-ordinal",Cs="continuous",TI="discrete",AI="discretizing",yc="interpolating",KJ="temporal";function B7t(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function j7t(e){return function(t){const n=e.range();let r=t[0],i=t[1],s=-1,o,a,u,l;for(i<r&&(a=r,r=i,i=a),u=0,l=n.length;u<l;++u)n[u]>=r&&n[u]<=i&&(s<0&&(s=u),o=u);if(!(s<0))return r=e.invertExtent(n[s]),i=e.invertExtent(n[o]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function XJ(){const e=RE().unknown(void 0),t=e.domain,n=e.range;let r=[0,1],i,s,o=!1,a=0,u=0,l=.5;delete e.unknown;function c(){const f=t().length,d=r[1]<r[0],h=r[1-d],p=WJ(f,a,u);let m=r[d-0];i=(h-m)/(p||1),o&&(i=Math.floor(i)),m+=(h-m-i*(f-a))*l,s=i*(1-a),o&&(m=Math.round(m),s=Math.round(s));const g=Nv(f).map(y=>m+i*y);return n(d?g.reverse():g)}return e.domain=function(f){return arguments.length?(t(f),c()):t()},e.range=function(f){return arguments.length?(r=[+f[0],+f[1]],c()):r.slice()},e.rangeRound=function(f){return r=[+f[0],+f[1]],o=!0,c()},e.bandwidth=function(){return s},e.step=function(){return i},e.round=function(f){return arguments.length?(o=!!f,c()):o},e.padding=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),a=u,c()):a},e.paddingInner=function(f){return arguments.length?(a=Math.max(0,Math.min(1,f)),c()):a},e.paddingOuter=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),c()):u},e.align=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),c()):l},e.invertRange=function(f){if(f[0]==null||f[1]==null)return;const d=r[1]<r[0],h=d?n().reverse():n(),p=h.length-1;let m=+f[0],g=+f[1],y,v,_;if(!(m!==m||g!==g)&&(g<m&&(_=m,m=g,g=_),!(g<h[0]||m>r[1-d])))return y=Math.max(0,F3(h,m)-1),v=m===g?y:F3(h,g)-1,m-h[y]>s+1e-10&&++y,d&&(_=y,y=p-v,v=p-_),y>v?void 0:t().slice(y,v+1)},e.invert=function(f){const d=e.invertRange([f,f]);return d&&d[0]},e.copy=function(){return XJ().domain(t()).range(r).round(o).paddingInner(a).paddingOuter(u).align(l)},c()}function C6e(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return C6e(t())},e}function z7t(){return C6e(XJ().paddingInner(1))}var U7t=Array.prototype.map;function V7t(e){return U7t.call(e,Ho)}const H7t=Array.prototype.slice;function I6e(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[(F3(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=V7t(r),n):e.slice()},n.range=function(r){return arguments.length?(t=H7t.call(r),n):t.slice()},n.tickFormat=function(r,i){return LPe(e[0],Un(e),r??10,i)},n.copy=function(){return I6e().domain(n.domain()).range(n.range())},n}const z3=new Map,O6e=Symbol("vega_scale");function P6e(e){return e[O6e]=!0,e}function q7t(e){return e&&e[O6e]===!0}function W7t(e,t,n){const r=function(){const s=t();return s.invertRange||(s.invertRange=s.invert?B7t(s):s.invertExtent?j7t(s):void 0),s.type=e,P6e(s)};return r.metadata=cf(nt(n)),r}function or(e,t,n){return arguments.length>1?(z3.set(e,W7t(e,t,n)),this):k6e(e)?z3.get(e):void 0}or(F7t,MPe);or(Bw,Ap,Cs);or(Dp,BPe,[Cs,Dp]);or(xI,ZY,Cs);or(SI,BTt,Cs);or(iF,jPe,Cs);or(U1,eke,[Cs,KJ]);or(V1,oAt,[Cs,KJ]);or(Od,rK,[Cs,yc]);or(`${Od}-${Bw}`,rK,[Cs,yc]);or(`${Od}-${Dp}`,tke,[Cs,yc,Dp]);or(`${Od}-${xI}`,iK,[Cs,yc]);or(`${Od}-${SI}`,aAt,[Cs,yc]);or(`${Od}-${iF}`,nke,[Cs,yc]);or(`${nx}-${Bw}`,rke,[Cs,yc]);or(`${nx}-${Dp}`,ike,[Cs,yc,Dp]);or(`${nx}-${xI}`,sK,[Cs,yc]);or(`${nx}-${SI}`,uAt,[Cs,yc]);or(`${nx}-${iF}`,ske,[Cs,yc]);or(jw,zPe,[AI,jw]);or(sF,UPe,AI);or(oF,VPe,AI);or(YJ,I6e,[TI,AI]);or(GJ,RE,TI);or(A6e,XJ,TI);or(eH,z7t,TI);function k6e(e){return z3.has(e)}function Mv(e,t){const n=z3.get(e);return n&&n.metadata[t]}function QJ(e){return Mv(e,Cs)}function zw(e){return Mv(e,TI)}function tH(e){return Mv(e,AI)}function $6e(e){return Mv(e,Dp)}function G7t(e){return Mv(e,KJ)}function R6e(e){return Mv(e,yc)}function N6e(e){return Mv(e,jw)}const Y7t=["clamp","base","constant","exponent"];function D6e(e,t){const n=t[0],r=Un(t)-n;return function(i){return e(n+i*r)}}function aF(e,t,n){return jY(JJ(t||"rgb",n),e)}function L6e(e,t){const n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function M6e(e,t,n){const r=n-t;let i,s,o;return!r||!Number.isFinite(r)?na(.5):(i=(s=e.type).indexOf("-"),s=i<0?s:s.slice(i+1),o=or(s)().domain([t,n]).range([0,1]),Y7t.forEach(a=>e[a]?o[a](e[a]()):0),o)}function JJ(e,t){const n=Bwt[K7t(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function K7t(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const X7t={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},Q7t={category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"};function F6e(e){const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function B6e(e,t){for(const n in e)ZJ(n,t(e[n]))}const nge={};B6e(Q7t,F6e);B6e(X7t,e=>aF(F6e(e)));function ZJ(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(nge[e]=t,this):nge[e]}const w$="symbol",J7t="discrete",Z7t="gradient",ezt=e=>Ie(e)?e.map(t=>String(t)):String(e),tzt=(e,t)=>e[1]-t[1],nzt=(e,t)=>t[1]-e[1];function eZ(e,t,n){let r;return Jn(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(vI(e.domain())/n||1)+1))),st(t)&&(r=t.step,t=t.interval),rt(t)&&(t=e.type===U1?ZE(t):e.type==V1?ex(t):Te("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function j6e(e,t,n){let r=e.range(),i=r[0],s=Un(r),o=tzt;if(i>s&&(r=s,s=i,i=r,o=nzt),i=Math.floor(i),s=Math.ceil(s),t=t.map(a=>[a,e(a)]).filter(a=>i<=a[1]&&a[1]<=s).sort(o).map(a=>a[0]),n>0&&t.length>1){const a=[t[0],Un(t)];for(;t.length>n&&t.length>=3;)t=t.filter((u,l)=>!(l%2));t.length<3&&(t=a)}return t}function tZ(e,t){return e.bins?j6e(e,e.bins):e.ticks?e.ticks(t):e.domain()}function z6e(e,t,n,r,i,s){const o=t.type;let a=ezt;if(o===U1||i===U1)a=e.timeFormat(r);else if(o===V1||i===V1)a=e.utcFormat(r);else if($6e(o)){const u=e.formatFloat(r);if(s||t.bins)a=u;else{const l=U6e(t,n,!1);a=c=>l(c)?u(c):""}}else if(t.tickFormat){const u=t.domain();a=e.formatSpan(u[0],u[u.length-1],n,r)}else r&&(a=e.format(r));return a}function U6e(e,t,n){const r=tZ(e,t),i=e.base(),s=Math.log(i),o=Math.max(1,i*t/r.length),a=u=>{let l=u/Math.pow(i,Math.round(Math.log(u)/s));return l*i<i-.5&&(l*=i),l<=o};return n?r.filter(a):a}const nH={[jw]:"quantiles",[sF]:"thresholds",[oF]:"domain"},V6e={[jw]:"quantiles",[sF]:"domain"};function H6e(e,t){return e.bins?szt(e.bins):e.type===Dp?U6e(e,t,!0):nH[e.type]?izt(e[nH[e.type]]()):tZ(e,t)}function rzt(e,t,n){const r=t[V6e[t.type]](),i=r.length;let s=i>1?r[1]-r[0]:r[0],o;for(o=1;o<i;++o)s=Math.min(s,r[o]-r[o-1]);return e.formatSpan(0,s,3*10,n)}function izt(e){const t=[-1/0].concat(e);return t.max=1/0,t}function szt(e){const t=e.slice(0,-1);return t.max=Un(e),t}const ozt=e=>nH[e.type]||e.bins;function q6e(e,t,n,r,i,s,o){const a=V6e[t.type]&&s!==U1&&s!==V1?rzt(e,t,i):z6e(e,t,n,i,s,o);return r===w$&&ozt(t)?azt(a):r===J7t?uzt(a):lzt(a)}const azt=e=>(t,n,r)=>{const i=rge(r[n+1],rge(r.max,1/0)),s=ige(t,e),o=ige(i,e);return s&&o?s+"  "+o:o?"< "+o:" "+s},rge=(e,t)=>e??t,uzt=e=>(t,n)=>n?e(t):null,lzt=e=>t=>e(t),ige=(e,t)=>Number.isFinite(e)?t(e):null;function czt(e){const t=e.domain(),n=t.length-1;let r=+t[0],i=+Un(t),s=i-r;if(e.type===oF){const o=n?s/n:.1;r-=o,i+=o,s=i-r}return o=>(o-r)/s}function fzt(e,t,n,r){const i=r||t.type;return rt(n)&&G7t(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===U1?e.timeFormat("%A, %d %B %Y, %X"):!n&&i===V1?e.utcFormat("%A, %d %B %Y, %X UTC"):q6e(e,t,5,null,n,r,!0)}function W6e(e,t,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=fzt(e,t,n.format,n.formatType);if(tH(t.type)){const s=H6e(t).slice(1).map(i),o=s.length;return`${o} boundar${o===1?"y":"ies"}: ${s.join(", ")}`}else if(zw(t.type)){const s=t.domain(),o=s.length,a=o>r?s.slice(0,r-2).map(i).join(", ")+", ending with "+s.slice(-1).map(i):s.map(i).join(", ");return`${o} value${o===1?"":"s"}: ${a}`}else{const s=t.domain();return`values from ${i(s[0])} to ${i(Un(s))}`}}let G6e=0;function dzt(){G6e=0}const U3="p_";function nZ(e){return e&&e.gradient}function Y6e(e,t,n){const r=e.gradient;let i=e.id,s=r==="radial"?U3:"";return i||(i=e.id="gradient_"+G6e++,r==="radial"?(e.x1=Df(e.x1,.5),e.y1=Df(e.y1,.5),e.r1=Df(e.r1,0),e.x2=Df(e.x2,.5),e.y2=Df(e.y2,.5),e.r2=Df(e.r2,.5),s=U3):(e.x1=Df(e.x1,0),e.y1=Df(e.y1,0),e.x2=Df(e.x2,1),e.y2=Df(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+s+i+")"}function Df(e,t){return e??t}function K6e(e,t){var n=[],r;return r={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(i,s){return n.push({offset:i,color:s}),r}}}const sge={basis:{curve:xAt},"basis-closed":{curve:SAt},"basis-open":{curve:TAt},bundle:{curve:AAt,tension:"beta",value:.85},cardinal:{curve:CAt,tension:"tension",value:0},"cardinal-open":{curve:OAt,tension:"tension",value:0},"cardinal-closed":{curve:IAt,tension:"tension",value:0},"catmull-rom":{curve:PAt,tension:"alpha",value:.5},"catmull-rom-closed":{curve:kAt,tension:"alpha",value:.5},"catmull-rom-open":{curve:$At,tension:"alpha",value:.5},linear:{curve:oK},"linear-closed":{curve:RAt},monotone:{horizontal:DAt,vertical:NAt},natural:{curve:LAt},step:{curve:MAt},"step-after":{curve:BAt},"step-before":{curve:FAt}};function rZ(e,t,n){var r=Nt(sge,e)&&sge[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&n!=null&&(i=i[r.tension](n))),i}const hzt={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},pzt=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,mzt=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,gzt=/^((\s+,?\s*)|(,\s*))/,yzt=/^[01]/;function Uw(e){const t=[];return(e.match(pzt)||[]).forEach(r=>{let i=r[0];const s=i.toLowerCase(),o=hzt[s],a=vzt(s,o,r.slice(1).trim()),u=a.length;if(u<o||u&&u%o!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([i,...a.slice(0,o)]),u!==o){s==="m"&&(i=i==="M"?"L":"l");for(let l=o;l<u;l+=o)t.push([i,...a.slice(l,l+o)])}}),t}function vzt(e,t,n){const r=[];for(let i=0;t&&i<n.length;)for(let s=0;s<t;++s){const o=e==="a"&&(s===3||s===4)?yzt:mzt,a=n.slice(i).match(o);if(a===null)throw Error("Invalid SVG path, incorrect parameter type");i+=a[0].length,r.push(+a[0]);const u=n.slice(i).match(gzt);u!==null&&(i+=u[0].length)}return r}const n0=Math.PI/180,_zt=1e-14,Ry=Math.PI/2,ud=Math.PI*2,m_=Math.sqrt(3)/2;var oj={},aj={},X6e=[].join;function bzt(e,t,n,r,i,s,o,a,u){const l=X6e.call(arguments);if(oj[l])return oj[l];const c=o*n0,f=Math.sin(c),d=Math.cos(c);n=Math.abs(n),r=Math.abs(r);const h=d*(a-e)*.5+f*(u-t)*.5,p=d*(u-t)*.5-f*(a-e)*.5;let m=h*h/(n*n)+p*p/(r*r);m>1&&(m=Math.sqrt(m),n*=m,r*=m);const g=d/n,y=f/n,v=-f/r,_=d/r,b=g*a+y*u,E=v*a+_*u,w=g*e+y*t,x=v*e+_*t;let I=1/((w-b)*(w-b)+(x-E)*(x-E))-.25;I<0&&(I=0);let C=Math.sqrt(I);s==i&&(C=-C);const O=.5*(b+w)-C*(x-E),z=.5*(E+x)+C*(w-b),N=Math.atan2(E-z,b-O);let D=Math.atan2(x-z,w-O)-N;D<0&&s===1?D+=ud:D>0&&s===0&&(D-=ud);const B=Math.ceil(Math.abs(D/(Ry+.001))),V=[];for(let j=0;j<B;++j){const G=N+j*D/B,U=N+(j+1)*D/B;V[j]=[O,z,G,U,n,r,f,d]}return oj[l]=V}function wzt(e){const t=X6e.call(e);if(aj[t])return aj[t];var n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],u=e[6],l=e[7];const c=l*o,f=-u*a,d=u*o,h=l*a,p=Math.cos(i),m=Math.sin(i),g=Math.cos(s),y=Math.sin(s),v=.5*(s-i),_=Math.sin(v*.5),b=8/3*_*_/Math.sin(v),E=n+p-b*m,w=r+m+b*p,x=n+g,S=r+y,I=x+b*y,C=S-b*g;return aj[t]=[c*E+f*w,d*E+h*w,c*I+f*C,d*I+h*C,c*x+f*S,d*x+h*S]}const Tl=["l",0,0,0,0,0,0,0];function Ezt(e,t,n){const r=Tl[0]=e[0];if(r==="a"||r==="A")Tl[1]=t*e[1],Tl[2]=n*e[2],Tl[3]=e[3],Tl[4]=e[4],Tl[5]=e[5],Tl[6]=t*e[6],Tl[7]=n*e[7];else if(r==="h"||r==="H")Tl[1]=t*e[1];else if(r==="v"||r==="V")Tl[1]=n*e[1];else for(var i=1,s=e.length;i<s;++i)Tl[i]=(i%2==1?t:n)*e[i];return Tl}function kA(e,t,n,r,i,s){var o,a=null,u=0,l=0,c=0,f=0,d,h,p,m,g=0,y=0;n==null&&(n=0),r==null&&(r=0),i==null&&(i=1),s==null&&(s=i),e.beginPath&&e.beginPath();for(var v=0,_=t.length;v<_;++v){switch(o=t[v],(i!==1||s!==1)&&(o=Ezt(o,i,s)),o[0]){case"l":u+=o[1],l+=o[2],e.lineTo(u+n,l+r);break;case"L":u=o[1],l=o[2],e.lineTo(u+n,l+r);break;case"h":u+=o[1],e.lineTo(u+n,l+r);break;case"H":u=o[1],e.lineTo(u+n,l+r);break;case"v":l+=o[1],e.lineTo(u+n,l+r);break;case"V":l=o[1],e.lineTo(u+n,l+r);break;case"m":u+=o[1],l+=o[2],g=u,y=l,e.moveTo(u+n,l+r);break;case"M":u=o[1],l=o[2],g=u,y=l,e.moveTo(u+n,l+r);break;case"c":d=u+o[5],h=l+o[6],c=u+o[3],f=l+o[4],e.bezierCurveTo(u+o[1]+n,l+o[2]+r,c+n,f+r,d+n,h+r),u=d,l=h;break;case"C":u=o[5],l=o[6],c=o[3],f=o[4],e.bezierCurveTo(o[1]+n,o[2]+r,c+n,f+r,u+n,l+r);break;case"s":d=u+o[3],h=l+o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,u+o[1]+n,l+o[2]+r,d+n,h+r),c=u+o[1],f=l+o[2],u=d,l=h;break;case"S":d=o[3],h=o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"q":d=u+o[3],h=l+o[4],c=u+o[1],f=l+o[2],e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"Q":d=o[3],h=o[4],e.quadraticCurveTo(o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"t":d=u+o[1],h=l+o[2],a[0].match(/[QqTt]/)===null?(c=u,f=l):a[0]==="t"?(c=2*u-p,f=2*l-m):a[0]==="q"&&(c=2*u-c,f=2*l-f),p=c,m=f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h,c=u+o[1],f=l+o[2];break;case"T":d=o[1],h=o[2],c=2*u-c,f=2*l-f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"a":oge(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+u+n,o[7]+l+r]),u+=o[6],l+=o[7];break;case"A":oge(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+n,o[7]+r]),u=o[6],l=o[7];break;case"z":case"Z":u=g,l=y,e.closePath();break}a=o}}function oge(e,t,n,r){const i=bzt(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let s=0;s<i.length;++s){const o=wzt(i[s]);e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}const age=.5773502691896257,uge={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,ud)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,s=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-s),e.lineTo(i,-s),e.lineTo(0,-n),e.lineTo(-i,-s),e.lineTo(-r,-s),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=m_*n,i=r-n*age,s=n/4;e.moveTo(0,-r-i),e.lineTo(-s,r-i),e.lineTo(s,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=m_*n,i=r-n*age;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=m_*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=m_*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=m_*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=m_*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function Q6e(e){return Nt(uge,e)?uge[e]:xzt(e)}var uj={};function xzt(e){if(!Nt(uj,e)){const t=Uw(e);uj[e]={draw:function(n,r){kA(n,t,0,0,Math.sqrt(r)/2)}}}return uj[e]}const ym=.448084975506;function Szt(e){return e.x}function Tzt(e){return e.y}function Azt(e){return e.width}function Czt(e){return e.height}function wh(e){return typeof e=="function"?e:()=>+e}function LP(e,t,n){return Math.max(t,Math.min(e,n))}function J6e(){var e=Szt,t=Tzt,n=Azt,r=Czt,i=wh(0),s=i,o=i,a=i,u=null;function l(c,f,d){var h,p=f??+e.call(this,c),m=d??+t.call(this,c),g=+n.call(this,c),y=+r.call(this,c),v=Math.min(g,y)/2,_=LP(+i.call(this,c),0,v),b=LP(+s.call(this,c),0,v),E=LP(+o.call(this,c),0,v),w=LP(+a.call(this,c),0,v);if(u||(u=h=G6()),_<=0&&b<=0&&E<=0&&w<=0)u.rect(p,m,g,y);else{var x=p+g,S=m+y;u.moveTo(p+_,m),u.lineTo(x-b,m),u.bezierCurveTo(x-ym*b,m,x,m+ym*b,x,m+b),u.lineTo(x,S-w),u.bezierCurveTo(x,S-ym*w,x-ym*w,S,x-w,S),u.lineTo(p+E,S),u.bezierCurveTo(p+ym*E,S,p,S-ym*E,p,S-E),u.lineTo(p,m+_),u.bezierCurveTo(p,m+ym*_,p+ym*_,m,p+_,m),u.closePath()}if(h)return u=null,h+""||null}return l.x=function(c){return arguments.length?(e=wh(c),l):e},l.y=function(c){return arguments.length?(t=wh(c),l):t},l.width=function(c){return arguments.length?(n=wh(c),l):n},l.height=function(c){return arguments.length?(r=wh(c),l):r},l.cornerRadius=function(c,f,d,h){return arguments.length?(i=wh(c),s=f!=null?wh(f):i,a=d!=null?wh(d):i,o=h!=null?wh(h):s,l):i},l.context=function(c){return arguments.length?(u=c??null,l):u},l}function Z6e(){var e,t,n,r,i=null,s,o,a,u;function l(f,d,h){const p=h/2;if(s){var m=a-d,g=f-o;if(m||g){var y=Math.hypot(m,g),v=(m/=y)*u,_=(g/=y)*u,b=Math.atan2(g,m);i.moveTo(o-v,a-_),i.lineTo(f-m*p,d-g*p),i.arc(f,d,p,b-Math.PI,b),i.lineTo(o+v,a+_),i.arc(o,a,u,b,b+Math.PI)}else i.arc(f,d,p,0,ud);i.closePath()}else s=1;o=f,a=d,u=p}function c(f){var d,h=f.length,p,m=!1,g;for(i==null&&(i=g=G6()),d=0;d<=h;++d)!(d<h&&r(p=f[d],d,f))===m&&(m=!m)&&(s=0),m&&l(+e(p,d,f),+t(p,d,f),+n(p,d,f));if(g)return i=null,g+""||null}return c.x=function(f){return arguments.length?(e=f,c):e},c.y=function(f){return arguments.length?(t=f,c):t},c.size=function(f){return arguments.length?(n=f,c):n},c.defined=function(f){return arguments.length?(r=f,c):r},c.context=function(f){return arguments.length?(f==null?i=null:i=f,c):i},c}function CI(e,t){return e??t}const II=e=>e.x||0,OI=e=>e.y||0,Izt=e=>e.width||0,Ozt=e=>e.height||0,Pzt=e=>(e.x||0)+(e.width||0),kzt=e=>(e.y||0)+(e.height||0),$zt=e=>e.startAngle||0,Rzt=e=>e.endAngle||0,Nzt=e=>e.padAngle||0,Dzt=e=>e.innerRadius||0,Lzt=e=>e.outerRadius||0,Mzt=e=>e.cornerRadius||0,Fzt=e=>CI(e.cornerRadiusTopLeft,e.cornerRadius)||0,Bzt=e=>CI(e.cornerRadiusTopRight,e.cornerRadius)||0,jzt=e=>CI(e.cornerRadiusBottomRight,e.cornerRadius)||0,zzt=e=>CI(e.cornerRadiusBottomLeft,e.cornerRadius)||0,Uzt=e=>CI(e.size,64),Vzt=e=>e.size||1,uF=e=>e.defined!==!1,Hzt=e=>Q6e(e.shape||"circle"),qzt=BU().startAngle($zt).endAngle(Rzt).padAngle(Nzt).innerRadius(Dzt).outerRadius(Lzt).cornerRadius(Mzt),Wzt=fke().x(II).y1(OI).y0(kzt).defined(uF),Gzt=fke().y(OI).x1(II).x0(Pzt).defined(uF),Yzt=cke().x(II).y(OI).defined(uF),Kzt=J6e().x(II).y(OI).width(Izt).height(Ozt).cornerRadius(Fzt,Bzt,jzt,zzt),Xzt=EAt().type(Hzt).size(Uzt),Qzt=Z6e().x(II).y(OI).defined(uF).size(Vzt);function iZ(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function Jzt(e,t){return qzt.context(e)(t)}function Zzt(e,t){const n=t[0],r=n.interpolate||"linear";return(n.orient==="horizontal"?Gzt:Wzt).curve(rZ(r,n.orient,n.tension)).context(e)(t)}function eUt(e,t){const n=t[0],r=n.interpolate||"linear";return Yzt.curve(rZ(r,n.orient,n.tension)).context(e)(t)}function rx(e,t,n,r){return Kzt.context(e)(t,n,r)}function tUt(e,t){return(t.mark.shape||t.shape).context(e)(t)}function nUt(e,t){return Xzt.context(e)(t)}function rUt(e,t){return Qzt.context(e)(t)}var e4e=1;function t4e(){e4e=1}function sZ(e,t,n){var r=t.clip,i=e._defs,s=t.clip_id||(t.clip_id="clip"+e4e++),o=i.clipping[s]||(i.clipping[s]={id:s});return pn(r)?o.path=r(null):iZ(n)?o.path=rx(null,n,0,0):(o.width=n.width||0,o.height=n.height||0),"url(#"+s+")"}function os(e){this.clear(),e&&this.union(e)}os.prototype={clone(){return new os(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var{x1:r,y1:i,x2:s,y2:o}=this,a=Math.cos(e),u=Math.sin(e),l=t-t*a+n*u,c=n-t*u-n*a;return[a*r-u*i+l,u*r+a*i+c,a*r-u*o+l,u*r+a*o+c,a*s-u*i+l,u*s+a*i+c,a*s-u*o+l,u*s+a*o+c]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function lF(e){this.mark=e,this.bounds=this.bounds||new os}function cF(e){lF.call(this,e),this.items=this.items||[]}We(cF,lF);function oZ(e){this._pending=0,this._loader=e||W4()}function lge(e){e._pending+=1}function gS(e){e._pending-=1}oZ.prototype={pending(){return this._pending},sanitizeURL(e){const t=this;return lge(t),t._loader.sanitize(e,{context:"href"}).then(n=>(gS(t),n)).catch(()=>(gS(t),null))},loadImage(e){const t=this,n=M7t();return lge(t),t._loader.sanitize(e,{context:"image"}).then(r=>{const i=r.href;if(!i||!n)throw{url:i};const s=new n,o=Nt(r,"crossOrigin")?r.crossOrigin:"anonymous";return o!=null&&(s.crossOrigin=o),s.onload=()=>gS(t),s.onerror=()=>gS(t),s.src=i,s}).catch(r=>(gS(t),{complete:!1,width:0,height:0,src:r&&r.url||""}))},ready(){const e=this;return new Promise(t=>{function n(r){e.pending()?setTimeout(()=>{n(!0)},10):t(r)}n(!1)})}};function tm(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const r=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(r+(n?iUt(t,r):0))}return e}function iUt(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const sUt=ud-1e-8;let fF,E$,x$,Jy,rH,S$,iH,sH;const Zm=(e,t)=>fF.add(e,t),T$=(e,t)=>Zm(E$=e,x$=t),cge=e=>Zm(e,fF.y1),fge=e=>Zm(fF.x1,e),Ny=(e,t)=>rH*e+iH*t,Dy=(e,t)=>S$*e+sH*t,lj=(e,t)=>Zm(Ny(e,t),Dy(e,t)),cj=(e,t)=>T$(Ny(e,t),Dy(e,t));function PI(e,t){return fF=e,t?(Jy=t*n0,rH=sH=Math.cos(Jy),S$=Math.sin(Jy),iH=-S$):(rH=sH=1,Jy=S$=iH=0),oUt}const oUt={beginPath(){},closePath(){},moveTo:cj,lineTo:cj,rect(e,t,n,r){Jy?(lj(e+n,t),lj(e+n,t+r),lj(e,t+r),cj(e,t)):(Zm(e+n,t+r),T$(e,t))},quadraticCurveTo(e,t,n,r){const i=Ny(e,t),s=Dy(e,t),o=Ny(n,r),a=Dy(n,r);dge(E$,i,o,cge),dge(x$,s,a,fge),T$(o,a)},bezierCurveTo(e,t,n,r,i,s){const o=Ny(e,t),a=Dy(e,t),u=Ny(n,r),l=Dy(n,r),c=Ny(i,s),f=Dy(i,s);hge(E$,o,u,c,cge),hge(x$,a,l,f,fge),T$(c,f)},arc(e,t,n,r,i,s){if(r+=Jy,i+=Jy,E$=n*Math.cos(i)+e,x$=n*Math.sin(i)+t,Math.abs(i-r)>sUt)Zm(e-n,t-n),Zm(e+n,t+n);else{const o=l=>Zm(n*Math.cos(l)+e,n*Math.sin(l)+t);let a,u;if(o(r),o(i),i!==r)if(r=r%ud,r<0&&(r+=ud),i=i%ud,i<0&&(i+=ud),i<r&&(s=!s,a=r,r=i,i=a),s)for(i-=ud,a=r-r%Ry,u=0;u<4&&a>i;++u,a-=Ry)o(a);else for(a=r-r%Ry+Ry,u=0;u<4&&a<i;++u,a=a+Ry)o(a)}}};function dge(e,t,n,r){const i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function hge(e,t,n,r,i){const s=r-e+3*t-3*n,o=e+n-2*t,a=e-t;let u=0,l=0,c;Math.abs(s)>_zt?(c=o*o+a*s,c>=0&&(c=Math.sqrt(c),u=(-o+c)/s,l=(-o-c)/s)):u=.5*a/o,0<u&&u<1&&i(pge(u,e,t,n,r)),0<l&&l<1&&i(pge(l,e,t,n,r))}function pge(e,t,n,r,i){const s=1-e,o=s*s,a=e*e;return o*s*t+3*o*e*n+3*s*a*r+a*e*i}var Pg=(Pg=Og(1,1))?Pg.getContext("2d"):null;const oH=new os;function aZ(e){return function(t,n){if(!Pg)return!0;e(Pg,t),oH.clear().union(t.bounds).intersect(n).round();const{x1:r,y1:i,x2:s,y2:o}=oH;for(let a=i;a<=o;++a)for(let u=r;u<=s;++u)if(Pg.isPointInPath(u,a))return!0;return!1}}function uZ(e,t){return t.contains(e.x||0,e.y||0)}function n4e(e,t){const n=e.x||0,r=e.y||0,i=e.width||0,s=e.height||0;return t.intersects(oH.set(n,r,n+i,r+s))}function r4e(e,t){const n=e.x||0,r=e.y||0,i=e.x2!=null?e.x2:n,s=e.y2!=null?e.y2:r;return ob(t,n,r,i,s)}function ob(e,t,n,r,i){const{x1:s,y1:o,x2:a,y2:u}=e,l=r-t,c=i-n;let f=0,d=1,h,p,m,g;for(g=0;g<4;++g){if(g===0&&(h=-l,p=-(s-t)),g===1&&(h=l,p=a-t),g===2&&(h=-c,p=-(o-n)),g===3&&(h=c,p=u-n),Math.abs(h)<1e-10&&p<0)return!1;if(m=p/h,h<0){if(m>d)return!1;m>f&&(f=m)}else if(h>0){if(m<f)return!1;m<d&&(d=m)}}return!0}function Vw(e,t){e.globalCompositeOperation=t.blend||"source-over"}function Cc(e,t){return e??t}function mge(e,t){const n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function aUt(e,t,n){const r=n.width(),i=n.height();let s;if(t.gradient==="radial")s=e.createRadialGradient(n.x1+Cc(t.x1,.5)*r,n.y1+Cc(t.y1,.5)*i,Math.max(r,i)*Cc(t.r1,0),n.x1+Cc(t.x2,.5)*r,n.y1+Cc(t.y2,.5)*i,Math.max(r,i)*Cc(t.r2,.5));else{const o=Cc(t.x1,0),a=Cc(t.y1,0),u=Cc(t.x2,1),l=Cc(t.y2,0);if(o===u||a===l||r===i)s=e.createLinearGradient(n.x1+o*r,n.y1+a*i,n.x1+u*r,n.y1+l*i);else{const c=Og(Math.ceil(r),Math.ceil(i)),f=c.getContext("2d");return f.scale(r,i),f.fillStyle=mge(f.createLinearGradient(o,a,u,l),t.stops),f.fillRect(0,0,r,i),e.createPattern(c,"no-repeat")}}return mge(s,t.stops)}function i4e(e,t,n){return nZ(n)?aUt(e,n,t.bounds):n}function V3(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=i4e(e,t,t.fill),!0):!1}var uUt=[];function Hw(e,t,n){var r=(r=t.strokeWidth)!=null?r:1;return r<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=i4e(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||uUt),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function lUt(e,t){return e.zindex-t.zindex||e.index-t.index}function lZ(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],r,i,s;for(i=0,s=t.length;i<s;++i)r=t[i],r.index=i,r.zindex&&n.push(r);return e.zdirty=!1,e.zitems=n.sort(lUt)}function df(e,t){var n=e.items,r,i;if(!n||!n.length)return;const s=lZ(e);if(s&&s.length){for(r=0,i=n.length;r<i;++r)n[r].zindex||t(n[r]);n=s}for(r=0,i=n.length;r<i;++r)t(n[r])}function H3(e,t){var n=e.items,r,i;if(!n||!n.length)return null;const s=lZ(e);for(s&&s.length&&(n=s),i=n.length;--i>=0;)if(r=t(n[i]))return r;if(n===s){for(n=e.items,i=n.length;--i>=0;)if(!n[i].zindex&&(r=t(n[i])))return r}return null}function cZ(e){return function(t,n,r){df(n,i=>{(!r||r.intersects(i.bounds))&&s4e(e,t,i,i)})}}function cUt(e){return function(t,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&s4e(e,t,n.items[0],n.items)}}function s4e(e,t,n,r){var i=n.opacity==null?1:n.opacity;i!==0&&(e(t,r)||(Vw(t,n),n.fill&&V3(t,n,i)&&t.fill(),n.stroke&&Hw(t,n,i)&&t.stroke()))}function dF(e){return e=e||nc,function(t,n,r,i,s,o){return r*=t.pixelRatio,i*=t.pixelRatio,H3(n,a=>{const u=a.bounds;if(!(u&&!u.contains(s,o)||!u)&&e(t,a,r,i,s,o))return a})}}function kI(e,t){return function(n,r,i,s){var o=Array.isArray(r)?r[0]:r,a=t??o.fill,u=o.stroke&&n.isPointInStroke,l,c;return u&&(l=o.strokeWidth,c=o.strokeCap,n.lineWidth=l??1,n.lineCap=c??"butt"),e(n,r)?!1:a&&n.isPointInPath(i,s)||u&&n.isPointInStroke(i,s)}}function fZ(e){return dF(kI(e))}function m1(e,t){return"translate("+e+","+t+")"}function dZ(e){return"rotate("+e+")"}function fUt(e,t){return"scale("+e+","+t+")"}function o4e(e){return m1(e.x||0,e.y||0)}function dUt(e){return m1(e.x||0,e.y||0)+(e.angle?" "+dZ(e.angle):"")}function hUt(e){return m1(e.x||0,e.y||0)+(e.angle?" "+dZ(e.angle):"")+(e.scaleX||e.scaleY?" "+fUt(e.scaleX||1,e.scaleY||1):"")}function hZ(e,t,n){function r(o,a){o("transform",dUt(a)),o("d",t(null,a))}function i(o,a){return t(PI(o,a.angle),a),tm(o,a).translate(a.x||0,a.y||0)}function s(o,a){var u=a.x||0,l=a.y||0,c=a.angle||0;o.translate(u,l),c&&o.rotate(c*=n0),o.beginPath(),t(o,a),c&&o.rotate(-c),o.translate(-u,-l)}return{type:e,tag:"path",nested:!1,attr:r,bound:i,draw:cZ(s),pick:fZ(s),isect:n||aZ(s)}}var pUt=hZ("arc",Jzt);function mUt(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],r=e[0].orient==="horizontal"?"y":"x",i=e.length,s=1/0,o,a;--i>=0;)e[i].defined!==!1&&(a=Math.abs(e[i][r]-n),a<s&&(s=a,o=e[i]));return o}function gUt(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),r=e.length,i,s,o;--r>=0;)if(e[r].defined!==!1&&(i=e[r].x-t[0],s=e[r].y-t[1],o=i*i+s*s,o<n))return e[r];return null}function yUt(e,t){for(var n=e.length,r,i,s;--n>=0;)if(e[n].defined!==!1&&(r=e[n].x-t[0],i=e[n].y-t[1],s=r*r+i*i,r=e[n].size||1,s<r*r))return e[n];return null}function pZ(e,t,n){function r(u,l){var c=l.mark.items;c.length&&u("d",t(null,c))}function i(u,l){var c=l.items;return c.length===0?u:(t(PI(u),c),tm(u,c[0]))}function s(u,l){u.beginPath(),t(u,l)}const o=kI(s);function a(u,l,c,f,d,h){var p=l.items,m=l.bounds;return!p||!p.length||m&&!m.contains(d,h)?null:(c*=u.pixelRatio,f*=u.pixelRatio,o(u,p,c,f)?p[0]:null)}return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:cUt(s),pick:a,isect:uZ,tip:n}}var vUt=pZ("area",Zzt,mUt);function _Ut(e,t){var n=t.clip;e.save(),pn(n)?(e.beginPath(),n(e),e.clip()):a4e(e,t.group)}function a4e(e,t){e.beginPath(),iZ(t)?rx(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function u4e(e){const t=Cc(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function bUt(e,t){e("transform",o4e(t))}function l4e(e,t){const n=u4e(t);e("d",rx(null,t,n,n))}function wUt(e,t){e("class","background"),e("aria-hidden",!0),l4e(e,t)}function EUt(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?l4e(e,t):e("d","")}function xUt(e,t,n){const r=t.clip?sZ(n,t,t):null;e("clip-path",r)}function SUt(e,t){if(!t.clip&&t.items){const n=t.items,r=n.length;for(let i=0;i<r;++i)e.union(n[i].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),tm(e,t),e.translate(t.x||0,t.y||0)}function $A(e,t,n,r){const i=u4e(t);e.beginPath(),rx(e,t,(n||0)+i,(r||0)+i)}const TUt=kI($A),AUt=kI($A,!1),CUt=kI($A,!0);function IUt(e,t,n,r){df(t,i=>{const s=i.x||0,o=i.y||0,a=i.strokeForeground,u=i.opacity==null?1:i.opacity;(i.stroke||i.fill)&&u&&($A(e,i,s,o),Vw(e,i),i.fill&&V3(e,i,u)&&e.fill(),i.stroke&&!a&&Hw(e,i,u)&&e.stroke()),e.save(),e.translate(s,o),i.clip&&a4e(e,i),n&&n.translate(-s,-o),df(i,l=>{(l.marktype==="group"||r==null||r.includes(l.marktype))&&this.draw(e,l,n,r)}),n&&n.translate(s,o),e.restore(),a&&i.stroke&&u&&($A(e,i,s,o),Vw(e,i),Hw(e,i,u)&&e.stroke())})}function OUt(e,t,n,r,i,s){if(t.bounds&&!t.bounds.contains(i,s)||!t.items)return null;const o=n*e.pixelRatio,a=r*e.pixelRatio;return H3(t,u=>{let l,c,f;const d=u.bounds;if(d&&!d.contains(i,s))return;c=u.x||0,f=u.y||0;const h=c+(u.width||0),p=f+(u.height||0),m=u.clip;if(m&&(i<c||i>h||s<f||s>p))return;if(e.save(),e.translate(c,f),c=i-c,f=s-f,m&&iZ(u)&&!CUt(e,u,o,a))return e.restore(),null;const g=u.strokeForeground,y=t.interactive!==!1;return y&&g&&u.stroke&&AUt(e,u,o,a)?(e.restore(),u):(l=H3(u,v=>PUt(v,c,f)?this.pick(v,n,r,c,f):null),!l&&y&&(u.fill||!g&&u.stroke)&&TUt(e,u,o,a)&&(l=u),e.restore(),l||null)})}function PUt(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var kUt={type:"group",tag:"g",nested:!1,attr:bUt,bound:SUt,draw:IUt,pick:OUt,isect:n4e,content:xUt,background:wUt,foreground:EUt},RA={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function mZ(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(r=>{e.image=r,e.image.url=e.url})),n}function gZ(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function yZ(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function hF(e,t){return e==="center"?t/2:e==="right"?t:0}function pF(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function $Ut(e,t,n){const r=mZ(t,n),i=gZ(t,r),s=yZ(t,r),o=(t.x||0)-hF(t.align,i),a=(t.y||0)-pF(t.baseline,s),u=!r.src&&r.toDataURL?r.toDataURL():r.src||"";e("href",u,RA["xmlns:xlink"],"xlink:href"),e("transform",m1(o,a)),e("width",i),e("height",s),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function RUt(e,t){const n=t.image,r=gZ(t,n),i=yZ(t,n),s=(t.x||0)-hF(t.align,r),o=(t.y||0)-pF(t.baseline,i);return e.set(s,o,s+r,o+i)}function NUt(e,t,n){df(t,r=>{if(n&&!n.intersects(r.bounds))return;const i=mZ(r,this);let s=gZ(r,i),o=yZ(r,i);if(s===0||o===0)return;let a=(r.x||0)-hF(r.align,s),u=(r.y||0)-pF(r.baseline,o),l,c,f,d;r.aspect!==!1&&(c=i.width/i.height,f=r.width/r.height,c===c&&f===f&&c!==f&&(f<c?(d=s/c,u+=(o-d)/2,o=d):(d=o*c,a+=(s-d)/2,s=d))),(i.complete||i.toDataURL)&&(Vw(e,r),e.globalAlpha=(l=r.opacity)!=null?l:1,e.imageSmoothingEnabled=r.smooth!==!1,e.drawImage(i,a,u,s,o))})}var DUt={type:"image",tag:"image",nested:!1,attr:$Ut,bound:RUt,draw:NUt,pick:dF(),isect:nc,get:mZ,xOffset:hF,yOffset:pF},LUt=pZ("line",eUt,gUt);function MUt(e,t){var n=t.scaleX||1,r=t.scaleY||1;(n!==1||r!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",hUt(t)),e("d",t.path)}function A$(e,t){var n=t.path;if(n==null)return!0;var r=t.x||0,i=t.y||0,s=t.scaleX||1,o=t.scaleY||1,a=(t.angle||0)*n0,u=t.pathCache;(!u||u.path!==n)&&((t.pathCache=u=Uw(n)).path=n),a&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(a),kA(e,u,0,0,s,o),e.rotate(-a),e.translate(-r,-i)):kA(e,u,r,i,s,o)}function FUt(e,t){return A$(PI(e,t.angle),t)?e.set(0,0,0,0):tm(e,t,!0)}var BUt={type:"path",tag:"path",nested:!1,attr:MUt,bound:FUt,draw:cZ(A$),pick:fZ(A$),isect:aZ(A$)};function jUt(e,t){e("d",rx(null,t))}function zUt(e,t){var n,r;return tm(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function gge(e,t){e.beginPath(),rx(e,t)}var UUt={type:"rect",tag:"path",nested:!1,attr:jUt,bound:zUt,draw:cZ(gge),pick:fZ(gge),isect:n4e};function VUt(e,t){e("transform",o4e(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function HUt(e,t){var n,r;return tm(e.set(n=t.x||0,r=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:r),t)}function c4e(e,t,n){var r,i,s,o;return t.stroke&&Hw(e,t,n)?(r=t.x||0,i=t.y||0,s=t.x2!=null?t.x2:r,o=t.y2!=null?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(s,o),!0):!1}function qUt(e,t,n){df(t,r=>{if(!(n&&!n.intersects(r.bounds))){var i=r.opacity==null?1:r.opacity;i&&c4e(e,r,i)&&(Vw(e,r),e.stroke())}})}function WUt(e,t,n,r){return e.isPointInStroke?c4e(e,t,1)&&e.isPointInStroke(n,r):!1}var GUt={type:"rule",tag:"line",nested:!1,attr:VUt,bound:HUt,draw:qUt,pick:dF(WUt),isect:r4e},YUt=hZ("shape",tUt),KUt=hZ("symbol",nUt,uZ);const yge=ULe();var el={height:ah,measureWidth:vZ,estimateWidth:q3,width:q3,canvas:f4e};f4e(!0);function f4e(e){el.width=e&&Pg?vZ:q3}function q3(e,t){return d4e(i0(e,t),ah(e))}function d4e(e,t){return~~(.8*e.length*t)}function vZ(e,t){return ah(e)<=0||!(t=i0(e,t))?0:h4e(t,mF(e))}function h4e(e,t){const n=`(${t}) ${e}`;let r=yge.get(n);return r===void 0&&(Pg.font=t,r=Pg.measureText(e).width,yge.set(n,r)),r}function ah(e){return e.fontSize!=null?+e.fontSize||0:11}function r0(e){return e.lineHeight!=null?e.lineHeight:ah(e)+2}function XUt(e){return Ie(e)?e.length>1?e:e[0]:e}function $I(e){return XUt(e.lineBreak&&e.text&&!Ie(e.text)?e.text.split(e.lineBreak):e.text)}function _Z(e){const t=$I(e);return(Ie(t)?t.length-1:0)*r0(e)}function i0(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?JUt(e,n):n}function QUt(e){if(el.width===vZ){const t=mF(e);return n=>h4e(n,t)}else if(el.width===q3){const t=ah(e);return n=>d4e(n,t)}else return t=>el.width(e,t)}function JUt(e,t){var n=+e.limit,r=QUt(e);if(r(t)<n)return t;var i=e.ellipsis||"",s=e.dir==="rtl",o=0,a=t.length,u;if(n-=r(i),s){for(;o<a;)u=o+a>>>1,r(t.slice(u))>n?o=u+1:a=u;return i+t.slice(o)}else{for(;o<a;)u=1+(o+a>>>1),r(t.slice(0,u))<n?o=u:a=u-1;return t.slice(0,o)+i}}function RI(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function mF(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+ah(e)+"px "+RI(e,t)}function bZ(e){var t=e.baseline,n=ah(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*r0(e):t==="line-bottom"?.29*n-.5*r0(e):0)}const ZUt={left:"start",center:"middle",right:"end"},u2=new os;function gF(e){var t=e.x||0,n=e.y||0,r=e.radius||0,i;return r&&(i=(e.theta||0)-Ry,t+=r*Math.cos(i),n+=r*Math.sin(i)),u2.x1=t,u2.y1=n,u2}function eVt(e,t){var n=t.dx||0,r=(t.dy||0)+bZ(t),i=gF(t),s=i.x1,o=i.y1,a=t.angle||0,u;e("text-anchor",ZUt[t.align]||"start"),a?(u=m1(s,o)+" "+dZ(a),(n||r)&&(u+=" "+m1(n,r))):u=m1(s+n,o+r),e("transform",u)}function wZ(e,t,n){var r=el.height(t),i=t.align,s=gF(t),o=s.x1,a=s.y1,u=t.dx||0,l=(t.dy||0)+bZ(t)-Math.round(.8*r),c=$I(t),f;if(Ie(c)?(r+=r0(t)*(c.length-1),f=c.reduce((d,h)=>Math.max(d,el.width(t,h)),0)):f=el.width(t,c),i==="center"?u-=f/2:i==="right"&&(u-=f),e.set(u+=o,l+=a,u+f,l+r),t.angle&&!n)e.rotate(t.angle*n0,o,a);else if(n===2)return e.rotatedPoints(t.angle*n0,o,a);return e}function tVt(e,t,n){df(t,r=>{var i=r.opacity==null?1:r.opacity,s,o,a,u,l,c,f;if(!(n&&!n.intersects(r.bounds)||i===0||r.fontSize<=0||r.text==null||r.text.length===0)){if(e.font=mF(r),e.textAlign=r.align||"left",s=gF(r),o=s.x1,a=s.y1,r.angle&&(e.save(),e.translate(o,a),e.rotate(r.angle*n0),o=a=0),o+=r.dx||0,a+=(r.dy||0)+bZ(r),c=$I(r),Vw(e,r),Ie(c))for(l=r0(r),u=0;u<c.length;++u)f=i0(r,c[u]),r.fill&&V3(e,r,i)&&e.fillText(f,o,a),r.stroke&&Hw(e,r,i)&&e.strokeText(f,o,a),a+=l;else f=i0(r,c),r.fill&&V3(e,r,i)&&e.fillText(f,o,a),r.stroke&&Hw(e,r,i)&&e.strokeText(f,o,a);r.angle&&e.restore()}})}function nVt(e,t,n,r,i,s){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var o=gF(t),a=o.x1,u=o.y1,l=wZ(u2,t,1),c=-t.angle*n0,f=Math.cos(c),d=Math.sin(c),h=f*i-d*s+(a-f*a+d*u),p=d*i+f*s+(u-d*a-f*u);return l.contains(h,p)}function rVt(e,t){const n=wZ(u2,e,2);return ob(t,n[0],n[1],n[2],n[3])||ob(t,n[0],n[1],n[4],n[5])||ob(t,n[4],n[5],n[6],n[7])||ob(t,n[2],n[3],n[6],n[7])}var iVt={type:"text",tag:"text",nested:!1,attr:eVt,bound:wZ,draw:tVt,pick:dF(nVt),isect:rVt},sVt=pZ("trail",rUt,yUt),cl={arc:pUt,area:vUt,group:kUt,image:DUt,line:LUt,path:BUt,rect:UUt,rule:GUt,shape:YUt,symbol:KUt,text:iVt,trail:sVt};function aH(e,t,n){var r=cl[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new os),e,n)}var vge={mark:null};function p4e(e,t,n){var r=cl[e.marktype],i=r.bound,s=e.items,o=s&&s.length,a,u,l,c;if(r.nested)return o?l=s[0]:(vge.mark=e,l=vge),c=aH(l,i,n),t=t&&t.union(c)||c,t;if(t=t||e.bounds&&e.bounds.clear()||new os,o)for(a=0,u=s.length;a<u;++a)t.union(aH(s[a],i,n));return e.bounds=t}const oVt=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function m4e(e,t){return JSON.stringify(e,oVt,t)}function g4e(e){const t=typeof e=="string"?JSON.parse(e):e;return y4e(t)}function y4e(e){var t=e.marktype,n=e.items,r,i,s;if(n)for(i=0,s=n.length;i<s;++i)r=t?"mark":"group",n[i][r]=e,n[i].zindex&&(n[i][r].zdirty=!0),(t||r)==="group"&&y4e(n[i]);return t&&p4e(e),e}function EZ(e){arguments.length?this.root=g4e(e):(this.root=v4e({marktype:"group",name:"root",role:"frame"}),this.root.items=[new cF(this.root)])}EZ.prototype={toJSON(e){return m4e(this.root,e||0)},mark(e,t,n){t=t||this.root.items[0];const r=v4e(e,t);return t.items[n]=r,r.zindex&&(r.group.zdirty=!0),r}};function v4e(e,t){const n={bounds:new os,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function eg(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function xZ(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function ms(e,t,n,r){var i=e.childNodes[t],s;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(s=i||null,i=eg(e.ownerDocument,n,r),e.insertBefore(i,s)),i}function Ll(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function _4e(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function yF(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function aVt(e,t,n,r){var i=e&&e.mark,s,o;if(i&&(s=cl[i.marktype]).tip){for(o=yF(t,n),o[0]-=r[0],o[1]-=r[1];e=e.mark.group;)o[0]-=e.x||0,o[1]-=e.y||0;e=s.tip(i.items,o)}return e}function s0(e,t){this._active=null,this._handlers={},this._loader=e||W4(),this._tooltip=t||uVt}function uVt(e,t,n,r){e.element().setAttribute("title",r||"")}s0.prototype={initialize(e,t,n){return this._el=e,this._obj=n||null,this.origin(t)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},origin(e){return arguments.length?(this._origin=e||[0,0],this):this._origin.slice()},scene(e){return arguments.length?(this._scene=e,this):this._scene},on(){},off(){},_handlerIndex(e,t,n){for(let r=e?e.length:0;--r>=0;)if(e[r].type===t&&(!n||e[r].handler===n))return r;return-1},handlers(e){const t=this._handlers,n=[];if(e)n.push(...t[this.eventName(e)]);else for(const r in t)n.push(...t[r]);return n},eventName(e){const t=e.indexOf(".");return t<0?e:e.slice(0,t)},handleHref(e,t,n){this._loader.sanitize(n,{context:"href"}).then(r=>{const i=new MouseEvent(e.type,e),s=eg(null,"a");for(const o in r)s.setAttribute(o,r[o]);s.dispatchEvent(i)}).catch(()=>{})},handleTooltip(e,t,n){if(t&&t.tooltip!=null){t=aVt(t,e,this.canvas(),this._origin);const r=n&&t&&t.tooltip||null;this._tooltip.call(this._obj,this,e,t,r)}},getItemBoundingClientRect(e){const t=this.canvas();if(!t)return;const n=t.getBoundingClientRect(),r=this._origin,i=e.bounds,s=i.width(),o=i.height();let a=i.x1+r[0]+n.left,u=i.y1+r[1]+n.top;for(;e.mark&&(e=e.mark.group);)a+=e.x||0,u+=e.y||0;return{x:a,y:u,width:s,height:o,left:a,top:u,right:a+s,bottom:u+o}}};function bl(e){this._el=null,this._bgcolor=null,this._loader=new oZ(e)}bl.prototype={initialize(e,t,n,r,i){return this._el=e,this.resize(t,n,r,i)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},background(e){return arguments.length===0?this._bgcolor:(this._bgcolor=e,this)},resize(e,t,n,r){return this._width=e,this._height=t,this._origin=n||[0,0],this._scale=r||1,this},dirty(){},render(e,t){const n=this;return n._call=function(){n._render(e,t)},n._call(),n._call=null,n},_render(){},renderAsync(e,t){const n=this.render(e,t);return this._ready?this._ready.then(()=>n):Promise.resolve(n)},_load(e,t){var n=this,r=n._loader[e](t);if(!n._ready){const i=n._call;n._ready=n._loader.ready().then(s=>{s&&i(),n._ready=null})}return r},sanitizeURL(e){return this._load("sanitizeURL",e)},loadImage(e){return this._load("loadImage",e)}};const lVt="keydown",cVt="keypress",fVt="keyup",b4e="dragenter",C$="dragleave",w4e="dragover",uH="pointerdown",dVt="pointerup",W3="pointermove",l2="pointerout",E4e="pointerover",lH="mousedown",hVt="mouseup",x4e="mousemove",cH="mouseout",S4e="mouseover",G3="click",pVt="dblclick",mVt="wheel",T4e="mousewheel",Y3="touchstart",K3="touchmove",X3="touchend",gVt=[lVt,cVt,fVt,b4e,C$,w4e,uH,dVt,W3,l2,E4e,lH,hVt,x4e,cH,S4e,G3,pVt,mVt,T4e,Y3,K3,X3],fH=W3,NA=l2,dH=G3;function o0(e,t){s0.call(this,e,t),this._down=null,this._touch=null,this._first=!0,this._events={}}const yVt=e=>e===Y3||e===K3||e===X3?[Y3,K3,X3]:[e];function _ge(e,t){yVt(t).forEach(n=>vVt(e,n))}function vVt(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?r=>e[t](r):r=>e.fire(t,r)))}function uT(e,t,n){t.forEach(r=>e.fire(r,n))}function bge(e,t,n){return function(r){const i=this._active,s=this.pickEvent(r);s===i?uT(this,e,r):((!i||!i.exit)&&uT(this,n,r),this._active=s,uT(this,t,r),uT(this,e,r))}}function wge(e){return function(t){uT(this,e,t),this._active=null}}We(o0,s0,{initialize(e,t,n){return this._canvas=e&&xZ(e,"canvas"),[G3,lH,uH,W3,l2,C$].forEach(r=>_ge(this,r)),s0.prototype.initialize.call(this,e,t,n)},canvas(){return this._canvas},context(){return this._canvas.getContext("2d")},events:gVt,DOMMouseScroll(e){this.fire(T4e,e)},pointermove:bge([W3,x4e],[E4e,S4e],[l2,cH]),dragover:bge([w4e],[b4e],[C$]),pointerout:wge([l2,cH]),dragleave:wge([C$]),pointerdown(e){this._down=this._active,this.fire(uH,e)},mousedown(e){this._down=this._active,this.fire(lH,e)},click(e){this._down===this._active&&(this.fire(G3,e),this._down=null)},touchstart(e){this._touch=this.pickEvent(e.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(Y3,e,!0)},touchmove(e){this.fire(K3,e,!0)},touchend(e){this.fire(X3,e,!0),this._touch=null},fire(e,t,n){const r=n?this._touch:this._active,i=this._handlers[e];if(t.vegaType=e,e===dH&&r&&r.href?this.handleHref(t,r,r.href):(e===fH||e===NA)&&this.handleTooltip(t,r,e!==NA),i)for(let s=0,o=i.length;s<o;++s)i[s].handler.call(this._obj,t,r)},on(e,t){const n=this.eventName(e),r=this._handlers;return this._handlerIndex(r[n],e,t)<0&&(_ge(this,e),(r[n]||(r[n]=[])).push({type:e,handler:t})),this},off(e,t){const n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return i>=0&&r.splice(i,1),this},pickEvent(e){const t=yF(e,this._canvas),n=this._origin;return this.pick(this._scene,t[0],t[1],t[0]-n[0],t[1]-n[1])},pick(e,t,n,r,i){const s=this.context();return cl[e.marktype].pick.call(this,s,e,t,n,r,i)}});function _Vt(){return typeof window<"u"&&window.devicePixelRatio||1}function bVt(e,t,n,r,i,s){const o=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,a=e.getContext("2d"),u=o?_Vt():i;e.width=t*u,e.height=n*u;for(const l in s)a[l]=s[l];return o&&u!==1&&(e.style.width=t+"px",e.style.height=n+"px"),a.pixelRatio=u,a.setTransform(u,0,0,u,u*r[0],u*r[1]),e}function DA(e){bl.call(this,e),this._options={},this._redraw=!1,this._dirty=new os,this._tempb=new os}const Ege=bl.prototype,wVt=(e,t,n)=>new os().set(0,0,t,n).translate(-e[0],-e[1]);function EVt(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}We(DA,bl,{initialize(e,t,n,r,i,s){return this._options=s||{},this._canvas=this._options.externalContext?null:Og(1,1,this._options.type),e&&this._canvas&&(Ll(e,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),Ege.initialize.call(this,e,t,n,r,i)},resize(e,t,n,r){if(Ege.resize.call(this,e,t,n,r),this._canvas)bVt(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const i=this._options.externalContext;i||Te("CanvasRenderer is missing a valid canvas or context"),i.scale(this._scale,this._scale),i.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this},canvas(){return this._canvas},context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)},dirty(e){const t=this._tempb.clear().union(e.bounds);let n=e.mark.group;for(;n;)t.translate(n.x||0,n.y||0),n=n.mark.group;this._dirty.union(t)},_render(e,t){const n=this.context(),r=this._origin,i=this._width,s=this._height,o=this._dirty,a=wVt(r,i,s);n.save();const u=this._redraw||o.empty()?(this._redraw=!1,a.expand(1)):EVt(n,a.intersect(o),r);return this.clear(-r[0],-r[1],i,s),this.draw(n,e,u,t),n.restore(),o.clear(),this},draw(e,t,n,r){if(t.marktype!=="group"&&r!=null&&!r.includes(t.marktype))return;const i=cl[t.marktype];t.clip&&_Ut(e,t),i.draw.call(this,e,t,n,r),t.clip&&e.restore()},clear(e,t,n,r){const i=this._options,s=this.context();i.type!=="pdf"&&!i.externalContext&&s.clearRect(e,t,n,r),this._bgcolor!=null&&(s.fillStyle=this._bgcolor,s.fillRect(e,t,n,r))}});function SZ(e,t){s0.call(this,e,t);const n=this;n._hrefHandler=hH(n,(r,i)=>{i&&i.href&&n.handleHref(r,i,i.href)}),n._tooltipHandler=hH(n,(r,i)=>{n.handleTooltip(r,i,r.type!==NA)})}const hH=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)};We(SZ,s0,{initialize(e,t,n){let r=this._svg;return r&&(r.removeEventListener(dH,this._hrefHandler),r.removeEventListener(fH,this._tooltipHandler),r.removeEventListener(NA,this._tooltipHandler)),this._svg=r=e&&xZ(e,"svg"),r&&(r.addEventListener(dH,this._hrefHandler),r.addEventListener(fH,this._tooltipHandler),r.addEventListener(NA,this._tooltipHandler)),s0.prototype.initialize.call(this,e,t,n)},canvas(){return this._svg},on(e,t){const n=this.eventName(e),r=this._handlers;if(this._handlerIndex(r[n],e,t)<0){const s={type:e,handler:t,listener:hH(this,t)};(r[n]||(r[n]=[])).push(s),this._svg&&this._svg.addEventListener(n,s.listener)}return this},off(e,t){const n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return i>=0&&(this._svg&&this._svg.removeEventListener(n,r[i].listener),r.splice(i,1)),this}});const A4e="aria-hidden",TZ="aria-label",AZ="role",CZ="aria-roledescription",C4e="graphics-object",IZ="graphics-symbol",I4e=(e,t,n)=>({[AZ]:e,[CZ]:t,[TZ]:n||void 0}),xVt=cf(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),xge={axis:{desc:"axis",caption:AVt},legend:{desc:"legend",caption:CVt},"title-text":{desc:"title",caption:e=>`Title text '${Tge(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${Tge(e)}'`}},Sge={ariaRole:AZ,ariaRoleDescription:CZ,description:TZ};function O4e(e,t){const n=t.aria===!1;if(e(A4e,n||void 0),n||t.description==null)for(const r in Sge)e(Sge[r],void 0);else{const r=t.mark.marktype;e(TZ,t.description),e(AZ,t.ariaRole||(r==="group"?C4e:IZ)),e(CZ,t.ariaRoleDescription||`${r} mark`)}}function P4e(e){return e.aria===!1?{[A4e]:!0}:xVt[e.role]?null:xge[e.role]?TVt(e,xge[e.role]):SVt(e)}function SVt(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(r=>r.description!=null&&r.aria!==!1);return I4e(n?C4e:IZ,`${t} mark container`,e.description)}function TVt(e,t){try{const n=e.items[0],r=t.caption||(()=>"");return I4e(t.role||IZ,t.desc,n.description||r(n))}catch{return null}}function Tge(e){return nt(e.text).join(" ")}function AVt(e){const t=e.datum,n=e.orient,r=t.title?k4e(e):null,i=e.context,s=i.scales[t.scale].value,o=i.dataflow.locale(),a=s.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(r?` titled '${r}'`:"")+` for a ${zw(a)?"discrete":a} scale with ${W6e(o,s,e)}`}function CVt(e){const t=e.datum,n=t.title?k4e(e):null,r=`${t.type||""} legend`.trim(),i=t.scales,s=Object.keys(i),o=e.context,a=o.scales[i[s[0]]].value,u=o.dataflow.locale();return OVt(r)+(n?` titled '${n}'`:"")+` for ${IVt(s)} with ${W6e(u,a,e)}`}function k4e(e){try{return nt(Un(e.items).items[0].text).join(" ")}catch{return null}}function IVt(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+Un(e)}function OVt(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const $4e=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),PVt=e=>$4e(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function OZ(){let e="",t="",n="";const r=[],i=()=>t=n="",s=u=>{t&&(e+=`${t}>${n}`,i()),r.push(u)},o=(u,l)=>(l!=null&&(t+=` ${u}="${PVt(l)}"`),a),a={open(u){s(u),t="<"+u;for(var l=arguments.length,c=new Array(l>1?l-1:0),f=1;f<l;f++)c[f-1]=arguments[f];for(const d of c)for(const h in d)o(h,d[h]);return a},close(){const u=r.pop();return t?e+=t+(n?`>${n}</${u}>`:"/>"):e+=`</${u}>`,i(),a},attr:o,text:u=>(n+=$4e(u),a),toString:()=>e};return a}const R4e=e=>N4e(OZ(),e)+"";function N4e(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,r=n.length;for(let i=0;i<r;++i)e.attr(n[i].name,n[i].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const r of n)r.nodeType===3?e.text(r.nodeValue):N4e(e,r)}return e.close()}const Q3={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},J3={blend:"mix-blend-mode"},D4e={fill:"none","stroke-miterlimit":10},yS=0,Age="http://www.w3.org/2000/xmlns/",hs=RA.xmlns;function vF(e){bl.call(this,e),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}const fj=bl.prototype;We(vF,bl,{initialize(e,t,n,r,i){return this._defs={},this._clearDefs(),e&&(this._svg=ms(e,0,"svg",hs),this._svg.setAttributeNS(Age,"xmlns",hs),this._svg.setAttributeNS(Age,"xmlns:xlink",RA["xmlns:xlink"]),this._svg.setAttribute("version",RA.version),this._svg.setAttribute("class","marks"),Ll(e,1),this._root=ms(this._svg,yS,"g",hs),tg(this._root,D4e),Ll(this._svg,yS+1)),this.background(this._bgcolor),fj.initialize.call(this,e,t,n,r,i)},background(e){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",e),fj.background.apply(this,arguments)},resize(e,t,n,r){return fj.resize.call(this,e,t,n,r),this._svg&&(tg(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this},canvas(){return this._svg},svg(){const e=this._svg,t=this._bgcolor;if(!e)return null;let n;t&&(e.removeAttribute("style"),n=ms(e,yS,"rect",hs),tg(n,{width:this._width,height:this._height,fill:t}));const r=R4e(e);return t&&(e.removeChild(n),this._svg.style.setProperty("background-color",t)),r},_render(e,t){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,e,void 0,t),Ll(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this},dirty(e){e.dirty!==this._dirtyID&&(e.dirty=this._dirtyID,this._dirty.push(e))},isDirty(e){return this._dirtyAll||!e._svg||!e._svg.ownerSVGElement||e.dirty===this._dirtyID},_dirtyCheck(){this._dirtyAll=!0;const e=this._dirty;if(!e.length||!this._dirtyID)return!0;const t=++this._dirtyID;let n,r,i,s,o,a,u;for(o=0,a=e.length;o<a;++o)if(n=e[o],r=n.mark,r.marktype!==i&&(i=r.marktype,s=cl[i]),r.zdirty&&r.dirty!==t&&(this._dirtyAll=!1,Cge(n,t),r.items.forEach(l=>{l.dirty=t})),!r.zdirty){if(n.exit){s.nested&&r.items.length?(u=r.items[0],u._svg&&this._update(s,u._svg,u)):n._svg&&(u=n._svg.parentNode,u&&u.removeChild(n._svg)),n._svg=null;continue}n=s.nested?r.items[0]:n,n._update!==t&&(!n._svg||!n._svg.ownerSVGElement?(this._dirtyAll=!1,Cge(n,t)):this._update(s,n._svg,n),n._update=t)}return!this._dirtyAll},mark(e,t,n,r){if(!this.isDirty(t))return t._svg;const i=this._svg,s=t.marktype,o=cl[s],a=t.interactive===!1?"none":null,u=o.tag==="g",l=Ige(t,e,n,"g",i);if(s!=="group"&&r!=null&&!r.includes(s))return Ll(l,0),t._svg;l.setAttribute("class",_4e(t));const c=P4e(t);for(const p in c)fa(l,p,c[p]);u||fa(l,"pointer-events",a),fa(l,"clip-path",t.clip?sZ(this,t,t.group):null);let f=null,d=0;const h=p=>{const m=this.isDirty(p),g=Ige(p,l,f,o.tag,i);m&&(this._update(o,g,p),u&&RVt(this,g,p,r)),f=g,++d};return o.nested?t.items.length&&h(t.items[0]):df(t,h),Ll(l,d),l},_update(e,t,n){Qh=t,Mo=t.__values__,O4e(c2,n),e.attr(c2,n,this);const r=DVt[e.type];r&&r.call(this,e,t,n),Qh&&this.style(Qh,n)},style(e,t){if(t!=null){for(const n in Q3){let r=n==="font"?RI(t):t[n];if(r===Mo[n])continue;const i=Q3[n];r==null?e.removeAttribute(i):(nZ(r)&&(r=Y6e(r,this._defs.gradient,L4e())),e.setAttribute(i,r+"")),Mo[n]=r}for(const n in J3)I$(e,J3[n],t[n])}},defs(){const e=this._svg,t=this._defs;let n=t.el,r=0;for(const i in t.gradient)n||(t.el=n=ms(e,yS+1,"defs",hs)),r=kVt(n,t.gradient[i],r);for(const i in t.clipping)n||(t.el=n=ms(e,yS+1,"defs",hs)),r=$Vt(n,t.clipping[i],r);n&&(r===0?(e.removeChild(n),t.el=null):Ll(n,r))},_clearDefs(){const e=this._defs;e.gradient={},e.clipping={}}});function Cge(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function kVt(e,t,n){let r,i,s;if(t.gradient==="radial"){let o=ms(e,n++,"pattern",hs);tg(o,{id:U3+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),o=ms(o,0,"rect",hs),tg(o,{width:1,height:1,fill:`url(${L4e()}#${t.id})`}),e=ms(e,n++,"radialGradient",hs),tg(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=ms(e,n++,"linearGradient",hs),tg(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)s=ms(e,r,"stop",hs),s.setAttribute("offset",t.stops[r].offset),s.setAttribute("stop-color",t.stops[r].color);return Ll(e,r),n}function $Vt(e,t,n){let r;return e=ms(e,n,"clipPath",hs),e.setAttribute("id",t.id),t.path?(r=ms(e,0,"path",hs),r.setAttribute("d",t.path)):(r=ms(e,0,"rect",hs),tg(r,{x:0,y:0,width:t.width,height:t.height})),Ll(e,1),n+1}function RVt(e,t,n,r){t=t.lastChild.previousSibling;let i,s=0;df(n,o=>{i=e.mark(t,o,i,r),++s}),Ll(t,1+s)}function Ige(e,t,n,r,i){let s=e._svg,o;if(!s&&(o=t.ownerDocument,s=eg(o,r,hs),e._svg=s,e.mark&&(s.__data__=e,s.__values__={fill:"default"},r==="g"))){const a=eg(o,"path",hs);s.appendChild(a),a.__data__=e;const u=eg(o,"g",hs);s.appendChild(u),u.__data__=e;const l=eg(o,"path",hs);s.appendChild(l),l.__data__=e,l.__values__={fill:"default"}}return(s.ownerSVGElement!==i||NVt(s,n))&&t.insertBefore(s,n?n.nextSibling:t.firstChild),s}function NVt(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let Qh=null,Mo=null;const DVt={group(e,t,n){const r=Qh=t.childNodes[2];Mo=r.__values__,e.foreground(c2,n,this),Mo=t.__values__,Qh=t.childNodes[1],e.content(c2,n,this);const i=Qh=t.childNodes[0];e.background(c2,n,this);const s=n.mark.interactive===!1?"none":null;if(s!==Mo.events&&(fa(r,"pointer-events",s),fa(i,"pointer-events",s),Mo.events=s),n.strokeForeground&&n.stroke){const o=n.fill;fa(r,"display",null),this.style(i,n),fa(i,"stroke",null),o&&(n.fill=null),Mo=r.__values__,this.style(r,n),o&&(n.fill=o),Qh=null}else fa(r,"display","none")},image(e,t,n){n.smooth===!1?(I$(t,"image-rendering","optimizeSpeed"),I$(t,"image-rendering","pixelated")):I$(t,"image-rendering",null)},text(e,t,n){const r=$I(n);let i,s,o,a;Ie(r)?(s=r.map(u=>i0(n,u)),i=s.join(`
`),i!==Mo.text&&(Ll(t,0),o=t.ownerDocument,a=r0(n),s.forEach((u,l)=>{const c=eg(o,"tspan",hs);c.__data__=n,c.textContent=u,l&&(c.setAttribute("x",0),c.setAttribute("dy",a)),t.appendChild(c)}),Mo.text=i)):(s=i0(n,r),s!==Mo.text&&(t.textContent=s,Mo.text=s)),fa(t,"font-family",RI(n)),fa(t,"font-size",ah(n)+"px"),fa(t,"font-style",n.fontStyle),fa(t,"font-variant",n.fontVariant),fa(t,"font-weight",n.fontWeight)}};function c2(e,t,n){t!==Mo[e]&&(n?LVt(Qh,e,t,n):fa(Qh,e,t),Mo[e]=t)}function I$(e,t,n){n!==Mo[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),Mo[t]=n)}function tg(e,t){for(const n in t)fa(e,n,t[n])}function fa(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function LVt(e,t,n,r){n!=null?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}function L4e(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}function PZ(e){bl.call(this,e),this._text=null,this._defs={gradient:{},clipping:{}}}We(PZ,bl,{svg(){return this._text},_render(e){const t=OZ();t.open("svg",hn({},RA,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const n=this._bgcolor;return n&&n!=="transparent"&&n!=="none"&&t.open("rect",{width:this._width,height:this._height,fill:n}).close(),t.open("g",D4e,{transform:"translate("+this._origin+")"}),this.mark(t,e),t.close(),this.defs(t),this._text=t.close()+"",this},mark(e,t){const n=cl[t.marktype],r=n.tag,i=[O4e,n.attr];e.open("g",{class:_4e(t),"clip-path":t.clip?sZ(this,t,t.group):null},P4e(t),{"pointer-events":r!=="g"&&t.interactive===!1?"none":null});const s=o=>{const a=this.href(o);if(a&&e.open("a",a),e.open(r,this.attr(t,o,i,r!=="g"?r:null)),r==="text"){const u=$I(o);if(Ie(u)){const l={x:0,dy:r0(o)};for(let c=0;c<u.length;++c)e.open("tspan",c?l:null).text(i0(o,u[c])).close()}else e.text(i0(o,u))}else if(r==="g"){const u=o.strokeForeground,l=o.fill,c=o.stroke;u&&c&&(o.stroke=null),e.open("path",this.attr(t,o,n.background,"bgrect")).close(),e.open("g",this.attr(t,o,n.content)),df(o,f=>this.mark(e,f)),e.close(),u&&c?(l&&(o.fill=null),o.stroke=c,e.open("path",this.attr(t,o,n.foreground,"bgrect")).close(),l&&(o.fill=l)):e.open("path",this.attr(t,o,n.foreground,"bgfore")).close()}e.close(),a&&e.close()};return n.nested?t.items&&t.items.length&&s(t.items[0]):df(t,s),e.close()},href(e){const t=e.href;let n;if(t){if(n=this._hrefs&&this._hrefs[t])return n;this.sanitizeURL(t).then(r=>{r["xlink:href"]=r.href,r.href=null,(this._hrefs||(this._hrefs={}))[t]=r})}return null},attr(e,t,n,r){const i={},s=(o,a,u,l)=>{i[l||o]=a};return Array.isArray(n)?n.forEach(o=>o(s,t,this)):n(s,t,this),r&&MVt(i,t,e,r,this._defs),i},defs(e){const t=this._defs.gradient,n=this._defs.clipping;if(Object.keys(t).length+Object.keys(n).length!==0){e.open("defs");for(const i in t){const s=t[i],o=s.stops;s.gradient==="radial"?(e.open("pattern",{id:U3+i,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),e.open("rect",{width:"1",height:"1",fill:"url(#"+i+")"}).close(),e.close(),e.open("radialGradient",{id:i,fx:s.x1,fy:s.y1,fr:s.r1,cx:s.x2,cy:s.y2,r:s.r2})):e.open("linearGradient",{id:i,x1:s.x1,x2:s.x2,y1:s.y1,y2:s.y2});for(let a=0;a<o.length;++a)e.open("stop",{offset:o[a].offset,"stop-color":o[a].color}).close();e.close()}for(const i in n){const s=n[i];e.open("clipPath",{id:i}),s.path?e.open("path",{d:s.path}).close():e.open("rect",{x:0,y:0,width:s.width,height:s.height}).close(),e.close()}e.close()}}});function MVt(e,t,n,r,i){let s;if(t==null||(r==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),r==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;r==="image"&&t.smooth===!1&&(s=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),r==="text"&&(e["font-family"]=RI(t),e["font-size"]=ah(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const o in Q3){let a=t[o];const u=Q3[o];a==="transparent"&&(u==="fill"||u==="stroke")||a!=null&&(nZ(a)&&(a=Y6e(a,i.gradient,"")),e[u]=a)}for(const o in J3){const a=t[o];a!=null&&(s=s||[],s.push(`${J3[o]}: ${a};`))}return s&&(e.style=s.join(" ")),e}const Nc={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function FVt(e){Nc.svgMarkTypes=e.svgMarkTypes??["text"],Nc.svgOnTop=e.svgOnTop??!0,Nc.debug=e.debug??!1}function Z3(e){bl.call(this,e),this._svgRenderer=new vF(e),this._canvasRenderer=new DA(e)}const Oge=bl.prototype;We(Z3,bl,{initialize(e,t,n,r,i){this._root_el=ms(e,0,"div");const s=ms(this._root_el,0,"div"),o=ms(this._root_el,1,"div");return this._root_el.style.position="relative",Nc.debug||(s.style.height="100%",o.style.position="absolute",o.style.top="0",o.style.left="0",o.style.height="100%",o.style.width="100%"),this._svgEl=Nc.svgOnTop?o:s,this._canvasEl=Nc.svgOnTop?s:o,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,t,n,r,i),this._svgRenderer.initialize(this._svgEl,t,n,r,i),Oge.initialize.call(this,e,t,n,r,i)},dirty(e){return Nc.svgMarkTypes.includes(e.mark.marktype)?this._svgRenderer.dirty(e):this._canvasRenderer.dirty(e),this},_render(e,t){const r=(t??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(i=>!Nc.svgMarkTypes.includes(i));this._svgRenderer.render(e,Nc.svgMarkTypes),this._canvasRenderer.render(e,r)},resize(e,t,n,r){return Oge.resize.call(this,e,t,n,r),this._svgRenderer.resize(e,t,n,r),this._canvasRenderer.resize(e,t,n,r),this},background(e){return Nc.svgOnTop?this._canvasRenderer.background(e):this._svgRenderer.background(e),this}});function kZ(e,t){o0.call(this,e,t)}We(kZ,o0,{initialize(e,t,n){const r=ms(ms(e,0,"div"),Nc.svgOnTop?0:1,"div");return o0.prototype.initialize.call(this,r,t,n)}});const M4e="canvas",F4e="hybrid",B4e="png",j4e="svg",z4e="none",ng={Canvas:M4e,PNG:B4e,SVG:j4e,Hybrid:F4e,None:z4e},H1={};H1[M4e]=H1[B4e]={renderer:DA,headless:DA,handler:o0};H1[j4e]={renderer:vF,headless:PZ,handler:SZ};H1[F4e]={renderer:Z3,headless:Z3,handler:kZ};H1[z4e]={};function _F(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(H1[e]=t,this):H1[e]}function U4e(e,t,n){const r=[],i=new os().union(t),s=e.marktype;return s?V4e(e,i,n,r):s==="group"?H4e(e,i,n,r):Te("Intersect scene must be mark node or group item.")}function V4e(e,t,n,r){if(BVt(e,t,n)){const i=e.items,s=e.marktype,o=i.length;let a=0;if(s==="group")for(;a<o;++a)H4e(i[a],t,n,r);else for(const u=cl[s].isect;a<o;++a){const l=i[a];q4e(l,t,u)&&r.push(l)}}return r}function BVt(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function H4e(e,t,n,r){n&&n(e.mark)&&q4e(e,t,cl.group.isect)&&r.push(e);const i=e.items,s=i&&i.length;if(s){const o=e.x||0,a=e.y||0;t.translate(-o,-a);for(let u=0;u<s;++u)V4e(i[u],t,n,r);t.translate(o,a)}return r}function q4e(e,t,n){const r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}const dj=new os;function W4e(e){const t=e.clip;if(pn(t))t(PI(dj.clear()));else if(t)dj.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(dj)}const jVt=1e-9;function $Z(e,t,n){return e===t?!0:n==="path"?G4e(e,t):e instanceof Date&&t instanceof Date?+e==+t:Jn(e)&&Jn(t)?Math.abs(e-t)<=jVt:!e||!t||!st(e)&&!st(t)?e==t:zVt(e,t)}function G4e(e,t){return $Z(Uw(e),Uw(t))}function zVt(e,t){var n=Object.keys(e),r=Object.keys(t),i,s;if(n.length!==r.length)return!1;for(n.sort(),r.sort(),s=n.length-1;s>=0;s--)if(n[s]!=r[s])return!1;for(s=n.length-1;s>=0;s--)if(i=n[s],!$Z(e[i],t[i],i))return!1;return typeof e==typeof t}function UVt(){t4e(),dzt()}const qw="top",Hc="left",Wc="right",a0="bottom",VVt="top-left",HVt="top-right",qVt="bottom-left",WVt="bottom-right",RZ="start",pH="middle",pa="end",GVt="x",YVt="y",bF="group",NZ="axis",DZ="title",KVt="frame",XVt="scope",LZ="legend",Y4e="row-header",K4e="row-footer",X4e="row-title",Q4e="column-header",J4e="column-footer",Z4e="column-title",QVt="padding",JVt="symbol",eFe="fit",tFe="fit-x",nFe="fit-y",ZVt="pad",MZ="none",MP="all",mH="each",FZ="flush",rg="column",ig="row";function rFe(e){Ee.call(this,null,e)}We(rFe,Ee,{transform(e,t){const n=t.dataflow,r=e.mark,i=r.marktype,s=cl[i],o=s.bound;let a=r.bounds,u;if(s.nested)r.items.length&&n.dirty(r.items[0]),a=FP(r,o),r.items.forEach(l=>{l.bounds.clear().union(a)});else if(i===bF||e.modified())switch(t.visit(t.MOD,l=>n.dirty(l)),a.clear(),r.items.forEach(l=>a.union(FP(l,o))),r.role){case NZ:case LZ:case DZ:t.reflow()}else u=t.changed(t.REM),t.visit(t.ADD,l=>{a.union(FP(l,o))}),t.visit(t.MOD,l=>{u=u||a.alignsWith(l.bounds),n.dirty(l),a.union(FP(l,o))}),u&&(a.clear(),r.items.forEach(l=>a.union(l.bounds)));return W4e(r),t.modifies("bounds")}});function FP(e,t,n){return t(e.bounds.clear(),e,n)}const Pge=":vega_identifier:";function BZ(e){Ee.call(this,0,e)}BZ.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};We(BZ,Ee,{transform(e,t){const n=eHt(t.dataflow),r=e.as;let i=n.value;return t.visit(t.ADD,s=>s[r]=s[r]||++i),n.set(this.value=i),t}});function eHt(e){return e._signals[Pge]||(e._signals[Pge]=e.add(0))}function iFe(e){Ee.call(this,null,e)}We(iFe,Ee,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,tHt(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const r=n.marktype===bF?cF:lF;return t.visit(t.ADD,i=>r.call(i,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function tHt(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function sFe(e){Ee.call(this,null,e)}const kge={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((r,i)=>!i||!oFe(n.bounds,r.bounds,t)?(n=r,1):r.opacity=0)}},oFe=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),$ge=(e,t)=>{for(var n=1,r=e.length,i=e[0].bounds,s;n<r;i=s,++n)if(oFe(i,s=e[n].bounds,t))return!0},nHt=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},rHt=(e,t,n)=>{var r=e.range(),i=new os;return t===qw||t===a0?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),s=>i.encloses(s.bounds)},Rge=e=>(e.forEach(t=>t.opacity=1),e),Nge=(e,t)=>e.reflow(t.modified()).modifies("opacity");We(sFe,Ee,{transform(e,t){const n=kge[e.method]||kge.parity,r=e.separation||0;let i=t.materialize(t.SOURCE).source,s,o;if(!i||!i.length)return;if(!e.method)return e.modified("method")&&(Rge(i),t=Nge(t,e)),t;if(i=i.filter(nHt),!i.length)return;if(e.sort&&(i=i.slice().sort(e.sort)),s=Rge(i),t=Nge(t,e),s.length>=3&&$ge(s,r)){do s=n(s,r);while(s.length>=3&&$ge(s,r));s.length<3&&!Un(i).opacity&&(s.length>1&&(Un(s).opacity=0),Un(i).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(o=rHt(e.boundScale,e.boundOrient,+e.boundTolerance),i.forEach(u=>{o(u)||(u.opacity=0)}));const a=s[0].mark.bounds.clear();return i.forEach(u=>{u.opacity&&a.union(u.bounds)}),t}});function aFe(e){Ee.call(this,null,e)}We(aFe,Ee,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,r=>n.dirty(r)),t.fields&&t.fields.zindex){const r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}}});const Do=new os;function ab(e,t,n){return e[t]===n?0:(e[t]=n,1)}function iHt(e){var t=e.items[0].orient;return t===Hc||t===Wc}function sHt(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function oHt(e,t,n,r){var i=t.items[0],s=i.datum,o=i.translate!=null?i.translate:.5,a=i.orient,u=sHt(s),l=i.range,c=i.offset,f=i.position,d=i.minExtent,h=i.maxExtent,p=s.title&&i.items[u[2]].items[0],m=i.titlePadding,g=i.bounds,y=p&&_Z(p),v=0,_=0,b,E;switch(Do.clear().union(g),g.clear(),(b=u[0])>-1&&g.union(i.items[b].bounds),(b=u[1])>-1&&g.union(i.items[b].bounds),a){case qw:v=f||0,_=-c,E=Math.max(d,Math.min(h,-g.y1)),g.add(0,-E).add(l,0),p&&BP(e,p,E,m,y,0,-1,g);break;case Hc:v=-c,_=f||0,E=Math.max(d,Math.min(h,-g.x1)),g.add(-E,0).add(0,l),p&&BP(e,p,E,m,y,1,-1,g);break;case Wc:v=n+c,_=f||0,E=Math.max(d,Math.min(h,g.x2)),g.add(0,0).add(E,l),p&&BP(e,p,E,m,y,1,1,g);break;case a0:v=f||0,_=r+c,E=Math.max(d,Math.min(h,g.y2)),g.add(0,0).add(l,E),p&&BP(e,p,E,m,0,0,1,g);break;default:v=i.x,_=i.y}return tm(g.translate(v,_),i),ab(i,"x",v+o)|ab(i,"y",_+o)&&(i.bounds=Do,e.dirty(i),i.bounds=g,e.dirty(i)),i.mark.bounds.clear().union(g)}function BP(e,t,n,r,i,s,o,a){const u=t.bounds;if(t.auto){const l=o*(n+i+r);let c=0,f=0;e.dirty(t),s?c=(t.x||0)-(t.x=l):f=(t.y||0)-(t.y=l),t.mark.bounds.clear().union(u.translate(-c,-f)),e.dirty(t)}a.union(u)}const Dge=(e,t)=>Math.floor(Math.min(e,t)),Lge=(e,t)=>Math.ceil(Math.max(e,t));function aHt(e){var t=e.items,n=t.length,r=0,i,s;const o={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;r<n;++r)if(i=t[r],s=i.items,i.marktype===bF)switch(i.role){case NZ:case LZ:case DZ:break;case Y4e:o.rowheaders.push(...s);break;case K4e:o.rowfooters.push(...s);break;case Q4e:o.colheaders.push(...s);break;case J4e:o.colfooters.push(...s);break;case X4e:o.rowtitle=s[0];break;case Z4e:o.coltitle=s[0];break;default:o.marks.push(...s)}return o}function uHt(e){return new os().set(0,0,e.width||0,e.height||0)}function lHt(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function ui(e,t,n){const r=st(e)?e[t]:e;return r??(n!==void 0?n:0)}function Mge(e){return e<0?Math.ceil(-e):0}function uFe(e,t,n){var r=!n.nodirty,i=n.bounds===FZ?uHt:lHt,s=Do.set(0,0,0,0),o=ui(n.align,rg),a=ui(n.align,ig),u=ui(n.padding,rg),l=ui(n.padding,ig),c=n.columns||t.length,f=c<=0?1:Math.ceil(t.length/c),d=t.length,h=Array(d),p=Array(c),m=0,g=Array(d),y=Array(f),v=0,_=Array(d),b=Array(d),E=Array(d),w,x,S,I,C,O,z,N,$,D,B;for(x=0;x<c;++x)p[x]=0;for(x=0;x<f;++x)y[x]=0;for(x=0;x<d;++x)O=t[x],C=E[x]=i(O),O.x=O.x||0,_[x]=0,O.y=O.y||0,b[x]=0,S=x%c,I=~~(x/c),m=Math.max(m,z=Math.ceil(C.x2)),v=Math.max(v,N=Math.ceil(C.y2)),p[S]=Math.max(p[S],z),y[I]=Math.max(y[I],N),h[x]=u+Mge(C.x1),g[x]=l+Mge(C.y1),r&&e.dirty(t[x]);for(x=0;x<d;++x)x%c===0&&(h[x]=0),x<c&&(g[x]=0);if(o===mH)for(S=1;S<c;++S){for(B=0,x=S;x<d;x+=c)B<h[x]&&(B=h[x]);for(x=S;x<d;x+=c)h[x]=B+p[S-1]}else if(o===MP){for(B=0,x=0;x<d;++x)x%c&&B<h[x]&&(B=h[x]);for(x=0;x<d;++x)x%c&&(h[x]=B+m)}else for(o=!1,S=1;S<c;++S)for(x=S;x<d;x+=c)h[x]+=p[S-1];if(a===mH)for(I=1;I<f;++I){for(B=0,x=I*c,w=x+c;x<w;++x)B<g[x]&&(B=g[x]);for(x=I*c;x<w;++x)g[x]=B+y[I-1]}else if(a===MP){for(B=0,x=c;x<d;++x)B<g[x]&&(B=g[x]);for(x=c;x<d;++x)g[x]=B+v}else for(a=!1,I=1;I<f;++I)for(x=I*c,w=x+c;x<w;++x)g[x]+=y[I-1];for($=0,x=0;x<d;++x)$=h[x]+(x%c?$:0),_[x]+=$-t[x].x;for(S=0;S<c;++S)for(D=0,x=S;x<d;x+=c)D+=g[x],b[x]+=D-t[x].y;if(o&&ui(n.center,rg)&&f>1)for(x=0;x<d;++x)C=o===MP?m:p[x%c],$=C-E[x].x2-t[x].x-_[x],$>0&&(_[x]+=$/2);if(a&&ui(n.center,ig)&&c!==1)for(x=0;x<d;++x)C=a===MP?v:y[~~(x/c)],D=C-E[x].y2-t[x].y-b[x],D>0&&(b[x]+=D/2);for(x=0;x<d;++x)s.union(E[x].translate(_[x],b[x]));switch($=ui(n.anchor,GVt),D=ui(n.anchor,YVt),ui(n.anchor,rg)){case pa:$-=s.width();break;case pH:$-=s.width()/2}switch(ui(n.anchor,ig)){case pa:D-=s.height();break;case pH:D-=s.height()/2}for($=Math.round($),D=Math.round(D),s.clear(),x=0;x<d;++x)t[x].mark.bounds.clear();for(x=0;x<d;++x)O=t[x],O.x+=_[x]+=$,O.y+=b[x]+=D,s.union(O.mark.bounds.union(O.bounds.translate(_[x],b[x]))),r&&e.dirty(O);return s}function cHt(e,t,n){var r=aHt(t),i=r.marks,s=n.bounds===FZ?fHt:dHt,o=n.offset,a=n.columns||i.length,u=a<=0?1:Math.ceil(i.length/a),l=u*a,c,f,d,h,p,m,g;const y=uFe(e,i,n);y.empty()&&y.set(0,0,0,0),r.rowheaders&&(m=ui(n.headerBand,ig,null),c=jP(e,r.rowheaders,i,a,u,-ui(o,"rowHeader"),Dge,0,s,"x1",0,a,1,m)),r.colheaders&&(m=ui(n.headerBand,rg,null),f=jP(e,r.colheaders,i,a,a,-ui(o,"columnHeader"),Dge,1,s,"y1",0,1,a,m)),r.rowfooters&&(m=ui(n.footerBand,ig,null),d=jP(e,r.rowfooters,i,a,u,ui(o,"rowFooter"),Lge,0,s,"x2",a-1,a,1,m)),r.colfooters&&(m=ui(n.footerBand,rg,null),h=jP(e,r.colfooters,i,a,a,ui(o,"columnFooter"),Lge,1,s,"y2",l-a,1,a,m)),r.rowtitle&&(p=ui(n.titleAnchor,ig),g=ui(o,"rowTitle"),g=p===pa?d+g:c-g,m=ui(n.titleBand,ig,.5),Fge(e,r.rowtitle,g,0,y,m)),r.coltitle&&(p=ui(n.titleAnchor,rg),g=ui(o,"columnTitle"),g=p===pa?h+g:f-g,m=ui(n.titleBand,rg,.5),Fge(e,r.coltitle,g,1,y,m))}function fHt(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function dHt(e,t){return e.bounds[t]}function jP(e,t,n,r,i,s,o,a,u,l,c,f,d,h){var p=n.length,m=0,g=0,y,v,_,b,E,w,x,S,I;if(!p)return m;for(y=c;y<p;y+=f)n[y]&&(m=o(m,u(n[y],l)));if(!t.length)return m;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),m+=s,v=0,b=t.length;v<b;++v)e.dirty(t[v]),t[v].mark.bounds.clear();for(y=c,v=0,b=t.length;v<b;++v,y+=f){for(w=t[v],E=w.mark.bounds,_=y;_>=0&&(x=n[_])==null;_-=d);a?(S=h==null?x.x:Math.round(x.bounds.x1+h*x.bounds.width()),I=m):(S=m,I=h==null?x.y:Math.round(x.bounds.y1+h*x.bounds.height())),E.union(w.bounds.translate(S-(w.x||0),I-(w.y||0))),w.x=S,w.y=I,e.dirty(w),g=o(g,E[l])}return g}function Fge(e,t,n,r,i,s){if(t){e.dirty(t);var o=n,a=n;r?o=Math.round(i.x1+s*i.width()):a=Math.round(i.y1+s*i.height()),t.bounds.translate(o-(t.x||0),a-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=o,t.y=a,e.dirty(t)}}function hHt(e,t){const n=e[t]||{};return(r,i)=>n[r]!=null?n[r]:e[r]!=null?e[r]:i}function pHt(e,t){let n=-1/0;return e.forEach(r=>{r.offset!=null&&(n=Math.max(n,r.offset))}),n>-1/0?n:t}function mHt(e,t,n,r,i,s,o){const a=hHt(n,t),u=pHt(e,a("offset",0)),l=a("anchor",RZ),c=l===pa?1:l===pH?.5:0,f={align:mH,bounds:a("bounds",FZ),columns:a("direction")==="vertical"?1:e.length,padding:a("margin",8),center:a("center"),nodirty:!0};switch(t){case Hc:f.anchor={x:Math.floor(r.x1)-u,column:pa,y:c*(o||r.height()+2*r.y1),row:l};break;case Wc:f.anchor={x:Math.ceil(r.x2)+u,y:c*(o||r.height()+2*r.y1),row:l};break;case qw:f.anchor={y:Math.floor(i.y1)-u,row:pa,x:c*(s||i.width()+2*i.x1),column:l};break;case a0:f.anchor={y:Math.ceil(i.y2)+u,x:c*(s||i.width()+2*i.x1),column:l};break;case VVt:f.anchor={x:u,y:u};break;case HVt:f.anchor={x:s-u,y:u,column:pa};break;case qVt:f.anchor={x:u,y:o-u,row:pa};break;case WVt:f.anchor={x:s-u,y:o-u,column:pa,row:pa};break}return f}function gHt(e,t){var n=t.items[0],r=n.datum,i=n.orient,s=n.bounds,o=n.x,a=n.y,u,l;return n._bounds?n._bounds.clear().union(s):n._bounds=s.clone(),s.clear(),vHt(e,n,n.items[0].items[0]),s=yHt(n,s),u=2*n.padding,l=2*n.padding,s.empty()||(u=Math.ceil(s.width()+u),l=Math.ceil(s.height()+l)),r.type===JVt&&_Ht(n.items[0].items[0].items[0].items),i!==MZ&&(n.x=o=0,n.y=a=0),n.width=u,n.height=l,tm(s.set(o,a,o+u,a+l),n),n.mark.bounds.clear().union(s),n}function yHt(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function vHt(e,t,n){var r=t.padding,i=r-n.x,s=r-n.y;if(!t.datum.title)(i||s)&&vS(e,n,i,s);else{var o=t.items[1].items[0],a=o.anchor,u=t.titlePadding||0,l=r-o.x,c=r-o.y;switch(o.orient){case Hc:i+=Math.ceil(o.bounds.width())+u;break;case Wc:case a0:break;default:s+=o.bounds.height()+u}switch((i||s)&&vS(e,n,i,s),o.orient){case Hc:c+=g_(t,n,o,a,1,1);break;case Wc:l+=g_(t,n,o,pa,0,0)+u,c+=g_(t,n,o,a,1,1);break;case a0:l+=g_(t,n,o,a,0,0),c+=g_(t,n,o,pa,-1,0,1)+u;break;default:l+=g_(t,n,o,a,0,0)}(l||c)&&vS(e,o,l,c),(l=Math.round(o.bounds.x1-r))<0&&(vS(e,n,-l,0),vS(e,o,-l,0))}}function g_(e,t,n,r,i,s,o){const a=e.datum.type!=="symbol",u=n.datum.vgrad,l=a&&(s||!u)&&!o?t.items[0]:t,c=l.bounds[i?"y2":"x2"]-e.padding,f=u&&s?c:0,d=u&&s?0:c,h=i<=0?0:_Z(n);return Math.round(r===RZ?f:r===pa?d-h:.5*(c-h))}function vS(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function _Ht(e){const t=e.reduce((n,r)=>(n[r.column]=Math.max(r.bounds.x2-r.x,n[r.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function bHt(e,t,n,r,i){var s=t.items[0],o=s.frame,a=s.orient,u=s.anchor,l=s.offset,c=s.padding,f=s.items[0].items[0],d=s.items[1]&&s.items[1].items[0],h=a===Hc||a===Wc?r:n,p=0,m=0,g=0,y=0,v=0,_;if(o!==bF?a===Hc?(p=i.y2,h=i.y1):a===Wc?(p=i.y1,h=i.y2):(p=i.x1,h=i.x2):a===Hc&&(p=r,h=0),_=u===RZ?p:u===pa?h:(p+h)/2,d&&d.text){switch(a){case qw:case a0:v=f.bounds.height()+c;break;case Hc:y=f.bounds.width()+c;break;case Wc:y=-f.bounds.width()-c;break}Do.clear().union(d.bounds),Do.translate(y-(d.x||0),v-(d.y||0)),ab(d,"x",y)|ab(d,"y",v)&&(e.dirty(d),d.bounds.clear().union(Do),d.mark.bounds.clear().union(Do),e.dirty(d)),Do.clear().union(d.bounds)}else Do.clear();switch(Do.union(f.bounds),a){case qw:m=_,g=i.y1-Do.height()-l;break;case Hc:m=i.x1-Do.width()-l,g=_;break;case Wc:m=i.x2+Do.width()+l,g=_;break;case a0:m=_,g=i.y2+l;break;default:m=s.x,g=s.y}return ab(s,"x",m)|ab(s,"y",g)&&(Do.translate(m,g),e.dirty(s),s.bounds.clear().union(Do),t.bounds.clear().union(Do),e.dirty(s)),s.bounds}function lFe(e){Ee.call(this,null,e)}We(lFe,Ee,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(r=>{e.layout&&cHt(n,r,e.layout),EHt(n,r,e)}),wHt(e.mark.group)?t.reflow():t}});function wHt(e){return e&&e.mark.role!=="legend-entry"}function EHt(e,t,n){var r=t.items,i=Math.max(0,t.width||0),s=Math.max(0,t.height||0),o=new os().set(0,0,i,s),a=o.clone(),u=o.clone(),l=[],c,f,d,h,p,m;for(p=0,m=r.length;p<m;++p)switch(f=r[p],f.role){case NZ:h=iHt(f)?a:u,h.union(oHt(e,f,i,s));break;case DZ:c=f;break;case LZ:l.push(gHt(e,f));break;case KVt:case XVt:case Y4e:case K4e:case X4e:case Q4e:case J4e:case Z4e:a.union(f.bounds),u.union(f.bounds);break;default:o.union(f.bounds)}if(l.length){const g={};l.forEach(y=>{d=y.orient||Wc,d!==MZ&&(g[d]||(g[d]=[])).push(y)});for(const y in g){const v=g[y];uFe(e,v,mHt(v,y,n.legends,a,u,i,s))}l.forEach(y=>{const v=y.bounds;if(v.equals(y._bounds)||(y.bounds=y._bounds,e.dirty(y),y.bounds=v,e.dirty(y)),n.autosize&&(n.autosize.type===eFe||n.autosize.type===tFe||n.autosize.type===nFe))switch(y.orient){case Hc:case Wc:o.add(v.x1,0).add(v.x2,0);break;case qw:case a0:o.add(0,v.y1).add(0,v.y2)}else o.union(v)})}o.union(a).union(u),c&&o.union(bHt(e,c,i,s,o)),t.clip&&o.set(0,0,t.width||0,t.height||0),xHt(e,t,o,n)}function xHt(e,t,n,r){const i=r.autosize||{},s=i.type;if(e._autosize<1||!s)return;let o=e._width,a=e._height,u=Math.max(0,t.width||0),l=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,t.height||0),f=Math.max(0,Math.ceil(-n.y1));const d=Math.max(0,Math.ceil(n.x2-u)),h=Math.max(0,Math.ceil(n.y2-c));if(i.contains===QVt){const p=e.padding();o-=p.left+p.right,a-=p.top+p.bottom}s===MZ?(l=0,f=0,u=o,c=a):s===eFe?(u=Math.max(0,o-l-d),c=Math.max(0,a-f-h)):s===tFe?(u=Math.max(0,o-l-d),a=c+f+h):s===nFe?(o=u+l+d,c=Math.max(0,a-f-h)):s===ZVt&&(o=u+l+d,a=c+f+h),e._resizeView(o,a,u,c,[l,f],i.resize)}const SHt=Object.freeze(Object.defineProperty({__proto__:null,bound:rFe,identifier:BZ,mark:iFe,overlap:sFe,render:aFe,viewlayout:lFe},Symbol.toStringTag,{value:"Module"}));function cFe(e){Ee.call(this,null,e)}We(cFe,Ee,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.scale,o=e.count==null?e.values?e.values.length:10:e.count,a=eZ(s,o,e.minstep),u=e.format||z6e(n,s,a,e.formatSpecifier,e.formatType,!!e.values),l=e.values?j6e(s,e.values,a):tZ(s,a);return i&&(r.rem=i),i=l.map((c,f)=>dr({index:f/(l.length-1||1),value:c,label:u(c)})),e.extra&&i.length&&i.push(dr({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}});function fFe(e){Ee.call(this,null,e)}function THt(){return dr({})}function AHt(e){const t=JE().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}We(fFe,Ee,{transform(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||THt,s=e.key||kt,o=this.value;return Ie(r.encode)&&(r.encode=null),o&&(e.modified("key")||t.modified(s))&&Te("DataJoin does not support modified key function or fields."),o||(t=t.addAll(),this.value=o=AHt(s)),t.visit(t.ADD,a=>{const u=s(a);let l=o.get(u);l?l.exit?(o.empty--,r.add.push(l)):r.mod.push(l):(l=i(a),o.set(u,l),r.add.push(l)),l.datum=a,l.exit=!1}),t.visit(t.MOD,a=>{const u=s(a),l=o.get(u);l&&(l.datum=a,r.mod.push(l))}),t.visit(t.REM,a=>{const u=s(a),l=o.get(u);a===l.datum&&!l.exit&&(r.rem.push(l),l.exit=!0,++o.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&o.empty>n.cleanThreshold)&&n.runAfter(o.clean),r}});function dFe(e){Ee.call(this,null,e)}We(dFe,Ee,{transform(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,s=t.encode;if(Ie(s))if(n.changed()||s.every(f=>i[f]))s=s[0],n.encode=null;else return t.StopPropagation;var o=s==="enter",a=i.update||Em,u=i.enter||Em,l=i.exit||Em,c=(s&&!o?i[s]:a)||Em;if(t.changed(t.ADD)&&(t.visit(t.ADD,f=>{u(f,e),a(f,e)}),n.modifies(u.output),n.modifies(a.output),c!==Em&&c!==a&&(t.visit(t.ADD,f=>{c(f,e)}),n.modifies(c.output))),t.changed(t.REM)&&l!==Em&&(t.visit(t.REM,f=>{l(f,e)}),n.modifies(l.output)),o||c!==Em){const f=t.MOD|(e.modified()?t.REFLOW:0);o?(t.visit(f,d=>{const h=u(d,e)||r;(c(d,e)||h)&&n.mod.push(d)}),n.mod.length&&n.modifies(u.output)):t.visit(f,d=>{(c(d,e)||r)&&n.mod.push(d)}),n.mod.length&&n.modifies(c.output)}return n.changed()?n:t.StopPropagation}});function hFe(e){Ee.call(this,[],e)}We(hFe,Ee,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.type||w$,o=e.scale,a=+e.limit,u=eZ(o,e.count==null?5:e.count,e.minstep),l=!!e.values||s===w$,c=e.format||q6e(n,o,u,s,e.formatSpecifier,e.formatType,l),f=e.values||H6e(o,u),d,h,p,m,g;return i&&(r.rem=i),s===w$?(a&&f.length>a?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=f.slice(0,a-1),g=!0):i=f,pn(p=e.size)?(!e.values&&o(i[0])===0&&(i=i.slice(1)),m=i.reduce((y,v)=>Math.max(y,p(v,e)),0)):p=na(m=p||8),i=i.map((y,v)=>dr({index:v,label:c(y,v,i),value:y,offset:m,size:p(y,e)})),g&&(g=f[i.length],i.push(dr({index:i.length,label:`${f.length-i.length} entries`,value:g,offset:m,size:p(g,e)})))):s===Z7t?(d=o.domain(),h=M6e(o,d[0],Un(d)),f.length<3&&!e.values&&d[0]!==Un(d)&&(f=[d[0],Un(d)]),i=f.map((y,v)=>dr({index:v,label:c(y,v,f),value:y,perc:h(y)}))):(p=f.length-1,h=czt(o),i=f.map((y,v)=>dr({index:v,label:c(y,v,f),value:y,perc:v?h(y):0,perc2:v===p?1:h(f[v+1])}))),r.source=i,r.add=i,this.value=i,r}});const CHt=e=>e.source.x,IHt=e=>e.source.y,OHt=e=>e.target.x,PHt=e=>e.target.y;function jZ(e){Ee.call(this,{},e)}jZ.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};We(jZ,Ee,{transform(e,t){var n=e.sourceX||CHt,r=e.sourceY||IHt,i=e.targetX||OHt,s=e.targetY||PHt,o=e.as||"path",a=e.orient||"vertical",u=e.shape||"line",l=Bge.get(u+"-"+a)||Bge.get(u);return l||Te("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,c=>{c[o]=l(n(c),r(c),i(c),s(c))}),t.reflow(e.modified()).modifies(o)}});const pFe=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,kHt=(e,t,n,r)=>pFe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),mFe=(e,t,n,r)=>{var i=n-e,s=r-t,o=Math.hypot(i,s)/2,a=180*Math.atan2(s,i)/Math.PI;return"M"+e+","+t+"A"+o+","+o+" "+a+" 0 1 "+n+","+r},$Ht=(e,t,n,r)=>mFe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),gFe=(e,t,n,r)=>{const i=n-e,s=r-t,o=.2*(i+s),a=.2*(s-i);return"M"+e+","+t+"C"+(e+o)+","+(t+a)+" "+(n+a)+","+(r-o)+" "+n+","+r},RHt=(e,t,n,r)=>gFe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),NHt=(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,DHt=(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,LHt=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*s+"A"+t+","+t+" 0 0,"+(u?1:0)+" "+t*o+","+t*a+"L"+r*o+","+r*a},MHt=(e,t,n,r)=>{const i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},FHt=(e,t,n,r)=>{const i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},BHt=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=(t+r)/2;return"M"+t*i+","+t*s+"C"+u*i+","+u*s+" "+u*o+","+u*a+" "+r*o+","+r*a},Bge=JE({line:pFe,"line-radial":kHt,arc:mFe,"arc-radial":$Ht,curve:gFe,"curve-radial":RHt,"orthogonal-horizontal":NHt,"orthogonal-vertical":DHt,"orthogonal-radial":LHt,"diagonal-horizontal":MHt,"diagonal-vertical":FHt,"diagonal-radial":BHt});function zZ(e){Ee.call(this,null,e)}zZ.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};We(zZ,Ee,{transform(e,t){var n=e.as||["startAngle","endAngle"],r=n[0],i=n[1],s=e.field||KE,o=e.startAngle||0,a=e.endAngle!=null?e.endAngle:2*Math.PI,u=t.source,l=u.map(s),c=l.length,f=o,d=(a-o)/ZLe(l),h=Nv(c),p,m,g;for(e.sort&&h.sort((y,v)=>l[y]-l[v]),p=0;p<c;++p)g=l[h[p]],m=u[h[p]],m[r]=f,m[i]=f+=g*d;return this.value=l,t.reflow(e.modified()).modifies(n)}});const jHt=5;function zHt(e){const t=e.type;return!e.bins&&(t===Bw||t===xI||t===SI)}function yFe(e){return QJ(e)&&e!==Od}const UHt=cf(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function vFe(e){Ee.call(this,null,e),this.modified(!0)}We(vFe,Ee,{transform(e,t){var n=t.dataflow,r=this.value,i=VHt(e);(!r||i!==r.type)&&(this.value=r=or(i)());for(i in e)if(!UHt[i]){if(i==="padding"&&yFe(r.type))continue;pn(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return KHt(r,e,YHt(r,e,qHt(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function VHt(e){var t=e.type,n="",r;return t===Od?Od+"-"+Bw:(HHt(e)&&(r=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=r===2?Od+"-":r===3?nx+"-":""),(n+t||Bw).toLowerCase())}function HHt(e){const t=e.type;return QJ(t)&&t!==U1&&t!==V1&&(e.scheme||e.range&&e.range.length&&e.range.every(rt))}function qHt(e,t,n){const r=WHt(e,t.domainRaw,n);if(r>-1)return r;var i=t.domain,s=e.type,o=t.zero||t.zero===void 0&&zHt(e),a,u;if(!i)return 0;if(yFe(s)&&t.padding&&i[0]!==Un(i)&&(i=GHt(s,i,t.range,t.padding,t.exponent,t.constant)),(o||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(a=(i=i.slice()).length-1||1,o&&(i[0]>0&&(i[0]=0),i[a]<0&&(i[a]=0)),t.domainMin!=null&&(i[0]=t.domainMin),t.domainMax!=null&&(i[a]=t.domainMax),t.domainMid!=null)){u=t.domainMid;const l=u>i[a]?a+1:u<i[0]?0:a;l!==a&&n.warn("Scale domainMid exceeds domain min or max.",u),i.splice(l,0,u)}return e.domain(_Fe(s,i,n)),s===GJ&&e.unknown(t.domainImplicit?LU:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&eZ(e,t.nice)||null),i.length}function WHt(e,t,n){return t?(e.domain(_Fe(e.type,t,n)),t.length):-1}function GHt(e,t,n,r,i,s){var o=Math.abs(Un(n)-n[0]),a=o/(o-2*r),u=e===Dp?jQ(t,null,a):e===SI?M3(t,null,a,.5):e===xI?M3(t,null,a,i||1):e===iF?zQ(t,null,a,s||1):BQ(t,null,a);return t=t.slice(),t[0]=u[0],t[t.length-1]=u[1],t}function _Fe(e,t,n){if($6e(e)){var r=Math.abs(t.reduce((i,s)=>i+(s<0?-1:s>0?1:0),0));r!==t.length&&n.warn("Log scale domain includes zero: "+Xe(t))}return t}function YHt(e,t,n){let r=t.bins;if(r&&!Ie(r)){const i=e.domain(),s=i[0],o=Un(i),a=r.step;let u=r.start==null?s:r.start,l=r.stop==null?o:r.stop;a||Te("Scale bins parameter missing step property."),u<s&&(u=a*Math.ceil(s/a)),l>o&&(l=a*Math.floor(o/a)),r=Nv(u,l+a/2,a)}return r?e.bins=r:e.bins&&delete e.bins,e.type===YJ&&(r?!t.domain&&!t.domainRaw&&(e.domain(r),n=r.length):e.bins=e.domain()),n}function KHt(e,t,n){var r=e.type,i=t.round||!1,s=t.range;if(t.rangeStep!=null)s=XHt(r,t,n);else if(t.scheme&&(s=QHt(r,t,n),pn(s))){if(e.interpolator)return e.interpolator(s);Te(`Scale type ${r} does not support interpolating color schemes.`)}if(s&&R6e(r))return e.interpolator(aF(gH(s,t.reverse),t.interpolate,t.interpolateGamma));s&&t.interpolate&&e.interpolate?e.interpolate(JJ(t.interpolate,t.interpolateGamma)):pn(e.round)?e.round(i):pn(e.rangeRound)&&e.interpolate(i?QC:Xp),s&&e.range(gH(s,t.reverse))}function XHt(e,t,n){e!==A6e&&e!==eH&&Te("Only band and point scales support rangeStep.");var r=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,i=e===eH?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*WJ(n,i,r)]}function QHt(e,t,n){var r=t.schemeExtent,i,s;return Ie(t.scheme)?s=aF(t.scheme,t.interpolate,t.interpolateGamma):(i=t.scheme.toLowerCase(),s=ZJ(i),s||Te(`Unrecognized scheme name: ${t.scheme}`)),n=e===oF?n+1:e===YJ?n-1:e===jw||e===sF?+t.schemeCount||jHt:n,R6e(e)?jge(s,r,t.reverse):pn(s)?L6e(jge(s,r),n):e===GJ?s:s.slice(0,n)}function jge(e,t,n){return pn(e)&&(t||n)?D6e(e,gH(t||[0,1],n)):e}function gH(e,t){return t?e.slice().reverse():e}function bFe(e){Ee.call(this,null,e)}We(bFe,Ee,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(Dv(e.sort)),this.modified(n),t}});const zge="zero",wFe="center",EFe="normalize",xFe=["y0","y1"];function UZ(e){Ee.call(this,null,e)}UZ.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:zge,values:[zge,wFe,EFe]},{name:"as",type:"string",array:!0,length:2,default:xFe}]};We(UZ,Ee,{transform(e,t){var n=e.as||xFe,r=n[0],i=n[1],s=Dv(e.sort),o=e.field||KE,a=e.offset===wFe?JHt:e.offset===EFe?ZHt:eqt,u,l,c,f;for(u=tqt(t.source,e.groupby,s,o),l=0,c=u.length,f=u.max;l<c;++l)a(u[l],f,o,r,i);return t.reflow(e.modified()).modifies(n)}});function JHt(e,t,n,r,i){for(var s=(t-e.sum)/2,o=e.length,a=0,u;a<o;++a)u=e[a],u[r]=s,u[i]=s+=Math.abs(n(u))}function ZHt(e,t,n,r,i){for(var s=1/e.sum,o=0,a=e.length,u=0,l=0,c;u<a;++u)c=e[u],c[r]=o,c[i]=o=s*(l+=Math.abs(n(c)))}function eqt(e,t,n,r,i){for(var s=0,o=0,a=e.length,u=0,l,c;u<a;++u)c=e[u],l=+n(c),l<0?(c[r]=o,c[i]=o+=l):(c[r]=s,c[i]=s+=l)}function tqt(e,t,n,r){var i=[],s=m=>m(c),o,a,u,l,c,f,d,h,p;if(t==null)i.push(e.slice());else for(o={},a=0,u=e.length;a<u;++a)c=e[a],f=t.map(s),d=o[f],d||(o[f]=d=[],i.push(d)),d.push(c);for(f=0,p=0,l=i.length;f<l;++f){for(d=i[f],a=0,h=0,u=d.length;a<u;++a)h+=Math.abs(r(d[a]));d.sum=h,h>p&&(p=h),n&&d.sort(n)}return i.max=p,i}const nqt=Object.freeze(Object.defineProperty({__proto__:null,axisticks:cFe,datajoin:fFe,encode:dFe,legendentries:hFe,linkpath:jZ,pie:zZ,scale:vFe,sortitems:bFe,stack:UZ},Symbol.toStringTag,{value:"Module"}));class Ea{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const s=n[i],o=t+s,a=Math.abs(t)<Math.abs(s)?t-(o-s):s-(o-t);a&&(n[r++]=a),t=o}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,s,o=0;if(n>0){for(o=t[--n];n>0&&(r=o,i=t[--n],o=r+i,s=i-(o-r),!s););n>0&&(s<0&&t[n-1]<0||s>0&&t[n-1]>0)&&(i=s*2,r=o+i,i==r-o&&(o=r))}return o}}function*rqt(e){for(const t of e)yield*t}function SFe(e){return Array.from(rqt(e))}function ub(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}var Dt=1e-6,eL=1e-12,An=Math.PI,Ri=An/2,tL=An/4,Oa=An*2,zi=180/An,Sn=An/180,zn=Math.abs,ix=Math.atan,sc=Math.atan2,Ft=Math.cos,zP=Math.ceil,TFe=Math.exp,yH=Math.hypot,nL=Math.log,hj=Math.pow,$t=Math.sin,Vl=Math.sign||function(e){return e>0?1:e<0?-1:0},Pa=Math.sqrt,VZ=Math.tan;function AFe(e){return e>1?0:e<-1?An:Math.acos(e)}function wu(e){return e>1?Ri:e<-1?-Ri:Math.asin(e)}function fo(){}function rL(e,t){e&&Vge.hasOwnProperty(e.type)&&Vge[e.type](e,t)}var Uge={Feature:function(e,t){rL(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)rL(n[r].geometry,t)}},Vge={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){vH(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)vH(n[r],t,0)},Polygon:function(e,t){Hge(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Hge(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)rL(n[r],t)}};function vH(e,t,n){var r=-1,i=e.length-n,s;for(t.lineStart();++r<i;)s=e[r],t.point(s[0],s[1],s[2]);t.lineEnd()}function Hge(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)vH(e[n],t,1);t.polygonEnd()}function zh(e,t){e&&Uge.hasOwnProperty(e.type)?Uge[e.type](e,t):rL(e,t)}var iL=new Ea,sL=new Ea,CFe,IFe,_H,bH,wH,Yd={point:fo,lineStart:fo,lineEnd:fo,polygonStart:function(){iL=new Ea,Yd.lineStart=iqt,Yd.lineEnd=sqt},polygonEnd:function(){var e=+iL;sL.add(e<0?Oa+e:e),this.lineStart=this.lineEnd=this.point=fo},sphere:function(){sL.add(Oa)}};function iqt(){Yd.point=oqt}function sqt(){OFe(CFe,IFe)}function oqt(e,t){Yd.point=OFe,CFe=e,IFe=t,e*=Sn,t*=Sn,_H=e,bH=Ft(t=t/2+tL),wH=$t(t)}function OFe(e,t){e*=Sn,t*=Sn,t=t/2+tL;var n=e-_H,r=n>=0?1:-1,i=r*n,s=Ft(t),o=$t(t),a=wH*o,u=bH*s+a*Ft(i),l=a*r*$t(i);iL.add(sc(l,u)),_H=e,bH=s,wH=o}function aqt(e){return sL=new Ea,zh(e,Yd),sL*2}function oL(e){return[sc(e[1],e[0]),wu(e[2])]}function q1(e){var t=e[0],n=e[1],r=Ft(n);return[r*Ft(t),r*$t(t),$t(n)]}function UP(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Ww(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function pj(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function VP(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function aL(e){var t=Pa(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var yi,Qa,Ti,Vu,wy,PFe,kFe,Bb,f2,$m,Lp,Rh={point:EH,lineStart:qge,lineEnd:Wge,polygonStart:function(){Rh.point=RFe,Rh.lineStart=uqt,Rh.lineEnd=lqt,f2=new Ea,Yd.polygonStart()},polygonEnd:function(){Yd.polygonEnd(),Rh.point=EH,Rh.lineStart=qge,Rh.lineEnd=Wge,iL<0?(yi=-(Ti=180),Qa=-(Vu=90)):f2>Dt?Vu=90:f2<-Dt&&(Qa=-90),Lp[0]=yi,Lp[1]=Ti},sphere:function(){yi=-(Ti=180),Qa=-(Vu=90)}};function EH(e,t){$m.push(Lp=[yi=e,Ti=e]),t<Qa&&(Qa=t),t>Vu&&(Vu=t)}function $Fe(e,t){var n=q1([e*Sn,t*Sn]);if(Bb){var r=Ww(Bb,n),i=[r[1],-r[0],0],s=Ww(i,r);aL(s),s=oL(s);var o=e-wy,a=o>0?1:-1,u=s[0]*zi*a,l,c=zn(o)>180;c^(a*wy<u&&u<a*e)?(l=s[1]*zi,l>Vu&&(Vu=l)):(u=(u+360)%360-180,c^(a*wy<u&&u<a*e)?(l=-s[1]*zi,l<Qa&&(Qa=l)):(t<Qa&&(Qa=t),t>Vu&&(Vu=t))),c?e<wy?Bu(yi,e)>Bu(yi,Ti)&&(Ti=e):Bu(e,Ti)>Bu(yi,Ti)&&(yi=e):Ti>=yi?(e<yi&&(yi=e),e>Ti&&(Ti=e)):e>wy?Bu(yi,e)>Bu(yi,Ti)&&(Ti=e):Bu(e,Ti)>Bu(yi,Ti)&&(yi=e)}else $m.push(Lp=[yi=e,Ti=e]);t<Qa&&(Qa=t),t>Vu&&(Vu=t),Bb=n,wy=e}function qge(){Rh.point=$Fe}function Wge(){Lp[0]=yi,Lp[1]=Ti,Rh.point=EH,Bb=null}function RFe(e,t){if(Bb){var n=e-wy;f2.add(zn(n)>180?n+(n>0?360:-360):n)}else PFe=e,kFe=t;Yd.point(e,t),$Fe(e,t)}function uqt(){Yd.lineStart()}function lqt(){RFe(PFe,kFe),Yd.lineEnd(),zn(f2)>Dt&&(yi=-(Ti=180)),Lp[0]=yi,Lp[1]=Ti,Bb=null}function Bu(e,t){return(t-=e)<0?t+360:t}function cqt(e,t){return e[0]-t[0]}function Gge(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function fqt(e){var t,n,r,i,s,o,a;if(Vu=Ti=-(yi=Qa=1/0),$m=[],zh(e,Rh),n=$m.length){for($m.sort(cqt),t=1,r=$m[0],s=[r];t<n;++t)i=$m[t],Gge(r,i[0])||Gge(r,i[1])?(Bu(r[0],i[1])>Bu(r[0],r[1])&&(r[1]=i[1]),Bu(i[0],r[1])>Bu(r[0],r[1])&&(r[0]=i[0])):s.push(r=i);for(o=-1/0,n=s.length-1,t=0,r=s[n];t<=n;r=i,++t)i=s[t],(a=Bu(r[1],i[0]))>o&&(o=a,yi=i[0],Ti=r[1])}return $m=Lp=null,yi===1/0||Qa===1/0?[[NaN,NaN],[NaN,NaN]]:[[yi,Qa],[Ti,Vu]]}var lT,uL,lL,cL,fL,dL,hL,pL,xH,SH,TH,NFe,DFe,ma,ga,ya,Gc={sphere:fo,point:HZ,lineStart:Yge,lineEnd:Kge,polygonStart:function(){Gc.lineStart=pqt,Gc.lineEnd=mqt},polygonEnd:function(){Gc.lineStart=Yge,Gc.lineEnd=Kge}};function HZ(e,t){e*=Sn,t*=Sn;var n=Ft(t);NI(n*Ft(e),n*$t(e),$t(t))}function NI(e,t,n){++lT,lL+=(e-lL)/lT,cL+=(t-cL)/lT,fL+=(n-fL)/lT}function Yge(){Gc.point=dqt}function dqt(e,t){e*=Sn,t*=Sn;var n=Ft(t);ma=n*Ft(e),ga=n*$t(e),ya=$t(t),Gc.point=hqt,NI(ma,ga,ya)}function hqt(e,t){e*=Sn,t*=Sn;var n=Ft(t),r=n*Ft(e),i=n*$t(e),s=$t(t),o=sc(Pa((o=ga*s-ya*i)*o+(o=ya*r-ma*s)*o+(o=ma*i-ga*r)*o),ma*r+ga*i+ya*s);uL+=o,dL+=o*(ma+(ma=r)),hL+=o*(ga+(ga=i)),pL+=o*(ya+(ya=s)),NI(ma,ga,ya)}function Kge(){Gc.point=HZ}function pqt(){Gc.point=gqt}function mqt(){LFe(NFe,DFe),Gc.point=HZ}function gqt(e,t){NFe=e,DFe=t,e*=Sn,t*=Sn,Gc.point=LFe;var n=Ft(t);ma=n*Ft(e),ga=n*$t(e),ya=$t(t),NI(ma,ga,ya)}function LFe(e,t){e*=Sn,t*=Sn;var n=Ft(t),r=n*Ft(e),i=n*$t(e),s=$t(t),o=ga*s-ya*i,a=ya*r-ma*s,u=ma*i-ga*r,l=yH(o,a,u),c=wu(l),f=l&&-c/l;xH.add(f*o),SH.add(f*a),TH.add(f*u),uL+=c,dL+=c*(ma+(ma=r)),hL+=c*(ga+(ga=i)),pL+=c*(ya+(ya=s)),NI(ma,ga,ya)}function yqt(e){lT=uL=lL=cL=fL=dL=hL=pL=0,xH=new Ea,SH=new Ea,TH=new Ea,zh(e,Gc);var t=+xH,n=+SH,r=+TH,i=yH(t,n,r);return i<eL&&(t=dL,n=hL,r=pL,uL<Dt&&(t=lL,n=cL,r=fL),i=yH(t,n,r),i<eL)?[NaN,NaN]:[sc(n,t)*zi,wu(r/i)*zi]}function AH(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function CH(e,t){return zn(e)>An&&(e-=Math.round(e/Oa)*Oa),[e,t]}CH.invert=CH;function MFe(e,t,n){return(e%=Oa)?t||n?AH(Qge(e),Jge(t,n)):Qge(e):t||n?Jge(t,n):CH}function Xge(e){return function(t,n){return t+=e,zn(t)>An&&(t-=Math.round(t/Oa)*Oa),[t,n]}}function Qge(e){var t=Xge(e);return t.invert=Xge(-e),t}function Jge(e,t){var n=Ft(e),r=$t(e),i=Ft(t),s=$t(t);function o(a,u){var l=Ft(u),c=Ft(a)*l,f=$t(a)*l,d=$t(u),h=d*n+c*r;return[sc(f*i-h*s,c*n-d*r),wu(h*i+f*s)]}return o.invert=function(a,u){var l=Ft(u),c=Ft(a)*l,f=$t(a)*l,d=$t(u),h=d*i-f*s;return[sc(f*i+d*s,c*n+h*r),wu(h*n-c*r)]},o}function vqt(e){e=MFe(e[0]*Sn,e[1]*Sn,e.length>2?e[2]*Sn:0);function t(n){return n=e(n[0]*Sn,n[1]*Sn),n[0]*=zi,n[1]*=zi,n}return t.invert=function(n){return n=e.invert(n[0]*Sn,n[1]*Sn),n[0]*=zi,n[1]*=zi,n},t}function _qt(e,t,n,r,i,s){if(n){var o=Ft(t),a=$t(t),u=r*n;i==null?(i=t+r*Oa,s=t-u/2):(i=Zge(o,i),s=Zge(o,s),(r>0?i<s:i>s)&&(i+=r*Oa));for(var l,c=i;r>0?c>s:c<s;c-=u)l=oL([o,-a*Ft(c),-a*$t(c)]),e.point(l[0],l[1])}}function Zge(e,t){t=q1(t),t[0]-=e,aL(t);var n=AFe(-t[1]);return((-t[2]<0?-n:n)+Oa-Dt)%Oa}function FFe(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:fo,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function O$(e,t){return zn(e[0]-t[0])<Dt&&zn(e[1]-t[1])<Dt}function HP(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function BFe(e,t,n,r,i){var s=[],o=[],a,u;if(e.forEach(function(p){if(!((m=p.length-1)<=0)){var m,g=p[0],y=p[m],v;if(O$(g,y)){if(!g[2]&&!y[2]){for(i.lineStart(),a=0;a<m;++a)i.point((g=p[a])[0],g[1]);i.lineEnd();return}y[0]+=2*Dt}s.push(v=new HP(g,p,null,!0)),o.push(v.o=new HP(g,null,v,!1)),s.push(v=new HP(y,p,null,!1)),o.push(v.o=new HP(y,null,v,!0))}}),!!s.length){for(o.sort(t),e0e(s),e0e(o),a=0,u=o.length;a<u;++a)o[a].e=n=!n;for(var l=s[0],c,f;;){for(var d=l,h=!0;d.v;)if((d=d.n)===l)return;c=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(a=0,u=c.length;a<u;++a)i.point((f=c[a])[0],f[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(c=d.p.z,a=c.length-1;a>=0;--a)i.point((f=c[a])[0],f[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,c=d.z,h=!h}while(!d.v);i.lineEnd()}}}function e0e(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function mj(e){return zn(e[0])<=An?e[0]:Vl(e[0])*((zn(e[0])+An)%Oa-An)}function bqt(e,t){var n=mj(t),r=t[1],i=$t(r),s=[$t(n),-Ft(n),0],o=0,a=0,u=new Ea;i===1?r=Ri+Dt:i===-1&&(r=-Ri-Dt);for(var l=0,c=e.length;l<c;++l)if(d=(f=e[l]).length)for(var f,d,h=f[d-1],p=mj(h),m=h[1]/2+tL,g=$t(m),y=Ft(m),v=0;v<d;++v,p=b,g=w,y=x,h=_){var _=f[v],b=mj(_),E=_[1]/2+tL,w=$t(E),x=Ft(E),S=b-p,I=S>=0?1:-1,C=I*S,O=C>An,z=g*w;if(u.add(sc(z*I*$t(C),y*x+z*Ft(C))),o+=O?S+I*Oa:S,O^p>=n^b>=n){var N=Ww(q1(h),q1(_));aL(N);var $=Ww(s,N);aL($);var D=(O^S>=0?-1:1)*wu($[2]);(r>D||r===D&&(N[0]||N[1]))&&(a+=O^S>=0?1:-1)}}return(o<-Dt||o<Dt&&u<-eL)^a&1}function jFe(e,t,n,r){return function(i){var s=t(i),o=FFe(),a=t(o),u=!1,l,c,f,d={point:h,lineStart:m,lineEnd:g,polygonStart:function(){d.point=y,d.lineStart=v,d.lineEnd=_,c=[],l=[]},polygonEnd:function(){d.point=h,d.lineStart=m,d.lineEnd=g,c=SFe(c);var b=bqt(l,r);c.length?(u||(i.polygonStart(),u=!0),BFe(c,Eqt,b,n,i)):b&&(u||(i.polygonStart(),u=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),u&&(i.polygonEnd(),u=!1),c=l=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(b,E){e(b,E)&&i.point(b,E)}function p(b,E){s.point(b,E)}function m(){d.point=p,s.lineStart()}function g(){d.point=h,s.lineEnd()}function y(b,E){f.push([b,E]),a.point(b,E)}function v(){a.lineStart(),f=[]}function _(){y(f[0][0],f[0][1]),a.lineEnd();var b=a.clean(),E=o.result(),w,x=E.length,S,I,C;if(f.pop(),l.push(f),f=null,!!x){if(b&1){if(I=E[0],(S=I.length-1)>0){for(u||(i.polygonStart(),u=!0),i.lineStart(),w=0;w<S;++w)i.point((C=I[w])[0],C[1]);i.lineEnd()}return}x>1&&b&2&&E.push(E.pop().concat(E.shift())),c.push(E.filter(wqt))}}return d}}function wqt(e){return e.length>1}function Eqt(e,t){return((e=e.x)[0]<0?e[1]-Ri-Dt:Ri-e[1])-((t=t.x)[0]<0?t[1]-Ri-Dt:Ri-t[1])}const t0e=jFe(function(){return!0},xqt,Tqt,[-An,-Ri]);function xqt(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(s,o){var a=s>0?An:-An,u=zn(s-t);zn(u-An)<Dt?(e.point(t,n=(n+o)/2>0?Ri:-Ri),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(s,n),i=0):r!==a&&u>=An&&(zn(t-r)<Dt&&(t-=r*Dt),zn(s-a)<Dt&&(s-=a*Dt),n=Sqt(t,n,s,o),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),i=0),e.point(t=s,n=o),r=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function Sqt(e,t,n,r){var i,s,o=$t(e-n);return zn(o)>Dt?ix(($t(t)*(s=Ft(r))*$t(n)-$t(r)*(i=Ft(t))*$t(e))/(i*s*o)):(t+r)/2}function Tqt(e,t,n,r){var i;if(e==null)i=n*Ri,r.point(-An,i),r.point(0,i),r.point(An,i),r.point(An,0),r.point(An,-i),r.point(0,-i),r.point(-An,-i),r.point(-An,0),r.point(-An,i);else if(zn(e[0]-t[0])>Dt){var s=e[0]<t[0]?An:-An;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(t[0],t[1])}function Aqt(e){var t=Ft(e),n=2*Sn,r=t>0,i=zn(t)>Dt;function s(c,f,d,h){_qt(h,e,n,d,c,f)}function o(c,f){return Ft(c)*Ft(f)>t}function a(c){var f,d,h,p,m;return{lineStart:function(){p=h=!1,m=1},point:function(g,y){var v=[g,y],_,b=o(g,y),E=r?b?0:l(g,y):b?l(g+(g<0?An:-An),y):0;if(!f&&(p=h=b)&&c.lineStart(),b!==h&&(_=u(f,v),(!_||O$(f,_)||O$(v,_))&&(v[2]=1)),b!==h)m=0,b?(c.lineStart(),_=u(v,f),c.point(_[0],_[1])):(_=u(f,v),c.point(_[0],_[1],2),c.lineEnd()),f=_;else if(i&&f&&r^b){var w;!(E&d)&&(w=u(v,f,!0))&&(m=0,r?(c.lineStart(),c.point(w[0][0],w[0][1]),c.point(w[1][0],w[1][1]),c.lineEnd()):(c.point(w[1][0],w[1][1]),c.lineEnd(),c.lineStart(),c.point(w[0][0],w[0][1],3)))}b&&(!f||!O$(f,v))&&c.point(v[0],v[1]),f=v,h=b,d=E},lineEnd:function(){h&&c.lineEnd(),f=null},clean:function(){return m|(p&&h)<<1}}}function u(c,f,d){var h=q1(c),p=q1(f),m=[1,0,0],g=Ww(h,p),y=UP(g,g),v=g[0],_=y-v*v;if(!_)return!d&&c;var b=t*y/_,E=-t*v/_,w=Ww(m,g),x=VP(m,b),S=VP(g,E);pj(x,S);var I=w,C=UP(x,I),O=UP(I,I),z=C*C-O*(UP(x,x)-1);if(!(z<0)){var N=Pa(z),$=VP(I,(-C-N)/O);if(pj($,x),$=oL($),!d)return $;var D=c[0],B=f[0],V=c[1],j=f[1],G;B<D&&(G=D,D=B,B=G);var U=B-D,P=zn(U-An)<Dt,k=P||U<Dt;if(!P&&j<V&&(G=V,V=j,j=G),k?P?V+j>0^$[1]<(zn($[0]-D)<Dt?V:j):V<=$[1]&&$[1]<=j:U>An^(D<=$[0]&&$[0]<=B)){var H=VP(I,(-C+N)/O);return pj(H,x),[$,oL(H)]}}}function l(c,f){var d=r?e:An-e,h=0;return c<-d?h|=1:c>d&&(h|=2),f<-d?h|=4:f>d&&(h|=8),h}return jFe(o,a,s,r?[0,-e]:[-An,e-An])}function Cqt(e,t,n,r,i,s){var o=e[0],a=e[1],u=t[0],l=t[1],c=0,f=1,d=u-o,h=l-a,p;if(p=n-o,!(!d&&p>0)){if(p/=d,d<0){if(p<c)return;p<f&&(f=p)}else if(d>0){if(p>f)return;p>c&&(c=p)}if(p=i-o,!(!d&&p<0)){if(p/=d,d<0){if(p>f)return;p>c&&(c=p)}else if(d>0){if(p<c)return;p<f&&(f=p)}if(p=r-a,!(!h&&p>0)){if(p/=h,h<0){if(p<c)return;p<f&&(f=p)}else if(h>0){if(p>f)return;p>c&&(c=p)}if(p=s-a,!(!h&&p<0)){if(p/=h,h<0){if(p>f)return;p>c&&(c=p)}else if(h>0){if(p<c)return;p<f&&(f=p)}return c>0&&(e[0]=o+c*d,e[1]=a+c*h),f<1&&(t[0]=o+f*d,t[1]=a+f*h),!0}}}}}var cT=1e9,qP=-cT;function zFe(e,t,n,r){function i(l,c){return e<=l&&l<=n&&t<=c&&c<=r}function s(l,c,f,d){var h=0,p=0;if(l==null||(h=o(l,f))!==(p=o(c,f))||u(l,c)<0^f>0)do d.point(h===0||h===3?e:n,h>1?r:t);while((h=(h+f+4)%4)!==p);else d.point(c[0],c[1])}function o(l,c){return zn(l[0]-e)<Dt?c>0?0:3:zn(l[0]-n)<Dt?c>0?2:1:zn(l[1]-t)<Dt?c>0?1:0:c>0?3:2}function a(l,c){return u(l.x,c.x)}function u(l,c){var f=o(l,1),d=o(c,1);return f!==d?f-d:f===0?c[1]-l[1]:f===1?l[0]-c[0]:f===2?l[1]-c[1]:c[0]-l[0]}return function(l){var c=l,f=FFe(),d,h,p,m,g,y,v,_,b,E,w,x={point:S,lineStart:z,lineEnd:N,polygonStart:C,polygonEnd:O};function S(D,B){i(D,B)&&c.point(D,B)}function I(){for(var D=0,B=0,V=h.length;B<V;++B)for(var j=h[B],G=1,U=j.length,P=j[0],k,H,M=P[0],F=P[1];G<U;++G)k=M,H=F,P=j[G],M=P[0],F=P[1],H<=r?F>r&&(M-k)*(r-H)>(F-H)*(e-k)&&++D:F<=r&&(M-k)*(r-H)<(F-H)*(e-k)&&--D;return D}function C(){c=f,d=[],h=[],w=!0}function O(){var D=I(),B=w&&D,V=(d=SFe(d)).length;(B||V)&&(l.polygonStart(),B&&(l.lineStart(),s(null,null,1,l),l.lineEnd()),V&&BFe(d,a,D,s,l),l.polygonEnd()),c=l,d=h=p=null}function z(){x.point=$,h&&h.push(p=[]),E=!0,b=!1,v=_=NaN}function N(){d&&($(m,g),y&&b&&f.rejoin(),d.push(f.result())),x.point=S,b&&c.lineEnd()}function $(D,B){var V=i(D,B);if(h&&p.push([D,B]),E)m=D,g=B,y=V,E=!1,V&&(c.lineStart(),c.point(D,B));else if(V&&b)c.point(D,B);else{var j=[v=Math.max(qP,Math.min(cT,v)),_=Math.max(qP,Math.min(cT,_))],G=[D=Math.max(qP,Math.min(cT,D)),B=Math.max(qP,Math.min(cT,B))];Cqt(j,G,e,t,n,r)?(b||(c.lineStart(),c.point(j[0],j[1])),c.point(G[0],G[1]),V||c.lineEnd(),w=!1):V&&(c.lineStart(),c.point(D,B),w=!1)}v=D,_=B,b=V}return x}}function n0e(e,t,n){var r=ub(e,t-Dt,n).concat(t);return function(i){return r.map(function(s){return[i,s]})}}function r0e(e,t,n){var r=ub(e,t-Dt,n).concat(t);return function(i){return r.map(function(s){return[s,i]})}}function Iqt(){var e,t,n,r,i,s,o,a,u=10,l=u,c=90,f=360,d,h,p,m,g=2.5;function y(){return{type:"MultiLineString",coordinates:v()}}function v(){return ub(zP(r/c)*c,n,c).map(p).concat(ub(zP(a/f)*f,o,f).map(m)).concat(ub(zP(t/u)*u,e,u).filter(function(_){return zn(_%c)>Dt}).map(d)).concat(ub(zP(s/l)*l,i,l).filter(function(_){return zn(_%f)>Dt}).map(h))}return y.lines=function(){return v().map(function(_){return{type:"LineString",coordinates:_}})},y.outline=function(){return{type:"Polygon",coordinates:[p(r).concat(m(o).slice(1),p(n).reverse().slice(1),m(a).reverse().slice(1))]}},y.extent=function(_){return arguments.length?y.extentMajor(_).extentMinor(_):y.extentMinor()},y.extentMajor=function(_){return arguments.length?(r=+_[0][0],n=+_[1][0],a=+_[0][1],o=+_[1][1],r>n&&(_=r,r=n,n=_),a>o&&(_=a,a=o,o=_),y.precision(g)):[[r,a],[n,o]]},y.extentMinor=function(_){return arguments.length?(t=+_[0][0],e=+_[1][0],s=+_[0][1],i=+_[1][1],t>e&&(_=t,t=e,e=_),s>i&&(_=s,s=i,i=_),y.precision(g)):[[t,s],[e,i]]},y.step=function(_){return arguments.length?y.stepMajor(_).stepMinor(_):y.stepMinor()},y.stepMajor=function(_){return arguments.length?(c=+_[0],f=+_[1],y):[c,f]},y.stepMinor=function(_){return arguments.length?(u=+_[0],l=+_[1],y):[u,l]},y.precision=function(_){return arguments.length?(g=+_,d=n0e(s,i,90),h=r0e(t,e,g),p=n0e(a,o,90),m=r0e(r,n,g),y):g},y.extentMajor([[-180,-90+Dt],[180,90-Dt]]).extentMinor([[-180,-80-Dt],[180,80+Dt]])}const LA=e=>e;var gj=new Ea,IH=new Ea,UFe,VFe,OH,PH,Uh={point:fo,lineStart:fo,lineEnd:fo,polygonStart:function(){Uh.lineStart=Oqt,Uh.lineEnd=kqt},polygonEnd:function(){Uh.lineStart=Uh.lineEnd=Uh.point=fo,gj.add(zn(IH)),IH=new Ea},result:function(){var e=gj/2;return gj=new Ea,e}};function Oqt(){Uh.point=Pqt}function Pqt(e,t){Uh.point=HFe,UFe=OH=e,VFe=PH=t}function HFe(e,t){IH.add(PH*e-OH*t),OH=e,PH=t}function kqt(){HFe(UFe,VFe)}var Gw=1/0,mL=Gw,MA=-Gw,gL=MA,yL={point:$qt,lineStart:fo,lineEnd:fo,polygonStart:fo,polygonEnd:fo,result:function(){var e=[[Gw,mL],[MA,gL]];return MA=gL=-(mL=Gw=1/0),e}};function $qt(e,t){e<Gw&&(Gw=e),e>MA&&(MA=e),t<mL&&(mL=t),t>gL&&(gL=t)}var kH=0,$H=0,fT=0,vL=0,_L=0,lb=0,RH=0,NH=0,dT=0,qFe,WFe,ld,cd,Fl={point:W1,lineStart:i0e,lineEnd:s0e,polygonStart:function(){Fl.lineStart=Dqt,Fl.lineEnd=Lqt},polygonEnd:function(){Fl.point=W1,Fl.lineStart=i0e,Fl.lineEnd=s0e},result:function(){var e=dT?[RH/dT,NH/dT]:lb?[vL/lb,_L/lb]:fT?[kH/fT,$H/fT]:[NaN,NaN];return kH=$H=fT=vL=_L=lb=RH=NH=dT=0,e}};function W1(e,t){kH+=e,$H+=t,++fT}function i0e(){Fl.point=Rqt}function Rqt(e,t){Fl.point=Nqt,W1(ld=e,cd=t)}function Nqt(e,t){var n=e-ld,r=t-cd,i=Pa(n*n+r*r);vL+=i*(ld+e)/2,_L+=i*(cd+t)/2,lb+=i,W1(ld=e,cd=t)}function s0e(){Fl.point=W1}function Dqt(){Fl.point=Mqt}function Lqt(){GFe(qFe,WFe)}function Mqt(e,t){Fl.point=GFe,W1(qFe=ld=e,WFe=cd=t)}function GFe(e,t){var n=e-ld,r=t-cd,i=Pa(n*n+r*r);vL+=i*(ld+e)/2,_L+=i*(cd+t)/2,lb+=i,i=cd*e-ld*t,RH+=i*(ld+e),NH+=i*(cd+t),dT+=i*3,W1(ld=e,cd=t)}function YFe(e){this._context=e}YFe.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Oa);break}}},result:fo};var DH=new Ea,yj,KFe,XFe,hT,pT,FA={point:fo,lineStart:function(){FA.point=Fqt},lineEnd:function(){yj&&QFe(KFe,XFe),FA.point=fo},polygonStart:function(){yj=!0},polygonEnd:function(){yj=null},result:function(){var e=+DH;return DH=new Ea,e}};function Fqt(e,t){FA.point=QFe,KFe=hT=e,XFe=pT=t}function QFe(e,t){hT-=e,pT-=t,DH.add(Pa(hT*hT+pT*pT)),hT=e,pT=t}let o0e,bL,a0e,u0e;class l0e{constructor(t){this._append=t==null?JFe:Bqt(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==a0e||this._append!==bL){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,a0e=r,bL=this._append,u0e=this._,this._=i}this._+=u0e;break}}}result(){const t=this._;return this._="",t.length?t:null}}function JFe(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function Bqt(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return JFe;if(t!==o0e){const n=10**t;o0e=t,bL=function(i){let s=1;this._+=i[0];for(const o=i.length;s<o;++s)this._+=Math.round(arguments[s]*n)/n+i[s]}}return bL}function ZFe(e,t){let n=3,r=4.5,i,s;function o(a){return a&&(typeof r=="function"&&s.pointRadius(+r.apply(this,arguments)),zh(a,i(s))),s.result()}return o.area=function(a){return zh(a,i(Uh)),Uh.result()},o.measure=function(a){return zh(a,i(FA)),FA.result()},o.bounds=function(a){return zh(a,i(yL)),yL.result()},o.centroid=function(a){return zh(a,i(Fl)),Fl.result()},o.projection=function(a){return arguments.length?(i=a==null?(e=null,LA):(e=a).stream,o):e},o.context=function(a){return arguments.length?(s=a==null?(t=null,new l0e(n)):new YFe(t=a),typeof r!="function"&&s.pointRadius(r),o):t},o.pointRadius=function(a){return arguments.length?(r=typeof a=="function"?a:(s.pointRadius(+a),+a),o):r},o.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const u=Math.floor(a);if(!(u>=0))throw new RangeError(`invalid digits: ${a}`);n=u}return t===null&&(s=new l0e(n)),o},o.projection(e).digits(n).context(t)}function wF(e){return function(t){var n=new LH;for(var r in e)n[r]=e[r];return n.stream=t,n}}function LH(){}LH.prototype={constructor:LH,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function qZ(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),zh(n,e.stream(yL)),t(yL.result()),r!=null&&e.clipExtent(r),e}function EF(e,t,n){return qZ(e,function(r){var i=t[1][0]-t[0][0],s=t[1][1]-t[0][1],o=Math.min(i/(r[1][0]-r[0][0]),s/(r[1][1]-r[0][1])),a=+t[0][0]+(i-o*(r[1][0]+r[0][0]))/2,u=+t[0][1]+(s-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([a,u])},n)}function WZ(e,t,n){return EF(e,[[0,0],t],n)}function GZ(e,t,n){return qZ(e,function(r){var i=+t,s=i/(r[1][0]-r[0][0]),o=(i-s*(r[1][0]+r[0][0]))/2,a=-s*r[0][1];e.scale(150*s).translate([o,a])},n)}function YZ(e,t,n){return qZ(e,function(r){var i=+t,s=i/(r[1][1]-r[0][1]),o=-s*r[0][0],a=(i-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([o,a])},n)}var c0e=16,jqt=Ft(30*Sn);function f0e(e,t){return+t?Uqt(e,t):zqt(e)}function zqt(e){return wF({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function Uqt(e,t){function n(r,i,s,o,a,u,l,c,f,d,h,p,m,g){var y=l-r,v=c-i,_=y*y+v*v;if(_>4*t&&m--){var b=o+d,E=a+h,w=u+p,x=Pa(b*b+E*E+w*w),S=wu(w/=x),I=zn(zn(w)-1)<Dt||zn(s-f)<Dt?(s+f)/2:sc(E,b),C=e(I,S),O=C[0],z=C[1],N=O-r,$=z-i,D=v*N-y*$;(D*D/_>t||zn((y*N+v*$)/_-.5)>.3||o*d+a*h+u*p<jqt)&&(n(r,i,s,o,a,u,O,z,I,b/=x,E/=x,w,m,g),g.point(O,z),n(O,z,I,b,E,w,l,c,f,d,h,p,m,g))}}return function(r){var i,s,o,a,u,l,c,f,d,h,p,m,g={point:y,lineStart:v,lineEnd:b,polygonStart:function(){r.polygonStart(),g.lineStart=E},polygonEnd:function(){r.polygonEnd(),g.lineStart=v}};function y(S,I){S=e(S,I),r.point(S[0],S[1])}function v(){f=NaN,g.point=_,r.lineStart()}function _(S,I){var C=q1([S,I]),O=e(S,I);n(f,d,c,h,p,m,f=O[0],d=O[1],c=S,h=C[0],p=C[1],m=C[2],c0e,r),r.point(f,d)}function b(){g.point=y,r.lineEnd()}function E(){v(),g.point=w,g.lineEnd=x}function w(S,I){_(i=S,I),s=f,o=d,a=h,u=p,l=m,g.point=_}function x(){n(f,d,c,h,p,m,s,o,i,a,u,l,c0e,r),g.lineEnd=b,b()}return g}}var Vqt=wF({point:function(e,t){this.stream.point(e*Sn,t*Sn)}});function Hqt(e){return wF({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function qqt(e,t,n,r,i){function s(o,a){return o*=r,a*=i,[t+e*o,n-e*a]}return s.invert=function(o,a){return[(o-t)/e*r,(n-a)/e*i]},s}function d0e(e,t,n,r,i,s){if(!s)return qqt(e,t,n,r,i);var o=Ft(s),a=$t(s),u=o*e,l=a*e,c=o/e,f=a/e,d=(a*n-o*t)/e,h=(a*t+o*n)/e;function p(m,g){return m*=r,g*=i,[u*m-l*g+t,n-l*m-u*g]}return p.invert=function(m,g){return[r*(c*m-f*g+d),i*(h-f*m-c*g)]},p}function uh(e){return e5e(function(){return e})()}function e5e(e){var t,n=150,r=480,i=250,s=0,o=0,a=0,u=0,l=0,c,f=0,d=1,h=1,p=null,m=t0e,g=null,y,v,_,b=LA,E=.5,w,x,S,I,C;function O(D){return S(D[0]*Sn,D[1]*Sn)}function z(D){return D=S.invert(D[0],D[1]),D&&[D[0]*zi,D[1]*zi]}O.stream=function(D){return I&&C===D?I:I=Vqt(Hqt(c)(m(w(b(C=D)))))},O.preclip=function(D){return arguments.length?(m=D,p=void 0,$()):m},O.postclip=function(D){return arguments.length?(b=D,g=y=v=_=null,$()):b},O.clipAngle=function(D){return arguments.length?(m=+D?Aqt(p=D*Sn):(p=null,t0e),$()):p*zi},O.clipExtent=function(D){return arguments.length?(b=D==null?(g=y=v=_=null,LA):zFe(g=+D[0][0],y=+D[0][1],v=+D[1][0],_=+D[1][1]),$()):g==null?null:[[g,y],[v,_]]},O.scale=function(D){return arguments.length?(n=+D,N()):n},O.translate=function(D){return arguments.length?(r=+D[0],i=+D[1],N()):[r,i]},O.center=function(D){return arguments.length?(s=D[0]%360*Sn,o=D[1]%360*Sn,N()):[s*zi,o*zi]},O.rotate=function(D){return arguments.length?(a=D[0]%360*Sn,u=D[1]%360*Sn,l=D.length>2?D[2]%360*Sn:0,N()):[a*zi,u*zi,l*zi]},O.angle=function(D){return arguments.length?(f=D%360*Sn,N()):f*zi},O.reflectX=function(D){return arguments.length?(d=D?-1:1,N()):d<0},O.reflectY=function(D){return arguments.length?(h=D?-1:1,N()):h<0},O.precision=function(D){return arguments.length?(w=f0e(x,E=D*D),$()):Pa(E)},O.fitExtent=function(D,B){return EF(O,D,B)},O.fitSize=function(D,B){return WZ(O,D,B)},O.fitWidth=function(D,B){return GZ(O,D,B)},O.fitHeight=function(D,B){return YZ(O,D,B)};function N(){var D=d0e(n,0,0,d,h,f).apply(null,t(s,o)),B=d0e(n,r-D[0],i-D[1],d,h,f);return c=MFe(a,u,l),x=AH(t,B),S=AH(c,x),w=f0e(x,E),$()}function $(){return I=C=null,O}return function(){return t=e.apply(this,arguments),O.invert=t.invert&&z,N()}}function KZ(e){var t=0,n=An/3,r=e5e(e),i=r(t,n);return i.parallels=function(s){return arguments.length?r(t=s[0]*Sn,n=s[1]*Sn):[t*zi,n*zi]},i}function Wqt(e){var t=Ft(e);function n(r,i){return[r*t,$t(i)/t]}return n.invert=function(r,i){return[r/t,wu(i*t)]},n}function Gqt(e,t){var n=$t(e),r=(n+$t(t))/2;if(zn(r)<Dt)return Wqt(e);var i=1+n*(2*r-n),s=Pa(i)/r;function o(a,u){var l=Pa(i-2*r*$t(u))/r;return[l*$t(a*=r),s-l*Ft(a)]}return o.invert=function(a,u){var l=s-u,c=sc(a,zn(l))*Vl(l);return l*r<0&&(c-=An*Vl(a)*Vl(l)),[c/r,wu((i-(a*a+l*l)*r*r)/(2*r))]},o}function wL(){return KZ(Gqt).scale(155.424).center([0,33.6442])}function t5e(){return wL().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Yqt(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function Kqt(){var e,t,n=t5e(),r,i=wL().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,o=wL().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,u,l={point:function(d,h){u=[d,h]}};function c(d){var h=d[0],p=d[1];return u=null,r.point(h,p),u||(s.point(h,p),u)||(a.point(h,p),u)}c.invert=function(d){var h=n.scale(),p=n.translate(),m=(d[0]-p[0])/h,g=(d[1]-p[1])/h;return(g>=.12&&g<.234&&m>=-.425&&m<-.214?i:g>=.166&&g<.234&&m>=-.214&&m<-.115?o:n).invert(d)},c.stream=function(d){return e&&t===d?e:e=Yqt([n.stream(t=d),i.stream(d),o.stream(d)])},c.precision=function(d){return arguments.length?(n.precision(d),i.precision(d),o.precision(d),f()):n.precision()},c.scale=function(d){return arguments.length?(n.scale(d),i.scale(d*.35),o.scale(d),c.translate(n.translate())):n.scale()},c.translate=function(d){if(!arguments.length)return n.translate();var h=n.scale(),p=+d[0],m=+d[1];return r=n.translate(d).clipExtent([[p-.455*h,m-.238*h],[p+.455*h,m+.238*h]]).stream(l),s=i.translate([p-.307*h,m+.201*h]).clipExtent([[p-.425*h+Dt,m+.12*h+Dt],[p-.214*h-Dt,m+.234*h-Dt]]).stream(l),a=o.translate([p-.205*h,m+.212*h]).clipExtent([[p-.214*h+Dt,m+.166*h+Dt],[p-.115*h-Dt,m+.234*h-Dt]]).stream(l),f()},c.fitExtent=function(d,h){return EF(c,d,h)},c.fitSize=function(d,h){return WZ(c,d,h)},c.fitWidth=function(d,h){return GZ(c,d,h)},c.fitHeight=function(d,h){return YZ(c,d,h)};function f(){return e=t=null,c}return c.scale(1070)}function n5e(e){return function(t,n){var r=Ft(t),i=Ft(n),s=e(r*i);return s===1/0?[2,0]:[s*i*$t(t),s*$t(n)]}}function DI(e){return function(t,n){var r=Pa(t*t+n*n),i=e(r),s=$t(i),o=Ft(i);return[sc(t*s,r*o),wu(r&&n*s/r)]}}var r5e=n5e(function(e){return Pa(2/(1+e))});r5e.invert=DI(function(e){return 2*wu(e/2)});function Xqt(){return uh(r5e).scale(124.75).clipAngle(180-.001)}var i5e=n5e(function(e){return(e=AFe(e))&&e/$t(e)});i5e.invert=DI(function(e){return e});function Qqt(){return uh(i5e).scale(79.4188).clipAngle(180-.001)}function xF(e,t){return[e,nL(VZ((Ri+t)/2))]}xF.invert=function(e,t){return[e,2*ix(TFe(t))-Ri]};function Jqt(){return s5e(xF).scale(961/Oa)}function s5e(e){var t=uh(e),n=t.center,r=t.scale,i=t.translate,s=t.clipExtent,o=null,a,u,l;t.scale=function(f){return arguments.length?(r(f),c()):r()},t.translate=function(f){return arguments.length?(i(f),c()):i()},t.center=function(f){return arguments.length?(n(f),c()):n()},t.clipExtent=function(f){return arguments.length?(f==null?o=a=u=l=null:(o=+f[0][0],a=+f[0][1],u=+f[1][0],l=+f[1][1]),c()):o==null?null:[[o,a],[u,l]]};function c(){var f=An*r(),d=t(vqt(t.rotate()).invert([0,0]));return s(o==null?[[d[0]-f,d[1]-f],[d[0]+f,d[1]+f]]:e===xF?[[Math.max(d[0]-f,o),a],[Math.min(d[0]+f,u),l]]:[[o,Math.max(d[1]-f,a)],[u,Math.min(d[1]+f,l)]])}return c()}function WP(e){return VZ((Ri+e)/2)}function Zqt(e,t){var n=Ft(e),r=e===t?$t(e):nL(n/Ft(t))/nL(WP(t)/WP(e)),i=n*hj(WP(e),r)/r;if(!r)return xF;function s(o,a){i>0?a<-Ri+Dt&&(a=-Ri+Dt):a>Ri-Dt&&(a=Ri-Dt);var u=i/hj(WP(a),r);return[u*$t(r*o),i-u*Ft(r*o)]}return s.invert=function(o,a){var u=i-a,l=Vl(r)*Pa(o*o+u*u),c=sc(o,zn(u))*Vl(u);return u*r<0&&(c-=An*Vl(o)*Vl(u)),[c/r,2*ix(hj(i/l,1/r))-Ri]},s}function eWt(){return KZ(Zqt).scale(109.5).parallels([30,30])}function EL(e,t){return[e,t]}EL.invert=EL;function tWt(){return uh(EL).scale(152.63)}function nWt(e,t){var n=Ft(e),r=e===t?$t(e):(n-Ft(t))/(t-e),i=n/r+e;if(zn(r)<Dt)return EL;function s(o,a){var u=i-a,l=r*o;return[u*$t(l),i-u*Ft(l)]}return s.invert=function(o,a){var u=i-a,l=sc(o,zn(u))*Vl(u);return u*r<0&&(l-=An*Vl(o)*Vl(u)),[l/r,i-Vl(r)*Pa(o*o+u*u)]},s}function rWt(){return KZ(nWt).scale(131.154).center([0,13.9389])}var d2=1.340264,h2=-.081106,p2=893e-6,m2=.003796,xL=Pa(3)/2,iWt=12;function o5e(e,t){var n=wu(xL*$t(t)),r=n*n,i=r*r*r;return[e*Ft(n)/(xL*(d2+3*h2*r+i*(7*p2+9*m2*r))),n*(d2+h2*r+i*(p2+m2*r))]}o5e.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,s=0,o,a,u;s<iWt&&(a=n*(d2+h2*r+i*(p2+m2*r))-t,u=d2+3*h2*r+i*(7*p2+9*m2*r),n-=o=a/u,r=n*n,i=r*r*r,!(zn(o)<eL));++s);return[xL*e*(d2+3*h2*r+i*(7*p2+9*m2*r))/Ft(n),wu($t(n)/xL)]};function sWt(){return uh(o5e).scale(177.158)}function a5e(e,t){var n=Ft(t),r=Ft(e)*n;return[n*$t(e)/r,$t(t)/r]}a5e.invert=DI(ix);function oWt(){return uh(a5e).scale(144.049).clipAngle(60)}function aWt(){var e=1,t=0,n=0,r=1,i=1,s=0,o,a,u=null,l,c,f,d=1,h=1,p=wF({point:function(b,E){var w=_([b,E]);this.stream.point(w[0],w[1])}}),m=LA,g,y;function v(){return d=e*r,h=e*i,g=y=null,_}function _(b){var E=b[0]*d,w=b[1]*h;if(s){var x=w*o-E*a;E=E*o+w*a,w=x}return[E+t,w+n]}return _.invert=function(b){var E=b[0]-t,w=b[1]-n;if(s){var x=w*o+E*a;E=E*o-w*a,w=x}return[E/d,w/h]},_.stream=function(b){return g&&y===b?g:g=p(m(y=b))},_.postclip=function(b){return arguments.length?(m=b,u=l=c=f=null,v()):m},_.clipExtent=function(b){return arguments.length?(m=b==null?(u=l=c=f=null,LA):zFe(u=+b[0][0],l=+b[0][1],c=+b[1][0],f=+b[1][1]),v()):u==null?null:[[u,l],[c,f]]},_.scale=function(b){return arguments.length?(e=+b,v()):e},_.translate=function(b){return arguments.length?(t=+b[0],n=+b[1],v()):[t,n]},_.angle=function(b){return arguments.length?(s=b%360*Sn,a=$t(s),o=Ft(s),v()):s*zi},_.reflectX=function(b){return arguments.length?(r=b?-1:1,v()):r<0},_.reflectY=function(b){return arguments.length?(i=b?-1:1,v()):i<0},_.fitExtent=function(b,E){return EF(_,b,E)},_.fitSize=function(b,E){return WZ(_,b,E)},_.fitWidth=function(b,E){return GZ(_,b,E)},_.fitHeight=function(b,E){return YZ(_,b,E)},_}function u5e(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}u5e.invert=function(e,t){var n=t,r=25,i;do{var s=n*n,o=s*s;n-=i=(n*(1.007226+s*(.015085+o*(-.044475+.028874*s-.005916*o)))-t)/(1.007226+s*(.015085*3+o*(-.044475*7+.028874*9*s-.005916*11*o)))}while(zn(i)>Dt&&--r>0);return[e/(.8707+(s=n*n)*(-.131979+s*(-.013791+s*s*s*(.003971-.001529*s)))),n]};function uWt(){return uh(u5e).scale(175.295)}function l5e(e,t){return[Ft(t)*$t(e),$t(t)]}l5e.invert=DI(wu);function lWt(){return uh(l5e).scale(249.5).clipAngle(90+Dt)}function c5e(e,t){var n=Ft(t),r=1+Ft(e)*n;return[n*$t(e)/r,$t(t)/r]}c5e.invert=DI(function(e){return 2*ix(e)});function cWt(){return uh(c5e).scale(250).clipAngle(142)}function f5e(e,t){return[nL(VZ((Ri+t)/2)),-e]}f5e.invert=function(e,t){return[-t,2*ix(TFe(e))-Ri]};function fWt(){var e=s5e(f5e),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}var dWt=Math.abs,MH=Math.cos,SL=Math.sin,hWt=1e-6,d5e=Math.PI,FH=d5e/2,h0e=pWt(2);function p0e(e){return e>1?FH:e<-1?-FH:Math.asin(e)}function pWt(e){return e>0?Math.sqrt(e):0}function mWt(e,t){var n=e*SL(t),r=30,i;do t-=i=(t+SL(t)-n)/(1+MH(t));while(dWt(i)>hWt&&--r>0);return t/2}function gWt(e,t,n){function r(i,s){return[e*i*MH(s=mWt(n,s)),t*SL(s)]}return r.invert=function(i,s){return s=p0e(s/t),[i/(e*MH(s)),p0e((2*s+SL(2*s))/n)]},r}var yWt=gWt(h0e/FH,h0e,d5e);function vWt(){return uh(yWt).scale(169.529)}const _Wt=ZFe(),BH=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function bWt(e,t){return function n(){const r=t();return r.type=e,r.path=ZFe().projection(r),r.copy=r.copy||function(){const i=n();return BH.forEach(s=>{r[s]&&i[s](r[s]())}),i.path.pointRadius(r.path.pointRadius()),i},P6e(r)}}function XZ(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(TL[e]=bWt(e,t),this):TL[e]||null}function h5e(e){return e&&e.path||_Wt}const TL={albers:t5e,albersusa:Kqt,azimuthalequalarea:Xqt,azimuthalequidistant:Qqt,conicconformal:eWt,conicequalarea:wL,conicequidistant:rWt,equalEarth:sWt,equirectangular:tWt,gnomonic:oWt,identity:aWt,mercator:Jqt,mollweide:vWt,naturalEarth1:uWt,orthographic:lWt,stereographic:cWt,transversemercator:fWt};for(const e in TL)XZ(e,TL[e]);function wWt(){}const Eh=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function p5e(){var e=1,t=1,n=a;function r(u,l){return l.map(c=>i(u,c))}function i(u,l){var c=[],f=[];return s(u,l,d=>{n(d,u,l),EWt(d)>0?c.push([d]):f.push(d)}),f.forEach(d=>{for(var h=0,p=c.length,m;h<p;++h)if(xWt((m=c[h])[0],d)!==-1){m.push(d);return}}),{type:"MultiPolygon",value:l,coordinates:c}}function s(u,l,c){var f=new Array,d=new Array,h,p,m,g,y,v;for(h=p=-1,g=u[0]>=l,Eh[g<<1].forEach(_);++h<e-1;)m=g,g=u[h+1]>=l,Eh[m|g<<1].forEach(_);for(Eh[g<<0].forEach(_);++p<t-1;){for(h=-1,g=u[p*e+e]>=l,y=u[p*e]>=l,Eh[g<<1|y<<2].forEach(_);++h<e-1;)m=g,g=u[p*e+e+h+1]>=l,v=y,y=u[p*e+h+1]>=l,Eh[m|g<<1|y<<2|v<<3].forEach(_);Eh[g|y<<3].forEach(_)}for(h=-1,y=u[p*e]>=l,Eh[y<<2].forEach(_);++h<e-1;)v=y,y=u[p*e+h+1]>=l,Eh[y<<2|v<<3].forEach(_);Eh[y<<3].forEach(_);function _(b){var E=[b[0][0]+h,b[0][1]+p],w=[b[1][0]+h,b[1][1]+p],x=o(E),S=o(w),I,C;(I=d[x])?(C=f[S])?(delete d[I.end],delete f[C.start],I===C?(I.ring.push(w),c(I.ring)):f[I.start]=d[C.end]={start:I.start,end:C.end,ring:I.ring.concat(C.ring)}):(delete d[I.end],I.ring.push(w),d[I.end=S]=I):(I=f[S])?(C=d[x])?(delete f[I.start],delete d[C.end],I===C?(I.ring.push(w),c(I.ring)):f[C.start]=d[I.end]={start:C.start,end:I.end,ring:C.ring.concat(I.ring)}):(delete f[I.start],I.ring.unshift(E),f[I.start=x]=I):f[x]=d[S]={start:x,end:S,ring:[E,w]}}}function o(u){return u[0]*2+u[1]*(e+1)*4}function a(u,l,c){u.forEach(f=>{var d=f[0],h=f[1],p=d|0,m=h|0,g,y=l[m*e+p];d>0&&d<e&&p===d&&(g=l[m*e+p-1],f[0]=d+(c-g)/(y-g)-.5),h>0&&h<t&&m===h&&(g=l[(m-1)*e+p],f[1]=h+(c-g)/(y-g)-.5)})}return r.contour=i,r.size=function(u){if(!arguments.length)return[e,t];var l=Math.floor(u[0]),c=Math.floor(u[1]);return l>=0&&c>=0||Te("invalid size"),e=l,t=c,r},r.smooth=function(u){return arguments.length?(n=u?a:wWt,r):n===a},r}function EWt(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}function xWt(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=SWt(e,t[n]))return i;return 0}function SWt(e,t){for(var n=t[0],r=t[1],i=-1,s=0,o=e.length,a=o-1;s<o;a=s++){var u=e[s],l=u[0],c=u[1],f=e[a],d=f[0],h=f[1];if(TWt(u,f,t))return 0;c>r!=h>r&&n<(d-l)*(r-c)/(h-c)+l&&(i=-i)}return i}function TWt(e,t,n){var r;return AWt(e,t,n)&&CWt(e[r=+(e[0]===t[0])],n[r],t[r])}function AWt(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function CWt(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function m5e(e,t,n){return function(r){var i=Wd(r),s=n?Math.min(i[0],0):i[0],o=i[1],a=o-s,u=t?CA(s,o,e):a/(e+1);return Nv(s+u,o,u)}}function QZ(e){Ee.call(this,null,e)}QZ.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};We(QZ,Ee,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||ta,s=p5e().smooth(e.smooth!==!1),o=e.thresholds||IWt(r,i,e),a=e.as===null?null:e.as||"contour",u=[];return r.forEach(l=>{const c=i(l),f=s.size([c.width,c.height])(c.values,Ie(o)?o:o(c.values));OWt(f,c,l,e),f.forEach(d=>{u.push(K4(l,dr(a!=null?{[a]:d}:d)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function IWt(e,t,n){const r=m5e(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?r:r(e.map(i=>p1(t(i).values)))}function OWt(e,t,n,r){let i=r.scale||t.scale,s=r.translate||t.translate;if(pn(i)&&(i=i(n,r)),pn(s)&&(s=s(n,r)),(i===1||i==null)&&!s)return;const o=(Jn(i)?i:i[0])||1,a=(Jn(i)?i:i[1])||1,u=s&&s[0]||0,l=s&&s[1]||0;e.forEach(g5e(t,o,a,u,l))}function g5e(e,t,n,r,i){const s=e.x1||0,o=e.y1||0,a=t*n<0;function u(f){f.forEach(l)}function l(f){a&&f.reverse(),f.forEach(c)}function c(f){f[0]=(f[0]-s)*t+r,f[1]=(f[1]-o)*n+i}return function(f){return f.coordinates.forEach(u),f}}function m0e(e,t,n){const r=e>=0?e:oJ(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function vj(e){return pn(e)?e:na(+e)}function y5e(){var e=u=>u[0],t=u=>u[1],n=KE,r=[-1,-1],i=960,s=500,o=2;function a(u,l){const c=m0e(r[0],u,e)>>o,f=m0e(r[1],u,t)>>o,d=c?c+2:0,h=f?f+2:0,p=2*d+(i>>o),m=2*h+(s>>o),g=new Float32Array(p*m),y=new Float32Array(p*m);let v=g;u.forEach(b=>{const E=d+(+e(b)>>o),w=h+(+t(b)>>o);E>=0&&E<p&&w>=0&&w<m&&(g[E+w*p]+=+n(b))}),c>0&&f>0?(y_(p,m,g,y,c),v_(p,m,y,g,f),y_(p,m,g,y,c),v_(p,m,y,g,f),y_(p,m,g,y,c),v_(p,m,y,g,f)):c>0?(y_(p,m,g,y,c),y_(p,m,y,g,c),y_(p,m,g,y,c),v=y):f>0&&(v_(p,m,g,y,f),v_(p,m,y,g,f),v_(p,m,g,y,f),v=y);const _=l?Math.pow(2,-2*o):1/ZLe(v);for(let b=0,E=p*m;b<E;++b)v[b]*=_;return{values:v,scale:1<<o,width:p,height:m,x1:d,y1:h,x2:d+(i>>o),y2:h+(s>>o)}}return a.x=function(u){return arguments.length?(e=vj(u),a):e},a.y=function(u){return arguments.length?(t=vj(u),a):t},a.weight=function(u){return arguments.length?(n=vj(u),a):n},a.size=function(u){if(!arguments.length)return[i,s];var l=+u[0],c=+u[1];return l>=0&&c>=0||Te("invalid size"),i=l,s=c,a},a.cellSize=function(u){return arguments.length?((u=+u)>=1||Te("invalid cell size"),o=Math.floor(Math.log(u)/Math.LN2),a):1<<o},a.bandwidth=function(u){return arguments.length?(u=nt(u),u.length===1&&(u=[+u[0],+u[0]]),u.length!==2&&Te("invalid bandwidth"),r=u,a):r},a}function y_(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<t;++o)for(let a=0,u=0;a<e+i;++a)a<e&&(u+=n[a+o*e]),a>=i&&(a>=s&&(u-=n[a-s+o*e]),r[a-i+o*e]=u/Math.min(a+1,e-1+s-a,s))}function v_(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<e;++o)for(let a=0,u=0;a<t+i;++a)a<t&&(u+=n[o+a*e]),a>=i&&(a>=s&&(u-=n[o+(a-s)*e]),r[o+(a-i)*e]=u/Math.min(a+1,t-1+s-a,s))}function JZ(e){Ee.call(this,null,e)}JZ.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const PWt=["x","y","weight","size","cellSize","bandwidth"];function v5e(e,t){return PWt.forEach(n=>t[n]!=null?e[n](t[n]):0),e}We(JZ,Ee,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=kWt(r,e.groupby),s=(e.groupby||[]).map(Ni),o=v5e(y5e(),e),a=e.as||"grid",u=[];function l(c,f){for(let d=0;d<s.length;++d)c[s[d]]=f[d];return c}return u=i.map(c=>dr(l({[a]:o(c,e.counts)},c.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function kWt(e,t){var n=[],r=c=>c(a),i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function ZZ(e){Ee.call(this,null,e)}ZZ.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};We(ZZ,Ee,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=p5e().smooth(e.smooth!==!1),i=e.values,s=e.thresholds||m5e(e.count||10,e.nice,!!i),o=e.size,a,u;return i||(i=t.materialize(t.SOURCE).source,a=v5e(y5e(),e)(i,!0),u=g5e(a,a.scale||1,a.scale||1,0,0),o=[a.width,a.height],i=a.values),s=Ie(s)?s:s(i),i=r.size(o)(i,s),u&&i.forEach(u),this.value&&(n.rem=this.value),this.value=n.source=n.add=(i||[]).map(dr),n}});const jH="Feature",eee="FeatureCollection",$Wt="MultiPoint";function tee(e){Ee.call(this,null,e)}tee.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};We(tee,Ee,{transform(e,t){var n=this._features,r=this._points,i=e.fields,s=i&&i[0],o=i&&i[1],a=e.geojson||!i&&ta,u=t.ADD,l;l=e.modified()||t.changed(t.REM)||t.modified(Go(a))||s&&t.modified(Go(s))||o&&t.modified(Go(o)),(!this.value||l)&&(u=t.SOURCE,this._features=n=[],this._points=r=[]),a&&t.visit(u,c=>n.push(a(c))),s&&o&&(t.visit(u,c=>{var f=s(c),d=o(c);f!=null&&d!=null&&(f=+f)===f&&(d=+d)===d&&r.push([f,d])}),n=n.concat({type:jH,geometry:{type:$Wt,coordinates:r}})),this.value={type:eee,features:n}}});function nee(e){Ee.call(this,null,e)}nee.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};We(nee,Ee,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||ta,s=e.as||"path",o=n.SOURCE;!r||e.modified()?(this.value=r=h5e(e.projection),n.materialize().reflow()):o=i===ta||t.modified(i.fields)?n.ADD_MOD:n.ADD;const a=RWt(r,e.pointRadius);return n.visit(o,u=>u[s]=r(i(u))),r.pointRadius(a),n.modifies(s)}});function RWt(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function ree(e){Ee.call(this,null,e)}ree.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};We(ree,Ee,{transform(e,t){var n=e.projection,r=e.fields[0],i=e.fields[1],s=e.as||["x","y"],o=s[0],a=s[1],u;function l(c){const f=n([r(c),i(c)]);f?(c[o]=f[0],c[a]=f[1]):(c[o]=void 0,c[a]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,l):(u=t.modified(r.fields)||t.modified(i.fields),t.visit(u?t.ADD_MOD:t.ADD,l)),t.modifies(s)}});function iee(e){Ee.call(this,null,e)}iee.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};We(iee,Ee,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",s=n.ADD;return(!r||e.modified())&&(this.value=r=NWt(h5e(e.projection),e.field||tc("datum"),e.pointRadius),n.materialize().reflow(),s=n.SOURCE),n.visit(s,o=>o[i]=r),n.modifies(i)}});function NWt(e,t,n){const r=n==null?i=>e(t(i)):i=>{var s=e.pointRadius(),o=e.pointRadius(n)(t(i));return e.pointRadius(s),o};return r.context=i=>(e.context(i),r),r}function see(e){Ee.call(this,[],e),this.generator=Iqt()}see.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};We(see,Ee,{transform(e,t){var n=this.value,r=this.generator,i;if(!n.length||e.modified())for(const s in e)pn(r[s])&&r[s](e[s]);return i=r(),n.length?t.mod.push(NMe(n[0],i)):t.add.push(dr(i)),n[0]=i,t}});function oee(e){Ee.call(this,null,e)}oee.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};We(oee,Ee,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r=e.resolve==="shared",i=e.field||ta,s=LWt(e.opacity,e),o=DWt(e.color,e),a=e.as||"image",u={$x:0,$y:0,$value:0,$max:r?p1(n.map(l=>p1(i(l).values))):0};return n.forEach(l=>{const c=i(l),f=hn({},l,u);r||(f.$max=p1(c.values||[])),l[a]=MWt(c,f,o.dep?o:na(o(f)),s.dep?s:na(s(f)))}),t.reflow(!0).modifies(a)}});function DWt(e,t){let n;return pn(e)?(n=r=>Vg(e(r,t)),n.dep=_5e(e)):n=na(Vg(e||"#888")),n}function LWt(e,t){let n;return pn(e)?(n=r=>e(r,t),n.dep=_5e(e)):e?n=na(e):(n=r=>r.$value/r.$max||0,n.dep=!0),n}function _5e(e){if(!pn(e))return!1;const t=cf(Go(e));return t.$x||t.$y||t.$value||t.$max}function MWt(e,t,n,r){const i=e.width,s=e.height,o=e.x1||0,a=e.y1||0,u=e.x2||i,l=e.y2||s,c=e.values,f=c?g=>c[g]:Bm,d=Og(u-o,l-a),h=d.getContext("2d"),p=h.getImageData(0,0,u-o,l-a),m=p.data;for(let g=a,y=0;g<l;++g){t.$y=g-a;for(let v=o,_=g*i;v<u;++v,y+=4){t.$x=v-o,t.$value=f(v+_);const b=n(t);m[y+0]=b.r,m[y+1]=b.g,m[y+2]=b.b,m[y+3]=~~(255*r(t))}}return h.putImageData(p,0,0),d}function b5e(e){Ee.call(this,null,e),this.modified(!0)}We(b5e,Ee,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=BWt(e.type),BH.forEach(r=>{e[r]!=null&&g0e(n,r,e[r])})):BH.forEach(r=>{e.modified(r)&&g0e(n,r,e[r])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&FWt(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function FWt(e,t){const n=jWt(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function BWt(e){const t=XZ((e||"mercator").toLowerCase());return t||Te("Unrecognized projection type: "+e),t()}function g0e(e,t,n){pn(e[t])&&e[t](n)}function jWt(e){return e=nt(e),e.length===1?e[0]:{type:eee,features:e.reduce((t,n)=>t.concat(zWt(n)),[])}}function zWt(e){return e.type===eee?e.features:nt(e).filter(t=>t!=null).map(t=>t.type===jH?t:{type:jH,geometry:t})}const UWt=Object.freeze(Object.defineProperty({__proto__:null,contour:ZZ,geojson:tee,geopath:nee,geopoint:ree,geoshape:iee,graticule:see,heatmap:oee,isocontour:QZ,kde2d:JZ,projection:b5e},Symbol.toStringTag,{value:"Module"})),y0e={center:Nxt,collide:Zxt,nbody:cSt,link:tSt,x:fSt,y:dSt},mT="forces",zH=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],VWt=["static","iterations"],w5e=["x","y","vx","vy"];function aee(e){Ee.call(this,null,e)}aee.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:w5e}]};We(aee,Ee,{transform(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified(zH),s=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&E5e(n,e,0,t)):(this.value=n=qWt(t.source,e),n.on("tick",HWt(t.dataflow,this)),e.static||(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(VWt)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/s)),e.static)for(n.stop();--s>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let a=this._argops,u=0,l=a.length,c;u<l;++u)if(c=a[u],!(c.name!==mT||c.op._argval.force!=="link")){for(var r=c.op._argops,i=0,s=r.length,o;i<s;++i)if(r[i].name==="links"&&(o=r[i].op.source)){n.pulse(o,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(w5e)}});function HWt(e,t){return()=>e.touch(t).run()}function qWt(e,t){const n=lSt(e),r=n.stop,i=n.restart;let s=!1;return n.stopped=()=>s,n.restart=()=>(s=!1,i()),n.stop=()=>(s=!0,r()),E5e(n,t,!0).on("end",()=>s=!0)}function E5e(e,t,n,r){var i=nt(t.forces),s,o,a,u;for(s=0,o=zH.length;s<o;++s)a=zH[s],a!==mT&&t.modified(a)&&e[a](t[a]);for(s=0,o=i.length;s<o;++s)u=mT+s,a=n||t.modified(mT,s)?GWt(i[s]):r&&WWt(i[s],r)?e.force(u):null,a&&e.force(u,a);for(o=e.numForces||0;s<o;++s)e.force(mT+s,null);return e.numForces=i.length,e}function WWt(e,t){var n,r;for(n in e)if(pn(r=e[n])&&t.modified(Go(r)))return 1;return 0}function GWt(e){var t,n;Nt(y0e,e.force)||Te("Unrecognized force: "+e.force),t=y0e[e.force]();for(n in e)pn(t[n])&&YWt(t[n],e[n],e);return t}function YWt(e,t,n){e(pn(t)?r=>t(r,n):t)}const KWt=Object.freeze(Object.defineProperty({__proto__:null,force:aee},Symbol.toStringTag,{value:"Module"}));function UH(e,t,n){const r={};return e.each(i=>{const s=i.data;n(s)&&(r[t(s)]=i)}),e.lookup=r,e}function uee(e){Ee.call(this,null,e)}uee.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const XWt=e=>e.values;We(uee,Ee,{transform(e,t){t.source||Te("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),s=this.value;return(!s||r||t.changed())&&(s&&s.each(o=>{o.children&&Y4(o.data)&&i.rem.push(o.data)}),this.value=s=Y6({values:nt(e.keys).reduce((o,a)=>(o.key(a),o),QWt()).entries(i.source)},XWt),n&&s.each(o=>{o.children&&(o=dr(o.data),i.add.push(o),i.source.push(o))}),UH(s,kt,kt)),i.source.root=s,i}});function QWt(){const e=[],t={entries:i=>r(n(i,0),0),key:i=>(e.push(i),t)};function n(i,s){if(s>=e.length)return i;const o=i.length,a=e[s++],u={},l={};let c=-1,f,d,h;for(;++c<o;)f=a(d=i[c])+"",(h=u[f])?h.push(d):u[f]=[d];for(f in u)l[f]=n(u[f],s);return l}function r(i,s){if(++s>e.length)return i;const o=[];for(const a in i)o.push({key:a,values:r(i[a],s)});return o}return t}function nm(e){Ee.call(this,null,e)}const JWt=(e,t)=>e.parent===t.parent?1:2;We(nm,Ee,{transform(e,t){(!t.source||!t.source.root)&&Te(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),r=this.fields,i=t.source.root,s=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(Dv(e.sort,o=>o.data)),ZWt(n,this.params,e),n.separation&&n.separation(e.separation!==!1?JWt:KE);try{this.value=n(i)}catch(o){Te(o)}return i.each(o=>eGt(o,r,s)),t.reflow(e.modified()).modifies(s).modifies("leaf")}});function ZWt(e,t,n){for(let r,i=0,s=t.length;i<s;++i)r=t[i],r in n&&e[r](n[r])}function eGt(e,t,n){const r=e.data,i=t.length-1;for(let s=0;s<i;++s)r[n[s]]=e[t[s]];r[n[i]]=e.children?e.children.length:0}const VH=["x","y","r","depth","children"];function lee(e){nm.call(this,e)}lee.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:VH.length,default:VH}]};We(lee,nm,{layout:IPe,params:["radius","size","padding"],fields:VH});const HH=["x0","y0","x1","y1","depth","children"];function cee(e){nm.call(this,e)}cee.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:HH.length,default:HH}]};We(cee,nm,{layout:iTt,params:["size","round","padding"],fields:HH});function fee(e){Ee.call(this,null,e)}fee.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};We(fee,Ee,{transform(e,t){t.source||Te("Stratify transform requires an upstream data source.");let n=this.value;const r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),s=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),s&&(n=i.source.length?UH(Nde().id(e.key).parentId(e.parentKey)(i.source),e.key,nc):UH(Nde()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});const v0e={tidy:pTt,cluster:CSt},qH=["x","y","depth","children"];function dee(e){nm.call(this,e)}dee.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:qH.length,default:qH}]};We(dee,nm,{layout(e){const t=e||"tidy";if(Nt(v0e,t))return v0e[t]();Te("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:qH});function hee(e){Ee.call(this,[],e)}hee.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};We(hee,Ee,{transform(e,t){const n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),s={};return r||Te("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,o=>s[kt(o)]=1),r.each(o=>{const a=o.data,u=o.parent&&o.parent.data;u&&s[kt(a)]&&s[kt(u)]&&i.add.push(dr({source:u,target:a}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,o=>s[kt(o)]=1),n.forEach(o=>{(s[kt(o.source)]||s[kt(o.target)])&&i.mod.push(o)})),i}});const _0e={binary:gTt,dice:ZC,slice:K6,slicedice:yTt,squarify:$Pe,resquarify:vTt},WH=["x0","y0","x1","y1","depth","children"];function pee(e){nm.call(this,e)}pee.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:WH.length,default:WH}]};We(pee,nm,{layout(){const e=mTt();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{Nt(_0e,t)?e.tile(_0e[t]):Te("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:WH});const tGt=Object.freeze(Object.defineProperty({__proto__:null,nest:uee,pack:lee,partition:cee,stratify:fee,tree:dee,treelinks:hee,treemap:pee},Symbol.toStringTag,{value:"Module"})),_j=4278190080;function nGt(e,t){const n=e.bitmap();return(t||[]).forEach(r=>n.set(e(r.boundary[0]),e(r.boundary[3]))),[n,void 0]}function rGt(e,t,n,r,i){const s=e.width,o=e.height,a=r||i,u=Og(s,o).getContext("2d"),l=Og(s,o).getContext("2d"),c=a&&Og(s,o).getContext("2d");n.forEach(S=>P$(u,S,!1)),P$(l,t,!1),a&&P$(c,t,!0);const f=bj(u,s,o),d=bj(l,s,o),h=a&&bj(c,s,o),p=e.bitmap(),m=a&&e.bitmap();let g,y,v,_,b,E,w,x;for(y=0;y<o;++y)for(g=0;g<s;++g)b=y*s+g,E=f[b]&_j,x=d[b]&_j,w=a&&h[b]&_j,(E||w||x)&&(v=e(g),_=e(y),!i&&(E||x)&&p.set(v,_),a&&(E||w)&&m.set(v,_));return[p,m]}function bj(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function P$(e,t,n){if(!t.length)return;const r=t[0].mark.marktype;r==="group"?t.forEach(i=>{i.items.forEach(s=>P$(e,s.items,n))}):cl[r].draw(e,{items:n?t.map(iGt):t})}function iGt(e){const t=K4(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const xh=5,la=31,BA=32,Rm=new Uint32Array(BA+1),Bc=new Uint32Array(BA+1);Bc[0]=0;Rm[0]=~Bc[0];for(let e=1;e<=BA;++e)Bc[e]=Bc[e-1]<<1|1,Rm[e]=~Bc[e];function sGt(e,t){const n=new Uint32Array(~~((e*t+BA)/BA));function r(s,o){n[s]|=o}function i(s,o){n[s]&=o}return{array:n,get:(s,o)=>{const a=o*e+s;return n[a>>>xh]&1<<(a&la)},set:(s,o)=>{const a=o*e+s;r(a>>>xh,1<<(a&la))},clear:(s,o)=>{const a=o*e+s;i(a>>>xh,~(1<<(a&la)))},getRange:(s,o,a,u)=>{let l=u,c,f,d,h;for(;l>=o;--l)if(c=l*e+s,f=l*e+a,d=c>>>xh,h=f>>>xh,d===h){if(n[d]&Rm[c&la]&Bc[(f&la)+1])return!0}else{if(n[d]&Rm[c&la]||n[h]&Bc[(f&la)+1])return!0;for(let p=d+1;p<h;++p)if(n[p])return!0}return!1},setRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>xh,d=c>>>xh,f===d)r(f,Rm[l&la]&Bc[(c&la)+1]);else for(r(f,Rm[l&la]),r(d,Bc[(c&la)+1]),h=f+1;h<d;++h)r(h,4294967295)},clearRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>xh,d=c>>>xh,f===d)i(f,Bc[l&la]|Rm[(c&la)+1]);else for(i(f,Bc[l&la]),i(d,Rm[(c&la)+1]),h=f+1;h<d;++h)i(h,0)},outOfBounds:(s,o,a,u)=>s<0||o<0||u>=t||a>=e}}function oGt(e,t,n){const r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),s=~~((t+2*n+r)/r),o=a=>~~((a+n)/r);return o.invert=a=>a*r-n,o.bitmap=()=>sGt(i,s),o.ratio=r,o.padding=n,o.width=e,o.height=t,o}function aGt(e,t,n,r){const i=e.width,s=e.height;return function(o){const a=o.datum.datum.items[r].items,u=a.length,l=o.datum.fontSize,c=el.width(o.datum,o.datum.text);let f=0,d,h,p,m,g,y,v;for(let _=0;_<u;++_)d=a[_].x,p=a[_].y,h=a[_].x2===void 0?d:a[_].x2,m=a[_].y2===void 0?p:a[_].y2,g=(d+h)/2,y=(p+m)/2,v=Math.abs(h-d+m-p),v>=f&&(f=v,o.x=g,o.y=y);return g=c/2,y=l/2,d=o.x-g,h=o.x+g,p=o.y-y,m=o.y+y,o.align="center",d<0&&h<=i?o.align="left":0<=d&&i<h&&(o.align="right"),o.baseline="middle",p<0&&m<=s?o.baseline="top":0<=p&&s<m&&(o.baseline="bottom"),!0}}function AL(e,t,n,r,i,s){let o=n/2;return e-o<0||e+o>i||t-(o=r/2)<0||t+o>s}function sg(e,t,n,r,i,s,o,a){const u=i*s/(r*2),l=e(t-u),c=e(t+u),f=e(n-(s=s/2)),d=e(n+s);return o.outOfBounds(l,f,c,d)||o.getRange(l,f,c,d)||a&&a.getRange(l,f,c,d)}function uGt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1];function u(l,c,f,d,h){const p=e.invert(l),m=e.invert(c);let g=f,y=s,v;if(!AL(p,m,d,h,i,s)&&!sg(e,p,m,h,d,g,o,a)&&!sg(e,p,m,h,d,h,o,null)){for(;y-g>=1;)v=(g+y)/2,sg(e,p,m,h,d,v,o,a)?y=v:g=v;if(g>f)return[p,m,g,!0]}}return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=el.width(l.datum,l.datum.text);let p=n?d:0,m=!1,g=!1,y=0,v,_,b,E,w,x,S,I,C,O,z,N,$,D,B,V,j;for(let G=0;G<f;++G){for(v=c[G].x,b=c[G].y,_=c[G].x2===void 0?v:c[G].x2,E=c[G].y2===void 0?b:c[G].y2,v>_&&(j=v,v=_,_=j),b>E&&(j=b,b=E,E=j),C=e(v),z=e(_),O=~~((C+z)/2),N=e(b),D=e(E),$=~~((N+D)/2),S=O;S>=C;--S)for(I=$;I>=N;--I)V=u(S,I,p,h,d),V&&([l.x,l.y,p,m]=V);for(S=O;S<=z;++S)for(I=$;I<=D;++I)V=u(S,I,p,h,d),V&&([l.x,l.y,p,m]=V);!m&&!n&&(B=Math.abs(_-v+E-b),w=(v+_)/2,x=(b+E)/2,B>=y&&!AL(w,x,h,d,i,s)&&!sg(e,w,x,d,h,d,o,null)&&(y=B,l.x=w,l.y=x,g=!0))}return m||g?(w=h/2,x=d/2,o.setRange(e(l.x-w),e(l.y-x),e(l.x+w),e(l.y+x)),l.align="center",l.baseline="middle",!0):!1}}const lGt=[-1,-1,1,1],cGt=[-1,1,-1,1];function fGt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=e.bitmap();return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=el.width(l.datum,l.datum.text),p=[];let m=n?d:0,g=!1,y=!1,v=0,_,b,E,w,x,S,I,C,O,z,N,$;for(let D=0;D<f;++D){for(_=c[D].x,E=c[D].y,b=c[D].x2===void 0?_:c[D].x2,w=c[D].y2===void 0?E:c[D].y2,p.push([e((_+b)/2),e((E+w)/2)]);p.length;)if([I,C]=p.pop(),!(o.get(I,C)||a.get(I,C)||u.get(I,C))){u.set(I,C);for(let B=0;B<4;++B)x=I+lGt[B],S=C+cGt[B],u.outOfBounds(x,S,x,S)||p.push([x,S]);if(x=e.invert(I),S=e.invert(C),O=m,z=s,!AL(x,S,h,d,i,s)&&!sg(e,x,S,d,h,O,o,a)&&!sg(e,x,S,d,h,d,o,null)){for(;z-O>=1;)N=(O+z)/2,sg(e,x,S,d,h,N,o,a)?z=N:O=N;O>m&&(l.x=x,l.y=S,m=O,g=!0)}}!g&&!n&&($=Math.abs(b-_+w-E),x=(_+b)/2,S=(E+w)/2,$>=v&&!AL(x,S,h,d,i,s)&&!sg(e,x,S,d,h,d,o,null)&&(v=$,l.x=x,l.y=S,y=!0))}return g||y?(x=h/2,S=d/2,o.setRange(e(l.x-x),e(l.y-S),e(l.x+x),e(l.y+S)),l.align="center",l.baseline="middle",!0):!1}}const dGt=["right","center","left"],hGt=["bottom","middle","top"];function pGt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=r.length;return function(l){const c=l.boundary,f=l.datum.fontSize;if(c[2]<0||c[5]<0||c[0]>i||c[3]>s)return!1;let d=l.textWidth??0,h,p,m,g,y,v,_,b,E,w,x,S,I,C,O;for(let z=0;z<u;++z){if(h=(n[z]&3)-1,p=(n[z]>>>2&3)-1,m=h===0&&p===0||r[z]<0,g=h&&p?Math.SQRT1_2:1,y=r[z]<0?-1:1,v=c[1+h]+r[z]*h*g,x=c[4+p]+y*f*p/2+r[z]*p*g,b=x-f/2,E=x+f/2,S=e(v),C=e(b),O=e(E),!d)if(b0e(S,S,C,O,o,a,v,v,b,E,c,m))d=el.width(l.datum,l.datum.text);else continue;if(w=v+y*d*h/2,v=w-d/2,_=w+d/2,S=e(v),I=e(_),b0e(S,I,C,O,o,a,v,_,b,E,c,m))return l.x=h?h*y<0?_:v:w,l.y=p?p*y<0?E:b:x,l.align=dGt[h*y+1],l.baseline=hGt[p*y+1],o.setRange(S,C,I,O),!0}return!1}}function b0e(e,t,n,r,i,s,o,a,u,l,c,f){return!(i.outOfBounds(e,n,t,r)||(f&&s||i).getRange(e,n,t,r))}const wj=0,Ej=4,xj=8,Sj=0,Tj=1,Aj=2,mGt={"top-left":wj+Sj,top:wj+Tj,"top-right":wj+Aj,left:Ej+Sj,middle:Ej+Tj,right:Ej+Aj,"bottom-left":xj+Sj,bottom:xj+Tj,"bottom-right":xj+Aj},gGt={naive:aGt,"reduced-search":uGt,floodfill:fGt};function yGt(e,t,n,r,i,s,o,a,u,l,c){if(!e.length)return e;const f=Math.max(r.length,i.length),d=vGt(r,f),h=_Gt(i,f),p=bGt(e[0].datum),m=p==="group"&&e[0].datum.items[u].marktype,g=m==="area",y=wGt(p,m,a,u),v=l===null||l===1/0,_=g&&c==="naive";let b=-1,E=-1;const w=e.map(C=>{const O=v?el.width(C,C.text):void 0;return b=Math.max(b,O),E=Math.max(E,C.fontSize),{datum:C,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:y(C),textWidth:O}});l=l===null||l===1/0?Math.max(b,E)+Math.max(...r):l;const x=oGt(t[0],t[1],l);let S;if(!_){n&&w.sort((z,N)=>n(z.datum,N.datum));let C=!1;for(let z=0;z<h.length&&!C;++z)C=h[z]===5||d[z]<0;const O=(p&&o||g)&&e.map(z=>z.datum);S=s.length||O?rGt(x,O||[],s,C,g):nGt(x,o&&w)}const I=g?gGt[c](x,S,o,u):pGt(x,S,h,d);return w.forEach(C=>C.opacity=+I(C)),w}function vGt(e,t){const n=new Float64Array(t),r=e.length;for(let i=0;i<r;++i)n[i]=e[i]||0;for(let i=r;i<t;++i)n[i]=n[r-1];return n}function _Gt(e,t){const n=new Int8Array(t),r=e.length;for(let i=0;i<r;++i)n[i]|=mGt[e[i]];for(let i=r;i<t;++i)n[i]=n[r-1];return n}function bGt(e){return e&&e.mark&&e.mark.marktype}function wGt(e,t,n,r){const i=s=>[s.x,s.x,s.x,s.y,s.y,s.y];return e?e==="line"||e==="area"?s=>i(s.datum):t==="line"?s=>{const o=s.datum.items[r].items;return i(o.length?o[n==="start"?0:o.length-1]:{x:NaN,y:NaN})}:s=>{const o=s.datum.bounds;return[o.x1,(o.x1+o.x2)/2,o.x2,o.y1,(o.y1+o.y2)/2,o.y2]}:i}const GH=["x","y","opacity","align","baseline"],x5e=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function mee(e){Ee.call(this,null,e)}mee.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:x5e},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:GH.length,default:GH}]};We(mee,Ee,{transform(e,t){function n(s){const o=e[s];return pn(o)&&t.modified(o.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&Te("Size parameter should be specified as a [width, height] array.");const i=e.as||GH;return yGt(t.materialize(t.SOURCE).source||[],e.size,e.sort,nt(e.offset==null?1:e.offset),nt(e.anchor||x5e),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(s=>{const o=s.datum;o[i[0]]=s.x,o[i[1]]=s.y,o[i[2]]=s.opacity,o[i[3]]=s.align,o[i[4]]=s.baseline}),t.reflow(r).modifies(i)}});const EGt=Object.freeze(Object.defineProperty({__proto__:null,label:mee},Symbol.toStringTag,{value:"Module"}));function S5e(e,t){var n=[],r=function(c){return c(a)},i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function gee(e){Ee.call(this,null,e)}gee.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};We(gee,Ee,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=S5e(r,e.groupby),s=(e.groupby||[]).map(Ni),o=s.length,a=e.as||[Ni(e.x),Ni(e.y)],u=[];i.forEach(l=>{JMe(l,e.x,e.y,e.bandwidth||.3).forEach(c=>{const f={};for(let d=0;d<o;++d)f[s[d]]=l.dims[d];f[a[0]]=c[0],f[a[1]]=c[1],u.push(dr(f))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});const YH={constant:vJ,linear:_J,log:YMe,exp:KMe,pow:XMe,quad:bJ,poly:QMe},xGt=(e,t)=>e==="poly"?t:e==="quad"?2:1;function yee(e){Ee.call(this,null,e)}yee.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(YH)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};We(yee,Ee,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=S5e(r,e.groupby),s=(e.groupby||[]).map(Ni),o=e.method||"linear",a=e.order==null?3:e.order,u=xGt(o,a),l=e.as||[Ni(e.x),Ni(e.y)],c=YH[o],f=[];let d=e.extent;Nt(YH,o)||Te("Invalid regression method: "+o),d!=null&&o==="log"&&d[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),d=null),i.forEach(h=>{if(h.length<=u){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const m=c(h,e.x,e.y,a);if(e.params){f.push(dr({keys:h.dims,coef:m.coef,rSquared:m.rSquared}));return}const g=d||Wd(h,e.x),y=v=>{const _={};for(let b=0;b<s.length;++b)_[s[b]]=h.dims[b];_[l[0]]=v[0],_[l[1]]=v[1],f.push(dr(_))};o==="linear"||o==="constant"?g.forEach(v=>y([v,m.predict(v)])):nF(m.predict,g,25,200).forEach(y)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});const SGt=Object.freeze(Object.defineProperty({__proto__:null,loess:gee,regression:yee},Symbol.toStringTag,{value:"Module"})),w0e=1e-6;class Zy{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;const i=t+r,s=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${s}`:(Math.abs(this._x1-i)>w0e||Math.abs(this._y1-s)>w0e)&&(this._+="L"+i+","+s),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=s}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class KH{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let TGt=class{constructor(t,[n,r,i,s]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((s=+s)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=s,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this;let s,o;const a=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let m=0,g=0,y=r.length,v,_;m<y;m+=3,g+=2){const b=r[m]*2,E=r[m+1]*2,w=r[m+2]*2,x=t[b],S=t[b+1],I=t[E],C=t[E+1],O=t[w],z=t[w+1],N=I-x,$=C-S,D=O-x,B=z-S,V=(N*B-$*D)*2;if(Math.abs(V)<1e-9){if(s===void 0){s=o=0;for(const G of n)s+=t[G*2],o+=t[G*2+1];s/=n.length,o/=n.length}const j=1e9*Math.sign((s-x)*B-(o-S)*D);v=(x+O)/2-j*B,_=(S+z)/2+j*D}else{const j=1/V,G=N*N+$*$,U=D*D+B*B;v=x+(B*G-$*U)*j,_=S+(N*U-D*G)*j}a[g]=v,a[g+1]=_}let u=n[n.length-1],l,c=u*4,f,d=t[2*u],h,p=t[2*u+1];i.fill(0);for(let m=0;m<n.length;++m)u=n[m],l=c,f=d,h=p,c=u*4,d=t[2*u],p=t[2*u+1],i[l+2]=i[c]=h-p,i[l+3]=i[c+1]=d-f}render(t){const n=t==null?t=new Zy:void 0,{delaunay:{halfedges:r,inedges:i,hull:s},circumcenters:o,vectors:a}=this;if(s.length<=1)return null;for(let c=0,f=r.length;c<f;++c){const d=r[c];if(d<c)continue;const h=Math.floor(c/3)*2,p=Math.floor(d/3)*2,m=o[h],g=o[h+1],y=o[p],v=o[p+1];this._renderSegment(m,g,y,v,t)}let u,l=s[s.length-1];for(let c=0;c<s.length;++c){u=l,l=s[c];const f=Math.floor(i[l]/3)*2,d=o[f],h=o[f+1],p=u*4,m=this._project(d,h,a[p+2],a[p+3]);m&&this._renderSegment(d,h,m[0],m[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new Zy:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const r=n==null?n=new Zy:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let s=i.length;for(;i[0]===i[s-2]&&i[1]===i[s-1]&&s>1;)s-=2;for(let o=2;o<s;o+=2)(i[o]!==i[o-2]||i[o+1]!==i[o-1])&&n.lineTo(i[o],i[o+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){const n=new KH;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,s){let o;const a=this._regioncode(t,n),u=this._regioncode(r,i);a===0&&u===0?(s.moveTo(t,n),s.lineTo(r,i)):(o=this._clipSegment(t,n,r,i,a,u))&&(s.moveTo(o[0],o[1]),s.lineTo(o[2],o[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){const n=this._clip(t);if(n)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i){e:for(let s=0,o=n.length;s<o;s+=2)for(let a=0,u=i.length;a<u;a+=2)if(n[s]===i[a]&&n[s+1]===i[a+1]&&n[(s+2)%o]===i[(a+u-2)%u]&&n[(s+3)%o]===i[(a+u-1)%u]){yield r;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:s}}=this,o=r[t];if(o===-1)return null;const a=[];let u=o;do{const l=Math.floor(u/3);if(a.push(n[l*2],n[l*2+1]),u=u%3===2?u-2:u+1,s[u]!==t)break;u=i[u]}while(u!==o&&u!==-1);return a}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:r}=this,i=t*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n))}_clipFinite(t,n){const r=n.length;let i=null,s,o,a=n[r-2],u=n[r-1],l,c=this._regioncode(a,u),f,d=0;for(let h=0;h<r;h+=2)if(s=a,o=u,a=n[h],u=n[h+1],l=c,c=this._regioncode(a,u),l===0&&c===0)f=d,d=0,i?i.push(a,u):i=[a,u];else{let p,m,g,y,v;if(l===0){if((p=this._clipSegment(s,o,a,u,l,c))===null)continue;[m,g,y,v]=p}else{if((p=this._clipSegment(a,u,s,o,c,l))===null)continue;[y,v,m,g]=p,f=d,d=this._edgecode(m,g),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(m,g):i=[m,g]}f=d,d=this._edgecode(y,v),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(y,v):i=[y,v]}if(i)f=d,d=this._edgecode(i[0],i[1]),f&&d&&this._edge(t,f,d,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,s,o){const a=s<o;for(a&&([t,n,r,i,s,o]=[r,i,t,n,o,s]);;){if(s===0&&o===0)return a?[r,i,t,n]:[t,n,r,i];if(s&o)return null;let u,l,c=s||o;c&8?(u=t+(r-t)*(this.ymax-n)/(i-n),l=this.ymax):c&4?(u=t+(r-t)*(this.ymin-n)/(i-n),l=this.ymin):c&2?(l=n+(i-n)*(this.xmax-t)/(r-t),u=this.xmax):(l=n+(i-n)*(this.xmin-t)/(r-t),u=this.xmin),s?(t=u,n=l,s=this._regioncode(t,n)):(r=u,i=l,o=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,s,o){let a=Array.from(n),u;if((u=this._project(a[0],a[1],r,i))&&a.unshift(u[0],u[1]),(u=this._project(a[a.length-2],a[a.length-1],s,o))&&a.push(u[0],u[1]),a=this._clipFinite(t,a))for(let l=0,c=a.length,f,d=this._edgecode(a[c-2],a[c-1]);l<c;l+=2)f=d,d=this._edgecode(a[l],a[l+1]),f&&d&&(l=this._edge(t,f,d,a,l),c=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,n,r,i,s){for(;n!==r;){let o,a;switch(n){case 5:n=4;continue;case 4:n=6,o=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,o=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,o=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,o=this.xmin,a=this.ymin;break}(i[s]!==o||i[s+1]!==a)&&this.contains(t,o,a)&&(i.splice(s,0,o,a),s+=2)}return s}_project(t,n,r,i){let s=1/0,o,a,u;if(i<0){if(n<=this.ymin)return null;(o=(this.ymin-n)/i)<s&&(u=this.ymin,a=t+(s=o)*r)}else if(i>0){if(n>=this.ymax)return null;(o=(this.ymax-n)/i)<s&&(u=this.ymax,a=t+(s=o)*r)}if(r>0){if(t>=this.xmax)return null;(o=(this.xmax-t)/r)<s&&(a=this.xmax,u=n+(s=o)*i)}else if(r<0){if(t<=this.xmin)return null;(o=(this.xmin-t)/r)<s&&(a=this.xmin,u=n+(s=o)*i)}return[a,u]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const r=(n+2)%t.length,i=(n+4)%t.length;(t[n]===t[r]&&t[r]===t[i]||t[n+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),n-=2)}t.length||(t=null)}return t}};const AGt=2*Math.PI,__=Math.pow;function CGt(e){return e[0]}function IGt(e){return e[1]}function OGt(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const i=2*t[r],s=2*t[r+1],o=2*t[r+2];if((n[o]-n[i])*(n[s+1]-n[i+1])-(n[s]-n[i])*(n[o+1]-n[i+1])>1e-10)return!1}return!0}function PGt(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class vee{static from(t,n=CGt,r=IGt,i){return new vee("length"in t?kGt(t,n,r,i):Float64Array.from($Gt(t,n,r,i)))}constructor(t){this._delaunator=new TD(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&OGt(t)){this.collinear=Int32Array.from({length:n.length/2},(d,h)=>h).sort((d,h)=>n[2*d]-n[2*h]||n[2*d+1]-n[2*h+1]);const u=this.collinear[0],l=this.collinear[this.collinear.length-1],c=[n[2*u],n[2*u+1],n[2*l],n[2*l+1]],f=1e-8*Math.hypot(c[3]-c[1],c[2]-c[0]);for(let d=0,h=n.length/2;d<h;++d){const p=PGt(n[2*d],n[2*d+1],f);n[2*d]=p[0],n[2*d+1]=p[1]}this._delaunator=new TD(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let u=0,l=r.length;u<l;++u){const c=s[u%3===2?u-2:u+1];(r[u]===-1||o[c]===-1)&&(o[c]=u)}for(let u=0,l=i.length;u<l;++u)a[i[u]]=u;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],o[i[0]]=1,i.length===2&&(o[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new TGt(this,t)}*neighbors(t){const{inedges:n,hull:r,_hullIndex:i,halfedges:s,triangles:o,collinear:a}=this;if(a){const f=a.indexOf(t);f>0&&(yield a[f-1]),f<a.length-1&&(yield a[f+1]);return}const u=n[t];if(u===-1)return;let l=u,c=-1;do{if(yield c=o[l],l=l%3===2?l-2:l+1,o[l]!==t)return;if(l=s[l],l===-1){const f=r[(i[t]+1)%r.length];f!==c&&(yield f);return}}while(l!==u)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const i=r;let s;for(;(s=this._step(r,t,n))>=0&&s!==r&&s!==i;)r=s;return s}_step(t,n,r){const{inedges:i,hull:s,_hullIndex:o,halfedges:a,triangles:u,points:l}=this;if(i[t]===-1||!l.length)return(t+1)%(l.length>>1);let c=t,f=__(n-l[t*2],2)+__(r-l[t*2+1],2);const d=i[t];let h=d;do{let p=u[h];const m=__(n-l[p*2],2)+__(r-l[p*2+1],2);if(m<f&&(f=m,c=p),h=h%3===2?h-2:h+1,u[h]!==t)break;if(h=a[h],h===-1){if(h=s[(o[t]+1)%s.length],h!==p&&__(n-l[h*2],2)+__(r-l[h*2+1],2)<f)return h;break}}while(h!==d);return c}render(t){const n=t==null?t=new Zy:void 0,{points:r,halfedges:i,triangles:s}=this;for(let o=0,a=i.length;o<a;++o){const u=i[o];if(u<o)continue;const l=s[o]*2,c=s[u]*2;t.moveTo(r[l],r[l+1]),t.lineTo(r[c],r[c+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const r=t==null?t=new Zy:void 0,{points:i}=this;for(let s=0,o=i.length;s<o;s+=2){const a=i[s],u=i[s+1];t.moveTo(a+n,u),t.arc(a,u,n,0,AGt)}return r&&r.value()}renderHull(t){const n=t==null?t=new Zy:void 0,{hull:r,points:i}=this,s=r[0]*2,o=r.length;t.moveTo(i[s],i[s+1]);for(let a=1;a<o;++a){const u=2*r[a];t.lineTo(i[u],i[u+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new KH;return this.renderHull(t),t.value()}renderTriangle(t,n){const r=n==null?n=new Zy:void 0,{points:i,triangles:s}=this,o=s[t*=3]*2,a=s[t+1]*2,u=s[t+2]*2;return n.moveTo(i[o],i[o+1]),n.lineTo(i[a],i[a+1]),n.lineTo(i[u],i[u+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new KH;return this.renderTriangle(t,n),n.value()}}function kGt(e,t,n,r){const i=e.length,s=new Float64Array(i*2);for(let o=0;o<i;++o){const a=e[o];s[o*2]=t.call(r,a,o,e),s[o*2+1]=n.call(r,a,o,e)}return s}function*$Gt(e,t,n,r){let i=0;for(const s of e)yield t.call(r,s,i,e),yield n.call(r,s,i,e),++i}function _ee(e){Ee.call(this,null,e)}_ee.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const RGt=[-1e5,-1e5,1e5,1e5];We(_ee,Ee,{transform(e,t){const n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:RGt;const s=this.value=vee.from(r,e.x,e.y).voronoi(i);for(let o=0,a=r.length;o<a;++o){const u=s.cellPolygon(o);r[o][n]=u&&!DGt(u)?NGt(u):null}return t.reflow(e.modified()).modifies(n)}});function NGt(e){const t=e[0][0],n=e[0][1];let r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}function DGt(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const LGt=Object.freeze(Object.defineProperty({__proto__:null,voronoi:_ee},Symbol.toStringTag,{value:"Module"}));var Cj=Math.PI/180,gT=64,k$=2048;function MGt(){var e=[256,256],t,n,r,i,s,o,a,u=T5e,l=[],c=Math.random,f={};f.layout=function(){for(var p=d(Og()),m=VGt((e[0]>>5)*e[1]),g=null,y=l.length,v=-1,_=[],b=l.map(w=>({text:t(w),font:n(w),style:i(w),weight:s(w),rotate:o(w),size:~~(r(w)+1e-14),padding:a(w),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:w})).sort((w,x)=>x.size-w.size);++v<y;){var E=b[v];E.x=e[0]*(c()+.5)>>1,E.y=e[1]*(c()+.5)>>1,FGt(p,E,b,v),E.hasText&&h(m,E,g)&&(_.push(E),g?jGt(g,E):g=[{x:E.x+E.x0,y:E.y+E.y0},{x:E.x+E.x1,y:E.y+E.y1}],E.x-=e[0]>>1,E.y-=e[1]>>1)}return _};function d(p){p.width=p.height=1;var m=Math.sqrt(p.getContext("2d").getImageData(0,0,1,1).data.length>>2);p.width=(gT<<5)/m,p.height=k$/m;var g=p.getContext("2d");return g.fillStyle=g.strokeStyle="red",g.textAlign="center",{context:g,ratio:m}}function h(p,m,g){for(var y=m.x,v=m.y,_=Math.sqrt(e[0]*e[0]+e[1]*e[1]),b=u(e),E=c()<.5?1:-1,w=-E,x,S,I;(x=b(w+=E))&&(S=~~x[0],I=~~x[1],!(Math.min(Math.abs(S),Math.abs(I))>=_));)if(m.x=y+S,m.y=v+I,!(m.x+m.x0<0||m.y+m.y0<0||m.x+m.x1>e[0]||m.y+m.y1>e[1])&&(!g||!BGt(m,p,e[0]))&&(!g||zGt(m,g))){for(var C=m.sprite,O=m.width>>5,z=e[0]>>5,N=m.x-(O<<4),$=N&127,D=32-$,B=m.y1-m.y0,V=(m.y+m.y0)*z+(N>>5),j,G=0;G<B;G++){j=0;for(var U=0;U<=O;U++)p[V+U]|=j<<D|(U<O?(j=C[G*O+U])>>>$:0);V+=z}return m.sprite=null,!0}return!1}return f.words=function(p){return arguments.length?(l=p,f):l},f.size=function(p){return arguments.length?(e=[+p[0],+p[1]],f):e},f.font=function(p){return arguments.length?(n=ey(p),f):n},f.fontStyle=function(p){return arguments.length?(i=ey(p),f):i},f.fontWeight=function(p){return arguments.length?(s=ey(p),f):s},f.rotate=function(p){return arguments.length?(o=ey(p),f):o},f.text=function(p){return arguments.length?(t=ey(p),f):t},f.spiral=function(p){return arguments.length?(u=HGt[p]||p,f):u},f.fontSize=function(p){return arguments.length?(r=ey(p),f):r},f.padding=function(p){return arguments.length?(a=ey(p),f):a},f.random=function(p){return arguments.length?(c=p,f):c},f}function FGt(e,t,n,r){if(!t.sprite){var i=e.context,s=e.ratio;i.clearRect(0,0,(gT<<5)/s,k$/s);var o=0,a=0,u=0,l=n.length,c,f,d,h,p;for(--r;++r<l;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/s)+"px "+t.font,c=i.measureText(t.text+"m").width*s,d=t.size<<1,t.rotate){var m=Math.sin(t.rotate*Cj),g=Math.cos(t.rotate*Cj),y=c*g,v=c*m,_=d*g,b=d*m;c=Math.max(Math.abs(y+b),Math.abs(y-b))+31>>5<<5,d=~~Math.max(Math.abs(v+_),Math.abs(v-_))}else c=c+31>>5<<5;if(d>u&&(u=d),o+c>=gT<<5&&(o=0,a+=u,u=0),a+d>=k$)break;i.translate((o+(c>>1))/s,(a+(d>>1))/s),t.rotate&&i.rotate(t.rotate*Cj),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=c,t.height=d,t.xoff=o,t.yoff=a,t.x1=c>>1,t.y1=d>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,o+=c}for(var E=i.getImageData(0,0,(gT<<5)/s,k$/s).data,w=[];--r>=0;)if(t=n[r],!!t.hasText){for(c=t.width,f=c>>5,d=t.y1-t.y0,h=0;h<d*f;h++)w[h]=0;if(o=t.xoff,o==null)return;a=t.yoff;var x=0,S=-1;for(p=0;p<d;p++){for(h=0;h<c;h++){var I=f*p+(h>>5),C=E[(a+p)*(gT<<5)+(o+h)<<2]?1<<31-h%32:0;w[I]|=C,x|=C}x?S=p:(t.y0++,d--,p--,a++)}t.y1=t.y0+S,t.sprite=w.slice(0,(t.y1-t.y0)*f)}}}function BGt(e,t,n){n>>=5;for(var r=e.sprite,i=e.width>>5,s=e.x-(i<<4),o=s&127,a=32-o,u=e.y1-e.y0,l=(e.y+e.y0)*n+(s>>5),c,f=0;f<u;f++){c=0;for(var d=0;d<=i;d++)if((c<<a|(d<i?(c=r[f*i+d])>>>o:0))&t[l+d])return!0;l+=n}return!1}function jGt(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function zGt(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function T5e(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function UGt(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(s){var o=s<0?-1:1;switch(Math.sqrt(1+4*o*s)-o&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t;break}return[r,i]}}function VGt(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function ey(e){return typeof e=="function"?e:function(){return e}}var HGt={archimedean:T5e,rectangular:UGt};const A5e=["x","y","font","fontSize","fontStyle","fontWeight","angle"],qGt=["text","font","rotate","fontSize","fontStyle","fontWeight"];function bee(e){Ee.call(this,MGt(),e)}bee.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:A5e}]};We(bee,Ee,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&Te("Wordcloud size dimensions must be non-zero.");function n(p){const m=e[p];return pn(m)&&t.modified(m.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||qGt.some(n)))return;const i=t.materialize(t.SOURCE).source,s=this.value,o=e.as||A5e;let a=e.fontSize||14,u;if(pn(a)?u=e.fontSizeRange:a=na(a),u){const p=a,m=or("sqrt")().domain(Wd(i,p)).range(u);a=g=>m(p(g))}i.forEach(p=>{p[o[0]]=NaN,p[o[1]]=NaN,p[o[3]]=0});const l=s.words(i).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(a).random(ic).layout(),c=s.size(),f=c[0]>>1,d=c[1]>>1,h=l.length;for(let p=0,m,g;p<h;++p)m=l[p],g=m.datum,g[o[0]]=m.x+f,g[o[1]]=m.y+d,g[o[2]]=m.font,g[o[3]]=m.size,g[o[4]]=m.style,g[o[5]]=m.weight,g[o[6]]=m.rotate;return t.reflow(r).modifies(o)}});const WGt=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:bee},Symbol.toStringTag,{value:"Module"})),GGt=e=>new Uint8Array(e),YGt=e=>new Uint16Array(e),g2=e=>new Uint32Array(e);function KGt(){let e=8,t=[],n=g2(0),r=GP(0,e),i=GP(0,e);return{data:()=>t,seen:()=>n=XGt(n,t.length),add(s){for(let o=0,a=t.length,u=s.length,l;o<u;++o)l=s[o],l._index=a++,t.push(l)},remove(s,o){const a=t.length,u=Array(a-s),l=t;let c,f,d;for(f=0;!o[f]&&f<a;++f)u[f]=t[f],l[f]=f;for(d=f;f<a;++f)c=t[f],o[f]?l[f]=-1:(l[f]=d,r[d]=r[f],i[d]=i[f],u[d]=c,c._index=d++),r[f]=0;return t=u,l},size:()=>t.length,curr:()=>r,prev:()=>i,reset:s=>i[s]=r[s],all:()=>e<257?255:e<65537?65535:4294967295,set(s,o){r[s]|=o},clear(s,o){r[s]&=~o},resize(s,o){const a=r.length;(s>a||o>e)&&(e=Math.max(o,e),r=GP(s,e,r),i=GP(s,e))}}}function XGt(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function GP(e,t,n){const r=(t<257?GGt:t<65537?YGt:g2)(e);return n&&r.set(n),r}function E0e(e,t,n){const r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(i,s){const o=this,a=o.bisect(o.range,i.value),u=i.index,l=a[0],c=a[1],f=u.length;let d;for(d=0;d<l;++d)s[u[d]]|=r;for(d=c;d<f;++d)s[u[d]]|=r;return o}}}function x0e(){let e=g2(0),t=[],n=0;function r(a,u,l){if(!u.length)return[];const c=n,f=u.length,d=g2(f);let h=Array(f),p,m,g;for(g=0;g<f;++g)h[g]=a(u[g]),d[g]=g;if(h=QGt(h,d),c)p=t,m=e,t=Array(c+f),e=g2(c+f),JGt(l,p,m,c,h,d,f,t,e);else{if(l>0)for(g=0;g<f;++g)d[g]+=l;t=h,e=d}return n=c+f,{index:d,value:h}}function i(a,u){const l=n;let c,f,d;for(f=0;!u[e[f]]&&f<l;++f);for(d=f;f<l;++f)u[c=e[f]]||(e[d]=c,t[d]=t[f],++d);n=l-a}function s(a){for(let u=0,l=n;u<l;++u)e[u]=a[e[u]]}function o(a,u){let l;return u?l=u.length:(u=t,l=n),[uBt(u,a[0],0,l),F3(u,a[1],0,l)]}return{insert:r,remove:i,bisect:o,reindex:s,index:()=>e,size:()=>n}}function QGt(e,t){return e.sort.call(t,(n,r)=>{const i=e[n],s=e[r];return i<s?-1:i>s?1:0}),fBt(e,t)}function JGt(e,t,n,r,i,s,o,a,u){let l=0,c=0,f;for(f=0;l<r&&c<o;++f)t[l]<i[c]?(a[f]=t[l],u[f]=n[l++]):(a[f]=i[c],u[f]=s[c++]+e);for(;l<r;++l,++f)a[f]=t[l],u[f]=n[l];for(;c<o;++c,++f)a[f]=i[c],u[f]=s[c]+e}function wee(e){Ee.call(this,KGt(),e),this._indices=null,this._dims=null}wee.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};We(wee,Ee,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(r=>t.modified(r.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,r=e.query,i=this._indices={},s=this._dims=[],o=r.length;let a=0,u,l;for(;a<o;++a)u=n[a].fname,l=i[u]||(i[u]=x0e()),s.push(E0e(l,a,r[a]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),r=e.fields,i=e.query,s=this._indices,o=this._dims,a=this.value,u=a.curr(),l=a.prev(),c=a.all(),f=n.rem=n.add,d=n.mod,h=i.length,p={};let m,g,y,v,_,b,E,w,x;if(l.set(u),t.rem.length&&(_=this.remove(e,t,n)),t.add.length&&a.add(t.add),t.mod.length)for(b={},v=t.mod,E=0,w=v.length;E<w;++E)b[v[E]._index]=1;for(E=0;E<h;++E)x=r[E],(!o[E]||e.modified("fields",E)||t.modified(x.fields))&&(y=x.fname,(m=p[y])||(s[y]=g=x0e(),p[y]=m=g.insert(x,t.source,0)),o[E]=E0e(g,E,i[E]).onAdd(m,u));for(E=0,w=a.data().length;E<w;++E)_[E]||(l[E]!==u[E]?f.push(E):b[E]&&u[E]!==c&&d.push(E));return a.mask=(1<<h)-1,n},eval(e,t){const n=t.materialize().fork(),r=this._dims.length;let i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert(e,t,n){const r=t.add,i=this.value,s=this._dims,o=this._indices,a=e.fields,u={},l=n.add,c=i.size()+r.length,f=s.length;let d=i.size(),h,p,m;i.resize(c,f),i.add(r);const g=i.curr(),y=i.prev(),v=i.all();for(h=0;h<f;++h)p=a[h].fname,m=u[p]||(u[p]=o[p].insert(a[h],r,d)),s[h].onAdd(m,g);for(;d<c;++d)y[d]=v,g[d]!==v&&l.push(d)},modify(e,t){const n=t.mod,r=this.value,i=r.curr(),s=r.all(),o=e.mod;let a,u,l;for(a=0,u=o.length;a<u;++a)l=o[a]._index,i[l]!==s&&n.push(l)},remove(e,t,n){const r=this._indices,i=this.value,s=i.curr(),o=i.prev(),a=i.all(),u={},l=n.rem,c=t.rem;let f,d,h,p;for(f=0,d=c.length;f<d;++f)h=c[f]._index,u[h]=1,o[h]=p=s[h],s[h]=a,p!==a&&l.push(h);for(h in r)r[h].remove(d,u);return this.reindex(t,d,u),u},reindex(e,t,n){const r=this._indices,i=this.value;e.runAfter(()=>{const s=i.remove(t,n);for(const o in r)r[o].reindex(s)})},update(e,t,n){const r=this._dims,i=e.query,s=t.stamp,o=r.length;let a=0,u,l;for(n.filters=0,l=0;l<o;++l)e.modified("query",l)&&(u=l,++a);if(a===1)a=r[u].one,this.incrementOne(r[u],i[u],n.add,n.rem);else for(l=0,a=0;l<o;++l)e.modified("query",l)&&(a|=r[l].one,this.incrementAll(r[l],i[l],s,n.add),n.rem=n.add);return a},incrementAll(e,t,n,r){const i=this.value,s=i.seen(),o=i.curr(),a=i.prev(),u=e.index(),l=e.bisect(e.range),c=e.bisect(t),f=c[0],d=c[1],h=l[0],p=l[1],m=e.one;let g,y,v;if(f<h)for(g=f,y=Math.min(h,d);g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;else if(f>h)for(g=h,y=Math.min(f,p);g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;if(d>p)for(g=Math.max(f,p),y=d;g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;else if(d<p)for(g=Math.max(h,d),y=p;g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;e.range=t.slice()},incrementOne(e,t,n,r){const i=this.value,s=i.curr(),o=e.index(),a=e.bisect(e.range),u=e.bisect(t),l=u[0],c=u[1],f=a[0],d=a[1],h=e.one;let p,m,g;if(l<f)for(p=l,m=Math.min(f,c);p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(l>f)for(p=f,m=Math.min(l,d);p<m;++p)g=o[p],s[g]^=h,r.push(g);if(c>d)for(p=Math.max(l,d),m=c;p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(c<d)for(p=Math.max(f,c),m=d;p<m;++p)g=o[p],s[g]^=h,r.push(g);e.range=t.slice()}});function Eee(e){Ee.call(this,null,e)}Eee.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};We(Eee,Ee,{transform(e,t){const n=~(e.ignore||0),r=e.filter,i=r.mask;if(!(i&n))return t.StopPropagation;const s=t.fork(t.ALL),o=r.data(),a=r.curr(),u=r.prev(),l=c=>a[c]&n?null:o[c];return s.filter(s.MOD,l),i&i-1?(s.filter(s.ADD,c=>{const f=a[c]&n;return!f&&f^u[c]&n?o[c]:null}),s.filter(s.REM,c=>{const f=a[c]&n;return f&&!(f^(f^u[c]&n))?o[c]:null})):(s.filter(s.ADD,l),s.filter(s.REM,c=>(a[c]&n)===i?o[c]:null)),s.filter(s.SOURCE,c=>l(c._index))}});const ZGt=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:wee,resolvefilter:Eee},Symbol.toStringTag,{value:"Module"})),eYt="RawCode",G1="Literal",tYt="Property",nYt="Identifier",rYt="ArrayExpression",iYt="BinaryExpression",C5e="CallExpression",sYt="ConditionalExpression",oYt="LogicalExpression",aYt="MemberExpression",uYt="ObjectExpression",lYt="UnaryExpression";function Sf(e){this.type=e}Sf.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=cYt(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function cYt(e){switch(e.type){case rYt:return e.elements;case iYt:case oYt:return[e.left,e.right];case C5e:return[e.callee].concat(e.arguments);case sYt:return[e.test,e.consequent,e.alternate];case aYt:return[e.object,e.property];case uYt:return e.properties;case tYt:return[e.key,e.value];case lYt:return[e.argument];case nYt:case G1:case eYt:default:return[]}}var lh,Et,xe,Ko,_r,SF=1,LI=2,Y1=3,M0=4,TF=5,Fv=6,Ya=7,MI=8,fYt=9;lh={};lh[SF]="Boolean";lh[LI]="<end>";lh[Y1]="Identifier";lh[M0]="Keyword";lh[TF]="Null";lh[Fv]="Numeric";lh[Ya]="Punctuator";lh[MI]="String";lh[fYt]="RegularExpression";var dYt="ArrayExpression",hYt="BinaryExpression",pYt="CallExpression",mYt="ConditionalExpression",I5e="Identifier",gYt="Literal",yYt="LogicalExpression",vYt="MemberExpression",_Yt="ObjectExpression",bYt="Property",wYt="UnaryExpression",js="Unexpected token %0",EYt="Unexpected number",xYt="Unexpected string",SYt="Unexpected identifier",TYt="Unexpected reserved word",AYt="Unexpected end of input",XH="Invalid regular expression",Ij="Invalid regular expression: missing /",O5e="Octal literals are not allowed in strict mode.",CYt="Duplicate data property in object literal not allowed in strict mode",ho="ILLEGAL",jA="Disabled.",IYt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),OYt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function AF(e,t){if(!e)throw new Error("ASSERT: "+t)}function Nh(e){return e>=48&&e<=57}function xee(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function y2(e){return"01234567".indexOf(e)>=0}function PYt(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function zA(e){return e===10||e===13||e===8232||e===8233}function FI(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&IYt.test(String.fromCharCode(e))}function CL(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&OYt.test(String.fromCharCode(e))}const kYt={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function P5e(){for(;xe<Ko;){const e=Et.charCodeAt(xe);if(PYt(e)||zA(e))++xe;else break}}function QH(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)xe<Ko&&xee(Et[xe])?(r=Et[xe++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):ir({},js,ho);return String.fromCharCode(i)}function $Yt(){var e,t,n,r;for(e=Et[xe],t=0,e==="}"&&ir({},js,ho);xe<Ko&&(e=Et[xe++],!!xee(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&ir({},js,ho),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function k5e(){var e,t;for(e=Et.charCodeAt(xe++),t=String.fromCharCode(e),e===92&&(Et.charCodeAt(xe)!==117&&ir({},js,ho),++xe,e=QH("u"),(!e||e==="\\"||!FI(e.charCodeAt(0)))&&ir({},js,ho),t=e);xe<Ko&&(e=Et.charCodeAt(xe),!!CL(e));)++xe,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),Et.charCodeAt(xe)!==117&&ir({},js,ho),++xe,e=QH("u"),(!e||e==="\\"||!CL(e.charCodeAt(0)))&&ir({},js,ho),t+=e);return t}function RYt(){var e,t;for(e=xe++;xe<Ko;){if(t=Et.charCodeAt(xe),t===92)return xe=e,k5e();if(CL(t))++xe;else break}return Et.slice(e,xe)}function NYt(){var e,t,n;return e=xe,t=Et.charCodeAt(xe)===92?k5e():RYt(),t.length===1?n=Y1:kYt.hasOwnProperty(t)?n=M0:t==="null"?n=TF:t==="true"||t==="false"?n=SF:n=Y1,{type:n,value:t,start:e,end:xe}}function Oj(){var e=xe,t=Et.charCodeAt(xe),n,r=Et[xe],i,s,o;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++xe,{type:Ya,value:String.fromCharCode(t),start:e,end:xe};default:if(n=Et.charCodeAt(xe+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return xe+=2,{type:Ya,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:xe};case 33:case 61:return xe+=2,Et.charCodeAt(xe)===61&&++xe,{type:Ya,value:Et.slice(e,xe),start:e,end:xe}}}if(o=Et.substr(xe,4),o===">>>=")return xe+=4,{type:Ya,value:o,start:e,end:xe};if(s=o.substr(0,3),s===">>>"||s==="<<="||s===">>=")return xe+=3,{type:Ya,value:s,start:e,end:xe};if(i=s.substr(0,2),r===i[1]&&"+-<>&|".indexOf(r)>=0||i==="=>")return xe+=2,{type:Ya,value:i,start:e,end:xe};if(i==="//"&&ir({},js,ho),"<>=!+-*%&|^/".indexOf(r)>=0)return++xe,{type:Ya,value:r,start:e,end:xe};ir({},js,ho)}function DYt(e){let t="";for(;xe<Ko&&xee(Et[xe]);)t+=Et[xe++];return t.length===0&&ir({},js,ho),FI(Et.charCodeAt(xe))&&ir({},js,ho),{type:Fv,value:parseInt("0x"+t,16),start:e,end:xe}}function LYt(e){let t="0"+Et[xe++];for(;xe<Ko&&y2(Et[xe]);)t+=Et[xe++];return(FI(Et.charCodeAt(xe))||Nh(Et.charCodeAt(xe)))&&ir({},js,ho),{type:Fv,value:parseInt(t,8),octal:!0,start:e,end:xe}}function S0e(){var e,t,n;if(n=Et[xe],AF(Nh(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=xe,e="",n!=="."){if(e=Et[xe++],n=Et[xe],e==="0"){if(n==="x"||n==="X")return++xe,DYt(t);if(y2(n))return LYt(t);n&&Nh(n.charCodeAt(0))&&ir({},js,ho)}for(;Nh(Et.charCodeAt(xe));)e+=Et[xe++];n=Et[xe]}if(n==="."){for(e+=Et[xe++];Nh(Et.charCodeAt(xe));)e+=Et[xe++];n=Et[xe]}if(n==="e"||n==="E")if(e+=Et[xe++],n=Et[xe],(n==="+"||n==="-")&&(e+=Et[xe++]),Nh(Et.charCodeAt(xe)))for(;Nh(Et.charCodeAt(xe));)e+=Et[xe++];else ir({},js,ho);return FI(Et.charCodeAt(xe))&&ir({},js,ho),{type:Fv,value:parseFloat(e),start:t,end:xe}}function MYt(){var e="",t,n,r,i,s=!1;for(t=Et[xe],AF(t==="'"||t==='"',"String literal must starts with a quote"),n=xe,++xe;xe<Ko;)if(r=Et[xe++],r===t){t="";break}else if(r==="\\")if(r=Et[xe++],!r||!zA(r.charCodeAt(0)))switch(r){case"u":case"x":Et[xe]==="{"?(++xe,e+=$Yt()):e+=QH(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:y2(r)?(i="01234567".indexOf(r),i!==0&&(s=!0),xe<Ko&&y2(Et[xe])&&(s=!0,i=i*8+"01234567".indexOf(Et[xe++]),"0123".indexOf(r)>=0&&xe<Ko&&y2(Et[xe])&&(i=i*8+"01234567".indexOf(Et[xe++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&Et[xe]===`
`&&++xe;else{if(zA(r.charCodeAt(0)))break;e+=r}return t!==""&&ir({},js,ho),{type:MI,value:e,octal:s,start:n,end:xe}}function FYt(e,t){let n=e;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";ir({},XH)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{ir({},XH)}try{return new RegExp(e,t)}catch{return null}}function BYt(){var e,t,n,r,i;for(e=Et[xe],AF(e==="/","Regular expression literal must start with a slash"),t=Et[xe++],n=!1,r=!1;xe<Ko;)if(e=Et[xe++],t+=e,e==="\\")e=Et[xe++],zA(e.charCodeAt(0))&&ir({},Ij),t+=e;else if(zA(e.charCodeAt(0)))ir({},Ij);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||ir({},Ij),i=t.substr(1,t.length-2),{value:i,literal:t}}function jYt(){var e,t,n;for(t="",n="";xe<Ko&&(e=Et[xe],!!CL(e.charCodeAt(0)));)++xe,e==="\\"&&xe<Ko?ir({},js,ho):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&ir({},XH,n),{value:n,literal:t}}function zYt(){var e,t,n,r;return _r=null,P5e(),e=xe,t=BYt(),n=jYt(),r=FYt(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:xe}}function UYt(e){return e.type===Y1||e.type===M0||e.type===SF||e.type===TF}function $5e(){if(P5e(),xe>=Ko)return{type:LI,start:xe,end:xe};const e=Et.charCodeAt(xe);return FI(e)?NYt():e===40||e===41||e===59?Oj():e===39||e===34?MYt():e===46?Nh(Et.charCodeAt(xe+1))?S0e():Oj():Nh(e)?S0e():Oj()}function tu(){const e=_r;return xe=e.end,_r=$5e(),xe=e.end,e}function R5e(){const e=xe;_r=$5e(),xe=e}function VYt(e){const t=new Sf(dYt);return t.elements=e,t}function T0e(e,t,n){const r=new Sf(e==="||"||e==="&&"?yYt:hYt);return r.operator=e,r.left=t,r.right=n,r}function HYt(e,t){const n=new Sf(pYt);return n.callee=e,n.arguments=t,n}function qYt(e,t,n){const r=new Sf(mYt);return r.test=e,r.consequent=t,r.alternate=n,r}function See(e){const t=new Sf(I5e);return t.name=e,t}function yT(e){const t=new Sf(gYt);return t.value=e.value,t.raw=Et.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function A0e(e,t,n){const r=new Sf(vYt);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function WYt(e){const t=new Sf(_Yt);return t.properties=e,t}function C0e(e,t,n){const r=new Sf(bYt);return r.key=t,r.value=n,r.kind=e,r}function GYt(e,t){const n=new Sf(wYt);return n.operator=e,n.argument=t,n.prefix=!0,n}function ir(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(s,o)=>(AF(o<r.length,"Message reference must be in range"),r[o]));throw n=new Error(i),n.index=xe,n.description=i,n}function CF(e){e.type===LI&&ir(e,AYt),e.type===Fv&&ir(e,EYt),e.type===MI&&ir(e,xYt),e.type===Y1&&ir(e,SYt),e.type===M0&&ir(e,TYt),ir(e,js,e.value)}function Xo(e){const t=tu();(t.type!==Ya||t.value!==e)&&CF(t)}function Kr(e){return _r.type===Ya&&_r.value===e}function Pj(e){return _r.type===M0&&_r.value===e}function YYt(){const e=[];for(xe=_r.start,Xo("[");!Kr("]");)Kr(",")?(tu(),e.push(null)):(e.push(K1()),Kr("]")||Xo(","));return tu(),VYt(e)}function I0e(){xe=_r.start;const e=tu();return e.type===MI||e.type===Fv?(e.octal&&ir(e,O5e),yT(e)):See(e.value)}function KYt(){var e,t,n,r;if(xe=_r.start,e=_r,e.type===Y1)return n=I0e(),Xo(":"),r=K1(),C0e("init",n,r);if(e.type===LI||e.type===Ya)CF(e);else return t=I0e(),Xo(":"),r=K1(),C0e("init",t,r)}function XYt(){var e=[],t,n,r,i={},s=String;for(xe=_r.start,Xo("{");!Kr("}");)t=KYt(),t.key.type===I5e?n=t.key.name:n=s(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?ir({},CYt):i[r]=!0,e.push(t),Kr("}")||Xo(",");return Xo("}"),WYt(e)}function QYt(){Xo("(");const e=Tee();return Xo(")"),e}const JYt={if:1};function ZYt(){var e,t,n;if(Kr("("))return QYt();if(Kr("["))return YYt();if(Kr("{"))return XYt();if(e=_r.type,xe=_r.start,e===Y1||JYt[_r.value])n=See(tu().value);else if(e===MI||e===Fv)_r.octal&&ir(_r,O5e),n=yT(tu());else{if(e===M0)throw new Error(jA);e===SF?(t=tu(),t.value=t.value==="true",n=yT(t)):e===TF?(t=tu(),t.value=null,n=yT(t)):Kr("/")||Kr("/=")?(n=yT(zYt()),R5e()):CF(tu())}return n}function eKt(){const e=[];if(Xo("("),!Kr(")"))for(;xe<Ko&&(e.push(K1()),!Kr(")"));)Xo(",");return Xo(")"),e}function tKt(){xe=_r.start;const e=tu();return UYt(e)||CF(e),See(e.value)}function nKt(){return Xo("."),tKt()}function rKt(){Xo("[");const e=Tee();return Xo("]"),e}function iKt(){var e,t,n;for(e=ZYt();;)if(Kr("."))n=nKt(),e=A0e(".",e,n);else if(Kr("("))t=eKt(),e=HYt(e,t);else if(Kr("["))n=rKt(),e=A0e("[",e,n);else break;return e}function O0e(){const e=iKt();if(_r.type===Ya&&(Kr("++")||Kr("--")))throw new Error(jA);return e}function $$(){var e,t;if(_r.type!==Ya&&_r.type!==M0)t=O0e();else{if(Kr("++")||Kr("--"))throw new Error(jA);if(Kr("+")||Kr("-")||Kr("~")||Kr("!"))e=tu(),t=$$(),t=GYt(e.value,t);else{if(Pj("delete")||Pj("void")||Pj("typeof"))throw new Error(jA);t=O0e()}}return t}function P0e(e){let t=0;if(e.type!==Ya&&e.type!==M0)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function sKt(){var e,t,n,r,i,s,o,a,u,l;if(e=_r,u=$$(),r=_r,i=P0e(r),i===0)return u;for(r.prec=i,tu(),t=[e,_r],o=$$(),s=[u,r,o];(i=P0e(_r))>0;){for(;s.length>2&&i<=s[s.length-2].prec;)o=s.pop(),a=s.pop().value,u=s.pop(),t.pop(),n=T0e(a,u,o),s.push(n);r=tu(),r.prec=i,s.push(r),t.push(_r),n=$$(),s.push(n)}for(l=s.length-1,n=s[l],t.pop();l>1;)t.pop(),n=T0e(s[l-1].value,s[l-2],n),l-=2;return n}function K1(){var e,t,n;return e=sKt(),Kr("?")&&(tu(),t=K1(),Xo(":"),n=K1(),e=qYt(e,t,n)),e}function Tee(){const e=K1();if(Kr(","))throw new Error(jA);return e}function Aee(e){Et=e,xe=0,Ko=Et.length,_r=null,R5e();const t=Tee();if(_r.type!==LI)throw new Error("Unexpect token after expression.");return t}var N5e={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function D5e(e){function t(o,a,u,l){let c=e(a[0]);return u&&(c=u+"("+c+")",u.lastIndexOf("new ",0)===0&&(c="("+c+")")),c+"."+o+(l<0?"":l===0?"()":"("+a.slice(1).map(e).join(",")+")")}function n(o,a,u){return l=>t(o,l,a,u)}const r="new Date",i="String",s="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(o){o.length<3&&Te("Missing arguments to clamp function."),o.length>3&&Te("Too many arguments to clamp function.");const a=o.map(e);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),regexp:s,test:n("test",s),if:function(o){o.length<3&&Te("Missing arguments to if function."),o.length>3&&Te("Too many arguments to if function.");const a=o.map(e);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function oKt(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function L5e(e){e=e||{};const t=e.allowed?cf(e.allowed):{},n=e.forbidden?cf(e.forbidden):{},r=e.constants||N5e,i=(e.functions||D5e)(f),s=e.globalvar,o=e.fieldvar,a=pn(s)?s:p=>`${s}["${p}"]`;let u={},l={},c=0;function f(p){if(rt(p))return p;const m=d[p.type];return m==null&&Te("Unsupported type: "+p.type),m(p)}const d={Literal:p=>p.raw,Identifier:p=>{const m=p.name;return c>0?m:Nt(n,m)?Te("Illegal identifier: "+m):Nt(r,m)?r[m]:Nt(t,m)?m:(u[m]=1,a(m))},MemberExpression:p=>{const m=!p.computed,g=f(p.object);m&&(c+=1);const y=f(p.property);return g===o&&(l[oKt(y)]=1),m&&(c-=1),g+(m?"."+y:"["+y+"]")},CallExpression:p=>{p.callee.type!=="Identifier"&&Te("Illegal callee type: "+p.callee.type);const m=p.callee.name,g=p.arguments,y=Nt(i,m)&&i[m];return y||Te("Unrecognized function: "+m),pn(y)?y(g):y+"("+g.map(f).join(",")+")"},ArrayExpression:p=>"["+p.elements.map(f).join(",")+"]",BinaryExpression:p=>"("+f(p.left)+" "+p.operator+" "+f(p.right)+")",UnaryExpression:p=>"("+p.operator+f(p.argument)+")",ConditionalExpression:p=>"("+f(p.test)+"?"+f(p.consequent)+":"+f(p.alternate)+")",LogicalExpression:p=>"("+f(p.left)+p.operator+f(p.right)+")",ObjectExpression:p=>"{"+p.properties.map(f).join(",")+"}",Property:p=>{c+=1;const m=f(p.key);return c-=1,m+":"+f(p.value)}};function h(p){const m={code:f(p),globals:Object.keys(u),fields:Object.keys(l)};return u={},l={},m}return h.functions=i,h.constants=r,h}const k0e=Symbol("vega_selection_getter");function M5e(e){return(!e.getter||!e.getter[k0e])&&(e.getter=tc(e.field),e.getter[k0e]=!0),e.getter}const Cee="intersect",$0e="union",aKt="vlMulti",uKt="vlPoint",R0e="or",lKt="and",Jf="_vgsid_",UA=tc(Jf),cKt="E",fKt="R",dKt="R-E",hKt="R-LE",pKt="R-RE",IL="index:unit";function N0e(e,t){for(var n=t.fields,r=t.values,i=n.length,s=0,o,a;s<i;++s)if(a=n[s],o=M5e(a)(e),Ag(o)&&(o=Ho(o)),Ag(r[s])&&(r[s]=Ho(r[s])),Ie(r[s])&&Ag(r[s][0])&&(r[s]=r[s].map(Ho)),a.type===cKt){if(Ie(r[s])?r[s].indexOf(o)<0:o!==r[s])return!1}else if(a.type===fKt){if(!sb(o,r[s]))return!1}else if(a.type===pKt){if(!sb(o,r[s],!0,!1))return!1}else if(a.type===dKt){if(!sb(o,r[s],!1,!1))return!1}else if(a.type===hKt&&!sb(o,r[s],!1,!0))return!1;return!0}function mKt(e,t,n){for(var r=this.context.data[e],i=r?r.values.value:[],s=r?r[IL]&&r[IL].value:void 0,o=n===Cee,a=i.length,u=0,l,c,f,d,h;u<a;++u)if(l=i[u],s&&o){if(c=c||{},f=c[d=l.unit]||0,f===-1)continue;if(h=N0e(t,l),c[d]=h?-1:++f,h&&s.size===1)return!0;if(!h&&f===s.get(d).count)return!1}else if(h=N0e(t,l),o^h)return h;return a&&o}const F5e=_I(UA),gKt=F5e.left,yKt=F5e.right;function vKt(e,t,n){const r=this.context.data[e],i=r?r.values.value:[],s=r?r[IL]&&r[IL].value:void 0,o=n===Cee,a=UA(t),u=gKt(i,a);if(u===i.length||UA(i[u])!==a)return!1;if(s&&o){if(s.size===1)return!0;if(yKt(i,a)-u<s.size)return!1}return!0}function _Kt(e,t){return e.map(n=>hn(t.fields?{values:t.fields.map(r=>M5e(r)(n.datum))}:{[Jf]:UA(n.datum)},t))}function bKt(e,t,n,r){for(var i=this.context.data[e],s=i?i.values.value:[],o={},a={},u={},l,c,f,d,h,p,m,g,y,v,_=s.length,b=0,E,w;b<_;++b)if(l=s[b],d=l.unit,c=l.fields,f=l.values,c&&f){for(E=0,w=c.length;E<w;++E)h=c[E],m=o[h.field]||(o[h.field]={}),g=m[d]||(m[d]=[]),u[h.field]=y=h.type.charAt(0),v=kj[`${y}_union`],m[d]=v(g,nt(f[E]));n&&(g=a[d]||(a[d]=[]),g.push(nt(f).reduce((x,S,I)=>(x[c[I].field]=S,x),{})))}else h=Jf,p=UA(l),m=o[h]||(o[h]={}),g=m[d]||(m[d]=[]),g.push(p),n&&(g=a[d]||(a[d]=[]),g.push({[Jf]:p}));if(t=t||$0e,o[Jf]?o[Jf]=kj[`${Jf}_${t}`](...Object.values(o[Jf])):Object.keys(o).forEach(x=>{o[x]=Object.keys(o[x]).map(S=>o[x][S]).reduce((S,I)=>S===void 0?I:kj[`${u[x]}_${t}`](S,I))}),s=Object.keys(a),n&&s.length){const x=r?uKt:aKt;o[x]=t===$0e?{[R0e]:s.reduce((S,I)=>(S.push(...a[I]),S),[])}:{[lKt]:s.map(S=>({[R0e]:a[S]}))}}return o}var kj={[`${Jf}_union`]:bBt,[`${Jf}_intersect`]:vBt,E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.indexOf(n)>=0):t},R_union:function(e,t){var n=Ho(t[0]),r=Ho(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=Ho(t[0]),r=Ho(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}};const wKt=":",EKt="@";function Iee(e,t,n,r){t[0].type!==G1&&Te("First argument to selection functions must be a string literal.");const i=t[0].value,s=t.length>=2&&Un(t).value,o="unit",a=EKt+o,u=wKt+i;s===Cee&&!Nt(r,a)&&(r[a]=n.getData(i).indataRef(n,o)),Nt(r,u)||(r[u]=n.getData(i).tuplesRef())}function B5e(e){const t=this.context.data[e];return t?t.values.value:[]}function xKt(e,t,n){const r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i&&i.count}function SKt(e,t){const n=this.context.dataflow,r=this.context.data[e],i=r.input;return n.pulse(i,n.changeset().remove(nc).insert(t)),1}function TKt(e,t,n){if(e){const r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return n!==void 0?n:e}const BI=e=>function(t,n){return this.context.dataflow.locale()[e](n)(t)},AKt=BI("format"),j5e=BI("timeFormat"),CKt=BI("utcFormat"),IKt=BI("timeParse"),OKt=BI("utcParse"),YP=new Date(2e3,0,1);function IF(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(YP.setYear(2e3),YP.setMonth(e),YP.setDate(t),j5e.call(this,YP,n))}function PKt(e){return IF.call(this,e,1,"%B")}function kKt(e){return IF.call(this,e,1,"%b")}function $Kt(e){return IF.call(this,0,2+e,"%A")}function RKt(e){return IF.call(this,0,2+e,"%a")}const NKt=":",DKt="@",JH="%",z5e="$";function Oee(e,t,n,r){t[0].type!==G1&&Te("First argument to data functions must be a string literal.");const i=t[0].value,s=NKt+i;if(!Nt(s,r))try{r[s]=n.getData(i).tuplesRef()}catch{}}function LKt(e,t,n,r){t[0].type!==G1&&Te("First argument to indata must be a string literal."),t[1].type!==G1&&Te("Second argument to indata must be a string literal.");const i=t[0].value,s=t[1].value,o=DKt+s;Nt(o,r)||(r[o]=n.getData(i).indataRef(n,s))}function xa(e,t,n,r){if(t[0].type===G1)D0e(n,r,t[0].value);else for(e in n.scales)D0e(n,r,e)}function D0e(e,t,n){const r=JH+n;if(!Nt(t,r))try{t[r]=e.scaleRef(n)}catch{}}function ch(e,t){if(pn(e))return e;if(rt(e)){const n=t.scales[e];return n&&q7t(n.value)?n.value:void 0}}function MKt(e,t,n){t.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=xa,n._range=xa,n._scale=xa;const r=i=>"_["+(i.type===G1?Xe(JH+i.value):Xe(JH)+"+"+e(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${r(i[0])})`,_range:i=>`${r(i[0])}.range()`,_scale:i=>`${r(i[0])}(${e(i[1])})`}}function Pee(e,t){return function(n,r,i){if(n){const s=ch(n,(i||this).context);return s&&s.path[e](r)}else return t(r)}}const FKt=Pee("area",aqt),BKt=Pee("bounds",fqt),jKt=Pee("centroid",yqt);function zKt(e,t){const n=ch(e,(t||this).context);return n&&n.scale()}function UKt(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function kee(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function VKt(){return kee(this.context.dataflow,"warn",arguments)}function HKt(){return kee(this.context.dataflow,"info",arguments)}function qKt(){return kee(this.context.dataflow,"debug",arguments)}function $j(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function ZH(e){const t=Vg(e),n=$j(t.r),r=$j(t.g),i=$j(t.b);return .2126*n+.7152*r+.0722*i}function WKt(e,t){const n=ZH(e),r=ZH(t),i=Math.max(n,r),s=Math.min(n,r);return(i+.05)/(s+.05)}function GKt(){const e=[].slice.call(arguments);return e.unshift({}),hn(...e)}function U5e(e,t){return e===t||e!==e&&t!==t?!0:Ie(e)?Ie(t)&&e.length===t.length?YKt(e,t):!1:st(e)&&st(t)?V5e(e,t):!1}function YKt(e,t){for(let n=0,r=e.length;n<r;++n)if(!U5e(e[n],t[n]))return!1;return!0}function V5e(e,t){for(const n in e)if(!U5e(e[n],t[n]))return!1;return!0}function L0e(e){return t=>V5e(e,t)}function KKt(e,t,n,r,i,s){const o=this.context.dataflow,a=this.context.data[e],u=a.input,l=o.stamp();let c=a.changes,f,d;if(o._trigger===!1||!(u.value.length||t||r))return 0;if((!c||c.stamp<l)&&(a.changes=c=o.changeset(),c.stamp=l,o.runAfter(()=>{a.modified=!0,o.pulse(u,c).run()},!0,1)),n&&(f=n===!0?nc:Ie(n)||Y4(n)?n:L0e(n),c.remove(f)),t&&c.insert(t),r&&(f=L0e(r),u.value.some(f)?c.remove(f):c.insert(r)),i)for(d in s)c.modify(i,d,s[d]);return 1}function XKt(e){const t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.hypot(n,r)}function QKt(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const M0e={};function JKt(e,t){const n=M0e[t]||(M0e[t]=tc(t));return Ie(e)?e.map(n):n(e)}function $ee(e){return Ie(e)||ArrayBuffer.isView(e)?e:null}function Ree(e){return $ee(e)||(rt(e)?e:null)}function ZKt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return $ee(e).join(...n)}function eXt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Ree(e).indexOf(...n)}function tXt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Ree(e).lastIndexOf(...n)}function nXt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Ree(e).slice(...n)}function rXt(e,t,n){return pn(n)&&Te("Function argument passed to replace."),String(e).replace(t,n)}function iXt(e){return $ee(e).slice().reverse()}function sXt(e,t,n){return WJ(e||0,t||0,n||0)}function oXt(e,t){const n=ch(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function aXt(e,t){const n=ch(e,(t||this).context);return n?n.copy():void 0}function uXt(e,t){const n=ch(e,(t||this).context);return n?n.domain():[]}function lXt(e,t,n){const r=ch(e,(n||this).context);return r?Ie(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}function cXt(e,t){const n=ch(e,(t||this).context);return n&&n.range?n.range():[]}function fXt(e,t,n){const r=ch(e,(n||this).context);return r?r(t):void 0}function dXt(e,t,n,r,i){e=ch(e,(i||this).context);const s=K6e(t,n);let o=e.domain(),a=o[0],u=Un(o),l=ta;return u-a?l=M6e(e,a,u):e=(e.interpolator?or("sequential")().interpolator(e.interpolator()):or("linear")().interpolate(e.interpolate()).range(e.range())).domain([a=0,u=1]),e.ticks&&(o=e.ticks(+r||15),a!==o[0]&&o.unshift(a),u!==Un(o)&&o.push(u)),o.forEach(c=>s.stop(l(c),e(c))),s}function hXt(e,t,n){const r=ch(e,(n||this).context);return function(i){return r?r.path.context(i)(t):""}}function pXt(e){let t=null;return function(n){return n?kA(n,t=t||Uw(e)):e}}const H5e=e=>e.data;function q5e(e,t){const n=B5e.call(t,e);return n.root&&n.root.lookup||{}}function mXt(e,t,n){const r=q5e(e,this),i=r[t],s=r[n];return i&&s?i.path(s).map(H5e):void 0}function gXt(e,t){const n=q5e(e,this)[t];return n?n.ancestors().map(H5e):void 0}const W5e=()=>typeof window<"u"&&window||null;function yXt(){const e=W5e();return e?e.screen:{}}function vXt(){const e=W5e();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function _Xt(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function G5e(e,t,n){if(!e)return[];const[r,i]=e,s=new os().set(r[0],r[1],i[0],i[1]),o=n||this.context.dataflow.scenegraph().root;return U4e(o,s,bXt(t))}function bXt(e){let t=null;if(e){const n=nt(e.marktype),r=nt(e.markname);t=i=>(!n.length||n.some(s=>i.marktype===s))&&(!r.length||r.some(s=>i.name===s))}return t}function wXt(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=nt(e);const i=e[e.length-1];return i===void 0||Math.hypot(i[0]-t,i[1]-n)>r?[...e,[t,n]]:e}function EXt(e){return nt(e).reduce((t,n,r)=>{let[i,s]=n;return t+=r==0?`M ${i},${s} `:r===e.length-1?" Z":`L ${i},${s} `},"")}function xXt(e,t,n){const{x:r,y:i,mark:s}=n,o=new os().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[u,l]of t)u<o.x1&&(o.x1=u),u>o.x2&&(o.x2=u),l<o.y1&&(o.y1=l),l>o.y2&&(o.y2=l);return o.translate(r,i),G5e([[o.x1,o.y1],[o.x2,o.y2]],e,s).filter(u=>SXt(u.x,u.y,t))}function SXt(e,t,n){let r=0;for(let i=0,s=n.length-1;i<n.length;s=i++){const[o,a]=n[s],[u,l]=n[i];l>t!=a>t&&e<(o-u)*(t-l)/(a-l)+u&&r++}return r&1}const VA={random(){return ic()},cumulativeNormal:Z4,cumulativeLogNormal:dJ,cumulativeUniform:gJ,densityNormal:aJ,densityLogNormal:fJ,densityUniform:mJ,quantileNormal:eF,quantileLogNormal:hJ,quantileUniform:yJ,sampleNormal:J4,sampleLogNormal:cJ,sampleUniform:pJ,isArray:Ie,isBoolean:L0,isDate:Ag,isDefined(e){return e!==void 0},isNumber:Jn,isObject:st,isRegExp:jLe,isString:rt,isTuple:Y4,isValid(e){return e!=null&&e===e},toBoolean:qQ,toDate(e){return WQ(e)},toNumber:Ho,toString:GQ,indexof:eXt,join:ZKt,lastindexof:tXt,replace:rXt,reverse:iXt,slice:nXt,flush:FLe,lerp:zLe,merge:GKt,pad:HLe,peek:Un,pluck:JKt,span:vI,inrange:sb,truncate:qLe,rgb:Vg,lab:wD,hcl:ED,hsl:_D,luminance:ZH,contrast:WKt,sequence:Nv,format:AKt,utcFormat:CKt,utcParse:OKt,utcOffset:dMe,utcSequence:mMe,timeFormat:j5e,timeParse:IKt,timeOffset:fMe,timeSequence:pMe,timeUnitSpecifier:eMe,monthFormat:PKt,monthAbbrevFormat:kKt,dayFormat:$Kt,dayAbbrevFormat:RKt,quarter:NLe,utcquarter:DLe,week:nMe,utcweek:sMe,dayofyear:tMe,utcdayofyear:iMe,warn:VKt,info:HKt,debug:qKt,extent(e){return Wd(e)},inScope:UKt,intersect:G5e,clampRange:LLe,pinchDistance:XKt,pinchAngle:QKt,screen:yXt,containerSize:_Xt,windowSize:vXt,bandspace:sXt,setdata:SKt,pathShape:pXt,panLinear:PLe,panLog:kLe,panPow:$Le,panSymlog:RLe,zoomLinear:BQ,zoomLog:jQ,zoomPow:M3,zoomSymlog:zQ,encode:TKt,modify:KKt,lassoAppend:wXt,lassoPath:EXt,intersectLasso:xXt},TXt=["view","item","group","xy","x","y"],AXt="event.vega.",Y5e="this.",Nee={},K5e={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${Xe(z5e+e)}]`,functions:CXt,constants:N5e,visitors:Nee},eq=L5e(K5e);function CXt(e){const t=D5e(e);TXt.forEach(n=>t[n]=AXt+n);for(const n in VA)t[n]=Y5e+n;return hn(t,MKt(e,VA,Nee)),t}function Gi(e,t,n){return arguments.length===1?VA[e]:(VA[e]=t,n&&(Nee[e]=n),eq&&(eq.functions[e]=Y5e+e),this)}Gi("bandwidth",oXt,xa);Gi("copy",aXt,xa);Gi("domain",uXt,xa);Gi("range",cXt,xa);Gi("invert",lXt,xa);Gi("scale",fXt,xa);Gi("gradient",dXt,xa);Gi("geoArea",FKt,xa);Gi("geoBounds",BKt,xa);Gi("geoCentroid",jKt,xa);Gi("geoShape",hXt,xa);Gi("geoScale",zKt,xa);Gi("indata",xKt,LKt);Gi("data",B5e,Oee);Gi("treePath",mXt,Oee);Gi("treeAncestors",gXt,Oee);Gi("vlSelectionTest",mKt,Iee);Gi("vlSelectionIdTest",vKt,Iee);Gi("vlSelectionResolve",bKt,Iee);Gi("vlSelectionTuples",_Kt);function Kd(e,t){const n={};let r;try{e=rt(e)?e:Xe(e)+"",r=Aee(e)}catch{Te("Expression parse error: "+e)}r.visit(s=>{if(s.type!==C5e)return;const o=s.callee.name,a=K5e.visitors[o];a&&a(o,s.arguments,t,n)});const i=eq(r);return i.globals.forEach(s=>{const o=z5e+s;!Nt(n,o)&&t.getSignal(s)&&(n[o]=t.signalRef(s))}),{$expr:hn({code:i.code},t.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}function IXt(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(r=>t.parseOperator(r)),n.forEach(r=>t.parseOperatorParameters(r)),(e.streams||[]).forEach(r=>t.parseStream(r)),(e.updates||[]).forEach(r=>t.parseUpdate(r)),t.resolve()}const OXt=cf(["rule"]),F0e=cf(["group","image","rect"]);function PXt(e,t){let n="";return OXt[t]||(e.x2&&(e.x?(F0e[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(F0e[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function Dee(e){return(e+"").toLowerCase()}function kXt(e){return Dee(e)==="operator"}function $Xt(e){return Dee(e)==="collect"}function _S(e,t,n){n.endsWith(";")||(n="return("+n+");");const r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}function RXt(e,t,n,r){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${r}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${r} : `}var NXt={operator:(e,t)=>_S(e,["_"],t.code),parameter:(e,t)=>_S(e,["datum","_"],t.code),event:(e,t)=>_S(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return _S(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:r}=t;let i="var o=item,datum=o.datum,m=0,$;";for(const s in r){const o="o["+Xe(s)+"]";i+=`$=${r[s].code};if(${o}!==$)${o}=$,m=1;`}return i+=PXt(r,n),i+="return m;",_S(e,["item","_"],i)},codegen:{get(e){const t=`[${e.map(Xe).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const r=(s,o)=>{const a=t[o];let u,l;return s.path?(u=`a${s.path}`,l=`b${s.path}`):((n=n||{})["f"+o]=s,u=`this.f${o}(a)`,l=`this.f${o}(b)`),RXt(u,l,-a,a)},i=Function("a","b","var u, v; return "+e.map(r).join("")+"0;");return n?i.bind(n):i}}};function DXt(e){const t=this;kXt(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function LXt(e){const t=this;if(e.params){const n=t.get(e.id);n||Te("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function MXt(e,t){t=t||{};const n=this;for(const r in e){const i=e[r];t[r]=Ie(i)?i.map(s=>B0e(s,n,t)):B0e(i,n,t)}return t}function B0e(e,t,n){if(!e||!st(e))return e;for(let r=0,i=j0e.length,s;r<i;++r)if(s=j0e[r],Nt(e,s.key))return s.parse(e,t,n);return e}var j0e=[{key:"$ref",parse:FXt},{key:"$key",parse:jXt},{key:"$expr",parse:BXt},{key:"$field",parse:zXt},{key:"$encode",parse:VXt},{key:"$compare",parse:UXt},{key:"$context",parse:HXt},{key:"$subflow",parse:qXt},{key:"$tupleid",parse:WXt}];function FXt(e,t){return t.get(e.$ref)||Te("Operator not defined: "+e.$ref)}function BXt(e,t,n){e.$params&&t.parseParameters(e.$params,n);const r="e:"+e.$expr.code;return t.fn[r]||(t.fn[r]=Ou(t.parameterExpression(e.$expr),e.$fields))}function jXt(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=HQ(e.$key,e.$flat,t.expr.codegen))}function zXt(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=tc(e.$field,e.$name,t.expr.codegen))}function UXt(e,t){const n="c:"+e.$compare+"_"+e.$order,r=nt(e.$compare).map(i=>i&&i.$tupleid?kt:i);return t.fn[n]||(t.fn[n]=UQ(r,e.$order,t.expr.codegen))}function VXt(e,t){const n=e.$encode,r={};for(const i in n){const s=n[i];r[i]=Ou(t.encodeExpression(s.$expr),s.$fields),r[i].output=s.$output}return r}function HXt(e,t){return t}function qXt(e,t){const n=e.$subflow;return function(r,i,s){const o=t.fork().parse(n),a=o.get(n.operators[0].id),u=o.signals.parent;return u&&u.set(s),a.detachSubflow=()=>t.detach(o),a}}function WXt(){return kt}function GXt(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,r=e.stream!=null?t.get(e.stream):void 0,i;e.source?r=t.events(e.source,e.type,n):e.merge&&(i=e.merge.map(s=>t.get(s)),r=i[0].merge.apply(i[0],i.slice(1))),e.between&&(i=e.between.map(s=>t.get(s)),r=r.between(i[0],i[1])),e.filter&&(r=r.filter(n)),e.throttle!=null&&(r=r.throttle(+e.throttle)),e.debounce!=null&&(r=r.debounce(+e.debounce)),r==null&&Te("Invalid stream definition: "+JSON.stringify(e)),e.consume&&r.consume(!0),t.stream(e,r)}function YXt(e){var t=this,n=st(n=e.source)?n.$ref:n,r=t.get(n),i=null,s=e.update,o=void 0;r||Te("Source not defined: "+e.source),i=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),s&&s.$expr&&(s.$params&&(o=t.parseParameters(s.$params)),s=t.handlerExpression(s.$expr)),t.update(e,r,i,s,o)}const KXt={skip:!0};function XXt(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(s=>{const o=t.signals[s];e.signals(s,o)&&(r[s]=o.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(s=>{const o=t.data[s];e.data(s,o)&&(i[s]=o.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(s=>s.getState(e))),n}function QXt(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(s=>{n.update(t.signals[s],i[s],KXt)}),Object.keys(r||{}).forEach(s=>{n.pulse(t.data[s].input,n.changeset().remove(nc).insert(r[s]))}),(e.subcontext||[]).forEach((s,o)=>{const a=t.subcontext[o];a&&a.setState(s)})}function X5e(e,t,n,r){return new Q5e(e,t,n,r)}function Q5e(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||NXt,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function z0e(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}Q5e.prototype=z0e.prototype={fork(){const e=new z0e(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),$Xt(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let s=n.get(e.parent.$ref);s?(r.connect(s,[t]),t.targets().add(s)):(n.unresolved=n.unresolved||[]).push(()=>{s=n.get(e.parent.$ref),r.connect(s,[t]),t.targets().add(s)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const s in e.data){const o=n.data[s]||(n.data[s]={});e.data[s].forEach(a=>o[a]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[Dee(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:IXt,parseOperator:DXt,parseOperatorParameters:LXt,parseParameters:MXt,parseStream:GXt,parseUpdate:YXt,getState:XXt,setState:QXt};function JXt(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),J5e(t,e.description()))}function J5e(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function ZXt(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const Rj="default";function eQt(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:Rj,item:null}));e.on(e.events("view","pointermove"),t,(n,r)=>{const i=t.value,s=i?rt(i)?i:i.user:Rj,o=r.item&&r.item.cursor||null;return i&&s===i.user&&o==i.item?i:{user:s,item:o}}),e.add(null,function(n){let r=n.cursor,i=this.value;return rt(r)||(i=r.item,r=r.user),tq(e,r&&r!==Rj?r:i||r),i},{cursor:t})}function tq(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function OL(e,t){var n=e._runtime.data;return Nt(n,t)||Te("Unrecognized data set: "+t),n[t]}function tQt(e,t){return arguments.length<2?OL(this,e).values.value:OF.call(this,e,Lv().remove(nc).insert(t))}function OF(e,t){DMe(t)||Te("Second argument to changes must be a changeset.");const n=OL(this,e);return n.modified=!0,this.pulse(n.input,t)}function nQt(e,t){return OF.call(this,e,Lv().insert(t))}function rQt(e,t){return OF.call(this,e,Lv().remove(t))}function Z5e(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function e8e(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function PF(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function iQt(e){var t=PF(e),n=Z5e(e),r=e8e(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(i=>{try{i(n,r)}catch(s){e.error(s)}})}function sQt(e,t,n){var r=e._renderer,i=r&&r.canvas(),s,o,a;return i&&(a=PF(e),o=t.changedTouches?t.changedTouches[0]:t,s=yF(o,i),s[0]-=a[0],s[1]-=a[1]),t.dataflow=e,t.item=n,t.vega=oQt(e,n,s),t}function oQt(e,t,n){const r=t?t.mark.marktype==="group"?t:t.mark.group:null;function i(o){var a=r,u;if(o){for(u=t;u;u=u.mark.group)if(u.mark.name===o){a=u;break}}return a&&a.mark&&a.mark.interactive?a:{}}function s(o){if(!o)return n;rt(o)&&(o=i(o));const a=n.slice();for(;o;)a[0]-=o.x||0,a[1]-=o.y||0,o=o.mark&&o.mark.group;return a}return{view:na(e),item:na(t||{}),group:i,xy:s,x:o=>s(o)[0],y:o=>s(o)[1]}}const U0e="view",aQt="timer",uQt="window",lQt={trap:!1};function cQt(e){const t=hn({defaults:{}},e),n=(r,i)=>{i.forEach(s=>{Ie(r[s])&&(r[s]=cf(r[s]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function t8e(e,t,n,r){e._eventListeners.push({type:n,sources:nt(t),handler:r})}function fQt(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return r===!1||i===!0?!1:r===!0||i===!1?!0:r?r[t]:i?!i[t]:e.preventDefault()}function KP(e,t,n){const r=e._eventConfig&&e._eventConfig[t];return r===!1||st(r)&&!r[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function dQt(e,t,n){var r=this,i=new Q4(n),s=function(l,c){r.runAsync(null,()=>{e===U0e&&fQt(r,t)&&l.preventDefault(),i.receive(sQt(r,l,c))})},o;if(e===aQt)KP(r,"timer",t)&&r.timer(s,t);else if(e===U0e)KP(r,"view",t)&&r.addEventListener(t,s,lQt);else if(e===uQt?KP(r,"window",t)&&typeof window<"u"&&(o=[window]):typeof document<"u"&&KP(r,"selector",t)&&(o=Array.from(document.querySelectorAll(e))),!o)r.warn("Can not resolve event source: "+e);else{for(var a=0,u=o.length;a<u;++a)o[a].addEventListener(t,s);t8e(r,o,t,s)}return i}function V0e(e){return e.item}function H0e(e){return e.item.mark.source}function q0e(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function hQt(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",V0e),H0e,q0e(e)),this.on(this.events("view","pointerout",V0e),H0e,q0e(t)),this}function pQt(){var e=this._tooltip,t=this._timers,n=this._eventListeners,r,i,s;for(r=t.length;--r>=0;)t[r].stop();for(r=n.length;--r>=0;)for(s=n[r],i=s.sources.length;--i>=0;)s.sources[i].removeEventListener(s.type,s.handler);return e&&e.call(this,this._handler,null,null,null),this}function tl(e,t,n){const r=document.createElement(e);for(const i in t)r.setAttribute(i,t[i]);return n!=null&&(r.textContent=n),r}const mQt="vega-bind",gQt="vega-bind-name",yQt="vega-bind-radio";function vQt(e,t,n){if(!t)return;const r=n.param;let i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:o=>{o!=e.signal(r.signal)&&e.runAsync(null,()=>{i.source=!0,e.signal(r.signal,o)})}},r.debounce&&(i.update=VQ(r.debounce,i.update))),(r.input==null&&r.element?_Qt:wQt)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}function _Qt(e,t,n,r){const i=n.event||"input",s=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,s),t8e(r,t,i,s),e.set=o=>{t.value=o,t.dispatchEvent(bQt(i))}}function bQt(e){return typeof Event<"u"?new Event(e):{type:e}}function wQt(e,t,n,r){const i=r.signal(n.signal),s=tl("div",{class:mQt}),o=n.input==="radio"?s:s.appendChild(tl("label"));o.appendChild(tl("span",{class:gQt},n.name||n.signal)),t.appendChild(s);let a=EQt;switch(n.input){case"checkbox":a=xQt;break;case"select":a=SQt;break;case"radio":a=TQt;break;case"range":a=AQt;break}a(e,o,n,i)}function EQt(e,t,n,r){const i=tl("input");for(const s in n)s!=="signal"&&s!=="element"&&i.setAttribute(s==="input"?"type":s,n[s]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",()=>e.update(i.value)),e.elements=[i],e.set=s=>i.value=s}function xQt(e,t,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const s=tl("input",i);t.appendChild(s),s.addEventListener("change",()=>e.update(s.checked)),e.elements=[s],e.set=o=>s.checked=!!o||null}function SQt(e,t,n,r){const i=tl("select",{name:n.signal}),s=n.labels||[];n.options.forEach((o,a)=>{const u={value:o};PL(o,r)&&(u.selected=!0),i.appendChild(tl("option",u,(s[a]||o)+""))}),t.appendChild(i),i.addEventListener("change",()=>{e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=o=>{for(let a=0,u=n.options.length;a<u;++a)if(PL(n.options[a],o)){i.selectedIndex=a;return}}}function TQt(e,t,n,r){const i=tl("span",{class:yQt}),s=n.labels||[];t.appendChild(i),e.elements=n.options.map((o,a)=>{const u={type:"radio",name:n.signal,value:o};PL(o,r)&&(u.checked=!0);const l=tl("input",u);l.addEventListener("change",()=>e.update(o));const c=tl("label",{},(s[a]||o)+"");return c.prepend(l),i.appendChild(c),l}),e.set=o=>{const a=e.elements,u=a.length;for(let l=0;l<u;++l)PL(a[l].value,o)&&(a[l].checked=!0)}}function AQt(e,t,n,r){r=r!==void 0?r:(+n.max+ +n.min)/2;const i=n.max!=null?n.max:Math.max(100,+r)||100,s=n.min||Math.min(0,i,+r)||0,o=n.step||CA(s,i,100),a=tl("input",{type:"range",name:n.signal,min:s,max:i,step:o});a.value=r;const u=tl("span",{},+r);t.appendChild(a),t.appendChild(u);const l=()=>{u.textContent=a.value,e.update(+a.value)};a.addEventListener("input",l),a.addEventListener("change",l),e.elements=[a],e.set=c=>{a.value=c,u.textContent=c}}function PL(e,t){return e===t||e+""==t+""}function n8e(e,t,n,r,i,s){return t=t||new r(e.loader()),t.initialize(n,Z5e(e),e8e(e),PF(e),i,s).background(e.background())}function Lee(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function CQt(e,t,n,r){const i=new r(e.loader(),Lee(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,PF(e),e);return t&&t.handlers().forEach(s=>{i.on(s.type,s.handler)}),i}function IQt(e,t){const n=this,r=n._renderType,i=n._eventConfig.bind,s=_F(r);e=n._el=e?Nj(n,e,!0):null,JXt(n),s||n.error("Unrecognized renderer type: "+r);const o=s.handler||o0,a=e?s.renderer:s.headless;return n._renderer=a?n8e(n,n._renderer,e,a):null,n._handler=CQt(n,n._handler,e,o),n._redraw=!0,e&&i!=="none"&&(t=t?n._elBind=Nj(n,t,!0):e.appendChild(tl("form",{class:"vega-bindings"})),n._bind.forEach(u=>{u.param.element&&i!=="container"&&(u.element=Nj(n,u.param.element,!!u.param.input))}),n._bind.forEach(u=>{vQt(n,u.element||t,u)})),n}function Nj(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(r){t=null,e.error(r)}return t}const bS=e=>+e||0,OQt=e=>({top:e,bottom:e,left:e,right:e});function W0e(e){return st(e)?{top:bS(e.top),bottom:bS(e.bottom),left:bS(e.left),right:bS(e.right)}:OQt(bS(e))}async function Mee(e,t,n,r){const i=_F(t),s=i&&i.headless;return s||Te("Unrecognized renderer type: "+t),await e.runAsync(),n8e(e,null,null,s,n,r).renderAsync(e._scenegraph.root)}async function PQt(e,t){e!==ng.Canvas&&e!==ng.SVG&&e!==ng.PNG&&Te("Unrecognized image type: "+e);const n=await Mee(this,e,t);return e===ng.SVG?kQt(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function kQt(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function $Qt(e,t){return(await Mee(this,ng.Canvas,e,t)).canvas()}async function RQt(e){return(await Mee(this,ng.SVG,e)).svg()}function NQt(e,t,n){return X5e(e,Fw,VA,n).parse(t)}function DQt(e){var t=this._runtime.scales;return Nt(t,e)||Te("Unrecognized scale or projection: "+e),t[e].value}var r8e="width",i8e="height",Fee="padding",G0e={skip:!0};function s8e(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===Fee?r.left+r.right:0)}function o8e(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===Fee?r.top+r.bottom:0)}function LQt(e){var t=e._signals,n=t[r8e],r=t[i8e],i=t[Fee];function s(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,a=>{e._width=a.size,e._viewWidth=s8e(e,a.size),s()},{size:n}),e._resizeHeight=e.add(null,a=>{e._height=a.size,e._viewHeight=o8e(e,a.size),s()},{size:r});const o=e.add(null,s,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,o.rank=i.rank+1}function MQt(e,t,n,r,i,s){this.runAfter(o=>{let a=0;o._autosize=0,o.width()!==n&&(a=1,o.signal(r8e,n,G0e),o._resizeWidth.skip(!0)),o.height()!==r&&(a=1,o.signal(i8e,r,G0e),o._resizeHeight.skip(!0)),o._viewWidth!==e&&(o._resize=1,o._viewWidth=e),o._viewHeight!==t&&(o._resize=1,o._viewHeight=t),(o._origin[0]!==i[0]||o._origin[1]!==i[1])&&(o._resize=1,o._origin=i),a&&o.run("enter"),s&&o.runAfter(u=>u.resize())},!1,1)}function FQt(e){return this._runtime.getState(e||{data:BQt,signals:jQt,recurse:!0})}function BQt(e,t){return t.modified&&Ie(t.input.value)&&!e.startsWith("_:vega:_")}function jQt(e,t){return!(e==="parent"||t instanceof Fw.proxy)}function zQt(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function UQt(e,t){function n(r){e({timestamp:Date.now(),elapsed:r})}this._timers.push(Hwt(n,t))}function VQt(e,t,n,r){const i=e.element();i&&i.setAttribute("title",HQt(r))}function HQt(e){return e==null?"":Ie(e)?a8e(e):st(e)&&!Ag(e)?qQt(e):e+""}function qQt(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(Ie(n)?a8e(n):u8e(n))}).join(`
`)}function a8e(e){return"["+e.map(u8e).join(", ")+"]"}function u8e(e){return Ie(e)?"[]":st(e)&&!Ag(e)?"{}":e}function WQt(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e!=null&&e();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function l8e(e,t){const n=this;if(t=t||{},Fb.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const s=hn({},e.locale,t.locale);n.locale(TMe(s.number,s.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||ng.Canvas,n._scenegraph=new EZ;const r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||VQt,n._redraw=!0,n._handler=new o0().scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=cQt(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=NQt(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(s=>({state:null,param:hn({},s)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=s8e(n,n._width),n._viewHeight=o8e(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,LQt(n),ZXt(n),eQt(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function XP(e,t){return Nt(e._signals,t)?e._signals[t]:Te("Unrecognized signal name: "+Xe(t))}function c8e(e,t){const n=(e._targets||[]).filter(r=>r._update&&r._update.handler===t);return n.length?n[0]:null}function Y0e(e,t,n,r){let i=c8e(n,r);return i||(i=Lee(e,()=>r(t,n.value)),i.handler=r,e.on(n,null,i)),e}function K0e(e,t,n){const r=c8e(t,n);return r&&t._targets.remove(r),e}We(l8e,Fb,{async evaluate(e,t,n){if(await Fb.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,iQt(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(r){this.error(r)}return n&&_$(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&J5e(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const r=XP(this,e);return arguments.length===1?r.value:this.update(r,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",W0e(e)):W0e(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(_F(e)||Te("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(Fb.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(XP(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:MQt,addEventListener(e,t,n){let r=t;return n&&n.trap===!1||(r=Lee(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),r=n.length,i,s;--r>=0;)if(s=n[r].type,i=n[r].handler,e===s&&(t===i||t===i.raw)){this._handler.off(s,i);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return Y0e(this,e,XP(this,e),t)},removeSignalListener(e,t){return K0e(this,XP(this,e),t)},addDataListener(e,t){return Y0e(this,e,OL(this,e).values,t)},removeDataListener(e,t){return K0e(this,OL(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=tq(this,null);this._globalCursor=!!e,t&&tq(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:UQt,events:dQt,finalize:pQt,hover:hQt,data:tQt,change:OF,insert:nQt,remove:rQt,scale:DQt,initialize:IQt,toImageURL:PQt,toCanvas:$Qt,toSVG:RQt,getState:FQt,setState:zQt,_watchPixelRatio:WQt});const GQt="view",kL="[",$L="]",f8e="{",d8e="}",YQt=":",h8e=",",KQt="@",XQt=">",QQt=/[[\]{}]/,JQt={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let p8e,m8e;function F0(e,t,n){return p8e=t||GQt,m8e=n||JQt,g8e(e.trim()).map(nq)}function ZQt(e){return m8e[e]}function v2(e,t,n,r,i){const s=e.length;let o=0,a;for(;t<s;++t){if(a=e[t],!o&&a===n)return t;i&&i.indexOf(a)>=0?--o:r&&r.indexOf(a)>=0&&++o}return t}function g8e(e){const t=[],n=e.length;let r=0,i=0;for(;i<n;)i=v2(e,i,h8e,kL+f8e,$L+d8e),t.push(e.substring(r,i).trim()),r=++i;if(t.length===0)throw"Empty event selector: "+e;return t}function nq(e){return e[0]==="["?eJt(e):tJt(e)}function eJt(e){const t=e.length;let n=1,r;if(n=v2(e,n,$L,kL,$L),n===t)throw"Empty between selector: "+e;if(r=g8e(e.substring(1,n)),r.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==XQt)throw"Expected '>' after between selector: "+e;r=r.map(nq);const i=nq(e.slice(1).trim());return i.between?{between:r,stream:i}:(i.between=r,i)}function tJt(e){const t={source:p8e},n=[];let r=[0,0],i=0,s=0,o=e.length,a=0,u,l;if(e[o-1]===d8e){if(a=e.lastIndexOf(f8e),a>=0){try{r=nJt(e.substring(a+1,o-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,a).trim(),o=e.length}else throw"Unmatched right brace: "+e;a=0}if(!o)throw e;if(e[0]===KQt&&(i=++a),u=v2(e,a,YQt),u<o&&(n.push(e.substring(s,u).trim()),s=a=++u),a=v2(e,a,kL),a===o)n.push(e.substring(s,o).trim());else if(n.push(e.substring(s,a).trim()),l=[],s=++a,s===o)throw"Unmatched left bracket: "+e;for(;a<o;){if(a=v2(e,a,$L),a===o)throw"Unmatched left bracket: "+e;if(l.push(e.substring(s,a).trim()),a<o-1&&e[++a]!==kL)throw"Expected left bracket: "+e;s=++a}if(!(o=n.length)||QQt.test(n[o-1]))throw"Invalid event selector: "+e;return o>1?(t.type=n[1],i?t.markname=n[0].slice(1):ZQt(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),l!=null&&(t.filter=l),r[0]&&(t.throttle=r[0]),r[1]&&(t.debounce=r[1]),t}function nJt(e){const t=e.split(h8e);if(!e.length||t.length>2)throw e;return t.map(n=>{const r=+n;if(r!==r)throw e;return r})}function rJt(e){return st(e)?e:{type:e||"pad"}}const wS=e=>+e||0,iJt=e=>({top:e,bottom:e,left:e,right:e});function sJt(e){return st(e)?e.signal?e:{top:wS(e.top),bottom:wS(e.bottom),left:wS(e.left),right:wS(e.right)}:iJt(wS(e))}const zs=e=>st(e)&&!Ie(e)?hn({},e):{value:e};function X0e(e,t,n,r){return n!=null?(st(n)&&!Ie(n)||Ie(n)&&n.length&&st(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1):0}function wo(e,t,n){for(const r in t)X0e(e,r,t[r]);for(const r in n)X0e(e,r,n[r],"update")}function sx(e,t,n){for(const r in t)n&&Nt(n,r)||(e[r]=hn(e[r]||{},t[r]));return e}function D_(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const Bee="mark",jee="frame",zee="scope",oJt="axis",aJt="axis-domain",uJt="axis-grid",lJt="axis-label",cJt="axis-tick",fJt="axis-title",dJt="legend",hJt="legend-band",pJt="legend-entry",mJt="legend-gradient",y8e="legend-label",gJt="legend-symbol",yJt="legend-title",vJt="title",_Jt="title-text",bJt="title-subtitle";function wJt(e,t,n,r,i){const s={},o={};let a,u,l,c;u="lineBreak",t==="text"&&i[u]!=null&&!D_(u,e)&&Dj(s,u,i[u]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),c=n===jee?i.group:n===Bee?hn({},i.mark,i[t]):null;for(u in c)l=D_(u,e)||(u==="fill"||u==="stroke")&&(D_("fill",e)||D_("stroke",e)),l||Dj(s,u,c[u]);nt(r).forEach(f=>{const d=i.style&&i.style[f];for(const h in d)D_(h,e)||Dj(s,h,d[h])}),e=hn({},e);for(u in s)c=s[u],c.signal?(a=a||{})[u]=c:o[u]=c;return e.enter=hn(o,e.enter),a&&(e.update=hn(a,e.update)),e}function Dj(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const v8e=e=>rt(e)?Xe(e):e.signal?`(${e.signal})`:_8e(e);function kF(e){if(e.gradient!=null)return xJt(e);let t=e.signal?`(${e.signal})`:e.color?EJt(e.color):e.field!=null?_8e(e.field):e.value!==void 0?Xe(e.value):void 0;return e.scale!=null&&(t=SJt(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${R$(e.exponent)})`),e.mult!=null&&(t+=`*${R$(e.mult)}`),e.offset!=null&&(t+=`+${R$(e.offset)}`),e.round&&(t=`round(${t})`),t}const QP=(e,t,n,r)=>`(${e}(${[t,n,r].map(kF).join(",")})+'')`;function EJt(e){return e.c?QP("hcl",e.h,e.c,e.l):e.h||e.s?QP("hsl",e.h,e.s,e.l):e.l||e.a?QP("lab",e.l,e.a,e.b):e.r||e.g||e.b?QP("rgb",e.r,e.g,e.b):null}function xJt(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:Xe(n));for(;t.length&&Un(t)==null;)t.pop();return t.unshift(v8e(e.gradient)),`gradient(${t.join(",")})`}function R$(e){return st(e)?"("+kF(e)+")":e}function _8e(e){return b8e(st(e)?e:{datum:e})}function b8e(e){let t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):Te("Invalid field reference: "+Xe(e));return e.signal||(r=rt(r)?oh(r).map(Xe).join("]["):b8e(r)),t+"["+r+"]"}function SJt(e,t){const n=v8e(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+R$(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function TJt(e){let t="";return e.forEach(n=>{const r=kF(n);t+=n.test?`(${n.test})?${r}:`:r}),Un(t)===":"&&(t+="null"),t}function w8e(e,t,n,r,i,s){const o={};s=s||{},s.encoders={$encode:o},e=wJt(e,t,n,r,i.config);for(const a in e)o[a]=AJt(e[a],t,s,i);return s}function AJt(e,t,n,r){const i={},s={};for(const o in e)e[o]!=null&&(i[o]=IJt(CJt(e[o]),r,n,s));return{$expr:{marktype:t,channels:i},$fields:Object.keys(s),$output:Object.keys(e)}}function CJt(e){return Ie(e)?TJt(e):kF(e)}function IJt(e,t,n,r){const i=Kd(e,t);return i.$fields.forEach(s=>r[s]=1),hn(n,i.$params),i.$expr}const OJt="outer",PJt=["value","update","init","react","bind"];function Q0e(e,t){Te(e+' for "outer" push: '+Xe(t))}function E8e(e,t){const n=e.name;if(e.push===OJt)t.signals[n]||Q0e("No prior signal definition",n),PJt.forEach(r=>{e[r]!==void 0&&Q0e("Invalid property ",r)});else{const r=t.addSignal(n,e.value);e.react===!1&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function rq(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function $F(e,t,n,r){return new rq(e,t,n,r)}function RL(e,t){return $F("operator",e,t)}function Pt(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function HA(e,t){return t?{$field:e,$name:t}:{$field:e}}const iq=HA("key");function J0e(e,t){return{$compare:e,$order:t}}function kJt(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const $Jt="ascending",RJt="descending";function NJt(e){return st(e)?(e.order===RJt?"-":"+")+RF(e.op,e.field):""}function RF(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const Uee="scope",sq="view";function ws(e){return e&&e.signal}function DJt(e){return e&&e.expr}function N$(e){if(ws(e))return!0;if(st(e)){for(const t in e)if(N$(e[t]))return!0}return!1}function Dc(e,t){return e??t}function g1(e){return e&&e.signal||e}const Z0e="timer";function qA(e,t){return(e.merge?MJt:e.stream?FJt:e.type?BJt:Te("Invalid stream specification: "+Xe(e)))(e,t)}function LJt(e){return e===Uee?sq:e||sq}function MJt(e,t){const n=e.merge.map(i=>qA(i,t)),r=Vee({merge:n},e,t);return t.addStream(r).id}function FJt(e,t){const n=qA(e.stream,t),r=Vee({stream:n},e,t);return t.addStream(r).id}function BJt(e,t){let n;e.type===Z0e?(n=t.event(Z0e,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(LJt(e.source),e.type);const r=Vee({stream:n},e,t);return Object.keys(r).length===1?n:t.addStream(r).id}function Vee(e,t,n){let r=t.between;return r&&(r.length!==2&&Te('Stream "between" parameter must have 2 entries: '+Xe(t)),e.between=[qA(r[0],n),qA(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(jJt(t.marktype,t.markname,t.markrole)),t.source===Uee&&r.push("inScope(event.item)"),r.length&&(e.filter=Kd("("+r.join(")&&(")+")",n).$expr),(r=t.throttle)!=null&&(e.throttle=+r),(r=t.debounce)!=null&&(e.debounce=+r),t.consume&&(e.consume=!0),e}function jJt(e,t,n){const r="event.item";return r+(e&&e!=="*"?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}const zJt={code:"_.$value",ast:{type:"Identifier",value:"value"}};function UJt(e,t,n){const r=e.encode,i={target:n};let s=e.events,o=e.update,a=[];s||Te("Signal update missing events specification."),rt(s)&&(s=F0(s,t.isSubscope()?Uee:sq)),s=nt(s).filter(u=>u.signal||u.scale?(a.push(u),0):1),a.length>1&&(a=[HJt(a)]),s.length&&a.push(s.length>1?{merge:s}:s[0]),r!=null&&(o&&Te("Signal encode and update are mutually exclusive."),o="encode(item(),"+Xe(r)+")"),i.update=rt(o)?Kd(o,t):o.expr!=null?Kd(o.expr,t):o.value!=null?o.value:o.signal!=null?{$expr:zJt,$params:{$value:t.signalRef(o.signal)}}:Te("Invalid signal update specification."),e.force&&(i.options={force:!0}),a.forEach(u=>t.addUpdate(hn(VJt(u,t),i)))}function VJt(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):qA(e,t)}}function HJt(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function qJt(e,t){const n=t.getSignal(e.name);let r=e.update;e.init&&(r?Te("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=Kd(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach(i=>UJt(i,t,n.id))}const $r=e=>(t,n,r)=>$F(e,n,t||void 0,r),x8e=$r("aggregate"),WJt=$r("axisticks"),S8e=$r("bound"),Tf=$r("collect"),eye=$r("compare"),GJt=$r("datajoin"),T8e=$r("encode"),YJt=$r("expression"),KJt=$r("facet"),XJt=$r("field"),QJt=$r("key"),JJt=$r("legendentries"),ZJt=$r("load"),eZt=$r("mark"),tZt=$r("multiextent"),nZt=$r("multivalues"),rZt=$r("overlap"),iZt=$r("params"),A8e=$r("prefacet"),sZt=$r("projection"),oZt=$r("proxy"),aZt=$r("relay"),C8e=$r("render"),uZt=$r("scale"),Bv=$r("sieve"),lZt=$r("sortitems"),I8e=$r("viewlayout"),cZt=$r("values");let fZt=0;const O8e={min:"min",max:"max",count:"sum"};function dZt(e,t){const n=e.type||"linear";k6e(n)||Te("Unrecognized scale type: "+Xe(n)),t.addScale(e.name,{type:n,domain:void 0})}function hZt(e,t){const n=t.getScale(e.name).params;let r;n.domain=P8e(e.domain,e,t),e.range!=null&&(n.range=$8e(e,t,n)),e.interpolate!=null&&xZt(e.interpolate,n),e.nice!=null&&(n.nice=EZt(e.nice,t)),e.bins!=null&&(n.bins=wZt(e.bins,t));for(r in e)Nt(n,r)||r==="name"||(n[r]=Hl(e[r],t))}function Hl(e,t){return st(e)?e.signal?t.signalRef(e.signal):Te("Unsupported object: "+Xe(e)):e}function D$(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>Hl(n,t))}function NF(e){Te("Can not find data set: "+Xe(e))}function P8e(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&Te("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(Ie(e)?pZt:e.fields?gZt:mZt)(e,t,n)}function pZt(e,t,n){return e.map(r=>Hl(r,n))}function mZt(e,t,n){const r=n.getData(e.data);return r||NF(e.data),zw(t.type)?r.valuesRef(n,e.field,k8e(e.sort,!1)):N6e(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function gZt(e,t,n){const r=e.data,i=e.fields.reduce((s,o)=>(o=rt(o)?{data:r,field:o}:Ie(o)||o.signal?yZt(o,n):o,s.push(o),s),[]);return(zw(t.type)?vZt:N6e(t.type)?_Zt:bZt)(e,n,i)}function yZt(e,t){const n="_:vega:_"+fZt++,r=Tf({});if(Ie(e))r.value={$ingest:e};else if(e.signal){const i="setdata("+Xe(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,Bv({})]),{data:n,field:"data"}}function vZt(e,t,n){const r=k8e(e.sort,!0);let i,s;const o=n.map(l=>{const c=t.getData(l.data);return c||NF(l.data),c.countsRef(t,l.field,r)}),a={groupby:iq,pulse:o};r&&(i=r.op||"count",s=r.field?RF(i,r.field):"count",a.ops=[O8e[i]],a.fields=[t.fieldRef(s)],a.as=[s]),i=t.add(x8e(a));const u=t.add(Tf({pulse:Pt(i)}));return s=t.add(cZt({field:iq,sort:t.sortRef(r),pulse:Pt(u)})),Pt(s)}function k8e(e,t){return e&&(!e.field&&!e.op?st(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?Te("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!O8e[e.op]&&Te("Multiple domain scales can not be sorted using "+e.op)),e}function _Zt(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||NF(i.data),s.domainRef(t,i.field)});return Pt(t.add(nZt({values:r})))}function bZt(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||NF(i.data),s.extentRef(t,i.field)});return Pt(t.add(tZt({extents:r})))}function wZt(e,t){return e.signal||Ie(e)?D$(e,t):t.objectProperty(e)}function EZt(e,t){return e.signal?t.signalRef(e.signal):st(e)?{interval:Hl(e.interval),step:Hl(e.step)}:Hl(e)}function xZt(e,t){t.interpolate=Hl(e.type||e),e.gamma!=null&&(t.interpolateGamma=Hl(e.gamma))}function $8e(e,t,n){const r=t.config.range;let i=e.range;if(i.signal)return t.signalRef(i.signal);if(rt(i)){if(r&&Nt(r,i))return e=hn({},e,{range:r[i]}),$8e(e,t,n);i==="width"?i=[0,{signal:"width"}]:i==="height"?i=zw(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:Te("Unrecognized scale range value: "+Xe(i))}else if(i.scheme){n.scheme=Ie(i.scheme)?D$(i.scheme,t):Hl(i.scheme,t),i.extent&&(n.schemeExtent=D$(i.extent,t)),i.count&&(n.schemeCount=Hl(i.count,t));return}else if(i.step){n.rangeStep=Hl(i.step,t);return}else{if(zw(e.type)&&!Ie(i))return P8e(i,e,t);Ie(i)||Te("Unsupported range type: "+Xe(i))}return i.map(s=>(Ie(s)?D$:Hl)(s,t))}function SZt(e,t){const n=t.config.projection||{},r={};for(const i in e)i!=="name"&&(r[i]=oq(e[i],i,t));for(const i in n)r[i]==null&&(r[i]=oq(n[i],i,t));t.addProjection(e.name,r)}function oq(e,t,n){return Ie(e)?e.map(r=>oq(r,t,n)):st(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:Te("Unsupported parameter object: "+Xe(e)):e}const Af="top",ox="left",ax="right",u0="bottom",R8e="center",TZt="vertical",AZt="start",CZt="middle",IZt="end",aq="index",Hee="label",OZt="offset",Yw="perc",PZt="perc2",Yl="value",jI="guide-label",qee="guide-title",kZt="group-title",$Zt="group-subtitle",tye="symbol",L$="gradient",uq="discrete",lq="size",RZt="shape",NZt="fill",DZt="stroke",LZt="strokeWidth",MZt="strokeDash",FZt="opacity",Wee=[lq,RZt,NZt,DZt,LZt,MZt,FZt],zI={name:1,style:1,interactive:1},Gn={value:0},Kl={value:1},DF="group",N8e="rect",Gee="rule",BZt="symbol",jv="text";function WA(e){return e.type=DF,e.interactive=e.interactive||!1,e}function Pu(e,t){const n=(r,i)=>Dc(e[r],Dc(t[r],i));return n.isVertical=r=>TZt===Dc(e.direction,t.direction||(r?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>Dc(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>Dc(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>Dc(e.columns,Dc(t.columns,+n.isVertical(!0))),n}function D8e(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function jZt(e,t,n){const r=t.config.style[n];return r&&r[e]}function LF(e,t,n){return`item.anchor === '${AZt}' ? ${e} : item.anchor === '${IZt}' ? ${t} : ${n}`}const Yee=LF(Xe(ox),Xe(ax),Xe(R8e));function zZt(e){const t=e("tickBand");let n=e("tickOffset"),r,i;return t?t.signal?(r={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},i={signal:`(${t.signal}) === 'extent'`},st(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(r=1,i=!0,n=0):(r=.5,i=!1):(r=e("bandPosition"),i=e("tickExtra")),{extra:i,band:r,offset:n}}function L8e(e,t){return t?e?st(e)?Object.assign({},e,{offset:L8e(e.offset,t)}):{value:e,offset:t}:t:e}function fl(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=sx(e.encode,t,zI)):e.interactive=!1,e}function UZt(e,t,n,r){const i=Pu(e,n),s=i.isVertical(),o=i.gradientThickness(),a=i.gradientLength();let u,l,c,f,d;s?(l=[0,1],c=[0,0],f=o,d=a):(l=[0,0],c=[1,0],f=a,d=o);const h={enter:u={opacity:Gn,x:Gn,y:Gn,width:zs(f),height:zs(d)},update:hn({},u,{opacity:Kl,fill:{gradient:t,start:l,stop:c}}),exit:{opacity:Gn}};return wo(h,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),fl({type:N8e,role:mJt,encode:h},r)}function VZt(e,t,n,r,i){const s=Pu(e,n),o=s.isVertical(),a=s.gradientThickness(),u=s.gradientLength();let l,c,f,d,h="";o?(l="y",f="y2",c="x",d="width",h="1-"):(l="x",f="x2",c="y",d="height");const p={opacity:Gn,fill:{scale:t,field:Yl}};p[l]={signal:h+"datum."+Yw,mult:u},p[c]=Gn,p[f]={signal:h+"datum."+PZt,mult:u},p[d]=zs(a);const m={enter:p,update:hn({},p,{opacity:Kl}),exit:{opacity:Gn}};return wo(m,{stroke:s("gradientStrokeColor"),strokeWidth:s("gradientStrokeWidth")},{opacity:s("gradientOpacity")}),fl({type:N8e,role:hJt,key:Yl,from:i,encode:m},r)}const HZt=`datum.${Yw}<=0?"${ox}":datum.${Yw}>=1?"${ax}":"${R8e}"`,qZt=`datum.${Yw}<=0?"${u0}":datum.${Yw}>=1?"${Af}":"${CZt}"`;function nye(e,t,n,r){const i=Pu(e,t),s=i.isVertical(),o=zs(i.gradientThickness()),a=i.gradientLength();let u=i("labelOverlap"),l,c,f,d,h="";const p={enter:l={opacity:Gn},update:c={opacity:Kl,text:{field:Hee}},exit:{opacity:Gn}};return wo(p,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:Dc(e.labelLimit,t.gradientLabelLimit)}),s?(l.align={value:"left"},l.baseline=c.baseline={signal:qZt},f="y",d="x",h="1-"):(l.align=c.align={signal:HZt},l.baseline={value:"top"},f="x",d="y"),l[f]=c[f]={signal:h+"datum."+Yw,mult:a},l[d]=c[d]=o,o.offset=Dc(e.labelOffset,t.gradientLabelOffset)||0,u=u?{separation:i("labelSeparation"),method:u,order:"datum."+aq}:void 0,fl({type:jv,role:y8e,style:jI,key:Yl,from:r,encode:p,overlap:u},n)}function WZt(e,t,n,r,i){const s=Pu(e,t),o=n.entries,a=!!(o&&o.interactive),u=o?o.name:void 0,l=s("clipHeight"),c=s("symbolOffset"),f={data:"value"},d=`(${i}) ? datum.${OZt} : datum.${lq}`,h=l?zs(l):{field:lq},p=`datum.${aq}`,m=`max(1, ${i})`;let g,y,v,_,b;h.mult=.5,g={enter:y={opacity:Gn,x:{signal:d,mult:.5,offset:c},y:h},update:v={opacity:Kl,x:y.x,y:y.y},exit:{opacity:Gn}};let E=null,w=null;e.fill||(E=t.symbolBaseFillColor,w=t.symbolBaseStrokeColor),wo(g,{fill:s("symbolFillColor",E),shape:s("symbolType"),size:s("symbolSize"),stroke:s("symbolStrokeColor",w),strokeDash:s("symbolDash"),strokeDashOffset:s("symbolDashOffset"),strokeWidth:s("symbolStrokeWidth")},{opacity:s("symbolOpacity")}),Wee.forEach(C=>{e[C]&&(v[C]=y[C]={scale:e[C],field:Yl})});const x=fl({type:BZt,role:gJt,key:Yl,from:f,clip:l?!0:void 0,encode:g},n.symbols),S=zs(c);S.offset=s("labelOffset"),g={enter:y={opacity:Gn,x:{signal:d,offset:S},y:h},update:v={opacity:Kl,text:{field:Hee},x:y.x,y:y.y},exit:{opacity:Gn}},wo(g,{align:s("labelAlign"),baseline:s("labelBaseline"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontStyle:s("labelFontStyle"),fontWeight:s("labelFontWeight"),limit:s("labelLimit")});const I=fl({type:jv,role:y8e,style:jI,key:Yl,from:f,encode:g},n.labels);return g={enter:{noBound:{value:!l},width:Gn,height:l?zs(l):Gn,opacity:Gn},exit:{opacity:Gn},update:v={opacity:Kl,row:{signal:null},column:{signal:null}}},s.isVertical(!0)?(_=`ceil(item.mark.items.length / ${m})`,v.row.signal=`${p}%${_}`,v.column.signal=`floor(${p} / ${_})`,b={field:["row",p]}):(v.row.signal=`floor(${p} / ${m})`,v.column.signal=`${p} % ${m}`,b={field:p}),v.column.signal=`(${i})?${v.column.signal}:${p}`,r={facet:{data:r,name:"value",groupby:aq}},WA({role:zee,from:r,encode:sx(g,o,zI),marks:[x,I],name:u,interactive:a,sort:b})}function GZt(e,t){const n=Pu(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const Kee='item.orient === "left"',Xee='item.orient === "right"',MF=`(${Kee} || ${Xee})`,YZt=`datum.vgrad && ${MF}`,KZt=LF('"top"','"bottom"','"middle"'),XZt=LF('"right"','"left"','"center"'),QZt=`datum.vgrad && ${Xee} ? (${XZt}) : (${MF} && !(datum.vgrad && ${Kee})) ? "left" : ${Yee}`,JZt=`item._anchor || (${MF} ? "middle" : "start")`,ZZt=`${YZt} ? (${Kee} ? -90 : 90) : 0`,een=`${MF} ? (datum.vgrad ? (${Xee} ? "bottom" : "top") : ${KZt}) : "top"`;function ten(e,t,n,r){const i=Pu(e,t),s={enter:{opacity:Gn},update:{opacity:Kl,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:Gn}};return wo(s,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:JZt},angle:{signal:ZZt},align:{signal:QZt},baseline:{signal:een},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),fl({type:jv,role:yJt,style:qee,from:r,encode:s},n)}function nen(e,t){let n;return st(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+rye(e.path)+")":e.sphere&&(n="geoShape("+rye(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function rye(e){return st(e)&&e.signal?e.signal:Xe(e)}function M8e(e){const t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===DF?zee:t||Bee}function ren(e){return{marktype:e.type,name:e.name||void 0,role:e.role||M8e(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function ien(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function Qee(e,t){const n=FMe(e.type);n||Te("Unrecognized transform type: "+Xe(e.type));const r=$F(n.type.toLowerCase(),null,F8e(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function F8e(e,t,n){const r={},i=e.params.length;for(let s=0;s<i;++s){const o=e.params[s];r[o.name]=sen(o,t,n)}return r}function sen(e,t,n){const r=e.type,i=t[e.name];if(r==="index")return oen(e,t,n);if(i===void 0){e.required&&Te("Missing required "+Xe(t.type)+" parameter: "+Xe(e.name));return}else{if(r==="param")return aen(e,t,n);if(r==="projection")return n.projectionRef(t[e.name])}return e.array&&!ws(i)?i.map(s=>iye(e,s,n)):iye(e,i,n)}function iye(e,t,n){const r=e.type;if(ws(t))return oye(r)?Te("Expression references can not be signals."):Lj(r)?n.fieldRef(t):aye(r)?n.compareRef(t):n.signalRef(t.signal);{const i=e.expr||Lj(r);return i&&uen(t)?n.exprRef(t.expr,t.as):i&&len(t)?HA(t.field,t.as):oye(r)?Kd(t,n):cen(r)?Pt(n.getData(t).values):Lj(r)?HA(t):aye(r)?n.compareRef(t):t}}function oen(e,t,n){return rt(t.from)||Te('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function aen(e,t,n){const r=t[e.name];return e.array?(Ie(r)||Te("Expected an array of sub-parameters. Instead: "+Xe(r)),r.map(i=>sye(e,i,n))):sye(e,r,n)}function sye(e,t,n){const r=e.params.length;let i;for(let o=0;o<r;++o){i=e.params[o];for(const a in i.key)if(i.key[a]!==t[a]){i=null;break}if(i)break}i||Te("Unsupported parameter: "+Xe(t));const s=hn(F8e(i,t,n),i.key);return Pt(n.add(iZt(s)))}const uen=e=>e&&e.expr,len=e=>e&&e.field,cen=e=>e==="data",oye=e=>e==="expr",Lj=e=>e==="field",aye=e=>e==="compare";function fen(e,t,n){let r,i,s,o,a;return e?(r=e.facet)&&(t||Te("Only group marks can be faceted."),r.field!=null?o=a=M$(r,n):(e.data?a=Pt(n.getData(e.data).aggregate):(s=Qee(hn({type:"aggregate",groupby:nt(r.groupby)},r.aggregate),n),s.params.key=n.keyRef(r.groupby),s.params.pulse=M$(r,n),o=a=Pt(n.add(s))),i=n.keyRef(r.groupby,!0))):o=Pt(n.add(Tf(null,[{}]))),o||(o=M$(e,n)),{key:i,pulse:o,parent:a}}function M$(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:Pt(t.getData(e.data).output)}function X1(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}X1.fromEntries=function(e,t){const n=t.length,r=t[n-1],i=t[n-2];let s=t[0],o=null,a=1;for(s&&s.type==="load"&&(s=t[1]),e.add(t[0]);a<n;++a)t[a].params.pulse=Pt(t[a-1]),e.add(t[a]),t[a].type==="aggregate"&&(o=t[a]);return new X1(e,s,i,r,o)};function B8e(e){return rt(e)?e:null}function uye(e,t,n){const r=RF(n.op,n.field);let i;if(t.ops){for(let s=0,o=t.as.length;s<o;++s)if(t.as[s]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function ES(e,t,n,r,i,s,o){const a=t[n]||(t[n]={}),u=NJt(s);let l=B8e(i),c,f;if(l!=null&&(e=t.scope,l=l+(u?"|"+u:""),c=a[l]),!c){const d=s?{field:iq,pulse:t.countsRef(e,i,s)}:{field:e.fieldRef(i),pulse:Pt(t.output)};u&&(d.sort=e.sortRef(s)),f=e.add($F(r,void 0,d)),o&&(t.index[i]=f),c=Pt(f),l!=null&&(a[l]=c)}return c}X1.prototype={countsRef(e,t,n){const r=this,i=r.counts||(r.counts={}),s=B8e(t);let o,a,u;return s!=null&&(e=r.scope,o=i[s]),o?n&&n.field&&uye(e,o.agg.params,n):(u={groupby:e.fieldRef(t,"key"),pulse:Pt(r.output)},n&&n.field&&uye(e,u,n),a=e.add(x8e(u)),o=e.add(Tf({pulse:Pt(a)})),o={agg:a,ref:Pt(o)},s!=null&&(i[s]=o)),o.ref},tuplesRef(){return Pt(this.values)},extentRef(e,t){return ES(e,this,"extent","extent",t,!1)},domainRef(e,t){return ES(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return ES(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return ES(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return ES(e,this,"indata","tupleindex",t,!0,!0)}};function den(e,t,n){const r=e.from.facet,i=r.name,s=M$(r,t);let o;r.name||Te("Facet must have a name: "+Xe(r)),r.data||Te("Facet must reference a data set: "+Xe(r)),r.field?o=t.add(A8e({field:t.fieldRef(r.field),pulse:s})):r.groupby?o=t.add(KJt({key:t.keyRef(r.groupby),group:Pt(t.proxy(n.parent)),pulse:s})):Te("Facet must specify groupby or field: "+Xe(r));const a=t.fork(),u=a.add(Tf()),l=a.add(Bv({pulse:Pt(u)}));a.addData(i,new X1(a,u,u,l)),a.addSignal("parent",null),o.params.subflow={$subflow:a.parse(e).toRuntime()}}function hen(e,t,n){const r=t.add(A8e({pulse:n.pulse})),i=t.fork();i.add(Bv()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}function j8e(e,t,n){const r=e.remove,i=e.insert,s=e.toggle,o=e.modify,a=e.values,u=t.add(RL()),l="if("+e.trigger+',modify("'+n+'",'+[i,r,s,o,a].map(f=>f??"null").join(",")+"),0)",c=Kd(l,t);u.update=c.$expr,u.params=c.$params}function FF(e,t){const n=M8e(e),r=e.type===DF,i=e.from&&e.from.facet,s=e.overlap;let o=e.layout||n===zee||n===jee,a,u,l,c,f,d,h;const p=n===Bee||o||i,m=fen(e.from,r,t);u=t.add(GJt({key:m.key||(e.key?HA(e.key):void 0),pulse:m.pulse,clean:!r}));const g=Pt(u);u=l=t.add(Tf({pulse:g})),u=t.add(eZt({markdef:ren(e),interactive:ien(e.interactive,t),clip:nen(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:Pt(u)}));const y=Pt(u);u=c=t.add(T8e(w8e(e.encode,e.type,n,e.style,t,{mod:!1,pulse:y}))),u.params.parent=t.encode(),e.transform&&e.transform.forEach(w=>{const x=Qee(w,t),S=x.metadata;(S.generates||S.changes)&&Te("Mark transforms should not generate new data."),S.nomod||(c.params.mod=!0),x.params.pulse=Pt(u),t.add(u=x)}),e.sort&&(u=t.add(lZt({sort:t.compareRef(e.sort),pulse:Pt(u)})));const v=Pt(u);(i||o)&&(o=t.add(I8e({layout:t.objectProperty(e.layout),legends:t.legends,mark:y,pulse:v})),d=Pt(o));const _=t.add(S8e({mark:y,pulse:d||v}));h=Pt(_),r&&(p&&(a=t.operators,a.pop(),o&&a.pop()),t.pushState(v,d||h,g),i?den(e,t,m):p?hen(e,t,m):t.parse(e),t.popState(),p&&(o&&a.push(o),a.push(_))),s&&(h=pen(s,h,t));const b=t.add(C8e({pulse:h})),E=t.add(Bv({pulse:Pt(b)},void 0,t.parent()));e.name!=null&&(f=e.name,t.addData(f,new X1(t,l,b,E)),e.on&&e.on.forEach(w=>{(w.insert||w.remove||w.toggle)&&Te("Marks only support modify triggers."),j8e(w,t,f)}))}function pen(e,t,n){const r=e.method,i=e.bound,s=e.separation,o={separation:ws(s)?n.signalRef(s.signal):s,method:ws(r)?n.signalRef(r.signal):r,pulse:t};if(e.order&&(o.sort=n.compareRef({field:e.order})),i){const a=i.tolerance;o.boundTolerance=ws(a)?n.signalRef(a.signal):+a,o.boundScale=n.scaleRef(i.scale),o.boundOrient=i.orient}return Pt(n.add(rZt(o)))}function men(e,t){const n=t.config.legend,r=e.encode||{},i=Pu(e,n),s=r.legend||{},o=s.name||void 0,a=s.interactive,u=s.style,l={};let c=0,f,d,h;Wee.forEach(_=>e[_]?(l[_]=e[_],c=c||e[_]):0),c||Te("Missing valid scale for legend.");const p=gen(e,t.scaleType(c)),m={title:e.title!=null,scales:l,type:p,vgrad:p!=="symbol"&&i.isVertical()},g=Pt(t.add(Tf(null,[m]))),y={enter:{x:{value:0},y:{value:0}}},v=Pt(t.add(JJt(d={type:p,scale:t.scaleRef(c),count:t.objectProperty(i("tickCount")),limit:t.property(i("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return p===L$?(h=[UZt(e,c,n,r.gradient),nye(e,n,r.labels,v)],d.count=d.count||t.signalRef(`max(2,2*floor((${g1(i.gradientLength())})/100))`)):p===uq?h=[VZt(e,c,n,r.gradient,v),nye(e,n,r.labels,v)]:(f=GZt(e,n),h=[WZt(e,n,r,v,g1(f.columns))],d.size=_en(e,t,h[0].marks)),h=[WA({role:pJt,from:g,encode:y,marks:h,layout:f,interactive:a})],m.title&&h.push(ten(e,n,r.title,g)),FF(WA({role:dJt,from:g,encode:sx(ven(i,e,n),s,zI),marks:h,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:o,interactive:a,style:u}),t)}function gen(e,t){let n=e.type||tye;return!e.type&&yen(e)===1&&(e.fill||e.stroke)&&(n=QJ(t)?L$:tH(t)?uq:tye),n!==L$?n:tH(t)?uq:L$}function yen(e){return Wee.reduce((t,n)=>t+(e[n]?1:0),0)}function ven(e,t,n){const r={enter:{},update:{}};return wo(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function _en(e,t,n){const r=g1(lye("size",e,n)),i=g1(lye("strokeWidth",e,n)),s=g1(ben(n[1].encode,t,jI));return Kd(`max(ceil(sqrt(${r})+${i}),${s})`,t)}function lye(e,t,n){return t[e]?`scale("${t[e]}",datum)`:D8e(e,n[0].encode)}function ben(e,t,n){return D8e("fontSize",e)||jZt("fontSize",t,n)}const wen=`item.orient==="${ox}"?-90:item.orient==="${ax}"?90:0`;function Een(e,t){e=rt(e)?{text:e}:e;const n=Pu(e,t.config.title),r=e.encode||{},i=r.group||{},s=i.name||void 0,o=i.interactive,a=i.style,u=[],l={},c=Pt(t.add(Tf(null,[l])));return u.push(Ten(e,n,xen(e),c)),e.subtitle&&u.push(Aen(e,n,r.subtitle,c)),FF(WA({role:vJt,from:c,encode:Sen(n,i),marks:u,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:s,interactive:o,style:a}),t)}function xen(e){const t=e.encode;return t&&t.title||hn({name:e.name,interactive:e.interactive,style:e.style},t)}function Sen(e,t){const n={enter:{},update:{}};return wo(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:Yee},angle:{signal:wen},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),sx(n,t,zI)}function Ten(e,t,n,r){const i={value:0},s=e.text,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return wo(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),fl({type:jv,role:_Jt,style:kZt,from:r,encode:o},n)}function Aen(e,t,n,r){const i={value:0},s=e.subtitle,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return wo(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),fl({type:jv,role:bJt,style:$Zt,from:r,encode:o},n)}function Cen(e,t){const n=[];e.transform&&e.transform.forEach(r=>{n.push(Qee(r,t))}),e.on&&e.on.forEach(r=>{j8e(r,t,e.name)}),t.addDataPipeline(e.name,Ien(e,t,n))}function Ien(e,t,n){const r=[];let i=null,s=!1,o=!1,a,u,l,c,f;for(e.values?ws(e.values)||N$(e.format)?(r.push(cye(t,e)),r.push(i=ty())):r.push(i=ty({$ingest:e.values,$format:e.format})):e.url?N$(e.url)||N$(e.format)?(r.push(cye(t,e)),r.push(i=ty())):r.push(i=ty({$request:e.url,$format:e.format})):e.source&&(i=a=nt(e.source).map(d=>Pt(t.getData(d).output)),r.push(null)),u=0,l=n.length;u<l;++u)c=n[u],f=c.metadata,!i&&!f.source&&r.push(i=ty()),r.push(c),f.generates&&(o=!0),f.modifies&&!o&&(s=!0),f.source?i=c:f.changes&&(i=null);return a&&(l=a.length-1,r[0]=aZt({derive:s,pulse:l?a:a[0]}),(s||l)&&r.splice(1,0,ty())),i||r.push(ty()),r.push(Bv({})),r}function ty(e){const t=Tf({},e);return t.metadata={source:!0},t}function cye(e,t){return ZJt({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const z8e=e=>e===u0||e===Af,BF=(e,t,n)=>ws(e)?$en(e.signal,t,n):e===ox||e===Af?t:n,Us=(e,t,n)=>ws(e)?Pen(e.signal,t,n):z8e(e)?t:n,rf=(e,t,n)=>ws(e)?ken(e.signal,t,n):z8e(e)?n:t,U8e=(e,t,n)=>ws(e)?Ren(e.signal,t,n):e===Af?{value:t}:{value:n},Oen=(e,t,n)=>ws(e)?Nen(e.signal,t,n):e===ax?{value:t}:{value:n},Pen=(e,t,n)=>V8e(`${e} === '${Af}' || ${e} === '${u0}'`,t,n),ken=(e,t,n)=>V8e(`${e} !== '${Af}' && ${e} !== '${u0}'`,t,n),$en=(e,t,n)=>Jee(`${e} === '${ox}' || ${e} === '${Af}'`,t,n),Ren=(e,t,n)=>Jee(`${e} === '${Af}'`,t,n),Nen=(e,t,n)=>Jee(`${e} === '${ax}'`,t,n),V8e=(e,t,n)=>(t=t!=null?zs(t):t,n=n!=null?zs(n):n,fye(t)&&fye(n)?(t=t?t.signal||Xe(t.value):null,n=n?n.signal||Xe(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[hn({test:e},t)].concat(n||[])),fye=e=>e==null||Object.keys(e).length===1,Jee=(e,t,n)=>({signal:`${e} ? (${cb(t)}) : (${cb(n)})`}),Den=(e,t,n,r,i)=>({signal:(r!=null?`${e} === '${ox}' ? (${cb(r)}) : `:"")+(n!=null?`${e} === '${u0}' ? (${cb(n)}) : `:"")+(i!=null?`${e} === '${ax}' ? (${cb(i)}) : `:"")+(t!=null?`${e} === '${Af}' ? (${cb(t)}) : `:"")+"(null)"}),cb=e=>ws(e)?e.signal:e==null?null:Xe(e),Len=(e,t)=>t===0?0:ws(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},jb=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function b_(e,t,n,r){let i;if(t&&Nt(t,e))return t[e];if(Nt(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=e[5].toLowerCase()+e.slice(6)}return r[qee][i]}else if(e.startsWith("label")){switch(e){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=e[5].toLowerCase()+e.slice(6)}return r[jI][i]}return null}function dye(e){const t={};for(const n of e)if(n)for(const r in n)t[r]=1;return Object.keys(t)}function Men(e,t){var n=t.config,r=n.style,i=n.axis,s=t.scaleType(e.scale)==="band"&&n.axisBand,o=e.orient,a,u,l;if(ws(o)){const f=dye([n.axisX,n.axisY]),d=dye([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);a={};for(l of f)a[l]=Us(o,b_(l,n.axisX,i,r),b_(l,n.axisY,i,r));u={};for(l of d)u[l]=Den(o.signal,b_(l,n.axisTop,i,r),b_(l,n.axisBottom,i,r),b_(l,n.axisLeft,i,r),b_(l,n.axisRight,i,r))}else a=o===Af||o===u0?n.axisX:n.axisY,u=n["axis"+o[0].toUpperCase()+o.slice(1)];return a||u||s?hn({},i,a,u,s):i}function Fen(e,t,n,r){const i=Pu(e,t),s=e.orient;let o,a;const u={enter:o={opacity:Gn},update:a={opacity:Kl},exit:{opacity:Gn}};wo(u,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});const l=hye(e,0),c=hye(e,1);return o.x=a.x=Us(s,l,Gn),o.x2=a.x2=Us(s,c),o.y=a.y=rf(s,l,Gn),o.y2=a.y2=rf(s,c),fl({type:Gee,role:aJt,from:r,encode:u},n)}function hye(e,t){return{scale:e.scale,range:t}}function Ben(e,t,n,r,i){const s=Pu(e,t),o=e.orient,a=e.gridScale,u=BF(o,1,-1),l=jen(e.offset,u);let c,f,d;const h={enter:c={opacity:Gn},update:d={opacity:Kl},exit:f={opacity:Gn}};wo(h,{stroke:s("gridColor"),strokeCap:s("gridCap"),strokeDash:s("gridDash"),strokeDashOffset:s("gridDashOffset"),strokeOpacity:s("gridOpacity"),strokeWidth:s("gridWidth")});const p={scale:e.scale,field:Yl,band:i.band,extra:i.extra,offset:i.offset,round:s("tickRound")},m=Us(o,{signal:"height"},{signal:"width"}),g=a?{scale:a,range:0,mult:u,offset:l}:{value:0,offset:l},y=a?{scale:a,range:1,mult:u,offset:l}:hn(m,{mult:u,offset:l});return c.x=d.x=Us(o,p,g),c.y=d.y=rf(o,p,g),c.x2=d.x2=rf(o,y),c.y2=d.y2=Us(o,y),f.x=Us(o,p),f.y=rf(o,p),fl({type:Gee,role:uJt,key:Yl,from:r,encode:h},n)}function jen(e,t){if(t!==1)if(!st(e))e=ws(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=hn({},e);for(;n.mult!=null;)if(st(n.mult))n=n.mult=hn({},n.mult);else return n.mult=ws(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function zen(e,t,n,r,i,s){const o=Pu(e,t),a=e.orient,u=BF(a,-1,1);let l,c,f;const d={enter:l={opacity:Gn},update:f={opacity:Kl},exit:c={opacity:Gn}};wo(d,{stroke:o("tickColor"),strokeCap:o("tickCap"),strokeDash:o("tickDash"),strokeDashOffset:o("tickDashOffset"),strokeOpacity:o("tickOpacity"),strokeWidth:o("tickWidth")});const h=zs(i);h.mult=u;const p={scale:e.scale,field:Yl,band:s.band,extra:s.extra,offset:s.offset,round:o("tickRound")};return f.y=l.y=Us(a,Gn,p),f.y2=l.y2=Us(a,h),c.x=Us(a,p),f.x=l.x=rf(a,Gn,p),f.x2=l.x2=rf(a,h),c.y=rf(a,p),fl({type:Gee,role:cJt,key:Yl,from:r,encode:d},n)}function Mj(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function Uen(e,t,n,r,i,s){const o=Pu(e,t),a=e.orient,u=e.scale,l=BF(a,-1,1),c=g1(o("labelFlush")),f=g1(o("labelFlushOffset")),d=o("labelAlign"),h=o("labelBaseline");let p=c===0||!!c,m;const g=zs(i);g.mult=l,g.offset=zs(o("labelPadding")||0),g.offset.mult=l;const y={scale:u,field:Yl,band:.5,offset:L8e(s.offset,o("labelOffset"))},v=Us(a,p?Mj(u,c,'"left"','"right"','"center"'):{value:"center"},Oen(a,"left","right")),_=Us(a,U8e(a,"bottom","top"),p?Mj(u,c,'"top"','"bottom"','"middle"'):{value:"middle"}),b=Mj(u,c,`-(${f})`,f,0);p=p&&f;const E={opacity:Gn,x:Us(a,y,g),y:rf(a,y,g)},w={enter:E,update:m={opacity:Kl,text:{field:Hee},x:E.x,y:E.y,align:v,baseline:_},exit:{opacity:Gn,x:E.x,y:E.y}};wo(w,{dx:!d&&p?Us(a,b):null,dy:!h&&p?rf(a,b):null}),wo(w,{angle:o("labelAngle"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontWeight:o("labelFontWeight"),fontStyle:o("labelFontStyle"),limit:o("labelLimit"),lineHeight:o("labelLineHeight")},{align:d,baseline:h});const x=o("labelBound");let S=o("labelOverlap");return S=S||x?{separation:o("labelSeparation"),method:S,order:"datum.index",bound:x?{scale:u,orient:a,tolerance:x}:null}:void 0,m.align!==v&&(m.align=jb(m.align,v)),m.baseline!==_&&(m.baseline=jb(m.baseline,_)),fl({type:jv,role:lJt,style:jI,key:Yl,from:r,encode:w,overlap:S},n)}function Ven(e,t,n,r){const i=Pu(e,t),s=e.orient,o=BF(s,-1,1);let a,u;const l={enter:a={opacity:Gn,anchor:zs(i("titleAnchor",null)),align:{signal:Yee}},update:u=hn({},a,{opacity:Kl,text:zs(e.title)}),exit:{opacity:Gn}},c={signal:`lerp(range("${e.scale}"), ${LF(0,1,.5)})`};return u.x=Us(s,c),u.y=rf(s,c),a.angle=Us(s,Gn,Len(o,90)),a.baseline=Us(s,U8e(s,u0,Af),{value:u0}),u.angle=a.angle,u.baseline=a.baseline,wo(l,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),Hen(i,s,l,n),l.update.align=jb(l.update.align,a.align),l.update.angle=jb(l.update.angle,a.angle),l.update.baseline=jb(l.update.baseline,a.baseline),fl({type:jv,role:fJt,style:qee,from:r,encode:l},n)}function Hen(e,t,n,r){const i=(a,u)=>a!=null?(n.update[u]=jb(zs(a),n.update[u]),!1):!D_(u,r),s=i(e("titleX"),"x"),o=i(e("titleY"),"y");n.enter.auto=o===s?zs(o):Us(t,zs(o),zs(s))}function qen(e,t){const n=Men(e,t),r=e.encode||{},i=r.axis||{},s=i.name||void 0,o=i.interactive,a=i.style,u=Pu(e,n),l=zZt(u),c={scale:e.scale,ticks:!!u("ticks"),labels:!!u("labels"),grid:!!u("grid"),domain:!!u("domain"),title:e.title!=null},f=Pt(t.add(Tf({},[c]))),d=Pt(t.add(WJt({scale:t.scaleRef(e.scale),extra:t.property(l.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),h=[];let p;return c.grid&&h.push(Ben(e,n,r.grid,d,l)),c.ticks&&(p=u("tickSize"),h.push(zen(e,n,r.ticks,d,p,l))),c.labels&&(p=c.ticks?p:0,h.push(Uen(e,n,r.labels,d,p,l))),c.domain&&h.push(Fen(e,n,r.domain,f)),c.title&&h.push(Ven(e,n,r.title,f)),FF(WA({role:oJt,from:f,encode:sx(Wen(u,e),i,zI),marks:h,aria:u("aria"),description:u("description"),zindex:u("zindex"),name:s,interactive:o,style:a}),t)}function Wen(e,t){const n={enter:{},update:{}};return wo(n,{orient:e("orient"),offset:e("offset")||0,position:Dc(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function H8e(e,t,n){const r=nt(e.signals),i=nt(e.scales);return n||r.forEach(s=>E8e(s,t)),nt(e.projections).forEach(s=>SZt(s,t)),i.forEach(s=>dZt(s,t)),nt(e.data).forEach(s=>Cen(s,t)),i.forEach(s=>hZt(s,t)),(n||r).forEach(s=>qJt(s,t)),nt(e.axes).forEach(s=>qen(s,t)),nt(e.marks).forEach(s=>FF(s,t)),nt(e.legends).forEach(s=>men(s,t)),e.title&&Een(e.title,t),t.parseLambdas(),t}const Gen=e=>sx({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function Yen(e,t){const n=t.config,r=Pt(t.root=t.add(RL())),i=Ken(e,n);i.forEach(l=>E8e(l,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const s=t.add(Tf()),o=t.add(T8e(w8e(Gen(e.encode),DF,jee,e.style,t,{pulse:Pt(s)}))),a=t.add(I8e({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:Pt(o)}));t.operators.pop(),t.pushState(Pt(o),Pt(a),null),H8e(e,t,i),t.operators.push(a);let u=t.add(S8e({mark:r,pulse:Pt(a)}));return u=t.add(C8e({pulse:Pt(u)})),u=t.add(Bv({pulse:Pt(u)})),t.addData("root",new X1(t,s,s,u)),t}function xS(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function Ken(e,t){const n=o=>Dc(e[o],t[o]),r=[xS("background",n("background")),xS("autosize",rJt(n("autosize"))),xS("padding",sJt(n("padding"))),xS("width",n("width")||0),xS("height",n("height")||0)],i=r.reduce((o,a)=>(o[a.name]=a,o),{}),s={};return nt(e.signals).forEach(o=>{Nt(i,o.name)?o=hn(i[o.name],o):r.push(o),s[o.name]=o}),nt(t.signals).forEach(o=>{!Nt(s,o.name)&&!Nt(i,o.name)&&r.push(o)}),r}function q8e(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function pye(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}q8e.prototype=pye.prototype={parse(e){return H8e(e,this)},fork(){return new pye(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof rq?Pt(e):e;return this.add(oZt({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(r,i,s){let o,a;r&&(o=r.data||(r.data={}),a=o[i]||(o[i]=[]),a.push(s))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState(e,t,n){this._encode.push(Pt(this.add(Bv({pulse:e})))),this._parent.push(t),this._lookup.push(n?Pt(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return Un(this._parent)},encode(){return Un(this._encode)},lookup(){return Un(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(rt(e))return HA(e,t);e.signal||Te("Unsupported field reference: "+Xe(e));const n=e.signal;let r=this.field[n];if(!r){const i={name:this.signalRef(n)};t&&(i.as=t),this.field[n]=r=Pt(this.add(XJt(i)))}return r},compareRef(e){let t=!1;const n=s=>ws(s)?(t=!0,this.signalRef(s.signal)):DJt(s)?(t=!0,this.exprRef(s.expr)):s,r=nt(e.field).map(n),i=nt(e.order).map(n);return t?Pt(this.add(eye({fields:r,orders:i}))):J0e(r,i)},keyRef(e,t){let n=!1;const r=s=>ws(s)?(n=!0,Pt(i[s.signal])):s,i=this.signals;return e=nt(e).map(r),n?Pt(this.add(QJt({fields:e,flat:t}))):kJt(e,t)},sortRef(e){if(!e)return e;const t=RF(e.op,e.field),n=e.order||$Jt;return n.signal?Pt(this.add(eye({fields:t,orders:this.signalRef(n.signal)}))):J0e(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal(e){return Nt(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&Te("Duplicate signal name: "+Xe(e));const n=t instanceof rq?t:this.add(RL(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||Te("Unrecognized signal name: "+Xe(e)),this.signals[e]},signalRef(e){return this.signals[e]?Pt(this.signals[e]):(Nt(this.lambdas,e)||(this.lambdas[e]=this.add(RL(null))),Pt(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const r=e[t],i=Kd(r,this),s=this.lambdas[r];s.params=i.$params,s.update=i.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!st(e)?e:this.signalRef(e.signal||Zee(e))},exprRef(e,t){const n={expr:Kd(e,this)};return t&&(n.expr.$name=t),Pt(this.add(YJt(n)))},addBinding(e,t){this.bindings||Te("Nested signals do not support binding: "+Xe(e)),this.bindings.push(hn({signal:e},t))},addScaleProj(e,t){Nt(this.scales,e)&&Te("Duplicate scale or projection name: "+Xe(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,uZt(t))},addProjection(e,t){this.addScaleProj(e,sZt(t))},getScale(e){return this.scales[e]||Te("Unrecognized scale name: "+Xe(e)),this.scales[e]},scaleRef(e){return Pt(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return Nt(this.data,e)&&Te("Duplicate data set name: "+Xe(e)),this.data[e]=t},getData(e){return this.data[e]||Te("Undefined data set name: "+Xe(e)),this.data[e]},addDataPipeline(e,t){return Nt(this.data,e)&&Te("Duplicate data set name: "+Xe(e)),this.addData(e,X1.fromEntries(this,t))}};function Zee(e){return(Ie(e)?Xen:Qen)(e)}function Xen(e){const t=e.length;let n="[";for(let r=0;r<t;++r){const i=e[r];n+=(r>0?",":"")+(st(i)?i.signal||Zee(i):Xe(i))}return n+"]"}function Qen(e){let t="{",n=0,r,i;for(r in e)i=e[r],t+=(++n>1?",":"")+Xe(r)+":"+(st(i)?i.signal||Zee(i):Xe(i));return t+"}"}function Jen(){const e="sans-serif",r="#4c78a8",i="#000",s="#888",o="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:r},area:{fill:r},image:null,line:{stroke:r,strokeWidth:2},path:{stroke:r},rect:{fill:r},rule:{stroke:i},shape:{stroke:r},symbol:{fill:r,size:64},text:{fill:i,font:e,fontSize:11},trail:{fill:r,size:2},style:{"guide-label":{fill:i,font:e,fontSize:10},"guide-title":{fill:i,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:o},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:s,grid:!1,gridWidth:1,gridColor:o,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:s,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:o,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:s,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function Zen(e,t,n){return st(e)||Te("Input Vega specification must be an object."),t=XE(Jen(),t,e.config),Yen(e,new q8e(t,n)).toRuntime()}var etn="5.28.0";hn(Fw,L7t,SHt,nqt,UWt,KWt,EGt,tGt,SGt,LGt,WGt,ZGt);const ttn=Object.freeze(Object.defineProperty({__proto__:null,Bounds:os,CanvasHandler:o0,CanvasRenderer:DA,DATE:bu,DAY:Vo,DAYOFYEAR:Gd,Dataflow:Fb,Debug:TLe,Error:LQ,EventStream:Q4,Gradient:K6e,GroupItem:cF,HOURS:ul,Handler:s0,HybridHandler:kZ,HybridRenderer:Z3,Info:SLe,Item:lF,MILLISECONDS:ff,MINUTES:ll,MONTH:Yo,Marks:cl,MultiPulse:nJ,None:xLe,Operator:Dr,Parameters:X4,Pulse:Ig,QUARTER:_u,RenderType:ng,Renderer:bl,ResourceLoader:oZ,SECONDS:rc,SVGHandler:SZ,SVGRenderer:vF,SVGStringRenderer:PZ,Scenegraph:EZ,TIME_UNITS:YQ,Transform:Ee,View:l8e,WEEK:ys,Warn:MQ,YEAR:go,accessor:Ou,accessorFields:Go,accessorName:Ni,array:nt,ascending:H4,bandwidthNRD:oJ,bin:zMe,bootstrapCI:UMe,boundClip:W4e,boundContext:PI,boundItem:aH,boundMark:p4e,boundStroke:tm,changeset:Lv,clampRange:LLe,codegenExpression:L5e,compare:UQ,constant:na,cumulativeLogNormal:dJ,cumulativeNormal:Z4,cumulativeUniform:gJ,dayofyear:tMe,debounce:VQ,defaultLocale:QQ,definition:FMe,densityLogNormal:fJ,densityNormal:aJ,densityUniform:mJ,domChild:ms,domClear:Ll,domCreate:eg,domFind:xZ,dotbin:VMe,error:Te,expressionFunction:Gi,extend:hn,extent:Wd,extentIndex:MLe,falsy:Em,fastmap:JE,field:tc,flush:FLe,font:mF,fontFamily:RI,fontSize:ah,format:v$,formatLocale:B3,formats:eJ,hasOwnProperty:Nt,id:yI,identity:ta,inferType:CMe,inferTypes:IMe,ingest:dr,inherits:We,inrange:sb,interpolate:JJ,interpolateColors:aF,interpolateRange:D6e,intersect:U4e,intersectBoxLine:ob,intersectPath:aZ,intersectPoint:uZ,intersectRule:r4e,isArray:Ie,isBoolean:L0,isDate:Ag,isFunction:pn,isIterable:BLe,isNumber:Jn,isObject:st,isRegExp:jLe,isString:rt,isTuple:Y4,key:HQ,lerp:zLe,lineHeight:r0,loader:W4,locale:TMe,logger:FQ,lruCache:ULe,markup:OZ,merge:VLe,mergeConfig:XE,multiLineOffset:_Z,one:KE,pad:HLe,panLinear:PLe,panLog:kLe,panPow:$Le,panSymlog:RLe,parse:Zen,parseExpression:Aee,parseSelector:F0,path:G6,pathCurves:rZ,pathEqual:G4e,pathParse:Uw,pathRectangle:J6e,pathRender:kA,pathSymbols:Q6e,pathTrail:Z6e,peek:Un,point:yF,projection:XZ,quantileLogNormal:hJ,quantileNormal:eF,quantileUniform:yJ,quantiles:iJ,quantizeInterpolator:L6e,quarter:NLe,quartiles:sJ,get random(){return ic},randomInteger:jjt,randomKDE:lJ,randomLCG:Bjt,randomLogNormal:qMe,randomMixture:WMe,randomNormal:uJ,randomUniform:GMe,read:kMe,regressionConstant:vJ,regressionExp:KMe,regressionLinear:_J,regressionLoess:JMe,regressionLog:YMe,regressionPoly:QMe,regressionPow:XMe,regressionQuad:bJ,renderModule:_F,repeat:eT,resetDefaultLocale:LBt,resetSVGClipId:t4e,resetSVGDefIds:UVt,responseType:PMe,runtimeContext:X5e,sampleCurve:nF,sampleLogNormal:cJ,sampleNormal:J4,sampleUniform:pJ,scale:or,sceneEqual:$Z,sceneFromJSON:g4e,scenePickVisit:H3,sceneToJSON:m4e,sceneVisit:df,sceneZOrder:lZ,scheme:ZJ,serializeXML:R4e,setHybridRendererOptions:FVt,setRandom:Mjt,span:vI,splitAccessPath:oh,stringValue:Xe,textMetrics:el,timeBin:vMe,timeFloor:uMe,timeFormatLocale:IA,timeInterval:ZE,timeOffset:fMe,timeSequence:pMe,timeUnitSpecifier:eMe,timeUnits:KQ,toBoolean:qQ,toDate:WQ,toNumber:Ho,toSet:cf,toString:GQ,transform:BMe,transforms:Fw,truncate:qLe,truthy:nc,tupleid:kt,typeParsers:JV,utcFloor:lMe,utcInterval:ex,utcOffset:dMe,utcSequence:mMe,utcdayofyear:iMe,utcquarter:DLe,utcweek:sMe,version:etn,visitArray:Pm,week:nMe,writeConfig:QE,zero:Bm,zoomLinear:BQ,zoomLog:jQ,zoomPow:M3,zoomSymlog:zQ},Symbol.toStringTag,{value:"Module"}));function ntn(e,t,n){let r;t.x2&&(t.x?(n&&e.x>e.x2&&(r=e.x,e.x=e.x2,e.x2=r),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(r=e.y,e.y=e.y2,e.y2=r),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var rtn={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},itn={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},stn={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const otn=Array.prototype.slice,ny=(e,t,n)=>{const r=n?n(t[0]):t[0];return r[e].apply(r,otn.call(t,1))},atn=(e,t,n,r,i,s,o)=>new Date(e,t||0,n??1,r||0,i||0,s||0,o||0);var utn={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:atn,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return ny("join",arguments)},indexof:function(){return ny("indexOf",arguments)},lastindexof:function(){return ny("lastIndexOf",arguments)},slice:function(){return ny("slice",arguments)},reverse:e=>e.slice().reverse(),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return ny("substring",arguments,String)},split:function(){return ny("split",arguments,String)},replace:function(){return ny("replace",arguments,String)},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const ltn=["view","item","group","xy","x","y"],cq=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&cq.add(setImmediate);const ctn={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:rtn[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,r=e(t.object);n&&(e.memberDepth+=1);const i=e(t.property);if(n&&(e.memberDepth-=1),cq.has(r[i])){console.error(`Prevented interpretation of member "${i}" which could lead to insecure code execution`);return}return r[i]},CallExpression:(e,t)=>{const n=t.arguments;let r=t.callee.name;return r.startsWith("_")&&(r=r.slice(1)),r==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[r]||utn[r]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>itn[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>stn[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,r)=>{e.memberDepth+=1;const i=e(r.key);return e.memberDepth-=1,cq.has(e(r.value))?console.error(`Prevented interpretation of property "${i}" which could lead to insecure code execution`):n[i]=e(r.value),n},{})};function SS(e,t,n,r,i,s){const o=a=>ctn[a.type](o,a);return o.memberDepth=0,o.fn=Object.create(t),o.params=n,o.datum=r,o.event=i,o.item=s,ltn.forEach(a=>o.fn[a]=function(){return i.vega[a](...arguments)}),o(e)}var ftn={operator(e,t){const n=t.ast,r=e.functions;return i=>SS(n,r,i)},parameter(e,t){const n=t.ast,r=e.functions;return(i,s)=>SS(n,r,s,i)},event(e,t){const n=t.ast,r=e.functions;return i=>SS(n,r,void 0,void 0,i)},handler(e,t){const n=t.ast,r=e.functions;return(i,s)=>{const o=s.item&&s.item.datum;return SS(n,r,i,o,s)}},encode(e,t){const{marktype:n,channels:r}=t,i=e.functions,s=n==="group"||n==="image"||n==="rect";return(o,a)=>{const u=o.datum;let l=0,c;for(const f in r)c=SS(r[f].ast,i,a,u,void 0,o),o[f]!==c&&(o[f]=c,l=1);return n!=="rule"&&ntn(o,r,s),l}}};const dtn="vega-lite",htn='Dominik Moritz, Kanit "Ham" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer',ptn="5.17.0",mtn=["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],gtn="https://vega.github.io/vega-lite/",ytn="Vega-Lite is a concise high-level language for interactive visualization.",vtn=["vega","chart","visualization"],_tn="build/vega-lite.js",btn="build/vega-lite.min.js",wtn="build/vega-lite.min.js",Etn="build/src/index",xtn="build/src/index.d.ts",Stn={vl2pdf:"./bin/vl2pdf",vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2vg:"./bin/vl2vg"},Ttn=["bin","build","src","vega-lite*","tsconfig.json"],Atn={changelog:"conventional-changelog -p angular -r 2",prebuild:"yarn clean:build",build:"yarn build:only","build:only":"tsc -p tsconfig.build.json && rollup -c","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"rollup -c site/rollup.config.mjs","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh",clean:"yarn clean:build && del-cli 'site/data/*' 'examples/compiled/*.png' && find site/examples ! -name 'index.md' ! -name 'data' -type f -delete","clean:build":"del-cli 'build/*' !build/vega-lite-schema.json",data:"rsync -r node_modules/vega-datasets/data/* site/data",schema:"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/",renameschema:"scripts/rename-schema.sh",presite:"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh",site:"yarn site:only","site:only":"pushd site && bundle exec jekyll serve -I -l && popd",prettierbase:"prettier '**/*.{md,css,yml}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",test:"yarn jest test/ && yarn lint && yarn schema && yarn jest examples/ && yarn test:runtime","test:cover":"yarn jest --collectCoverage test/","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand test","test:runtime":"TZ=America/Los_Angeles npx jest test-runtime/ --config test-runtime/jest-config.json","test:runtime:generate":"yarn build:only && del-cli test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime",watch:"tsc -p tsconfig.build.json -w","watch:site":"yarn build:site -w","watch:test":"yarn jest --watch test/","watch:test:runtime":"TZ=America/Los_Angeles npx jest --watch test-runtime/ --config test-runtime/jest-config.json",release:"release-it"},Ctn={type:"git",url:"https://github.com/vega/vega-lite.git"},Itn="BSD-3-Clause",Otn={url:"https://github.com/vega/vega-lite/issues"},Ptn={"@babel/core":"^7.23.9","@babel/preset-env":"^7.23.9","@babel/preset-typescript":"^7.23.3","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-alias":"^5.1.0","@rollup/plugin-babel":"^6.0.4","@rollup/plugin-commonjs":"^25.0.7","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@types/d3":"^7.4.3","@types/jest":"^29.5.11","@types/pako":"^2.0.3","@typescript-eslint/eslint-plugin":"^6.20.0","@typescript-eslint/parser":"^6.20.0",ajv:"^8.12.0","ajv-formats":"^2.1.1",cheerio:"^1.0.0-rc.12","conventional-changelog-cli":"^4.1.0",d3:"^7.8.5","del-cli":"^5.1.0",eslint:"^8.56.0","eslint-config-prettier":"^9.1.0","eslint-plugin-jest":"^27.6.3","eslint-plugin-prettier":"^5.1.3","fast-json-stable-stringify":"~2.1.0","highlight.js":"^11.9.0",jest:"^29.7.0","jest-dev-server":"^9.0.2",mkdirp:"^3.0.1",pako:"^2.1.0",prettier:"^3.2.4",puppeteer:"^15.0.0","release-it":"^17.0.3",rollup:"^4.9.6","rollup-plugin-bundle-size":"^1.0.3",serve:"^14.2.1",terser:"^5.27.0","ts-jest":"^29.1.2","ts-json-schema-generator":"^1.5.0",typescript:"~5.3.3","vega-cli":"^5.27.0","vega-datasets":"^2.8.0","vega-embed":"^6.24.0","vega-tooltip":"^0.34.0","yaml-front-matter":"^4.1.1"},ktn={"json-stringify-pretty-compact":"~3.0.0",tslib:"~2.6.2","vega-event-selector":"~3.0.1","vega-expression":"~5.1.0","vega-util":"~1.17.2",yargs:"~17.7.2"},$tn={vega:"^5.24.0"},Rtn={node:">=18"},Ntn={name:dtn,author:htn,version:ptn,collaborators:mtn,homepage:gtn,description:ytn,keywords:vtn,main:_tn,unpkg:btn,jsdelivr:wtn,module:Etn,types:xtn,bin:Stn,files:Ttn,scripts:Atn,repository:Ctn,license:Itn,bugs:Otn,devDependencies:Ptn,dependencies:ktn,peerDependencies:$tn,engines:Rtn};function ete(e){return!!e.or}function tte(e){return!!e.and}function nte(e){return!!e.not}function F$(e,t){if(nte(e))F$(e.not,t);else if(tte(e))for(const n of e.and)F$(n,t);else if(ete(e))for(const n of e.or)F$(n,t);else t(e)}function zb(e,t){return nte(e)?{not:zb(e.not,t)}:tte(e)?{and:e.and.map(n=>zb(n,t))}:ete(e)?{or:e.or.map(n=>zb(n,t))}:t(e)}const qt=structuredClone;function W8e(e){throw new Error(e)}function Kw(e,t){const n={};for(const r of t)Nt(e,r)&&(n[r]=e[r]);return n}function fu(e,t){const n={...e};for(const r of t)delete n[r];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>Pr(e)).join(",")})`};function kn(e){if(Jn(e))return e;const t=rt(e)?e:Pr(e);if(t.length<250)return t;let n=0;for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return n}function fq(e){return e===!1||e===null}function $n(e,t){return e.includes(t)}function Q1(e,t){let n=0;for(const[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function rte(e,t){let n=0;for(const[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function G8e(e,...t){for(const n of t)Dtn(e,n??{});return e}function Dtn(e,t){for(const n of Ne(t))QE(e,n,t[n],!0)}function md(e,t){const n=[],r={};let i;for(const s of e)i=t(s),!(i in r)&&(r[i]=1,n.push(s));return n}function Ltn(e,t){const n=Ne(e),r=Ne(t);if(n.length!==r.length)return!1;for(const i of n)if(e[i]!==t[i])return!1;return!0}function Y8e(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function ite(e,t){for(const n of e)if(t.has(n))return!0;return!1}function dq(e){const t=new Set;for(const n of e){const i=oh(n).map((o,a)=>a===0?o:`[${o}]`),s=i.map((o,a)=>i.slice(0,a+1).join(""));for(const o of s)t.add(o)}return t}function ste(e,t){return e===void 0||t===void 0?!0:ite(dq(e),dq(t))}function Or(e){return Ne(e).length===0}const Ne=Object.keys,yo=Object.values,l0=Object.entries;function GA(e){return e===!0||e===!1}function hi(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function _2(e,t){return nte(e)?`!(${_2(e.not,t)})`:tte(e)?`(${e.and.map(n=>_2(n,t)).join(") && (")})`:ete(e)?`(${e.or.map(n=>_2(n,t)).join(") || (")})`:t(e)}function NL(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&NL(e[n],t)&&delete e[n],Or(e)}function UI(e){return e.charAt(0).toUpperCase()+e.substr(1)}function ote(e,t="datum"){const n=oh(e),r=[];for(let i=1;i<=n.length;i++){const s=`[${n.slice(0,i).map(Xe).join("][")}]`;r.push(`${t}${s}`)}return r.join(" && ")}function K8e(e,t="datum"){return`${t}[${Xe(oh(e).join("."))}]`}function Mtn(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function oc(e){return`${oh(e).map(Mtn).join("\\.")}`}function J1(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function ate(e){return`${oh(e).join(".")}`}function Xw(e){return e?oh(e).length:0}function qi(...e){for(const t of e)if(t!==void 0)return t}let X8e=42;function Q8e(e){const t=++X8e;return e?String(e)+t:t}function Ftn(){X8e=42}function J8e(e){return Z8e(e)?e:`__${e}`}function Z8e(e){return e.startsWith("__")}function YA(e){if(e!==void 0)return(e%360+360)%360}function jF(e){return Jn(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const mye=Object.getPrototypeOf(structuredClone({}));function Xu(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,r;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!Xu(e[r],t[r]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;for(r of e.entries())if(!Xu(r[1],t.get(r[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==mye.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==mye.toString)return e.toString()===t.toString();const i=Object.keys(e);if(n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!Xu(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function Pr(e){const t=[];return function n(r){if(r&&r.toJSON&&typeof r.toJSON=="function"&&(r=r.toJSON()),r===void 0)return;if(typeof r=="number")return isFinite(r)?""+r:"null";if(typeof r!="object")return JSON.stringify(r);let i,s;if(Array.isArray(r)){for(s="[",i=0;i<r.length;i++)i&&(s+=","),s+=n(r[i])||"null";return s+"]"}if(r===null)return"null";if(t.includes(r))throw new TypeError("Converting circular structure to JSON");const o=t.push(r)-1,a=Object.keys(r).sort();for(s="",i=0;i<a.length;i++){const u=a[i],l=n(r[u]);l&&(s&&(s+=","),s+=JSON.stringify(u)+":"+l)}return t.splice(o,1),`{${s}}`}(e)}const dp="row",hp="column",zF="facet",pi="x",Ks="y",Cf="x2",fh="y2",B0="xOffset",ux="yOffset",If="radius",rm="radius2",vc="theta",im="theta2",Of="latitude",Pf="longitude",kf="latitude2",ac="longitude2",Eu="color",dh="fill",hh="stroke",xu="shape",sm="size",zv="angle",om="opacity",j0="fillOpacity",z0="strokeOpacity",U0="strokeWidth",V0="strokeDash",VI="text",Qw="order",HI="detail",UF="key",Z1="tooltip",VF="href",HF="url",qF="description",Btn={x:1,y:1,x2:1,y2:1},e9e={theta:1,theta2:1,radius:1,radius2:1};function t9e(e){return e in e9e}const ute={longitude:1,longitude2:1,latitude:1,latitude2:1};function n9e(e){switch(e){case Of:return"y";case kf:return"y2";case Pf:return"x";case ac:return"x2"}}function r9e(e){return e in ute}const jtn=Ne(ute),lte={...Btn,...e9e,...ute,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function Ub(e){return e===Eu||e===dh||e===hh}const i9e={row:1,column:1,facet:1},ql=Ne(i9e),cte={...lte,...i9e},ztn=Ne(cte),{order:dwn,detail:hwn,tooltip:pwn,...Utn}=cte,{row:mwn,column:gwn,facet:ywn,...Vtn}=Utn;function Htn(e){return!!Vtn[e]}function s9e(e){return!!cte[e]}const qtn=[Cf,fh,kf,ac,im,rm];function o9e(e){return Uv(e)!==e}function Uv(e){switch(e){case Cf:return pi;case fh:return Ks;case kf:return Of;case ac:return Pf;case im:return vc;case rm:return If}return e}function c0(e){if(t9e(e))switch(e){case vc:return"startAngle";case im:return"endAngle";case If:return"outerRadius";case rm:return"innerRadius"}return e}function ph(e){switch(e){case pi:return Cf;case Ks:return fh;case Of:return kf;case Pf:return ac;case vc:return im;case If:return rm}}function Su(e){switch(e){case pi:case Cf:return"width";case Ks:case fh:return"height"}}function a9e(e){switch(e){case pi:return"xOffset";case Ks:return"yOffset";case Cf:return"x2Offset";case fh:return"y2Offset";case vc:return"thetaOffset";case If:return"radiusOffset";case im:return"theta2Offset";case rm:return"radius2Offset"}}function fte(e){switch(e){case pi:return"xOffset";case Ks:return"yOffset"}}function Wtn(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const Gtn=Ne(lte),{x:vwn,y:_wn,x2:bwn,y2:wwn,xOffset:Ewn,yOffset:xwn,latitude:Swn,longitude:Twn,latitude2:Awn,longitude2:Cwn,theta:Iwn,theta2:Own,radius:Pwn,radius2:kwn,...dte}=lte,Ytn=Ne(dte),hte={x:1,y:1},mh=Ne(hte);function Wi(e){return e in hte}const pte={theta:1,radius:1},Ktn=Ne(pte);function WF(e){return e==="width"?pi:Ks}const u9e={xOffset:1,yOffset:1};function qI(e){return e in u9e}const{text:$wn,tooltip:Rwn,href:Nwn,url:Dwn,description:Lwn,detail:Mwn,key:Fwn,order:Bwn,...l9e}=dte,Xtn=Ne(l9e);function Qtn(e){return!!dte[e]}function Jtn(e){switch(e){case Eu:case dh:case hh:case sm:case xu:case om:case U0:case V0:return!0;case j0:case z0:case zv:return!1}}const c9e={...hte,...pte,...u9e,...l9e},GF=Ne(c9e);function am(e){return!!c9e[e]}function Ztn(e,t){return tnn(e)[t]}const f9e={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:jwn,...enn}=f9e;function tnn(e){switch(e){case Eu:case dh:case hh:case qF:case HI:case UF:case Z1:case VF:case Qw:case om:case j0:case z0:case U0:case zF:case dp:case hp:return f9e;case pi:case Ks:case B0:case ux:case Of:case Pf:return enn;case Cf:case fh:case kf:case ac:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case sm:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case V0:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case xu:return{point:"always",geoshape:"always"};case VI:return{text:"always"};case zv:return{point:"always",square:"always",text:"always"};case HF:return{image:"always"};case vc:return{text:"always",arc:"always"};case If:return{text:"always",arc:"always"};case im:case rm:return{arc:"always"}}}function Fj(e){switch(e){case pi:case Ks:case vc:case If:case B0:case ux:case sm:case zv:case U0:case om:case j0:case z0:case Cf:case fh:case im:case rm:return;case zF:case dp:case hp:case xu:case V0:case VI:case Z1:case VF:case HF:case qF:return"discrete";case Eu:case dh:case hh:return"flexible";case Of:case Pf:case kf:case ac:case HI:case UF:case Qw:return}}const nnn={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},rnn={count:1,min:1,max:1};function Mp(e){return!!e&&!!e.argmin}function H0(e){return!!e&&!!e.argmax}function mte(e){return rt(e)&&!!nnn[e]}const inn=new Set(["count","valid","missing","distinct"]);function d9e(e){return rt(e)&&inn.has(e)}function snn(e){return rt(e)&&$n(["min","max"],e)}const onn=new Set(["count","sum","distinct","valid","missing"]),ann=new Set(["mean","average","median","q1","q3","min","max"]);function h9e(e){return L0(e)&&(e=s5(e,void 0)),"bin"+Ne(e).map(t=>YF(e[t])?hi(`_${t}_${l0(e[t])}`):hi(`_${t}_${e[t]}`)).join("")}function Hr(e){return e===!0||Vv(e)&&!e.binned}function so(e){return e==="binned"||Vv(e)&&e.binned===!0}function Vv(e){return st(e)}function YF(e){return e==null?void 0:e.param}function gye(e){switch(e){case dp:case hp:case sm:case Eu:case dh:case hh:case U0:case om:case j0:case z0:case xu:return 6;case V0:return 4;default:return 10}}function WI(e){return!!(e!=null&&e.expr)}function Ja(e){const t=Ne(e||{}),n={};for(const r of t)n[r]=qu(e[r]);return n}function p9e(e){const{anchor:t,frame:n,offset:r,orient:i,angle:s,limit:o,color:a,subtitleColor:u,subtitleFont:l,subtitleFontSize:c,subtitleFontStyle:f,subtitleFontWeight:d,subtitleLineHeight:h,subtitlePadding:p,...m}=e,g={...m,...a?{fill:a}:{}},y={...t?{anchor:t}:{},...n?{frame:n}:{},...r?{offset:r}:{},...i?{orient:i}:{},...s!==void 0?{angle:s}:{},...o!==void 0?{limit:o}:{}},v={...u?{subtitleColor:u}:{},...l?{subtitleFont:l}:{},...c?{subtitleFontSize:c}:{},...f?{subtitleFontStyle:f}:{},...d?{subtitleFontWeight:d}:{},...h?{subtitleLineHeight:h}:{},...p?{subtitlePadding:p}:{}},_=Kw(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:g,subtitleMarkConfig:_,nonMarkTitleProperties:y,subtitle:v}}function Nm(e){return rt(e)||Ie(e)&&rt(e[0])}function Tt(e){return!!(e!=null&&e.signal)}function q0(e){return!!e.step}function unn(e){return Ie(e)?!1:"fields"in e&&!("data"in e)}function lnn(e){return Ie(e)?!1:"fields"in e&&"data"in e}function Jh(e){return Ie(e)?!1:"field"in e&&"data"in e}const cnn={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},fnn=Ne(cnn),dnn={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},hq=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function m9e(e){const t=Ie(e.condition)?e.condition.map(yye):yye(e.condition);return{...qu(e),condition:t}}function qu(e){if(WI(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function yye(e){if(WI(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function Xr(e){if(WI(e)){const{expr:t,...n}=e;return{signal:t,...n}}return Tt(e)?e:e!==void 0?{value:e}:void 0}function hnn(e){return Tt(e)?e.signal:Xe(e)}function vye(e){return Tt(e)?e.signal:Xe(e.value)}function Yc(e){return Tt(e)?e.signal:e==null?null:Xe(e)}function pnn(e,t,n){for(const r of n){const i=Fp(r,t.markDef,t.config);i!==void 0&&(e[r]=Xr(i))}return e}function g9e(e){return[].concat(e.type,e.style??[])}function fr(e,t,n,r={}){const{vgChannel:i,ignoreVgConfig:s}=r;return i&&t[i]!==void 0?t[i]:t[e]!==void 0?t[e]:s&&(!i||i===e)?void 0:Fp(e,t,n,r)}function Fp(e,t,n,{vgChannel:r}={}){return qi(r?DL(e,t,n.style):void 0,DL(e,t,n.style),r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function DL(e,t,n){return y9e(e,g9e(t),n)}function y9e(e,t,n){t=nt(t);let r;for(const i of t){const s=n[i];s&&s[e]!==void 0&&(r=s[e])}return r}function v9e(e,t){return nt(e).reduce((n,r)=>(n.field.push(Je(r,t)),n.order.push(r.sort??"ascending"),n),{field:[],order:[]})}function _9e(e,t){const n=[...e];return t.forEach(r=>{for(const i of n)if(Xu(i,r))return;n.push(r)}),n}function b9e(e,t){return Xu(e,t)||!t?e:e?[...nt(e),...nt(t)].join(", "):t}function w9e(e,t){const n=e.value,r=t.value;if(n==null||r===null)return{explicit:e.explicit,value:null};if((Nm(n)||Tt(n))&&(Nm(r)||Tt(r)))return{explicit:e.explicit,value:b9e(n,r)};if(Nm(n)||Tt(n))return{explicit:e.explicit,value:n};if(Nm(r)||Tt(r))return{explicit:e.explicit,value:r};if(!Nm(n)&&!Tt(n)&&!Nm(r)&&!Tt(r))return{explicit:e.explicit,value:_9e(n,r)};throw new Error("It should never reach here")}function gte(e){return`Invalid specification ${Pr(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const mnn='Autosize "fit" only works for single views and layered views.';function _ye(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function bye(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function wye(e){return e?`Dropping "fit-${e}" because spec has discrete ${Su(e)}.`:'Dropping "fit" because spec has discrete size.'}function yte(e){return`Unknown field for ${e}. Cannot calculate view size.`}function Eye(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function gnn(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function ynn(e){return`The "nearest" transform is not supported for ${e} marks.`}function E9e(e){return`Selection not supported for ${e} yet.`}function vnn(e){return`Cannot find a selection named "${e}".`}const _nn="Scale bindings are currently only supported for scales with unbinned, continuous domains.",bnn="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",wnn="Legend bindings are only supported for selections over an individual field or encoding channel.";function Enn(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function xnn(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const Snn="The same selection must be used to override scale domains in a layered view.",Tnn='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function Ann(e){return`Unknown repeated value "${e}".`}function xye(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const Cnn="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function Inn(e){return`Unrecognized parse "${e}".`}function Sye(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const Onn="Attempt to add the same child twice.";function Pnn(e){return`Ignoring an invalid transform: ${Pr(e)}.`}const knn='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function Tye(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function $nn(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${Pr(t)} is overridden by a child projection ${Pr(n)}.`}const Rnn="Arc marks uses theta channel rather than angle, replacing angle with theta.";function Nnn(e){return`${e}Offset dropped because ${e} is continuous`}function Dnn(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${Pr(n)}}.`}function x9e(e){return`Invalid field type "${e}".`}function Lnn(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function Mnn(e){return`Invalid aggregation operator "${e}".`}function S9e(e,t){const{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function Fnn(e){return`Position range does not support relative band size for ${e}.`}function pq(e,t){return`Dropping ${Pr(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const Bnn="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function KF(e,t,n){return`${e} dropped as it is incompatible with "${t}"${n?` when ${n}`:""}.`}function jnn(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function znn(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function Unn(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function Vnn(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function Bj(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function Hnn(e){return`The ${e} for range marks cannot be an expression`}function qnn(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function Wnn(e,t){return`Specified orient "${e}" overridden with "${t}".`}function Gnn(e){return`Cannot use the scale property "${e}" with non-color channel.`}function Ynn(e){return`Cannot use the relative band size with ${e} scale.`}function Knn(e){return`Using unaggregated domain with raw field has no effect (${Pr(e)}).`}function Xnn(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function Qnn(e){return`Unaggregated domain is currently unsupported for log scale (${Pr(e)}).`}function Jnn(e){return`Cannot apply size to non-oriented mark "${e}".`}function Znn(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function ern(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function T9e(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function A9e(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function trn(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Pr(n)} and ${Pr(r)}). Using ${Pr(n)}.`}function nrn(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Pr(n)} and ${Pr(r)}). Using the union of the two domains.`}function rrn(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function irn(e){return`Dropping sort property ${Pr(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const Aye="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",srn="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",orn="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",arn="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function urn(e){return`Cannot stack "${e}" if there is already "${e}2".`}function lrn(e){return`Cannot stack non-linear scale (${e}).`}function crn(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function LL(e,t){return`Invalid ${e}: ${Pr(t)}.`}function frn(e){return`Dropping day from datetime ${Pr(e)} as day cannot be combined with other units.`}function drn(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function hrn(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function prn(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function Cye(e){return`1D error band does not support ${e}.`}function C9e(e){return`Channel ${e} is required for "binned" bin.`}function mrn(e){return`Channel ${e} should not be used with "binned" bin.`}function grn(e){return`Domain for ${e} is required for threshold scale.`}const I9e=FQ(MQ);let Jw=I9e;function yrn(e){return Jw=e,Jw}function vrn(){return Jw=I9e,Jw}function Ue(...e){Jw.warn(...e)}function _rn(...e){Jw.debug(...e)}function Hv(e){if(e&&st(e)){for(const t of _te)if(t in e)return!0}return!1}const O9e=["january","february","march","april","may","june","july","august","september","october","november","december"],brn=O9e.map(e=>e.substr(0,3)),P9e=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],wrn=P9e.map(e=>e.substr(0,3));function Ern(e){if(jF(e)&&(e=+e),Jn(e))return e>4&&Ue(LL("quarter",e)),e-1;throw new Error(LL("quarter",e))}function xrn(e){if(jF(e)&&(e=+e),Jn(e))return e-1;{const t=e.toLowerCase(),n=O9e.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=brn.indexOf(r);if(i!==-1)return i;throw new Error(LL("month",e))}}function Srn(e){if(jF(e)&&(e=+e),Jn(e))return e%7;{const t=e.toLowerCase(),n=P9e.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=wrn.indexOf(r);if(i!==-1)return i;throw new Error(LL("day",e))}}function vte(e,t){const n=[];if(t&&e.day!==void 0&&Ne(e).length>1&&(Ue(frn(e)),e=qt(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const r=t?xrn(e.month):e.month;n.push(r)}else if(e.quarter!==void 0){const r=t?Ern(e.quarter):e.quarter;n.push(Jn(r)?r*3:`${r}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const r=t?Srn(e.day):e.day;n.push(Jn(r)?r+1:`${r}+1`)}else n.push(1);for(const r of["hours","minutes","seconds","milliseconds"]){const i=e[r];n.push(typeof i>"u"?0:i)}return n}function ev(e){const n=vte(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function Trn(e){const n=vte(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function Arn(e){const t=vte(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const k9e={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},_te=Ne(k9e);function Crn(e){return!!k9e[e]}function qv(e){return st(e)?e.binned:$9e(e)}function $9e(e){return e&&e.startsWith("binned")}function bte(e){return e.startsWith("utc")}function Irn(e){return e.substring(3)}const Orn={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function XF(e){return _te.filter(t=>N9e(e,t))}function R9e(e){const t=XF(e);return t[t.length-1]}function N9e(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function Prn(e,t,{end:n}={end:!1}){const r=ote(t),i=bte(e)?"utc":"";function s(u){return u==="quarter"?`(${i}quarter(${r})-1)`:`${i}${u}(${r})`}let o;const a={};for(const u of _te)N9e(e,u)&&(a[u]=s(u),o=u);return n&&(a[o]+="+1"),Trn(a)}function D9e(e){if(!e)return;const t=XF(e);return`timeUnitSpecifier(${Pr(t)}, ${Pr(Orn)})`}function krn(e,t,n){if(!e)return;const r=D9e(e);return`${n||bte(e)?"utc":"time"}Format(${t}, ${r})`}function Hs(e){if(!e)return;let t;return rt(e)?$9e(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:st(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),bte(t.unit)&&(t.utc=!0,t.unit=Irn(t.unit)),t}function $rn(e){const{utc:t,...n}=Hs(e);return n.unit?(t?"utc":"")+Ne(n).map(r=>hi(`${r==="unit"?"":`_${r}_`}${n[r]}`)).join(""):(t?"utc":"")+"timeunit"+Ne(n).map(r=>hi(`_${r}_${n[r]}`)).join("")}function L9e(e,t=n=>n){const n=Hs(e),r=R9e(n.unit);if(r&&r!=="day"){const i={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:s,part:o}=M9e(r,n.step),a={...i,[o]:+i[o]+s};return`${t(ev(a))} - ${t(ev(i))}`}}const Rrn={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function Nrn(e){return!!Rrn[e]}function M9e(e,t=1){if(Nrn(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function Drn(e){return e==null?void 0:e.param}function wte(e){return!!(e!=null&&e.field)&&e.equal!==void 0}function Ete(e){return!!(e!=null&&e.field)&&e.lt!==void 0}function xte(e){return!!(e!=null&&e.field)&&e.lte!==void 0}function Ste(e){return!!(e!=null&&e.field)&&e.gt!==void 0}function Tte(e){return!!(e!=null&&e.field)&&e.gte!==void 0}function Ate(e){if(e!=null&&e.field){if(Ie(e.range)&&e.range.length===2)return!0;if(Tt(e.range))return!0}return!1}function Cte(e){return!!(e!=null&&e.field)&&(Ie(e.oneOf)||Ie(e.in))}function Lrn(e){return!!(e!=null&&e.field)&&e.valid!==void 0}function F9e(e){return Cte(e)||wte(e)||Ate(e)||Ete(e)||Ste(e)||xte(e)||Tte(e)}function Bf(e,t){return o5(e,{timeUnit:t,wrapTime:!0})}function Mrn(e,t){return e.map(n=>Bf(n,t))}function B9e(e,t=!0){const{field:n}=e,r=Hs(e.timeUnit),{unit:i,binned:s}=r||{},o=Je(e,{expr:"datum"}),a=i?`time(${s?o:Prn(i,n)})`:o;if(wte(e))return`${a}===${Bf(e.equal,i)}`;if(Ete(e)){const u=e.lt;return`${a}<${Bf(u,i)}`}else if(Ste(e)){const u=e.gt;return`${a}>${Bf(u,i)}`}else if(xte(e)){const u=e.lte;return`${a}<=${Bf(u,i)}`}else if(Tte(e)){const u=e.gte;return`${a}>=${Bf(u,i)}`}else{if(Cte(e))return`indexof([${Mrn(e.oneOf,i).join(",")}], ${a}) !== -1`;if(Lrn(e))return Ite(a,e.valid);if(Ate(e)){const{range:u}=e,l=Tt(u)?{signal:`${u.signal}[0]`}:u[0],c=Tt(u)?{signal:`${u.signal}[1]`}:u[1];if(l!==null&&c!==null&&t)return"inrange("+a+", ["+Bf(l,i)+", "+Bf(c,i)+"])";const f=[];return l!==null&&f.push(`${a} >= ${Bf(l,i)}`),c!==null&&f.push(`${a} <= ${Bf(c,i)}`),f.length>0?f.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${Pr(e)}`)}function Ite(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function Frn(e){return F9e(e)&&e.timeUnit?{...e,timeUnit:Hs(e.timeUnit)}:e}const GI={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function Brn(e){return e==="quantitative"||e==="temporal"}function j9e(e){return e==="ordinal"||e==="nominal"}const tv=GI.quantitative,Ote=GI.ordinal,Zw=GI.temporal,Pte=GI.nominal,lx=GI.geojson;function jrn(e){if(e)switch(e=e.toLowerCase(),e){case"q":case tv:return"quantitative";case"t":case Zw:return"temporal";case"o":case Ote:return"ordinal";case"n":case Pte:return"nominal";case lx:return"geojson"}}const du={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},mq={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function zrn(e,t){const n=mq[e],r=mq[t];return n===r||n==="ordinal-position"&&r==="time"||r==="ordinal-position"&&n==="time"}const Urn={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function Iye(e){return Urn[e]}const z9e=new Set(["linear","log","pow","sqrt","symlog"]),U9e=new Set([...z9e,"time","utc"]);function V9e(e){return z9e.has(e)}const H9e=new Set(["quantile","quantize","threshold"]),Vrn=new Set([...U9e,...H9e,"sequential","identity"]),Hrn=new Set(["ordinal","bin-ordinal","point","band"]);function qs(e){return Hrn.has(e)}function dl(e){return Vrn.has(e)}function Kc(e){return U9e.has(e)}function eE(e){return H9e.has(e)}const qrn={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0};function Wrn(e){return!rt(e)&&!!e.name}function q9e(e){return e==null?void 0:e.param}function Grn(e){return e==null?void 0:e.unionWith}function Yrn(e){return st(e)&&"field"in e}const Krn={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:zwn,domain:Uwn,range:Vwn,rangeMax:Hwn,rangeMin:qwn,scheme:Wwn,...Xrn}=Krn,Qrn=Ne(Xrn);function gq(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return Kc(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return Kc(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return Kc(e);case"nice":return Kc(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return dl(e)&&!$n(["log","time","utc","threshold","quantile"],e)}}function W9e(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return Ub(e)?void 0:Gnn(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function Jrn(e,t){return $n([Ote,Pte],t)?e===void 0||qs(e):t===Zw?$n([du.TIME,du.UTC,void 0],e):t===tv?V9e(e)||eE(e)||e===void 0:!0}function Zrn(e,t,n=!1){if(!am(e))return!1;switch(e){case pi:case Ks:case B0:case ux:case vc:case If:return Kc(t)||t==="band"?!0:t==="point"?!n:!1;case sm:case U0:case om:case j0:case z0:case zv:return Kc(t)||eE(t)||$n(["band","point","ordinal"],t);case Eu:case dh:case hh:return t!=="band";case V0:case xu:return t==="ordinal"||eE(t)}}const La={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},G9e=La.arc,QF=La.area,JF=La.bar,ein=La.image,ZF=La.line,e5=La.point,tin=La.rect,ML=La.rule,Y9e=La.text,kte=La.tick,nin=La.trail,$te=La.circle,Rte=La.square,K9e=La.geoshape;function W0(e){return["line","area","trail"].includes(e)}function KA(e){return["rect","bar","image","arc"].includes(e)}const rin=new Set(Ne(La));function Xd(e){return e.type}const iin=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],sin=["fill","fillOpacity"],oin=[...iin,...sin],ain={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},Oye=Ne(ain),uin={area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],line:["point"],tick:["bandSize","thickness"]},lin={color:"#4c78a8",invalid:"filter",timeUnitBandSize:1},cin={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},X9e=Ne(cin);function nv(e){return e&&e.band!=null}const fin={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},Q9e=5,din={binSpacing:1,continuousBandSize:Q9e,minBandSize:.25,timeUnitBandPosition:.5},hin={binSpacing:0,continuousBandSize:Q9e,minBandSize:.25,timeUnitBandPosition:.5},pin={thickness:1};function min(e){return Xd(e)?e.type:e}function Nte(e){const{channel:t,channelDef:n,markDef:r,scale:i,config:s}=e,o=Lte(e);return Ve(n)&&!d9e(n.aggregate)&&i&&Kc(i.get("type"))?gin({fieldDef:n,channel:t,markDef:r,ref:o,config:s}):o}function gin({fieldDef:e,channel:t,markDef:n,ref:r,config:i}){return W0(n.type)?r:fr("invalid",n,i)===null?[yin(e,t),r]:r}function yin(e,t){const n=Dte(e,!0),i=Uv(t)==="y"?{field:{group:"height"}}:{value:0};return{test:n,...i}}function Dte(e,t=!0){return Ite(rt(e)?e:Je(e,{expr:"datum"}),!t)}function vin(e){const{datum:t}=e;return Hv(t)?ev(t):`${Pr(t)}`}function y1(e,t,n,r){const i={};if(t&&(i.scale=t),gh(e)){const{datum:s}=e;Hv(s)?i.signal=ev(s):Tt(s)?i.signal=s.signal:WI(s)?i.signal=s.expr:i.value=s}else i.field=Je(e,n);if(r){const{offset:s,band:o}=r;s&&(i.offset=s),o&&(i.band=o)}return i}function FL({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,endSuffix:s="end",bandPosition:o=.5}){const a=!Tt(o)&&0<o&&o<1?"datum":void 0,u=Je(t,{expr:a,suffix:i}),l=n!==void 0?Je(n,{expr:a}):Je(t,{suffix:s,expr:a}),c={};if(o===0||o===1){c.scale=e;const f=o===0?u:l;c.field=f}else{const f=Tt(o)?`(1-${o.signal}) * ${u} + ${o.signal} * ${l}`:`${1-o} * ${u} + ${o} * ${l}`;c.signal=`scale("${e}", ${f})`}return r&&(c.offset=r),c}function _in({scaleName:e,fieldDef:t}){const n=Je(t,{expr:"datum"}),r=Je(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${r}) - scale("${e}", ${n}))`}function Lte({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l,bandPosition:c}){if(t){if(Qt(t)){const f=o==null?void 0:o.get("type");if(ka(t)){c??(c=f0({fieldDef:t,fieldDef2:n,markDef:r,config:i}));const{bin:d,timeUnit:h,type:p}=t;if(Hr(d)||c&&h&&p===Zw)return a!=null&&a.impute?y1(t,s,{binSuffix:"mid"},{offset:u}):c&&!qs(f)?FL({scaleName:s,fieldOrDatumDef:t,bandPosition:c,offset:u}):y1(t,s,QI(t,e)?{binSuffix:"range"}:{},{offset:u});if(so(d)){if(Ve(n))return FL({scaleName:s,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:c,offset:u});Ue(C9e(e===pi?Cf:fh))}}return y1(t,s,qs(f)?{binSuffix:"range"}:{},{offset:u,band:f==="band"?c??t.bandPosition??.5:void 0})}else if(hf(t)){const f=t.value,d=u?{offset:u}:{};return{...b2(e,f),...d}}}return pn(l)&&(l=l()),l&&{...l,...u?{offset:u}:{}}}function b2(e,t){return $n(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:$n(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:Xr(t)}function rv(e){return e&&e!=="number"&&e!=="time"}function J9e(e,t,n){return`${e}(${t}${n?`, ${Pr(n)}`:""})`}const bin="  ";function Mte({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s}){var u,l;if(rv(n))return Xc({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:s});const o=Z9e(e,r,i),a=tE(e);if(t===void 0&&n===void 0&&s.customFormatTypes){if(a==="quantitative"){if(i&&s.normalizedNumberFormatType)return Xc({fieldOrDatumDef:e,format:s.normalizedNumberFormat,formatType:s.normalizedNumberFormatType,expr:r,config:s});if(s.numberFormatType)return Xc({fieldOrDatumDef:e,format:s.numberFormat,formatType:s.numberFormatType,expr:r,config:s})}if(a==="temporal"&&s.timeFormatType&&Ve(e)&&e.timeUnit===void 0)return Xc({fieldOrDatumDef:e,format:s.timeFormat,formatType:s.timeFormatType,expr:r,config:s})}if(rE(e)){const c=Ein({field:o,timeUnit:Ve(e)?(u=Hs(e.timeUnit))==null?void 0:u.unit:void 0,format:t,formatType:s.timeFormatType,rawTimeFormat:s.timeFormat,isUTCScale:Wv(e)&&((l=e.scale)==null?void 0:l.type)===du.UTC});return c?{signal:c}:void 0}if(t=yq({type:a,specifiedFormat:t,config:s,normalizeStack:i}),Ve(e)&&Hr(e.bin)){const c=Je(e,{expr:r,binSuffix:"end"});return{signal:YI(o,c,t,n,s)}}else return t||tE(e)==="quantitative"?{signal:`${nBe(o,t)}`}:{signal:`isValid(${o}) ? ${o} : ""+${o}`}}function Z9e(e,t,n){return Ve(e)?n?`${Je(e,{expr:t,suffix:"end"})}-${Je(e,{expr:t,suffix:"start"})}`:Je(e,{expr:t}):vin(e)}function Xc({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s,field:o}){if(o??(o=Z9e(e,r,i)),o!=="datum.value"&&Ve(e)&&Hr(e.bin)){const a=Je(e,{expr:r,binSuffix:"end"});return{signal:YI(o,a,t,n,s)}}return{signal:J9e(n,o,t)}}function eBe(e,t,n,r,i,s){var o;if(!(rt(r)&&rv(r))&&!(n===void 0&&r===void 0&&i.customFormatTypes&&tE(e)==="quantitative"&&(i.normalizedNumberFormatType&&nE(e)&&e.stack==="normalize"||i.numberFormatType))){if(nE(e)&&e.stack==="normalize"&&i.normalizedNumberFormat)return yq({type:"quantitative",config:i,normalizeStack:!0});if(rE(e)){const a=Ve(e)?(o=Hs(e.timeUnit))==null?void 0:o.unit:void 0;return a===void 0&&i.customFormatTypes&&i.timeFormatType?void 0:win({specifiedFormat:n,timeUnit:a,config:i,omitTimeFormatConfig:s})}return yq({type:t,specifiedFormat:n,config:i})}}function tBe(e,t,n){var r;if(e&&(Tt(e)||e==="number"||e==="time"))return e;if(rE(t)&&n!=="time"&&n!=="utc")return Ve(t)&&((r=Hs(t==null?void 0:t.timeUnit))!=null&&r.utc)?"utc":"time"}function yq({type:e,specifiedFormat:t,config:n,normalizeStack:r}){if(rt(t))return t;if(e===tv)return r?n.normalizedNumberFormat:n.numberFormat}function win({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:r}){return e||(t?{signal:D9e(t)}:r?void 0:n.timeFormat)}function nBe(e,t){return`format(${e}, "${t||""}")`}function Pye(e,t,n,r){return rv(n)?J9e(n,e,t):nBe(e,(rt(t)?t:void 0)??r.numberFormat)}function YI(e,t,n,r,i){if(n===void 0&&r===void 0&&i.customFormatTypes&&i.numberFormatType)return YI(e,t,i.numberFormat,i.numberFormatType,i);const s=Pye(e,n,r,i),o=Pye(t,n,r,i);return`${Ite(e,!1)} ? "null" : ${s} + "${bin}" + ${o}`}function Ein({field:e,timeUnit:t,format:n,formatType:r,rawTimeFormat:i,isUTCScale:s}){return!t||n?!t&&r?`${r}(${e}, '${n}')`:(n=rt(n)?n:i,`${s?"utc":"time"}Format(${e}, '${n}')`):krn(t,e,s)}const t5="min",xin={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function kye(e){return e in xin}function rBe(e){return!!(e!=null&&e.encoding)}function Pd(e){return e&&(e.op==="count"||!!e.field)}function iBe(e){return e&&Ie(e)}function KI(e){return"row"in e||"column"in e}function Fte(e){return!!e&&"header"in e}function n5(e){return"facet"in e}function Sin(e){return e.param}function Tin(e){return e&&!rt(e)&&"repeat"in e}function $ye(e){const{field:t,timeUnit:n,bin:r,aggregate:i}=e;return{...n?{timeUnit:n}:{},...r?{bin:r}:{},...i?{aggregate:i}:{},field:t}}function Bte(e){return"sort"in e}function f0({fieldDef:e,fieldDef2:t,markDef:n,config:r}){if(Qt(e)&&e.bandPosition!==void 0)return e.bandPosition;if(Ve(e)){const{timeUnit:i,bin:s}=e;if(i&&!t)return Fp("timeUnitBandPosition",n,r);if(Hr(s))return .5}}function sBe({channel:e,fieldDef:t,fieldDef2:n,markDef:r,config:i,scaleType:s,useVlSizeChannel:o}){var l,c,f;const a=Su(e),u=fr(o?"size":a,r,i,{vgChannel:a});if(u!==void 0)return u;if(Ve(t)){const{timeUnit:d,bin:h}=t;if(d&&!n)return{band:Fp("timeUnitBandSize",r,i)};if(Hr(h)&&!qs(s))return{band:1}}if(KA(r.type))return s?qs(s)?((l=i[r.type])==null?void 0:l.discreteBandSize)||{band:1}:(c=i[r.type])==null?void 0:c.continuousBandSize:(f=i[r.type])==null?void 0:f.discreteBandSize}function oBe(e,t,n,r){return Hr(e.bin)||e.timeUnit&&ka(e)&&e.type==="temporal"?f0({fieldDef:e,fieldDef2:t,markDef:n,config:r})!==void 0:!1}function aBe(e){return e&&!!e.sort&&!e.field}function r5(e){return e&&"condition"in e}function i5(e){const t=e==null?void 0:e.condition;return!!t&&!Ie(t)&&Ve(t)}function XI(e){const t=e==null?void 0:e.condition;return!!t&&!Ie(t)&&Qt(t)}function Ain(e){const t=e==null?void 0:e.condition;return!!t&&(Ie(t)||hf(t))}function Ve(e){return e&&(!!e.field||e.aggregate==="count")}function tE(e){return e==null?void 0:e.type}function gh(e){return e&&"datum"in e}function og(e){return ka(e)&&!jL(e)||BL(e)}function Rye(e){return ka(e)&&e.type==="quantitative"&&!e.bin||BL(e)}function BL(e){return gh(e)&&Jn(e.datum)}function Qt(e){return Ve(e)||gh(e)}function ka(e){return e&&("field"in e||e.aggregate==="count")&&"type"in e}function hf(e){return e&&"value"in e&&"value"in e}function Wv(e){return e&&("scale"in e||"sort"in e)}function nE(e){return e&&("axis"in e||"stack"in e||"impute"in e)}function uBe(e){return e&&"legend"in e}function lBe(e){return e&&("format"in e||"formatType"in e)}function Cin(e){return fu(e,["legend","axis","header","scale"])}function Iin(e){return"op"in e}function Je(e,t={}){let n=e.field;const r=t.prefix;let i=t.suffix,s="";if(Pin(e))n=J8e("count");else{let o;if(!t.nofn)if(Iin(e))o=e.op;else{const{bin:a,aggregate:u,timeUnit:l}=e;Hr(a)?(o=h9e(a),i=(t.binSuffix??"")+(t.suffix??"")):u?H0(u)?(s=`["${n}"]`,n=`argmax_${u.argmax}`):Mp(u)?(s=`["${n}"]`,n=`argmin_${u.argmin}`):o=String(u):l&&!qv(l)&&(o=$rn(l),i=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}o&&(n=n?`${o}_${n}`:o)}return i&&(n=`${n}_${i}`),r&&(n=`${r}_${n}`),t.forAs?ate(n):t.expr?K8e(n,t.expr)+s:oc(n)+s}function jL(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return Ve(e)&&!!e.bin;case"temporal":return!1}throw new Error(x9e(e.type))}function Oin(e){var t;return Wv(e)&&eE((t=e.scale)==null?void 0:t.type)}function Pin(e){return e.aggregate==="count"}function kin(e,t){var o;const{field:n,bin:r,timeUnit:i,aggregate:s}=e;if(s==="count")return t.countTitle;if(Hr(r))return`${n} (binned)`;if(i&&!qv(i)){const a=(o=Hs(i))==null?void 0:o.unit;if(a)return`${n} (${XF(a).join("-")})`}else if(s)return H0(s)?`${n} for max ${s.argmax}`:Mp(s)?`${n} for min ${s.argmin}`:`${UI(s)} of ${n}`;return n}function $in(e){const{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(H0(t))return`${i} for argmax(${t.argmax})`;if(Mp(t))return`${i} for argmin(${t.argmin})`;const s=r&&!qv(r)?Hs(r):void 0,o=t||(s==null?void 0:s.unit)||(s==null?void 0:s.maxbins)&&"timeunit"||Hr(n)&&"bin";return o?`${o.toUpperCase()}(${i})`:i}const cBe=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return $in(e);default:return kin(e,t)}};let fBe=cBe;function dBe(e){fBe=e}function Rin(){dBe(cBe)}function Vb(e,t,{allowDisabling:n,includeDefault:r=!0}){var a;const i=(a=jte(e))==null?void 0:a.title;if(!Ve(e))return i??e.title;const s=e,o=r?zte(s,t):void 0;return n?qi(i,s.title,o):i??s.title??o}function jte(e){if(nE(e)&&e.axis)return e.axis;if(uBe(e)&&e.legend)return e.legend;if(Fte(e)&&e.header)return e.header}function zte(e,t){return fBe(e,t)}function zL(e){if(lBe(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=jte(e)??{},{format:n,formatType:r}=t;return{format:n,formatType:r}}}function Nin(e,t){var s;switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(Bte(e)&&Ie(e.sort))return"ordinal";const{aggregate:n,bin:r,timeUnit:i}=e;if(i)return"temporal";if(r||n&&!H0(n)&&!Mp(n))return"quantitative";if(Wv(e)&&((s=e.scale)!=null&&s.type))switch(mq[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function Qd(e){if(Ve(e))return e;if(i5(e))return e.condition}function vs(e){if(Qt(e))return e;if(XI(e))return e.condition}function hBe(e,t,n,r={}){if(rt(e)||Jn(e)||L0(e)){const i=rt(e)?"string":Jn(e)?"number":"boolean";return Ue(Dnn(t,i,e)),{value:e}}return Qt(e)?UL(e,t,n,r):XI(e)?{...e,condition:UL(e.condition,t,n,r)}:e}function UL(e,t,n,r){if(lBe(e)){const{format:i,formatType:s,...o}=e;if(rv(s)&&!n.customFormatTypes)return Ue(Tye(t)),UL(o,t,n,r)}else{const i=nE(e)?"axis":uBe(e)?"legend":Fte(e)?"header":null;if(i&&e[i]){const{format:s,formatType:o,...a}=e[i];if(rv(o)&&!n.customFormatTypes)return Ue(Tye(t)),UL({...e,[i]:a},t,n,r)}}return Ve(e)?Ute(e,t,r):Din(e)}function Din(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=Jn(n)?"quantitative":rt(n)?"nominal":Hv(n)?"temporal":void 0,{...e,type:t}}function Ute(e,t,{compositeMark:n=!1}={}){const{aggregate:r,timeUnit:i,bin:s,field:o}=e,a={...e};if(!n&&r&&!mte(r)&&!H0(r)&&!Mp(r)&&(Ue(Mnn(r)),delete a.aggregate),i&&(a.timeUnit=Hs(i)),o&&(a.field=`${o}`),Hr(s)&&(a.bin=s5(s,t)),so(s)&&!Wi(t)&&Ue(mrn(t)),ka(a)){const{type:u}=a,l=jrn(u);u!==l&&(a.type=l),u!=="quantitative"&&d9e(r)&&(Ue(Lnn(u,r)),a.type="quantitative")}else if(!o9e(t)){const u=Nin(a,t);a.type=u}if(ka(a)){const{compatible:u,warning:l}=Lin(a,t)||{};u===!1&&Ue(l)}if(Bte(a)&&rt(a.sort)){const{sort:u}=a;if(kye(u))return{...a,sort:{encoding:u}};const l=u.substr(1);if(u.charAt(0)==="-"&&kye(l))return{...a,sort:{encoding:l,order:"descending"}}}if(Fte(a)){const{header:u}=a;if(u){const{orient:l,...c}=u;if(l)return{...a,header:{...c,labelOrient:u.labelOrient||l,titleOrient:u.titleOrient||l}}}}return a}function s5(e,t){return L0(e)?{maxbins:gye(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:gye(t)}:e}const w_={compatible:!0};function Lin(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case dp:case hp:case zF:return jL(e)?w_:{compatible:!1,warning:znn(t)};case pi:case Ks:case B0:case ux:case Eu:case dh:case hh:case VI:case HI:case UF:case Z1:case VF:case HF:case zv:case vc:case If:case qF:return w_;case Pf:case ac:case Of:case kf:return n!==tv?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:w_;case om:case j0:case z0:case U0:case sm:case im:case rm:case Cf:case fh:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:w_;case xu:case V0:return!jL(e)&&!Oin(e)?{compatible:!1,warning:Unn(t)}:w_;case Qw:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:w_}}function rE(e){const{formatType:t}=zL(e);return t==="time"||!t&&Min(e)}function Min(e){return e&&(e.type==="temporal"||Ve(e)&&!!e.timeUnit)}function o5(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){var u;const s=t&&((u=Hs(t))==null?void 0:u.unit);let o=s||n==="temporal",a;return WI(e)?a=e.expr:Tt(e)?a=e.signal:Hv(e)?(o=!0,a=ev(e)):(rt(e)||Jn(e))&&o&&(a=`datetime(${Pr(e)})`,Crn(s)&&(Jn(e)&&e<1e4||rt(e)&&isNaN(Date.parse(e)))&&(a=ev({[s]:e}))),a?r&&o?`time(${a})`:a:i?void 0:Pr(e)}function pBe(e,t){const{type:n}=e;return t.map(r=>{const i=Ve(e)&&!qv(e.timeUnit)?e.timeUnit:void 0,s=o5(r,{timeUnit:i,type:n,undefinedIfExprNotRequired:!0});return s!==void 0?{signal:s}:r})}function QI(e,t){return Hr(e.bin)?am(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const Nye={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function JI(e){return e==null?void 0:e.condition}const mBe=["domain","grid","labels","ticks","title"],Fin={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},gBe={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},Bin={...gBe,style:1,labelExpr:1,encoding:1};function Dye(e){return!!Bin[e]}const jin={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},yBe=Ne(jin);function um(e){return"mark"in e}class a5{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return um(t)?min(t.mark)===this.name:!1}}function v1(e,t){const n=e&&e[t];return n?Ie(n)?Q1(n,r=>!!r.field):Ve(n)||i5(n):!1}function vBe(e,t){const n=e&&e[t];return n?Ie(n)?Q1(n,r=>!!r.field):Ve(n)||gh(n)||XI(n):!1}function _Be(e,t){if(Wi(t)){const n=e[t];if((Ve(n)||gh(n))&&(j9e(n.type)||Ve(n)&&n.timeUnit)){const r=fte(t);return vBe(e,r)}}return!1}function Vte(e){return Q1(ztn,t=>{if(v1(e,t)){const n=e[t];if(Ie(n))return Q1(n,r=>!!r.aggregate);{const r=Qd(n);return r&&!!r.aggregate}}return!1})}function bBe(e,t){const n=[],r=[],i=[],s=[],o={};return Hte(e,(a,u)=>{if(Ve(a)){const{field:l,aggregate:c,bin:f,timeUnit:d,...h}=a;if(c||d||f){const p=jte(a),m=p==null?void 0:p.title;let g=Je(a,{forAs:!0});const y={...m?[]:{title:Vb(a,t,{allowDisabling:!0})},...h,field:g};if(c){let v;if(H0(c)?(v="argmax",g=Je({op:"argmax",field:c.argmax},{forAs:!0}),y.field=`${g}.${l}`):Mp(c)?(v="argmin",g=Je({op:"argmin",field:c.argmin},{forAs:!0}),y.field=`${g}.${l}`):c!=="boxplot"&&c!=="errorbar"&&c!=="errorband"&&(v=c),v){const _={op:v,as:g};l&&(_.field=l),s.push(_)}}else if(n.push(g),ka(a)&&Hr(f)){if(r.push({bin:f,field:l,as:g}),n.push(Je(a,{binSuffix:"end"})),QI(a,u)&&n.push(Je(a,{binSuffix:"range"})),Wi(u)){const v={field:`${g}_end`};o[`${u}2`]=v}y.bin="binned",o9e(u)||(y.type=tv)}else if(d&&!qv(d)){i.push({timeUnit:d,field:l,as:g});const v=ka(a)&&a.type!==Zw&&"time";v&&(u===VI||u===Z1?y.formatType=v:Qtn(u)?y.legend={formatType:v,...y.legend}:Wi(u)&&(y.axis={formatType:v,...y.axis}))}o[u]=y}else n.push(l),o[u]=e[u]}else o[u]=e[u]}),{bins:r,timeUnits:i,aggregate:s,groupby:n,encoding:o}}function zin(e,t,n){const r=Ztn(t,n);if(r){if(r==="binned"){const i=e[t===Cf?pi:Ks];return!!(Ve(i)&&Ve(e[t])&&so(i.bin))}}else return!1;return!0}function Uin(e,t,n,r){const i={};for(const s of Ne(e))s9e(s)||Ue(jnn(s));for(let s of Gtn){if(!e[s])continue;const o=e[s];if(qI(s)){const a=Wtn(s),u=i[a];if(Ve(u)&&Brn(u.type)&&Ve(o)&&!u.timeUnit){Ue(Nnn(a));continue}}if(s==="angle"&&t==="arc"&&!e.theta&&(Ue(Rnn),s=vc),!zin(e,s,t)){Ue(KF(s,t));continue}if(s===sm&&t==="line"){const a=Qd(e[s]);if(a!=null&&a.aggregate){Ue(Bnn);continue}}if(s===Eu&&(n?"fill"in e:"stroke"in e)){Ue(S9e("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(s===HI||s===Qw&&!Ie(o)&&!hf(o)||s===Z1&&Ie(o)){if(o){if(s===Qw){const a=e[s];if(aBe(a)){i[s]=a;continue}}i[s]=nt(o).reduce((a,u)=>(Ve(u)?a.push(Ute(u,s)):Ue(pq(u,s)),a),[])}}else{if(s===Z1&&o===null)i[s]=null;else if(!Ve(o)&&!gh(o)&&!hf(o)&&!r5(o)&&!Tt(o)){Ue(pq(o,s));continue}i[s]=hBe(o,s,r)}}return i}function u5(e,t){const n={};for(const r of Ne(e)){const i=hBe(e[r],r,t,{compositeMark:!0});n[r]=i}return n}function Vin(e){const t=[];for(const n of Ne(e))if(v1(e,n)){const r=e[n],i=nt(r);for(const s of i)Ve(s)?t.push(s):i5(s)&&t.push(s.condition)}return t}function Hte(e,t,n){if(e)for(const r of Ne(e)){const i=e[r];if(Ie(i))for(const s of i)t.call(n,s,r);else t.call(n,i,r)}}function Hin(e,t,n,r){return e?Ne(e).reduce((i,s)=>{const o=e[s];return Ie(o)?o.reduce((a,u)=>t.call(r,a,u,s),i):t.call(r,i,o,s)},n):n}function wBe(e,t){return Ne(t).reduce((n,r)=>{switch(r){case pi:case Ks:case VF:case qF:case HF:case Cf:case fh:case B0:case ux:case vc:case im:case If:case rm:case Of:case Pf:case kf:case ac:case VI:case xu:case zv:case Z1:return n;case Qw:if(e==="line"||e==="trail")return n;case HI:case UF:{const i=t[r];if(Ie(i)||Ve(i))for(const s of nt(i))s.aggregate||n.push(Je(s,{}));return n}case sm:if(e==="trail")return n;case Eu:case dh:case hh:case om:case j0:case z0:case V0:case U0:{const i=Qd(t[r]);return i&&!i.aggregate&&n.push(Je(i,{})),n}}},[])}function qin(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let r,i;if(Ie(t)){for(const s of t)s.aggregate?(r||(r=[]),r.push(s)):(i||(i=[]),i.push(s));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return Ie(i)&&i.length===1&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function vq(e,t,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};const i=e.map(({fieldPrefix:o,titlePrefix:a})=>{const u=r?` of ${qte(t)}`:"";return{field:o+t.field,type:t.type,title:Tt(a)?{signal:`${a}"${escape(u)}"`}:a+u}}),s=Vin(n).map(Cin);return{tooltip:[...i,...md(s,kn)]}}function qte(e){const{title:t,field:n}=e;return qi(t,n)}function Wte(e,t,n,r,i){const{scale:s,axis:o}=n;return({partName:a,mark:u,positionPrefix:l,endPositionPrefix:c=void 0,extraEncoding:f={}})=>{const d=qte(n);return EBe(e,a,i,{mark:u,encoding:{[t]:{field:`${l}_${n.field}`,type:n.type,...d!==void 0?{title:d}:{},...s!==void 0?{scale:s}:{},...o!==void 0?{axis:o}:{}},...rt(c)?{[`${t}2`]:{field:`${c}_${n.field}`}}:{},...r,...f}})}}function EBe(e,t,n,r){const{clip:i,color:s,opacity:o}=e,a=e.type;return e[t]||e[t]===void 0&&n[t]?[{...r,mark:{...n[t],...i?{clip:i}:{},...s?{color:s}:{},...o?{opacity:o}:{},...Xd(r.mark)?r.mark:{type:r.mark},style:`${a}-${String(t)}`,...L0(e[t])?{}:e[t]}}]:[]}function xBe(e,t,n){const{encoding:r}=e,i=t==="vertical"?"y":"x",s=r[i],o=r[`${i}2`],a=r[`${i}Error`],u=r[`${i}Error2`];return{continuousAxisChannelDef:JP(s,n),continuousAxisChannelDef2:JP(o,n),continuousAxisChannelDefError:JP(a,n),continuousAxisChannelDefError2:JP(u,n),continuousAxis:i}}function JP(e,t){if(e!=null&&e.aggregate){const{aggregate:n,...r}=e;return n!==t&&Ue(prn(n,t)),r}else return e}function SBe(e,t){const{mark:n,encoding:r}=e,{x:i,y:s}=r;if(Xd(n)&&n.orient)return n.orient;if(og(i)){if(og(s)){const o=Ve(i)&&i.aggregate,a=Ve(s)&&s.aggregate;if(!o&&a===t)return"vertical";if(!a&&o===t)return"horizontal";if(o===t&&a===t)throw new Error("Both x and y cannot have aggregate");return rE(s)&&!rE(i)?"horizontal":"vertical"}return"horizontal"}else{if(og(s))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const VL="boxplot",Win=["box","median","outliers","rule","ticks"],Gin=new a5(VL,ABe);function TBe(e){return Jn(e)?"tukey":e}function ABe(e,{config:t}){e={...e,encoding:u5(e.encoding,t)};const{mark:n,encoding:r,params:i,projection:s,...o}=e,a=Xd(n)?n:{type:n};i&&Ue(E9e("boxplot"));const u=a.extent??t.boxplot.extent,l=fr("size",a,t),c=a.invalid,f=TBe(u),{bins:d,timeUnits:h,transform:p,continuousAxisChannelDef:m,continuousAxis:g,groupby:y,aggregate:v,encodingWithoutContinuousAxis:_,ticksOrient:b,boxOrient:E,customTooltipWithoutAggregatedField:w}=Yin(e,u,t),{color:x,size:S,...I}=_,C=Re=>Wte(a,g,m,Re,t.boxplot),O=C(I),z=C(_),N=C({...I,...S?{size:S}:{}}),$=vq([{fieldPrefix:f==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:f==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],m,_),D={type:"tick",color:"black",opacity:1,orient:b,invalid:c,aria:!1},B=f==="min-max"?$:vq([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],m,_),V=[...O({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:B}),...O({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:B}),...O({partName:"ticks",mark:D,positionPrefix:"lower_whisker",extraEncoding:B}),...O({partName:"ticks",mark:D,positionPrefix:"upper_whisker",extraEncoding:B})],j=[...f!=="tukey"?V:[],...z({partName:"box",mark:{type:"bar",...l?{size:l}:{},orient:E,invalid:c,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:$}),...N({partName:"median",mark:{type:"tick",invalid:c,...st(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...l?{size:l}:{},orient:b,aria:!1},positionPrefix:"mid_box",extraEncoding:$})];if(f==="min-max")return{...o,transform:(o.transform??[]).concat(p),layer:j};const G=`datum["lower_box_${m.field}"]`,U=`datum["upper_box_${m.field}"]`,P=`(${U} - ${G})`,k=`${G} - ${u} * ${P}`,H=`${U} + ${u} * ${P}`,M=`datum["${m.field}"]`,F={joinaggregate:CBe(m.field),groupby:y},J={transform:[{filter:`(${k} <= ${M}) && (${M} <= ${H})`},{aggregate:[{op:"min",field:m.field,as:`lower_whisker_${m.field}`},{op:"max",field:m.field,as:`upper_whisker_${m.field}`},{op:"min",field:`lower_box_${m.field}`,as:`lower_box_${m.field}`},{op:"max",field:`upper_box_${m.field}`,as:`upper_box_${m.field}`},...v],groupby:y}],layer:V},{tooltip:se,...ae}=I,{scale:ce,axis:le}=m,ge=qte(m),ue=fu(le,["title"]),Fe=EBe(a,"outliers",t.boxplot,{transform:[{filter:`(${M} < ${k}) || (${M} > ${H})`}],mark:"point",encoding:{[g]:{field:m.field,type:m.type,...ge!==void 0?{title:ge}:{},...ce!==void 0?{scale:ce}:{},...Or(ue)?{}:{axis:ue}},...ae,...x?{color:x}:{},...w?{tooltip:w}:{}}})[0];let ke;const Ge=[...d,...h,F];return Fe?ke={transform:Ge,layer:[Fe,J]}:(ke=J,ke.transform.unshift(...Ge)),{...o,layer:[ke,{transform:p,layer:j}]}}function CBe(e){return[{op:"q1",field:e,as:`lower_box_${e}`},{op:"q3",field:e,as:`upper_box_${e}`}]}function Yin(e,t,n){const r=SBe(e,VL),{continuousAxisChannelDef:i,continuousAxis:s}=xBe(e,r,VL),o=i.field,a=TBe(t),u=[...CBe(o),{op:"median",field:o,as:`mid_box_${o}`},{op:"min",field:o,as:(a==="min-max"?"lower_whisker_":"min_")+o},{op:"max",field:o,as:(a==="min-max"?"upper_whisker_":"max_")+o}],l=a==="min-max"||a==="tukey"?[]:[{calculate:`datum["upper_box_${o}"] - datum["lower_box_${o}"]`,as:`iqr_${o}`},{calculate:`min(datum["upper_box_${o}"] + datum["iqr_${o}"] * ${t}, datum["max_${o}"])`,as:`upper_whisker_${o}`},{calculate:`max(datum["lower_box_${o}"] - datum["iqr_${o}"] * ${t}, datum["min_${o}"])`,as:`lower_whisker_${o}`}],{[s]:c,...f}=e.encoding,{customTooltipWithoutAggregatedField:d,filteredEncoding:h}=qin(f),{bins:p,timeUnits:m,aggregate:g,groupby:y,encoding:v}=bBe(h,n),_=r==="vertical"?"horizontal":"vertical",b=r,E=[...p,...m,{aggregate:[...g,...u],groupby:y},...l];return{bins:p,timeUnits:m,transform:E,groupby:y,aggregate:g,continuousAxisChannelDef:i,continuousAxis:s,encodingWithoutContinuousAxis:v,ticksOrient:_,boxOrient:b,customTooltipWithoutAggregatedField:d}}const Gte="errorbar",Kin=["ticks","rule"],Xin=new a5(Gte,IBe);function IBe(e,{config:t}){e={...e,encoding:u5(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,ticksOrient:o,markDef:a,outerSpec:u,tooltipEncoding:l}=OBe(e,Gte,t);delete s.size;const c=Wte(a,i,r,s,t.errorbar),f=a.thickness,d=a.size,h={type:"tick",orient:o,aria:!1,...f!==void 0?{thickness:f}:{},...d!==void 0?{size:d}:{}},p=[...c({partName:"ticks",mark:h,positionPrefix:"lower",extraEncoding:l}),...c({partName:"ticks",mark:h,positionPrefix:"upper",extraEncoding:l}),...c({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...f!==void 0?{size:f}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l})];return{...u,transform:n,...p.length>1?{layer:p}:{...p[0]}}}function Qin(e,t){const{encoding:n}=e;if(Jin(n))return{orient:SBe(e,t),inputType:"raw"};const r=Zin(n),i=esn(n),s=n.x,o=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const a=n.x2,u=n.y2;if(Qt(a)&&Qt(u))throw new Error(`${t} cannot have both x2 and y2`);if(Qt(a)){if(og(s))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(Qt(u)){if(og(o))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const a=n.xError,u=n.xError2,l=n.yError,c=n.yError2;if(Qt(u)&&!Qt(a))throw new Error(`${t} cannot have xError2 without xError`);if(Qt(c)&&!Qt(l))throw new Error(`${t} cannot have yError2 without yError`);if(Qt(a)&&Qt(l))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(Qt(a)){if(og(s))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(Qt(l)){if(og(o))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function Jin(e){return(Qt(e.x)||Qt(e.y))&&!Qt(e.x2)&&!Qt(e.y2)&&!Qt(e.xError)&&!Qt(e.xError2)&&!Qt(e.yError)&&!Qt(e.yError2)}function Zin(e){return Qt(e.x2)||Qt(e.y2)}function esn(e){return Qt(e.xError)||Qt(e.xError2)||Qt(e.yError)||Qt(e.yError2)}function OBe(e,t,n){const{mark:r,encoding:i,params:s,projection:o,...a}=e,u=Xd(r)?r:{type:r};s&&Ue(E9e(t));const{orient:l,inputType:c}=Qin(e,t),{continuousAxisChannelDef:f,continuousAxisChannelDef2:d,continuousAxisChannelDefError:h,continuousAxisChannelDefError2:p,continuousAxis:m}=xBe(e,l,t),{errorBarSpecificAggregate:g,postAggregateCalculates:y,tooltipSummary:v,tooltipTitleWithFieldName:_}=tsn(u,f,d,h,p,c,t,n),{[m]:b,[m==="x"?"x2":"y2"]:E,[m==="x"?"xError":"yError"]:w,[m==="x"?"xError2":"yError2"]:x,...S}=i,{bins:I,timeUnits:C,aggregate:O,groupby:z,encoding:N}=bBe(S,n),$=[...O,...g],D=c!=="raw"?[]:z,B=vq(v,f,N,_);return{transform:[...a.transform??[],...I,...C,...$.length===0?[]:[{aggregate:$,groupby:D}],...y],groupby:D,continuousAxisChannelDef:f,continuousAxis:m,encodingWithoutContinuousAxis:N,ticksOrient:l==="vertical"?"horizontal":"vertical",markDef:u,outerSpec:a,tooltipEncoding:B}}function tsn(e,t,n,r,i,s,o,a){let u=[],l=[];const c=t.field;let f,d=!1;if(s==="raw"){const h=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":a.errorbar.center,p=e.extent?e.extent:h==="mean"?"stderr":"iqr";if(h==="median"!=(p==="iqr")&&Ue(hrn(h,p,o)),p==="stderr"||p==="stdev")u=[{op:p,field:c,as:`extent_${c}`},{op:h,field:c,as:`center_${c}`}],l=[{calculate:`datum["center_${c}"] + datum["extent_${c}"]`,as:`upper_${c}`},{calculate:`datum["center_${c}"] - datum["extent_${c}"]`,as:`lower_${c}`}],f=[{fieldPrefix:"center_",titlePrefix:UI(h)},{fieldPrefix:"upper_",titlePrefix:Lye(h,p,"+")},{fieldPrefix:"lower_",titlePrefix:Lye(h,p,"-")}],d=!0;else{let m,g,y;p==="ci"?(m="mean",g="ci0",y="ci1"):(m="median",g="q1",y="q3"),u=[{op:g,field:c,as:`lower_${c}`},{op:y,field:c,as:`upper_${c}`},{op:m,field:c,as:`center_${c}`}],f=[{fieldPrefix:"upper_",titlePrefix:Vb({field:c,aggregate:y,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:Vb({field:c,aggregate:g,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:Vb({field:c,aggregate:m,type:"quantitative"},a,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&Ue(drn(e.center,e.extent)),s==="aggregated-upper-lower"?(f=[],l=[{calculate:`datum["${n.field}"]`,as:`upper_${c}`},{calculate:`datum["${c}"]`,as:`lower_${c}`}]):s==="aggregated-error"&&(f=[{fieldPrefix:"",titlePrefix:c}],l=[{calculate:`datum["${c}"] + datum["${r.field}"]`,as:`upper_${c}`}],i?l.push({calculate:`datum["${c}"] + datum["${i.field}"]`,as:`lower_${c}`}):l.push({calculate:`datum["${c}"] - datum["${r.field}"]`,as:`lower_${c}`}));for(const h of l)f.push({fieldPrefix:h.as.substring(0,6),titlePrefix:J1(J1(h.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:l,errorBarSpecificAggregate:u,tooltipSummary:f,tooltipTitleWithFieldName:d}}function Lye(e,t,n){return`${UI(e)} ${n} ${t}`}const Yte="errorband",nsn=["band","borders"],rsn=new a5(Yte,PBe);function PBe(e,{config:t}){e={...e,encoding:u5(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,markDef:o,outerSpec:a,tooltipEncoding:u}=OBe(e,Yte,t),l=o,c=Wte(l,i,r,s,t.errorband),f=e.encoding.x!==void 0&&e.encoding.y!==void 0;let d={type:f?"area":"rect"},h={type:f?"line":"rule"};const p={...l.interpolate?{interpolate:l.interpolate}:{},...l.tension&&l.interpolate?{tension:l.tension}:{}};return f?(d={...d,...p,ariaRoleDescription:"errorband"},h={...h,...p,aria:!1}):l.interpolate?Ue(Cye("interpolate")):l.tension&&Ue(Cye("tension")),{...a,transform:n,layer:[...c({partName:"band",mark:d,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"lower",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"upper",extraEncoding:u})]}}const kBe={};function Kte(e,t,n){const r=new a5(e,t);kBe[e]={normalizer:r,parts:n}}function isn(){return Ne(kBe)}Kte(VL,ABe,Win);Kte(Gte,IBe,Kin);Kte(Yte,PBe,nsn);const ssn=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],$Be={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},RBe={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},osn=Ne($Be),asn=Ne(RBe),usn={header:1,headerRow:1,headerColumn:1,headerFacet:1},NBe=Ne(usn),DBe=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],lsn={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},csn={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},pf="_vgsid_",fsn={point:{on:"click",fields:[pf],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function Xte(e){return e==="legend"||!!(e!=null&&e.legend)}function jj(e){return Xte(e)&&st(e)}function Qte(e){return!!(e!=null&&e.select)}function LBe(e){const t=[];for(const n of e||[]){if(Qte(n))continue;const{expr:r,bind:i,...s}=n;if(i&&r){const o={...s,bind:i,init:r};t.push(o)}else{const o={...s,...r?{update:r}:{},...i?{bind:i}:{}};t.push(o)}}return t}function dsn(e){return l5(e)||Zte(e)||Jte(e)}function Jte(e){return"concat"in e}function l5(e){return"vconcat"in e}function Zte(e){return"hconcat"in e}function MBe({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function Jd(e){return st(e)&&e.step!==void 0}function Mye(e){return e.view||e.width||e.height}const Fye=20,hsn={align:1,bounds:1,center:1,columns:1,spacing:1},psn=Ne(hsn);function msn(e,t,n){const r=n[t],i={},{spacing:s,columns:o}=r;s!==void 0&&(i.spacing=s),o!==void 0&&(n5(e)&&!KI(e.facet)||Jte(e))&&(i.columns=o),l5(e)&&(i.columns=1);for(const a of psn)if(e[a]!==void 0)if(a==="spacing"){const u=e[a];i[a]=Jn(u)?u:{row:u.row??s,column:u.column??s}}else i[a]=e[a];return i}function _q(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function HL(e,t){const n=qL(e,t);return Jd(n)?n.step:FBe}function qL(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return qi(n,{step:e.step})}const FBe=20,gsn={continuousWidth:200,continuousHeight:200,step:FBe},ysn={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:gsn,mark:lin,arc:{},area:{},bar:din,circle:{},geoshape:{},image:{},line:{},point:{},rect:hin,rule:{color:"black"},square:{},text:{color:"black"},tick:pin,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:qrn,projection:{},legend:lsn,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:fsn,style:{},title:{},facet:{spacing:Fye},concat:{spacing:Fye},normalizedNumberFormat:".0%"},Sh=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],Bye={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},jye={blue:Sh[0],orange:Sh[1],red:Sh[2],teal:Sh[3],green:Sh[4],yellow:Sh[5],purple:Sh[6],pink:Sh[7],brown:Sh[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function vsn(e={}){return{signals:[{name:"color",value:st(e)?{...jye,...e}:jye}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function _sn(e){return{signals:[{name:"fontSize",value:st(e)?{...Bye,...e}:Bye}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function bsn(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function BBe(e){const t=Ne(e||{}),n={};for(const r of t){const i=e[r];n[r]=JI(i)?m9e(i):qu(i)}return n}function wsn(e){const t=Ne(e),n={};for(const r of t)n[r]=BBe(e[r]);return n}const Esn=[...X9e,...yBe,...NBe,"background","padding","legend","lineBreak","scale","style","title","view"];function jBe(e={}){const{color:t,font:n,fontSize:r,selection:i,...s}=e,o=XE({},qt(ysn),n?bsn(n):{},t?vsn(t):{},r?_sn(r):{},s||{});i&&QE(o,"selection",i,!0);const a=fu(o,Esn);for(const u of["background","lineBreak","padding"])o[u]&&(a[u]=qu(o[u]));for(const u of X9e)o[u]&&(a[u]=Ja(o[u]));for(const u of yBe)o[u]&&(a[u]=BBe(o[u]));for(const u of NBe)o[u]&&(a[u]=Ja(o[u]));return o.legend&&(a.legend=Ja(o.legend)),o.scale&&(a.scale=Ja(o.scale)),o.style&&(a.style=wsn(o.style)),o.title&&(a.title=Ja(o.title)),o.view&&(a.view=Ja(o.view)),a}const xsn=new Set(["view",...rin]),Ssn=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],Tsn={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...uin};function Asn(e){e=qt(e);for(const t of Ssn)delete e[t];if(e.axis)for(const t in e.axis)JI(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of ssn)delete e.legend[t];if(e.mark){for(const t of Oye)delete e.mark[t];e.mark.tooltip&&st(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(LBe(e.params)),delete e.params);for(const t of xsn){for(const r of Oye)delete e[t][r];const n=Tsn[t];if(n)for(const r of n)delete e[t][r];Isn(e,t)}for(const t of isn())delete e[t];Csn(e);for(const t in e)st(e[t])&&Or(e[t])&&delete e[t];return Or(e)?void 0:e}function Csn(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=p9e(e.title);Or(t)||(e.style["group-title"]={...e.style["group-title"],...t}),Or(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),Or(r)?delete e.title:e.title=r}function Isn(e,t,n,r){const i=r?e[t][r]:e[t];t==="view"&&(n="cell");const s={...i,...e.style[n??t]};Or(s)||(e.style[n??t]=s),r||delete e[t]}function c5(e){return"layer"in e}function Osn(e){return"repeat"in e}function Psn(e){return!Ie(e.repeat)&&e.repeat.layer}class ene{map(t,n){return n5(t)?this.mapFacet(t,n):Osn(t)?this.mapRepeat(t,n):Zte(t)?this.mapHConcat(t,n):l5(t)?this.mapVConcat(t,n):Jte(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(c5(t))return this.mapLayer(t,n);if(um(t))return this.mapUnit(t,n);throw new Error(gte(t))}mapLayer(t,n){return{...t,layer:t.layer.map(r=>this.mapLayerOrUnit(r,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(r=>this.map(r,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(r=>this.map(r,n))}}mapConcat(t,n){const{concat:r,...i}=t;return{...i,concat:r.map(s=>this.map(s,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const ksn={zero:1,center:1,normalize:1};function $sn(e){return e in ksn}const Rsn=new Set([G9e,JF,QF,ML,e5,$te,Rte,ZF,Y9e,kte]),Nsn=new Set([JF,QF,G9e]);function E_(e){return Ve(e)&&tE(e)==="quantitative"&&!e.bin}function zye(e,t,{orient:n,type:r}){const i=t==="x"?"y":"radius",s=t==="x"&&["bar","area"].includes(r),o=e[t],a=e[i];if(Ve(o)&&Ve(a))if(E_(o)&&E_(a)){if(o.stack)return t;if(a.stack)return i;const u=Ve(o)&&!!o.aggregate,l=Ve(a)&&!!a.aggregate;if(u!==l)return u?t:i;if(s){if(n==="vertical")return i;if(n==="horizontal")return t}}else{if(E_(o))return t;if(E_(a))return i}else{if(E_(o))return s&&n==="vertical"?void 0:t;if(E_(a))return s&&n==="horizontal"?void 0:i}}function Dsn(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function zBe(e,t){var m,g;const n=Xd(e)?e:{type:e},r=n.type;if(!Rsn.has(r))return null;const i=zye(t,"x",n)||zye(t,"theta",n);if(!i)return null;const s=t[i],o=Ve(s)?Je(s,{}):void 0,a=Dsn(i),u=[],l=new Set;if(t[a]){const y=t[a],v=Ve(y)?Je(y,{}):void 0;v&&v!==o&&(u.push(a),l.add(v))}const c=a==="x"?"xOffset":"yOffset",f=t[c],d=Ve(f)?Je(f,{}):void 0;d&&d!==o&&(u.push(c),l.add(d));const h=Ytn.reduce((y,v)=>{if(v!=="tooltip"&&v1(t,v)){const _=t[v];for(const b of nt(_)){const E=Qd(b);if(E.aggregate)continue;const w=Je(E,{});(!w||!l.has(w))&&y.push({channel:v,fieldDef:E})}}return y},[]);let p;return s.stack!==void 0?L0(s.stack)?p=s.stack?"zero":null:p=s.stack:Nsn.has(r)&&(p="zero"),!p||!$sn(p)||Vte(t)&&h.length===0?null:(m=s==null?void 0:s.scale)!=null&&m.type&&((g=s==null?void 0:s.scale)==null?void 0:g.type)!==du.LINEAR?(s!=null&&s.stack&&Ue(lrn(s.scale.type)),null):Qt(t[ph(i)])?(s.stack!==void 0&&Ue(urn(i)),null):(Ve(s)&&s.aggregate&&!onn.has(s.aggregate)&&Ue(crn(s.aggregate)),{groupbyChannels:u,groupbyFields:l,fieldChannel:i,impute:s.impute===null?!1:W0(r),stackBy:h,offset:p})}function UBe(e,t,n){const r=Ja(e),i=fr("orient",r,n);if(r.orient=Bsn(r.type,t,i),i!==void 0&&i!==r.orient&&Ue(Wnn(r.orient,i)),r.type==="bar"&&r.orient){const u=fr("cornerRadiusEnd",r,n);if(u!==void 0){const l=r.orient==="horizontal"&&t.x2||r.orient==="vertical"&&t.y2?["cornerRadius"]:fin[r.orient];for(const c of l)r[c]=u;r.cornerRadiusEnd!==void 0&&delete r.cornerRadiusEnd}}const s=fr("opacity",r,n),o=fr("fillOpacity",r,n);return s===void 0&&o===void 0&&(r.opacity=Msn(r.type,t)),fr("cursor",r,n)===void 0&&(r.cursor=Lsn(r,t,n)),r}function Lsn(e,t,n){return t.href||e.href||fr("href",e,n)?"pointer":e.cursor}function Msn(e,t){if($n([e5,kte,$te,Rte],e)&&!Vte(t))return .7}function Fsn(e,t,{graticule:n}){if(n)return!1;const r=Fp("filled",e,t),i=e.type;return qi(r,i!==e5&&i!==ZF&&i!==ML)}function Bsn(e,t,n){switch(e){case e5:case $te:case Rte:case Y9e:case tin:case ein:return}const{x:r,y:i,x2:s,y2:o}=t;switch(e){case JF:if(Ve(r)&&(so(r.bin)||Ve(i)&&i.aggregate&&!r.aggregate))return"vertical";if(Ve(i)&&(so(i.bin)||Ve(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(o||s){if(n)return n;if(!s)return(Ve(r)&&r.type===tv&&!Hr(r.bin)||BL(r))&&Ve(i)&&so(i.bin)?"horizontal":"vertical";if(!o)return(Ve(i)&&i.type===tv&&!Hr(i.bin)||BL(i))&&Ve(r)&&so(r.bin)?"vertical":"horizontal"}case ML:if(s&&!(Ve(r)&&so(r.bin))&&o&&!(Ve(i)&&so(i.bin)))return;case QF:if(o)return Ve(i)&&so(i.bin)?"horizontal":"vertical";if(s)return Ve(r)&&so(r.bin)?"vertical":"horizontal";if(e===ML){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case ZF:case kte:{const a=Rye(r),u=Rye(i);if(n)return n;if(a&&!u)return e!=="tick"?"horizontal":"vertical";if(!a&&u)return e!=="tick"?"vertical":"horizontal";if(a&&u)return"vertical";{const l=ka(r)&&r.type===Zw,c=ka(i)&&i.type===Zw;if(l&&!c)return"vertical";if(!l&&c)return"horizontal"}return}}return"vertical"}function jsn(e){const{point:t,line:n,...r}=e;return Ne(r).length>1?r:r.type}function zsn(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:fu(e[t],["point","line"])});return e}function zj(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?st(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?st(t.point)?t.point:{}:void 0}function Uye(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class Usn{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(um(t)){const{mark:r,encoding:i}=t,s=Xd(r)?r:{type:r};switch(s.type){case"line":case"rule":case"trail":return!!zj(s,n[s.type],i);case"area":return!!zj(s,n[s.type],i)||!!Uye(s,n[s.type])}}return!1}run(t,n,r){const{config:i}=n,{params:s,projection:o,mark:a,name:u,encoding:l,...c}=t,f=u5(l,i),d=Xd(a)?a:{type:a},h=zj(d,i[d.type],f),p=d.type==="area"&&Uye(d,i[d.type]),m=[{name:u,...s?{params:s}:{},mark:jsn({...d.type==="area"&&d.opacity===void 0&&d.fillOpacity===void 0?{opacity:.7}:{},...d}),encoding:fu(f,["shape"])}],g=zBe(UBe(d,f,i),f);let y=f;if(g){const{fieldChannel:v,offset:_}=g;y={...f,[v]:{...f[v],..._?{stack:_}:{}}}}return y=fu(y,["y2","x2"]),p&&m.push({...o?{projection:o}:{},mark:{type:"line",...Kw(d,["clip","interpolate","tension","tooltip"]),...p},encoding:y}),h&&m.push({...o?{projection:o}:{},mark:{type:"point",opacity:1,filled:!0,...Kw(d,["clip","tooltip"]),...h},encoding:y}),r({...c,layer:m},{...n,config:zsn(i)})}}function Vsn(e,t){return t?KI(e)?HBe(e,t):VBe(e,t):e}function Uj(e,t){return t?HBe(e,t):e}function bq(e,t,n){const r=t[e];if(Tin(r)){if(r.repeat in n)return{...t,[e]:n[r.repeat]};Ue(Ann(r.repeat));return}return t}function VBe(e,t){if(e=bq("field",e,t),e!==void 0){if(e===null)return null;if(Bte(e)&&Pd(e.sort)){const n=bq("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function Vye(e,t){if(Ve(e))return VBe(e,t);{const n=bq("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function Hye(e,t){if(Qt(e)){const n=Vye(e,t);if(n)return n;if(r5(e))return{condition:e.condition}}else{if(XI(e)){const n=Vye(e.condition,t);if(n)return{...e,condition:n};{const{condition:r,...i}=e;return i}}return e}}function HBe(e,t){const n={};for(const r in e)if(Nt(e,r)){const i=e[r];if(Ie(i))n[r]=i.map(s=>Hye(s,t)).filter(s=>s);else{const s=Hye(i,t);s!==void 0&&(n[r]=s)}}return n}class Hsn{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(um(t)){const{encoding:n,mark:r}=t;if(r==="line"||Xd(r)&&r.type==="line")for(const i of qtn){const s=Uv(i),o=n[s];if(n[i]&&(Ve(o)&&!so(o.bin)||gh(o)))return!0}}return!1}run(t,n,r){const{encoding:i,mark:s}=t;return Ue(qnn(!!i.x2,!!i.y2)),r({...t,mark:st(s)?{...s,type:"rule"}:"rule"},n)}}class qsn extends ene{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[Gin,Xin,rsn,new Usn,new Hsn]}map(t,n){if(um(t)){const r=v1(t.encoding,dp),i=v1(t.encoding,hp),s=v1(t.encoding,zF);if(r||i||s)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:r,parentProjection:i}=n,s=Uj(t.encoding,n.repeater),o={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(u=>u).join("_")}:{},...s?{encoding:s}:{}};if(r||i)return this.mapUnitWithParentEncodingOrProjection(o,n);const a=this.mapLayerOrUnit.bind(this);for(const u of this.nonFacetUnitNormalizers)if(u.hasMatchingType(o,n.config))return u.run(o,n,a);return o}mapRepeat(t,n){return Psn(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:r,spec:i,...s}=t,{row:o,column:a,layer:u}=r,{repeater:l={},repeaterPrefix:c=""}=n;return o||a?this.mapRepeat({...t,repeat:{...o?{row:o}:{},...a?{column:a}:{}},spec:{repeat:{layer:u},spec:i}},n):{...s,layer:u.map(f=>{const d={...l,layer:f},h=`${(i.name?`${i.name}_`:"")+c}child__layer_${hi(f)}`,p=this.mapLayerOrUnit(i,{...n,repeater:d,repeaterPrefix:h});return p.name=h,p})}}mapNonLayerRepeat(t,n){const{repeat:r,spec:i,data:s,...o}=t;!Ie(r)&&t.columns&&(t=fu(t,["columns"]),Ue(xye("repeat")));const a=[],{repeater:u={},repeaterPrefix:l=""}=n,c=!Ie(r)&&r.row||[u?u.row:null],f=!Ie(r)&&r.column||[u?u.column:null],d=Ie(r)&&r||[u?u.repeat:null];for(const p of d)for(const m of c)for(const g of f){const y={repeat:p,row:m,column:g,layer:u.layer},v=(i.name?`${i.name}_`:"")+l+"child__"+(Ie(r)?`${hi(p)}`:(r.row?`row_${hi(m)}`:"")+(r.column?`column_${hi(g)}`:"")),_=this.map(i,{...n,repeater:y,repeaterPrefix:v});_.name=v,a.push(fu(_,["data"]))}const h=Ie(r)?t.columns:r.column?r.column.length:1;return{data:i.data??s,align:"all",...o,columns:h,concat:a}}mapFacet(t,n){const{facet:r}=t;return KI(r)&&t.columns&&(t=fu(t,["columns"]),Ue(xye("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:r,projection:i}=t,{parentEncoding:s,parentProjection:o,config:a}=n,u=Wye({parentProjection:o,projection:i}),l=qye({parentEncoding:s,encoding:Uj(r,n.repeater)});return this.mapUnit({...t,...u?{projection:u}:{},...l?{encoding:l}:{}},{config:a})}mapFacetedUnit(t,n){const{row:r,column:i,facet:s,...o}=t.encoding,{mark:a,width:u,projection:l,height:c,view:f,params:d,encoding:h,...p}=t,{facetMapping:m,layout:g}=this.getFacetMappingAndLayout({row:r,column:i,facet:s},n),y=Uj(o,n.repeater);return this.mapFacet({...p,...g,facet:m,spec:{...u?{width:u}:{},...c?{height:c}:{},...f?{view:f}:{},...l?{projection:l}:{},mark:a,encoding:y,...d?{params:d}:{}}},n)}getFacetMappingAndLayout(t,n){const{row:r,column:i,facet:s}=t;if(r||i){s&&Ue(Vnn([...r?[dp]:[],...i?[hp]:[]]));const o={},a={};for(const u of[dp,hp]){const l=t[u];if(l){const{align:c,center:f,spacing:d,columns:h,...p}=l;o[u]=p;for(const m of["align","center","spacing"])l[m]!==void 0&&(a[m]??(a[m]={}),a[m][u]=l[m])}}return{facetMapping:o,layout:a}}else{const{align:o,center:a,spacing:u,columns:l,...c}=s;return{facetMapping:Vsn(c,n.repeater),layout:{...o?{align:o}:{},...a?{center:a}:{},...u?{spacing:u}:{},...l?{columns:l}:{}}}}}mapLayer(t,{parentEncoding:n,parentProjection:r,...i}){const{encoding:s,projection:o,...a}=t,u={...i,parentEncoding:qye({parentEncoding:n,encoding:s,layer:!0}),parentProjection:Wye({parentProjection:r,projection:o})};return super.mapLayer({...a,...t.name?{name:[u.repeaterPrefix,t.name].filter(l=>l).join("_")}:{}},u)}}function qye({parentEncoding:e,encoding:t={},layer:n}){let r={};if(e){const i=new Set([...Ne(e),...Ne(t)]);for(const s of i){const o=t[s],a=e[s];if(Qt(o)){const u={...a,...o};r[s]=u}else XI(o)?r[s]={...o,condition:{...a,...o.condition}}:o||o===null?r[s]=o:(n||hf(a)||Tt(a)||Qt(a)||Ie(a))&&(r[s]=a)}}else r=t;return!r||Or(r)?void 0:r}function Wye(e){const{parentProjection:t,projection:n}=e;return t&&n&&Ue($nn({parentProjection:t,projection:n})),n??t}function tne(e){return"filter"in e}function Wsn(e){return(e==null?void 0:e.stop)!==void 0}function qBe(e){return"lookup"in e}function Gsn(e){return"data"in e}function Ysn(e){return"param"in e}function Ksn(e){return"pivot"in e}function Xsn(e){return"density"in e}function Qsn(e){return"quantile"in e}function Jsn(e){return"regression"in e}function Zsn(e){return"loess"in e}function eon(e){return"sample"in e}function ton(e){return"window"in e}function non(e){return"joinaggregate"in e}function ron(e){return"flatten"in e}function ion(e){return"calculate"in e}function WBe(e){return"bin"in e}function son(e){return"impute"in e}function oon(e){return"timeUnit"in e}function aon(e){return"aggregate"in e}function uon(e){return"stack"in e}function lon(e){return"fold"in e}function con(e){return"extent"in e&&!("density"in e)}function fon(e){return e.map(t=>tne(t)?{filter:zb(t.filter,Frn)}:t)}class don extends ene{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=Gye(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=Gye(t,n),t.encoding){const r={};for(const[i,s]of l0(t.encoding))r[i]=GBe(s,n);t={...t,encoding:r}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:r,...i}=t;return r?{...i,params:l0(r).map(([s,o])=>{const{init:a,bind:u,empty:l,...c}=o;c.type==="single"?(c.type="point",c.toggle=!1):c.type==="multi"&&(c.type="point"),n.emptySelections[s]=l!=="none";for(const f of yo(n.selectionPredicates[s]??{}))f.empty=l!=="none";return{name:s,value:a,select:c,bind:u}})}:t}}function Gye(e,t){const{transform:n,...r}=e;if(n){const i=n.map(s=>{if(tne(s))return{filter:wq(s,t)};if(WBe(s)&&Vv(s.bin))return{...s,bin:YBe(s.bin)};if(qBe(s)){const{selection:o,...a}=s.from;return o?{...s,from:{param:o,...a}}:s}return s});return{...r,transform:i}}return e}function GBe(e,t){var r,i;const n=qt(e);if(Ve(n)&&Vv(n.bin)&&(n.bin=YBe(n.bin)),Wv(n)&&((i=(r=n.scale)==null?void 0:r.domain)!=null&&i.selection)){const{selection:s,...o}=n.scale.domain;n.scale.domain={...o,...s?{param:s}:{}}}if(r5(n))if(Ie(n.condition))n.condition=n.condition.map(s=>{const{selection:o,param:a,test:u,...l}=s;return a?s:{...l,test:wq(s,t)}});else{const{selection:s,param:o,test:a,...u}=GBe(n.condition,t);n.condition=o?n.condition:{...u,test:wq(n.condition,t)}}return n}function YBe(e){const t=e.extent;if(t!=null&&t.selection){const{selection:n,...r}=t;return{...e,extent:{...r,param:n}}}return e}function wq(e,t){const n=r=>zb(r,i=>{var s;const o=t.emptySelections[i]??!0,a={param:i,empty:o};return(s=t.selectionPredicates)[i]??(s[i]=[]),t.selectionPredicates[i].push(a),a});return e.selection?n(e.selection):zb(e.test||e.filter,r=>r.selection?n(r.selection):r)}class Eq extends ene{map(t,n){const r=n.selections??[];if(t.params&&!um(t)){const i=[];for(const s of t.params)Qte(s)?r.push(s):i.push(s);t.params=i}return n.selections=r,super.map(t,n)}mapUnit(t,n){const r=n.selections;if(!r||!r.length)return t;const i=(n.path??[]).concat(t.name),s=[];for(const o of r)if(!o.views||!o.views.length)s.push(o);else for(const a of o.views)(rt(a)&&(a===t.name||i.includes(a))||Ie(a)&&a.map(u=>i.indexOf(u)).every((u,l,c)=>u!==-1&&(l===0||u>c[l-1])))&&s.push(o);return s.length&&(t.params=s),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=Eq.prototype[e];Eq.prototype[e]=function(n,r){return t.call(this,n,hon(n,r))}}function hon(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function KBe(e,t){t===void 0&&(t=jBe(e.config));const n=yon(e,t),{width:r,height:i}=e,s=von(n,{width:r,height:i,autosize:e.autosize},t);return{...n,...s?{autosize:s}:{}}}const pon=new qsn,mon=new don,gon=new Eq;function yon(e,t={}){const n={config:t};return gon.map(pon.map(mon.map(e,n),n),n)}function Yye(e){return rt(e)?{type:e}:e??{}}function von(e,t,n){let{width:r,height:i}=t;const s=um(e)||c5(e),o={};s?r=="container"&&i=="container"?(o.type="fit",o.contains="padding"):r=="container"?(o.type="fit-x",o.contains="padding"):i=="container"&&(o.type="fit-y",o.contains="padding"):(r=="container"&&(Ue(_ye("width")),r=void 0),i=="container"&&(Ue(_ye("height")),i=void 0));const a={type:"pad",...o,...n?Yye(n.autosize):{},...Yye(e.autosize)};if(a.type==="fit"&&!s&&(Ue(mnn),a.type="pad"),r=="container"&&!(a.type=="fit"||a.type=="fit-x")&&Ue(bye("width")),i=="container"&&!(a.type=="fit"||a.type=="fit-y")&&Ue(bye("height")),!Xu(a,{type:"pad"}))return a}function _on(e){return e==="fit"||e==="fit-x"||e==="fit-y"}function bon(e){return e?`fit-${WF(e)}`:"fit"}const won=["background","padding"];function Kye(e,t){const n={};for(const r of won)e&&e[r]!==void 0&&(n[r]=qu(e[r]));return t&&(n.params=e.params),n}class lm{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new lm(qt(this.explicit),qt(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return qi(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:r}){n!==void 0&&this.set(t,n,r)}set(t,n,r){return delete this[r?"implicit":"explicit"][t],this[r?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:r}){n[t]!==void 0?this.set(t,n[t],!0):r[t]!==void 0&&this.set(t,r[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of Ne(t.combine())){const r=t.getWithExplicit(n);this.setWithExplicit(n,r)}}}function Kf(e){return{explicit:!0,value:e}}function Lu(e){return{explicit:!1,value:e}}function XBe(e){return(t,n,r,i)=>{const s=e(t.value,n.value);return s>0?t:s<0?n:f5(t,n,r,i)}}function f5(e,t,n,r){return e.explicit&&t.explicit&&Ue(trn(n,r,e.value,t.value)),e}function d0(e,t,n,r,i=f5){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:Xu(e.value,t.value)?e:i(e,t,n,r)}class Eon extends lm{constructor(t={},n={},r=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=r}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function iE(e){return"url"in e}function XA(e){return"values"in e}function QBe(e){return"name"in e&&!iE(e)&&!XA(e)&&!kg(e)}function kg(e){return e&&(JBe(e)||ZBe(e)||nne(e))}function JBe(e){return"sequence"in e}function ZBe(e){return"sphere"in e}function nne(e){return"graticule"in e}var zr;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup"})(zr||(zr={}));function eje(e){const{signals:t,hasLegend:n,index:r,...i}=e;return i.field=oc(i.field),i}function iv(e,t=!0,n=ta){if(Ie(e)){const r=e.map(i=>iv(i,t,n));return t?`[${r.join(", ")}]`:r}else if(Hv(e))return n(t?ev(e):Arn(e));return t?n(Pr(e)):e}function xon(e,t){for(const n of yo(e.component.selection??{})){const r=n.name;let i=`${r}${p0}, ${n.resolve==="global"?"true":`{unit: ${_1(e)}}`}`;for(const s of m5)s.defined(n)&&(s.signals&&(t=s.signals(e,n,t)),s.modifyExpr&&(i=s.modifyExpr(e,n,i)));t.push({name:r+tan,on:[{events:{signal:n.name+p0},update:`modify(${Xe(n.name+sv)}, ${i})`}]})}return rne(t)}function Son(e,t){if(e.component.selection&&Ne(e.component.selection).length){const n=Xe(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:F0("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return rne(t)}function Ton(e,t){let n=!1;for(const r of yo(e.component.selection??{})){const i=r.name,s=Xe(i+sv);if(t.filter(a=>a.name===i).length===0){const a=r.resolve==="global"?"union":r.resolve,u=r.type==="point"?", true, true)":")";t.push({name:r.name,update:`${vje}(${s}, ${Xe(a)}${u}`})}n=!0;for(const a of m5)a.defined(r)&&a.topLevelSignals&&(t=a.topLevelSignals(e,r,t))}return n&&t.filter(i=>i.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),rne(t)}function Aon(e,t){const n=[...t],r=_1(e,{escape:!1});for(const i of yo(e.component.selection??{})){const s={name:i.name+sv};if(i.project.hasSelectionId&&(s.transform=[{type:"collect",sort:{field:pf}}]),i.init){const a=i.project.items.map(eje);s.values=i.project.hasSelectionId?i.init.map(u=>({unit:r,[pf]:iv(u,!1)[0]})):i.init.map(u=>({unit:r,fields:a,values:iv(u,!1)}))}n.filter(a=>a.name===i.name+sv).length||n.push(s)}return n}function tje(e,t){for(const n of yo(e.component.selection??{}))for(const r of m5)r.defined(n)&&r.marks&&(t=r.marks(e,n,t));return t}function Con(e,t){for(const n of e.children)$i(n)&&(t=tje(n,t));return t}function Ion(e,t,n,r){const i=xje(e,t.param,t);return{signal:dl(n.get("type"))&&Ie(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}function rne(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}class Sr{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){Ue(Onn);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const i of this._children)i.parent=t;this._children=[],t.removeChild(this);const r=t.parent.removeChild(t);this._parent=n,n.addChild(this,r),t.parent=this}}class Sa extends Sr{clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,r,i){super(t,n),this.type=r,this.refCounts=i,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${Q8e()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}function Vj(e){return e.as!==void 0}function Xye(e){return`${e}_end`}class kd extends Sr{clone(){return new kd(null,qt(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{const{field:a,timeUnit:u}=s;if(u){let l;if(qv(u)){if($i(n)){const{mark:c,markDef:f,config:d}=n,h=f0({fieldDef:s,markDef:f,config:d});(KA(c)||h)&&(l={timeUnit:Hs(u),field:a})}}else l={as:Je(s,{forAs:!0}),field:a,timeUnit:u};if($i(n)){const{mark:c,markDef:f,config:d}=n,h=f0({fieldDef:s,markDef:f,config:d});KA(c)&&Wi(o)&&h!==.5&&(l.rectBandPosition=h)}l&&(i[kn(l)]=l)}return i},{});return Or(r)?null:new kd(t,r)}static makeFromTransform(t,n){const{timeUnit:r,...i}={...n},s=Hs(r),o={...i,timeUnit:s};return new kd(t,{[kn(o)]:o})}merge(t){this.timeUnits={...this.timeUnits};for(const n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[r,i]of l0(this.timeUnits)){const s=Vj(i)?i.as:`${i.field}_end`;t.has(s)||(n[r]=i)}this.timeUnits=n}producedFields(){return new Set(yo(this.timeUnits).map(t=>Vj(t)?t.as:Xye(t.field)))}dependentFields(){return new Set(yo(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${kn(this.timeUnits)}`}assemble(){const t=[];for(const n of yo(this.timeUnits)){const{rectBandPosition:r}=n,i=Hs(n.timeUnit);if(Vj(n)){const{field:s,as:o}=n,{unit:a,utc:u,...l}=i,c=[o,`${o}_end`];t.push({field:oc(s),type:"timeunit",...a?{units:XF(a)}:{},...u?{timezone:"utc"}:{},...l,as:c}),t.push(...Qye(c,r,i))}else if(n){const{field:s}=n,o=s.replaceAll("\\.","."),a=nje({timeUnit:i,field:o}),u=Xye(o);t.push({type:"formula",expr:a,as:u}),t.push(...Qye([o,u],r,i))}}return t}}const d5="offsetted_rect_start",h5="offsetted_rect_end";function nje({timeUnit:e,field:t,reverse:n}){const{unit:r,utc:i}=e,s=R9e(r),{part:o,step:a}=M9e(s,e.step);return`${i?"utcOffset":"timeOffset"}('${o}', datum['${t}'], ${n?-a:a})`}function Qye([e,t],n,r){if(n!==void 0&&n!==.5){const i=`datum['${e}']`,s=`datum['${t}']`;return[{type:"formula",expr:Jye([nje({timeUnit:r,field:e,reverse:!0}),i],n+.5),as:`${e}_${d5}`},{type:"formula",expr:Jye([i,s],n+.5),as:`${e}_${h5}`}]}return[]}function Jye([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const ZI="_tuple_fields";class Oon{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const Pon={defined:()=>!0,parse:(e,t,n)=>{const r=t.name,i=t.project??(t.project=new Oon),s={},o={},a=new Set,u=(p,m)=>{const g=m==="visual"?p.channel:p.field;let y=hi(`${r}_${g}`);for(let v=1;a.has(y);v++)y=hi(`${r}_${g}_${v}`);return a.add(y),{[m]:y}},l=t.type,c=e.config.selection[l],f=n.value!==void 0?nt(n.value):null;let{fields:d,encodings:h}=st(n.select)?n.select:{};if(!d&&!h&&f){for(const p of f)if(st(p))for(const m of Ne(p))Htn(m)?(h||(h=[])).push(m):l==="interval"?(Ue(Tnn),h=c.encodings):(d??(d=[])).push(m)}!d&&!h&&(h=c.encodings,"fields"in c&&(d=c.fields));for(const p of h??[]){const m=e.fieldDef(p);if(m){let g=m.field;if(m.aggregate){Ue(gnn(p,m.aggregate));continue}else if(!g){Ue(Eye(p));continue}if(m.timeUnit&&!qv(m.timeUnit)){g=e.vgField(p);const y={timeUnit:m.timeUnit,as:g,field:m.field};o[kn(y)]=y}if(!s[g]){const y=l==="interval"&&am(p)&&dl(e.getScaleComponent(p).get("type"))?"R":m.bin?"R-RE":"E",v={field:g,channel:p,type:y,index:i.items.length};v.signals={...u(v,"data"),...u(v,"visual")},i.items.push(s[g]=v),i.hasField[g]=s[g],i.hasSelectionId=i.hasSelectionId||g===pf,r9e(p)?(v.geoChannel=p,v.channel=n9e(p),i.hasChannel[v.channel]=s[g]):i.hasChannel[p]=s[g]}}else Ue(Eye(p))}for(const p of d??[]){if(i.hasField[p])continue;const m={type:"E",field:p,index:i.items.length};m.signals={...u(m,"data")},i.items.push(m),i.hasField[p]=m,i.hasSelectionId=i.hasSelectionId||p===pf}f&&(t.init=f.map(p=>i.items.map(m=>st(p)?p[m.geoChannel||m.channel]!==void 0?p[m.geoChannel||m.channel]:p[m.field]:p))),Or(o)||(i.timeUnit=new kd(null,o))},signals:(e,t,n)=>{const r=t.name+ZI;return n.filter(s=>s.name===r).length>0||t.project.hasSelectionId?n:n.concat({name:r,value:t.project.items.map(eje)})}},pp={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const r of t.project.items){const i=r.channel;if(!am(i))continue;const s=e.getScaleComponent(i),o=s?s.get("type"):void 0;if(o=="sequential"&&Ue(bnn),!s||!dl(o)){Ue(_nn);continue}s.set("selectionExtent",{param:t.name,field:r.field},!0),n.push(r)}},topLevelSignals:(e,t,n)=>{const r=t.scales.filter(o=>n.filter(a=>a.name===o.signals.data).length===0);if(!e.parent||Zye(e)||r.length===0)return n;const i=n.filter(o=>o.name===t.name)[0];let s=i.update;if(s.indexOf(vje)>=0)i.update=`{${r.map(o=>`${Xe(oc(o.field))}: ${o.signals.data}`).join(", ")}}`;else{for(const o of r){const a=`${Xe(oc(o.field))}: ${o.signals.data}`;s.includes(a)||(s=`${s.substring(0,s.length-1)}, ${a}}`)}i.update=s}return n.concat(r.map(o=>({name:o.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!Zye(e))for(const r of t.scales){const i=n.find(s=>s.name===r.signals.data);i.push="outer",delete i.value,delete i.update}return n}};function xq(e,t){return`domain(${Xe(e.scaleName(t))})`}function Zye(e){return e.parent&&px(e.parent)&&!e.parent.parent}const Hb="_brush",rje="_scale_trigger",TS="geo_interval_init_tick",ije="_init",kon="_center",$on={defined:e=>e.type==="interval",parse:(e,t,n)=>{var r;if(e.hasProjection){const i={...st(n.select)?n.select:{}};i.fields=[pf],i.encodings||(i.encodings=n.value?Ne(n.value):[Pf,Of]),n.select={type:"interval",...i}}if(t.translate&&!pp.defined(t)){const i=`!event.item || event.item.mark.name !== ${Xe(t.name+Hb)}`;for(const s of t.events){if(!s.between){Ue(`${s} is not an ordered event stream for interval selections.`);continue}const o=nt((r=s.between[0]).filter??(r.filter=[]));o.indexOf(i)<0&&o.push(i)}}},signals:(e,t,n)=>{const r=t.name,i=r+p0,s=yo(t.project.hasChannel).filter(a=>a.channel===pi||a.channel===Ks),o=t.init?t.init[0]:null;if(n.push(...s.reduce((a,u)=>a.concat(Ron(e,t,u,o&&o[u.index])),[])),e.hasProjection){const a=Xe(e.projectionName()),u=e.projectionName()+kon,{x:l,y:c}=t.project.hasChannel,f=l&&l.signals.visual,d=c&&c.signals.visual,h=l?o&&o[l.index]:`${u}[0]`,p=c?o&&o[c.index]:`${u}[1]`,m=E=>e.getSizeSignalRef(E).signal,g=`[[${f?f+"[0]":"0"}, ${d?d+"[0]":"0"}],[${f?f+"[1]":m("width")}, ${d?d+"[1]":m("height")}]]`;o&&(n.unshift({name:r+ije,init:`[scale(${a}, [${l?h[0]:h}, ${c?p[0]:p}]), scale(${a}, [${l?h[1]:h}, ${c?p[1]:p}])]`}),(!l||!c)&&(n.find(w=>w.name===u)||n.unshift({name:u,update:`invert(${a}, [${m("width")}/2, ${m("height")}/2])`})));const y=`intersect(${g}, {markname: ${Xe(e.getName("marks"))}}, unit.mark)`,v=`{unit: ${_1(e)}}`,_=`vlSelectionTuples(${y}, ${v})`,b=s.map(E=>E.signals.visual);return n.concat({name:i,on:[{events:[...b.length?[{signal:b.join(" || ")}]:[],...o?[{signal:TS}]:[]],update:_}]})}else{if(!pp.defined(t)){const l=r+rje,c=s.map(f=>{const d=f.channel,{data:h,visual:p}=f.signals,m=Xe(e.scaleName(d)),g=e.getScaleComponent(d).get("type"),y=dl(g)?"+":"";return`(!isArray(${h}) || (${y}invert(${m}, ${p})[0] === ${y}${h}[0] && ${y}invert(${m}, ${p})[1] === ${y}${h}[1]))`});c.length&&n.push({name:l,value:{},on:[{events:s.map(f=>({scale:e.scaleName(f.channel)})),update:c.join(" && ")+` ? ${l} : {}`}]})}const a=s.map(l=>l.signals.data),u=`unit: ${_1(e)}, fields: ${r+ZI}, values`;return n.concat({name:i,...o?{init:`{${u}: ${iv(o)}}`}:{},...a.length?{on:[{events:[{signal:a.join(" || ")}],update:`${a.join(" && ")} ? {${u}: [${a}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>($i(e)&&e.hasProjection&&t.init&&(n.filter(i=>i.name===TS).length||n.unshift({name:TS,value:null,on:[{events:"timer{1}",update:`${TS} === null ? {} : ${TS}`}]})),n),marks:(e,t,n)=>{const r=t.name,{x:i,y:s}=t.project.hasChannel,o=i==null?void 0:i.signals.visual,a=s==null?void 0:s.signals.visual,u=`data(${Xe(t.name+sv)})`;if(pp.defined(t)||!i&&!s)return n;const l={x:i!==void 0?{signal:`${o}[0]`}:{value:0},y:s!==void 0?{signal:`${a}[0]`}:{value:0},x2:i!==void 0?{signal:`${o}[1]`}:{field:{group:"width"}},y2:s!==void 0?{signal:`${a}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const g of Ne(l))l[g]=[{test:`${u}.length && ${u}[0].unit === ${_1(e)}`,...l[g]},{value:0}];const{fill:c,fillOpacity:f,cursor:d,...h}=t.mark,p=Ne(h).reduce((g,y)=>(g[y]=[{test:[i!==void 0&&`${o}[0] !== ${o}[1]`,s!==void 0&&`${a}[0] !== ${a}[1]`].filter(v=>v).join(" && "),value:h[y]},{value:null}],g),{}),m=d??(t.translate?"move":null);return[{name:`${r+Hb}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:c},fillOpacity:{value:f}},update:l}},...n,{name:r+Hb,type:"rect",clip:!0,encode:{enter:{...m?{cursor:{value:m}}:{},fill:{value:"transparent"}},update:{...l,...p}}}]}};function Ron(e,t,n,r){const i=!e.hasProjection,s=n.channel,o=n.signals.visual,a=Xe(i?e.scaleName(s):e.projectionName()),u=d=>`scale(${a}, ${d})`,l=e.getSizeSignalRef(s===pi?"width":"height").signal,c=`${s}(unit)`,f=t.events.reduce((d,h)=>[...d,{events:h.between[0],update:`[${c}, ${c}]`},{events:h,update:`[${o}[0], clamp(${c}, 0, ${l})]`}],[]);if(i){const d=n.signals.data,h=pp.defined(t),p=e.getScaleComponent(s),m=p?p.get("type"):void 0,g=r?{init:iv(r,!0,u)}:{value:[]};return f.push({events:{signal:t.name+rje},update:dl(m)?`[${u(`${d}[0]`)}, ${u(`${d}[1]`)}]`:"[0, 0]"}),h?[{name:d,on:[]}]:[{name:o,...g,on:f},{name:d,...r?{init:iv(r)}:{},on:[{events:{signal:o},update:`${o}[0] === ${o}[1] ? null : invert(${a}, ${o})`}]}]}else{const d=s===pi?0:1,h=t.name+ije,p=r?{init:`[${h}[0][${d}], ${h}[1][${d}]]`}:{value:[]};return[{name:o,...p,on:f}]}}const Non={defined:e=>e.type==="point",signals:(e,t,n)=>{const r=t.name,i=r+ZI,s=t.project,o="(item().isVoronoi ? datum.datum : datum)",a=yo(e.component.selection??{}).reduce((f,d)=>d.type==="interval"?f.concat(d.name+Hb):f,[]).map(f=>`indexof(item().mark.name, '${f}') < 0`).join(" && "),u=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${a?` && ${a}`:""}`;let l=`unit: ${_1(e)}, `;if(t.project.hasSelectionId)l+=`${pf}: ${o}[${Xe(pf)}]`;else{const f=s.items.map(d=>{const h=e.fieldDef(d.channel);return h!=null&&h.bin?`[${o}[${Xe(e.vgField(d.channel,{}))}], ${o}[${Xe(e.vgField(d.channel,{binSuffix:"end"}))}]]`:`${o}[${Xe(d.field)}]`}).join(", ");l+=`fields: ${i}, values: [${f}]`}const c=t.events;return n.concat([{name:r+p0,on:c?[{events:c,update:`${u} ? {${l}} : null`,force:!0}]:[]}])}};function cx(e,t,n,r){const i=r5(t)&&t.condition,s=r(t);if(i){const a=nt(i).map(u=>{const l=r(u);if(Sin(u)){const{param:c,empty:f}=u;return{test:Eje(e,{param:c,empty:f}),...l}}else return{test:YL(e,u.test),...l}});return{[n]:[...a,...s!==void 0?[s]:[]]}}else return s!==void 0?{[n]:s}:{}}function ine(e,t="text"){const n=e.encoding[t];return cx(e,n,t,r=>p5(r,e.config))}function p5(e,t,n="datum"){if(e){if(hf(e))return Xr(e.value);if(Qt(e)){const{format:r,formatType:i}=zL(e);return Mte({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function sje(e,t={}){const{encoding:n,markDef:r,config:i,stack:s}=e,o=n.tooltip;if(Ie(o))return{tooltip:e1e({tooltip:o},s,i,t)};{const a=t.reactiveGeom?"datum.datum":"datum";return cx(e,o,"tooltip",u=>{const l=p5(u,i,a);if(l)return l;if(u===null)return;let c=fr("tooltip",r,i);if(c===!0&&(c={content:"encoding"}),rt(c))return{value:c};if(st(c))return Tt(c)?c:c.content==="encoding"?e1e(n,s,i,t):{signal:a}})}}function oje(e,t,n,{reactiveGeom:r}={}){const i={...n,...n.tooltipFormat},s={},o=r?"datum.datum":"datum",a=[];function u(c,f){const d=Uv(f),h=ka(c)?c:{...c,type:e[d].type},p=h.title||zte(h,i),m=nt(p).join(", ").replaceAll(/"/g,'\\"');let g;if(Wi(f)){const y=f==="x"?"x2":"y2",v=Qd(e[y]);if(so(h.bin)&&v){const _=Je(h,{expr:o}),b=Je(v,{expr:o}),{format:E,formatType:w}=zL(h);g=YI(_,b,E,w,i),s[y]=!0}}if((Wi(f)||f===vc||f===If)&&t&&t.fieldChannel===f&&t.offset==="normalize"){const{format:y,formatType:v}=zL(h);g=Mte({fieldOrDatumDef:h,format:y,formatType:v,expr:o,config:i,normalizeStack:!0}).signal}g??(g=p5(h,i,o).signal),a.push({channel:f,key:m,value:g})}Hte(e,(c,f)=>{Ve(c)?u(c,f):i5(c)&&u(c.condition,f)});const l={};for(const{channel:c,key:f,value:d}of a)!s[c]&&!l[f]&&(l[f]=d);return l}function e1e(e,t,n,{reactiveGeom:r}={}){const i=oje(e,t,n,{reactiveGeom:r}),s=l0(i).map(([o,a])=>`"${o}": ${a}`);return s.length>0?{signal:`{${s.join(", ")}}`}:void 0}function Don(e){const{markDef:t,config:n}=e,r=fr("aria",t,n);return r===!1?{}:{...r?{aria:r}:{},...Lon(e),...Mon(e)}}function Lon(e){const{mark:t,markDef:n,config:r}=e;if(r.aria===!1)return{};const i=fr("ariaRoleDescription",n,r);return i!=null?{ariaRoleDescription:{value:i}}:t in dnn?{}:{ariaRoleDescription:{value:t}}}function Mon(e){const{encoding:t,markDef:n,config:r,stack:i}=e,s=t.description;if(s)return cx(e,s,"description",u=>p5(u,e.config));const o=fr("description",n,r);if(o!=null)return{description:Xr(o)};if(r.aria===!1)return{};const a=oje(t,i,r);if(!Or(a))return{description:{signal:l0(a).map(([u,l],c)=>`"${c>0?"; ":""}${u}: " + (${l})`).join(" + ")}}}function Ms(e,t,n={}){const{markDef:r,encoding:i,config:s}=t,{vgChannel:o}=n;let{defaultRef:a,defaultValue:u}=n;a===void 0&&(u??(u=fr(e,r,s,{vgChannel:o,ignoreVgConfig:!0})),u!==void 0&&(a=Xr(u)));const l=i[e];return cx(t,l,o??e,c=>Lte({channel:e,channelDef:c,markDef:r,config:s,scaleName:t.scaleName(e),scale:t.getScaleComponent(e),stack:null,defaultRef:a}))}function aje(e,t={filled:void 0}){const{markDef:n,encoding:r,config:i}=e,{type:s}=n,o=t.filled??fr("filled",n,i),a=$n(["bar","point","circle","square","geoshape"],s)?"transparent":void 0,u=fr(o===!0?"color":void 0,n,i,{vgChannel:"fill"})??i.mark[o===!0&&"color"]??a,l=fr(o===!1?"color":void 0,n,i,{vgChannel:"stroke"})??i.mark[o===!1&&"color"],c=o?"fill":"stroke",f={...u?{fill:Xr(u)}:{},...l?{stroke:Xr(l)}:{}};return n.color&&(o?n.fill:n.stroke)&&Ue(S9e("property",{fill:"fill"in n,stroke:"stroke"in n})),{...f,...Ms("color",e,{vgChannel:c,defaultValue:o?u:l}),...Ms("fill",e,{defaultValue:r.fill?u:void 0}),...Ms("stroke",e,{defaultValue:r.stroke?l:void 0})}}function Fon(e){const{encoding:t,mark:n}=e,r=t.order;return!W0(n)&&hf(r)?cx(e,r,"zindex",i=>Xr(i.value)):{}}function sE({channel:e,markDef:t,encoding:n={},model:r,bandPosition:i}){const s=`${e}Offset`,o=t[s],a=n[s];if((s==="xOffset"||s==="yOffset")&&a)return{offsetType:"encoding",offset:Lte({channel:s,channelDef:a,markDef:t,config:r==null?void 0:r.config,scaleName:r.scaleName(s),scale:r.getScaleComponent(s),stack:null,defaultRef:Xr(o),bandPosition:i})};const u=t[s];return u?{offsetType:"visual",offset:u}:{}}function qo(e,t,{defaultPos:n,vgChannel:r}){const{encoding:i,markDef:s,config:o,stack:a}=t,u=i[e],l=i[ph(e)],c=t.scaleName(e),f=t.getScaleComponent(e),{offset:d,offsetType:h}=sE({channel:e,markDef:s,encoding:i,model:t,bandPosition:.5}),p=sne({model:t,defaultPos:n,channel:e,scaleName:c,scale:f}),m=!u&&Wi(e)&&(i.latitude||i.longitude)?{field:t.getName(e)}:Bon({channel:e,channelDef:u,channel2Def:l,markDef:s,config:o,scaleName:c,scale:f,stack:a,offset:d,defaultRef:p,bandPosition:h==="encoding"?0:void 0});return m?{[r||e]:m}:void 0}function Bon(e){const{channel:t,channelDef:n,scaleName:r,stack:i,offset:s,markDef:o}=e;if(Qt(n)&&i&&t===i.fieldChannel){if(Ve(n)){let a=n.bandPosition;if(a===void 0&&o.type==="text"&&(t==="radius"||t==="theta")&&(a=.5),a!==void 0)return FL({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:a,offset:s})}return y1(n,r,{suffix:"end"},{offset:s})}return Nte(e)}function sne({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){const{markDef:s,config:o}=e;return()=>{const a=Uv(n),u=c0(n),l=fr(n,s,o,{vgChannel:u});if(l!==void 0)return b2(n,l);switch(t){case"zeroOrMin":case"zeroOrMax":if(r){const c=i.get("type");if(!$n([du.LOG,du.TIME,du.UTC],c)){if(i.domainDefinitelyIncludesZero())return{scale:r,value:0}}}if(t==="zeroOrMin")return a==="y"?{field:{group:"height"}}:{value:0};switch(a){case"radius":return{signal:`min(${e.width.signal},${e.height.signal})/2`};case"theta":return{signal:"2*PI"};case"x":return{field:{group:"width"}};case"y":return{value:0}}break;case"mid":return{...e[Su(n)],mult:.5}}}}const jon={left:"x",center:"xc",right:"x2"},zon={top:"y",middle:"yc",bottom:"y2"};function uje(e,t,n,r="middle"){if(e==="radius"||e==="theta")return c0(e);const i=e==="x"?"align":"baseline",s=fr(i,t,n);let o;return Tt(s)?(Ue(Hnn(i)),o=void 0):o=s,e==="x"?jon[o||(r==="top"?"left":"center")]:zon[o||r]}function WL(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?lje(e,t,{defaultPos:n,defaultPos2:r}):qo(e,t,{defaultPos:n})}function lje(e,t,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:s}=t,o=ph(e),a=Su(e),u=Uon(t,r,o),l=u[a]?uje(e,i,s):c0(e);return{...qo(e,t,{defaultPos:n,vgChannel:l}),...u}}function Uon(e,t,n){const{encoding:r,mark:i,markDef:s,stack:o,config:a}=e,u=Uv(n),l=Su(n),c=c0(n),f=r[u],d=e.scaleName(u),h=e.getScaleComponent(u),{offset:p}=n in r||n in s?sE({channel:n,markDef:s,encoding:r,model:e}):sE({channel:u,markDef:s,encoding:r,model:e});if(!f&&(n==="x2"||n==="y2")&&(r.latitude||r.longitude)){const g=Su(n),y=e.markDef[g];return y!=null?{[g]:{value:y}}:{[c]:{field:e.getName(n)}}}const m=Von({channel:n,channelDef:f,channel2Def:r[n],markDef:s,config:a,scaleName:d,scale:h,stack:o,offset:p,defaultRef:void 0});return m!==void 0?{[c]:m}:ZP(n,s)||ZP(n,{[n]:DL(n,s,a.style),[l]:DL(l,s,a.style)})||ZP(n,a[i])||ZP(n,a.mark)||{[c]:sne({model:e,defaultPos:t,channel:n,scaleName:d,scale:h})()}}function Von({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l}){return Qt(t)&&a&&e.charAt(0)===a.fieldChannel.charAt(0)?y1(t,s,{suffix:"start"},{offset:u}):Nte({channel:e,channelDef:n,scaleName:s,scale:o,stack:a,markDef:r,config:i,offset:u,defaultRef:l})}function ZP(e,t){const n=Su(e),r=c0(e);if(t[r]!==void 0)return{[r]:b2(e,t[r])};if(t[e]!==void 0)return{[r]:b2(e,t[e])};if(t[n]){const i=t[n];if(nv(i))Ue(Fnn(n));else return{[n]:b2(e,i)}}}function h0(e,t){const{config:n,encoding:r,markDef:i}=e,s=i.type,o=ph(t),a=Su(t),u=r[t],l=r[o],c=e.getScaleComponent(t),f=c?c.get("type"):void 0,d=i.orient,h=r[a]??r.size??fr("size",i,n,{vgChannel:a}),p=a9e(t),m=s==="bar"&&(t==="x"?d==="vertical":d==="horizontal");return Ve(u)&&(Hr(u.bin)||so(u.bin)||u.timeUnit&&!l)&&!(h&&!nv(h))&&!r[p]&&!qs(f)?Won({fieldDef:u,fieldDef2:l,channel:t,model:e}):(Qt(u)&&qs(f)||m)&&!l?qon(u,t,e):lje(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function Hon(e,t,n,r,i,s,o){if(nv(i))if(n){const u=n.get("type");if(u==="band"){let l=`bandwidth('${t}')`;i.band!==1&&(l=`${i.band} * ${l}`);const c=Fp("minBandSize",{type:o},r);return{signal:c?`max(${Yc(c)}, ${l})`:l}}else i.band!==1&&(Ue(Ynn(u)),i=void 0)}else return{mult:i.band,field:{group:e}};else{if(Tt(i))return i;if(i)return{value:i}}if(n){const u=n.get("range");if(q0(u)&&Jn(u.step))return{value:u.step-2}}if(!s){const{bandPaddingInner:u,barBandPaddingInner:l,rectBandPaddingInner:c}=r.scale,f=qi(u,o==="bar"?l:c);if(Tt(f))return{signal:`(1 - (${f.signal})) * ${e}`};if(Jn(f))return{signal:`${1-f} * ${e}`}}return{value:HL(r.view,e)-2}}function qon(e,t,n){var I,C;const{markDef:r,encoding:i,config:s,stack:o}=n,a=r.orient,u=n.scaleName(t),l=n.getScaleComponent(t),c=Su(t),f=ph(t),d=a9e(t),h=n.scaleName(d),p=n.getScaleComponent(fte(t)),m=a==="horizontal"&&t==="y"||a==="vertical"&&t==="x";let g;(i.size||r.size)&&(m?g=Ms("size",n,{vgChannel:c,defaultRef:Xr(r.size)}):Ue(Jnn(r.type)));const y=!!g,v=sBe({channel:t,fieldDef:e,markDef:r,config:s,scaleType:(I=l||p)==null?void 0:I.get("type"),useVlSizeChannel:m});g=g||{[c]:Hon(c,h||u,p||l,s,v,!!e,r.type)};const _=((C=l||p)==null?void 0:C.get("type"))==="band"&&nv(v)&&!y?"top":"middle",b=uje(t,r,s,_),E=b==="xc"||b==="yc",{offset:w,offsetType:x}=sE({channel:t,markDef:r,encoding:i,model:n,bandPosition:E?.5:0}),S=Nte({channel:t,channelDef:e,markDef:r,config:s,scaleName:u,scale:l,stack:o,offset:w,defaultRef:sne({model:n,defaultPos:"mid",channel:t,scaleName:u,scale:l}),bandPosition:E?x==="encoding"?0:.5:Tt(v)?{signal:`(1-${v})/2`}:nv(v)?(1-v.band)/2:0});if(c)return{[b]:S,...g};{const O=c0(f),z=g[c],N=w?{...z,offset:w}:z;return{[b]:S,[O]:Ie(S)?[S[0],{...S[1],offset:N}]:{...S,offset:N}}}}function t1e(e,t,n,r,i,s,o){if(t9e(e))return 0;const a=e==="x"||e==="y2",u=a?-t/2:t/2;if(Tt(n)||Tt(i)||Tt(r)||s){const l=Yc(n),c=Yc(i),f=Yc(r),d=Yc(s),p=s?`(${o} < ${d} ? ${a?"":"-"}0.5 * (${d} - (${o})) : ${u})`:u,m=f?`${f} + `:"",g=l?`(${l} ? -1 : 1) * `:"",y=c?`(${c} + ${p})`:p;return{signal:m+g+y}}else return i=i||0,r+(n?-i-u:+i+u)}function Won({fieldDef:e,fieldDef2:t,channel:n,model:r}){var C;const{config:i,markDef:s,encoding:o}=r,a=r.getScaleComponent(n),u=r.scaleName(n),l=a?a.get("type"):void 0,c=a.get("reverse"),f=sBe({channel:n,fieldDef:e,markDef:s,config:i,scaleType:l}),d=(C=r.component.axes[n])==null?void 0:C[0],h=(d==null?void 0:d.get("translate"))??.5,p=Wi(n)?fr("binSpacing",s,i)??0:0,m=ph(n),g=c0(n),y=c0(m),v=Fp("minBandSize",s,i),{offset:_}=sE({channel:n,markDef:s,encoding:o,model:r,bandPosition:0}),{offset:b}=sE({channel:m,markDef:s,encoding:o,model:r,bandPosition:0}),E=_in({fieldDef:e,scaleName:u}),w=t1e(n,p,c,h,_,v,E),x=t1e(m,p,c,h,b??_,v,E),S=Tt(f)?{signal:`(1-${f.signal})/2`}:nv(f)?(1-f.band)/2:.5,I=f0({fieldDef:e,fieldDef2:t,markDef:s,config:i});if(Hr(e.bin)||e.timeUnit){const O=e.timeUnit&&I!==.5;return{[y]:n1e({fieldDef:e,scaleName:u,bandPosition:S,offset:x,useRectOffsetField:O}),[g]:n1e({fieldDef:e,scaleName:u,bandPosition:Tt(S)?{signal:`1-${S.signal}`}:1-S,offset:w,useRectOffsetField:O})}}else if(so(e.bin)){const O=y1(e,u,{},{offset:x});if(Ve(t))return{[y]:O,[g]:y1(t,u,{},{offset:w})};if(Vv(e.bin)&&e.bin.step)return{[y]:O,[g]:{signal:`scale("${u}", ${Je(e,{expr:"datum"})} + ${e.bin.step})`,offset:w}}}Ue(C9e(m))}function n1e({fieldDef:e,scaleName:t,bandPosition:n,offset:r,useRectOffsetField:i}){return FL({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:r,...i?{startSuffix:d5,endSuffix:h5}:{}})}const Gon=new Set(["aria","width","height"]);function _c(e,t){const{fill:n=void 0,stroke:r=void 0}=t.color==="include"?aje(e):{};return{...Yon(e.markDef,t),...r1e(e,"fill",n),...r1e(e,"stroke",r),...Ms("opacity",e),...Ms("fillOpacity",e),...Ms("strokeOpacity",e),...Ms("strokeWidth",e),...Ms("strokeDash",e),...Fon(e),...sje(e),...ine(e,"href"),...Don(e)}}function r1e(e,t,n){const{config:r,mark:i,markDef:s}=e;if(fr("invalid",s,r)==="hide"&&n&&!W0(i)){const a=Kon(e,{invalid:!0,channels:GF});if(a)return{[t]:[{test:a,value:null},...nt(n)]}}return n?{[t]:n}:{}}function Yon(e,t){return fnn.reduce((n,r)=>(!Gon.has(r)&&e[r]!==void 0&&t[r]!=="ignore"&&(n[r]=Xr(e[r])),n),{})}function Kon(e,{invalid:t=!1,channels:n}){const r=n.reduce((s,o)=>{const a=e.getScaleComponent(o);if(a){const u=a.get("type"),l=e.vgField(o,{expr:"datum"});l&&dl(u)&&(s[l]=!0)}return s},{}),i=Ne(r);if(i.length>0){const s=t?"||":"&&";return i.map(o=>Dte(o,t)).join(` ${s} `)}}function one(e){const{config:t,markDef:n}=e;if(fr("invalid",n,t)){const i=Xon(e,{channels:mh});if(i)return{defined:{signal:i}}}return{}}function Xon(e,{invalid:t=!1,channels:n}){const r=n.reduce((s,o)=>{var u;const a=e.getScaleComponent(o);if(a){const l=a.get("type"),c=e.vgField(o,{expr:"datum",binSuffix:(u=e.stack)!=null&&u.impute?"mid":void 0});c&&dl(l)&&(s[c]=!0)}return s},{}),i=Ne(r);if(i.length>0){const s=t?"||":"&&";return i.map(o=>Dte(o,t)).join(` ${s} `)}}function i1e(e,t){if(t!==void 0)return{[e]:Xr(t)}}const Hj="voronoi",cje={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(Hj)},marks:(e,t,n)=>{const{x:r,y:i}=t.project.hasChannel,s=e.mark;if(W0(s))return Ue(ynn(s)),n;const o={name:e.getName(Hj),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...sje(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let a=0,u=!1;return n.forEach((l,c)=>{const f=l.name??"";f===e.component.mark[0].name?a=c:f.indexOf(Hj)>=0&&(u=!0)}),u||n.splice(a+1,0,o),n}},fje={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!Xte(e.bind),parse:(e,t,n)=>_je(t,n),topLevelSignals:(e,t,n)=>{const r=t.name,i=t.project,s=t.bind,o=t.init&&t.init[0],a=cje.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((u,l)=>{const c=hi(`${r}_${u.field}`);n.filter(d=>d.name===c).length||n.unshift({name:c,...o?{init:iv(o[l])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${a}[${Xe(u.field)}] : null`}]:[],bind:s[u.field]??s[u.channel]??s})}),n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.filter(l=>l.name===r+p0)[0],o=r+ZI,a=i.items.map(l=>hi(`${r}_${l.field}`)),u=a.map(l=>`${l} !== null`).join(" && ");return a.length&&(s.update=`${u} ? {fields: ${o}, values: [${a.join(", ")}]} : null`),delete s.value,delete s.on,n}},GL="_toggle",dje={defined:e=>e.type==="point"&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+GL,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+p0,r=t.name+GL;return`${r} ? null : ${n}, `+(t.resolve==="global"?`${r} ? null : true, `:`${r} ? null : {unit: ${_1(e)}}, `)+`${r} ? ${n} : null`}},Qon={defined:e=>e.clear!==void 0&&e.clear!==!1,parse:(e,t)=>{t.clear&&(t.clear=rt(t.clear)?F0(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(fje.defined(t))for(const r of t.project.items){const i=n.findIndex(s=>s.name===hi(`${t.name}_${r.field}`));i!==-1&&n[i].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(i,s){i!==-1&&n[i].on&&n[i].on.push({events:t.clear,update:s})}if(t.type==="interval")for(const i of t.project.items){const s=n.findIndex(o=>o.name===i.signals.visual);if(r(s,"[0, 0]"),s===-1){const o=n.findIndex(a=>a.name===i.signals.data);r(o,"null")}}else{let i=n.findIndex(s=>s.name===t.name+p0);r(i,"null"),dje.defined(t)&&(i=n.findIndex(s=>s.name===t.name+GL),r(i,"false"))}return n}},hje={defined:e=>{const t=e.resolve==="global"&&e.bind&&Xte(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==pf;return t&&!n&&Ue(wnn),t&&n},parse:(e,t,n)=>{const r=qt(n);if(r.select=rt(r.select)?{type:r.select,toggle:t.toggle}:{...r.select,toggle:t.toggle},_je(t,r),st(n.select)&&(n.select.on||n.select.clear)){const o='event.item && indexof(event.item.mark.role, "legend") < 0';for(const a of t.events)a.filter=nt(a.filter??[]),a.filter.includes(o)||a.filter.push(o)}const i=jj(t.bind)?t.bind.legend:"click",s=rt(i)?F0(i,"view"):nt(i);t.bind={legend:{merge:s}}},topLevelSignals:(e,t,n)=>{const r=t.name,i=jj(t.bind)&&t.bind.legend,s=o=>a=>{const u=qt(a);return u.markname=o,u};for(const o of t.project.items){if(!o.hasLegend)continue;const a=`${hi(o.field)}_legend`,u=`${r}_${a}`;if(n.filter(c=>c.name===u).length===0){const c=i.merge.map(s(`${a}_symbols`)).concat(i.merge.map(s(`${a}_labels`))).concat(i.merge.map(s(`${a}_entries`)));n.unshift({name:u,...t.init?{}:{value:null},on:[{events:c,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${u}`,force:!0}]})}}return n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.find(d=>d.name===r+p0),o=r+ZI,a=i.items.filter(d=>d.hasLegend).map(d=>hi(`${r}_${hi(d.field)}_legend`)),l=`${a.map(d=>`${d} !== null`).join(" && ")} ? {fields: ${o}, values: [${a.join(", ")}]} : null`;t.events&&a.length>0?s.on.push({events:a.map(d=>({signal:d})),update:l}):a.length>0&&(s.update=l,delete s.value,delete s.on);const c=n.find(d=>d.name===r+GL),f=jj(t.bind)&&t.bind.legend;return c&&(t.events?c.on.push({...c.on[0],events:f}):c.on[0].events=f),n}};function Jon(e,t,n){var i;const r=(i=e.fieldDef(t))==null?void 0:i.field;for(const s of yo(e.component.selection??{})){const o=s.project.hasField[r]??s.project.hasChannel[t];if(o&&hje.defined(s)){const a=n.get("selections")??[];a.push(s.name),n.set("selections",a,!1),o.hasLegend=!0}}}const pje="_translate_anchor",mje="_translate_delta",Zon={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const r=t.name,i=pp.defined(t),s=r+pje,{x:o,y:a}=t.project.hasChannel;let u=F0(t.translate,"scope");return i||(u=u.map(l=>(l.between[0].markname=r+Hb,l))),n.push({name:s,value:{},on:[{events:u.map(l=>l.between[0]),update:"{x: x(unit), y: y(unit)"+(o!==void 0?`, extent_x: ${i?xq(e,pi):`slice(${o.signals.visual})`}`:"")+(a!==void 0?`, extent_y: ${i?xq(e,Ks):`slice(${a.signals.visual})`}`:"")+"}"}]},{name:r+mje,value:{},on:[{events:u,update:`{x: ${s}.x - x(unit), y: ${s}.y - y(unit)}`}]}),o!==void 0&&s1e(e,t,o,"width",n),a!==void 0&&s1e(e,t,a,"height",n),n}};function s1e(e,t,n,r,i){const s=t.name,o=s+pje,a=s+mje,u=n.channel,l=pp.defined(t),c=i.filter(E=>E.name===n.signals[l?"data":"visual"])[0],f=e.getSizeSignalRef(r).signal,d=e.getScaleComponent(u),h=d&&d.get("type"),p=d&&d.get("reverse"),m=l?u===pi?p?"":"-":p?"-":"":"",g=`${o}.extent_${u}`,y=`${m}${a}.${u} / ${l?`${f}`:`span(${g})`}`,v=!l||!d?"panLinear":h==="log"?"panLog":h==="symlog"?"panSymlog":h==="pow"?"panPow":"panLinear",_=l?h==="pow"?`, ${d.get("exponent")??1}`:h==="symlog"?`, ${d.get("constant")??1}`:"":"",b=`${v}(${g}, ${y}${_})`;c.on.push({events:{signal:a},update:l?b:`clampRange(${b}, 0, ${f})`})}const gje="_zoom_anchor",yje="_zoom_delta",ean={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const r=t.name,i=pp.defined(t),s=r+yje,{x:o,y:a}=t.project.hasChannel,u=Xe(e.scaleName(pi)),l=Xe(e.scaleName(Ks));let c=F0(t.zoom,"scope");return i||(c=c.map(f=>(f.markname=r+Hb,f))),n.push({name:r+gje,on:[{events:c,update:i?"{"+[u?`x: invert(${u}, x(unit))`:"",l?`y: invert(${l}, y(unit))`:""].filter(f=>f).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:s,on:[{events:c,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),o!==void 0&&o1e(e,t,o,"width",n),a!==void 0&&o1e(e,t,a,"height",n),n}};function o1e(e,t,n,r,i){const s=t.name,o=n.channel,a=pp.defined(t),u=i.filter(v=>v.name===n.signals[a?"data":"visual"])[0],l=e.getSizeSignalRef(r).signal,c=e.getScaleComponent(o),f=c&&c.get("type"),d=a?xq(e,o):u.name,h=s+yje,p=`${s}${gje}.${o}`,m=!a||!c?"zoomLinear":f==="log"?"zoomLog":f==="symlog"?"zoomSymlog":f==="pow"?"zoomPow":"zoomLinear",g=a?f==="pow"?`, ${c.get("exponent")??1}`:f==="symlog"?`, ${c.get("constant")??1}`:"":"",y=`${m}(${d}, ${p}, ${h}${g})`;u.on.push({events:{signal:h},update:a?y:`clampRange(${y}, 0, ${l})`})}const sv="_store",p0="_tuple",tan="_modify",vje="vlSelectionResolve",m5=[Non,$on,Pon,dje,fje,pp,hje,Qon,Zon,ean,cje];function nan(e){let t=e.parent;for(;t&&!nl(t);)t=t.parent;return t}function _1(e,{escape:t}={escape:!0}){let n=t?Xe(e.name):e.name;const r=nan(e);if(r){const{facet:i}=r;for(const s of ql)i[s]&&(n+=` + '__facet_${s}_' + (facet[${Xe(r.vgField(s))}])`)}return n}function ane(e){return yo(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function _je(e,t){(rt(t.select)||!t.select.on)&&delete e.events,(rt(t.select)||!t.select.clear)&&delete e.clear,(rt(t.select)||!t.select.toggle)&&delete e.toggle}function Sq(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...Sq(e.object)),t.push(...Sq(e.property))),t)}function bje(e){return e.object.type==="MemberExpression"?bje(e.object):e.object.name==="datum"}function wje(e){const t=Aee(e),n=new Set;return t.visit(r=>{r.type==="MemberExpression"&&bje(r)&&n.add(Sq(r).slice(1).join("."))}),n}class fx extends Sr{clone(){return new fx(null,this.model,qt(this.filter))}constructor(t,n,r){super(t),this.model=n,this.filter=r,this.expr=YL(this.model,this.filter,this),this._dependentFields=wje(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function ran(e,t){const n={},r=e.config.selection;if(!t||!t.length)return n;for(const i of t){const s=hi(i.name),o=i.select,a=rt(o)?o:o.type,u=st(o)?qt(o):{type:a},l=r[a];for(const d in l)d==="fields"||d==="encodings"||(d==="mark"&&(u[d]={...l[d],...u[d]}),(u[d]===void 0||u[d]===!0)&&(u[d]=qt(l[d]??u[d])));const c=n[s]={...u,name:s,type:a,init:i.value,bind:i.bind,events:rt(u.on)?F0(u.on,"scope"):nt(qt(u.on))},f=qt(i);for(const d of m5)d.defined(c)&&d.parse&&d.parse(e,c,f)}return n}function Eje(e,t,n,r="datum"){const i=rt(t)?t:t.param,s=hi(i),o=Xe(s+sv);let a;try{a=e.getSelectionComponent(s,i)}catch{return`!!${s}`}if(a.project.timeUnit){const d=n??e.component.data.raw,h=a.project.timeUnit.clone();d.parent?h.insertAsParentOf(d):d.parent=h}const u=a.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",l=a.resolve==="global"?")":`, ${Xe(a.resolve)})`,c=`${u}${o}, ${r}${l}`,f=`length(data(${o}))`;return t.empty===!1?`${f} && ${c}`:`!${f} || ${c}`}function xje(e,t,n){const r=hi(t),i=n.encoding;let s=n.field,o;try{o=e.getSelectionComponent(r,t)}catch{return r}if(!i&&!s)s=o.project.items[0].field,o.project.items.length>1&&Ue(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${Xe(s)}.`);else if(i&&!s){const a=o.project.items.filter(u=>u.channel===i);!a.length||a.length>1?(s=o.project.items[0].field,Ue((a.length?"Multiple ":"No ")+`matching ${Xe(i)} encoding found for selection ${Xe(n.param)}. Using "field": ${Xe(s)}.`)):s=a[0].field}return`${o.name}[${Xe(oc(s))}]`}function ian(e,t){for(const[n,r]of l0(e.component.selection??{})){const i=e.getName(`lookup_${n}`);e.component.data.outputNodes[i]=r.materialized=new Sa(new fx(t,e,{param:n}),i,zr.Lookup,e.component.data.outputNodeRefCounts)}}function YL(e,t,n){return _2(t,r=>rt(r)?r:Drn(r)?Eje(e,r,n):B9e(r))}function san(e,t){if(e)return Ie(e)&&!Nm(e)?e.map(n=>zte(n,t)).join(", "):e}function qj(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function vT(e,t,n,r={header:!1}){var f,d;const{disable:i,orient:s,scale:o,labelExpr:a,title:u,zindex:l,...c}=e.combine();if(!i){for(const h in c){const p=Fin[h],m=c[h];if(p&&p!==t&&p!=="both")delete c[h];else if(JI(m)){const{condition:g,...y}=m,v=nt(g),_=Nye[h];if(_){const{vgProp:b,part:E}=_,w=[...v.map(x=>{const{test:S,...I}=x;return{test:YL(null,S),...I}}),y];qj(c,E,b,w),delete c[h]}else if(_===null){const b={signal:v.map(E=>{const{test:w,...x}=E;return`${YL(null,w)} ? ${vye(x)} : `}).join("")+vye(y)};c[h]=b}}else if(Tt(m)){const g=Nye[h];if(g){const{vgProp:y,part:v}=g;qj(c,v,y,m),delete c[h]}}$n(["labelAlign","labelBaseline"],h)&&c[h]===null&&delete c[h]}if(t==="grid"){if(!c.grid)return;if(c.encode){const{grid:h}=c.encode;c.encode={...h?{grid:h}:{}},Or(c.encode)&&delete c.encode}return{scale:o,orient:s,...c,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:qi(l,0)}}else{if(!r.header&&e.mainExtracted)return;if(a!==void 0){let p=a;(d=(f=c.encode)==null?void 0:f.labels)!=null&&d.update&&Tt(c.encode.labels.update.text)&&(p=J1(a,"datum.label",c.encode.labels.update.text.signal)),qj(c,"labels","text",{signal:p})}if(c.labelAlign===null&&delete c.labelAlign,c.encode){for(const p of mBe)e.hasAxisPart(p)||delete c.encode[p];Or(c.encode)&&delete c.encode}const h=san(u,n);return{scale:o,orient:s,grid:!1,...h?{title:h}:{},...c,...n.aria===!1?{aria:!1}:{},zindex:qi(l,0)}}}}function Sje(e){const{axes:t}=e.component,n=[];for(const r of mh)if(t[r]){for(const i of t[r])if(!i.get("disable")&&!i.get("gridScale")){const s=r==="x"?"height":"width",o=e.getSizeSignalRef(s).signal;s!==o&&n.push({name:s,update:o})}}return n}function oan(e,t){const{x:n=[],y:r=[]}=e;return[...n.map(i=>vT(i,"grid",t)),...r.map(i=>vT(i,"grid",t)),...n.map(i=>vT(i,"main",t)),...r.map(i=>vT(i,"main",t))].filter(i=>i)}function a1e(e,t,n,r){return Object.assign.apply(null,[{},...e.map(i=>{if(i==="axisOrient"){const s=n==="x"?"bottom":"left",o=t[n==="x"?"axisBottom":"axisLeft"]||{},a=t[n==="x"?"axisTop":"axisRight"]||{},u=new Set([...Ne(o),...Ne(a)]),l={};for(const c of u.values())l[c]={signal:`${r.signal} === "${s}" ? ${Yc(o[c])} : ${Yc(a[c])}`};return l}return t[i]})])}function aan(e,t,n,r){const i=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:V9e(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],s=e==="x"?"axisX":"axisY",o=Tt(n)?"axisOrient":`axis${UI(n)}`,a=[...i,...i.map(l=>s+l.substr(4))],u=["axis",o,s];return{vlOnlyAxisConfig:a1e(a,r,e,n),vgAxisConfig:a1e(u,r,e,n),axisConfigStyle:uan([...u,...a],r)}}function uan(e,t){var r;const n=[{}];for(const i of e){let s=(r=t[i])==null?void 0:r.style;if(s){s=nt(s);for(const o of s)n.push(t.style[o])}}return Object.assign.apply(null,n)}function Tq(e,t,n,r={}){var s;const i=y9e(e,n,t);if(i!==void 0)return{configFrom:"style",configValue:i};for(const o of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((s=r[o])==null?void 0:s[e])!==void 0)return{configFrom:o,configValue:r[o][e]};return{}}const u1e={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??lan(n,e),gridScale:({model:e,channel:t})=>can(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||Aje(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||Tje(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??dan(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??han(t.type,n,Ve(t)&&!!t.timeUnit,Ve(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{const s=e==="x"?"width":e==="y"?"height":void 0,o=s?t.getSizeSignalRef(s):void 0;return n.tickCount??man({fieldOrDatumDef:r,scaleType:i,size:o,values:n.values})},tickMinStep:gan,title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const r=Cje(t,n);if(r!==void 0)return r;const i=t.typedFieldDef(n),s=n==="x"?"x2":"y2",o=t.fieldDef(s);return _9e(i?[$ye(i)]:[],Ve(o)?[$ye(o)]:[])},values:({axis:e,fieldOrDatumDef:t})=>yan(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??van(n,t)};function lan(e,t){return!qs(e)&&Ve(t)&&!Hr(t==null?void 0:t.bin)&&!so(t==null?void 0:t.bin)}function can(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function fan(e,t,n,r,i){const s=t==null?void 0:t.labelAngle;if(s!==void 0)return Tt(s)?s:YA(s);{const{configValue:o}=Tq("labelAngle",r,t==null?void 0:t.style,i);return o!==void 0?YA(o):n===pi&&$n([Pte,Ote],e.type)&&!(Ve(e)&&e.timeUnit)?270:void 0}}function Aq(e){return`(((${e.signal} % 360) + 360) % 360)`}function Tje(e,t,n,r){if(e!==void 0)if(n==="x"){if(Tt(e)){const i=Aq(e),s=Tt(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${i} && ${i} < 135) || (225 < ${i} && ${i} < 315) ? "middle" :(${i} <= 45 || 315 <= ${i}) === ${s} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(Tt(t)){const i=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${i} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(Tt(e)){const i=Aq(e),s=Tt(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${i} <= 45 || 315 <= ${i} || (135 <= ${i} && ${i} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${i} && ${i} <= 135) === ${s} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(Tt(t)){const i=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${i} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function Aje(e,t,n){if(e===void 0)return;const r=n==="x",i=r?0:90,s=r?"bottom":"left";if(Tt(e)){const o=Aq(e),a=Tt(t)?`(${t.signal} === "${s}")`:t===s;return{signal:`(${i?`(${o} + 90)`:o} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${o} && ${o} < ${180+i}) === ${a} ? "left" : "right"`}}if((e+i)%180===0)return r?null:"center";if(Tt(t)){const o=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${o} "${s}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===s)?"left":"right"}function dan(e,t){if(t==="x"&&$n(["quantitative","temporal"],e))return!0}function han(e,t,n,r){if(n&&!st(r)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function pan(e){return e==="x"?"bottom":"left"}function man({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){var i;if(!r&&!qs(t)&&t!=="log"){if(Ve(e)){if(Hr(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&$n(["month","hours","day","quarter"],(i=Hs(e.timeUnit))==null?void 0:i.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function gan({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(Ve(t)){const{timeUnit:n}=t;if(n){const r=L9e(n);if(r)return{signal:r}}}}function Cje(e,t){const n=t==="x"?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),s=r?r.title:void 0,o=i?i.title:void 0;if(s&&o)return b9e(s,o);if(s)return s;if(o)return o;if(s!==void 0)return s;if(o!==void 0)return o}function yan(e,t){const n=e.values;if(Ie(n))return pBe(t,n);if(Tt(n))return n}function van(e,t){return e==="rect"&&jL(t)?1:0}class oE extends Sr{clone(){return new oE(null,qt(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=wje(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((r,i)=>{if(Wv(r)&&iBe(r.sort)){const{field:s,timeUnit:o}=r,a=r.sort,u=a.map((l,c)=>`${B9e({field:s,timeUnit:o,equal:l})} ? ${c} : `).join("")+a.length;t=new oE(t,{calculate:u,as:aE(r,i,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${kn(this.transform)}`}}function aE(e,t,n){return Je(e,{prefix:t,suffix:"sort_index",...n})}function g5(e,t){return $n(["top","bottom"],t)?"column":$n(["left","right"],t)||e==="row"?"row":"column"}function uE(e,t,n,r){const i=r==="row"?n.headerRow:r==="column"?n.headerColumn:n.headerFacet;return qi((t||{})[e],i[e],n.header[e])}function y5(e,t,n,r){const i={};for(const s of e){const o=uE(s,t||{},n,r);o!==void 0&&(i[s]=o)}return i}const une=["row","column"],lne=["header","footer"];function _an(e,t){const n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:s,titleAngle:o,titleOrient:a}=y5(["titleAnchor","titleAngle","titleOrient"],i.header,r,t),u=g5(t,a),l=YA(o);return{name:`${t}-title`,type:"group",role:`${u}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...Oje(l,u),...Ije(u,l,s),...Pje(r,i,t,osn,$Be)}}}function Ije(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=Aje(t,e==="row"?"left":"top",e==="row"?"y":"x");return r?{align:r}:{}}function Oje(e,t){const n=Tje(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function ban(e,t){const n=e.component.layoutHeaders[t],r=[];for(const i of lne)if(n[i])for(const s of n[i]){const o=Ean(e,t,i,n,s);o!=null&&r.push(o)}return r}function wan(e,t){const{sort:n}=e;return Pd(n)?{field:Je(n,{expr:"datum"}),order:n.order??"ascending"}:Ie(n)?{field:aE(e,t,{expr:"datum"}),order:"ascending"}:{field:Je(e,{expr:"datum"}),order:n??"ascending"}}function Cq(e,t,n){const{format:r,formatType:i,labelAngle:s,labelAnchor:o,labelOrient:a,labelExpr:u}=y5(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),l=Mte({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,c=g5(t,a);return{text:{signal:u?J1(J1(u,"datum.label",l),"datum.value",Je(e,{expr:"parent"})):l},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...Oje(s,c),...Ije(c,s,o),...Pje(n,e,t,asn,RBe)}}function Ean(e,t,n,r,i){if(i){let s=null;const{facetFieldDef:o}=r,a=e.config?e.config:void 0;if(o&&i.labels){const{labelOrient:f}=y5(["labelOrient"],o.header,a,t);(t==="row"&&!$n(["top","bottom"],f)||t==="column"&&!$n(["left","right"],f))&&(s=Cq(o,t,a))}const u=nl(e)&&!KI(e.facet),l=i.axes,c=(l==null?void 0:l.length)>0;if(s||c){const f=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...r.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:wan(o,t)}:{},...c&&u?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...s?{title:s}:{},...i.sizeSignal?{encode:{update:{[f]:i.sizeSignal}}}:{},...c?{axes:l}:{}}}}return null}const xan={column:{start:0,end:1},row:{start:1,end:0}};function San(e,t){return xan[t][e]}function Tan(e,t){const n={};for(const r of ql){const i=e[r];if(i!=null&&i.facetFieldDef){const{titleAnchor:s,titleOrient:o}=y5(["titleAnchor","titleOrient"],i.facetFieldDef.header,t,r),a=g5(r,o),u=San(s,a);u!==void 0&&(n[a]=u)}}return Or(n)?void 0:n}function Pje(e,t,n,r,i){const s={};for(const o of r){if(!i[o])continue;const a=uE(o,t==null?void 0:t.header,e,n);a!==void 0&&(s[i[o]]=a)}return s}function cne(e){return[...ek(e,"width"),...ek(e,"height"),...ek(e,"childWidth"),...ek(e,"childHeight")]}function ek(e,t){const n=t==="width"?"x":"y",r=e.component.layoutSize.get(t);if(!r||r==="merged")return[];const i=e.getSizeSignalRef(t).signal;if(r==="step"){const s=e.getScaleComponent(n);if(s){const o=s.get("type"),a=s.get("range");if(qs(o)&&q0(a)){const u=e.scaleName(n);return nl(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[l1e(u,a)]:[l1e(u,a),{name:i,update:kje(u,s,`domain('${u}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(r=="container"){const s=i.endsWith("width"),o=s?"containerSize()[0]":"containerSize()[1]",a=_q(e.config.view,s?"width":"height"),u=`isFinite(${o}) ? ${o} : ${a}`;return[{name:i,init:u,on:[{update:u,events:"window:resize"}]}]}else return[{name:i,value:r}]}function l1e(e,t){const n=`${e}_step`;return Tt(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function kje(e,t,n){const r=t.get("type"),i=t.get("padding"),s=qi(t.get("paddingOuter"),i);let o=t.get("paddingInner");return o=r==="band"?o!==void 0?o:i:1,`bandspace(${n}, ${Yc(o)}, ${Yc(s)}) * ${e}_step`}function $je(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function Rje(e,t){return Ne(e).reduce((n,r)=>{const i=e[r];return{...n,...cx(t,i,r,s=>Xr(s.value))}},{})}function Nje(e,t){if(nl(t))return e==="theta"?"independent":"shared";if(px(t))return"shared";if(yne(t))return Wi(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function fne(e,t){const n=e.scale[t],r=Wi(t)?"axis":"legend";return n==="independent"?(e[r][t]==="shared"&&Ue(rrn(t)),"independent"):e[r][t]||"shared"}const Aan={...csn,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},Dje=Ne(Aan);class Can extends lm{}const c1e={symbols:Ian,gradient:Oan,labels:Pan,entries:kan};function Ian(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:s}){if(s!=="symbol")return;const{markDef:o,encoding:a,config:u,mark:l}=n,c=o.filled&&l!=="trail";let f={...pnn({},n,oin),...aje(n,{filled:c})};const d=i.get("symbolOpacity")??u.legend.symbolOpacity,h=i.get("symbolFillColor")??u.legend.symbolFillColor,p=i.get("symbolStrokeColor")??u.legend.symbolStrokeColor,m=d===void 0?Lje(a.opacity)??o.opacity:void 0;if(f.fill){if(r==="fill"||c&&r===Eu)delete f.fill;else if(f.fill.field)h?delete f.fill:(f.fill=Xr(u.legend.symbolBaseFillColor??"black"),f.fillOpacity=Xr(m??1));else if(Ie(f.fill)){const g=Iq(a.fill??a.color)??o.fill??(c&&o.color);g&&(f.fill=Xr(g))}}if(f.stroke){if(r==="stroke"||!c&&r===Eu)delete f.stroke;else if(f.stroke.field||p)delete f.stroke;else if(Ie(f.stroke)){const g=qi(Iq(a.stroke||a.color),o.stroke,c?o.color:void 0);g&&(f.stroke={value:g})}}if(r!==om){const g=Ve(t)&&Fje(n,i,t);g?f.opacity=[{test:g,...Xr(m??1)},Xr(u.legend.unselectedOpacity)]:m&&(f.opacity=Xr(m))}return f={...f,...e},Or(f)?void 0:f}function Oan(e,{model:t,legendType:n,legendCmpt:r}){if(n!=="gradient")return;const{config:i,markDef:s,encoding:o}=t;let a={};const l=(r.get("gradientOpacity")??i.legend.gradientOpacity)===void 0?Lje(o.opacity)||s.opacity:void 0;return l&&(a.opacity=Xr(l)),a={...a,...e},Or(a)?void 0:a}function Pan(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){const s=n.legend(r)||{},o=n.config,a=Ve(t)?Fje(n,i,t):void 0,u=a?[{test:a,value:1},{value:o.legend.unselectedOpacity}]:void 0,{format:l,formatType:c}=s;let f;rv(c)?f=Xc({fieldOrDatumDef:t,field:"datum.value",format:l,formatType:c,config:o}):l===void 0&&c===void 0&&o.customFormatTypes&&(t.type==="quantitative"&&o.numberFormatType?f=Xc({fieldOrDatumDef:t,field:"datum.value",format:o.numberFormat,formatType:o.numberFormatType,config:o}):t.type==="temporal"&&o.timeFormatType&&Ve(t)&&t.timeUnit===void 0&&(f=Xc({fieldOrDatumDef:t,field:"datum.value",format:o.timeFormat,formatType:o.timeFormatType,config:o})));const d={...u?{opacity:u}:{},...f?{text:f}:{},...e};return Or(d)?void 0:d}function kan(e,{legendCmpt:t}){const n=t.get("selections");return n!=null&&n.length?{...e,fill:{value:"transparent"}}:e}function Lje(e){return Mje(e,(t,n)=>Math.max(t,n.value))}function Iq(e){return Mje(e,(t,n)=>qi(t,n.value))}function Mje(e,t){if(Ain(e))return nt(e.condition).reduce(t,e.value);if(hf(e))return e.value}function Fje(e,t,n){const r=t.get("selections");if(!(r!=null&&r.length))return;const i=Xe(n.field);return r.map(s=>`(!length(data(${Xe(hi(s)+sv)})) || (${s}[${i}] && indexof(${s}[${i}], datum.value) >= 0))`).join(" || ")}const f1e={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:r,formatType:i}=t;return eBe(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return tBe(r,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??Fan(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??Ban(n),symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>e.symbolType??Ran(t.type,n,r.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>Vb(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(Ub(n)&&Kc(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>$an(t,e)};function $an(e,t){const n=e.values;if(Ie(n))return pBe(t,n);if(Tt(n))return n}function Ran(e,t,n,r){if(t!=="shape"){const i=Iq(n)??r;if(i)return i}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function Nan(e){const{legend:t}=e;return qi(t.type,Dan(e))}function Dan({channel:e,timeUnit:t,scaleType:n}){if(Ub(e)){if($n(["quarter","month","day"],t))return"symbol";if(Kc(n))return"gradient"}return"symbol"}function Lan({legendConfig:e,legendType:t,orient:n,legend:r}){return r.direction??e[t?"gradientDirection":"symbolDirection"]??Man(n,t)}function Man(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function Fan({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:s,gradientHorizontalMinLength:o,gradientVerticalMaxLength:a,gradientVerticalMinLength:u}=e;if(Kc(i))return n==="horizontal"?r==="top"||r==="bottom"?d1e(t,"width",o,s):o:d1e(t,"height",u,a)}function d1e(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function Ban(e){if($n(["quantile","threshold","log","symlog"],e))return"greedy"}function Bje(e){const t=$i(e)?jan(e):Han(e);return e.component.legends=t,t}function jan(e){const{encoding:t}=e,n={};for(const r of[Eu,...DBe]){const i=vs(t[r]);!i||!e.getScaleComponent(r)||r===xu&&Ve(i)&&i.type===lx||(n[r]=Van(e,r))}return n}function zan(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function Uan(e,t,n,r){switch(t){case"disable":return n!==void 0;case"values":return!!(n!=null&&n.values);case"title":if(t==="title"&&e===(r==null?void 0:r.title))return!0}return e===(n||{})[t]}function Van(e,t){var b;let n=e.legend(t);const{markDef:r,encoding:i,config:s}=e,o=s.legend,a=new Can({},zan(e,t));Jon(e,t,a);const u=n!==void 0?!n:o.disable;if(a.set("disable",u,n!==void 0),u)return a;n=n||{};const l=e.getScaleComponent(t).get("type"),c=vs(i[t]),f=Ve(c)?(b=Hs(c.timeUnit))==null?void 0:b.unit:void 0,d=n.orient||s.legend.orient||"right",h=Nan({legend:n,channel:t,timeUnit:f,scaleType:l}),p=Lan({legend:n,legendType:h,orient:d,legendConfig:o}),m={legend:n,channel:t,model:e,markDef:r,encoding:i,fieldOrDatumDef:c,legendConfig:o,config:s,scaleType:l,orient:d,legendType:h,direction:p};for(const E of Dje){if(h==="gradient"&&E.startsWith("symbol")||h==="symbol"&&E.startsWith("gradient"))continue;const w=E in f1e?f1e[E](m):n[E];if(w!==void 0){const x=Uan(w,E,n,e.fieldDef(t));(x||s.legend[E]===void 0)&&a.set(E,w,x)}}const g=(n==null?void 0:n.encoding)??{},y=a.get("selections"),v={},_={fieldOrDatumDef:c,model:e,channel:t,legendCmpt:a,legendType:h};for(const E of["labels","legend","title","symbols","gradient","entries"]){const w=Rje(g[E]??{},e),x=E in c1e?c1e[E](w,_):w;x!==void 0&&!Or(x)&&(v[E]={...y!=null&&y.length&&Ve(c)?{name:`${hi(c.field)}_legend_${E}`}:{},...y!=null&&y.length?{interactive:!!y}:{},update:x})}return Or(v)||a.set("encode",v,!!(n!=null&&n.encoding)),a}function Han(e){const{legends:t,resolve:n}=e.component;for(const r of e.children){Bje(r);for(const i of Ne(r.component.legends))n.legend[i]=fne(e.component.resolve,i),n.legend[i]==="shared"&&(t[i]=jje(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(const r of Ne(t))for(const i of e.children)i.component.legends[r]&&n.legend[r]==="shared"&&delete i.component.legends[r];return t}function jje(e,t){var s,o,a,u;if(!e)return t.clone();const n=e.getWithExplicit("orient"),r=t.getWithExplicit("orient");if(n.explicit&&r.explicit&&n.value!==r.value)return;let i=!1;for(const l of Dje){const c=d0(e.getWithExplicit(l),t.getWithExplicit(l),l,"legend",(f,d)=>{switch(l){case"symbolType":return qan(f,d);case"title":return w9e(f,d);case"type":return i=!0,Lu("symbol")}return f5(f,d,l,"legend")});e.setWithExplicit(l,c)}return i&&((o=(s=e.implicit)==null?void 0:s.encode)!=null&&o.gradient&&NL(e.implicit,["encode","gradient"]),(u=(a=e.explicit)==null?void 0:a.encode)!=null&&u.gradient&&NL(e.explicit,["encode","gradient"])),e}function qan(e,t){return t.value==="circle"?t:e}function Wan(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function zje(e){const t=e.component.legends,n={};for(const i of Ne(t)){const s=e.getScaleComponent(i),o=Pr(s.get("domains"));if(n[o])for(const a of n[o])jje(a,t[i])||n[o].push(t[i]);else n[o]=[t[i].clone()]}return yo(n).flat().map(i=>Gan(i,e.config)).filter(i=>i!==void 0)}function Gan(e,t){var o,a,u;const{disable:n,labelExpr:r,selections:i,...s}=e.combine();if(!n){if(t.aria===!1&&s.aria==null&&(s.aria=!1),(o=s.encode)!=null&&o.symbols){const l=s.encode.symbols.update;l.fill&&l.fill.value!=="transparent"&&!l.stroke&&!s.stroke&&(l.stroke={value:"transparent"});for(const c of DBe)s[c]&&delete l[c]}if(s.title||delete s.title,r!==void 0){let l=r;(u=(a=s.encode)==null?void 0:a.labels)!=null&&u.update&&Tt(s.encode.labels.update.text)&&(l=J1(r,"datum.label",s.encode.labels.update.text.signal)),Wan(s,"labels","text",{signal:l})}return s}}function Yan(e){return px(e)||yne(e)?Kan(e):Uje(e)}function Kan(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),Uje(e))}function Uje(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:r}=n;if(t.data){const i={signal:`[${t.size.map(o=>o.signal).join(", ")}]`},s=t.data.reduce((o,a)=>{const u=Tt(a)?a.signal:`data('${e.lookupDataSource(a)}')`;return $n(o,u)||o.push(u),o},[]);if(s.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:r,size:i,fit:{signal:s.length>1?`[${s.join(", ")}]`:s[0]},...n}]}else return[{name:r,translate:{signal:"[width / 2, height / 2]"},...n}]}const Xan=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class Vje extends lm{constructor(t,n,r,i){super({...n},{name:t}),this.specifiedProjection=n,this.size=r,this.data=i,this.merged=!1}get isFit(){return!!this.data}}function Hje(e){e.component.projection=$i(e)?Qan(e):eun(e)}function Qan(e){if(e.hasProjection){const t=Ja(e.specifiedProjection),n=!(t&&(t.scale!=null||t.translate!=null)),r=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,i=n?Jan(e):void 0,s=new Vje(e.projectionName(!0),{...Ja(e.config.projection),...t},r,i);return s.get("type")||s.set("type","equalEarth",!1),s}}function Jan(e){const t=[],{encoding:n}=e;for(const r of[[Pf,Of],[ac,kf]])(vs(n[r[0]])||vs(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(xu)&&e.typedFieldDef(xu).type===lx&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(zr.Main)),t}function Zan(e,t){const n=rte(Xan,i=>!!(!Nt(e.explicit,i)&&!Nt(t.explicit,i)||Nt(e.explicit,i)&&Nt(t.explicit,i)&&Xu(e.get(i),t.get(i))));if(Xu(e.size,t.size)){if(n)return e;if(Xu(e.explicit,{}))return t;if(Xu(t.explicit,{}))return e}return null}function eun(e){if(e.children.length===0)return;let t;for(const r of e.children)Hje(r);const n=rte(e.children,r=>{const i=r.component.projection;if(i)if(t){const s=Zan(t,i);return s&&(t=s),!!s}else return t=i,!0;else return!0});if(t&&n){const r=e.projectionName(!0),i=new Vje(r,t.specifiedProjection,t.size,qt(t.data));for(const s of e.children){const o=s.component.projection;o&&(o.isFit&&i.data.push(...s.component.projection.data),s.renameProjection(o.get("name"),r),o.merged=!0)}return i}}function tun(e,t,n,r){if(QI(t,n)){const i=$i(e)?e.axis(n)??e.legend(n)??{}:{},s=Je(t,{expr:"datum"}),o=Je(t,{expr:"datum",binSuffix:"end"});return{formulaAs:Je(t,{binSuffix:"range",forAs:!0}),formula:YI(s,o,i.format,i.formatType,r)}}return{}}function qje(e,t){return`${h9e(e)}_${t}`}function nun(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function dne(e,t,n){const r=s5(n,void 0)??{},i=qje(r,t);return e.getName(`${i}_bins`)}function run(e){return"as"in e}function h1e(e,t,n){let r,i;run(e)?r=rt(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:r=[Je(e,{forAs:!0}),Je(e,{binSuffix:"end",forAs:!0})];const s={...s5(t,void 0)},o=qje(s,e.field),{signal:a,extentSignal:u}=nun(n,o);if(YF(s.extent)){const c=s.extent;i=xje(n,c.param,c),delete s.extent}const l={bin:s,field:e.field,as:[r],...a?{signal:a}:{},...u?{extentSignal:u}:{},...i?{span:i}:{}};return{key:o,binComponent:l}}class $d extends Sr{clone(){return new $d(null,qt(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{if(ka(s)&&Hr(s.bin)){const{key:a,binComponent:u}=h1e(s,s.bin,n);i[a]={...u,...i[a],...tun(n,s,o,n.config)}}return i},{});return Or(r)?null:new $d(t,r)}static makeFromTransform(t,n,r){const{key:i,binComponent:s}=h1e(n,n.bin,r);return new $d(t,{[i]:s})}merge(t,n){for(const r of Ne(t.bins))r in this.bins?(n(t.bins[r].signal,this.bins[r].signal),this.bins[r].as=md([...this.bins[r].as,...t.bins[r].as],kn)):this.bins[r]=t.bins[r];for(const r of t.children)t.removeChild(r),r.parent=this;t.remove()}producedFields(){return new Set(yo(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(yo(this.bins).map(t=>t.field))}hash(){return`Bin ${kn(this.bins)}`}assemble(){return yo(this.bins).flatMap(t=>{const n=[],[r,...i]=t.as,{extent:s,...o}=t.bin,a={type:"bin",field:oc(t.field),as:r,signal:t.signal,...YF(s)?{extent:null}:{extent:s},...t.span?{span:{signal:`span(${t.span})`}}:{},...o};!s&&t.extentSignal&&(n.push({type:"extent",field:oc(t.field),signal:t.extentSignal}),a.extent={signal:t.extentSignal}),n.push(a);for(const u of i)for(let l=0;l<2;l++)n.push({type:"formula",expr:Je({field:r[l]},{expr:"datum"}),as:u[l]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function iun(e,t,n,r){var s;const i=$i(r)?r.encoding[ph(t)]:void 0;if(ka(n)&&$i(r)&&oBe(n,i,r.markDef,r.config)){e.add(Je(n,{})),e.add(Je(n,{suffix:"end"}));const{mark:o,markDef:a,config:u}=r,l=f0({fieldDef:n,markDef:a,config:u});KA(o)&&l!==.5&&Wi(t)&&(e.add(Je(n,{suffix:d5})),e.add(Je(n,{suffix:h5}))),n.bin&&QI(n,t)&&e.add(Je(n,{binSuffix:"range"}))}else if(r9e(t)){const o=n9e(t);e.add(r.getName(o))}else e.add(Je(n));return Wv(n)&&Yrn((s=n.scale)==null?void 0:s.range)&&e.add(n.scale.range.field),e}function sun(e,t){for(const n of Ne(t)){const r=t[n];for(const i of Ne(r))n in e?e[n][i]=new Set([...e[n][i]??[],...r[i]]):e[n]={[i]:r[i]}}}class sf extends Sr{clone(){return new sf(null,new Set(this.dimensions),qt(this.measures))}constructor(t,n,r){super(t),this.dimensions=n,this.measures=r}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let r=!1;n.forEachFieldDef(o=>{o.aggregate&&(r=!0)});const i={},s=new Set;return!r||(n.forEachFieldDef((o,a)=>{const{aggregate:u,field:l}=o;if(u)if(u==="count")i["*"]??(i["*"]={}),i["*"].count=new Set([Je(o,{forAs:!0})]);else{if(Mp(u)||H0(u)){const c=Mp(u)?"argmin":"argmax",f=u[c];i[f]??(i[f]={}),i[f][c]=new Set([Je({op:c,field:f},{forAs:!0})])}else i[l]??(i[l]={}),i[l][u]=new Set([Je(o,{forAs:!0})]);am(a)&&n.scaleDomain(a)==="unaggregated"&&(i[l]??(i[l]={}),i[l].min=new Set([Je({field:l,aggregate:"min"},{forAs:!0})]),i[l].max=new Set([Je({field:l,aggregate:"max"},{forAs:!0})]))}else iun(s,a,o,n)}),s.size+Ne(i).length===0)?null:new sf(t,s,i)}static makeFromTransform(t,n){const r=new Set,i={};for(const s of n.aggregate){const{op:o,field:a,as:u}=s;o&&(o==="count"?(i["*"]??(i["*"]={}),i["*"].count=new Set([u||Je(s,{forAs:!0})])):(i[a]??(i[a]={}),i[a][o]=new Set([u||Je(s,{forAs:!0})])))}for(const s of n.groupby??[])r.add(s);return r.size+Ne(i).length===0?null:new sf(t,r,i)}merge(t){return Y8e(this.dimensions,t.dimensions)?(sun(this.measures,t.measures),!0):(_rn("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...Ne(this.measures)])}producedFields(){const t=new Set;for(const n of Ne(this.measures))for(const r of Ne(this.measures[n])){const i=this.measures[n][r];i.size===0?t.add(`${r}_${n}`):i.forEach(t.add,t)}return t}hash(){return`Aggregate ${kn({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],r=[];for(const s of Ne(this.measures))for(const o of Ne(this.measures[s]))for(const a of this.measures[s][o])r.push(a),t.push(o),n.push(s==="*"?null:oc(s));return{type:"aggregate",groupby:[...this.dimensions].map(oc),ops:t,fields:n,as:r}}}class dx extends Sr{constructor(t,n,r,i){super(t),this.model=n,this.name=r,this.data=i;for(const s of ql){const o=n.facet[s];if(o){const{bin:a,sort:u}=o;this[s]={name:n.getName(`${s}_domain`),fields:[Je(o),...Hr(a)?[Je(o,{binSuffix:"end"})]:[]],...Pd(u)?{sortField:u}:Ie(u)?{sortIndexField:aE(o,s)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const n of ql)this[n]&&(t+=` ${n.charAt(0)}:${kn(this[n])}`);return t}get fields(){var n;const t=[];for(const r of ql)(n=this[r])!=null&&n.fields&&t.push(...this[r].fields);return t}dependentFields(){const t=new Set(this.fields);for(const n of ql)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of mh){const r=this.childModel.component.scales[n];if(r&&!r.merged){const i=r.get("type"),s=r.get("range");if(qs(i)&&q0(s)){const o=v5(this.childModel,n),a=gne(o);a?t[n]=a:Ue(yte(n))}}}return t}assembleRowColumnHeaderData(t,n,r){const i={row:"y",column:"x",facet:void 0}[t],s=[],o=[],a=[];i&&r&&r[i]&&(n?(s.push(`distinct_${r[i]}`),o.push("max")):(s.push(r[i]),o.push("distinct")),a.push(`distinct_${r[i]}`));const{sortField:u,sortIndexField:l}=this[t];if(u){const{op:c=t5,field:f}=u;s.push(f),o.push(c),a.push(Je(u,{forAs:!0}))}else l&&(s.push(l),o.push("max"),a.push(l));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...s.length?{fields:s,ops:o,as:a}:{}}]}}assembleFacetHeaderData(t){var u;const{columns:n}=this.model.layout,{layoutHeaders:r}=this.model.component,i=[],s={};for(const l of une){for(const c of lne){const f=(r[l]&&r[l][c])??[];for(const d of f)if(((u=d.axes)==null?void 0:u.length)>0){s[l]=!0;break}}if(s[l]){const c=`length(data("${this.facet.name}"))`,f=l==="row"?n?{signal:`ceil(${c} / ${n})`}:1:n?{signal:`min(${c}, ${n})`}:{signal:c};i.push({name:`${this.facet.name}_${l}`,transform:[{type:"sequence",start:0,stop:f}]})}}const{row:o,column:a}=s;return(o||a)&&i.unshift(this.assembleRowColumnHeaderData("facet",null,t)),i}assemble(){const t=[];let n=null;const r=this.getChildIndependentFieldsWithStep(),{column:i,row:s,facet:o}=this;if(i&&s&&(r.x||r.y)){n=`cross_${this.column.name}_${this.row.name}`;const a=[].concat(r.x??[],r.y??[]),u=a.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:a,ops:u}]})}for(const a of[hp,dp])this[a]&&t.push(this.assembleRowColumnHeaderData(a,n,r));if(o){const a=this.assembleFacetHeaderData(r);a&&t.push(...a)}return t}}function p1e(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function oun(e,t){const n=ote(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const r=p1e(t.slice(5,t.length));return`timeParse(${n},'${r}')`}else if(t.startsWith("utc:")){const r=p1e(t.slice(4,t.length));return`utcParse(${n},'${r}')`}else return Ue(Inn(t)),null}function aun(e){const t={};return F$(e.filter,n=>{if(F9e(n)){let r=null;wte(n)?r=qu(n.equal):xte(n)?r=qu(n.lte):Ete(n)?r=qu(n.lt):Ste(n)?r=qu(n.gt):Tte(n)?r=qu(n.gte):Ate(n)?r=n.range[0]:Cte(n)&&(r=(n.oneOf??n.in)[0]),r&&(Hv(r)?t[n.field]="date":Jn(r)?t[n.field]="number":rt(r)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function uun(e){const t={};function n(r){rE(r)?t[r.field]="date":r.type==="quantitative"&&snn(r.aggregate)?t[r.field]="number":Xw(r.field)>1?r.field in t||(t[r.field]="flatten"):Wv(r)&&Pd(r.sort)&&Xw(r.sort.field)>1&&(r.sort.field in t||(t[r.sort.field]="flatten"))}if(($i(e)||nl(e))&&e.forEachFieldDef((r,i)=>{if(ka(r))n(r);else{const s=Uv(i),o=e.fieldDef(s);n({...r,type:o.type})}}),$i(e)){const{mark:r,markDef:i,encoding:s}=e;if(W0(r)&&!e.encoding.order){const o=i.orient==="horizontal"?"y":"x",a=s[o];Ve(a)&&a.type==="quantitative"&&!(a.field in t)&&(t[a.field]="number")}}return t}function lun(e){const t={};if($i(e)&&e.component.selection)for(const n of Ne(e.component.selection)){const r=e.component.selection[n];for(const i of r.project.items)!i.channel&&Xw(i.field)>1&&(t[i.field]="flatten")}return t}class Wo extends Sr{clone(){return new Wo(null,qt(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${kn(this._parse)}`}static makeExplicit(t,n,r){var o;let i={};const s=n.data;return!kg(s)&&((o=s==null?void 0:s.format)!=null&&o.parse)&&(i=s.format.parse),this.makeWithAncestors(t,i,{},r)}static makeWithAncestors(t,n,r,i){for(const a of Ne(r)){const u=i.getWithExplicit(a);u.value!==void 0&&(u.explicit||u.value===r[a]||u.value==="derived"||r[a]==="flatten"?delete r[a]:Ue(Sye(a,r[a],u.value)))}for(const a of Ne(n)){const u=i.get(a);u!==void 0&&(u===n[a]?delete n[a]:Ue(Sye(a,n[a],u)))}const s=new lm(n,r);i.copyAll(s);const o={};for(const a of Ne(s.combine())){const u=s.get(a);u!==null&&(o[a]=u)}return Ne(o).length===0||i.parseNothing?null:new Wo(t,o)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const n of Ne(this._parse)){const r=this._parse[n];Xw(n)===1&&(t[n]=r)}return t}producedFields(){return new Set(Ne(this._parse))}dependentFields(){return new Set(Ne(this._parse))}assembleTransforms(t=!1){return Ne(this._parse).filter(n=>t?Xw(n)>1:!0).map(n=>{const r=oun(n,this._parse[n]);return r?{type:"formula",expr:r,as:ate(n)}:null}).filter(n=>n!==null)}}class m0 extends Sr{clone(){return new m0(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([pf])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:pf}}}class eO extends Sr{clone(){return new eO(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${kn(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class tO extends Sr{clone(){return new tO(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${kn(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class ov extends Sr{constructor(t){super(null),t??(t={name:"source"});let n;if(kg(t)||(n=t.format?{...fu(t.format,["parse"])}:{}),XA(t))this._data={values:t.values};else if(iE(t)){if(this._data={url:t.url},!n.type){let r=/(?:\.([^.]+))?$/.exec(t.url)[1];$n(["json","csv","tsv","dsv","topojson"],r)||(r="json"),n.type=r}}else ZBe(t)?this._data={values:[{type:"Sphere"}]}:(QBe(t)||kg(t))&&(this._data={});this._generator=kg(t),t.name&&(this._name=t.name),n&&!Or(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}var m1e=function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},cun=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},_T;function hne(e){return e instanceof ov||e instanceof eO||e instanceof tO}class pne{constructor(){_T.set(this,void 0),m1e(this,_T,!1,"f")}setModified(){m1e(this,_T,!0,"f")}get modifiedFlag(){return cun(this,_T,"f")}}_T=new WeakMap;class Gv extends pne{getNodeDepths(t,n,r){r.set(t,n);for(const i of t.children)this.getNodeDepths(i,n+1,r);return r}optimize(t){const r=[...this.getNodeDepths(t,0,new Map).entries()].sort((i,s)=>s[1]-i[1]);for(const i of r)this.run(i[0]);return this.modifiedFlag}}class mne extends pne{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class fun extends mne{mergeNodes(t,n){const r=n.shift();for(const i of n)t.removeChild(i),i.parent=r,i.remove()}run(t){const n=t.children.map(i=>i.hash()),r={};for(let i=0;i<n.length;i++)r[n[i]]===void 0?r[n[i]]=[t.children[i]]:r[n[i]].push(t.children[i]);for(const i of Ne(r))r[i].length>1&&(this.setModified(),this.mergeNodes(t,r[i]))}}class dun extends mne{constructor(t){super(),this.requiresSelectionId=t&&ane(t)}run(t){t instanceof m0&&(this.requiresSelectionId&&(hne(t.parent)||t.parent instanceof sf||t.parent instanceof Wo)||(this.setModified(),t.remove()))}}class hun extends pne{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let r=new Set;t instanceof kd&&(r=t.producedFields(),ite(r,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const i of t.children)this.run(i,new Set([...n,...r]))}}class pun extends mne{constructor(){super()}run(t){t instanceof Sa&&!t.isRequired()&&(this.setModified(),t.remove())}}class mun extends Gv{run(t){if(!hne(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof Wo)if(t instanceof Wo)this.setModified(),t.merge(n);else{if(ste(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class gun extends Gv{run(t){const n=[...t.children],r=t.children.filter(i=>i instanceof Wo);if(t.numChildren()>1&&r.length>=1){const i={},s=new Set;for(const o of r){const a=o.parse;for(const u of Ne(a))u in i?i[u]!==a[u]&&s.add(u):i[u]=a[u]}for(const o of s)delete i[o];if(!Or(i)){this.setModified();const o=new Wo(t,i);for(const a of n){if(a instanceof Wo)for(const u of Ne(i))delete a.parse[u];t.removeChild(a),a.parent=o,a instanceof Wo&&Ne(a.parse).length===0&&a.remove()}}}}}class yun extends Gv{run(t){t instanceof Sa||t.numChildren()>0||t instanceof dx||t instanceof ov||(this.setModified(),t.remove())}}class vun extends Gv{run(t){const n=t.children.filter(i=>i instanceof kd),r=n.pop();for(const i of n)this.setModified(),r.merge(i)}}class _un extends Gv{run(t){const n=t.children.filter(i=>i instanceof sf),r={};for(const i of n){const s=kn(i.groupBy);s in r||(r[s]=[]),r[s].push(i)}for(const i of Ne(r)){const s=r[i];if(s.length>1){const o=s.pop();for(const a of s)o.merge(a)&&(t.removeChild(a),a.parent=o,a.remove(),this.setModified())}}}}class bun extends Gv{constructor(t){super(),this.model=t}run(t){const n=!(hne(t)||t instanceof fx||t instanceof Wo||t instanceof m0),r=[],i=[];for(const s of t.children)s instanceof $d&&(n&&!ste(t.producedFields(),s.dependentFields())?r.push(s):i.push(s));if(r.length>0){const s=r.pop();for(const o of r)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof $d?t.merge(s,this.model.renameSignal.bind(this.model)):s.swapWithParent()}if(i.length>1){const s=i.pop();for(const o of i)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified()}}}class wun extends Gv{run(t){const n=[...t.children];if(!Q1(n,o=>o instanceof Sa)||t.numChildren()<=1)return;const i=[];let s;for(const o of n)if(o instanceof Sa){let a=o;for(;a.numChildren()===1;){const[u]=a.children;if(u instanceof Sa)a=u;else break}i.push(...a.children),s?(t.removeChild(o),o.parent=s.parent,s.parent.removeChild(s),s.parent=a,this.setModified()):s=a}else i.push(o);if(i.length){this.setModified();for(const o of i)o.parent.removeChild(o),o.parent=s}}}class Yv extends Sr{clone(){return new Yv(null,qt(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=md(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??Je(t)}hash(){return`JoinAggregateTransform ${kn(this.transform)}`}assemble(){const t=[],n=[],r=[];for(const s of this.transform.joinaggregate)n.push(s.op),r.push(this.getDefaultName(s)),t.push(s.field===void 0?null:s.field);const i=this.transform.groupby;return{type:"joinaggregate",as:r,ops:n,fields:t,...i!==void 0?{groupby:i}:{}}}}function Eun(e){return e.stack.stackBy.reduce((t,n)=>{const r=n.fieldDef,i=Je(r);return i&&t.push(i),t},[])}function xun(e){return Ie(e)&&e.every(t=>rt(t))&&e.length>1}class mp extends Sr{clone(){return new mp(null,qt(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:r,groupby:i,as:s,offset:o="zero"}=n,a=[],u=[];if(n.sort!==void 0)for(const f of n.sort)a.push(f.field),u.push(qi(f.order,"ascending"));const l={field:a,order:u};let c;return xun(s)?c=s:rt(s)?c=[s,`${s}_end`]:c=[`${n.stack}_start`,`${n.stack}_end`],new mp(t,{dimensionFieldDefs:[],stackField:r,groupby:i,offset:o,sort:l,facetby:[],as:c})}static makeFromEncoding(t,n){const r=n.stack,{encoding:i}=n;if(!r)return null;const{groupbyChannels:s,fieldChannel:o,offset:a,impute:u}=r,l=s.map(h=>{const p=i[h];return Qd(p)}).filter(h=>!!h),c=Eun(n),f=n.encoding.order;let d;if(Ie(f)||Ve(f))d=v9e(f);else{const h=aBe(f)?f.sort:o==="y"?"descending":"ascending";d=c.reduce((p,m)=>(p.field.includes(m)||(p.field.push(m),p.order.push(h)),p),{field:[],order:[]})}return new mp(t,{dimensionFieldDefs:l,stackField:n.vgField(o),facetby:[],stackby:c,sort:d,offset:a,impute:u,as:[n.vgField(o,{suffix:"start",forAs:!0}),n.vgField(o,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${kn(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:r}=this._stack;return t.length>0?t.map(i=>i.bin?n?[Je(i,{binSuffix:"mid"})]:[Je(i,{}),Je(i,{binSuffix:"end"})]:[Je(i)]).flat():r??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:r,stackField:i,stackby:s,sort:o,offset:a,impute:u,as:l}=this._stack;if(u)for(const c of r){const{bandPosition:f=.5,bin:d}=c;if(d){const h=Je(c,{expr:"datum"}),p=Je(c,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${f}*${h}+${1-f}*${p}`,as:Je(c,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:i,groupby:[...s,...n],key:Je(c,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:i,sort:o,as:l,offset:a}),t}}class hx extends Sr{clone(){return new hx(null,qt(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=md(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??Je(t)}hash(){return`WindowTransform ${kn(this.transform)}`}assemble(){const t=[],n=[],r=[],i=[];for(const f of this.transform.window)n.push(f.op),r.push(this.getDefaultName(f)),i.push(f.param===void 0?null:f.param),t.push(f.field===void 0?null:f.field);const s=this.transform.frame,o=this.transform.groupby;if(s&&s[0]===null&&s[1]===null&&n.every(f=>mte(f)))return{type:"joinaggregate",as:r,ops:n,fields:t,...o!==void 0?{groupby:o}:{}};const a=[],u=[];if(this.transform.sort!==void 0)for(const f of this.transform.sort)a.push(f.field),u.push(f.order??"ascending");const l={field:a,order:u},c=this.transform.ignorePeers;return{type:"window",params:i,as:r,ops:n,fields:t,sort:l,...c!==void 0?{ignorePeers:c}:{},...o!==void 0?{groupby:o}:{},...s!==void 0?{frame:s}:{}}}}function Sun(e){function t(n){if(!(n instanceof dx)){const r=n.clone();if(r instanceof Sa){const i=Pq+r.getSource();r.setSource(i),e.model.component.data.outputNodes[i]=r}else(r instanceof sf||r instanceof mp||r instanceof hx||r instanceof Yv)&&r.addDimensions(e.fields);for(const i of n.children.flatMap(t))i.parent=r;return[r]}return n.children.flatMap(t)}return t}function Oq(e){if(e instanceof dx)if(e.numChildren()===1&&!(e.children[0]instanceof Sa)){const t=e.children[0];(t instanceof sf||t instanceof mp||t instanceof hx||t instanceof Yv)&&t.addDimensions(e.fields),t.swapWithParent(),Oq(e)}else{const t=e.model.component.data.main;Wje(t);const n=Sun(e),r=e.children.map(n).flat();for(const i of r)i.parent=t}else e.children.map(Oq)}function Wje(e){if(e instanceof Sa&&e.type===zr.Main&&e.numChildren()===1){const t=e.children[0];t instanceof dx||(t.swapWithParent(),Wje(e))}}const Pq="scale_",tk=5;function kq(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!kq(t.children))return!1}return!0}function xc(e,t){let n=!1;for(const r of t)n=e.optimize(r)||n;return n}function g1e(e,t,n){let r=e.sources,i=!1;return i=xc(new pun,r)||i,i=xc(new dun(t),r)||i,r=r.filter(s=>s.numChildren()>0),i=xc(new yun,r)||i,r=r.filter(s=>s.numChildren()>0),n||(i=xc(new mun,r)||i,i=xc(new bun(t),r)||i,i=xc(new hun,r)||i,i=xc(new gun,r)||i,i=xc(new _un,r)||i,i=xc(new vun,r)||i,i=xc(new fun,r)||i,i=xc(new wun,r)||i),e.sources=r,i}function Tun(e,t){kq(e.sources);let n=0,r=0;for(let i=0;i<tk&&g1e(e,t,!0);i++)n++;e.sources.map(Oq);for(let i=0;i<tk&&g1e(e,t,!1);i++)r++;kq(e.sources),Math.max(n,r)===tk&&Ue(`Maximum optimization runs(${tk}) reached.`)}class Ds{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new Ds(()=>t(n))}}function Gje(e){$i(e)?Aun(e):Cun(e)}function Aun(e){const t=e.component.scales;for(const n of Ne(t)){const r=Oun(e,n);if(t[n].setWithExplicit("domains",r),kun(e,n),e.component.data.isFaceted){let s=e;for(;!nl(s)&&s.parent;)s=s.parent;if(s.component.resolve.scale[n]==="shared")for(const a of r.value)Jh(a)&&(a.data=Pq+a.data.replace(Pq,""))}}}function Cun(e){for(const n of e.children)Gje(n);const t=e.component.scales;for(const n of Ne(t)){let r,i=null;for(const s of e.children){const o=s.component.scales[n];if(o){r===void 0?r=o.getWithExplicit("domains"):r=d0(r,o.getWithExplicit("domains"),"domains","scale",$q);const a=o.get("selectionExtent");i&&a&&i.param!==a.param&&Ue(Snn),i=a}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}function Iun(e,t,n,r){if(e==="unaggregated"){const{valid:i,reason:s}=y1e(t,n);if(!i){Ue(s);return}}else if(e===void 0&&r.useUnaggregatedDomain){const{valid:i}=y1e(t,n);if(i)return"unaggregated"}return e}function Oun(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=Iun(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:i}),t==="x"&&vs(r.x2)?vs(r.x)?d0(Sm(n,i,e,"x"),Sm(n,i,e,"x2"),"domain","scale",$q):Sm(n,i,e,"x2"):t==="y"&&vs(r.y2)?vs(r.y)?d0(Sm(n,i,e,"y"),Sm(n,i,e,"y2"),"domain","scale",$q):Sm(n,i,e,"y2"):Sm(n,i,e,t)}function Pun(e,t,n){return e.map(r=>({signal:`{data: ${o5(r,{timeUnit:n,type:t})}}`}))}function Wj(e,t,n){var i;const r=(i=Hs(n))==null?void 0:i.unit;return t==="temporal"||r?Pun(e,t,r):[e]}function Sm(e,t,n,r){const{encoding:i,markDef:s,mark:o,config:a,stack:u}=n,l=vs(i[r]),{type:c}=l,f=l.timeUnit;if(Grn(t)){const p=Sm(e,void 0,n,r),m=Wj(t.unionWith,c,f);return Kf([...m,...p.value])}else{if(Tt(t))return Kf([t]);if(t&&t!=="unaggregated"&&!q9e(t))return Kf(Wj(t,c,f))}if(u&&r===u.fieldChannel){if(u.offset==="normalize")return Lu([[0,1]]);const p=n.requestDataName(zr.Main);return Lu([{data:p,field:n.vgField(r,{suffix:"start"})},{data:p,field:n.vgField(r,{suffix:"end"})}])}const d=am(r)&&Ve(l)?$un(n,r,e):void 0;if(gh(l)){const p=Wj([l.datum],c,f);return Lu(p)}const h=l;if(t==="unaggregated"){const p=n.requestDataName(zr.Main),{field:m}=l;return Lu([{data:p,field:Je({field:m,aggregate:"min"})},{data:p,field:Je({field:m,aggregate:"max"})}])}else if(Hr(h.bin)){if(qs(e))return Lu(e==="bin-ordinal"?[]:[{data:GA(d)?n.requestDataName(zr.Main):n.requestDataName(zr.Raw),field:n.vgField(r,QI(h,r)?{binSuffix:"range"}:{}),sort:d===!0||!st(d)?{field:n.vgField(r,{}),op:"min"}:d}]);{const{bin:p}=h;if(Hr(p)){const m=dne(n,h.field,p);return Lu([new Ds(()=>{const g=n.getSignalName(m);return`[${g}.start, ${g}.stop]`})])}else return Lu([{data:n.requestDataName(zr.Main),field:n.vgField(r,{})}])}}else if(h.timeUnit&&$n(["time","utc"],e)){const p=i[ph(r)];if(oBe(h,p,s,a)){const m=n.requestDataName(zr.Main),g=f0({fieldDef:h,fieldDef2:p,markDef:s,config:a}),y=KA(o)&&g!==.5&&Wi(r);return Lu([{data:m,field:n.vgField(r,y?{suffix:d5}:{})},{data:m,field:n.vgField(r,{suffix:y?h5:"end"})}])}}return Lu(d?[{data:GA(d)?n.requestDataName(zr.Main):n.requestDataName(zr.Raw),field:n.vgField(r),sort:d}]:[{data:n.requestDataName(zr.Main),field:n.vgField(r)}])}function Gj(e,t){const{op:n,field:r,order:i}=e;return{op:n??(t?"sum":t5),...r?{field:oc(r)}:{},...i?{order:i}:{}}}function kun(e,t){var a;const n=e.component.scales[t],r=e.specifiedScales[t].domain,i=(a=e.fieldDef(t))==null?void 0:a.bin,s=q9e(r)&&r,o=Vv(i)&&YF(i.extent)&&i.extent;(s||o)&&n.set("selectionExtent",s??o,!0)}function $un(e,t,n){if(!qs(n))return;const r=e.fieldDef(t),i=r.sort;if(iBe(i))return{op:"min",field:aE(r,t),order:"ascending"};const{stack:s}=e,o=s?new Set([...s.groupbyFields,...s.stackBy.map(a=>a.fieldDef.field)]):void 0;if(Pd(i)){const a=s&&!o.has(i.field);return Gj(i,a)}else if(rBe(i)){const{encoding:a,order:u}=i,l=e.fieldDef(a),{aggregate:c,field:f}=l,d=s&&!o.has(f);if(Mp(c)||H0(c))return Gj({field:Je(l),order:u},d);if(mte(c)||!c)return Gj({op:c,field:f,order:u},d)}else{if(i==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if($n(["ascending",void 0],i))return!0}}function y1e(e,t){const{aggregate:n,type:r}=e;return n?rt(n)&&!ann.has(n)?{valid:!1,reason:Xnn(n)}:r==="quantitative"&&t==="log"?{valid:!1,reason:Qnn(e)}:{valid:!0}:{valid:!1,reason:Knn(e)}}function $q(e,t,n,r){return e.explicit&&t.explicit&&Ue(nrn(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function Run(e){const t=md(e.map(o=>{if(Jh(o)){const{sort:a,...u}=o;return u}return o}),kn),n=md(e.map(o=>{if(Jh(o)){const a=o.sort;return a!==void 0&&!GA(a)&&("op"in a&&a.op==="count"&&delete a.field,a.order==="ascending"&&delete a.order),a}}).filter(o=>o!==void 0),kn);if(t.length===0)return;if(t.length===1){const o=e[0];if(Jh(o)&&n.length>0){let a=n[0];if(n.length>1){Ue(Aye);const u=n.filter(l=>st(l)&&"op"in l&&l.op!=="min");n.every(l=>st(l)&&"op"in l)&&u.length===1?a=u[0]:a=!0}else if(st(a)&&"field"in a){const u=a.field;o.field===u&&(a=a.order?{order:a.order}:!0)}return{...o,sort:a}}return o}const r=md(n.map(o=>GA(o)||!("op"in o)||rt(o.op)&&o.op in rnn?o:(Ue(irn(o)),!0)),kn);let i;r.length===1?i=r[0]:r.length>1&&(Ue(Aye),i=!0);const s=md(e.map(o=>Jh(o)?o.data:null),o=>o);return s.length===1&&s[0]!==null?{data:s[0],fields:t.map(a=>a.field),...i?{sort:i}:{}}:{fields:t,...i?{sort:i}:{}}}function gne(e){if(Jh(e)&&rt(e.field))return e.field;if(unn(e)){let t;for(const n of e.fields)if(Jh(n)&&rt(n.field)){if(!t)t=n.field;else if(t!==n.field)return Ue(srn),t}return Ue(orn),t}else if(lnn(e)){Ue(arn);const t=e.fields[0];return rt(t)?t:void 0}}function v5(e,t){const r=e.component.scales[t].get("domains").map(i=>(Jh(i)&&(i.data=e.lookupDataSource(i.data)),i));return Run(r)}function Yje(e){return px(e)||yne(e)?e.children.reduce((t,n)=>t.concat(Yje(n)),v1e(e)):v1e(e)}function v1e(e){return Ne(e.component.scales).reduce((t,n)=>{const r=e.component.scales[n];if(r.merged)return t;const i=r.combine(),{name:s,type:o,selectionExtent:a,domains:u,range:l,reverse:c,...f}=i,d=Nun(i.range,s,n,e),h=v5(e,n),p=a?Ion(e,a,r,h):null;return t.push({name:s,type:o,...h?{domain:h}:{},...p?{domainRaw:p}:{},range:d,...c!==void 0?{reverse:c}:{},...f}),t},[])}function Nun(e,t,n,r){if(Wi(n)){if(q0(e))return{step:{signal:`${t}_step`}}}else if(st(e)&&Jh(e))return{...e,data:r.lookupDataSource(e.data)};return e}class Kje extends lm{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainDefinitelyIncludesZero(){return this.get("zero")!==!1?!0:Q1(this.get("domains"),t=>Ie(t)&&t.length===2&&Jn(t[0])&&t[0]<=0&&Jn(t[1])&&t[1]>=0)}}const Dun=["range","scheme"];function Lun(e){const t=e.component.scales;for(const n of GF){const r=t[n];if(!r)continue;const i=Mun(n,e);r.setWithExplicit("range",i)}}function _1e(e,t){const n=e.fieldDef(t);if(n!=null&&n.bin){const{bin:r,field:i}=n,s=Su(t),o=e.getName(s);if(st(r)&&r.binned&&r.step!==void 0)return new Ds(()=>{const a=e.scaleName(t),u=`(domain("${a}")[1] - domain("${a}")[0]) / ${r.step}`;return`${e.getSignalName(o)} / (${u})`});if(Hr(r)){const a=dne(e,i,r);return new Ds(()=>{const u=e.getSignalName(a),l=`(${u}.stop - ${u}.start) / ${u}.step`;return`${e.getSignalName(o)} / (${l})`})}}}function Mun(e,t){const n=t.specifiedScales[e],{size:r}=t,s=t.getScaleComponent(e).get("type");for(const f of Dun)if(n[f]!==void 0){const d=gq(s,f),h=W9e(e,f);if(!d)Ue(T9e(s,f,e));else if(h)Ue(h);else switch(f){case"range":{const p=n.range;if(Ie(p)){if(Wi(e))return Kf(p.map(m=>{if(m==="width"||m==="height"){const g=t.getName(m),y=t.getSignalName.bind(t);return Ds.fromName(y,g)}return m}))}else if(st(p))return Kf({data:t.requestDataName(zr.Main),field:p.field,sort:{op:"min",field:t.vgField(e)}});return Kf(p)}case"scheme":return Kf(Fun(n[f]))}}const o=e===pi||e==="xOffset"?"width":"height",a=r[o];if(Jd(a)){if(Wi(e))if(qs(s)){const f=Qje(a,t,e);if(f)return Kf({step:f})}else Ue(A9e(o));else if(qI(e)){const f=e===B0?"x":"y";if(t.getScaleComponent(f).get("type")==="band"){const p=Jje(a,s);if(p)return Kf(p)}}}const{rangeMin:u,rangeMax:l}=n,c=Bun(e,t);return(u!==void 0||l!==void 0)&&gq(s,"rangeMin")&&Ie(c)&&c.length===2?Kf([u??c[0],l??c[1]]):Lu(c)}function Fun(e){return Wrn(e)?{scheme:e.name,...fu(e,["name"])}:{scheme:e}}function Xje(e,t,n,{center:r}={}){const i=Su(e),s=t.getName(i),o=t.getSignalName.bind(t);return e===Ks&&dl(n)?r?[Ds.fromName(a=>`${o(a)}/2`,s),Ds.fromName(a=>`-${o(a)}/2`,s)]:[Ds.fromName(o,s),0]:r?[Ds.fromName(a=>`-${o(a)}/2`,s),Ds.fromName(a=>`${o(a)}/2`,s)]:[0,Ds.fromName(o,s)]}function Bun(e,t){const{size:n,config:r,mark:i,encoding:s}=t,{type:o}=vs(s[e]),u=t.getScaleComponent(e).get("type"),{domain:l,domainMid:c}=t.specifiedScales[e];switch(e){case pi:case Ks:{if($n(["point","band"],u)){const f=Zje(e,n,r.view);if(Jd(f))return{step:Qje(f,t,e)}}return Xje(e,t,u)}case B0:case ux:return jun(e,t,u);case sm:{const f=t.component.scales[e].get("zero"),d=e7e(i,f,r),h=Vun(i,n,t,r);return eE(u)?Uun(d,h,zun(u,r,l,e)):[d,h]}case vc:return[0,Math.PI*2];case zv:return[0,360];case If:return[0,new Ds(()=>{const f=t.getSignalName(nl(t.parent)?"child_width":"width"),d=t.getSignalName(nl(t.parent)?"child_height":"height");return`min(${f},${d})/2`})];case U0:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case V0:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case xu:return"symbol";case Eu:case dh:case hh:return u==="ordinal"?o==="nominal"?"category":"ordinal":c!==void 0?"diverging":i==="rect"||i==="geoshape"?"heatmap":"ramp";case om:case j0:case z0:return[r.scale.minOpacity,r.scale.maxOpacity]}}function Qje(e,t,n){const{encoding:r}=t,i=t.getScaleComponent(n),s=fte(n),o=r[s];if(MBe({step:e,offsetIsDiscrete:Qt(o)&&j9e(o.type)})==="offset"&&vBe(r,s)){const u=t.getScaleComponent(s);let c=`domain('${t.scaleName(s)}').length`;if(u.get("type")==="band"){const d=u.get("paddingInner")??u.get("padding")??0,h=u.get("paddingOuter")??u.get("padding")??0;c=`bandspace(${c}, ${d}, ${h})`}const f=i.get("paddingInner")??i.get("padding");return{signal:`${e.step} * ${c} / (1-${hnn(f)})`}}else return e.step}function Jje(e,t){if(MBe({step:e,offsetIsDiscrete:qs(t)})==="offset")return{step:e.step}}function jun(e,t,n){const r=e===B0?"x":"y",i=t.getScaleComponent(r);if(!i)return Xje(r,t,n,{center:!0});const s=i.get("type"),o=t.scaleName(r),{markDef:a,config:u}=t;if(s==="band"){const l=Zje(r,t.size,t.config.view);if(Jd(l)){const c=Jje(l,n);if(c)return c}return[0,{signal:`bandwidth('${o}')`}]}else{const l=t.encoding[r];if(Ve(l)&&l.timeUnit){const c=L9e(l.timeUnit,p=>`scale('${o}', ${p})`),f=t.config.scale.bandWithNestedOffsetPaddingInner,d=f0({fieldDef:l,markDef:a,config:u})-.5,h=d!==0?` + ${d}`:"";if(f){const p=Tt(f)?`${f.signal}/2`+h:`${f/2+d}`,m=Tt(f)?`(1 - ${f.signal}/2)`+h:`${1-f/2+d}`;return[{signal:`${p} * (${c})`},{signal:`${m} * (${c})`}]}return[0,{signal:c}]}return W8e(`Cannot use ${e} scale if ${r} scale is not discrete.`)}}function Zje(e,t,n){const r=e===pi?"width":"height",i=t[r];return i||qL(n,r)}function zun(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&Ie(n)?n.length+1:(Ue(grn(r)),3)}}function Uun(e,t,n){const r=()=>{const i=Yc(t),s=Yc(e),o=`(${i} - ${s}) / (${n} - 1)`;return`sequence(${s}, ${i} + ${o}, ${o})`};return Tt(t)?new Ds(r):{signal:r()}}function e7e(e,t,n){if(t)return Tt(t)?{signal:`${t.signal} ? 0 : ${e7e(e,!1,n)}`}:0;switch(e){case"bar":case"tick":return n.scale.minBandSize;case"line":case"trail":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize}throw new Error(KF("size",e))}const b1e=.95;function Vun(e,t,n,r){const i={x:_1e(n,"x"),y:_1e(n,"y")};switch(e){case"bar":case"tick":{if(r.scale.maxBandSize!==void 0)return r.scale.maxBandSize;const s=w1e(t,i,r.view);return Jn(s)?s-1:new Ds(()=>`${s.signal} - 1`)}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const s=w1e(t,i,r.view);return Jn(s)?Math.pow(b1e*s,2):new Ds(()=>`pow(${b1e} * ${s.signal}, 2)`)}}throw new Error(KF("size",e))}function w1e(e,t,n){const r=Jd(e.width)?e.width.step:HL(n,"width"),i=Jd(e.height)?e.height.step:HL(n,"height");return t.x||t.y?new Ds(()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`):Math.min(r,i)}function t7e(e,t){$i(e)?Hun(e,t):r7e(e,t)}function Hun(e,t){const n=e.component.scales,{config:r,encoding:i,markDef:s,specifiedScales:o}=e;for(const a of Ne(n)){const u=o[a],l=n[a],c=e.getScaleComponent(a),f=vs(i[a]),d=u[t],h=c.get("type"),p=c.get("padding"),m=c.get("paddingInner"),g=gq(h,t),y=W9e(a,t);if(d!==void 0&&(g?y&&Ue(y):Ue(T9e(h,t,a))),g&&y===void 0)if(d!==void 0){const v=f.timeUnit,_=f.type;switch(t){case"domainMax":case"domainMin":Hv(u[t])||_==="temporal"||v?l.set(t,{signal:o5(u[t],{type:_,timeUnit:v})},!0):l.set(t,u[t],!0);break;default:l.copyKeyFromObject(t,u)}}else{const v=t in E1e?E1e[t]({model:e,channel:a,fieldOrDatumDef:f,scaleType:h,scalePadding:p,scalePaddingInner:m,domain:u.domain,domainMin:u.domainMin,domainMax:u.domainMax,markDef:s,config:r,hasNestedOffsetScale:_Be(i,a),hasSecondaryRangeChannel:!!i[ph(a)]}):r.scale[t];v!==void 0&&l.set(t,v,!1)}}}const E1e={bins:({model:e,fieldOrDatumDef:t})=>Ve(t)?qun(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>Wun(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:r,domainMax:i,fieldOrDatumDef:s})=>Gun(e,t,n,r,i,s),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>Yun(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:r,config:i,hasNestedOffsetScale:s})=>Kun(e,t,n.type,r,i.scale,s),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:r,config:i,hasNestedOffsetScale:s})=>Xun(e,t,n,r,i.scale,s),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>{const i=Ve(e)?e.sort:void 0;return Qun(t,i,n,r.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i,config:s,hasSecondaryRangeChannel:o})=>Jun(e,t,n,r,i,s.scale,o)};function n7e(e){$i(e)?Lun(e):r7e(e,"range")}function r7e(e,t){const n=e.component.scales;for(const r of e.children)t==="range"?n7e(r):t7e(r,t);for(const r of Ne(n)){let i;for(const s of e.children){const o=s.component.scales[r];if(o){const a=o.getWithExplicit(t);i=d0(i,a,t,"scale",XBe((u,l)=>{switch(t){case"range":return u.step&&l.step?u.step-l.step:0}return 0}))}}n[r].setWithExplicit(t,i)}}function qun(e,t){const n=t.bin;if(Hr(n)){const r=dne(e,t.field,n);return new Ds(()=>e.getSignalName(r))}else if(so(n)&&Vv(n)&&n.step!==void 0)return{step:n.step}}function Wun(e,t){if($n([Eu,dh,hh],e)&&t!=="nominal")return"hcl"}function Gun(e,t,n,r,i,s){var o;if(!((o=Qd(s))!=null&&o.bin||Ie(n)||i!=null||r!=null||$n([du.TIME,du.UTC],e)))return Wi(t)?!0:void 0}function Yun(e,t,n,r,i,s){if(Wi(e)){if(Kc(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:o,orient:a}=i;if(o==="bar"&&!(Ve(r)&&(r.bin||r.timeUnit))&&(a==="vertical"&&e==="x"||a==="horizontal"&&e==="y"))return s.continuousBandSize}if(t===du.POINT)return n.pointPadding}}function Kun(e,t,n,r,i,s=!1){if(e===void 0){if(Wi(t)){const{bandPaddingInner:o,barBandPaddingInner:a,rectBandPaddingInner:u,bandWithNestedOffsetPaddingInner:l}=i;return s?l:qi(o,n==="bar"?a:u)}else if(qI(t)&&r===du.BAND)return i.offsetBandPaddingInner}}function Xun(e,t,n,r,i,s=!1){if(e===void 0){if(Wi(t)){const{bandPaddingOuter:o,bandWithNestedOffsetPaddingOuter:a}=i;if(s)return a;if(n===du.BAND)return qi(o,Tt(r)?{signal:`${r.signal}/2`}:r/2)}else if(qI(t)){if(n===du.POINT)return .5;if(n===du.BAND)return i.offsetBandPaddingOuter}}}function Qun(e,t,n,r){if(n==="x"&&r.xReverse!==void 0)return dl(e)&&t==="descending"?Tt(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(dl(e)&&t==="descending")return!0}function Jun(e,t,n,r,i,s,o){if(!!n&&n!=="unaggregated"&&dl(i)){if(Ie(n)){const u=n[0],l=n[n.length-1];if(Jn(u)&&u<=0&&Jn(l)&&l>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!eE(i))return!0;if(!(Ve(t)&&t.bin)&&$n([...mh,...Ktn],e)){const{orient:u,type:l}=r;return $n(["bar","area","line","trail"],l)&&(u==="horizontal"&&e==="y"||u==="vertical"&&e==="x")?!1:$n(["bar","area"],l)&&!o?!0:s==null?void 0:s.zero}return!1}function Zun(e,t,n,r,i=!1){const s=eln(t,n,r,i),{type:o}=e;return am(t)?o!==void 0?Zrn(t,o)?Ve(n)&&!Jrn(o,n.type)?(Ue(ern(o,s)),s):o:(Ue(Znn(t,o,s)),s):s:null}function eln(e,t,n,r){var i;switch(t.type){case"nominal":case"ordinal":{if(Ub(e)||Fj(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&Ue(Bj(e,"ordinal")),"ordinal";if(Wi(e)||qI(e)){if($n(["rect","bar","image","rule"],n.type)||r)return"band"}else if(n.type==="arc"&&e in pte)return"band";const s=n[Su(e)];return nv(s)||nE(t)&&((i=t.axis)!=null&&i.tickBand)?"band":"point"}case"temporal":return Ub(e)?"time":Fj(e)==="discrete"?(Ue(Bj(e,"temporal")),"ordinal"):Ve(t)&&t.timeUnit&&Hs(t.timeUnit).utc?"utc":"time";case"quantitative":return Ub(e)?Ve(t)&&Hr(t.bin)?"bin-ordinal":"linear":Fj(e)==="discrete"?(Ue(Bj(e,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(x9e(t.type))}function tln(e,{ignoreRange:t}={}){i7e(e),Gje(e);for(const n of Qrn)t7e(e,n);t||n7e(e)}function i7e(e){$i(e)?e.component.scales=nln(e):e.component.scales=iln(e)}function nln(e){const{encoding:t,mark:n,markDef:r}=e,i={};for(const s of GF){const o=vs(t[s]);if(o&&n===K9e&&s===xu&&o.type===lx)continue;let a=o&&o.scale;if(o&&a!==null&&a!==!1){a??(a={});const u=_Be(t,s),l=Zun(a,s,o,r,u);i[s]=new Kje(e.scaleName(`${s}`,!0),{value:l,explicit:a.type===l})}}return i}const rln=XBe((e,t)=>Iye(e)-Iye(t));function iln(e){var t;const n=e.component.scales={},r={},i=e.component.resolve;for(const s of e.children){i7e(s);for(const o of Ne(s.component.scales))if((t=i.scale)[o]??(t[o]=Nje(o,e)),i.scale[o]==="shared"){const a=r[o],u=s.component.scales[o].getWithExplicit("type");a?zrn(a.value,u.value)?r[o]=d0(a,u,"type","scale",rln):(i.scale[o]="independent",delete r[o]):r[o]=u}}for(const s of Ne(r)){const o=e.scaleName(s,!0),a=r[s];n[s]=new Kje(o,a);for(const u of e.children){const l=u.component.scales[s];l&&(u.renameScale(l.get("name"),o),l.merged=!0)}}return n}class Yj{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function $i(e){return(e==null?void 0:e.type)==="unit"}function nl(e){return(e==null?void 0:e.type)==="facet"}function yne(e){return(e==null?void 0:e.type)==="concat"}function px(e){return(e==null?void 0:e.type)==="layer"}class vne{constructor(t,n,r,i,s,o,a){this.type=n,this.parent=r,this.config=s,this.correctDataNames=u=>{var l,c,f;return(l=u.from)!=null&&l.data&&(u.from.data=this.lookupDataSource(u.from.data)),(f=(c=u.from)==null?void 0:c.facet)!=null&&f.data&&(u.from.facet.data=this.lookupDataSource(u.from.facet.data)),u},this.parent=r,this.config=s,this.view=Ja(a),this.name=t.name??i,this.title=Nm(t.title)?{text:t.title}:t.title?Ja(t.title):void 0,this.scaleNameMap=r?r.scaleNameMap:new Yj,this.projectionNameMap=r?r.projectionNameMap:new Yj,this.signalNameMap=r?r.signalNameMap:new Yj,this.data=t.data,this.description=t.description,this.transforms=fon(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:msn(t,n,s),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:n5(t)||(r==null?void 0:r.component.data.isFaceted)&&t.data===void 0},layoutSize:new lm,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...o?qt(o):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){tln(this)}parseProjection(){Hje(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){Bje(this)}assembleEncodeFromView(t){const{style:n,...r}=t,i={};for(const s of Ne(r)){const o=r[s];o!==void 0&&(i[s]=Xr(o))}return i}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=Xr(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}:Or(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:r,config:i}=this,s=Tan(r.layoutHeaders,i);return{padding:t,...this.assembleDefaultLayout(),...n,...s?{titleBand:s}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const r of ql)t[r].title&&n.push(_an(this,r));for(const r of une)n=n.concat(ban(this,r));return n}assembleAxes(){return oan(this.component.axes,this.config)}assembleLegends(){return zje(this)}assembleProjections(){return Yan(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},r={...p9e(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(r.text)return $n(["unit","layer"],this.type)?$n(["middle",void 0],r.anchor)&&(r.frame??(r.frame="group")):r.anchor??(r.anchor="start"),Or(r)?void 0:r}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const r=this.assembleLayout();r&&(n.layout=r),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const i=!this.parent||nl(this.parent)?Yje(this):[];i.length>0&&(n.scales=i);const s=this.assembleAxes();s.length>0&&(n.axes=s);const o=this.assembleLegends();return o.length>0&&(n.legends=o),n}getName(t){return hi((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(zr[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),r=this.component.data.outputNodeRefCounts;return r[n]=(r[n]||0)+1,n}getSizeSignalRef(t){if(nl(this.parent)){const n=$je(t),r=WF(n),i=this.component.scales[r];if(i&&!i.merged){const s=i.get("type"),o=i.get("range");if(qs(s)&&q0(o)){const a=i.get("name"),u=v5(this,r),l=gne(u);if(l){const c=Je({aggregate:"distinct",field:l},{expr:"datum"});return{signal:kje(a,i,c)}}else return Ue(yte(r)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(s9e(t)&&am(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getSelectionComponent(t,n){let r=this.component.selection[t];if(!r&&this.parent&&(r=this.parent.getSelectionComponent(t,n)),!r)throw new Error(vnn(n));return r}hasAxisOrientSignalRef(){var t,n;return((t=this.component.axes.x)==null?void 0:t.some(r=>r.hasOrientSignalRef()))||((n=this.component.axes.y)==null?void 0:n.some(r=>r.hasOrientSignalRef()))}}class s7e extends vne{vgField(t,n={}){const r=this.fieldDef(t);if(r)return Je(r,n)}reduceFieldDef(t,n){return Hin(this.getMapping(),(r,i,s)=>{const o=Qd(i);return o?t(r,o,s):r},n)}forEachFieldDef(t,n){Hte(this.getMapping(),(r,i)=>{const s=Qd(r);s&&t(s,i)},n)}}class _5 extends Sr{clone(){return new _5(null,qt(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=qt(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"value",r[1]??"density"]}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${kn(this.transform)}`}assemble(){const{density:t,...n}=this.transform,r={type:"kde",field:t,...n};return this.transform.groupby&&(r.resolve="shared"),r}}class b5 extends Sr{clone(){return new b5(null,qt(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=qt(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${kn(this.transform)}`}assemble(){const{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}}class QA extends Sr{clone(){return new QA(null,{...this.filter})}constructor(t,n){super(t),this.filter=n}static make(t,n){const{config:r,mark:i,markDef:s}=n;if(fr("invalid",s,r)!=="filter")return null;const a=n.reduceFieldDef((u,l,c)=>{const f=am(c)&&n.getScaleComponent(c);if(f){const d=f.get("type");dl(d)&&l.aggregate!=="count"&&!W0(i)&&(u[l.field]=l)}return u},{});return Ne(a).length?new QA(t,a):null}dependentFields(){return new Set(Ne(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${kn(this.filter)}`}assemble(){const t=Ne(this.filter).reduce((n,r)=>{const i=this.filter[r],s=Je(i,{expr:"datum"});return i!==null&&(i.type==="temporal"?n.push(`(isDate(${s}) || (isValid(${s}) && isFinite(+${s})))`):i.type==="quantitative"&&(n.push(`isValid(${s})`),n.push(`isFinite(+${s})`))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}class w5 extends Sr{clone(){return new w5(this.parent,qt(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=qt(n);const{flatten:r,as:i=[]}=this.transform;this.transform.as=r.map((s,o)=>i[o]??s)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${kn(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class E5 extends Sr{clone(){return new E5(null,qt(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=qt(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"key",r[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${kn(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class qb extends Sr{clone(){return new qb(null,qt(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let r=0;for(const i of[[Pf,Of],[ac,kf]]){const s=i.map(o=>{const a=vs(n.encoding[o]);return Ve(a)?a.field:gh(a)?{expr:`${a.datum}`}:hf(a)?{expr:`${a.value}`}:void 0});(s[0]||s[1])&&(t=new qb(t,s,null,n.getName(`geojson_${r++}`)))}if(n.channelHasField(xu)){const i=n.typedFieldDef(xu);i.type===lx&&(t=new qb(t,null,i.field,n.getName(`geojson_${r++}`)))}return t}constructor(t,n,r,i){super(t),this.fields=n,this.geojson=r,this.signal=i}dependentFields(){const t=(this.fields??[]).filter(rt);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${kn(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class JA extends Sr{clone(){return new JA(null,this.projection,qt(this.fields),qt(this.as))}constructor(t,n,r,i){super(t),this.projection=n,this.fields=r,this.as=i}static parseAll(t,n){if(!n.projectionName())return t;for(const r of[[Pf,Of],[ac,kf]]){const i=r.map(o=>{const a=vs(n.encoding[o]);return Ve(a)?a.field:gh(a)?{expr:`${a.datum}`}:hf(a)?{expr:`${a.value}`}:void 0}),s=r[0]===ac?"2":"";(i[0]||i[1])&&(t=new JA(t,n.projectionName(),i,[n.getName(`x${s}`),n.getName(`y${s}`)]))}return t}dependentFields(){return new Set(this.fields.filter(rt))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${kn(this.fields)} ${kn(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class b1 extends Sr{clone(){return new b1(null,qt(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:r,step:i}=t;return{signal:`sequence(${[n,r,...i?[i]:[]].join(",")})`}}static makeFromTransform(t,n){return new b1(t,n)}static makeFromEncoding(t,n){const r=n.encoding,i=r.x,s=r.y;if(Ve(i)&&Ve(s)){const o=i.impute?i:s.impute?s:void 0;if(o===void 0)return;const a=i.impute?s:s.impute?i:void 0,{method:u,value:l,frame:c,keyvals:f}=o.impute,d=wBe(n.mark,r);return new b1(t,{impute:o.field,key:a.field,...u?{method:u}:{},...l!==void 0?{value:l}:{},...c?{frame:c}:{},...f!==void 0?{keyvals:f}:{},...d.length?{groupby:d}:{}})}return null}hash(){return`Impute ${kn(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:r,method:i,groupby:s,value:o,frame:a=[null,null]}=this.transform,u={type:"impute",field:t,key:n,...r?{keyvals:Wsn(r)?this.processSequence(r):r}:{},method:"value",...s?{groupby:s}:{},value:!i||i==="value"?o:null};if(i&&i!=="value"){const l={type:"window",as:[`imputed_${t}_value`],ops:[i],fields:[t],frame:a,ignorePeers:!1,...s?{groupby:s}:{}},c={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[u,l,c]}else return[u]}}class x5 extends Sr{clone(){return new x5(null,qt(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=qt(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${kn(this.transform)}`}assemble(){const{loess:t,on:n,...r}=this.transform;return{type:"loess",x:n,y:t,...r}}}class ZA extends Sr{clone(){return new ZA(null,qt(this.transform),this.secondary)}constructor(t,n,r){super(t),this.transform=n,this.secondary=r}static make(t,n,r,i){const s=n.component.data.sources,{from:o}=r;let a=null;if(Gsn(o)){let u=u7e(o.data,s);u||(u=new ov(o.data),s.push(u));const l=n.getName(`lookup_${i}`);a=new Sa(u,l,zr.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[l]=a}else if(Ysn(o)){const u=o.param;r={as:u,...r};let l;try{l=n.getSelectionComponent(hi(u),u)}catch{throw new Error(Enn(u))}if(a=l.materialized,!a)throw new Error(xnn(u))}return new ZA(t,r,a.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?nt(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${kn({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:nt(this.transform.as)}:{}};else{let n=this.transform.as;rt(n)||(Ue(knn),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class S5 extends Sr{clone(){return new S5(null,qt(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=qt(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"prob",r[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${kn(this.transform)}`}assemble(){const{quantile:t,...n}=this.transform;return{type:"quantile",field:t,...n}}}class T5 extends Sr{clone(){return new T5(null,qt(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=qt(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${kn(this.transform)}`}assemble(){const{regression:t,on:n,...r}=this.transform;return{type:"regression",x:n,y:t,...r}}}class A5 extends Sr{clone(){return new A5(null,qt(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=md((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${kn(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:r,limit:i,op:s}=this.transform;return{type:"pivot",field:t,value:n,...i!==void 0?{limit:i}:{},...s!==void 0?{op:s}:{},...r!==void 0?{groupby:r}:{}}}}class C5 extends Sr{clone(){return new C5(null,qt(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${kn(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function o7e(e){let t=0;function n(r,i){if(r instanceof ov&&!r.isGenerator&&!iE(r.data)&&(e.push(i),i={name:null,source:i.name,transform:[]}),r instanceof Wo&&(r.parent instanceof ov&&!i.source?(i.format={...i.format,parse:r.assembleFormatParse()},i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof dx){i.name||(i.name=`data_${t++}`),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,e.push(...r.assemble());return}switch((r instanceof eO||r instanceof tO||r instanceof QA||r instanceof fx||r instanceof oE||r instanceof JA||r instanceof sf||r instanceof ZA||r instanceof hx||r instanceof Yv||r instanceof E5||r instanceof w5||r instanceof _5||r instanceof x5||r instanceof S5||r instanceof T5||r instanceof m0||r instanceof C5||r instanceof A5||r instanceof b5)&&i.transform.push(r.assemble()),(r instanceof $d||r instanceof kd||r instanceof b1||r instanceof mp||r instanceof qb)&&i.transform.push(...r.assemble()),r instanceof Sa&&(i.source&&i.transform.length===0?r.setSource(i.source):r.parent instanceof Sa?r.setSource(i.name):(i.name||(i.name=`data_${t++}`),r.setSource(i.name),r.numChildren()===1&&(e.push(i),i={name:null,source:i.name,transform:[]}))),r.numChildren()){case 0:r instanceof Sa&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name=`data_${t++}`);let s=i.name;!i.source||i.transform.length>0?e.push(i):s=i.source;for(const o of r.children)n(o,{name:null,source:s,transform:[]});break}}}return n}function sln(e){const t=[],n=o7e(t);for(const r of e.children)n(r,{source:e.name,name:null,transform:[]});return t}function oln(e,t){const n=[],r=o7e(n);let i=0;for(const o of e.sources){o.hasName()||(o.dataName=`source_${i++}`);const a=o.assemble();r(o,a)}for(const o of n)o.transform.length===0&&delete o.transform;let s=0;for(const[o,a]of n.entries())(a.transform??[]).length===0&&!a.source&&n.splice(s++,0,n.splice(o,1)[0]);for(const o of n)for(const a of o.transform??[])a.type==="lookup"&&(a.from=e.outputNodes[a.from].getSource());for(const o of n)o.name in t&&(o.values=t[o.name]);return n}function aln(e){return e==="top"||e==="left"||Tt(e)?"header":"footer"}function uln(e){for(const t of ql)lln(e,t);x1e(e,"x"),x1e(e,"y")}function lln(e,t){var o;const{facet:n,config:r,child:i,component:s}=e;if(e.channelHasField(t)){const a=n[t],u=uE("title",null,r,t);let l=Vb(a,r,{allowDisabling:!0,includeDefault:u===void 0||!!u});i.component.layoutHeaders[t].title&&(l=Ie(l)?l.join(", "):l,l+=` / ${i.component.layoutHeaders[t].title}`,i.component.layoutHeaders[t].title=null);const c=uE("labelOrient",a.header,r,t),f=a.header!==null?qi((o=a.header)==null?void 0:o.labels,r.header.labels,!0):!1,d=$n(["bottom","right"],c)?"footer":"header";s.layoutHeaders[t]={title:a.header!==null?l:null,facetFieldDef:a,[d]:t==="facet"?[]:[a7e(e,t,f)]}}}function a7e(e,t,n){const r=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function x1e(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:r,resolve:i}=e.component;if(i.axis[t]=fne(i,t),i.axis[t]==="shared"){const s=t==="x"?"column":"row",o=r[s];for(const a of n.component.axes[t]){const u=aln(a.get("orient"));o[u]??(o[u]=[a7e(e,s,!1)]);const l=vT(a,"main",e.config,{header:!0});l&&o[u][0].axes.push(l),a.mainExtracted=!0}}}}function cln(e){_ne(e),KL(e,"width"),KL(e,"height")}function fln(e){_ne(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";KL(e,t),KL(e,n)}function _ne(e){for(const t of e.children)t.parseLayoutSize()}function KL(e,t){const n=$je(t),r=WF(n),i=e.component.resolve,s=e.component.layoutSize;let o;for(const a of e.children){const u=a.component.layoutSize.getWithExplicit(n),l=i.scale[r]??Nje(r,e);if(l==="independent"&&u.value==="step"){o=void 0;break}if(o){if(l==="independent"&&o.value!==u.value){o=void 0;break}o=d0(o,u,n,"")}else o=u}if(o){for(const a of e.children)e.renameSignal(a.getName(n),e.getName(t)),a.component.layoutSize.set(n,"merged",!1);s.setWithExplicit(t,o)}else s.setWithExplicit(t,{explicit:!1,value:void 0})}function dln(e){const{size:t,component:n}=e;for(const r of mh){const i=Su(r);if(t[i]){const s=t[i];n.layoutSize.set(i,Jd(s)?"step":s,!0)}else{const s=hln(e,i);n.layoutSize.set(i,s,!1)}}}function hln(e,t){const n=t==="width"?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){const s=i.get("type"),o=i.get("range");if(qs(s)){const a=qL(r.view,t);return q0(o)||Jd(a)?"step":a}else return _q(r.view,t)}else{if(e.hasProjection||e.mark==="arc")return _q(r.view,t);{const s=qL(r.view,t);return Jd(s)?s.step:s}}}function Rq(e,t,n){return Je(t,{suffix:`by_${Je(e)}`,...n})}class w2 extends s7e{constructor(t,n,r,i){super(t,"facet",n,r,i,t.resolve),this.child=Sne(t.spec,this,this.getName("child"),void 0,i),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!KI(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=Ne(t),r={};for(const i of n){if(![dp,hp].includes(i)){Ue(KF(i,"facet"));break}const s=t[i];if(s.field===void 0){Ue(pq(s,i));break}r[i]=this.initFacetFieldDef(s,i)}return r}initFacetFieldDef(t,n){const r=Ute(t,n);return r.header?r.header=Ja(r.header):r.header===null&&(r.header=null),r}channelHasField(t){return!!this.facet[t]}fieldDef(t){return this.facet[t]}parseData(){this.component.data=I5(this),this.child.parseData()}parseLayoutSize(){_ne(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),uln(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const n of ql)for(const r of lne){const i=this.component.layoutHeaders[n],s=i[r],{facetFieldDef:o}=i;if(o){const a=uE("titleOrient",o.header,this.config,n);if(["right","bottom"].includes(a)){const u=g5(n,a);t.titleAnchor??(t.titleAnchor={}),t.titleAnchor[u]="end"}}if(s!=null&&s[0]){const a=n==="row"?"height":"width",u=r==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(a)&&(t[u]??(t[u]={}),t[u][n]=.5),i.title&&(t.offset??(t.offset={}),t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:n}=this.facet,r=t?this.columnDistinctSignal():n?1:void 0;let i="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(i="none"),{...this.getHeaderLayoutMixins(),...r?{columns:r}:{},bounds:"full",align:i}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof w2))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof w2?{...this.channelHasField("column")?{encode:{update:{columns:{field:Je(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],r=[];if(this.child instanceof w2){if(this.child.channelHasField("column")){const i=Je(this.child.facet.column);t.push(i),n.push("distinct"),r.push(`distinct_${i}`)}}else for(const i of mh){const s=this.child.component.scales[i];if(s&&!s.merged){const o=s.get("type"),a=s.get("range");if(qs(o)&&q0(a)){const u=v5(this.child,i),l=gne(u);l?(t.push(l),n.push("distinct"),r.push(`distinct_${l}`)):Ue(yte(i))}}}return{fields:t,ops:n,as:r}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:r,column:i}=this.facet,{fields:s,ops:o,as:a}=this.getCardinalityAggregateForChild(),u=[];for(const c of ql){const f=this.facet[c];if(f){u.push(Je(f));const{bin:d,sort:h}=f;if(Hr(d)&&u.push(Je(f,{binSuffix:"end"})),Pd(h)){const{field:p,op:m=t5}=h,g=Rq(f,h);r&&i?(s.push(g),o.push("max"),a.push(g)):(s.push(p),o.push(m),a.push(g))}else if(Ie(h)){const p=aE(f,c);s.push(p),o.push("max"),a.push(p)}}}const l=!!r&&!!i;return{name:t,data:n,groupby:u,...l||s.length>0?{aggregate:{...l?{cross:l}:{},...s.length?{fields:s,ops:o,as:a}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,r=n[t];return r?Pd(r.sort)?[Rq(r,r.sort,{expr:"datum"})]:Ie(r.sort)?[aE(r,t,{expr:"datum"})]:[Je(r,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,r=n[t];if(r){const{sort:i}=r;return[(Pd(i)?i.order:!Ie(i)&&i)||"ascending"]}return[]}assembleLabelTitle(){var i;const{facet:t,config:n}=this;if(t.facet)return Cq(t.facet,"facet",n);const r={row:["top","bottom"],column:["left","right"]};for(const s of une)if(t[s]){const o=uE("labelOrient",(i=t[s])==null?void 0:i.header,n,s);if(r[s].includes(o))return Cq(t[s],s,n)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,r=sln(n),i=t.assembleGroupEncodeEntry(!1),s=this.assembleLabelTitle()||t.assembleTitle(),o=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...s?{title:s}:{},...o?{style:o}:{},from:{facet:this.assembleFacet()},sort:{field:ql.map(u=>this.facetSortFields(u)).flat(),order:ql.map(u=>this.facetSortOrder(u)).flat()},...r.length>0?{data:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup(Son(this,[]))}]}getMapping(){return this.facet}}function pln(e,t){const{row:n,column:r}=t;if(n&&r){let i=null;for(const s of[n,r])if(Pd(s.sort)){const{field:o,op:a=t5}=s.sort;e=i=new Yv(e,{joinaggregate:[{op:a,field:o,as:Rq(s,s.sort,{forAs:!0})}],groupby:[Je(s)]})}return i}return null}function u7e(e,t){var n,r,i,s;for(const o of t){const a=o.data;if(e.name&&o.hasName()&&e.name!==o.dataName)continue;const u=(n=e.format)==null?void 0:n.mesh,l=(r=a.format)==null?void 0:r.feature;if(u&&l)continue;const c=(i=e.format)==null?void 0:i.feature;if((c||l)&&c!==l)continue;const f=(s=a.format)==null?void 0:s.mesh;if(!((u||f)&&u!==f)){if(XA(e)&&XA(a)){if(Xu(e.values,a.values))return o}else if(iE(e)&&iE(a)){if(e.url===a.url)return o}else if(QBe(e)&&e.name===o.dataName)return o}}return null}function mln(e,t){if(e.data||!e.parent){if(e.data===null){const r=new ov({values:[]});return t.push(r),r}const n=u7e(e.data,t);if(n)return kg(e.data)||(n.data.format=G8e({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const r=new ov(e.data);return t.push(r),r}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function gln(e,t,n){let r=0;for(const i of t.transforms){let s,o;if(ion(i))o=e=new oE(e,i),s="derived";else if(tne(i)){const a=aun(i);o=e=Wo.makeWithAncestors(e,{},a,n)??e,e=new fx(e,t,i.filter)}else if(WBe(i))o=e=$d.makeFromTransform(e,i,t),s="number";else if(oon(i))s="date",n.getWithExplicit(i.field).value===void 0&&(e=new Wo(e,{[i.field]:s}),n.set(i.field,s,!1)),o=e=kd.makeFromTransform(e,i);else if(aon(i))o=e=sf.makeFromTransform(e,i),s="number",ane(t)&&(e=new m0(e));else if(qBe(i))o=e=ZA.make(e,t,i,r++),s="derived";else if(ton(i))o=e=new hx(e,i),s="number";else if(non(i))o=e=new Yv(e,i),s="number";else if(uon(i))o=e=mp.makeFromTransform(e,i),s="derived";else if(lon(i))o=e=new E5(e,i),s="derived";else if(con(i))o=e=new b5(e,i),s="derived";else if(ron(i))o=e=new w5(e,i),s="derived";else if(Ksn(i))o=e=new A5(e,i),s="derived";else if(eon(i))e=new C5(e,i);else if(son(i))o=e=b1.makeFromTransform(e,i),s="derived";else if(Xsn(i))o=e=new _5(e,i),s="derived";else if(Qsn(i))o=e=new S5(e,i),s="derived";else if(Jsn(i))o=e=new T5(e,i),s="derived";else if(Zsn(i))o=e=new x5(e,i),s="derived";else{Ue(Pnn(i));continue}if(o&&s!==void 0)for(const a of o.producedFields()??[])n.set(a,s,!1)}return e}function I5(e){var m;let t=mln(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:r}=e.component.data,i=e.data,o=!(i&&(kg(i)||iE(i)||XA(i)))&&e.parent?e.parent.component.data.ancestorParse.clone():new Eon;kg(i)?(JBe(i)?t=new tO(t,i.sequence):nne(i)&&(t=new eO(t,i.graticule)),o.parseNothing=!0):((m=i==null?void 0:i.format)==null?void 0:m.parse)===null&&(o.parseNothing=!0),t=Wo.makeExplicit(t,e,o)??t,t=new m0(t);const a=e.parent&&px(e.parent);($i(e)||nl(e))&&a&&(t=$d.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=gln(t,e,o));const u=lun(e),l=uun(e);t=Wo.makeWithAncestors(t,{},{...u,...l},o)??t,$i(e)&&(t=qb.parseAll(t,e),t=JA.parseAll(t,e)),($i(e)||nl(e))&&(a||(t=$d.makeFromEncoding(t,e)??t),t=kd.makeFromEncoding(t,e)??t,t=oE.parseAllForSortIndex(t,e));const c=e.getDataName(zr.Raw),f=new Sa(t,c,zr.Raw,r);if(n[c]=f,t=f,$i(e)){const g=sf.makeFromEncoding(t,e);g&&(t=g,ane(e)&&(t=new m0(t))),t=b1.makeFromEncoding(t,e)??t,t=mp.makeFromEncoding(t,e)??t}$i(e)&&(t=QA.make(t,e)??t);const d=e.getDataName(zr.Main),h=new Sa(t,d,zr.Main,r);n[d]=h,t=h,$i(e)&&ian(e,h);let p=null;if(nl(e)){const g=e.getName("facet");t=pln(t,e.facet)??t,p=new dx(t,e,g,h.getSource()),n[g]=p}return{...e.component.data,outputNodes:n,outputNodeRefCounts:r,raw:f,main:h,facetRoot:p,ancestorParse:o}}class yln extends vne{constructor(t,n,r,i){var s,o,a,u;super(t,"concat",n,r,i,t.resolve),(((o=(s=t.resolve)==null?void 0:s.axis)==null?void 0:o.x)==="shared"||((u=(a=t.resolve)==null?void 0:a.axis)==null?void 0:u.y)==="shared")&&Ue(Cnn),this.children=this.getChildren(t).map((l,c)=>Sne(l,this,this.getName(`concat_${c}`),void 0,i))}parseData(){this.component.data=I5(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of Ne(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return l5(t)?t.vconcat:Zte(t)?t.hconcat:t.concat}parseLayoutSize(){fln(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=cne(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),r=t.assembleGroupStyle(),i=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...r?{style:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...t!=null?{columns:t}:{},bounds:"full",align:"each"}}}function vln(e){return e===!1||e===null}const _ln={disable:1,gridScale:1,scale:1,...gBe,labelExpr:1,encode:1},l7e=Ne(_ln);class bne extends lm{constructor(t={},n={},r=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=r}clone(){return new bne(qt(this.explicit),qt(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!vln(this.get(t))}hasOrientSignalRef(){return Tt(this.explicit.orient)}}function bln(e,t,n){const{encoding:r,config:i}=e,s=vs(r[t])??vs(r[ph(t)]),o=e.axis(t)||{},{format:a,formatType:u}=o;if(rv(u))return{text:Xc({fieldOrDatumDef:s,field:"datum.value",format:a,formatType:u,config:i}),...n};if(a===void 0&&u===void 0&&i.customFormatTypes){if(tE(s)==="quantitative"){if(nE(s)&&s.stack==="normalize"&&i.normalizedNumberFormatType)return{text:Xc({fieldOrDatumDef:s,field:"datum.value",format:i.normalizedNumberFormat,formatType:i.normalizedNumberFormatType,config:i}),...n};if(i.numberFormatType)return{text:Xc({fieldOrDatumDef:s,field:"datum.value",format:i.numberFormat,formatType:i.numberFormatType,config:i}),...n}}if(tE(s)==="temporal"&&i.timeFormatType&&Ve(s)&&!s.timeUnit)return{text:Xc({fieldOrDatumDef:s,field:"datum.value",format:i.timeFormat,formatType:i.timeFormatType,config:i}),...n}}return n}function wln(e){return mh.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[Iln(n,e)]),t),{})}const Eln={bottom:"top",top:"bottom",left:"right",right:"left"};function xln(e){const{axes:t,resolve:n}=e.component,r={top:0,bottom:0,right:0,left:0};for(const i of e.children){i.parseAxesAndHeaders();for(const s of Ne(i.component.axes))n.axis[s]=fne(e.component.resolve,s),n.axis[s]==="shared"&&(t[s]=Sln(t[s],i.component.axes[s]),t[s]||(n.axis[s]="independent",delete t[s]))}for(const i of mh){for(const s of e.children)if(s.component.axes[i]){if(n.axis[i]==="independent"){t[i]=(t[i]??[]).concat(s.component.axes[i]);for(const o of s.component.axes[i]){const{value:a,explicit:u}=o.getWithExplicit("orient");if(!Tt(a)){if(r[a]>0&&!u){const l=Eln[a];r[a]>r[l]&&o.set("orient",l,!1)}r[a]++}}}delete s.component.axes[i]}if(n.axis[i]==="independent"&&t[i]&&t[i].length>1)for(const[s,o]of(t[i]||[]).entries())s>0&&o.get("grid")&&!o.explicit.grid&&(o.implicit.grid=!1)}}function Sln(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let r=0;r<n;r++){const i=e[r],s=t[r];if(!!i!=!!s)return;if(i&&s){const o=i.getWithExplicit("orient"),a=s.getWithExplicit("orient");if(o.explicit&&a.explicit&&o.value!==a.value)return;e[r]=Tln(i,s)}}}else return t.map(n=>n.clone());return e}function Tln(e,t){for(const n of l7e){const r=d0(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(i,s)=>{switch(n){case"title":return w9e(i,s);case"gridScale":return{explicit:i.explicit,value:qi(i.value,s.value)}}return f5(i,s,n,"axis")});e.setWithExplicit(n,r)}return e}function Aln(e,t,n,r,i){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(Tt(n.labelAngle)?n.labelAngle:YA(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===Cje(r,i))return!0}return e===n[t]}const Cln=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function Iln(e,t){var y,v;let n=t.axis(e);const r=new bne,i=vs(t.encoding[e]),{mark:s,config:o}=t,a=(n==null?void 0:n.orient)||((y=o[e==="x"?"axisX":"axisY"])==null?void 0:y.orient)||((v=o.axis)==null?void 0:v.orient)||pan(e),u=t.getScaleComponent(e).get("type"),l=aan(e,u,a,t.config),c=n!==void 0?!n:Tq("disable",o.style,n==null?void 0:n.style,l).configValue;if(r.set("disable",c,n!==void 0),c)return r;n=n||{};const f=fan(i,n,e,o.style,l),d=tBe(n.formatType,i,u),h=eBe(i,i.type,n.format,n.formatType,o,!0),p={fieldOrDatumDef:i,axis:n,channel:e,model:t,scaleType:u,orient:a,labelAngle:f,format:h,formatType:d,mark:s,config:o};for(const _ of l7e){const b=_ in u1e?u1e[_](p):Dye(_)?n[_]:void 0,E=b!==void 0,w=Aln(b,_,n,t,e);if(E&&w)r.set(_,b,w);else{const{configValue:x=void 0,configFrom:S=void 0}=Dye(_)&&_!=="values"?Tq(_,o.style,n.style,l):{},I=x!==void 0;E&&!I?r.set(_,b,w):(S!=="vgAxisConfig"||Cln.has(_)&&I||JI(x)||Tt(x))&&r.set(_,x,!1)}}const m=n.encoding??{},g=mBe.reduce((_,b)=>{if(!r.hasAxisPart(b))return _;const E=Rje(m[b]??{},t),w=b==="labels"?bln(t,e,E):E;return w!==void 0&&!Or(w)&&(_[b]={update:w}),_},{});return Or(g)||r.set("encode",g,!!n.encoding||n.labelAngle!==void 0),r}function Oln({encoding:e,size:t}){for(const n of mh){const r=Su(n);Jd(t[r])&&og(e[n])&&(delete t[r],Ue(A9e(r)))}return t}const Pln={vgMark:"arc",encodeEntry:e=>({..._c(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...qo("x",e,{defaultPos:"mid"}),...qo("y",e,{defaultPos:"mid"}),...h0(e,"radius"),...h0(e,"theta")})},kln={vgMark:"area",encodeEntry:e=>({..._c(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...WL("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...WL("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...one(e)})},$ln={vgMark:"rect",encodeEntry:e=>({..._c(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...h0(e,"x"),...h0(e,"y")})},Rln={vgMark:"shape",encodeEntry:e=>({..._c(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&Ve(n)&&n.type===lx?{field:Je(n,{expr:"datum"})}:{}}]}},Nln={vgMark:"image",encodeEntry:e=>({..._c(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...h0(e,"x"),...h0(e,"y"),...ine(e,"url")})},Dln={vgMark:"line",encodeEntry:e=>({..._c(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...qo("x",e,{defaultPos:"mid"}),...qo("y",e,{defaultPos:"mid"}),...Ms("size",e,{vgChannel:"strokeWidth"}),...one(e)})},Lln={vgMark:"trail",encodeEntry:e=>({..._c(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...qo("x",e,{defaultPos:"mid"}),...qo("y",e,{defaultPos:"mid"}),...Ms("size",e),...one(e)})};function wne(e,t){const{config:n}=e;return{..._c(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...qo("x",e,{defaultPos:"mid"}),...qo("y",e,{defaultPos:"mid"}),...Ms("size",e),...Ms("angle",e),...Mln(e,n,t)}}function Mln(e,t,n){return n?{shape:{value:n}}:Ms("shape",e)}const Fln={vgMark:"symbol",encodeEntry:e=>wne(e)},Bln={vgMark:"symbol",encodeEntry:e=>wne(e,"circle")},jln={vgMark:"symbol",encodeEntry:e=>wne(e,"square")},zln={vgMark:"rect",encodeEntry:e=>({..._c(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...h0(e,"x"),...h0(e,"y")})},Uln={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{..._c(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...WL("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...WL("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...Ms("size",e,{vgChannel:"strokeWidth"})}}},Vln={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{..._c(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...qo("x",e,{defaultPos:"mid"}),...qo("y",e,{defaultPos:"mid"}),...ine(e),...Ms("size",e,{vgChannel:"fontSize"}),...Ms("angle",e),...i1e("align",Hln(e.markDef,n,t)),...i1e("baseline",qln(e.markDef,n,t)),...qo("radius",e,{defaultPos:null}),...qo("theta",e,{defaultPos:null})}}};function Hln(e,t,n){if(fr("align",e,n)===void 0)return"center"}function qln(e,t,n){if(fr("baseline",e,n)===void 0)return"middle"}const Wln={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,r=n.orient,i=r==="horizontal"?"width":"height",s=r==="horizontal"?"height":"width";return{..._c(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...qo("x",e,{defaultPos:"mid",vgChannel:"xc"}),...qo("y",e,{defaultPos:"mid",vgChannel:"yc"}),...Ms("size",e,{defaultValue:Gln(e),vgChannel:i}),[s]:Xr(fr("thickness",n,t))}}};function Gln(e){const{config:t,markDef:n}=e,{orient:r}=n,i=r==="horizontal"?"width":"height",s=e.getScaleComponent(r==="horizontal"?"x":"y"),o=fr("size",n,t,{vgChannel:i})??t.tick.bandSize;if(o!==void 0)return o;{const a=s?s.get("range"):void 0;return a&&q0(a)&&Jn(a.step)?a.step*3/4:HL(t.view,i)*3/4}}const nk={arc:Pln,area:kln,bar:$ln,circle:Bln,geoshape:Rln,image:Nln,line:Dln,point:Fln,rect:zln,rule:Uln,square:jln,text:Vln,tick:Wln,trail:Lln};function Yln(e){if($n([ZF,QF,nin],e.mark)){const t=wBe(e.mark,e.encoding);if(t.length>0)return Kln(e,t)}else if(e.mark===JF){const t=hq.some(n=>fr(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return Xln(e)}return Ene(e)}const S1e="faceted_path_";function Kln(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:S1e+e.requestDataName(zr.Main),data:e.requestDataName(zr.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:Ene(e,{fromPrefix:S1e})}]}const T1e="stack_group_";function Xln(e){var l;const[t]=Ene(e,{fromPrefix:T1e}),n=e.scaleName(e.stack.fieldChannel),r=(c={})=>e.vgField(e.stack.fieldChannel,c),i=(c,f)=>{const d=[r({prefix:"min",suffix:"start",expr:f}),r({prefix:"max",suffix:"start",expr:f}),r({prefix:"min",suffix:"end",expr:f}),r({prefix:"max",suffix:"end",expr:f})];return`${c}(${d.map(h=>`scale('${n}',${h})`).join(",")})`};let s,o;e.stack.fieldChannel==="x"?(s={...Kw(t.encode.update,["y","yc","y2","height",...hq]),x:{signal:i("min","datum")},x2:{signal:i("max","datum")},clip:{value:!0}},o={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...fu(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(s={...Kw(t.encode.update,["x","xc","x2","width"]),y:{signal:i("min","datum")},y2:{signal:i("max","datum")},clip:{value:!0}},o={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...fu(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const c of hq){const f=Fp(c,e.markDef,e.config);t.encode.update[c]?(s[c]=t.encode.update[c],delete t.encode.update[c]):f&&(s[c]=Xr(f)),f&&(t.encode.update[c]={value:0})}const a=[];if(((l=e.stack.groupbyChannels)==null?void 0:l.length)>0)for(const c of e.stack.groupbyChannels){const f=e.fieldDef(c),d=Je(f);d&&a.push(d),(f!=null&&f.bin||f!=null&&f.timeUnit)&&a.push(Je(f,{binSuffix:"end"}))}return s=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((c,f)=>{if(t.encode.update[f])return{...c,[f]:t.encode.update[f]};{const d=Fp(f,e.markDef,e.config);return d!==void 0?{...c,[f]:Xr(d)}:c}},s),s.stroke&&(s.strokeForeground={value:!0},s.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(zr.Main),name:T1e+e.requestDataName(zr.Main),groupby:a,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:s},marks:[{type:"group",encode:{update:o},marks:[t]}]}]}function Qln(e){var a;const{encoding:t,stack:n,mark:r,markDef:i,config:s}=e,o=t.order;if(!(!Ie(o)&&hf(o)&&fq(o.value)||!o&&fq(fr("order",i,s)))){if((Ie(o)||Ve(o))&&!n)return v9e(o,{expr:"datum"});if(W0(r)){const u=i.orient==="horizontal"?"y":"x",l=t[u];if(Ve(l)){const c=l.sort;if(Ie(c))return{field:Je(l,{prefix:u,suffix:"sort_index",expr:"datum"})};if(Pd(c))return{field:Je({aggregate:Vte(e.encoding)?c.op:void 0,field:c.field},{expr:"datum"})};if(rBe(c)){const f=e.fieldDef(c.encoding);return{field:Je(f,{expr:"datum"}),order:c.order}}else return c===null?void 0:{field:Je(l,{binSuffix:(a=e.stack)!=null&&a.impute?"mid":void 0,expr:"datum"})}}return}}}function Ene(e,t={fromPrefix:""}){const{mark:n,markDef:r,encoding:i,config:s}=e,o=qi(r.clip,Jln(e),Zln(e)),a=g9e(r),u=i.key,l=Qln(e),c=ecn(e),f=fr("aria",r,s),d=nk[n].postEncodingTransform?nk[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:nk[n].vgMark,...o?{clip:o}:{},...a?{style:a}:{},...u?{key:u.field}:{},...l?{sort:l}:{},...c||{},...f===!1?{aria:f}:{},from:{data:t.fromPrefix+e.requestDataName(zr.Main)},encode:{update:nk[n].encodeEntry(e)},...d?{transform:d}:{}}]}function Jln(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t!=null&&t.get("selectionExtent")||n!=null&&n.get("selectionExtent")?!0:void 0}function Zln(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function ecn(e){if(!e.component.selection)return null;const t=Ne(e.component.selection).length;let n=t,r=e.parent;for(;r&&n===0;)n=Ne(r.component.selection).length,r=r.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}class c7e extends s7e{constructor(t,n,r,i={},s){super(t,"unit",n,r,s,void 0,Mye(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[];const o=Xd(t.mark)?{...t.mark}:{type:t.mark},a=o.type;o.filled===void 0&&(o.filled=Fsn(o,s,{graticule:t.data&&nne(t.data)}));const u=this.encoding=Uin(t.encoding||{},a,o.filled,s);this.markDef=UBe(o,u,s),this.size=Oln({encoding:u,size:Mye(t)?{...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:i}),this.stack=zBe(this.markDef,u),this.specifiedScales=this.initScales(a,u),this.specifiedAxes=this.initAxes(u),this.specifiedLegends=this.initLegends(u),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(l=>Qte(l))}get hasProjection(){const{encoding:t}=this,n=this.mark===K9e,r=t&&jtn.some(i=>Qt(t[i]));return n||r}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return GF.reduce((r,i)=>{const s=vs(n[i]);return s&&(r[i]=this.initScale(s.scale??{})),r},{})}initScale(t){const{domain:n,range:r}=t,i=Ja(t);return Ie(n)&&(i.domain=n.map(qu)),Ie(r)&&(i.range=r.map(qu)),i}initAxes(t){return mh.reduce((n,r)=>{const i=t[r];if(Qt(i)||r===pi&&Qt(t.x2)||r===Ks&&Qt(t.y2)){const s=Qt(i)?i.axis:void 0;n[r]=s&&this.initAxis({...s})}return n},{})}initAxis(t){const n=Ne(t),r={};for(const i of n){const s=t[i];r[i]=JI(s)?m9e(s):qu(s)}return r}initLegends(t){return Xtn.reduce((n,r)=>{const i=vs(t[r]);if(i&&Jtn(r)){const s=i.legend;n[r]=s&&Ja(s)}return n},{})}parseData(){this.component.data=I5(this)}parseLayoutSize(){dln(this)}parseSelections(){this.component.selection=ran(this,this.selection)}parseMarkGroup(){this.component.mark=Yln(this)}parseAxesAndHeaders(){this.component.axes=wln(this)}assembleSelectionTopLevelSignals(t){return Ton(this,t)}assembleSignals(){return[...Sje(this),...xon(this,[])]}assembleSelectionData(t){return Aon(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return cne(this)}assembleMarks(){let t=this.component.mark??[];return(!this.parent||!px(this.parent))&&(t=tje(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return v1(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return Qd(n)}typedFieldDef(t){const n=this.fieldDef(t);return ka(n)?n:null}}class xne extends vne{constructor(t,n,r,i,s){super(t,"layer",n,r,s,t.resolve,t.view);const o={...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((a,u)=>{if(c5(a))return new xne(a,this,this.getName(`layer_${u}`),o,s);if(um(a))return new c7e(a,this,this.getName(`layer_${u}`),o,s);throw new Error(gte(a))})}parseData(){this.component.data=I5(this);for(const t of this.children)t.parseData()}parseLayoutSize(){cln(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of Ne(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){xln(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),Sje(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),cne(this))}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const r of this.children)for(const i of nt(r.assembleGroupStyle()))t.add(i);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return Con(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),zje(this))}}function Sne(e,t,n,r,i){if(n5(e))return new w2(e,t,n,i);if(c5(e))return new xne(e,t,n,r,i);if(um(e))return new c7e(e,t,n,r,i);if(dsn(e))return new yln(e,t,n,i);throw new Error(gte(e))}function tcn(e,t={}){t.logger&&yrn(t.logger),t.fieldTitle&&dBe(t.fieldTitle);try{const n=jBe(XE(t.config,e.config)),r=KBe(e,n),i=Sne(r,null,"",void 0,n);return i.parse(),Tun(i.component.data,i),{spec:rcn(i,ncn(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&vrn(),t.fieldTitle&&Rin()}}function ncn(e,t,n,r){const i=r.component.layoutSize.get("width"),s=r.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):rt(t)&&(t={type:t}),i&&s&&_on(t.type)){if(i==="step"&&s==="step")Ue(wye()),t.type="pad";else if(i==="step"||s==="step"){const o=i==="step"?"width":"height";Ue(wye(WF(o)));const a=o==="width"?"height":"width";t.type=bon(a)}}return{...Ne(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...Kye(n,!1),...Kye(e,!0)}}function rcn(e,t,n={},r){const i=e.config?Asn(e.config):void 0,s=[].concat(e.assembleSelectionData([]),oln(e.component.data,n)),o=e.assembleProjections(),a=e.assembleTitle(),u=e.assembleGroupStyle(),l=e.assembleGroupEncodeEntry(!0);let c=e.assembleLayoutSignals();c=c.filter(h=>(h.name==="width"||h.name==="height")&&h.value!==void 0?(t[h.name]=+h.value,!1):!0);const{params:f,...d}=t;return{$schema:"https://vega.github.io/schema/vega/v5.json",...e.description?{description:e.description}:{},...d,...a?{title:a}:{},...u?{style:u}:{},...l?{encode:{update:l}}:{},data:s,...o.length>0?{projections:o}:{},...e.assembleGroup([...c,...e.assembleSelectionTopLevelSignals([]),...LBe(f)]),...i?{config:i}:{},...r?{usermeta:r}:{}}}const icn=Ntn.version,scn=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:Xw,accessPathWithDatum:ote,compile:tcn,contains:$n,deepEqual:Xu,deleteNestedProperty:NL,duplicate:qt,entries:l0,every:rte,fieldIntersection:ste,flatAccessWithDatum:K8e,getFirstDefined:qi,hasIntersection:ite,hash:kn,internalField:J8e,isBoolean:GA,isEmpty:Or,isEqual:Ltn,isInternalField:Z8e,isNullOrFalse:fq,isNumeric:jF,keys:Ne,logicalExpr:_2,mergeDeep:G8e,never:W8e,normalize:KBe,normalizeAngle:YA,omit:fu,pick:Kw,prefixGenerator:dq,removePathFromField:ate,replaceAll:J1,replacePathInField:oc,resetIdCounter:Ftn,setEqual:Y8e,some:Q1,stringify:Pr,titleCase:UI,unique:md,uniqueId:Q8e,vals:yo,varName:hi,version:icn},Symbol.toStringTag,{value:"Module"}));function f7e(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var ocn="vega-themes",acn="2.14.0",ucn="Themes for stylized Vega and Vega-Lite visualizations.",lcn=["vega","vega-lite","themes","style"],ccn="BSD-3-Clause",fcn={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},dcn=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],hcn="build/vega-themes.js",Tne="build/vega-themes.module.js",pcn="build/vega-themes.min.js",mcn="build/vega-themes.min.js",gcn="build/vega-themes.module.d.ts",ycn={type:"git",url:"https://github.com/vega/vega-themes.git"},vcn=["src","build"],_cn={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",format:"eslint . --fix",lint:"eslint .",release:"release-it"},bcn={"@babel/core":"^7.22.9","@babel/plugin-proposal-async-generator-functions":"^7.20.7","@babel/plugin-proposal-json-strings":"^7.18.6","@babel/plugin-proposal-object-rest-spread":"^7.20.7","@babel/plugin-proposal-optional-catch-binding":"^7.18.6","@babel/plugin-transform-runtime":"^7.22.9","@babel/preset-env":"^7.22.9","@babel/preset-typescript":"^7.22.5","@release-it/conventional-changelog":"^7.0.0","@rollup/plugin-json":"^6.0.0","@rollup/plugin-node-resolve":"^15.1.0","@rollup/plugin-terser":"^0.4.3","@typescript-eslint/eslint-plugin":"^6.0.0","@typescript-eslint/parser":"^6.0.0","browser-sync":"^2.29.3",concurrently:"^8.2.0",eslint:"^8.45.0","eslint-config-prettier":"^8.8.0","eslint-plugin-prettier":"^5.0.0","gh-pages":"^5.0.0",prettier:"^3.0.0","release-it":"^16.1.0",rollup:"^3.26.2","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.2.0",typescript:"^5.1.6",vega:"^5.25.0","vega-lite":"^5.9.3"},wcn={vega:"*","vega-lite":"*"},Ecn={},xcn={name:ocn,version:acn,description:ucn,keywords:lcn,license:ccn,author:fcn,contributors:dcn,main:hcn,module:Tne,unpkg:pcn,jsdelivr:mcn,types:gcn,repository:ycn,files:vcn,scripts:_cn,devDependencies:bcn,peerDependencies:wcn,dependencies:Ecn};const x_="#fff",A1e="#888",Scn={background:"#333",view:{stroke:A1e},title:{color:x_,subtitleColor:x_},style:{"guide-label":{fill:x_},"guide-title":{fill:x_}},axis:{domainColor:x_,gridColor:A1e,tickColor:x_}},ry="#4572a7",Tcn={background:"#fff",arc:{fill:ry},area:{fill:ry},line:{stroke:ry,strokeWidth:2},path:{stroke:ry},rect:{fill:ry},shape:{stroke:ry},symbol:{fill:ry,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},iy="#30a2da",Kj="#cbcbcb",Acn="#999",Ccn="#333",C1e="#f0f0f0",I1e="#333",Icn={arc:{fill:iy},area:{fill:iy},axis:{domainColor:Kj,grid:!0,gridColor:Kj,gridWidth:1,labelColor:Acn,labelFontSize:10,titleColor:Ccn,tickColor:Kj,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:C1e,group:{fill:C1e},legend:{labelColor:I1e,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:I1e,titleFontSize:14,titlePadding:10},line:{stroke:iy,strokeWidth:2},path:{stroke:iy,strokeWidth:.5},rect:{fill:iy},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:iy},bar:{binSpacing:2,fill:iy,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},sy="#000",Ocn={group:{fill:"#e5e5e5"},arc:{fill:sy},area:{fill:sy},line:{stroke:sy},path:{stroke:sy},rect:{fill:sy},shape:{stroke:sy},symbol:{fill:sy,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},Pcn=22,kcn="normal",O1e="Benton Gothic, sans-serif",P1e=11.5,$cn="normal",oy="#82c6df",Xj="Benton Gothic Bold, sans-serif",k1e="normal",$1e=13,AS={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},Rcn={background:"#ffffff",title:{anchor:"start",color:"#000000",font:Xj,fontSize:Pcn,fontWeight:kcn},arc:{fill:oy},area:{fill:oy},line:{stroke:oy,strokeWidth:2},path:{stroke:oy},rect:{fill:oy},shape:{stroke:oy},symbol:{fill:oy,size:30},axis:{labelFont:O1e,labelFontSize:P1e,labelFontWeight:$cn,titleFont:Xj,titleFontSize:$1e,titleFontWeight:k1e},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:O1e,labelFontSize:P1e,symbolType:"square",titleFont:Xj,titleFontSize:$1e,titleFontWeight:k1e},range:{category:AS["category-6"],diverging:AS["fireandice-6"],heatmap:AS["fire-7"],ordinal:AS["fire-7"],ramp:AS["fire-7"]}},ay="#ab5787",rk="#979797",Ncn={background:"#f9f9f9",arc:{fill:ay},area:{fill:ay},line:{stroke:ay},path:{stroke:ay},rect:{fill:ay},shape:{stroke:ay},symbol:{fill:ay,size:30},axis:{domainColor:rk,domainWidth:.5,gridWidth:.2,labelColor:rk,tickColor:rk,tickWidth:.2,titleColor:rk},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},uy="#3e5c69",Dcn={background:"#fff",arc:{fill:uy},area:{fill:uy},line:{stroke:uy},path:{stroke:uy},rect:{fill:uy},shape:{stroke:uy},symbol:{fill:uy},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},Al="#1696d2",R1e="#000000",Lcn="#FFFFFF",ik="Lato",Qj="Lato",Mcn="Lato",Fcn="#DEDDDD",Bcn=18,CS={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},jcn={background:Lcn,title:{anchor:"start",fontSize:Bcn,font:ik},axisX:{domain:!0,domainColor:R1e,domainWidth:1,grid:!1,labelFontSize:12,labelFont:Qj,labelAngle:0,tickColor:R1e,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:ik},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:Fcn,gridWidth:1,labelFontSize:12,labelFont:Qj,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:ik,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:Qj,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:ik,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:CS["six-groups-cat-1"],diverging:CS["diverging-colors"],heatmap:CS["diverging-colors"],ordinal:CS["six-groups-seq"],ramp:CS["shades-blue"]},area:{fill:Al},rect:{fill:Al},line:{color:Al,stroke:Al,strokeWidth:5},trail:{color:Al,stroke:Al,strokeWidth:0,size:1},path:{stroke:Al,strokeWidth:.5},point:{filled:!0},text:{font:Mcn,color:Al,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:Al,stroke:null}},arc:{fill:Al},shape:{stroke:Al},symbol:{fill:Al,size:30}},ly="#3366CC",N1e="#ccc",sk="Arial, sans-serif",zcn={arc:{fill:ly},area:{fill:ly},path:{stroke:ly},rect:{fill:ly},shape:{stroke:ly},symbol:{stroke:ly},circle:{fill:ly},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:sk,fontSize:12},"guide-title":{font:sk,fontSize:12},"group-title":{font:sk,fontSize:12}},title:{font:sk,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:N1e,tickColor:N1e,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},Ane=e=>e*(1/3+1),D1e=Ane(9),L1e=Ane(10),M1e=Ane(12),IS="Segoe UI",F1e="wf_standard-font, helvetica, arial, sans-serif",B1e="#252423",OS="#605E5C",j1e="transparent",Ucn="#C8C6C4",Ic="#118DFF",Vcn="#12239E",Hcn="#E66C37",qcn="#6B007B",Wcn="#E044A7",Gcn="#744EC2",Ycn="#D9B300",Kcn="#D64550",d7e=Ic,h7e="#DEEFFF",z1e=[h7e,d7e],Xcn=[h7e,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",d7e],Qcn={view:{stroke:j1e},background:j1e,font:IS,header:{titleFont:F1e,titleFontSize:M1e,titleColor:B1e,labelFont:IS,labelFontSize:L1e,labelColor:OS},axis:{ticks:!1,grid:!1,domain:!1,labelColor:OS,labelFontSize:D1e,titleFont:F1e,titleColor:B1e,titleFontSize:M1e,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:Ucn,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:Ic},line:{stroke:Ic,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:IS,fontSize:D1e,fill:OS},arc:{fill:Ic},area:{fill:Ic,line:!0,opacity:.6},path:{stroke:Ic},rect:{fill:Ic},point:{fill:Ic,filled:!0,size:75},shape:{stroke:Ic},symbol:{fill:Ic,strokeWidth:1.5,size:50},legend:{titleFont:IS,titleFontWeight:"bold",titleColor:OS,labelFont:IS,labelFontSize:L1e,labelColor:OS,symbolType:"circle",symbolSize:75},range:{category:[Ic,Vcn,Hcn,qcn,Wcn,Gcn,Ycn,Kcn],diverging:z1e,heatmap:z1e,ordinal:Xcn}},Jj='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',U1e=400,Jcn=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],Zcn=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function O5({type:e,background:t}){const n=e==="dark"?"#161616":"#ffffff",r=e==="dark"?"#f4f4f4":"#161616",i=e==="dark"?Jcn:Zcn,s=e==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:s},area:{fill:s},path:{stroke:s},rect:{fill:s},shape:{stroke:s},symbol:{stroke:s},circle:{fill:s},view:{fill:n,stroke:n},group:{fill:n},title:{color:r,anchor:"start",dy:-15,fontSize:16,font:Jj,fontWeight:600},axis:{labelColor:r,labelFontSize:12,grid:!0,gridColor:"#525252",titleColor:r,labelAngle:0},style:{"guide-label":{font:Jj,fill:r,fontWeight:U1e},"guide-title":{font:Jj,fill:r,fontWeight:U1e}},range:{category:i,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const efn=O5({type:"light",background:"#ffffff"}),tfn=O5({type:"light",background:"#f4f4f4"}),nfn=O5({type:"dark",background:"#262626"}),rfn=O5({type:"dark",background:"#161616"}),ifn=xcn.version,sfn=Object.freeze(Object.defineProperty({__proto__:null,carbong10:tfn,carbong100:rfn,carbong90:nfn,carbonwhite:efn,dark:Scn,excel:Tcn,fivethirtyeight:Icn,ggplot2:Ocn,googlecharts:zcn,latimes:Rcn,powerbi:Qcn,quartz:Ncn,urbaninstitute:jcn,version:ifn,vox:Dcn},Symbol.toStringTag,{value:"Module"}));function ofn(e,t,n,r){if(Ie(e))return`[${e.map(i=>t(rt(i)?i:V1e(i,n))).join(", ")}]`;if(st(e)){let i="";const{title:s,image:o,...a}=e;s&&(i+=`<h2>${t(s)}</h2>`),o&&(i+=`<img src="${new URL(t(o),r||location.href).href}">`);const u=Object.keys(a);if(u.length>0){i+="<table>";for(const l of u){let c=a[l];c!==void 0&&(st(c)&&(c=V1e(c,n)),i+=`<tr><td class="key">${t(l)}</td><td class="value">${t(c)}</td></tr>`)}i+="</table>"}return i||"{}"}return t(e)}function afn(e){const t=[];return function(n,r){if(typeof r!="object"||r===null)return r;const i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}function V1e(e,t){return JSON.stringify(e,afn(t))}var ufn=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const p7e="vg-tooltip-element",lfn={offsetX:10,offsetY:10,id:p7e,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:cfn,maxDepth:2,formatTooltip:ofn,baseURL:""};function cfn(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function ffn(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return ufn.toString().replace(p7e,e)}function dfn(e,t,n,r){let i=e.clientX+n;i+t.width>window.innerWidth&&(i=+e.clientX-n-t.width);let s=e.clientY+r;return s+t.height>window.innerHeight&&(s=+e.clientY-r-t.height),{x:i,y:s}}class hfn{constructor(t){this.options={...lfn,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=ffn(n);const i=document.head;i.childNodes.length>0?i.insertBefore(r,i.childNodes[0]):i.appendChild(r)}}tooltipHandler(t,n,r,i){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),i==null||i===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(i,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:s,y:o}=dfn(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.style.top=`${o}px`,this.el.style.left=`${s}px`}}var Zj={};function pfn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var e7,H1e;function mfn(){return H1e||(H1e=1,e7=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}),e7}var gfn=ar;ar.Node=av;ar.create=ar;function ar(e){var t=this;if(t instanceof ar||(t=new ar),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(i){t.push(i)});else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)t.push(arguments[n]);return t}ar.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t};ar.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};ar.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};ar.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)vfn(this,arguments[e]);return this.length};ar.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)_fn(this,arguments[e]);return this.length};ar.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};ar.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};ar.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;n!==null;r++)e.call(t,n.value,r,this),n=n.next};ar.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;n!==null;r--)e.call(t,n.value,r,this),n=n.prev};ar.prototype.get=function(e){for(var t=0,n=this.head;n!==null&&t<e;t++)n=n.next;if(t===e&&n!==null)return n.value};ar.prototype.getReverse=function(e){for(var t=0,n=this.tail;n!==null&&t<e;t++)n=n.prev;if(t===e&&n!==null)return n.value};ar.prototype.map=function(e,t){t=t||this;for(var n=new ar,r=this.head;r!==null;)n.push(e.call(t,r.value,this)),r=r.next;return n};ar.prototype.mapReverse=function(e,t){t=t||this;for(var n=new ar,r=this.tail;r!==null;)n.push(e.call(t,r.value,this)),r=r.prev;return n};ar.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else if(this.head)r=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;r!==null;i++)n=e(n,r.value,i),r=r.next;return n};ar.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else if(this.tail)r=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;r!==null;i--)n=e(n,r.value,i),r=r.prev;return n};ar.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;n!==null;t++)e[t]=n.value,n=n.next;return e};ar.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;n!==null;t++)e[t]=n.value,n=n.prev;return e};ar.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new ar;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(;i!==null&&r<t;r++,i=i.next)n.push(i.value);return n};ar.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new ar;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=this.length,i=this.tail;i!==null&&r>t;r--)i=i.prev;for(;i!==null&&r>e;r--,i=i.prev)n.push(i.value);return n};ar.prototype.splice=function(e,t,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(var s=[],r=0;i&&r<t;r++)s.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var r=0;r<n.length;r++)i=yfn(this,i,n[r]);return s};ar.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;n!==null;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this};function yfn(e,t,n){var r=t===e.head?new av(n,null,t,e):new av(n,t,t.next,e);return r.next===null&&(e.tail=r),r.prev===null&&(e.head=r),e.length++,r}function vfn(e,t){e.tail=new av(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function _fn(e,t){e.head=new av(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function av(e,t,n,r){if(!(this instanceof av))return new av(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{mfn()(ar)}catch{}const bfn=gfn,Ly=Symbol("max"),Dh=Symbol("length"),S_=Symbol("lengthCalculator"),E2=Symbol("allowStale"),e1=Symbol("maxAge"),Ph=Symbol("dispose"),q1e=Symbol("noDisposeOnSet"),ks=Symbol("lruList"),Oc=Symbol("cache"),m7e=Symbol("updateAgeOnGet"),t7=()=>1;class wfn{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");this[Ly]=t.max||1/0;const n=t.length||t7;if(this[S_]=typeof n!="function"?t7:n,this[E2]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[e1]=t.maxAge||0,this[Ph]=t.dispose,this[q1e]=t.noDisposeOnSet||!1,this[m7e]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[Ly]=t||1/0,PS(this)}get max(){return this[Ly]}set allowStale(t){this[E2]=!!t}get allowStale(){return this[E2]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[e1]=t,PS(this)}get maxAge(){return this[e1]}set lengthCalculator(t){typeof t!="function"&&(t=t7),t!==this[S_]&&(this[S_]=t,this[Dh]=0,this[ks].forEach(n=>{n.length=this[S_](n.value,n.key),this[Dh]+=n.length})),PS(this)}get lengthCalculator(){return this[S_]}get length(){return this[Dh]}get itemCount(){return this[ks].length}rforEach(t,n){n=n||this;for(let r=this[ks].tail;r!==null;){const i=r.prev;W1e(this,t,r,n),r=i}}forEach(t,n){n=n||this;for(let r=this[ks].head;r!==null;){const i=r.next;W1e(this,t,r,n),r=i}}keys(){return this[ks].toArray().map(t=>t.key)}values(){return this[ks].toArray().map(t=>t.value)}reset(){this[Ph]&&this[ks]&&this[ks].length&&this[ks].forEach(t=>this[Ph](t.key,t.value)),this[Oc]=new Map,this[ks]=new bfn,this[Dh]=0}dump(){return this[ks].map(t=>XL(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[ks]}set(t,n,r){if(r=r||this[e1],r&&typeof r!="number")throw new TypeError("maxAge must be a number");const i=r?Date.now():0,s=this[S_](n,t);if(this[Oc].has(t)){if(s>this[Ly])return Wb(this,this[Oc].get(t)),!1;const u=this[Oc].get(t).value;return this[Ph]&&(this[q1e]||this[Ph](t,u.value)),u.now=i,u.maxAge=r,u.value=n,this[Dh]+=s-u.length,u.length=s,this.get(t),PS(this),!0}const o=new Efn(t,n,s,i,r);return o.length>this[Ly]?(this[Ph]&&this[Ph](t,n),!1):(this[Dh]+=o.length,this[ks].unshift(o),this[Oc].set(t,this[ks].head),PS(this),!0)}has(t){if(!this[Oc].has(t))return!1;const n=this[Oc].get(t).value;return!XL(this,n)}get(t){return n7(this,t,!0)}peek(t){return n7(this,t,!1)}pop(){const t=this[ks].tail;return t?(Wb(this,t),t.value):null}del(t){Wb(this,this[Oc].get(t))}load(t){this.reset();const n=Date.now();for(let r=t.length-1;r>=0;r--){const i=t[r],s=i.e||0;if(s===0)this.set(i.k,i.v);else{const o=s-n;o>0&&this.set(i.k,i.v,o)}}}prune(){this[Oc].forEach((t,n)=>n7(this,n,!1))}}const n7=(e,t,n)=>{const r=e[Oc].get(t);if(r){const i=r.value;if(XL(e,i)){if(Wb(e,r),!e[E2])return}else n&&(e[m7e]&&(r.value.now=Date.now()),e[ks].unshiftNode(r));return i.value}},XL=(e,t)=>{if(!t||!t.maxAge&&!e[e1])return!1;const n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[e1]&&n>e[e1]},PS=e=>{if(e[Dh]>e[Ly])for(let t=e[ks].tail;e[Dh]>e[Ly]&&t!==null;){const n=t.prev;Wb(e,t),t=n}},Wb=(e,t)=>{if(t){const n=t.value;e[Ph]&&e[Ph](n.key,n.value),e[Dh]-=n.length,e[Oc].delete(n.key),e[ks].removeNode(t)}};class Efn{constructor(t,n,r,i,s){this.key=t,this.value=n,this.length=r,this.now=i,this.maxAge=s||0}}const W1e=(e,t,n,r)=>{let i=n.value;XL(e,i)&&(Wb(e,n),e[E2]||(i=void 0)),i&&t.call(r,i.value,i.key,e)};var xfn=wfn;const Sfn=Object.freeze({loose:!0}),Tfn=Object.freeze({}),Afn=e=>e?typeof e!="object"?Sfn:e:Tfn;var Cne=Afn,Nq={exports:{}};const Cfn="2.0.0",g7e=256,Ifn=Number.MAX_SAFE_INTEGER||9007199254740991,Ofn=16,Pfn=g7e-6,kfn=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var Ine={MAX_LENGTH:g7e,MAX_SAFE_COMPONENT_LENGTH:Ofn,MAX_SAFE_BUILD_LENGTH:Pfn,MAX_SAFE_INTEGER:Ifn,RELEASE_TYPES:kfn,SEMVER_SPEC_VERSION:Cfn,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const $fn=typeof process=="object"&&Zj&&Zj.NODE_DEBUG&&/\bsemver\b/i.test(Zj.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var P5=$fn;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=Ine,s=P5;t=e.exports={};const o=t.re=[],a=t.safeRe=[],u=t.src=[],l=t.t={};let c=0;const f="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",i],[f,r]],h=m=>{for(const[g,y]of d)m=m.split(`${g}*`).join(`${g}{0,${y}}`).split(`${g}+`).join(`${g}{1,${y}}`);return m},p=(m,g,y)=>{const v=h(g),_=c++;s(m,_,g),l[m]=_,u[_]=g,o[_]=new RegExp(g,y?"g":void 0),a[_]=new RegExp(v,y?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","\\d+"),p("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${f}*`),p("MAINVERSION",`(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${u[l.NUMERICIDENTIFIER]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${u[l.NUMERICIDENTIFIERLOOSE]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASE",`(?:-(${u[l.PRERELEASEIDENTIFIER]}(?:\\.${u[l.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${u[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[l.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER",`${f}+`),p("BUILD",`(?:\\+(${u[l.BUILDIDENTIFIER]}(?:\\.${u[l.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${u[l.MAINVERSION]}${u[l.PRERELEASE]}?${u[l.BUILD]}?`),p("FULL",`^${u[l.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${u[l.MAINVERSIONLOOSE]}${u[l.PRERELEASELOOSE]}?${u[l.BUILD]}?`),p("LOOSE",`^${u[l.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${u[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${u[l.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:${u[l.PRERELEASE]})?${u[l.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:${u[l.PRERELEASELOOSE]})?${u[l.BUILD]}?)?)?`),p("XRANGE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAINLOOSE]}$`),p("COERCE",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?(?:$|[^\\d])`),p("COERCERTL",u[l.COERCE],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${u[l.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",p("TILDE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${u[l.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",p("CARET",`^${u[l.LONECARET]}${u[l.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${u[l.LONECARET]}${u[l.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${u[l.GTLT]}\\s*(${u[l.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]}|${u[l.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${u[l.XRANGEPLAIN]})\\s+-\\s+(${u[l.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${u[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[l.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(Nq,Nq.exports);var One=Nq.exports;const G1e=/^[0-9]+$/,y7e=(e,t)=>{const n=G1e.test(e),r=G1e.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1},Rfn=(e,t)=>y7e(t,e);var Nfn={compareIdentifiers:y7e,rcompareIdentifiers:Rfn};const ok=P5,{MAX_LENGTH:Y1e,MAX_SAFE_INTEGER:ak}=Ine,{safeRe:K1e,t:X1e}=One,Dfn=Cne,{compareIdentifiers:T_}=Nfn;let Lfn=class jf{constructor(t,n){if(n=Dfn(n),t instanceof jf){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>Y1e)throw new TypeError(`version is longer than ${Y1e} characters`);ok("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const r=t.trim().match(n.loose?K1e[X1e.LOOSE]:K1e[X1e.FULL]);if(!r)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>ak||this.major<0)throw new TypeError("Invalid major version");if(this.minor>ak||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>ak||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const s=+i;if(s>=0&&s<ak)return s}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(ok("SemVer.compare",this.version,this.options,t),!(t instanceof jf)){if(typeof t=="string"&&t===this.version)return 0;t=new jf(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof jf||(t=new jf(t,this.options)),T_(this.major,t.major)||T_(this.minor,t.minor)||T_(this.patch,t.patch)}comparePre(t){if(t instanceof jf||(t=new jf(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{const r=this.prerelease[n],i=t.prerelease[n];if(ok("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return T_(r,i)}while(++n)}compareBuild(t){t instanceof jf||(t=new jf(t,this.options));let n=0;do{const r=this.build[n],i=t.build[n];if(ok("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return T_(r,i)}while(++n)}inc(t,n,r){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const i=Number(r)?1:0;if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(n){let s=[n,i];r===!1&&(s=[n]),T_(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var Pne=Lfn;const Q1e=Pne,Mfn=(e,t,n)=>new Q1e(e,n).compare(new Q1e(t,n));var mx=Mfn;const Ffn=mx,Bfn=(e,t,n)=>Ffn(e,t,n)===0;var jfn=Bfn;const zfn=mx,Ufn=(e,t,n)=>zfn(e,t,n)!==0;var Vfn=Ufn;const Hfn=mx,qfn=(e,t,n)=>Hfn(e,t,n)>0;var Wfn=qfn;const Gfn=mx,Yfn=(e,t,n)=>Gfn(e,t,n)>=0;var Kfn=Yfn;const Xfn=mx,Qfn=(e,t,n)=>Xfn(e,t,n)<0;var Jfn=Qfn;const Zfn=mx,edn=(e,t,n)=>Zfn(e,t,n)<=0;var tdn=edn;const ndn=jfn,rdn=Vfn,idn=Wfn,sdn=Kfn,odn=Jfn,adn=tdn,udn=(e,t,n,r)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return ndn(e,n,r);case"!=":return rdn(e,n,r);case">":return idn(e,n,r);case">=":return sdn(e,n,r);case"<":return odn(e,n,r);case"<=":return adn(e,n,r);default:throw new TypeError(`Invalid operator: ${t}`)}};var ldn=udn,r7,J1e;function cdn(){if(J1e)return r7;J1e=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(c,f){if(f=n(f),c instanceof t){if(c.loose===!!f.loose)return c;c=c.value}c=c.trim().split(/\s+/).join(" "),o("comparator",c,f),this.options=f,this.loose=!!f.loose,this.parse(c),this.semver===e?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(c){const f=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],d=c.match(f);if(!d)throw new TypeError(`Invalid comparator: ${c}`);this.operator=d[1]!==void 0?d[1]:"",this.operator==="="&&(this.operator=""),d[2]?this.semver=new a(d[2],this.options.loose):this.semver=e}toString(){return this.value}test(c){if(o("Comparator.test",c,this.options.loose),this.semver===e||c===e)return!0;if(typeof c=="string")try{c=new a(c,this.options)}catch{return!1}return s(c,this.operator,this.semver,this.options)}intersects(c,f){if(!(c instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new u(c.value,f).test(this.value):c.operator===""?c.value===""?!0:new u(this.value,f).test(c.semver):(f=n(f),f.includePrerelease&&(this.value==="<0.0.0-0"||c.value==="<0.0.0-0")||!f.includePrerelease&&(this.value.startsWith("<0.0.0")||c.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&c.operator.startsWith(">")||this.operator.startsWith("<")&&c.operator.startsWith("<")||this.semver.version===c.semver.version&&this.operator.includes("=")&&c.operator.includes("=")||s(this.semver,"<",c.semver,f)&&this.operator.startsWith(">")&&c.operator.startsWith("<")||s(this.semver,">",c.semver,f)&&this.operator.startsWith("<")&&c.operator.startsWith(">")))}}r7=t;const n=Cne,{safeRe:r,t:i}=One,s=ldn,o=P5,a=Pne,u=v7e();return r7}var i7,Z1e;function v7e(){if(Z1e)return i7;Z1e=1;class e{constructor($,D){if(D=r(D),$ instanceof e)return $.loose===!!D.loose&&$.includePrerelease===!!D.includePrerelease?$:new e($.raw,D);if($ instanceof i)return this.raw=$.value,this.set=[[$]],this.format(),this;if(this.options=D,this.loose=!!D.loose,this.includePrerelease=!!D.includePrerelease,this.raw=$.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(B=>this.parseRange(B.trim())).filter(B=>B.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const B=this.set[0];if(this.set=this.set.filter(V=>!p(V[0])),this.set.length===0)this.set=[B];else if(this.set.length>1){for(const V of this.set)if(V.length===1&&m(V[0])){this.set=[V];break}}}this.format()}format(){return this.range=this.set.map($=>$.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange($){const B=((this.options.includePrerelease&&d)|(this.options.loose&&h))+":"+$,V=n.get(B);if(V)return V;const j=this.options.loose,G=j?a[u.HYPHENRANGELOOSE]:a[u.HYPHENRANGE];$=$.replace(G,O(this.options.includePrerelease)),s("hyphen replace",$),$=$.replace(a[u.COMPARATORTRIM],l),s("comparator trim",$),$=$.replace(a[u.TILDETRIM],c),s("tilde trim",$),$=$.replace(a[u.CARETTRIM],f),s("caret trim",$);let U=$.split(" ").map(M=>y(M,this.options)).join(" ").split(/\s+/).map(M=>C(M,this.options));j&&(U=U.filter(M=>(s("loose invalid filter",M,this.options),!!M.match(a[u.COMPARATORLOOSE])))),s("range list",U);const P=new Map,k=U.map(M=>new i(M,this.options));for(const M of k){if(p(M))return[M];P.set(M.value,M)}P.size>1&&P.has("")&&P.delete("");const H=[...P.values()];return n.set(B,H),H}intersects($,D){if(!($ instanceof e))throw new TypeError("a Range is required");return this.set.some(B=>g(B,D)&&$.set.some(V=>g(V,D)&&B.every(j=>V.every(G=>j.intersects(G,D)))))}test($){if(!$)return!1;if(typeof $=="string")try{$=new o($,this.options)}catch{return!1}for(let D=0;D<this.set.length;D++)if(z(this.set[D],$,this.options))return!0;return!1}}i7=e;const t=xfn,n=new t({max:1e3}),r=Cne,i=cdn(),s=P5,o=Pne,{safeRe:a,t:u,comparatorTrimReplace:l,tildeTrimReplace:c,caretTrimReplace:f}=One,{FLAG_INCLUDE_PRERELEASE:d,FLAG_LOOSE:h}=Ine,p=N=>N.value==="<0.0.0-0",m=N=>N.value==="",g=(N,$)=>{let D=!0;const B=N.slice();let V=B.pop();for(;D&&B.length;)D=B.every(j=>V.intersects(j,$)),V=B.pop();return D},y=(N,$)=>(s("comp",N,$),N=E(N,$),s("caret",N),N=_(N,$),s("tildes",N),N=x(N,$),s("xrange",N),N=I(N,$),s("stars",N),N),v=N=>!N||N.toLowerCase()==="x"||N==="*",_=(N,$)=>N.trim().split(/\s+/).map(D=>b(D,$)).join(" "),b=(N,$)=>{const D=$.loose?a[u.TILDELOOSE]:a[u.TILDE];return N.replace(D,(B,V,j,G,U)=>{s("tilde",N,B,V,j,G,U);let P;return v(V)?P="":v(j)?P=`>=${V}.0.0 <${+V+1}.0.0-0`:v(G)?P=`>=${V}.${j}.0 <${V}.${+j+1}.0-0`:U?(s("replaceTilde pr",U),P=`>=${V}.${j}.${G}-${U} <${V}.${+j+1}.0-0`):P=`>=${V}.${j}.${G} <${V}.${+j+1}.0-0`,s("tilde return",P),P})},E=(N,$)=>N.trim().split(/\s+/).map(D=>w(D,$)).join(" "),w=(N,$)=>{s("caret",N,$);const D=$.loose?a[u.CARETLOOSE]:a[u.CARET],B=$.includePrerelease?"-0":"";return N.replace(D,(V,j,G,U,P)=>{s("caret",N,V,j,G,U,P);let k;return v(j)?k="":v(G)?k=`>=${j}.0.0${B} <${+j+1}.0.0-0`:v(U)?j==="0"?k=`>=${j}.${G}.0${B} <${j}.${+G+1}.0-0`:k=`>=${j}.${G}.0${B} <${+j+1}.0.0-0`:P?(s("replaceCaret pr",P),j==="0"?G==="0"?k=`>=${j}.${G}.${U}-${P} <${j}.${G}.${+U+1}-0`:k=`>=${j}.${G}.${U}-${P} <${j}.${+G+1}.0-0`:k=`>=${j}.${G}.${U}-${P} <${+j+1}.0.0-0`):(s("no pr"),j==="0"?G==="0"?k=`>=${j}.${G}.${U}${B} <${j}.${G}.${+U+1}-0`:k=`>=${j}.${G}.${U}${B} <${j}.${+G+1}.0-0`:k=`>=${j}.${G}.${U} <${+j+1}.0.0-0`),s("caret return",k),k})},x=(N,$)=>(s("replaceXRanges",N,$),N.split(/\s+/).map(D=>S(D,$)).join(" ")),S=(N,$)=>{N=N.trim();const D=$.loose?a[u.XRANGELOOSE]:a[u.XRANGE];return N.replace(D,(B,V,j,G,U,P)=>{s("xRange",N,B,V,j,G,U,P);const k=v(j),H=k||v(G),M=H||v(U),F=M;return V==="="&&F&&(V=""),P=$.includePrerelease?"-0":"",k?V===">"||V==="<"?B="<0.0.0-0":B="*":V&&F?(H&&(G=0),U=0,V===">"?(V=">=",H?(j=+j+1,G=0,U=0):(G=+G+1,U=0)):V==="<="&&(V="<",H?j=+j+1:G=+G+1),V==="<"&&(P="-0"),B=`${V+j}.${G}.${U}${P}`):H?B=`>=${j}.0.0${P} <${+j+1}.0.0-0`:M&&(B=`>=${j}.${G}.0${P} <${j}.${+G+1}.0-0`),s("xRange return",B),B})},I=(N,$)=>(s("replaceStars",N,$),N.trim().replace(a[u.STAR],"")),C=(N,$)=>(s("replaceGTE0",N,$),N.trim().replace(a[$.includePrerelease?u.GTE0PRE:u.GTE0],"")),O=N=>($,D,B,V,j,G,U,P,k,H,M,F,J)=>(v(B)?D="":v(V)?D=`>=${B}.0.0${N?"-0":""}`:v(j)?D=`>=${B}.${V}.0${N?"-0":""}`:G?D=`>=${D}`:D=`>=${D}${N?"-0":""}`,v(k)?P="":v(H)?P=`<${+k+1}.0.0-0`:v(M)?P=`<${k}.${+H+1}.0-0`:F?P=`<=${k}.${H}.${M}-${F}`:N?P=`<${k}.${H}.${+M+1}-0`:P=`<=${P}`,`${D} ${P}`.trim()),z=(N,$,D)=>{for(let B=0;B<N.length;B++)if(!N[B].test($))return!1;if($.prerelease.length&&!D.includePrerelease){for(let B=0;B<N.length;B++)if(s(N[B].semver),N[B].semver!==i.ANY&&N[B].semver.prerelease.length>0){const V=N[B].semver;if(V.major===$.major&&V.minor===$.minor&&V.patch===$.patch)return!0}return!1}return!0};return i7}const fdn=v7e(),ddn=(e,t,n)=>{try{t=new fdn(t,n)}catch{return!1}return t.test(e)};var hdn=ddn,_7e=pfn(hdn);function pdn(e,t,n){const r=e.open(t),i=1e4,s=250,{origin:o}=new URL(t);let a=~~(i/s);function u(c){c.source===r&&(a=0,e.removeEventListener("message",u,!1))}e.addEventListener("message",u,!1);function l(){a<=0||(r.postMessage(n,o),setTimeout(l,s),a-=1)}setTimeout(l,s)}var mdn=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function b7e(e,...t){for(const n of t)gdn(e,n);return e}function gdn(e,t){for(const n of Object.keys(t))QE(e,n,t[n],!0)}const kc=ttn;let eC=scn;const uk=typeof window<"u"?window:void 0;var U_e;eC===void 0&&((U_e=uk==null?void 0:uk.vl)!=null&&U_e.compile)&&(eC=uk.vl);const ydn={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},vdn={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},bT={vega:"Vega","vega-lite":"Vega-Lite"},QL={vega:kc.version,"vega-lite":eC?eC.version:"not available"},_dn={vega:e=>e,"vega-lite":(e,t)=>eC.compile(e,{config:t}).spec},bdn=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,wdn="chart-wrapper";function Edn(e){return typeof e=="function"}function eve(e,t,n,r){const i=`<html><head>${t}</head><body><pre><code class="json">`,s=`</code></pre>${n}</body></html>`,o=window.open("");o.document.write(i+e+s),o.document.title=`${bT[r]} JSON Source`}function xdn(e,t){if(e.$schema){const n=f7e(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${bT[n.library]}, but mode argument sets ${bT[t]??t}.`);const r=n.library;return _7e(QL[r],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${bT[r]} ${n.version}, but the current version of ${bT[r]} is v${QL[r]}.`),r}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function w7e(e){return!!(e&&"load"in e)}function tve(e){return w7e(e)?e:kc.loader(e)}function Sdn(e){var n;const t=((n=e.usermeta)==null?void 0:n.embedOptions)??{};return rt(t.defaultStyle)&&(t.defaultStyle=!1),t}async function Tdn(e,t,n={}){let r,i;rt(t)?(i=tve(n.loader),r=JSON.parse(await i.load(t))):r=t;const s=Sdn(r),o=s.loader;(!i||o)&&(i=tve(n.loader??o));const a=await nve(s,i),u=await nve(n,i),l={...b7e(u,a),config:XE(u.config??{},a.config??{})};return await Cdn(e,r,l,i)}async function nve(e,t){const n=rt(e.config)?JSON.parse(await t.load(e.config)):e.config??{},r=rt(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return{...e,...r?{patch:r}:{},...n?{config:n}:{}}}function Adn(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function Cdn(e,t,n={},r){const i=n.theme?XE(sfn[n.theme],n.config??{}):n.config,s=L0(n.actions)?n.actions:b7e({},ydn,n.actions??{}),o={...vdn,...n.i18n},a=n.renderer??"canvas",u=n.logLevel??kc.Warn,l=n.downloadFileName??"visualization",c=typeof e=="string"?document.querySelector(e):e;if(!c)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const E="vega-embed-style",{root:w,rootContainer:x}=Adn(c);if(!w.getElementById(E)){const S=document.createElement("style");S.id=E,S.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?mdn.toString():n.defaultStyle,x.appendChild(S)}}const f=xdn(t,n.mode);let d=_dn[f](t,i);if(f==="vega-lite"&&d.$schema){const E=f7e(d.$schema);_7e(QL.vega,`^${E.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${E.version}, but current version is v${QL.vega}.`)}c.classList.add("vega-embed"),s&&c.classList.add("has-actions"),c.innerHTML="";let h=c;if(s){const E=document.createElement("div");E.classList.add(wdn),c.appendChild(E),h=E}const p=n.patch;if(p&&(d=p instanceof Function?p(d):z4(d,p,!0,!1).newDocument),n.formatLocale&&kc.formatLocale(n.formatLocale),n.timeFormatLocale&&kc.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const E in n.expressionFunctions){const w=n.expressionFunctions[E];"fn"in w?kc.expressionFunction(E,w.fn,w.visitor):w instanceof Function&&kc.expressionFunction(E,w)}const{ast:m}=n,g=kc.parse(d,f==="vega-lite"?{}:i,{ast:m}),y=new(n.viewClass||kc.View)(g,{loader:r,logLevel:u,renderer:a,...m?{expr:kc.expressionInterpreter??n.expr??ftn}:{}});if(y.addSignalListener("autosize",(E,w)=>{const{type:x}=w;x=="fit-x"?(h.classList.add("fit-x"),h.classList.remove("fit-y")):x=="fit-y"?(h.classList.remove("fit-x"),h.classList.add("fit-y")):x=="fit"?h.classList.add("fit-x","fit-y"):h.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const{loader:E,tooltip:w}=n,x=E&&!w7e(E)?E==null?void 0:E.baseURL:void 0,S=Edn(w)?w:new hfn({baseURL:x,...w===!0?{}:w}).call;y.tooltip(S)}let{hover:v}=n;if(v===void 0&&(v=f==="vega"),v){const{hoverSet:E,updateSet:w}=typeof v=="boolean"?{}:v;y.hover(E,w)}n&&(n.width!=null&&y.width(n.width),n.height!=null&&y.height(n.height),n.padding!=null&&y.padding(n.padding)),await y.initialize(h,n.bind).runAsync();let _;if(s!==!1){let E=c;if(n.defaultStyle!==!1||n.forceActionsMenu){const x=document.createElement("details");x.title=o.CLICK_TO_VIEW_ACTIONS,c.append(x),E=x;const S=document.createElement("summary");S.innerHTML=bdn,x.append(S),_=I=>{x.contains(I.target)||x.removeAttribute("open")},document.addEventListener("click",_)}const w=document.createElement("div");if(E.append(w),w.classList.add("vega-actions"),s===!0||s.export!==!1){for(const x of["svg","png"])if(s===!0||s.export===!0||s.export[x]){const S=o[`${x.toUpperCase()}_ACTION`],I=document.createElement("a"),C=st(n.scaleFactor)?n.scaleFactor[x]:n.scaleFactor;I.text=S,I.href="#",I.target="_blank",I.download=`${l}.${x}`,I.addEventListener("mousedown",async function(O){O.preventDefault();const z=await y.toImageURL(x,C);this.href=z}),w.append(I)}}if(s===!0||s.source!==!1){const x=document.createElement("a");x.text=o.SOURCE_ACTION,x.href="#",x.addEventListener("click",function(S){eve(tj(t),n.sourceHeader??"",n.sourceFooter??"",f),S.preventDefault()}),w.append(x)}if(f==="vega-lite"&&(s===!0||s.compiled!==!1)){const x=document.createElement("a");x.text=o.COMPILED_ACTION,x.href="#",x.addEventListener("click",function(S){eve(tj(d),n.sourceHeader??"",n.sourceFooter??"","vega"),S.preventDefault()}),w.append(x)}if(s===!0||s.editor!==!1){const x=n.editorUrl??"https://vega.github.io/editor/",S=document.createElement("a");S.text=o.EDITOR_ACTION,S.href="#",S.addEventListener("click",function(I){pdn(window,x,{config:i,mode:f,renderer:a,spec:tj(t)}),I.preventDefault()}),w.append(S)}}function b(){_&&document.removeEventListener("click",_),y.finalize()}return{view:y,spec:t,vgSpec:d,finalize:b,embedOptions:n}}function Idn(e){return!!e&&{}.toString.call(e)==="[object Function]"}function Odn(e,t,n){n&&(Idn(n)?n(e.data(t)):e.change(t,kc.changeset().remove(()=>!0).insert(n)))}function Pdn(e,t){Object.keys(t).forEach(n=>{Odn(e,n,t[n])})}function E7e(e){const t=new Set;return e.forEach(n=>{Object.keys(n).forEach(r=>{t.add(r)})}),t}const x7e=()=>{};function s7(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.addSignalListener(r,t[r])}catch(i){console.warn("Cannot add invalid signal listener.",i)}}),n.length>0}function kdn(e,t){if(e===t)return!1;const n={width:!1,height:!1,isExpensive:!1},r=E7e([e,t]);return r.has("width")&&(!("width"in e)||!("width"in t)||e.width!==t.width)&&("width"in e&&typeof e.width=="number"?n.width=e.width:n.isExpensive=!0),r.has("height")&&(!("height"in e)||!("height"in t)||e.height!==t.height)&&("height"in e&&typeof e.height=="number"?n.height=e.height:n.isExpensive=!0),r.delete("width"),r.delete("height"),[...r].some(i=>!(i in e)||!(i in t)||!Jz(e[i],t[i]))&&(n.isExpensive=!0),n.width!==!1||n.height!==!1||n.isExpensive?n:!1}function rve(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.removeSignalListener(r,t[r])}catch(i){console.warn("Cannot remove invalid signal listener.",i)}}),n.length>0}function o7(e){const{spec:t,width:n,height:r}=e;return typeof n<"u"&&typeof r<"u"?{...t,width:n,height:r}:typeof n<"u"?{...t,width:n}:typeof r<"u"?{...t,height:r}:t}function wT(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class S7e extends L.PureComponent{constructor(){super(...arguments),wT(this,"containerRef",L.createRef()),wT(this,"resultPromise",void 0),wT(this,"handleError",t=>{const{onError:n=x7e}=this.props;n(t,this.containerRef.current),console.warn(t)}),wT(this,"modifyView",t=>{this.resultPromise&&this.resultPromise.then(n=>(n&&t(n.view),!0)).catch(this.handleError)})}componentDidMount(){this.createView()}componentDidUpdate(t){const n=E7e([this.props,t]);if(n.delete("className"),n.delete("signalListeners"),n.delete("spec"),n.delete("style"),n.delete("width"),n.delete("height"),Array.from(n).some(r=>this.props[r]!==t[r]))this.clearView(),this.createView();else{const r=kdn(o7(this.props),o7(t)),{signalListeners:i}=this.props,{signalListeners:s}=t;if(r)if(r.isExpensive)this.clearView(),this.createView();else{const o=!LV(i,s);this.modifyView(a=>{r.width!==!1&&a.width(r.width),r.height!==!1&&a.height(r.height),o&&(s&&rve(a,s),i&&s7(a,i)),a.run()})}else LV(i,s)||this.modifyView(o=>{s&&rve(o,s),i&&s7(o,i),o.run()})}}componentWillUnmount(){this.clearView()}createView(){const{spec:t,onNewView:n,signalListeners:r={},width:i,height:s,...o}=this.props;if(this.containerRef.current){const a=o7(this.props);this.resultPromise=Tdn(this.containerRef.current,a,o).then(u=>{if(u){const{view:l}=u;s7(l,r)&&l.run()}return u}).catch(this.handleError),n&&this.modifyView(n)}}clearView(){return this.resultPromise&&this.resultPromise.then(t=>{t&&t.finalize()}).catch(this.handleError),this.resultPromise=void 0,this}render(){const{className:t,style:n}=this.props;return L.createElement("div",{ref:this.containerRef,className:t,style:n})}}wT(S7e,"propTypes",{className:Mt.string,onError:Mt.func});function Dq(){return Dq=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Dq.apply(this,arguments)}function Lq(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const $dn={};class T7e extends L.PureComponent{constructor(){super(...arguments),Lq(this,"vegaEmbed",L.createRef()),Lq(this,"handleNewView",t=>{this.update();const{onNewView:n=x7e}=this.props;n(t)})}componentDidMount(){this.update()}componentDidUpdate(t){LV(this.props.data,t.data)||this.update()}update(){const{data:t}=this.props;this.vegaEmbed.current&&t&&Object.keys(t).length>0&&this.vegaEmbed.current.modifyView(n=>{Pdn(n,t),n.resize().run()})}render(){const{data:t,...n}=this.props;return L.createElement(S7e,Dq({ref:this.vegaEmbed},n,{onNewView:this.handleNewView}))}}Lq(T7e,"defaultProps",{data:$dn});function Mq(){return Mq=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Mq.apply(this,arguments)}function Rdn(e){return L.createElement(T7e,Mq({},e,{mode:"vega-lite"}))}const ive=e=>Ug(e.sequence).every((t,n)=>t==="end"?!0:e.answers[`${t}_${n}`]!==void 0),Ndn=(e,t)=>{const n=Object.values(e).map(r=>[r.startTime,r.endTime]).flat();return t[0]===null||t[1]===null?!1:Math.min(...n)>=t[0].getTime()&&Math.max(...n)<=t[1].getTime()};function Ddn(e){const{studyId:t,allParticipants:n,config:r}=e,[i,{open:s,close:o}]=LT(!1),[a,u]=wb(),l=n.filter(S=>ive(S)).map(S=>Math.max(...Object.values(S.answers).map(I=>I.endTime))),[c,f]=A.useState([new Date(new Date(Math.min(...l.length>0?l:[new Date().getTime()])).setHours(0,0,0,0)),new Date(new Date(Math.max(...l.length>0?l:[new Date().getTime()])).setHours(24,0,0,0))]),[d,h]=A.useState([]),[p,m]=A.useState([]);A.useEffect(()=>{if(n.length>0&&n[0].sequence.components){const S=n.filter(O=>Ndn(O.answers,c)),I=[],C=[];S.forEach(O=>{ive(O)?I.push(O):C.push(O)}),h(I),m(C)}},[n,c]);const g=A.useMemo(()=>{var S,I;return d.length>0?[{Date:(S=c[0])==null?void 0:S.getTime(),Participants:0},...d.map(C=>Math.max(...Object.values(C.answers).map(O=>O.endTime).flat())).sort((C,O)=>C-O).map((C,O)=>({Date:C,Participants:O})),{Date:(I=c[1])==null?void 0:I.getTime(),Participants:d.length}]:[]},[d,c]),y=A.useMemo(()=>{var S,I;return{width:u.width-40-8,height:200,mark:{type:"line",interpolate:"step-before"},encoding:{x:{field:"Date",type:"temporal",scale:{domain:[(S=c[0])==null?void 0:S.getTime(),(I=c[1])==null?void 0:I.getTime()]}},y:{field:"Participants",type:"quantitative"}},data:{values:g}}},[u,g]),[v,{close:_,open:b}]=LT(!1),[E,{close:w,open:x}]=LT(!1);return R.jsxs(i6,{children:[R.jsxs(RTe,{ref:a,p:"lg",shadow:"md",withBorder:!0,children:[R.jsxs(op,{align:"center",mb:16,justify:"space-between",children:[R.jsxs(op,{direction:"column",children:[R.jsx(Mc,{order:5,mb:4,children:t}),R.jsxs(op,{direction:"row",wrap:"nowrap",gap:"xs",align:"center",mb:4,children:[R.jsxs(FT,{size:"sm",color:"orange",children:["Total:",p.length+d.length]}),R.jsxs(FT,{size:"sm",color:"green",children:["Completed:",d.length]}),R.jsxs(FT,{size:"sm",color:"cyan",children:["In Progress:",p.length]})]})]}),R.jsxs(Jl,{children:[R.jsxs(Vi,{opened:v,children:[R.jsx(Vi.Target,{children:R.jsx(cu,{disabled:n.length===0,onClick:()=>{a2(JSON.stringify(n,null,2),`${t}_all.json`)},onMouseEnter:b,onMouseLeave:_,px:4,children:R.jsx(ODe,{})})}),R.jsx(Vi.Dropdown,{children:R.jsx(Rt,{children:"Download all participants data as JSON"})})]}),R.jsxs(Vi,{opened:E,children:[R.jsx(Vi.Target,{children:R.jsx(cu,{disabled:n.length===0,onClick:s,onMouseEnter:x,onMouseLeave:w,px:4,children:R.jsx(qX,{})})}),R.jsx(Vi.Dropdown,{children:R.jsx(Rt,{children:"Download all participants data as a tidy CSV"})})]})]})]}),R.jsx(uLe,{label:R.jsx(Rt,{children:"Time Filter:"}),placeholder:"Pick dates range",value:c,onChange:f}),g.length>0?R.jsxs(R.Fragment,{children:[R.jsx(Rt,{mt:16,children:"Finished Participants"}),R.jsx(Rdn,{spec:y,actions:!1})]}):R.jsx(At,{h:293.4,children:R.jsx(Bg,{style:{height:"100%"},children:R.jsx(Rt,{children:"Not enough participants for chart"})})})]}),R.jsx(v3e,{opened:i,close:o,filename:`${t}_all_tidy.csv`,studyConfig:r,data:n})]})}function lk(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var A7e={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(e,t){(function(n){e.exports=n()})(function(){return function n(r,i,s){function o(l,c){if(!i[l]){if(!r[l]){var f=typeof lk=="function"&&lk;if(!c&&f)return f(l,!0);if(a)return a(l,!0);var d=new Error("Cannot find module '"+l+"'");throw d.code="MODULE_NOT_FOUND",d}var h=i[l]={exports:{}};r[l][0].call(h.exports,function(p){var m=r[l][1][p];return o(m||p)},h,h.exports,n,r,i,s)}return i[l].exports}for(var a=typeof lk=="function"&&lk,u=0;u<s.length;u++)o(s[u]);return o}({1:[function(n,r,i){(function(s){var o=s.MutationObserver||s.WebKitMutationObserver,a;if(o){var u=0,l=new o(p),c=s.document.createTextNode("");l.observe(c,{characterData:!0}),a=function(){c.data=u=++u%2}}else if(!s.setImmediate&&typeof s.MessageChannel<"u"){var f=new s.MessageChannel;f.port1.onmessage=p,a=function(){f.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?a=function(){var g=s.document.createElement("script");g.onreadystatechange=function(){p(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},s.document.documentElement.appendChild(g)}:a=function(){setTimeout(p,0)};var d,h=[];function p(){d=!0;for(var g,y,v=h.length;v;){for(y=h,h=[],g=-1;++g<v;)y[g]();v=h.length}d=!1}r.exports=m;function m(g){h.push(g)===1&&!d&&a()}}).call(this,typeof nu<"u"?nu:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(n,r,i){var s=n(1);function o(){}var a={},u=["REJECTED"],l=["FULFILLED"],c=["PENDING"];r.exports=f;function f(E){if(typeof E!="function")throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,E!==o&&m(this,E)}f.prototype.catch=function(E){return this.then(null,E)},f.prototype.then=function(E,w){if(typeof E!="function"&&this.state===l||typeof w!="function"&&this.state===u)return this;var x=new this.constructor(o);if(this.state!==c){var S=this.state===l?E:w;h(x,S,this.outcome)}else this.queue.push(new d(x,E,w));return x};function d(E,w,x){this.promise=E,typeof w=="function"&&(this.onFulfilled=w,this.callFulfilled=this.otherCallFulfilled),typeof x=="function"&&(this.onRejected=x,this.callRejected=this.otherCallRejected)}d.prototype.callFulfilled=function(E){a.resolve(this.promise,E)},d.prototype.otherCallFulfilled=function(E){h(this.promise,this.onFulfilled,E)},d.prototype.callRejected=function(E){a.reject(this.promise,E)},d.prototype.otherCallRejected=function(E){h(this.promise,this.onRejected,E)};function h(E,w,x){s(function(){var S;try{S=w(x)}catch(I){return a.reject(E,I)}S===E?a.reject(E,new TypeError("Cannot resolve promise with itself")):a.resolve(E,S)})}a.resolve=function(E,w){var x=g(p,w);if(x.status==="error")return a.reject(E,x.value);var S=x.value;if(S)m(E,S);else{E.state=l,E.outcome=w;for(var I=-1,C=E.queue.length;++I<C;)E.queue[I].callFulfilled(w)}return E},a.reject=function(E,w){E.state=u,E.outcome=w;for(var x=-1,S=E.queue.length;++x<S;)E.queue[x].callRejected(w);return E};function p(E){var w=E&&E.then;if(E&&(typeof E=="object"||typeof E=="function")&&typeof w=="function")return function(){w.apply(E,arguments)}}function m(E,w){var x=!1;function S(z){x||(x=!0,a.reject(E,z))}function I(z){x||(x=!0,a.resolve(E,z))}function C(){w(I,S)}var O=g(C);O.status==="error"&&S(O.value)}function g(E,w){var x={};try{x.value=E(w),x.status="success"}catch(S){x.status="error",x.value=S}return x}f.resolve=y;function y(E){return E instanceof this?E:a.resolve(new this(o),E)}f.reject=v;function v(E){var w=new this(o);return a.reject(w,E)}f.all=_;function _(E){var w=this;if(Object.prototype.toString.call(E)!=="[object Array]")return this.reject(new TypeError("must be an array"));var x=E.length,S=!1;if(!x)return this.resolve([]);for(var I=new Array(x),C=0,O=-1,z=new this(o);++O<x;)N(E[O],O);return z;function N($,D){w.resolve($).then(B,function(V){S||(S=!0,a.reject(z,V))});function B(V){I[D]=V,++C===x&&!S&&(S=!0,a.resolve(z,I))}}}f.race=b;function b(E){var w=this;if(Object.prototype.toString.call(E)!=="[object Array]")return this.reject(new TypeError("must be an array"));var x=E.length,S=!1;if(!x)return this.resolve([]);for(var I=-1,C=new this(o);++I<x;)O(E[I]);return C;function O(z){w.resolve(z).then(function(N){S||(S=!0,a.resolve(C,N))},function(N){S||(S=!0,a.reject(C,N))})}}},{1:1}],3:[function(n,r,i){(function(s){typeof s.Promise!="function"&&(s.Promise=n(2))}).call(this,typeof nu<"u"?nu:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(n,r,i){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(q){return typeof q}:function(q){return q&&typeof Symbol=="function"&&q.constructor===Symbol&&q!==Symbol.prototype?"symbol":typeof q};function o(q,te){if(!(q instanceof te))throw new TypeError("Cannot call a class as a function")}function a(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var u=a();function l(){try{if(!u||!u.open)return!1;var q=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),te=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!q||te)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function c(q,te){q=q||[],te=te||{};try{return new Blob(q,te)}catch(oe){if(oe.name!=="TypeError")throw oe;for(var K=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,fe=new K,pe=0;pe<q.length;pe+=1)fe.append(q[pe]);return fe.getBlob(te.type)}}typeof Promise>"u"&&n(3);var f=Promise;function d(q,te){te&&q.then(function(K){te(null,K)},function(K){te(K)})}function h(q,te,K){typeof te=="function"&&q.then(te),typeof K=="function"&&q.catch(K)}function p(q){return typeof q!="string"&&(console.warn(q+" used as a key, but it is not a string."),q=String(q)),q}function m(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var g="local-forage-detect-blob-support",y=void 0,v={},_=Object.prototype.toString,b="readonly",E="readwrite";function w(q){for(var te=q.length,K=new ArrayBuffer(te),fe=new Uint8Array(K),pe=0;pe<te;pe++)fe[pe]=q.charCodeAt(pe);return K}function x(q){return new f(function(te){var K=q.transaction(g,E),fe=c([""]);K.objectStore(g).put(fe,"key"),K.onabort=function(pe){pe.preventDefault(),pe.stopPropagation(),te(!1)},K.oncomplete=function(){var pe=navigator.userAgent.match(/Chrome\/(\d+)/),oe=navigator.userAgent.match(/Edge\//);te(oe||!pe||parseInt(pe[1],10)>=43)}}).catch(function(){return!1})}function S(q){return typeof y=="boolean"?f.resolve(y):x(q).then(function(te){return y=te,y})}function I(q){var te=v[q.name],K={};K.promise=new f(function(fe,pe){K.resolve=fe,K.reject=pe}),te.deferredOperations.push(K),te.dbReady?te.dbReady=te.dbReady.then(function(){return K.promise}):te.dbReady=K.promise}function C(q){var te=v[q.name],K=te.deferredOperations.pop();if(K)return K.resolve(),K.promise}function O(q,te){var K=v[q.name],fe=K.deferredOperations.pop();if(fe)return fe.reject(te),fe.promise}function z(q,te){return new f(function(K,fe){if(v[q.name]=v[q.name]||k(),q.db)if(te)I(q),q.db.close();else return K(q.db);var pe=[q.name];te&&pe.push(q.version);var oe=u.open.apply(u,pe);te&&(oe.onupgradeneeded=function(Se){var De=oe.result;try{De.createObjectStore(q.storeName),Se.oldVersion<=1&&De.createObjectStore(g)}catch(ze){if(ze.name==="ConstraintError")console.warn('The database "'+q.name+'" has been upgraded from version '+Se.oldVersion+" to version "+Se.newVersion+', but the storage "'+q.storeName+'" already exists.');else throw ze}}),oe.onerror=function(Se){Se.preventDefault(),fe(oe.error)},oe.onsuccess=function(){var Se=oe.result;Se.onversionchange=function(De){De.target.close()},K(Se),C(q)}})}function N(q){return z(q,!1)}function $(q){return z(q,!0)}function D(q,te){if(!q.db)return!0;var K=!q.db.objectStoreNames.contains(q.storeName),fe=q.version<q.db.version,pe=q.version>q.db.version;if(fe&&(q.version!==te&&console.warn('The database "'+q.name+`" can't be downgraded from version `+q.db.version+" to version "+q.version+"."),q.version=q.db.version),pe||K){if(K){var oe=q.db.version+1;oe>q.version&&(q.version=oe)}return!0}return!1}function B(q){return new f(function(te,K){var fe=new FileReader;fe.onerror=K,fe.onloadend=function(pe){var oe=btoa(pe.target.result||"");te({__local_forage_encoded_blob:!0,data:oe,type:q.type})},fe.readAsBinaryString(q)})}function V(q){var te=w(atob(q.data));return c([te],{type:q.type})}function j(q){return q&&q.__local_forage_encoded_blob}function G(q){var te=this,K=te._initReady().then(function(){var fe=v[te._dbInfo.name];if(fe&&fe.dbReady)return fe.dbReady});return h(K,q,q),K}function U(q){I(q);for(var te=v[q.name],K=te.forages,fe=0;fe<K.length;fe++){var pe=K[fe];pe._dbInfo.db&&(pe._dbInfo.db.close(),pe._dbInfo.db=null)}return q.db=null,N(q).then(function(oe){return q.db=oe,D(q)?$(q):oe}).then(function(oe){q.db=te.db=oe;for(var Se=0;Se<K.length;Se++)K[Se]._dbInfo.db=oe}).catch(function(oe){throw O(q,oe),oe})}function P(q,te,K,fe){fe===void 0&&(fe=1);try{var pe=q.db.transaction(q.storeName,te);K(null,pe)}catch(oe){if(fe>0&&(!q.db||oe.name==="InvalidStateError"||oe.name==="NotFoundError"))return f.resolve().then(function(){if(!q.db||oe.name==="NotFoundError"&&!q.db.objectStoreNames.contains(q.storeName)&&q.version<=q.db.version)return q.db&&(q.version=q.db.version+1),$(q)}).then(function(){return U(q).then(function(){P(q,te,K,fe-1)})}).catch(K);K(oe)}}function k(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function H(q){var te=this,K={db:null};if(q)for(var fe in q)K[fe]=q[fe];var pe=v[K.name];pe||(pe=k(),v[K.name]=pe),pe.forages.push(te),te._initReady||(te._initReady=te.ready,te.ready=G);var oe=[];function Se(){return f.resolve()}for(var De=0;De<pe.forages.length;De++){var ze=pe.forages[De];ze!==te&&oe.push(ze._initReady().catch(Se))}var He=pe.forages.slice(0);return f.all(oe).then(function(){return K.db=pe.db,N(K)}).then(function(Ze){return K.db=Ze,D(K,te._defaultConfig.version)?$(K):Ze}).then(function(Ze){K.db=pe.db=Ze,te._dbInfo=K;for(var wt=0;wt<He.length;wt++){var gn=He[wt];gn!==te&&(gn._dbInfo.db=K.db,gn._dbInfo.version=K.version)}})}function M(q,te){var K=this;q=p(q);var fe=new f(function(pe,oe){K.ready().then(function(){P(K._dbInfo,b,function(Se,De){if(Se)return oe(Se);try{var ze=De.objectStore(K._dbInfo.storeName),He=ze.get(q);He.onsuccess=function(){var Ze=He.result;Ze===void 0&&(Ze=null),j(Ze)&&(Ze=V(Ze)),pe(Ze)},He.onerror=function(){oe(He.error)}}catch(Ze){oe(Ze)}})}).catch(oe)});return d(fe,te),fe}function F(q,te){var K=this,fe=new f(function(pe,oe){K.ready().then(function(){P(K._dbInfo,b,function(Se,De){if(Se)return oe(Se);try{var ze=De.objectStore(K._dbInfo.storeName),He=ze.openCursor(),Ze=1;He.onsuccess=function(){var wt=He.result;if(wt){var gn=wt.value;j(gn)&&(gn=V(gn));var tr=q(gn,wt.key,Ze++);tr!==void 0?pe(tr):wt.continue()}else pe()},He.onerror=function(){oe(He.error)}}catch(wt){oe(wt)}})}).catch(oe)});return d(fe,te),fe}function J(q,te,K){var fe=this;q=p(q);var pe=new f(function(oe,Se){var De;fe.ready().then(function(){return De=fe._dbInfo,_.call(te)==="[object Blob]"?S(De.db).then(function(ze){return ze?te:B(te)}):te}).then(function(ze){P(fe._dbInfo,E,function(He,Ze){if(He)return Se(He);try{var wt=Ze.objectStore(fe._dbInfo.storeName);ze===null&&(ze=void 0);var gn=wt.put(ze,q);Ze.oncomplete=function(){ze===void 0&&(ze=null),oe(ze)},Ze.onabort=Ze.onerror=function(){var tr=gn.error?gn.error:gn.transaction.error;Se(tr)}}catch(tr){Se(tr)}})}).catch(Se)});return d(pe,K),pe}function se(q,te){var K=this;q=p(q);var fe=new f(function(pe,oe){K.ready().then(function(){P(K._dbInfo,E,function(Se,De){if(Se)return oe(Se);try{var ze=De.objectStore(K._dbInfo.storeName),He=ze.delete(q);De.oncomplete=function(){pe()},De.onerror=function(){oe(He.error)},De.onabort=function(){var Ze=He.error?He.error:He.transaction.error;oe(Ze)}}catch(Ze){oe(Ze)}})}).catch(oe)});return d(fe,te),fe}function ae(q){var te=this,K=new f(function(fe,pe){te.ready().then(function(){P(te._dbInfo,E,function(oe,Se){if(oe)return pe(oe);try{var De=Se.objectStore(te._dbInfo.storeName),ze=De.clear();Se.oncomplete=function(){fe()},Se.onabort=Se.onerror=function(){var He=ze.error?ze.error:ze.transaction.error;pe(He)}}catch(He){pe(He)}})}).catch(pe)});return d(K,q),K}function ce(q){var te=this,K=new f(function(fe,pe){te.ready().then(function(){P(te._dbInfo,b,function(oe,Se){if(oe)return pe(oe);try{var De=Se.objectStore(te._dbInfo.storeName),ze=De.count();ze.onsuccess=function(){fe(ze.result)},ze.onerror=function(){pe(ze.error)}}catch(He){pe(He)}})}).catch(pe)});return d(K,q),K}function le(q,te){var K=this,fe=new f(function(pe,oe){if(q<0){pe(null);return}K.ready().then(function(){P(K._dbInfo,b,function(Se,De){if(Se)return oe(Se);try{var ze=De.objectStore(K._dbInfo.storeName),He=!1,Ze=ze.openKeyCursor();Ze.onsuccess=function(){var wt=Ze.result;if(!wt){pe(null);return}q===0||He?pe(wt.key):(He=!0,wt.advance(q))},Ze.onerror=function(){oe(Ze.error)}}catch(wt){oe(wt)}})}).catch(oe)});return d(fe,te),fe}function ge(q){var te=this,K=new f(function(fe,pe){te.ready().then(function(){P(te._dbInfo,b,function(oe,Se){if(oe)return pe(oe);try{var De=Se.objectStore(te._dbInfo.storeName),ze=De.openKeyCursor(),He=[];ze.onsuccess=function(){var Ze=ze.result;if(!Ze){fe(He);return}He.push(Ze.key),Ze.continue()},ze.onerror=function(){pe(ze.error)}}catch(Ze){pe(Ze)}})}).catch(pe)});return d(K,q),K}function ue(q,te){te=m.apply(this,arguments);var K=this.config();q=typeof q!="function"&&q||{},q.name||(q.name=q.name||K.name,q.storeName=q.storeName||K.storeName);var fe=this,pe;if(!q.name)pe=f.reject("Invalid arguments");else{var oe=q.name===K.name&&fe._dbInfo.db,Se=oe?f.resolve(fe._dbInfo.db):N(q).then(function(De){var ze=v[q.name],He=ze.forages;ze.db=De;for(var Ze=0;Ze<He.length;Ze++)He[Ze]._dbInfo.db=De;return De});q.storeName?pe=Se.then(function(De){if(De.objectStoreNames.contains(q.storeName)){var ze=De.version+1;I(q);var He=v[q.name],Ze=He.forages;De.close();for(var wt=0;wt<Ze.length;wt++){var gn=Ze[wt];gn._dbInfo.db=null,gn._dbInfo.version=ze}var tr=new f(function(ur,Si){var ri=u.open(q.name,ze);ri.onerror=function(Ba){var K0=ri.result;K0.close(),Si(Ba)},ri.onupgradeneeded=function(){var Ba=ri.result;Ba.deleteObjectStore(q.storeName)},ri.onsuccess=function(){var Ba=ri.result;Ba.close(),ur(Ba)}});return tr.then(function(ur){He.db=ur;for(var Si=0;Si<Ze.length;Si++){var ri=Ze[Si];ri._dbInfo.db=ur,C(ri._dbInfo)}}).catch(function(ur){throw(O(q,ur)||f.resolve()).catch(function(){}),ur})}}):pe=Se.then(function(De){I(q);var ze=v[q.name],He=ze.forages;De.close();for(var Ze=0;Ze<He.length;Ze++){var wt=He[Ze];wt._dbInfo.db=null}var gn=new f(function(tr,ur){var Si=u.deleteDatabase(q.name);Si.onerror=function(){var ri=Si.result;ri&&ri.close(),ur(Si.error)},Si.onblocked=function(){console.warn('dropInstance blocked for database "'+q.name+'" until all open connections are closed')},Si.onsuccess=function(){var ri=Si.result;ri&&ri.close(),tr(ri)}});return gn.then(function(tr){ze.db=tr;for(var ur=0;ur<He.length;ur++){var Si=He[ur];C(Si._dbInfo)}}).catch(function(tr){throw(O(q,tr)||f.resolve()).catch(function(){}),tr})})}return d(pe,te),pe}var Fe={_driver:"asyncStorage",_initStorage:H,_support:l(),iterate:F,getItem:M,setItem:J,removeItem:se,clear:ae,length:ce,key:le,keys:ge,dropInstance:ue};function ke(){return typeof openDatabase=="function"}var Ge="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Re="~~local_forage_type~",Oe=/^~~local_forage_type~([^~]+)~/,Le="__lfsc__:",Ut=Le.length,Qe="arbf",je="blob",bt="si08",et="ui08",ut="uic8",lt="si16",jt="si32",Dn="ur16",he="ui32",_e="fl32",Pe="fl64",it=Ut+Qe.length,Ye=Object.prototype.toString;function at(q){var te=q.length*.75,K=q.length,fe,pe=0,oe,Se,De,ze;q[q.length-1]==="="&&(te--,q[q.length-2]==="="&&te--);var He=new ArrayBuffer(te),Ze=new Uint8Array(He);for(fe=0;fe<K;fe+=4)oe=Ge.indexOf(q[fe]),Se=Ge.indexOf(q[fe+1]),De=Ge.indexOf(q[fe+2]),ze=Ge.indexOf(q[fe+3]),Ze[pe++]=oe<<2|Se>>4,Ze[pe++]=(Se&15)<<4|De>>2,Ze[pe++]=(De&3)<<6|ze&63;return He}function tt(q){var te=new Uint8Array(q),K="",fe;for(fe=0;fe<te.length;fe+=3)K+=Ge[te[fe]>>2],K+=Ge[(te[fe]&3)<<4|te[fe+1]>>4],K+=Ge[(te[fe+1]&15)<<2|te[fe+2]>>6],K+=Ge[te[fe+2]&63];return te.length%3===2?K=K.substring(0,K.length-1)+"=":te.length%3===1&&(K=K.substring(0,K.length-2)+"=="),K}function vt(q,te){var K="";if(q&&(K=Ye.call(q)),q&&(K==="[object ArrayBuffer]"||q.buffer&&Ye.call(q.buffer)==="[object ArrayBuffer]")){var fe,pe=Le;q instanceof ArrayBuffer?(fe=q,pe+=Qe):(fe=q.buffer,K==="[object Int8Array]"?pe+=bt:K==="[object Uint8Array]"?pe+=et:K==="[object Uint8ClampedArray]"?pe+=ut:K==="[object Int16Array]"?pe+=lt:K==="[object Uint16Array]"?pe+=Dn:K==="[object Int32Array]"?pe+=jt:K==="[object Uint32Array]"?pe+=he:K==="[object Float32Array]"?pe+=_e:K==="[object Float64Array]"?pe+=Pe:te(new Error("Failed to get type for BinaryArray"))),te(pe+tt(fe))}else if(K==="[object Blob]"){var oe=new FileReader;oe.onload=function(){var Se=Re+q.type+"~"+tt(this.result);te(Le+je+Se)},oe.readAsArrayBuffer(q)}else try{te(JSON.stringify(q))}catch(Se){console.error("Couldn't convert value into a JSON string: ",q),te(null,Se)}}function In(q){if(q.substring(0,Ut)!==Le)return JSON.parse(q);var te=q.substring(it),K=q.substring(Ut,it),fe;if(K===je&&Oe.test(te)){var pe=te.match(Oe);fe=pe[1],te=te.substring(pe[0].length)}var oe=at(te);switch(K){case Qe:return oe;case je:return c([oe],{type:fe});case bt:return new Int8Array(oe);case et:return new Uint8Array(oe);case ut:return new Uint8ClampedArray(oe);case lt:return new Int16Array(oe);case Dn:return new Uint16Array(oe);case jt:return new Int32Array(oe);case he:return new Uint32Array(oe);case _e:return new Float32Array(oe);case Pe:return new Float64Array(oe);default:throw new Error("Unkown type: "+K)}}var Wt={serialize:vt,deserialize:In,stringToBuffer:at,bufferToString:tt};function Vt(q,te,K,fe){q.executeSql("CREATE TABLE IF NOT EXISTS "+te.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],K,fe)}function hr(q){var te=this,K={db:null};if(q)for(var fe in q)K[fe]=typeof q[fe]!="string"?q[fe].toString():q[fe];var pe=new f(function(oe,Se){try{K.db=openDatabase(K.name,String(K.version),K.description,K.size)}catch(De){return Se(De)}K.db.transaction(function(De){Vt(De,K,function(){te._dbInfo=K,oe()},function(ze,He){Se(He)})},Se)});return K.serializer=Wt,pe}function Yn(q,te,K,fe,pe,oe){q.executeSql(K,fe,pe,function(Se,De){De.code===De.SYNTAX_ERR?Se.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[te.storeName],function(ze,He){He.rows.length?oe(ze,De):Vt(ze,te,function(){ze.executeSql(K,fe,pe,oe)},oe)},oe):oe(Se,De)},oe)}function ku(q,te){var K=this;q=p(q);var fe=new f(function(pe,oe){K.ready().then(function(){var Se=K._dbInfo;Se.db.transaction(function(De){Yn(De,Se,"SELECT * FROM "+Se.storeName+" WHERE key = ? LIMIT 1",[q],function(ze,He){var Ze=He.rows.length?He.rows.item(0).value:null;Ze&&(Ze=Se.serializer.deserialize(Ze)),pe(Ze)},function(ze,He){oe(He)})})}).catch(oe)});return d(fe,te),fe}function Mr(q,te){var K=this,fe=new f(function(pe,oe){K.ready().then(function(){var Se=K._dbInfo;Se.db.transaction(function(De){Yn(De,Se,"SELECT * FROM "+Se.storeName,[],function(ze,He){for(var Ze=He.rows,wt=Ze.length,gn=0;gn<wt;gn++){var tr=Ze.item(gn),ur=tr.value;if(ur&&(ur=Se.serializer.deserialize(ur)),ur=q(ur,tr.key,gn+1),ur!==void 0){pe(ur);return}}pe()},function(ze,He){oe(He)})})}).catch(oe)});return d(fe,te),fe}function us(q,te,K,fe){var pe=this;q=p(q);var oe=new f(function(Se,De){pe.ready().then(function(){te===void 0&&(te=null);var ze=te,He=pe._dbInfo;He.serializer.serialize(te,function(Ze,wt){wt?De(wt):He.db.transaction(function(gn){Yn(gn,He,"INSERT OR REPLACE INTO "+He.storeName+" (key, value) VALUES (?, ?)",[q,Ze],function(){Se(ze)},function(tr,ur){De(ur)})},function(gn){if(gn.code===gn.QUOTA_ERR){if(fe>0){Se(us.apply(pe,[q,ze,K,fe-1]));return}De(gn)}})})}).catch(De)});return d(oe,K),oe}function ti(q,te,K){return us.apply(this,[q,te,K,1])}function Ei(q,te){var K=this;q=p(q);var fe=new f(function(pe,oe){K.ready().then(function(){var Se=K._dbInfo;Se.db.transaction(function(De){Yn(De,Se,"DELETE FROM "+Se.storeName+" WHERE key = ?",[q],function(){pe()},function(ze,He){oe(He)})})}).catch(oe)});return d(fe,te),fe}function qr(q){var te=this,K=new f(function(fe,pe){te.ready().then(function(){var oe=te._dbInfo;oe.db.transaction(function(Se){Yn(Se,oe,"DELETE FROM "+oe.storeName,[],function(){fe()},function(De,ze){pe(ze)})})}).catch(pe)});return d(K,q),K}function yr(q){var te=this,K=new f(function(fe,pe){te.ready().then(function(){var oe=te._dbInfo;oe.db.transaction(function(Se){Yn(Se,oe,"SELECT COUNT(key) as c FROM "+oe.storeName,[],function(De,ze){var He=ze.rows.item(0).c;fe(He)},function(De,ze){pe(ze)})})}).catch(pe)});return d(K,q),K}function gt(q,te){var K=this,fe=new f(function(pe,oe){K.ready().then(function(){var Se=K._dbInfo;Se.db.transaction(function(De){Yn(De,Se,"SELECT key FROM "+Se.storeName+" WHERE id = ? LIMIT 1",[q+1],function(ze,He){var Ze=He.rows.length?He.rows.item(0).key:null;pe(Ze)},function(ze,He){oe(He)})})}).catch(oe)});return d(fe,te),fe}function Fr(q){var te=this,K=new f(function(fe,pe){te.ready().then(function(){var oe=te._dbInfo;oe.db.transaction(function(Se){Yn(Se,oe,"SELECT key FROM "+oe.storeName,[],function(De,ze){for(var He=[],Ze=0;Ze<ze.rows.length;Ze++)He.push(ze.rows.item(Ze).key);fe(He)},function(De,ze){pe(ze)})})}).catch(pe)});return d(K,q),K}function xi(q){return new f(function(te,K){q.transaction(function(fe){fe.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(pe,oe){for(var Se=[],De=0;De<oe.rows.length;De++)Se.push(oe.rows.item(De).name);te({db:q,storeNames:Se})},function(pe,oe){K(oe)})},function(fe){K(fe)})})}function Yi(q,te){te=m.apply(this,arguments);var K=this.config();q=typeof q!="function"&&q||{},q.name||(q.name=q.name||K.name,q.storeName=q.storeName||K.storeName);var fe=this,pe;return q.name?pe=new f(function(oe){var Se;q.name===K.name?Se=fe._dbInfo.db:Se=openDatabase(q.name,"","",0),q.storeName?oe({db:Se,storeNames:[q.storeName]}):oe(xi(Se))}).then(function(oe){return new f(function(Se,De){oe.db.transaction(function(ze){function He(tr){return new f(function(ur,Si){ze.executeSql("DROP TABLE IF EXISTS "+tr,[],function(){ur()},function(ri,Ba){Si(Ba)})})}for(var Ze=[],wt=0,gn=oe.storeNames.length;wt<gn;wt++)Ze.push(He(oe.storeNames[wt]));f.all(Ze).then(function(){Se()}).catch(function(tr){De(tr)})},function(ze){De(ze)})})}):pe=f.reject("Invalid arguments"),d(pe,te),pe}var Qs={_driver:"webSQLStorage",_initStorage:hr,_support:ke(),iterate:Mr,getItem:ku,setItem:ti,removeItem:Ei,clear:qr,length:yr,key:gt,keys:Fr,dropInstance:Yi};function Ma(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function ne(q,te){var K=q.name+"/";return q.storeName!==te.storeName&&(K+=q.storeName+"/"),K}function Q(){var q="_localforage_support_test";try{return localStorage.setItem(q,!0),localStorage.removeItem(q),!1}catch{return!0}}function ie(){return!Q()||localStorage.length>0}function ve(q){var te=this,K={};if(q)for(var fe in q)K[fe]=q[fe];return K.keyPrefix=ne(q,te._defaultConfig),ie()?(te._dbInfo=K,K.serializer=Wt,f.resolve()):f.reject()}function ye(q){var te=this,K=te.ready().then(function(){for(var fe=te._dbInfo.keyPrefix,pe=localStorage.length-1;pe>=0;pe--){var oe=localStorage.key(pe);oe.indexOf(fe)===0&&localStorage.removeItem(oe)}});return d(K,q),K}function pt(q,te){var K=this;q=p(q);var fe=K.ready().then(function(){var pe=K._dbInfo,oe=localStorage.getItem(pe.keyPrefix+q);return oe&&(oe=pe.serializer.deserialize(oe)),oe});return d(fe,te),fe}function Ce(q,te){var K=this,fe=K.ready().then(function(){for(var pe=K._dbInfo,oe=pe.keyPrefix,Se=oe.length,De=localStorage.length,ze=1,He=0;He<De;He++){var Ze=localStorage.key(He);if(Ze.indexOf(oe)===0){var wt=localStorage.getItem(Ze);if(wt&&(wt=pe.serializer.deserialize(wt)),wt=q(wt,Ze.substring(Se),ze++),wt!==void 0)return wt}}});return d(fe,te),fe}function ft(q,te){var K=this,fe=K.ready().then(function(){var pe=K._dbInfo,oe;try{oe=localStorage.key(q)}catch{oe=null}return oe&&(oe=oe.substring(pe.keyPrefix.length)),oe});return d(fe,te),fe}function Bt(q){var te=this,K=te.ready().then(function(){for(var fe=te._dbInfo,pe=localStorage.length,oe=[],Se=0;Se<pe;Se++){var De=localStorage.key(Se);De.indexOf(fe.keyPrefix)===0&&oe.push(De.substring(fe.keyPrefix.length))}return oe});return d(K,q),K}function St(q){var te=this,K=te.keys().then(function(fe){return fe.length});return d(K,q),K}function Ht(q,te){var K=this;q=p(q);var fe=K.ready().then(function(){var pe=K._dbInfo;localStorage.removeItem(pe.keyPrefix+q)});return d(fe,te),fe}function fn(q,te,K){var fe=this;q=p(q);var pe=fe.ready().then(function(){te===void 0&&(te=null);var oe=te;return new f(function(Se,De){var ze=fe._dbInfo;ze.serializer.serialize(te,function(He,Ze){if(Ze)De(Ze);else try{localStorage.setItem(ze.keyPrefix+q,He),Se(oe)}catch(wt){(wt.name==="QuotaExceededError"||wt.name==="NS_ERROR_DOM_QUOTA_REACHED")&&De(wt),De(wt)}})})});return d(pe,K),pe}function Tr(q,te){if(te=m.apply(this,arguments),q=typeof q!="function"&&q||{},!q.name){var K=this.config();q.name=q.name||K.name,q.storeName=q.storeName||K.storeName}var fe=this,pe;return q.name?pe=new f(function(oe){q.storeName?oe(ne(q,fe._defaultConfig)):oe(q.name+"/")}).then(function(oe){for(var Se=localStorage.length-1;Se>=0;Se--){var De=localStorage.key(Se);De.indexOf(oe)===0&&localStorage.removeItem(De)}}):pe=f.reject("Invalid arguments"),d(pe,te),pe}var zt={_driver:"localStorageWrapper",_initStorage:ve,_support:Ma(),iterate:Ce,getItem:pt,setItem:fn,removeItem:Ht,clear:ye,length:St,key:ft,keys:Bt,dropInstance:Tr},pr=function(te,K){return te===K||typeof te=="number"&&typeof K=="number"&&isNaN(te)&&isNaN(K)},Xt=function(te,K){for(var fe=te.length,pe=0;pe<fe;){if(pr(te[pe],K))return!0;pe++}return!1},er=Array.isArray||function(q){return Object.prototype.toString.call(q)==="[object Array]"},ni={},ls={},Fi={INDEXEDDB:Fe,WEBSQL:Qs,LOCALSTORAGE:zt},aa=[Fi.INDEXEDDB._driver,Fi.WEBSQL._driver,Fi.LOCALSTORAGE._driver],Js=["dropInstance"],mi=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Js),yt={description:"",driver:aa.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function wn(q,te){q[te]=function(){var K=arguments;return q.ready().then(function(){return q[te].apply(q,K)})}}function Br(){for(var q=1;q<arguments.length;q++){var te=arguments[q];if(te)for(var K in te)te.hasOwnProperty(K)&&(er(te[K])?arguments[0][K]=te[K].slice():arguments[0][K]=te[K])}return arguments[0]}var Is=function(){function q(te){o(this,q);for(var K in Fi)if(Fi.hasOwnProperty(K)){var fe=Fi[K],pe=fe._driver;this[K]=pe,ni[pe]||this.defineDriver(fe)}this._defaultConfig=Br({},yt),this._config=Br({},this._defaultConfig,te),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return q.prototype.config=function(K){if((typeof K>"u"?"undefined":s(K))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var fe in K){if(fe==="storeName"&&(K[fe]=K[fe].replace(/\W/g,"_")),fe==="version"&&typeof K[fe]!="number")return new Error("Database version must be a number.");this._config[fe]=K[fe]}return"driver"in K&&K.driver?this.setDriver(this._config.driver):!0}else return typeof K=="string"?this._config[K]:this._config},q.prototype.defineDriver=function(K,fe,pe){var oe=new f(function(Se,De){try{var ze=K._driver,He=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!K._driver){De(He);return}for(var Ze=mi.concat("_initStorage"),wt=0,gn=Ze.length;wt<gn;wt++){var tr=Ze[wt],ur=!Xt(Js,tr);if((ur||K[tr])&&typeof K[tr]!="function"){De(He);return}}var Si=function(){for(var K0=function(c8){return function(){var e_=new Error("Method "+c8+" is not implemented by the current driver"),t_=f.reject(e_);return d(t_,arguments[arguments.length-1]),t_}},Ax=0,Cx=Js.length;Ax<Cx;Ax++){var Ix=Js[Ax];K[Ix]||(K[Ix]=K0(Ix))}};Si();var ri=function(K0){ni[ze]&&console.info("Redefining LocalForage driver: "+ze),ni[ze]=K,ls[ze]=K0,Se()};"_support"in K?K._support&&typeof K._support=="function"?K._support().then(ri,De):ri(!!K._support):ri(!0)}catch(Ba){De(Ba)}});return h(oe,fe,pe),oe},q.prototype.driver=function(){return this._driver||null},q.prototype.getDriver=function(K,fe,pe){var oe=ni[K]?f.resolve(ni[K]):f.reject(new Error("Driver not found."));return h(oe,fe,pe),oe},q.prototype.getSerializer=function(K){var fe=f.resolve(Wt);return h(fe,K),fe},q.prototype.ready=function(K){var fe=this,pe=fe._driverSet.then(function(){return fe._ready===null&&(fe._ready=fe._initDriver()),fe._ready});return h(pe,K,K),pe},q.prototype.setDriver=function(K,fe,pe){var oe=this;er(K)||(K=[K]);var Se=this._getSupportedDrivers(K);function De(){oe._config.driver=oe.driver()}function ze(wt){return oe._extend(wt),De(),oe._ready=oe._initStorage(oe._config),oe._ready}function He(wt){return function(){var gn=0;function tr(){for(;gn<wt.length;){var ur=wt[gn];return gn++,oe._dbInfo=null,oe._ready=null,oe.getDriver(ur).then(ze).catch(tr)}De();var Si=new Error("No available storage method found.");return oe._driverSet=f.reject(Si),oe._driverSet}return tr()}}var Ze=this._driverSet!==null?this._driverSet.catch(function(){return f.resolve()}):f.resolve();return this._driverSet=Ze.then(function(){var wt=Se[0];return oe._dbInfo=null,oe._ready=null,oe.getDriver(wt).then(function(gn){oe._driver=gn._driver,De(),oe._wrapLibraryMethodsWithReady(),oe._initDriver=He(Se)})}).catch(function(){De();var wt=new Error("No available storage method found.");return oe._driverSet=f.reject(wt),oe._driverSet}),h(this._driverSet,fe,pe),this._driverSet},q.prototype.supports=function(K){return!!ls[K]},q.prototype._extend=function(K){Br(this,K)},q.prototype._getSupportedDrivers=function(K){for(var fe=[],pe=0,oe=K.length;pe<oe;pe++){var Se=K[pe];this.supports(Se)&&fe.push(Se)}return fe},q.prototype._wrapLibraryMethodsWithReady=function(){for(var K=0,fe=mi.length;K<fe;K++)wn(this,mi[K])},q.prototype.createInstance=function(K){return new q(K)},q}(),Fa=new Is;r.exports=Fa},{3:3}]},{},[4])(4)})})(A7e);var Ldn=A7e.exports;const C7e=pl(Ldn);let ck;const Mdn=new Uint8Array(16);function Fdn(){if(!ck&&(ck=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!ck))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ck(Mdn)}const eo=[];for(let e=0;e<256;++e)eo.push((e+256).toString(16).slice(1));function Bdn(e,t=0){return eo[e[t+0]]+eo[e[t+1]]+eo[e[t+2]]+eo[e[t+3]]+"-"+eo[e[t+4]]+eo[e[t+5]]+"-"+eo[e[t+6]]+eo[e[t+7]]+"-"+eo[e[t+8]]+eo[e[t+9]]+"-"+eo[e[t+10]]+eo[e[t+11]]+eo[e[t+12]]+eo[e[t+13]]+eo[e[t+14]]+eo[e[t+15]]}const jdn=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),sve={randomUUID:jdn};function ove(e,t,n){if(sve.randomUUID&&!t&&!e)return sve.randomUUID();e=e||{};const r=e.random||(e.rng||Fdn)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){n=n||0;for(let i=0;i<16;++i)t[n+i]=r[i];return t}return Bdn(r)}class I7e{constructor(t){Ru(this,"engine");Ru(this,"connected",!1);Ru(this,"currentParticipantId",null);this.engine=t}isConnected(){return this.connected}getEngine(){return this.engine}}async function Gb(e){const t=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map(s=>s.toString(16).padStart(2,"0")).join("")}class zdn extends I7e{constructor(){super("localStorage");Ru(this,"studyDatabase")}async connect(){this.connected=!0}async initializeStudyDb(n,r){this.studyDatabase=await C7e.createInstance({name:n});const i=await Gb(JSON.stringify(r)),s=await this.studyDatabase.getItem("configs");await this.studyDatabase.setItem("configs",{...s,[i]:r})}async initializeParticipantSession(n,r,i){var u;if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(i),!this.currentParticipantId)throw new Error("Participant not initialized");const s=await this.studyDatabase.getItem(this.currentParticipantId);if(s)return s;const o=await Gb(JSON.stringify(r)),a={participantId:this.currentParticipantId,participantConfigHash:o,sequence:await this.getSequence(),answers:{},searchParams:n};return await((u=this.studyDatabase)==null?void 0:u.setItem(this.currentParticipantId,a)),a}async getCurrentParticipantId(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=await this.studyDatabase.getItem("currentParticipant");if(n)return this.currentParticipantId=n,await this.studyDatabase.setItem("currentParticipant",n),n;if(r)return this.currentParticipantId=r,r;const i=ove();return await this.studyDatabase.setItem("currentParticipant",i),this.currentParticipantId=i,i}async clearCurrentParticipantId(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");await this.studyDatabase.removeItem("currentParticipant")}async saveAnswer(n,r){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const i=await this.studyDatabase.getItem(this.currentParticipantId);if(!i)throw new Error("Participant not initialized");i.answers[n]=r,await this.studyDatabase.setItem(this.currentParticipantId,i)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");this.studyDatabase.setItem("sequenceArray",n)}async getSequence(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.studyDatabase.getItem("sequenceArray");if(!n)throw new Error("Latin square not initialized");const r=n.pop();if(!r)throw new Error("Latin square is empty");return await this.studyDatabase.setItem("sequenceArray",n),r}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("sequenceArray")}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=[];return await this.studyDatabase.iterate((r,i)=>{i!=="config"&&i!=="currentParticipant"&&i!=="sequenceArray"&&i!=="configs"&&n.push(r)}),n}async getParticipantData(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.studyDatabase.getItem("currentParticipant");return n?await this.studyDatabase.getItem(n):null}async nextParticipant(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=ove();this.studyDatabase.setItem("currentParticipant",r),this.currentParticipantId=r;let i=await this.studyDatabase.getItem(r);if(!i){const s=await Gb(JSON.stringify(n)),o={participantId:r,participantConfigHash:s,sequence:await this.getSequence(),answers:{},searchParams:{}};await this.studyDatabase.setItem(r,o),i=o}return i}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");return Ug(n.sequence).every((i,s)=>i==="end"?!0:n.answers[`${i}_${s}`]!==void 0)}_verifyStudyDatabase(n){return n!==void 0}}var ave={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O7e=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},Udn=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=e[n++],o=e[n++],a=e[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;t[r++]=String.fromCharCode(55296+(u>>10)),t[r++]=String.fromCharCode(56320+(u&1023))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return t.join("")},kne={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const s=e[i],o=i+1<e.length,a=o?e[i+1]:0,u=i+2<e.length,l=u?e[i+2]:0,c=s>>2,f=(s&3)<<4|a>>4;let d=(a&15)<<2|l>>6,h=l&63;u||(h=64,o||(d=64)),r.push(n[c],n[f],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(O7e(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):Udn(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const s=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;const l=i<e.length?n[e.charAt(i)]:64;++i;const f=i<e.length?n[e.charAt(i)]:64;if(++i,s==null||a==null||l==null||f==null)throw new Vdn;const d=s<<2|a>>4;if(r.push(d),l!==64){const h=a<<4&240|l>>2;if(r.push(h),f!==64){const p=l<<6&192|f;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Vdn extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Hdn=function(e){const t=O7e(e);return kne.encodeByteArray(t,!0)},JL=function(e){return Hdn(e).replace(/\./g,"")},P7e=function(e){try{return kne.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k7e(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qdn=()=>k7e().__FIREBASE_DEFAULTS__,Wdn=()=>{if(typeof process>"u"||typeof ave>"u")return;const e=ave.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},Gdn=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&P7e(e[1]);return t&&JSON.parse(t)},$ne=()=>{try{return qdn()||Wdn()||Gdn()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},$7e=e=>{var t,n;return(n=(t=$ne())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},Ydn=e=>{const t=$7e(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},R7e=()=>{var e;return(e=$ne())===null||e===void 0?void 0:e.config},N7e=e=>{var t;return(t=$ne())===null||t===void 0?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kdn(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",i=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[JL(JSON.stringify(n)),JL(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ra(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Xdn(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ra())}function Qdn(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function Jdn(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Zdn(){const e=ra();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Rne(){try{return typeof indexedDB=="object"}catch{return!1}}function ehn(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;t(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const thn="FirebaseError";class yh extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=thn,Object.setPrototypeOf(this,yh.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,gx.prototype.create)}}class gx{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},i=`${this.service}/${t}`,s=this.errors[t],o=s?nhn(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new yh(i,a,r)}}function nhn(e,t){return e.replace(rhn,(n,r)=>{const i=t[r];return i!=null?String(i):`<${r}?>`})}const rhn=/\{\$([^}]+)}/g;function ihn(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function nC(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const s=e[i],o=t[i];if(uve(s)&&uve(o)){if(!nC(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function uve(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nO(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function shn(e,t){const n=new ohn(e,t);return n.subscribe.bind(n)}class ohn{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let i;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");ahn(t,["next","error","complete"])?i=t:i={next:t,error:n,complete:r},i.next===void 0&&(i.next=a7),i.error===void 0&&(i.error=a7),i.complete===void 0&&(i.complete=a7);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ahn(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function a7(){}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uhn=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lhn=1e3,chn=2,fhn=4*60*60*1e3,dhn=.5;function hhn(e,t=lhn,n=chn){const r=t*Math.pow(n,e),i=Math.round(dhn*r*(Math.random()-.5)*2);return Math.min(fhn,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eo(e){return e&&e._delegate?e._delegate:e}class Zd{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ey="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class phn{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new tC;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(ghn(t))try{this.getOrInitializeService({instanceIdentifier:Ey})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(t=Ey){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Ey){return this.instances.has(t)}getOptions(t=Ey){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(t,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(t),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&t(o,i),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:mhn(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=Ey){return this.component?this.component.multipleInstances?t:Ey:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function mhn(e){return e===Ey?void 0:e}function ghn(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yhn{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new phn(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fn;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Fn||(Fn={}));const vhn={debug:Fn.DEBUG,verbose:Fn.VERBOSE,info:Fn.INFO,warn:Fn.WARN,error:Fn.ERROR,silent:Fn.SILENT},_hn=Fn.INFO,bhn={[Fn.DEBUG]:"log",[Fn.VERBOSE]:"log",[Fn.INFO]:"info",[Fn.WARN]:"warn",[Fn.ERROR]:"error"},whn=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),i=bhn[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class k5{constructor(t){this.name=t,this._logLevel=_hn,this._logHandler=whn,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Fn))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?vhn[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Fn.DEBUG,...t),this._logHandler(this,Fn.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Fn.VERBOSE,...t),this._logHandler(this,Fn.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Fn.INFO,...t),this._logHandler(this,Fn.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Fn.WARN,...t),this._logHandler(this,Fn.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Fn.ERROR,...t),this._logHandler(this,Fn.ERROR,...t)}}const Ehn=(e,t)=>t.some(n=>e instanceof n);let lve,cve;function xhn(){return lve||(lve=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Shn(){return cve||(cve=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const D7e=new WeakMap,Fq=new WeakMap,L7e=new WeakMap,u7=new WeakMap,Nne=new WeakMap;function Thn(e){const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("success",s),e.removeEventListener("error",o)},s=()=>{n($g(e.result)),i()},o=()=>{r(e.error),i()};e.addEventListener("success",s),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&D7e.set(n,e)}).catch(()=>{}),Nne.set(t,e),t}function Ahn(e){if(Fq.has(e))return;const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",o),e.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",s),e.addEventListener("error",o),e.addEventListener("abort",o)});Fq.set(e,t)}let Bq={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return Fq.get(e);if(t==="objectStoreNames")return e.objectStoreNames||L7e.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return $g(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function Chn(e){Bq=e(Bq)}function Ihn(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(l7(this),t,...n);return L7e.set(r,t.sort?t.sort():[t]),$g(r)}:Shn().includes(e)?function(...t){return e.apply(l7(this),t),$g(D7e.get(this))}:function(...t){return $g(e.apply(l7(this),t))}}function Ohn(e){return typeof e=="function"?Ihn(e):(e instanceof IDBTransaction&&Ahn(e),Ehn(e,xhn())?new Proxy(e,Bq):e)}function $g(e){if(e instanceof IDBRequest)return Thn(e);if(u7.has(e))return u7.get(e);const t=Ohn(e);return t!==e&&(u7.set(e,t),Nne.set(t,e)),t}const l7=e=>Nne.get(e);function Phn(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(e,t),a=$g(o);return r&&o.addEventListener("upgradeneeded",u=>{r($g(o.result),u.oldVersion,u.newVersion,$g(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const khn=["get","getKey","getAll","getAllKeys","count"],$hn=["put","add","delete","clear"],c7=new Map;function fve(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(c7.get(t))return c7.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=$hn.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||khn.includes(n)))return;const s=async function(o,...a){const u=this.transaction(o,i?"readwrite":"readonly");let l=u.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),i&&u.done]))[0]};return c7.set(t,s),s}Chn(e=>({...e,get:(t,n,r)=>fve(t,n)||e.get(t,n,r),has:(t,n)=>!!fve(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rhn{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Nhn(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Nhn(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const jq="@firebase/app",dve="0.9.24";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uv=new k5("@firebase/app"),Dhn="@firebase/app-compat",Lhn="@firebase/analytics-compat",Mhn="@firebase/analytics",Fhn="@firebase/app-check-compat",Bhn="@firebase/app-check",jhn="@firebase/auth",zhn="@firebase/auth-compat",Uhn="@firebase/database",Vhn="@firebase/database-compat",Hhn="@firebase/functions",qhn="@firebase/functions-compat",Whn="@firebase/installations",Ghn="@firebase/installations-compat",Yhn="@firebase/messaging",Khn="@firebase/messaging-compat",Xhn="@firebase/performance",Qhn="@firebase/performance-compat",Jhn="@firebase/remote-config",Zhn="@firebase/remote-config-compat",epn="@firebase/storage",tpn="@firebase/storage-compat",npn="@firebase/firestore",rpn="@firebase/firestore-compat",ipn="firebase",spn="10.7.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zq="[DEFAULT]",opn={[jq]:"fire-core",[Dhn]:"fire-core-compat",[Mhn]:"fire-analytics",[Lhn]:"fire-analytics-compat",[Bhn]:"fire-app-check",[Fhn]:"fire-app-check-compat",[jhn]:"fire-auth",[zhn]:"fire-auth-compat",[Uhn]:"fire-rtdb",[Vhn]:"fire-rtdb-compat",[Hhn]:"fire-fn",[qhn]:"fire-fn-compat",[Whn]:"fire-iid",[Ghn]:"fire-iid-compat",[Yhn]:"fire-fcm",[Khn]:"fire-fcm-compat",[Xhn]:"fire-perf",[Qhn]:"fire-perf-compat",[Jhn]:"fire-rc",[Zhn]:"fire-rc-compat",[epn]:"fire-gcs",[tpn]:"fire-gcs-compat",[npn]:"fire-fst",[rpn]:"fire-fst-compat","fire-js":"fire-js",[ipn]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZL=new Map,Uq=new Map;function apn(e,t){try{e.container.addComponent(t)}catch(n){uv.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Bp(e){const t=e.name;if(Uq.has(t))return uv.debug(`There were multiple attempts to register component ${t}.`),!1;Uq.set(t,e);for(const n of ZL.values())apn(n,e);return!0}function yx(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const upn={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Rg=new gx("app","Firebase",upn);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lpn{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Zd("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Rg.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kv=spn;function M7e(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:zq,automaticDataCollectionEnabled:!1},t),i=r.name;if(typeof i!="string"||!i)throw Rg.create("bad-app-name",{appName:String(i)});if(n||(n=R7e()),!n)throw Rg.create("no-options");const s=ZL.get(i);if(s){if(nC(n,s.options)&&nC(r,s.config))return s;throw Rg.create("duplicate-app",{appName:i})}const o=new yhn(i);for(const u of Uq.values())o.addComponent(u);const a=new lpn(n,r,o);return ZL.set(i,a),a}function Dne(e=zq){const t=ZL.get(e);if(!t&&e===zq&&R7e())return M7e();if(!t)throw Rg.create("no-app",{appName:e});return t}function of(e,t,n){var r;let i=(r=opn[e])!==null&&r!==void 0?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${t}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),uv.warn(a.join(" "));return}Bp(new Zd(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cpn="firebase-heartbeat-database",fpn=1,rC="firebase-heartbeat-store";let f7=null;function F7e(){return f7||(f7=Phn(cpn,fpn,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore(rC)}}}).catch(e=>{throw Rg.create("idb-open",{originalErrorMessage:e.message})})),f7}async function dpn(e){try{return await(await F7e()).transaction(rC).objectStore(rC).get(B7e(e))}catch(t){if(t instanceof yh)uv.warn(t.message);else{const n=Rg.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});uv.warn(n.message)}}}async function hve(e,t){try{const r=(await F7e()).transaction(rC,"readwrite");await r.objectStore(rC).put(t,B7e(e)),await r.done}catch(n){if(n instanceof yh)uv.warn(n.message);else{const r=Rg.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});uv.warn(r.message)}}}function B7e(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hpn=1024,ppn=30*24*60*60*1e3;class mpn{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new ypn(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=pve();if(!(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=ppn}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var t;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=pve(),{heartbeatsToSend:r,unsentEntries:i}=gpn(this._heartbeatsCache.heartbeats),s=JL(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function pve(){return new Date().toISOString().substring(0,10)}function gpn(e,t=hpn){const n=[];let r=e.slice();for(const i of e){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),mve(n)>t){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),mve(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class ypn{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Rne()?ehn().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await dpn(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return hve(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return hve(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function mve(e){return JL(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vpn(e){Bp(new Zd("platform-logger",t=>new Rhn(t),"PRIVATE")),Bp(new Zd("heartbeat",t=>new mpn(t),"PRIVATE")),of(jq,dve,e),of(jq,dve,"esm2017"),of("fire-js","")}vpn("");var _pn="firebase",bpn="10.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */of(_pn,bpn,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j7e="firebasestorage.googleapis.com",z7e="storageBucket",wpn=2*60*1e3,Epn=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi extends yh{constructor(t,n,r=0){super(d7(t),`Firebase Storage: ${n} (${d7(t)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Mi.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return d7(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Di;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Di||(Di={}));function d7(e){return"storage/"+e}function Lne(){const e="An unknown error occurred, please check the error payload for server response.";return new Mi(Di.UNKNOWN,e)}function xpn(e){return new Mi(Di.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function Spn(e){return new Mi(Di.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Tpn(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Mi(Di.UNAUTHENTICATED,e)}function Apn(){return new Mi(Di.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Cpn(e){return new Mi(Di.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function Ipn(){return new Mi(Di.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Opn(){return new Mi(Di.CANCELED,"User canceled the upload/download.")}function Ppn(e){return new Mi(Di.INVALID_URL,"Invalid URL '"+e+"'.")}function kpn(e){return new Mi(Di.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function $pn(){return new Mi(Di.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+z7e+"' property when initializing the app?")}function Rpn(){return new Mi(Di.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Npn(){return new Mi(Di.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Dpn(e){return new Mi(Di.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Vq(e){return new Mi(Di.INVALID_ARGUMENT,e)}function U7e(){return new Mi(Di.APP_DELETED,"The Firebase app was deleted.")}function Lpn(e){return new Mi(Di.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function x2(e,t){return new Mi(Di.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function kS(e){throw new Mi(Di.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let r;try{r=Qu.makeFromUrl(t,n)}catch{return new Qu(t,"")}if(r.path==="")return r;throw kpn(t)}static makeFromUrl(t,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(b){b.path.charAt(b.path.length-1)==="/"&&(b.path_=b.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),u={bucket:1,path:3};function l(b){b.path_=decodeURIComponent(b.path)}const c="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",h=new RegExp(`^https?://${f}/${c}/b/${i}/o${d}`,"i"),p={bucket:1,path:3},m=n===j7e?"(?:storage.googleapis.com|storage.cloud.google.com)":n,g="([^?#]*)",y=new RegExp(`^https?://${m}/${i}/${g}`,"i"),_=[{regex:a,indices:u,postModify:s},{regex:h,indices:p,postModify:l},{regex:y,indices:{bucket:1,path:2},postModify:l}];for(let b=0;b<_.length;b++){const E=_[b],w=E.regex.exec(t);if(w){const x=w[E.indices.bucket];let S=w[E.indices.path];S||(S=""),r=new Qu(x,S),E.postModify(r);break}}if(r==null)throw Ppn(t);return r}}class Mpn{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fpn(e,t,n){let r=1,i=null,s=null,o=!1,a=0;function u(){return a===2}let l=!1;function c(...g){l||(l=!0,t.apply(null,g))}function f(g){i=setTimeout(()=>{i=null,e(h,u())},g)}function d(){s&&clearTimeout(s)}function h(g,...y){if(l){d();return}if(g){d(),c.call(null,g,...y);return}if(u()||o){d(),c.call(null,g,...y);return}r<64&&(r*=2);let _;a===1?(a=2,_=0):_=(r+Math.random())*1e3,f(_)}let p=!1;function m(g){p||(p=!0,d(),!l&&(i!==null?(g||(a=2),clearTimeout(i),f(0)):g||(a=1)))}return f(0),s=setTimeout(()=>{o=!0,m(!0)},n),m}function Bpn(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jpn(e){return e!==void 0}function zpn(e){return typeof e=="object"&&!Array.isArray(e)}function Mne(e){return typeof e=="string"||e instanceof String}function gve(e){return Fne()&&e instanceof Blob}function Fne(){return typeof Blob<"u"}function yve(e,t,n,r){if(r<t)throw Vq(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw Vq(`Invalid value for '${e}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bne(e,t,n){let r=t;return n==null&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function V7e(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){const i=t(r)+"="+t(e[r]);n=n+i+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var w1;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(w1||(w1={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Upn(e,t){const n=e>=500&&e<600,i=[408,429].indexOf(e)!==-1,s=t.indexOf(e)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vpn{constructor(t,n,r,i,s,o,a,u,l,c,f,d=!0){this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=u,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=f,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((h,p)=>{this.resolve_=h,this.reject_=p,this.start_()})}start_(){const t=(r,i)=>{if(i){r(!1,new fk(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const u=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,l)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===w1.NO_ERROR,u=s.getStatus();if(!a||Upn(u,this.additionalRetryCodes_)&&this.retry){const c=s.getErrorCode()===w1.ABORT;r(!1,new fk(!1,null,c));return}const l=this.successCodes_.indexOf(u)!==-1;r(!0,new fk(l,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(a,a.getResponse());jpn(u)?s(u):s()}catch(u){o(u)}else if(a!==null){const u=Lne();u.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,u)):o(u)}else if(i.canceled){const u=this.appDelete_?U7e():Opn();o(u)}else{const u=Ipn();o(u)}};this.canceled_?n(!1,new fk(!1,null,!0)):this.backoffId_=Fpn(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&Bpn(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class fk{constructor(t,n,r){this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}}function Hpn(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function qpn(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function Wpn(e,t){t&&(e["X-Firebase-GMPID"]=t)}function Gpn(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function Ypn(e,t,n,r,i,s,o=!0){const a=V7e(e.urlParams),u=e.url+a,l=Object.assign({},e.headers);return Wpn(l,t),Hpn(l,n),qpn(l,s),Gpn(l,r),new Vpn(u,e.method,l,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kpn(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Xpn(...e){const t=Kpn();if(t!==void 0){const n=new t;for(let r=0;r<e.length;r++)n.append(e[r]);return n.getBlob()}else{if(Fne())return new Blob(e);throw new Mi(Di.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function Qpn(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jpn(e){if(typeof atob>"u")throw Dpn("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gd={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class h7{constructor(t,n){this.data=t,this.contentType=n||null}}function Zpn(e,t){switch(e){case gd.RAW:return new h7(H7e(t));case gd.BASE64:case gd.BASE64URL:return new h7(q7e(e,t));case gd.DATA_URL:return new h7(tmn(t),nmn(t))}throw Lne()}function H7e(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<e.length-1&&(e.charCodeAt(n+1)&64512)===56320))t.push(239,191,189);else{const s=r,o=e.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(t)}function emn(e){let t;try{t=decodeURIComponent(e)}catch{throw x2(gd.DATA_URL,"Malformed data URL.")}return H7e(t)}function q7e(e,t){switch(e){case gd.BASE64:{const i=t.indexOf("-")!==-1,s=t.indexOf("_")!==-1;if(i||s)throw x2(e,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case gd.BASE64URL:{const i=t.indexOf("+")!==-1,s=t.indexOf("/")!==-1;if(i||s)throw x2(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=Jpn(t)}catch(i){throw i.message.includes("polyfill")?i:x2(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class W7e{constructor(t){this.base64=!1,this.contentType=null;const n=t.match(/^data:([^,]+)?,/);if(n===null)throw x2(gd.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=rmn(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)}}function tmn(e){const t=new W7e(e);return t.base64?q7e(gd.BASE64,t.rest):emn(t.rest)}function nmn(e){return new W7e(e).contentType}function rmn(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{constructor(t,n){let r=0,i="";gve(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(t,n){if(gve(this.data_)){const r=this.data_,i=Qpn(r,t,n);return i===null?null:new jm(i)}else{const r=new Uint8Array(this.data_.buffer,t,n-t);return new jm(r,!0)}}static getBlob(...t){if(Fne()){const n=t.map(r=>r instanceof jm?r.data_:r);return new jm(Xpn.apply(null,n))}else{const n=t.map(o=>Mne(o)?Zpn(gd.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new jm(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G7e(e){let t;try{t=JSON.parse(e)}catch{return null}return zpn(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function imn(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function smn(e,t){const n=t.split("/").filter(r=>r.length>0).join("/");return e.length===0?n:e+"/"+n}function Y7e(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function omn(e,t){return t}class ca{constructor(t,n,r,i){this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||omn}}let dk=null;function amn(e){return!Mne(e)||e.length<2?e:Y7e(e)}function K7e(){if(dk)return dk;const e=[];e.push(new ca("bucket")),e.push(new ca("generation")),e.push(new ca("metageneration")),e.push(new ca("name","fullPath",!0));function t(s,o){return amn(o)}const n=new ca("name");n.xform=t,e.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new ca("size");return i.xform=r,e.push(i),e.push(new ca("timeCreated")),e.push(new ca("updated")),e.push(new ca("md5Hash",null,!0)),e.push(new ca("cacheControl",null,!0)),e.push(new ca("contentDisposition",null,!0)),e.push(new ca("contentEncoding",null,!0)),e.push(new ca("contentLanguage",null,!0)),e.push(new ca("contentType",null,!0)),e.push(new ca("metadata","customMetadata",!0)),dk=e,dk}function umn(e,t){function n(){const r=e.bucket,i=e.fullPath,s=new Qu(r,i);return t._makeStorageReference(s)}Object.defineProperty(e,"ref",{get:n})}function lmn(e,t,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,t[o.server])}return umn(r,e),r}function X7e(e,t,n){const r=G7e(t);return r===null?null:lmn(e,r,n)}function cmn(e,t,n,r){const i=G7e(t);if(i===null||!Mne(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(l=>{const c=e.bucket,f=e.fullPath,d="/b/"+o(c)+"/o/"+o(f),h=Bne(d,n,r),p=V7e({alt:"media",token:l});return h+p})[0]}function fmn(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const s=t[i];s.writable&&(n[s.server]=e[s.local])}return JSON.stringify(n)}class Q7e{constructor(t,n,r,i){this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J7e(e){if(!e)throw Lne()}function dmn(e,t){function n(r,i){const s=X7e(e,i,t);return J7e(s!==null),s}return n}function hmn(e,t){function n(r,i){const s=X7e(e,i,t);return J7e(s!==null),cmn(s,i,e.host,e._protocol)}return n}function Z7e(e){function t(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=Apn():i=Tpn():n.getStatus()===402?i=Spn(e.bucket):n.getStatus()===403?i=Cpn(e.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return t}function pmn(e){const t=Z7e(e);function n(r,i){let s=t(r,i);return r.getStatus()===404&&(s=xpn(e.path)),s.serverResponse=i.serverResponse,s}return n}function mmn(e,t,n){const r=t.fullServerUrl(),i=Bne(r,e.host,e._protocol),s="GET",o=e.maxOperationRetryTime,a=new Q7e(i,s,hmn(e,n),o);return a.errorHandler=pmn(t),a}function gmn(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function ymn(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=gmn(null,t)),r}function vmn(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let _="";for(let b=0;b<2;b++)_=_+Math.random().toString().slice(2);return _}const u=a();o["Content-Type"]="multipart/related; boundary="+u;const l=ymn(t,r,i),c=fmn(l,n),f="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+c+`\r
--`+u+`\r
Content-Type: `+l.contentType+`\r
\r
`,d=`\r
--`+u+"--",h=jm.getBlob(f,r,d);if(h===null)throw Rpn();const p={name:l.fullPath},m=Bne(s,e.host,e._protocol),g="POST",y=e.maxUploadRetryTime,v=new Q7e(m,g,dmn(e,n),y);return v.urlParams=p,v.headers=o,v.body=h.uploadData(),v.errorHandler=Z7e(t),v}class _mn{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=w1.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=w1.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=w1.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,n,r,i){if(this.sent_)throw kS("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,t,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw kS("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw kS("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw kS("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw kS("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class bmn extends _mn{initXhr(){this.xhr_.responseType="text"}}function eze(){return new bmn}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lv{constructor(t,n){this._service=t,n instanceof Qu?this._location=n:this._location=Qu.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new lv(t,n)}get root(){const t=new Qu(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Y7e(this._location.path)}get storage(){return this._service}get parent(){const t=imn(this._location.path);if(t===null)return null;const n=new Qu(this._location.bucket,t);return new lv(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw Lpn(t)}}function wmn(e,t,n){e._throwIfRoot("uploadBytes");const r=vmn(e.storage,e._location,K7e(),new jm(t,!0),n);return e.storage.makeRequestWithTokens(r,eze).then(i=>({metadata:i,ref:e}))}function Emn(e){e._throwIfRoot("getDownloadURL");const t=mmn(e.storage,e._location,K7e());return e.storage.makeRequestWithTokens(t,eze).then(n=>{if(n===null)throw Npn();return n})}function xmn(e,t){const n=smn(e._location.path,t),r=new Qu(e._location.bucket,n);return new lv(e.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Smn(e){return/^[A-Za-z]+:\/\//.test(e)}function Tmn(e,t){return new lv(e,t)}function tze(e,t){if(e instanceof jne){const n=e;if(n._bucket==null)throw $pn();const r=new lv(n,n._bucket);return t!=null?tze(r,t):r}else return t!==void 0?xmn(e,t):e}function Amn(e,t){if(t&&Smn(t)){if(e instanceof jne)return Tmn(e,t);throw Vq("To use ref(service, url), the first argument must be a Storage instance.")}else return tze(e,t)}function vve(e,t){const n=t==null?void 0:t[z7e];return n==null?null:Qu.makeFromBucketSpec(n,e)}function Cmn(e,t,n,r={}){e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken=typeof i=="string"?i:Kdn(i,e.app.options.projectId))}class jne{constructor(t,n,r,i,s){this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=j7e,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=wpn,this._maxUploadRetryTime=Epn,this._requests=new Set,i!=null?this._bucket=Qu.makeFromBucketSpec(i,this._host):this._bucket=vve(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=Qu.makeFromBucketSpec(this._url,t):this._bucket=vve(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){yve("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){yve("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new lv(this,t)}_makeRequest(t,n,r,i,s=!0){if(this._deleted)return new Mpn(U7e());{const o=Ypn(t,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(t,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,r,i).getPromise()}}const _ve="@firebase/storage",bve="0.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nze="storage";function Imn(e,t,n){return e=Eo(e),wmn(e,t,n)}function Omn(e){return e=Eo(e),Emn(e)}function wve(e,t){return e=Eo(e),Amn(e,t)}function Eve(e=Dne(),t){e=Eo(e);const r=yx(e,nze).getImmediate({identifier:t}),i=Ydn("storage");return i&&Pmn(r,...i),r}function Pmn(e,t,n,r={}){Cmn(e,t,n,r)}function kmn(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new jne(n,r,i,t,Kv)}function $mn(){Bp(new Zd(nze,kmn,"PUBLIC").setMultipleInstances(!0)),of(_ve,bve,""),of(_ve,bve,"esm2017")}$mn();var Rmn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ot,zne=zne||{},Zt=Rmn||self;function $5(e){var t=typeof e;return t=t!="object"?t:e?Array.isArray(e)?"array":t:"null",t=="array"||t=="object"&&typeof e.length=="number"}function rO(e){var t=typeof e;return t=="object"&&e!=null||t=="function"}function Nmn(e){return Object.prototype.hasOwnProperty.call(e,p7)&&e[p7]||(e[p7]=++Dmn)}var p7="closure_uid_"+(1e9*Math.random()>>>0),Dmn=0;function Lmn(e,t,n){return e.call.apply(e.bind,arguments)}function Mmn(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),e.apply(t,i)}}return function(){return e.apply(t,arguments)}}function Qo(e,t,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Qo=Lmn:Qo=Mmn,Qo.apply(null,arguments)}function hk(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),e.apply(this,r)}}function Xs(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return t.prototype[i].apply(r,o)}}function G0(){this.s=this.s,this.o=this.o}var Fmn=0;G0.prototype.s=!1;G0.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),Fmn!=0)&&Nmn(this)};G0.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const rze=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(typeof e=="string")return typeof t!="string"||t.length!=1?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function Une(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function xve(e,t){for(let n=1;n<arguments.length;n++){const r=arguments[n];if($5(r)){const i=e.length||0,s=r.length||0;e.length=i+s;for(let o=0;o<s;o++)e[i+o]=r[o]}else e.push(r)}}function Jo(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Jo.prototype.h=function(){this.defaultPrevented=!0};var Bmn=function(){if(!Zt.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const n=()=>{};Zt.addEventListener("test",n,t),Zt.removeEventListener("test",n,t)}catch{}return e}();function iC(e){return/^[\s\xa0]*$/.test(e)}function R5(){var e=Zt.navigator;return e&&(e=e.userAgent)?e:""}function fd(e){return R5().indexOf(e)!=-1}function Vne(e){return Vne[" "](e),e}Vne[" "]=function(){};function jmn(e,t){var n=$gn;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}var zmn=fd("Opera"),lE=fd("Trident")||fd("MSIE"),ize=fd("Edge"),Hq=ize||lE,sze=fd("Gecko")&&!(R5().toLowerCase().indexOf("webkit")!=-1&&!fd("Edge"))&&!(fd("Trident")||fd("MSIE"))&&!fd("Edge"),Umn=R5().toLowerCase().indexOf("webkit")!=-1&&!fd("Edge");function oze(){var e=Zt.document;return e?e.documentMode:void 0}var qq;e:{var m7="",g7=function(){var e=R5();if(sze)return/rv:([^\);]+)(\)|;)/.exec(e);if(ize)return/Edge\/([\d\.]+)/.exec(e);if(lE)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e);if(Umn)return/WebKit\/(\S+)/.exec(e);if(zmn)return/(?:Version)[ \/]?(\S+)/.exec(e)}();if(g7&&(m7=g7?g7[1]:""),lE){var y7=oze();if(y7!=null&&y7>parseFloat(m7)){qq=String(y7);break e}}qq=m7}var Wq;if(Zt.document&&lE){var Sve=oze();Wq=Sve||parseInt(qq,10)||void 0}else Wq=void 0;var Vmn=Wq;function sC(e,t){if(Jo.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(sze){e:{try{Vne(t.nodeName);var i=!0;break e}catch{}i=!1}i||(t=null)}}else n=="mouseover"?t=e.fromElement:n=="mouseout"&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=e.clientX!==void 0?e.clientX:e.pageX,this.clientY=e.clientY!==void 0?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=typeof e.pointerType=="string"?e.pointerType:Hmn[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&sC.$.h.call(this)}}Xs(sC,Jo);var Hmn={2:"touch",3:"pen",4:"mouse"};sC.prototype.h=function(){sC.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var iO="closure_listenable_"+(1e6*Math.random()|0),qmn=0;function Wmn(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++qmn,this.fa=this.ia=!1}function N5(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function Hne(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function Gmn(e,t){for(const n in e)t.call(void 0,e[n],n,e)}function aze(e){const t={};for(const n in e)t[n]=e[n];return t}const Tve="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function uze(e,t){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)e[n]=r[n];for(let s=0;s<Tve.length;s++)n=Tve[s],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function D5(e){this.src=e,this.g={},this.h=0}D5.prototype.add=function(e,t,n,r,i){var s=e.toString();e=this.g[s],e||(e=this.g[s]=[],this.h++);var o=Yq(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):(t=new Wmn(t,this.src,s,!!r,i),t.ia=n,e.push(t)),t};function Gq(e,t){var n=t.type;if(n in e.g){var r=e.g[n],i=rze(r,t),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(N5(t),e.g[n].length==0&&(delete e.g[n],e.h--))}}function Yq(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.fa&&s.listener==t&&s.capture==!!n&&s.la==r)return i}return-1}var qne="closure_lm_"+(1e6*Math.random()|0),v7={};function lze(e,t,n,r,i){if(r&&r.once)return fze(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)lze(e,t[s],n,r,i);return null}return n=Yne(n),e&&e[iO]?e.O(t,n,rO(r)?!!r.capture:!!r,i):cze(e,t,n,!1,r,i)}function cze(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=rO(i)?!!i.capture:!!i,a=Gne(e);if(a||(e[qne]=a=new D5(e)),n=a.add(t,n,r,o,s),n.proxy)return n;if(r=Ymn(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Bmn||(i=o),i===void 0&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(hze(t.toString()),r);else if(e.addListener&&e.removeListener)e.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function Ymn(){function e(n){return t.call(e.src,e.listener,n)}const t=Kmn;return e}function fze(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)fze(e,t[s],n,r,i);return null}return n=Yne(n),e&&e[iO]?e.P(t,n,rO(r)?!!r.capture:!!r,i):cze(e,t,n,!0,r,i)}function dze(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)dze(e,t[s],n,r,i);else r=rO(r)?!!r.capture:!!r,n=Yne(n),e&&e[iO]?(e=e.i,t=String(t).toString(),t in e.g&&(s=e.g[t],n=Yq(s,n,r,i),-1<n&&(N5(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete e.g[t],e.h--)))):e&&(e=Gne(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Yq(t,n,r,i)),(n=-1<e?t[e]:null)&&Wne(n))}function Wne(e){if(typeof e!="number"&&e&&!e.fa){var t=e.src;if(t&&t[iO])Gq(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(hze(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Gne(t))?(Gq(n,e),n.h==0&&(n.src=null,t[qne]=null)):N5(e)}}}function hze(e){return e in v7?v7[e]:v7[e]="on"+e}function Kmn(e,t){if(e.fa)e=!0;else{t=new sC(t,this);var n=e.listener,r=e.la||e.src;e.ia&&Wne(e),e=n.call(r,t)}return e}function Gne(e){return e=e[qne],e instanceof D5?e:null}var _7="__closure_events_fn_"+(1e9*Math.random()>>>0);function Yne(e){return typeof e=="function"?e:(e[_7]||(e[_7]=function(t){return e.handleEvent(t)}),e[_7])}function Ws(){G0.call(this),this.i=new D5(this),this.S=this,this.J=null}Xs(Ws,G0);Ws.prototype[iO]=!0;Ws.prototype.removeEventListener=function(e,t,n,r){dze(this,e,t,n,r)};function vo(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,typeof t=="string")t=new Jo(t,e);else if(t instanceof Jo)t.target=t.target||e;else{var i=t;t=new Jo(r,e),uze(t,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=pk(o,r,!0,t)&&i}if(o=t.g=e,i=pk(o,r,!0,t)&&i,i=pk(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)o=t.g=n[s],i=pk(o,r,!1,t)&&i}Ws.prototype.N=function(){if(Ws.$.N.call(this),this.i){var e=this.i,t;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)N5(n[r]);delete e.g[t],e.h--}}this.J=null};Ws.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)};Ws.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};function pk(e,t,n,r){if(t=e.i.g[String(t)],!t)return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,u=o.la||o.src;o.ia&&Gq(e.i,o),i=a.call(u,r)!==!1&&i}}return i&&!r.defaultPrevented}var Kne=Zt.JSON.stringify;class Xmn{constructor(t,n){this.i=t,this.j=n,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}function Qmn(){var e=Xne;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}class Jmn{constructor(){this.h=this.g=null}add(t,n){const r=pze.get();r.set(t,n),this.h?this.h.next=r:this.g=r,this.h=r}}var pze=new Xmn(()=>new Zmn,e=>e.reset());class Zmn{constructor(){this.next=this.g=this.h=null}set(t,n){this.h=t,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function egn(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function tgn(e){Zt.setTimeout(()=>{throw e},0)}let oC,aC=!1,Xne=new Jmn,mze=()=>{const e=Zt.Promise.resolve(void 0);oC=()=>{e.then(ngn)}};var ngn=()=>{for(var e;e=Qmn();){try{e.h.call(e.g)}catch(n){tgn(n)}var t=pze;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}aC=!1};function L5(e,t){Ws.call(this),this.h=e||1,this.g=t||Zt,this.j=Qo(this.qb,this),this.l=Date.now()}Xs(L5,Ws);ot=L5.prototype;ot.ga=!1;ot.T=null;ot.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),vo(this,"tick"),this.ga&&(Qne(this),this.start()))}};ot.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Qne(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}ot.N=function(){L5.$.N.call(this),Qne(this),delete this.g};function Jne(e,t,n){if(typeof e=="function")n&&(e=Qo(e,n));else if(e&&typeof e.handleEvent=="function")e=Qo(e.handleEvent,e);else throw Error("Invalid listener argument");return 2147483647<Number(t)?-1:Zt.setTimeout(e,t||0)}function gze(e){e.g=Jne(()=>{e.g=null,e.i&&(e.i=!1,gze(e))},e.j);const t=e.h;e.h=null,e.m.apply(null,t)}class rgn extends G0{constructor(t,n){super(),this.m=t,this.j=n,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:gze(this)}N(){super.N(),this.g&&(Zt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function uC(e){G0.call(this),this.h=e,this.g={}}Xs(uC,G0);var Ave=[];function yze(e,t,n,r){Array.isArray(n)||(n&&(Ave[0]=n.toString()),n=Ave);for(var i=0;i<n.length;i++){var s=lze(t,n[i],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function vze(e){Hne(e.g,function(t,n){this.g.hasOwnProperty(n)&&Wne(t)},e),e.g={}}uC.prototype.N=function(){uC.$.N.call(this),vze(this)};uC.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function M5(){this.g=!0}M5.prototype.Ea=function(){this.g=!1};function ign(e,t,n,r,i,s){e.info(function(){if(e.g)if(s)for(var o="",a=s.split("&"),u=0;u<a.length;u++){var l=a[u].split("=");if(1<l.length){var c=l[0];l=l[1];var f=c.split("_");o=2<=f.length&&f[1]=="type"?o+(c+"="+l+"&"):o+(c+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+`
`+n+`
`+o})}function sgn(e,t,n,r,i,s,o){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+`
`+n+`
`+s+" "+o})}function fb(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+agn(e,n)+(r?" "+r:"")})}function ogn(e,t){e.info(function(){return"TIMEOUT: "+t})}M5.prototype.info=function(){};function agn(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n){for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return Kne(n)}catch{return t}}var Xv={},Cve=null;function F5(){return Cve=Cve||new Ws}Xv.Ta="serverreachability";function _ze(e){Jo.call(this,Xv.Ta,e)}Xs(_ze,Jo);function lC(e){const t=F5();vo(t,new _ze(t))}Xv.STAT_EVENT="statevent";function bze(e,t){Jo.call(this,Xv.STAT_EVENT,e),this.stat=t}Xs(bze,Jo);function ba(e){const t=F5();vo(t,new bze(t,e))}Xv.Ua="timingevent";function wze(e,t){Jo.call(this,Xv.Ua,e),this.size=t}Xs(wze,Jo);function sO(e,t){if(typeof e!="function")throw Error("Fn must not be null and must be a function");return Zt.setTimeout(function(){e()},t)}var B5={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Eze={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Zne(){}Zne.prototype.h=null;function Ive(e){return e.h||(e.h=e.i())}function xze(){}var oO={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function ere(){Jo.call(this,"d")}Xs(ere,Jo);function tre(){Jo.call(this,"c")}Xs(tre,Jo);var Kq;function j5(){}Xs(j5,Zne);j5.prototype.g=function(){return new XMLHttpRequest};j5.prototype.i=function(){return{}};Kq=new j5;function aO(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new uC(this),this.P=ugn,e=Hq?125:void 0,this.V=new L5(e),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Sze}function Sze(){this.i=null,this.g="",this.h=!1}var ugn=45e3,Tze={},Xq={};ot=aO.prototype;ot.setTimeout=function(e){this.P=e};function Qq(e,t,n){e.L=1,e.A=U5(jp(t)),e.u=n,e.S=!0,Aze(e,null)}function Aze(e,t){e.G=Date.now(),uO(e),e.B=jp(e.A);var n=e.B,r=e.W;Array.isArray(r)||(r=[String(r)]),Nze(n.i,"t",r),e.o=0,n=e.l.J,e.h=new Sze,e.g=tUe(e.l,n?t:null,!e.u),0<e.O&&(e.M=new rgn(Qo(e.Pa,e,e.g),e.O)),yze(e.U,e.g,"readystatechange",e.nb),t=e.I?aze(e.I):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.B,e.v,e.u,t)):(e.v="GET",e.g.ha(e.B,e.v,null,t)),lC(),ign(e.j,e.v,e.B,e.m,e.W,e.u)}ot.nb=function(e){e=e.target;const t=this.M;t&&yd(e)==3?t.l():this.Pa(e)};ot.Pa=function(e){try{if(e==this.g)e:{const c=yd(this.g);var t=this.g.Ia();const f=this.g.da();if(!(3>c)&&(c!=3||Hq||this.g&&(this.h.h||this.g.ja()||$ve(this.g)))){this.J||c!=4||t==7||(t==8||0>=f?lC(3):lC(2)),z5(this);var n=this.g.da();this.ca=n;t:if(Cze(this)){var r=$ve(this.g);e="";var i=r.length,s=yd(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){t1(this),S2(this);var o="";break t}this.h.i=new Zt.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:s&&t==i-1});r.length=0,this.h.g+=e,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,sgn(this.j,this.v,this.B,this.m,this.W,c,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,u=this.g;if((a=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!iC(a)){var l=a;break t}}l=null}if(n=l)fb(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Jq(this,n);else{this.i=!1,this.s=3,ba(12),t1(this),S2(this);break e}}this.S?(Ize(this,c,o),Hq&&this.i&&c==3&&(yze(this.U,this.V,"tick",this.mb),this.V.start())):(fb(this.j,this.m,o,null),Jq(this,o)),c==4&&t1(this),this.i&&!this.J&&(c==4?Qze(this.l,this):(this.i=!1,uO(this)))}else Ogn(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.s=3,ba(12)):(this.s=0,ba(13)),t1(this),S2(this)}}}catch{}finally{}};function Cze(e){return e.g?e.v=="GET"&&e.L!=2&&e.l.Ha:!1}function Ize(e,t,n){let r=!0,i;for(;!e.J&&e.o<n.length;)if(i=lgn(e,n),i==Xq){t==4&&(e.s=4,ba(14),r=!1),fb(e.j,e.m,null,"[Incomplete Response]");break}else if(i==Tze){e.s=4,ba(15),fb(e.j,e.m,n,"[Invalid Chunk]"),r=!1;break}else fb(e.j,e.m,i,null),Jq(e,i);Cze(e)&&e.o!=0&&(e.h.g=e.h.g.slice(e.o),e.o=0),t!=4||n.length!=0||e.h.h||(e.s=1,ba(16),r=!1),e.i=e.i&&r,r?0<n.length&&!e.ba&&(e.ba=!0,t=e.l,t.g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),are(t),t.M=!0,ba(11))):(fb(e.j,e.m,n,"[Invalid Chunked Response]"),t1(e),S2(e))}ot.mb=function(){if(this.g){var e=yd(this.g),t=this.g.ja();this.o<t.length&&(z5(this),Ize(this,e,t),this.i&&e!=4&&uO(this))}};function lgn(e,t){var n=e.o,r=t.indexOf(`
`,n);return r==-1?Xq:(n=Number(t.substring(n,r)),isNaN(n)?Tze:(r+=1,r+n>t.length?Xq:(t=t.slice(r,r+n),e.o=r+n,t)))}ot.cancel=function(){this.J=!0,t1(this)};function uO(e){e.Y=Date.now()+e.P,Oze(e,e.P)}function Oze(e,t){if(e.C!=null)throw Error("WatchDog timer not null");e.C=sO(Qo(e.lb,e),t)}function z5(e){e.C&&(Zt.clearTimeout(e.C),e.C=null)}ot.lb=function(){this.C=null;const e=Date.now();0<=e-this.Y?(ogn(this.j,this.B),this.L!=2&&(lC(),ba(17)),t1(this),this.s=2,S2(this)):Oze(this,this.Y-e)};function S2(e){e.l.H==0||e.J||Qze(e.l,e)}function t1(e){z5(e);var t=e.M;t&&typeof t.sa=="function"&&t.sa(),e.M=null,Qne(e.V),vze(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function Jq(e,t){try{var n=e.l;if(n.H!=0&&(n.g==e||Zq(n.i,e))){if(!e.K&&Zq(n.i,e)&&n.H==3){try{var r=n.Ja.g.parse(t)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<e.G)nM(n),W5(n);else break e;ore(n),ba(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=sO(Qo(n.ib,n),6e3));if(1>=Mze(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else n1(n,11)}else if((e.K||n.g==e)&&nM(n),!iC(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){let l=i[t];if(n.V=l[0],l=l[1],n.H==2)if(l[0]=="c"){n.K=l[1],n.pa=l[2];const c=l[3];c!=null&&(n.ra=c,n.l.info("VER="+n.ra));const f=l[4];f!=null&&(n.Ga=f,n.l.info("SVER="+n.Ga));const d=l[5];d!=null&&typeof d=="number"&&0<d&&(r=1.5*d,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const p=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(p){var s=r.i;s.g||p.indexOf("spdy")==-1&&p.indexOf("quic")==-1&&p.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(nre(s,s.h),s.h=null))}if(r.F){const m=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;m&&(r.Da=m,Qr(r.I,r.F,m))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=e;if(r.wa=eUe(r,r.J?r.pa:null,r.Y),o.K){Fze(r.i,o);var a=o,u=r.L;u&&a.setTimeout(u),a.C&&(z5(a),uO(a)),r.g=o}else Kze(r);0<n.j.length&&G5(n)}else l[0]!="stop"&&l[0]!="close"||n1(n,7);else n.H==3&&(l[0]=="stop"||l[0]=="close"?l[0]=="stop"?n1(n,7):sre(n):l[0]!="noop"&&n.h&&n.h.Aa(l),n.A=0)}}lC(4)}catch{}}function cgn(e){if(e.Z&&typeof e.Z=="function")return e.Z();if(typeof Map<"u"&&e instanceof Map||typeof Set<"u"&&e instanceof Set)return Array.from(e.values());if(typeof e=="string")return e.split("");if($5(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}t=[],n=0;for(r in e)t[n++]=e[r];return t}function fgn(e){if(e.ta&&typeof e.ta=="function")return e.ta();if(!e.Z||typeof e.Z!="function"){if(typeof Map<"u"&&e instanceof Map)return Array.from(e.keys());if(!(typeof Set<"u"&&e instanceof Set)){if($5(e)||typeof e=="string"){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}function Pze(e,t){if(e.forEach&&typeof e.forEach=="function")e.forEach(t,void 0);else if($5(e)||typeof e=="string")Array.prototype.forEach.call(e,t,void 0);else for(var n=fgn(e),r=cgn(e),i=r.length,s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}var kze=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function dgn(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function E1(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof E1){this.h=e.h,eM(this,e.j),this.s=e.s,this.g=e.g,tM(this,e.m),this.l=e.l;var t=e.i,n=new cC;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),Ove(this,n),this.o=e.o}else e&&(t=String(e).match(kze))?(this.h=!1,eM(this,t[1]||"",!0),this.s=ET(t[2]||""),this.g=ET(t[3]||"",!0),tM(this,t[4]),this.l=ET(t[5]||"",!0),Ove(this,t[6]||"",!0),this.o=ET(t[7]||"")):(this.h=!1,this.i=new cC(null,this.h))}E1.prototype.toString=function(){var e=[],t=this.j;t&&e.push(xT(t,Pve,!0),":");var n=this.g;return(n||t=="file")&&(e.push("//"),(t=this.s)&&e.push(xT(t,Pve,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&e.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&e.push("/"),e.push(xT(n,n.charAt(0)=="/"?mgn:pgn,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",xT(n,ygn)),e.join("")};function jp(e){return new E1(e)}function eM(e,t,n){e.j=n?ET(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function tM(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Ove(e,t,n){t instanceof cC?(e.i=t,vgn(e.i,e.h)):(n||(t=xT(t,ggn)),e.i=new cC(t,e.h))}function Qr(e,t,n){e.i.set(t,n)}function U5(e){return Qr(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ET(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function xT(e,t,n){return typeof e=="string"?(e=encodeURI(e).replace(t,hgn),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function hgn(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(e&15).toString(16)}var Pve=/[#\/\?@]/g,pgn=/[#\?:]/g,mgn=/[#\?]/g,ggn=/[#\?@]/g,ygn=/#/g;function cC(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Y0(e){e.g||(e.g=new Map,e.h=0,e.i&&dgn(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}ot=cC.prototype;ot.add=function(e,t){Y0(this),this.i=null,e=vx(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this};function $ze(e,t){Y0(e),t=vx(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Rze(e,t){return Y0(e),t=vx(e,t),e.g.has(t)}ot.forEach=function(e,t){Y0(this),this.g.forEach(function(n,r){n.forEach(function(i){e.call(t,i,r,this)},this)},this)};ot.ta=function(){Y0(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let s=0;s<i.length;s++)n.push(t[r])}return n};ot.Z=function(e){Y0(this);let t=[];if(typeof e=="string")Rze(this,e)&&(t=t.concat(this.g.get(vx(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t};ot.set=function(e,t){return Y0(this),this.i=null,e=vx(this,e),Rze(this,e)&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this};ot.get=function(e,t){return e?(e=this.Z(e),0<e.length?String(e[0]):t):t};function Nze(e,t,n){$ze(e,t),0<n.length&&(e.i=null,e.g.set(vx(e,t),Une(n)),e.h+=n.length)}ot.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;o[r]!==""&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")};function vx(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function vgn(e,t){t&&!e.j&&(Y0(e),e.i=null,e.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&($ze(this,r),Nze(this,i,n))},e)),e.j=t}var _gn=class{constructor(e,t){this.g=e,this.map=t}};function Dze(e){this.l=e||bgn,Zt.PerformanceNavigationTiming?(e=Zt.performance.getEntriesByType("navigation"),e=0<e.length&&(e[0].nextHopProtocol=="hq"||e[0].nextHopProtocol=="h2")):e=!!(Zt.g&&Zt.g.Ka&&Zt.g.Ka()&&Zt.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var bgn=10;function Lze(e){return e.h?!0:e.g?e.g.size>=e.j:!1}function Mze(e){return e.h?1:e.g?e.g.size:0}function Zq(e,t){return e.h?e.h==t:e.g?e.g.has(t):!1}function nre(e,t){e.g?e.g.add(t):e.h=t}function Fze(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}Dze.prototype.cancel=function(){if(this.i=Bze(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const e of this.g.values())e.cancel();this.g.clear()}};function Bze(e){if(e.h!=null)return e.i.concat(e.h.F);if(e.g!=null&&e.g.size!==0){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return Une(e.i)}var wgn=class{stringify(e){return Zt.JSON.stringify(e,void 0)}parse(e){return Zt.JSON.parse(e,void 0)}};function Egn(){this.g=new wgn}function xgn(e,t,n){const r=n||"";try{Pze(e,function(i,s){let o=i;rO(i)&&(o=Kne(i)),t.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Sgn(e,t){const n=new M5;if(Zt.Image){const r=new Image;r.onload=hk(mk,n,r,"TestLoadImage: loaded",!0,t),r.onerror=hk(mk,n,r,"TestLoadImage: error",!1,t),r.onabort=hk(mk,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=hk(mk,n,r,"TestLoadImage: timeout",!1,t),Zt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}function mk(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch{}}function V5(e){this.l=e.ec||null,this.j=e.ob||!1}Xs(V5,Zne);V5.prototype.g=function(){return new H5(this.l,this.j)};V5.prototype.i=function(e){return function(){return e}}({});function H5(e,t){Ws.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=rre,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Xs(H5,Ws);var rre=0;ot=H5.prototype;ot.open=function(e,t){if(this.readyState!=rre)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,fC(this)};ot.send=function(e){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||Zt).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))};ot.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,lO(this)),this.readyState=rre};ot.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,fC(this)),this.g&&(this.readyState=3,fC(this),this.g)))if(this.responseType==="arraybuffer")e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Zt.ReadableStream<"u"&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;jze(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))};function jze(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}ot.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?lO(this):fC(this),this.readyState==3&&jze(this)}};ot.Za=function(e){this.g&&(this.response=this.responseText=e,lO(this))};ot.Ya=function(e){this.g&&(this.response=e,lO(this))};ot.ka=function(){this.g&&lO(this)};function lO(e){e.readyState=4,e.l=null,e.j=null,e.A=null,fC(e)}ot.setRequestHeader=function(e,t){this.v.append(e,t)};ot.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""};ot.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join(`\r
`)};function fC(e){e.onreadystatechange&&e.onreadystatechange.call(e)}Object.defineProperty(H5.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(e){this.m=e?"include":"same-origin"}});var Tgn=Zt.JSON.parse;function Li(e){Ws.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=zze,this.L=this.M=!1}Xs(Li,Ws);var zze="",Agn=/^https?$/i,Cgn=["POST","PUT"];ot=Li.prototype;ot.Oa=function(e){this.M=e};ot.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Kq.g(),this.C=this.u?Ive(this.u):Ive(Kq),this.g.onreadystatechange=Qo(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(s){kve(this,s);return}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const s of r.keys())n.set(s,r.get(s));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),i=Zt.FormData&&e instanceof Zt.FormData,!(0<=rze(Cgn,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Hze(this),0<this.B&&((this.L=Ign(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Qo(this.ua,this)):this.A=Jne(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){kve(this,s)}};function Ign(e){return lE&&typeof e.timeout=="number"&&e.ontimeout!==void 0}ot.ua=function(){typeof zne<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,vo(this,"timeout"),this.abort(8))};function kve(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Uze(e),q5(e)}function Uze(e){e.F||(e.F=!0,vo(e,"complete"),vo(e,"error"))}ot.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,vo(this,"complete"),vo(this,"abort"),q5(this))};ot.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),q5(this,!0)),Li.$.N.call(this)};ot.La=function(){this.s||(this.G||this.v||this.l?Vze(this):this.kb())};ot.kb=function(){Vze(this)};function Vze(e){if(e.h&&typeof zne<"u"&&(!e.C[1]||yd(e)!=4||e.da()!=2)){if(e.v&&yd(e)==4)Jne(e.La,0,e);else if(vo(e,"readystatechange"),yd(e)==4){e.h=!1;try{const o=e.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=o===0){var i=String(e.I).match(kze)[1]||null;!i&&Zt.self&&Zt.self.location&&(i=Zt.self.location.protocol.slice(0,-1)),r=!Agn.test(i?i.toLowerCase():"")}n=r}if(n)vo(e,"complete"),vo(e,"success");else{e.m=6;try{var s=2<yd(e)?e.g.statusText:""}catch{s=""}e.j=s+" ["+e.da()+"]",Uze(e)}}finally{q5(e)}}}}function q5(e,t){if(e.g){Hze(e);const n=e.g,r=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||vo(e,"ready");try{n.onreadystatechange=r}catch{}}}function Hze(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(Zt.clearTimeout(e.A),e.A=null)}ot.isActive=function(){return!!this.g};function yd(e){return e.g?e.g.readyState:0}ot.da=function(){try{return 2<yd(this)?this.g.status:-1}catch{return-1}};ot.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};ot.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&t.indexOf(e)==0&&(t=t.substring(e.length)),Tgn(t)}};function $ve(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case zze:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch{return null}}function Ogn(e){const t={};e=(e.g&&2<=yd(e)&&e.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<e.length;r++){if(iC(e[r]))continue;var n=egn(e[r]);const i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}Gmn(t,function(r){return r.join(", ")})}ot.Ia=function(){return this.m};ot.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function qze(e){let t="";return Hne(e,function(n,r){t+=r,t+=":",t+=n,t+=`\r
`}),t}function ire(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=qze(n),typeof e=="string"?n!=null&&encodeURIComponent(String(n)):Qr(e,t,n))}function $S(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Wze(e){this.Ga=0,this.j=[],this.l=new M5,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=$S("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=$S("baseRetryDelayMs",5e3,e),this.hb=$S("retryDelaySeedMs",1e4,e),this.eb=$S("forwardChannelMaxRetries",2,e),this.xa=$S("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new Dze(e&&e.concurrentRequestLimit),this.Ja=new Egn,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}ot=Wze.prototype;ot.ra=8;ot.H=1;function sre(e){if(Gze(e),e.H==3){var t=e.W++,n=jp(e.I);if(Qr(n,"SID",e.K),Qr(n,"RID",t),Qr(n,"TYPE","terminate"),cO(e,n),t=new aO(e,e.l,t),t.L=2,t.A=U5(jp(n)),n=!1,Zt.navigator&&Zt.navigator.sendBeacon)try{n=Zt.navigator.sendBeacon(t.A.toString(),"")}catch{}!n&&Zt.Image&&(new Image().src=t.A,n=!0),n||(t.g=tUe(t.l,null),t.g.ha(t.A)),t.G=Date.now(),uO(t)}Zze(e)}function W5(e){e.g&&(are(e),e.g.cancel(),e.g=null)}function Gze(e){W5(e),e.u&&(Zt.clearTimeout(e.u),e.u=null),nM(e),e.i.cancel(),e.m&&(typeof e.m=="number"&&Zt.clearTimeout(e.m),e.m=null)}function G5(e){if(!Lze(e.i)&&!e.m){e.m=!0;var t=e.Na;oC||mze(),aC||(oC(),aC=!0),Xne.add(t,e),e.C=0}}function Pgn(e,t){return Mze(e.i)>=e.i.j-(e.m?1:0)?!1:e.m?(e.j=t.F.concat(e.j),!0):e.H==1||e.H==2||e.C>=(e.cb?0:e.eb)?!1:(e.m=sO(Qo(e.Na,e,t),Jze(e,e.C)),e.C++,!0)}ot.Na=function(e){if(this.m)if(this.m=null,this.H==1){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const i=new aO(this,this.l,e);let s=this.s;if(this.U&&(s?(s=aze(s),uze(s,this.U)):s=this.U),this.o!==null||this.O||(i.I=s,s=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(t+=r,4096<t){t=n;break e}if(t===4096||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Yze(this,i,t),n=jp(this.I),Qr(n,"RID",e),Qr(n,"CVER",22),this.F&&Qr(n,"X-HTTP-Session-Id",this.F),cO(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(qze(s)))+"&"+t:this.o&&ire(n,this.o,s)),nre(this.i,i),this.bb&&Qr(n,"TYPE","init"),this.P?(Qr(n,"$req",t),Qr(n,"SID","null"),i.aa=!0,Qq(i,n,null)):Qq(i,n,t),this.H=2}}else this.H==3&&(e?Rve(this,e):this.j.length==0||Lze(this.i)||Rve(this))};function Rve(e,t){var n;t?n=t.m:n=e.W++;const r=jp(e.I);Qr(r,"SID",e.K),Qr(r,"RID",n),Qr(r,"AID",e.V),cO(e,r),e.o&&e.s&&ire(r,e.o,e.s),n=new aO(e,e.l,n,e.C+1),e.o===null&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=Yze(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),nre(e.i,n),Qq(n,r,t)}function cO(e,t){e.na&&Hne(e.na,function(n,r){Qr(t,r,n)}),e.h&&Pze({},function(n,r){Qr(t,r,n)})}function Yze(e,t,n){n=Math.min(e.j.length,n);var r=e.h?Qo(e.h.Va,e.h,e):null;e:{var i=e.j;let s=-1;for(;;){const o=["count="+n];s==-1?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let u=0;u<n;u++){let l=i[u].g;const c=i[u].map;if(l-=s,0>l)s=Math.max(0,i[u].g-100),a=!1;else try{xgn(c,o,"req"+l+"_")}catch{r&&r(c)}}if(a){r=o.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function Kze(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;oC||mze(),aC||(oC(),aC=!0),Xne.add(t,e),e.A=0}}function ore(e){return e.g||e.u||3<=e.A?!1:(e.ba++,e.u=sO(Qo(e.Ma,e),Jze(e,e.A)),e.A++,!0)}ot.Ma=function(){if(this.u=null,Xze(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=sO(Qo(this.jb,this),e)}};ot.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,ba(10),W5(this),Xze(this))};function are(e){e.B!=null&&(Zt.clearTimeout(e.B),e.B=null)}function Xze(e){e.g=new aO(e,e.l,"rpc",e.ba),e.o===null&&(e.g.I=e.s),e.g.O=0;var t=jp(e.wa);Qr(t,"RID","rpc"),Qr(t,"SID",e.K),Qr(t,"AID",e.V),Qr(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&Qr(t,"TO",e.qa),Qr(t,"TYPE","xmlhttp"),cO(e,t),e.o&&e.s&&ire(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.A=U5(jp(t)),n.u=null,n.S=!0,Aze(n,e)}ot.ib=function(){this.v!=null&&(this.v=null,W5(this),ore(this),ba(19))};function nM(e){e.v!=null&&(Zt.clearTimeout(e.v),e.v=null)}function Qze(e,t){var n=null;if(e.g==t){nM(e),are(e),e.g=null;var r=2}else if(Zq(e.i,t))n=t.F,Fze(e.i,t),r=1;else return;if(e.H!=0){if(t.i)if(r==1){n=t.u?t.u.length:0,t=Date.now()-t.G;var i=e.C;r=F5(),vo(r,new wze(r,n)),G5(e)}else Kze(e);else if(i=t.s,i==3||i==0&&0<t.ca||!(r==1&&Pgn(e,t)||r==2&&ore(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:n1(e,5);break;case 4:n1(e,10);break;case 3:n1(e,6);break;default:n1(e,2)}}}function Jze(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function n1(e,t){if(e.l.info("Error code "+t),t==2){var n=null;e.h&&(n=null);var r=Qo(e.pb,e);n||(n=new E1("//www.google.com/images/cleardot.gif"),Zt.location&&Zt.location.protocol=="http"||eM(n,"https"),U5(n)),Sgn(n.toString(),r)}else ba(2);e.H=0,e.h&&e.h.za(t),Zze(e),Gze(e)}ot.pb=function(e){e?(this.l.info("Successfully pinged google.com"),ba(2)):(this.l.info("Failed to ping google.com"),ba(1))};function Zze(e){if(e.H=0,e.ma=[],e.h){const t=Bze(e.i);(t.length!=0||e.j.length!=0)&&(xve(e.ma,t),xve(e.ma,e.j),e.i.i.length=0,Une(e.j),e.j.length=0),e.h.ya()}}function eUe(e,t,n){var r=n instanceof E1?jp(n):new E1(n);if(r.g!="")t&&(r.g=t+"."+r.g),tM(r,r.m);else{var i=Zt.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var s=new E1(null);r&&eM(s,r),t&&(s.g=t),i&&tM(s,i),n&&(s.l=n),r=s}return n=e.F,t=e.Da,n&&t&&Qr(r,n,t),Qr(r,"VER",e.ra),cO(e,r),r}function tUe(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return t=e.Ha&&!e.va?new Li(new V5({ob:n})):new Li(e.va),t.Oa(e.J),t}ot.isActive=function(){return!!this.h&&this.h.isActive(this)};function nUe(){}ot=nUe.prototype;ot.Ba=function(){};ot.Aa=function(){};ot.za=function(){};ot.ya=function(){};ot.isActive=function(){return!0};ot.Va=function(){};function rM(){if(lE&&!(10<=Number(Vmn)))throw Error("Environmental error: no available transport.")}rM.prototype.g=function(e,t){return new hl(e,t)};function hl(e,t){Ws.call(this),this.g=new Wze(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!iC(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!iC(t)&&(this.g.F=t,e=this.h,e!==null&&t in e&&(e=this.h,t in e&&delete e[t])),this.j=new _x(this)}Xs(hl,Ws);hl.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;ba(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=eUe(e,null,e.Y),G5(e)};hl.prototype.close=function(){sre(this.g)};hl.prototype.u=function(e){var t=this.g;if(typeof e=="string"){var n={};n.__data__=e,e=n}else this.v&&(n={},n.__data__=Kne(e),e=n);t.j.push(new _gn(t.fb++,e)),t.H==3&&G5(t)};hl.prototype.N=function(){this.g.h=null,delete this.j,sre(this.g),delete this.g,hl.$.N.call(this)};function rUe(e){ere.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=t!==null&&e in t?t[e]:void 0),this.data=t}else this.data=e}Xs(rUe,ere);function iUe(){tre.call(this),this.status=1}Xs(iUe,tre);function _x(e){this.g=e}Xs(_x,nUe);_x.prototype.Ba=function(){vo(this.g,"a")};_x.prototype.Aa=function(e){vo(this.g,new rUe(e))};_x.prototype.za=function(e){vo(this.g,new iUe)};_x.prototype.ya=function(){vo(this.g,"b")};function kgn(){this.blockSize=-1}function mf(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}Xs(mf,kgn);mf.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function b7(e,t,n){n||(n=0);var r=Array(16);if(typeof t=="string")for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;t=n+(o<<7&4294967295|o>>>25),o=s+(i^t&(n^i))+r[1]+3905402710&4294967295,s=t+(o<<12&4294967295|o>>>20),o=i+(n^s&(t^n))+r[2]+606105819&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(t^i&(s^t))+r[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(s^n&(i^s))+r[4]+4118548399&4294967295,t=n+(o<<7&4294967295|o>>>25),o=s+(i^t&(n^i))+r[5]+1200080426&4294967295,s=t+(o<<12&4294967295|o>>>20),o=i+(n^s&(t^n))+r[6]+2821735955&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(t^i&(s^t))+r[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(s^n&(i^s))+r[8]+1770035416&4294967295,t=n+(o<<7&4294967295|o>>>25),o=s+(i^t&(n^i))+r[9]+2336552879&4294967295,s=t+(o<<12&4294967295|o>>>20),o=i+(n^s&(t^n))+r[10]+4294925233&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(t^i&(s^t))+r[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(s^n&(i^s))+r[12]+1804603682&4294967295,t=n+(o<<7&4294967295|o>>>25),o=s+(i^t&(n^i))+r[13]+4254626195&4294967295,s=t+(o<<12&4294967295|o>>>20),o=i+(n^s&(t^n))+r[14]+2792965006&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(t^i&(s^t))+r[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(i^s&(n^i))+r[1]+4129170786&4294967295,t=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(t^n))+r[6]+3225465664&4294967295,s=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(s^t))+r[11]+643717713&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^t&(i^s))+r[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(i^s&(n^i))+r[5]+3593408605&4294967295,t=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(t^n))+r[10]+38016083&4294967295,s=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(s^t))+r[15]+3634488961&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^t&(i^s))+r[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(i^s&(n^i))+r[9]+568446438&4294967295,t=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(t^n))+r[14]+3275163606&4294967295,s=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(s^t))+r[3]+4107603335&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^t&(i^s))+r[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(i^s&(n^i))+r[13]+2850285829&4294967295,t=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(t^n))+r[2]+4243563512&4294967295,s=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(s^t))+r[7]+1735328473&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^t&(i^s))+r[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(n^i^s)+r[5]+4294588738&4294967295,t=n+(o<<4&4294967295|o>>>28),o=s+(t^n^i)+r[8]+2272392833&4294967295,s=t+(o<<11&4294967295|o>>>21),o=i+(s^t^n)+r[11]+1839030562&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^t)+r[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(n^i^s)+r[1]+2763975236&4294967295,t=n+(o<<4&4294967295|o>>>28),o=s+(t^n^i)+r[4]+1272893353&4294967295,s=t+(o<<11&4294967295|o>>>21),o=i+(s^t^n)+r[7]+4139469664&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^t)+r[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(n^i^s)+r[13]+681279174&4294967295,t=n+(o<<4&4294967295|o>>>28),o=s+(t^n^i)+r[0]+3936430074&4294967295,s=t+(o<<11&4294967295|o>>>21),o=i+(s^t^n)+r[3]+3572445317&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^t)+r[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(n^i^s)+r[9]+3654602809&4294967295,t=n+(o<<4&4294967295|o>>>28),o=s+(t^n^i)+r[12]+3873151461&4294967295,s=t+(o<<11&4294967295|o>>>21),o=i+(s^t^n)+r[15]+530742520&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^t)+r[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(i^(n|~s))+r[0]+4096336452&4294967295,t=n+(o<<6&4294967295|o>>>26),o=s+(n^(t|~i))+r[7]+1126891415&4294967295,s=t+(o<<10&4294967295|o>>>22),o=i+(t^(s|~n))+r[14]+2878612391&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~t))+r[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=t+(i^(n|~s))+r[12]+1700485571&4294967295,t=n+(o<<6&4294967295|o>>>26),o=s+(n^(t|~i))+r[3]+2399980690&4294967295,s=t+(o<<10&4294967295|o>>>22),o=i+(t^(s|~n))+r[10]+4293915773&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~t))+r[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=t+(i^(n|~s))+r[8]+1873313359&4294967295,t=n+(o<<6&4294967295|o>>>26),o=s+(n^(t|~i))+r[15]+4264355552&4294967295,s=t+(o<<10&4294967295|o>>>22),o=i+(t^(s|~n))+r[6]+2734768916&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~t))+r[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=t+(i^(n|~s))+r[4]+4149444226&4294967295,t=n+(o<<6&4294967295|o>>>26),o=s+(n^(t|~i))+r[11]+3174756917&4294967295,s=t+(o<<10&4294967295|o>>>22),o=i+(t^(s|~n))+r[2]+718787259&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}mf.prototype.j=function(e,t){t===void 0&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,s=0;s<t;){if(i==0)for(;s<=n;)b7(this,e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<t;)if(r[i++]=e.charCodeAt(s++),i==this.blockSize){b7(this,r),i=0;break}}else for(;s<t;)if(r[i++]=e[s++],i==this.blockSize){b7(this,r),i=0;break}}this.h=i,this.i+=t};mf.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=n&255,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};function wr(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=e[i]|0;r&&s==t||(n[i]=s,r=!1)}this.g=n}var $gn={};function ure(e){return-128<=e&&128>e?jmn(e,function(t){return new wr([t|0],0>t?-1:0)}):new wr([e|0],0>e?-1:0)}function vd(e){if(isNaN(e)||!isFinite(e))return Yb;if(0>e)return lo(vd(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=eW;return new wr(t,0)}function sUe(e,t){if(e.length==0)throw Error("number format error: empty string");if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(e.charAt(0)=="-")return lo(sUe(e.substring(1),t));if(0<=e.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=vd(Math.pow(t,8)),r=Yb,i=0;i<e.length;i+=8){var s=Math.min(8,e.length-i),o=parseInt(e.substring(i,i+s),t);8>s?(s=vd(Math.pow(t,s)),r=r.R(s).add(vd(o))):(r=r.R(n),r=r.add(vd(o)))}return r}var eW=4294967296,Yb=ure(0),tW=ure(1),Nve=ure(16777216);ot=wr.prototype;ot.ea=function(){if(Bl(this))return-lo(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:eW+r)*t,t*=eW}return e};ot.toString=function(e){if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(Zh(this))return"0";if(Bl(this))return"-"+lo(this).toString(e);for(var t=vd(Math.pow(e,6)),n=this,r="";;){var i=sM(n,t).g;n=iM(n,i.R(t));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(e);if(n=i,Zh(n))return s+r;for(;6>s.length;)s="0"+s;r=s+r}};ot.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h};function Zh(e){if(e.h!=0)return!1;for(var t=0;t<e.g.length;t++)if(e.g[t]!=0)return!1;return!0}function Bl(e){return e.h==-1}ot.X=function(e){return e=iM(this,e),Bl(e)?-1:Zh(e)?0:1};function lo(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new wr(n,~e.h).add(tW)}ot.abs=function(){return Bl(this)?lo(this):this};ot.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var s=r+(this.D(i)&65535)+(e.D(i)&65535),o=(s>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new wr(n,n[n.length-1]&-2147483648?-1:0)};function iM(e,t){return e.add(lo(t))}ot.R=function(e){if(Zh(this)||Zh(e))return Yb;if(Bl(this))return Bl(e)?lo(this).R(lo(e)):lo(lo(this).R(e));if(Bl(e))return lo(this.R(lo(e)));if(0>this.X(Nve)&&0>e.X(Nve))return vd(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var s=this.D(r)>>>16,o=this.D(r)&65535,a=e.D(i)>>>16,u=e.D(i)&65535;n[2*r+2*i]+=o*u,gk(n,2*r+2*i),n[2*r+2*i+1]+=s*u,gk(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,gk(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,gk(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new wr(n,0)};function gk(e,t){for(;(e[t]&65535)!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function RS(e,t){this.g=e,this.h=t}function sM(e,t){if(Zh(t))throw Error("division by zero");if(Zh(e))return new RS(Yb,Yb);if(Bl(e))return t=sM(lo(e),t),new RS(lo(t.g),lo(t.h));if(Bl(t))return t=sM(e,lo(t)),new RS(lo(t.g),t.h);if(30<e.g.length){if(Bl(e)||Bl(t))throw Error("slowDivide_ only works with positive integers.");for(var n=tW,r=t;0>=r.X(e);)n=Dve(n),r=Dve(r);var i=A_(n,1),s=A_(r,1);for(r=A_(r,2),n=A_(n,2);!Zh(r);){var o=s.add(r);0>=o.X(e)&&(i=i.add(n),s=o),r=A_(r,1),n=A_(n,1)}return t=iM(e,i.R(t)),new RS(i,t)}for(i=Yb;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),s=vd(n),o=s.R(t);Bl(o)||0<o.X(e);)n-=r,s=vd(n),o=s.R(t);Zh(s)&&(s=tW),i=i.add(s),e=iM(e,o)}return new RS(i,e)}ot.gb=function(e){return sM(this,e).h};ot.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new wr(n,this.h&e.h)};ot.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new wr(n,this.h|e.h)};ot.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new wr(n,this.h^e.h)};function Dve(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new wr(n,e.h)}function A_(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],s=0;s<r;s++)i[s]=0<t?e.D(s+n)>>>t|e.D(s+n+1)<<32-t:e.D(s+n);return new wr(i,e.h)}rM.prototype.createWebChannel=rM.prototype.g;hl.prototype.send=hl.prototype.u;hl.prototype.open=hl.prototype.m;hl.prototype.close=hl.prototype.close;B5.NO_ERROR=0;B5.TIMEOUT=8;B5.HTTP_ERROR=6;Eze.COMPLETE="complete";xze.EventType=oO;oO.OPEN="a";oO.CLOSE="b";oO.ERROR="c";oO.MESSAGE="d";Ws.prototype.listen=Ws.prototype.O;Li.prototype.listenOnce=Li.prototype.P;Li.prototype.getLastError=Li.prototype.Sa;Li.prototype.getLastErrorCode=Li.prototype.Ia;Li.prototype.getStatus=Li.prototype.da;Li.prototype.getResponseJson=Li.prototype.Wa;Li.prototype.getResponseText=Li.prototype.ja;Li.prototype.send=Li.prototype.ha;Li.prototype.setWithCredentials=Li.prototype.Oa;mf.prototype.digest=mf.prototype.l;mf.prototype.reset=mf.prototype.reset;mf.prototype.update=mf.prototype.j;wr.prototype.add=wr.prototype.add;wr.prototype.multiply=wr.prototype.R;wr.prototype.modulo=wr.prototype.gb;wr.prototype.compare=wr.prototype.X;wr.prototype.toNumber=wr.prototype.ea;wr.prototype.toString=wr.prototype.toString;wr.prototype.getBits=wr.prototype.D;wr.fromNumber=vd;wr.fromString=sUe;var Rgn=function(){return new rM},Ngn=function(){return F5()},w7=B5,Dgn=Eze,Lgn=Xv,Lve={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},yk=xze,Mgn=Li,Fgn=mf,Kb=wr;const Mve="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}qa.UNAUTHENTICATED=new qa(null),qa.GOOGLE_CREDENTIALS=new qa("google-credentials-uid"),qa.FIRST_PARTY=new qa("first-party-uid"),qa.MOCK_USER=new qa("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bx="10.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cv=new k5("@firebase/firestore");function NS(){return cv.logLevel}function xt(e,...t){if(cv.logLevel<=Fn.DEBUG){const n=t.map(lre);cv.debug(`Firestore (${bx}): ${e}`,...n)}}function zp(e,...t){if(cv.logLevel<=Fn.ERROR){const n=t.map(lre);cv.error(`Firestore (${bx}): ${e}`,...n)}}function dC(e,...t){if(cv.logLevel<=Fn.WARN){const n=t.map(lre);cv.warn(`Firestore (${bx}): ${e}`,...n)}}function lre(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yt(e="Unexpected state"){const t=`FIRESTORE (${bx}) INTERNAL ASSERTION FAILED: `+e;throw zp(t),new Error(t)}function Vr(e,t){e||Yt()}function an(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $e={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ct extends yh{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bgn{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class jgn{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(qa.UNAUTHENTICATED))}shutdown(){}}class zgn{constructor(t){this.t=t,this.currentUser=qa.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new gp;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new gp,t.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;t.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{xt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(xt("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new gp)}},0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(xt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Vr(typeof r.accessToken=="string"),new Bgn(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return Vr(t===null||typeof t=="string"),new qa(t)}}class Ugn{constructor(t,n,r){this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=qa.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Vgn{constructor(t,n,r){this.l=t,this.h=n,this.P=r}getToken(){return Promise.resolve(new Ugn(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(qa.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Hgn{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class qgn{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,n){const r=s=>{s.error!=null&&xt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,xt("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>r(s))};const i=s=>{xt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):xt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(Vr(typeof n.token=="string"),this.R=n.token,new Hgn(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wgn(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oUe{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length;let r="";for(;r.length<20;){const i=Wgn(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=t.charAt(i[s]%t.length))}return r}}function cr(e,t){return e<t?-1:e>t?1:0}function cE(e,t,n){return e.length===t.length&&e.every((r,i)=>n(r,t[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new ct($e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ct($e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new ct($e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ct($e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Es.fromMillis(Date.now())}static fromDate(t){return Es.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor(1e6*(t-1e3*n));return new Es(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?cr(this.nanoseconds,t.nanoseconds):cr(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(t){this.timestamp=t}static fromTimestamp(t){return new en(t)}static min(){return new en(new Es(0,0))}static max(){return new en(new Es(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(t,n,r){n===void 0?n=0:n>t.length&&Yt(),r===void 0?r=t.length-n:r>t.length-n&&Yt(),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return hC.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof hC?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let i=0;i<r;i++){const s=t.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return t.length<n.length?-1:t.length>n.length?1:0}}class Jr extends hC{construct(t,n,r){return new Jr(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new ct($e.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Jr(n)}static emptyPath(){return new Jr([])}}const Ggn=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class co extends hC{construct(t,n,r){return new co(t,n,r)}static isValidIdentifier(t){return Ggn.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),co.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new co(["__name__"])}static fromServerFormat(t){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new ct($e.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<t.length;){const a=t[i];if(a==="\\"){if(i+1===t.length)throw new ct($e.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new ct($e.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new ct($e.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new co(n)}static emptyPath(){return new co([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(t){this.path=t}static fromPath(t){return new Lt(Jr.fromString(t))}static fromName(t){return new Lt(Jr.fromString(t).popFirst(5))}static empty(){return new Lt(Jr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Jr.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return Jr.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Lt(new Jr(t.slice()))}}function Ygn(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=en.fromTimestamp(r===1e9?new Es(n+1,0):new Es(n,r));return new g0(i,Lt.empty(),t)}function Kgn(e){return new g0(e.readTime,e.key,-1)}class g0{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new g0(en.min(),Lt.empty(),-1)}static max(){return new g0(en.max(),Lt.empty(),-1)}}function Xgn(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=Lt.comparator(e.documentKey,t.documentKey),n!==0?n:cr(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qgn="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Jgn{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fO(e){if(e.code!==$e.FAILED_PRECONDITION||e.message!==Qgn)throw e;xt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&Yt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new Me((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof Me?n:Me.resolve(n)}catch(n){return Me.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):Me.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):Me.reject(n)}static resolve(t){return new Me((n,r)=>{n(t)})}static reject(t){return new Me((n,r)=>{r(t)})}static waitFor(t){return new Me((n,r)=>{let i=0,s=0,o=!1;t.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(t){let n=Me.resolve(!1);for(const r of t)n=n.next(i=>i?Me.resolve(i):r());return n}static forEach(t,n){const r=[];return t.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(t,n){return new Me((r,i)=>{const s=t.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const l=u;n(t[l]).next(c=>{o[l]=c,++a,a===s&&r(o)},c=>i(c))}})}static doWhile(t,n){return new Me((r,i)=>{const s=()=>{t()===!0?n().next(()=>{s()},i):r()};s()})}}function dO(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cre{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.se(r),this.oe=r=>n.writeSequenceNumber(r))}se(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.oe&&this.oe(t),t}}cre._e=-1;function Y5(e){return e==null}function oM(e){return e===0&&1/e==-1/0}function Zgn(e){return typeof e=="number"&&Number.isInteger(e)&&!oM(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fve(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function wx(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function aUe(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(t,n){this.comparator=t,this.root=n||oo.EMPTY}insert(t,n){return new wi(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,oo.BLACK,null,null))}remove(t){return new wi(this.comparator,this.root.remove(t,this.comparator).copy(null,null,oo.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(t,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new vk(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new vk(this.root,t,this.comparator,!1)}getReverseIterator(){return new vk(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new vk(this.root,t,this.comparator,!0)}}class vk{constructor(t,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=n?r(t.key,n):1,n&&i&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class oo{constructor(t,n,r,i,s){this.key=t,this.value=n,this.color=r??oo.RED,this.left=i??oo.EMPTY,this.right=s??oo.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,i,s){return new oo(t??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let i=this;const s=r(t,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(t,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(t,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return oo.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return oo.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,oo.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,oo.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Yt();const t=this.left.check();if(t!==this.right.check())throw Yt();return t+(this.isRed()?0:1)}}oo.EMPTY=null,oo.RED=!0,oo.BLACK=!1;oo.EMPTY=new class{constructor(){this.size=0}get key(){throw Yt()}get value(){throw Yt()}get color(){throw Yt()}get left(){throw Yt()}get right(){throw Yt()}copy(t,n,r,i,s){return this}insert(t,n,r){return new oo(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(t){this.comparator=t,this.data=new wi(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;n(i.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new Bve(this.data.getIterator())}getIteratorFrom(t){return new Bve(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof _o)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new _o(this.comparator);return n.data=t,n}}class Bve{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(t){this.fields=t,t.sort(co.comparator)}static empty(){return new Qc([])}unionWith(t){let n=new _o(co.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new Qc(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return cE(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uUe extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new uUe("Invalid base64 string: "+s):s}}(t);return new ia(n)}static fromUint8Array(t){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(t);return new ia(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return cr(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}ia.EMPTY_BYTE_STRING=new ia("");const e0n=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function y0(e){if(Vr(!!e),typeof e=="string"){let t=0;const n=e0n.exec(e);if(Vr(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),t=Number(i)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Ji(e.seconds),nanos:Ji(e.nanos)}}function Ji(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function fv(e){return typeof e=="string"?ia.fromBase64String(e):ia.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fre(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function dre(e){const t=e.mapValue.fields.__previous_value__;return fre(t)?dre(t):t}function pC(e){const t=y0(e.mapValue.fields.__local_write_time__.timestampValue);return new Es(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t0n{constructor(t,n,r,i,s,o,a,u,l){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}}class mC{constructor(t,n){this.projectId=t,this.database=n||"(default)"}static empty(){return new mC("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof mC&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _k={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function dv(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?fre(e)?4:n0n(e)?9007199254740991:10:Yt()}function eh(e,t){if(e===t)return!0;const n=dv(e);if(n!==dv(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return pC(e).isEqual(pC(t));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=y0(i.timestampValue),a=y0(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(i,s){return fv(i.bytesValue).isEqual(fv(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(i,s){return Ji(i.geoPointValue.latitude)===Ji(s.geoPointValue.latitude)&&Ji(i.geoPointValue.longitude)===Ji(s.geoPointValue.longitude)}(e,t);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Ji(i.integerValue)===Ji(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Ji(i.doubleValue),a=Ji(s.doubleValue);return o===a?oM(o)===oM(a):isNaN(o)&&isNaN(a)}return!1}(e,t);case 9:return cE(e.arrayValue.values||[],t.arrayValue.values||[],eh);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(Fve(o)!==Fve(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!eh(o[u],a[u])))return!1;return!0}(e,t);default:return Yt()}}function gC(e,t){return(e.values||[]).find(n=>eh(n,t))!==void 0}function fE(e,t){if(e===t)return 0;const n=dv(e),r=dv(t);if(n!==r)return cr(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return cr(e.booleanValue,t.booleanValue);case 2:return function(s,o){const a=Ji(s.integerValue||s.doubleValue),u=Ji(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(e,t);case 3:return jve(e.timestampValue,t.timestampValue);case 4:return jve(pC(e),pC(t));case 5:return cr(e.stringValue,t.stringValue);case 6:return function(s,o){const a=fv(s),u=fv(o);return a.compareTo(u)}(e.bytesValue,t.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let l=0;l<a.length&&l<u.length;l++){const c=cr(a[l],u[l]);if(c!==0)return c}return cr(a.length,u.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,o){const a=cr(Ji(s.latitude),Ji(o.latitude));return a!==0?a:cr(Ji(s.longitude),Ji(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(s,o){const a=s.values||[],u=o.values||[];for(let l=0;l<a.length&&l<u.length;++l){const c=fE(a[l],u[l]);if(c)return c}return cr(a.length,u.length)}(e.arrayValue,t.arrayValue);case 10:return function(s,o){if(s===_k.mapValue&&o===_k.mapValue)return 0;if(s===_k.mapValue)return 1;if(o===_k.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),l=o.fields||{},c=Object.keys(l);u.sort(),c.sort();for(let f=0;f<u.length&&f<c.length;++f){const d=cr(u[f],c[f]);if(d!==0)return d;const h=fE(a[u[f]],l[c[f]]);if(h!==0)return h}return cr(u.length,c.length)}(e.mapValue,t.mapValue);default:throw Yt()}}function jve(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return cr(e,t);const n=y0(e),r=y0(t),i=cr(n.seconds,r.seconds);return i!==0?i:cr(n.nanos,r.nanos)}function dE(e){return nW(e)}function nW(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const r=y0(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return fv(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return Lt.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=nW(s);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${nW(n.fields[o])}`;return i+"}"}(e.mapValue):Yt()}function zve(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function rW(e){return!!e&&"integerValue"in e}function hre(e){return!!e&&"arrayValue"in e}function Uve(e){return!!e&&"nullValue"in e}function Vve(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function B$(e){return!!e&&"mapValue"in e}function T2(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return wx(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=T2(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=T2(e.arrayValue.values[n]);return t}return Object.assign({},e)}function n0n(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(t){this.value=t}static empty(){return new jl({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!B$(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=T2(n)}setAll(t){let n=co.emptyPath(),r={},i=[];t.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=T2(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(t){const n=this.field(t.popLast());B$(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return eh(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let i=n.mapValue.fields[t.get(r)];B$(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(t,n,r){wx(n,(i,s)=>t[i]=s);for(const i of r)delete t[i]}clone(){return new jl(T2(this.value))}}function lUe(e){const t=[];return wx(e.fields,(n,r)=>{const i=new co([n]);if(B$(r)){const s=lUe(r.mapValue).fields;if(s.length===0)t.push(i);else for(const o of s)t.push(i.child(o))}else t.push(i)}),new Qc(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(t,n,r,i,s,o,a){this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(t){return new zo(t,0,en.min(),en.min(),en.min(),jl.empty(),0)}static newFoundDocument(t,n,r,i){return new zo(t,1,n,en.min(),r,i,0)}static newNoDocument(t,n){return new zo(t,2,n,en.min(),en.min(),jl.empty(),0)}static newUnknownDocument(t,n){return new zo(t,3,n,en.min(),en.min(),jl.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(en.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=jl.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=jl.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=en.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof zo&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new zo(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aM{constructor(t,n){this.position=t,this.inclusive=n}}function Hve(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(s.field.isKeyField()?r=Lt.comparator(Lt.fromName(o.referenceValue),n.key):r=fE(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function qve(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!eh(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{constructor(t,n="asc"){this.field=t,this.dir=n}}function r0n(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cUe{}class ns extends cUe{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new s0n(t,n,r):n==="array-contains"?new u0n(t,r):n==="in"?new l0n(t,r):n==="not-in"?new c0n(t,r):n==="array-contains-any"?new f0n(t,r):new ns(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new o0n(t,r):new a0n(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(fE(n,this.value)):n!==null&&dv(this.value)===dv(n)&&this.matchesComparison(fE(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Yt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class gf extends cUe{constructor(t,n){super(),this.filters=t,this.op=n,this.ue=null}static create(t,n){return new gf(t,n)}matches(t){return fUe(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function fUe(e){return e.op==="and"}function dUe(e){return i0n(e)&&fUe(e)}function i0n(e){for(const t of e.filters)if(t instanceof gf)return!1;return!0}function iW(e){if(e instanceof ns)return e.field.canonicalString()+e.op.toString()+dE(e.value);if(dUe(e))return e.filters.map(t=>iW(t)).join(",");{const t=e.filters.map(n=>iW(n)).join(",");return`${e.op}(${t})`}}function hUe(e,t){return e instanceof ns?function(r,i){return i instanceof ns&&r.op===i.op&&r.field.isEqual(i.field)&&eh(r.value,i.value)}(e,t):e instanceof gf?function(r,i){return i instanceof gf&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&hUe(o,i.filters[a]),!0):!1}(e,t):void Yt()}function pUe(e){return e instanceof ns?function(n){return`${n.field.canonicalString()} ${n.op} ${dE(n.value)}`}(e):e instanceof gf?function(n){return n.op.toString()+" {"+n.getFilters().map(pUe).join(" ,")+"}"}(e):"Filter"}class s0n extends ns{constructor(t,n,r){super(t,n,r),this.key=Lt.fromName(r.referenceValue)}matches(t){const n=Lt.comparator(t.key,this.key);return this.matchesComparison(n)}}class o0n extends ns{constructor(t,n){super(t,"in",n),this.keys=mUe("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class a0n extends ns{constructor(t,n){super(t,"not-in",n),this.keys=mUe("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function mUe(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Lt.fromName(r.referenceValue))}class u0n extends ns{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return hre(n)&&gC(n.arrayValue,this.value)}}class l0n extends ns{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&gC(this.value.arrayValue,n)}}class c0n extends ns{constructor(t,n){super(t,"not-in",n)}matches(t){if(gC(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!gC(this.value.arrayValue,n)}}class f0n extends ns{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!hre(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>gC(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d0n{constructor(t,n=null,r=[],i=[],s=null,o=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ce=null}}function Wve(e,t=null,n=[],r=[],i=null,s=null,o=null){return new d0n(e,t,n,r,i,s,o)}function pre(e){const t=an(e);if(t.ce===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>iW(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Y5(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>dE(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>dE(r)).join(",")),t.ce=n}return t.ce}function mre(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!r0n(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!hUe(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!qve(e.startAt,t.startAt)&&qve(e.endAt,t.endAt)}function sW(e){return Lt.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex{constructor(t,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function h0n(e,t,n,r,i,s,o,a){return new Ex(e,t,n,r,i,s,o,a)}function gre(e){return new Ex(e)}function Gve(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function gUe(e){return e.collectionGroup!==null}function A2(e){const t=an(e);if(t.le===null){t.le=[];const n=new Set;for(const s of t.explicitOrderBy)t.le.push(s),n.add(s.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new _o(co.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(t).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||t.le.push(new yC(s,r))}),n.has(co.keyField().canonicalString())||t.le.push(new yC(co.keyField(),r))}return t.le}function Rd(e){const t=an(e);return t.he||(t.he=p0n(t,A2(e))),t.he}function p0n(e,t){if(e.limitType==="F")return Wve(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new yC(i.field,s)});const n=e.endAt?new aM(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new aM(e.startAt.position,e.startAt.inclusive):null;return Wve(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function oW(e,t){const n=e.filters.concat([t]);return new Ex(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function aW(e,t,n){return new Ex(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function K5(e,t){return mre(Rd(e),Rd(t))&&e.limitType===t.limitType}function yUe(e){return`${pre(Rd(e))}|lt:${e.limitType}`}function L_(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>pUe(i)).join(", ")}]`),Y5(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>dE(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>dE(i)).join(",")),`Target(${r})`}(Rd(e))}; limitType=${e.limitType})`}function X5(e,t){return t.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Lt.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(e,t)&&function(r,i){for(const s of A2(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(e,t)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(e,t)&&function(r,i){return!(r.startAt&&!function(o,a,u){const l=Hve(o,a,u);return o.inclusive?l<=0:l<0}(r.startAt,A2(r),i)||r.endAt&&!function(o,a,u){const l=Hve(o,a,u);return o.inclusive?l>=0:l>0}(r.endAt,A2(r),i))}(e,t)}function m0n(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function vUe(e){return(t,n)=>{let r=!1;for(const i of A2(e)){const s=g0n(i,t,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function g0n(e,t,n){const r=e.field.isKeyField()?Lt.comparator(t.key,n.key):function(s,o,a){const u=o.data.field(s),l=a.data.field(s);return u!==null&&l!==null?fE(u,l):Yt()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Yt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,t))return s}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),i=this.inner[r];if(i===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return void(i[s]=[t,n]);i.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(t){wx(this.inner,(n,r)=>{for(const[i,s]of r)t(i,s)})}isEmpty(){return aUe(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y0n=new wi(Lt.comparator);function Up(){return y0n}const _Ue=new wi(Lt.comparator);function ST(...e){let t=_Ue;for(const n of e)t=t.insert(n.key,n);return t}function bUe(e){let t=_Ue;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function r1(){return C2()}function wUe(){return C2()}function C2(){return new xx(e=>e.toString(),(e,t)=>e.isEqual(t))}const v0n=new wi(Lt.comparator),_0n=new _o(Lt.comparator);function On(...e){let t=_0n;for(const n of e)t=t.add(n);return t}const b0n=new _o(cr);function w0n(){return b0n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EUe(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:oM(t)?"-0":t}}function xUe(e){return{integerValue:""+e}}function E0n(e,t){return Zgn(t)?xUe(t):EUe(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q5{constructor(){this._=void 0}}function x0n(e,t,n){return e instanceof vC?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&fre(s)&&(s=dre(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,t):e instanceof _C?TUe(e,t):e instanceof bC?AUe(e,t):function(i,s){const o=SUe(i,s),a=Yve(o)+Yve(i.Ie);return rW(o)&&rW(i.Ie)?xUe(a):EUe(i.serializer,a)}(e,t)}function S0n(e,t,n){return e instanceof _C?TUe(e,t):e instanceof bC?AUe(e,t):n}function SUe(e,t){return e instanceof uM?function(r){return rW(r)||function(s){return!!s&&"doubleValue"in s}(r)}(t)?t:{integerValue:0}:null}class vC extends Q5{}class _C extends Q5{constructor(t){super(),this.elements=t}}function TUe(e,t){const n=CUe(t);for(const r of e.elements)n.some(i=>eh(i,r))||n.push(r);return{arrayValue:{values:n}}}class bC extends Q5{constructor(t){super(),this.elements=t}}function AUe(e,t){let n=CUe(t);for(const r of e.elements)n=n.filter(i=>!eh(i,r));return{arrayValue:{values:n}}}class uM extends Q5{constructor(t,n){super(),this.serializer=t,this.Ie=n}}function Yve(e){return Ji(e.integerValue||e.doubleValue)}function CUe(e){return hre(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T0n{constructor(t,n){this.field=t,this.transform=n}}function A0n(e,t){return e.field.isEqual(t.field)&&function(r,i){return r instanceof _C&&i instanceof _C||r instanceof bC&&i instanceof bC?cE(r.elements,i.elements,eh):r instanceof uM&&i instanceof uM?eh(r.Ie,i.Ie):r instanceof vC&&i instanceof vC}(e.transform,t.transform)}class C0n{constructor(t,n){this.version=t,this.transformResults=n}}class yp{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new yp}static exists(t){return new yp(void 0,t)}static updateTime(t){return new yp(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function j$(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class J5{}function IUe(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new PUe(e.key,yp.none()):new hO(e.key,e.data,yp.none());{const n=e.data,r=jl.empty();let i=new _o(co.comparator);for(let s of t.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Qv(e.key,r,new Qc(i.toArray()),yp.none())}}function I0n(e,t,n){e instanceof hO?function(i,s,o){const a=i.value.clone(),u=Xve(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(e,t,n):e instanceof Qv?function(i,s,o){if(!j$(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=Xve(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(OUe(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(e,t,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,n)}function I2(e,t,n,r){return e instanceof hO?function(s,o,a,u){if(!j$(s.precondition,o))return a;const l=s.value.clone(),c=Qve(s.fieldTransforms,u,o);return l.setAll(c),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(e,t,n,r):e instanceof Qv?function(s,o,a,u){if(!j$(s.precondition,o))return a;const l=Qve(s.fieldTransforms,u,o),c=o.data;return c.setAll(OUe(s)),c.setAll(l),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(e,t,n,r):function(s,o,a){return j$(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(e,t,n)}function O0n(e,t){let n=null;for(const r of e.fieldTransforms){const i=t.data.field(r.field),s=SUe(r.transform,i||null);s!=null&&(n===null&&(n=jl.empty()),n.set(r.field,s))}return n||null}function Kve(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&cE(r,i,(s,o)=>A0n(s,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class hO extends J5{constructor(t,n,r,i=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Qv extends J5{constructor(t,n,r,i,s=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function OUe(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Xve(e,t,n){const r=new Map;Vr(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,S0n(o,a,n[i]))}return r}function Qve(e,t,n){const r=new Map;for(const i of e){const s=i.transform,o=n.data.field(i.field);r.set(i.field,x0n(s,o,t))}return r}class PUe extends J5{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class P0n extends J5{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k0n{constructor(t,n,r,i){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(t.key)&&I0n(s,t,r[i])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=I2(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=I2(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=wUe();return this.mutations.forEach(i=>{const s=t.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=IUe(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(en.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),On())}isEqual(t){return this.batchId===t.batchId&&cE(this.mutations,t.mutations,(n,r)=>Kve(n,r))&&cE(this.baseMutations,t.baseMutations,(n,r)=>Kve(n,r))}}class yre{constructor(t,n,r,i){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(t,n,r){Vr(t.mutations.length===r.length);let i=function(){return v0n}();const s=t.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new yre(t,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $0n{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R0n{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ki,qn;function N0n(e){switch(e){default:return Yt();case $e.CANCELLED:case $e.UNKNOWN:case $e.DEADLINE_EXCEEDED:case $e.RESOURCE_EXHAUSTED:case $e.INTERNAL:case $e.UNAVAILABLE:case $e.UNAUTHENTICATED:return!1;case $e.INVALID_ARGUMENT:case $e.NOT_FOUND:case $e.ALREADY_EXISTS:case $e.PERMISSION_DENIED:case $e.FAILED_PRECONDITION:case $e.ABORTED:case $e.OUT_OF_RANGE:case $e.UNIMPLEMENTED:case $e.DATA_LOSS:return!0}}function kUe(e){if(e===void 0)return zp("GRPC error has no .code"),$e.UNKNOWN;switch(e){case Ki.OK:return $e.OK;case Ki.CANCELLED:return $e.CANCELLED;case Ki.UNKNOWN:return $e.UNKNOWN;case Ki.DEADLINE_EXCEEDED:return $e.DEADLINE_EXCEEDED;case Ki.RESOURCE_EXHAUSTED:return $e.RESOURCE_EXHAUSTED;case Ki.INTERNAL:return $e.INTERNAL;case Ki.UNAVAILABLE:return $e.UNAVAILABLE;case Ki.UNAUTHENTICATED:return $e.UNAUTHENTICATED;case Ki.INVALID_ARGUMENT:return $e.INVALID_ARGUMENT;case Ki.NOT_FOUND:return $e.NOT_FOUND;case Ki.ALREADY_EXISTS:return $e.ALREADY_EXISTS;case Ki.PERMISSION_DENIED:return $e.PERMISSION_DENIED;case Ki.FAILED_PRECONDITION:return $e.FAILED_PRECONDITION;case Ki.ABORTED:return $e.ABORTED;case Ki.OUT_OF_RANGE:return $e.OUT_OF_RANGE;case Ki.UNIMPLEMENTED:return $e.UNIMPLEMENTED;case Ki.DATA_LOSS:return $e.DATA_LOSS;default:return Yt()}}(qn=Ki||(Ki={}))[qn.OK=0]="OK",qn[qn.CANCELLED=1]="CANCELLED",qn[qn.UNKNOWN=2]="UNKNOWN",qn[qn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",qn[qn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",qn[qn.NOT_FOUND=5]="NOT_FOUND",qn[qn.ALREADY_EXISTS=6]="ALREADY_EXISTS",qn[qn.PERMISSION_DENIED=7]="PERMISSION_DENIED",qn[qn.UNAUTHENTICATED=16]="UNAUTHENTICATED",qn[qn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",qn[qn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",qn[qn.ABORTED=10]="ABORTED",qn[qn.OUT_OF_RANGE=11]="OUT_OF_RANGE",qn[qn.UNIMPLEMENTED=12]="UNIMPLEMENTED",qn[qn.INTERNAL=13]="INTERNAL",qn[qn.UNAVAILABLE=14]="UNAVAILABLE",qn[qn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D0n(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L0n=new Kb([4294967295,4294967295],0);function Jve(e){const t=D0n().encode(e),n=new Fgn;return n.update(t),new Uint8Array(n.digest())}function Zve(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Kb([n,r],0),new Kb([i,s],0)]}class vre{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new TT(`Invalid padding: ${n}`);if(r<0)throw new TT(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new TT(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new TT(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*t.length-n,this.Ee=Kb.fromNumber(this.Te)}de(t,n,r){let i=t.add(n.multiply(Kb.fromNumber(r)));return i.compare(L0n)===1&&(i=new Kb([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Te===0)return!1;const n=Jve(t),[r,i]=Zve(n);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);if(!this.Ae(o))return!1}return!0}static create(t,n,r){const i=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),o=new vre(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(t){if(this.Te===0)return;const n=Jve(t),[r,i]=Zve(n);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);this.Re(o)}}Re(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class TT extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z5{constructor(t,n,r,i,s){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const i=new Map;return i.set(t,pO.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new Z5(en.min(),i,new wi(cr),Up(),On())}}class pO{constructor(t,n,r,i,s){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new pO(r,n,On(),On(),On())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z${constructor(t,n,r,i){this.Ve=t,this.removedTargetIds=n,this.key=r,this.me=i}}class $Ue{constructor(t,n){this.targetId=t,this.fe=n}}class RUe{constructor(t,n,r=ia.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i}}class e_e{constructor(){this.ge=0,this.pe=n_e(),this.ye=ia.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(t){t.approximateByteSize()>0&&(this.Se=!0,this.ye=t)}ve(){let t=On(),n=On(),r=On();return this.pe.forEach((i,s)=>{switch(s){case 0:t=t.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Yt()}}),new pO(this.ye,this.we,t,n,r)}Fe(){this.Se=!1,this.pe=n_e()}Me(t,n){this.Se=!0,this.pe=this.pe.insert(t,n)}xe(t){this.Se=!0,this.pe=this.pe.remove(t)}Oe(){this.ge+=1}Ne(){this.ge-=1,Vr(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class M0n{constructor(t){this.Le=t,this.ke=new Map,this.qe=Up(),this.Qe=t_e(),this.Ke=new wi(cr)}$e(t){for(const n of t.Ve)t.me&&t.me.isFoundDocument()?this.Ue(n,t.me):this.We(n,t.key,t.me);for(const n of t.removedTargetIds)this.We(n,t.key,t.me)}Ge(t){this.forEachTarget(t,n=>{const r=this.ze(n);switch(t.state){case 0:this.je(n)&&r.Ce(t.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(t.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Be(),r.Ce(t.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(t.resumeToken));break;default:Yt()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ke.forEach((r,i)=>{this.je(i)&&n(i)})}Je(t){const n=t.targetId,r=t.fe.count,i=this.Ye(n);if(i){const s=i.target;if(sW(s))if(r===0){const o=new Lt(s.path);this.We(n,o,zo.newNoDocument(o,en.min()))}else Vr(r===1);else{const o=this.Ze(n);if(o!==r){const a=this.Xe(t),u=a?this.et(a,t,o):1;if(u!==0){this.He(n);const l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,l)}}}}}Xe(t){const n=t.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=fv(r).toUint8Array()}catch(u){if(u instanceof uUe)return dC("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new vre(o,i,s)}catch(u){return dC(u instanceof TT?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Te===0?null:a}et(t,n,r){return n.fe.count===r-this.rt(t,n.targetId)?0:2}rt(t,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.mightContain(a)||(this.We(n,s,null),i++)}),i}it(t){const n=new Map;this.ke.forEach((s,o)=>{const a=this.Ye(o);if(a){if(s.current&&sW(a.target)){const u=new Lt(a.target.path);this.qe.get(u)!==null||this.st(o,u)||this.We(o,u,zo.newNoDocument(u,t))}s.De&&(n.set(o,s.ve()),s.Fe())}});let r=On();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const l=this.Ye(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.qe.forEach((s,o)=>o.setReadTime(t));const i=new Z5(t,n,this.Ke,this.qe,r);return this.qe=Up(),this.Qe=t_e(),this.Ke=new wi(cr),i}Ue(t,n){if(!this.je(t))return;const r=this.st(t,n.key)?2:0;this.ze(t).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(t))}We(t,n,r){if(!this.je(t))return;const i=this.ze(t);this.st(t,n)?i.Me(n,1):i.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(t)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(t){this.ke.delete(t)}Ze(t){const n=this.ze(t).ve();return this.Le.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Oe(t){this.ze(t).Oe()}ze(t){let n=this.ke.get(t);return n||(n=new e_e,this.ke.set(t,n)),n}ot(t){let n=this.Qe.get(t);return n||(n=new _o(cr),this.Qe=this.Qe.insert(t,n)),n}je(t){const n=this.Ye(t)!==null;return n||xt("WatchChangeAggregator","Detected inactive target",t),n}Ye(t){const n=this.ke.get(t);return n&&n.be?null:this.Le._t(t)}He(t){this.ke.set(t,new e_e),this.Le.getRemoteKeysForTarget(t).forEach(n=>{this.We(t,n,null)})}st(t,n){return this.Le.getRemoteKeysForTarget(t).has(n)}}function t_e(){return new wi(Lt.comparator)}function n_e(){return new wi(Lt.comparator)}const F0n={asc:"ASCENDING",desc:"DESCENDING"},B0n={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},j0n={and:"AND",or:"OR"};class z0n{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function uW(e,t){return e.useProto3Json||Y5(t)?t:{value:t}}function lM(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function NUe(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function U0n(e,t){return lM(e,t.toTimestamp())}function Nd(e){return Vr(!!e),en.fromTimestamp(function(n){const r=y0(n);return new Es(r.seconds,r.nanos)}(e))}function _re(e,t){return function(r){return new Jr(["projects",r.projectId,"databases",r.database])}(e).child("documents").child(t).canonicalString()}function DUe(e){const t=Jr.fromString(e);return Vr(BUe(t)),t}function lW(e,t){return _re(e.databaseId,t.path)}function E7(e,t){const n=DUe(t);if(n.get(1)!==e.databaseId.projectId)throw new ct($e.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new ct($e.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Lt(LUe(n))}function cW(e,t){return _re(e.databaseId,t)}function V0n(e){const t=DUe(e);return t.length===4?Jr.emptyPath():LUe(t)}function fW(e){return new Jr(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function LUe(e){return Vr(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function r_e(e,t,n){return{name:lW(e,t),fields:n.value.mapValue.fields}}function H0n(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:Yt()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(l,c){return l.useProto3Json?(Vr(c===void 0||typeof c=="string"),ia.fromBase64String(c||"")):(Vr(c===void 0||c instanceof Uint8Array),ia.fromUint8Array(c||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(l){const c=l.code===void 0?$e.UNKNOWN:kUe(l.code);return new ct(c,l.message||"")}(o);n=new RUe(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=E7(e,r.document.name),s=Nd(r.document.updateTime),o=r.document.createTime?Nd(r.document.createTime):en.min(),a=new jl({mapValue:{fields:r.document.fields}}),u=zo.newFoundDocument(i,s,o,a),l=r.targetIds||[],c=r.removedTargetIds||[];n=new z$(l,c,u.key,u)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=E7(e,r.document),s=r.readTime?Nd(r.readTime):en.min(),o=zo.newNoDocument(i,s),a=r.removedTargetIds||[];n=new z$([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=E7(e,r.document),s=r.removedTargetIds||[];n=new z$([],s,i,null)}else{if(!("filter"in t))return Yt();{t.filter;const r=t.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new R0n(i,s),a=r.targetId;n=new $Ue(a,o)}}return n}function q0n(e,t){let n;if(t instanceof hO)n={update:r_e(e,t.key,t.value)};else if(t instanceof PUe)n={delete:lW(e,t.key)};else if(t instanceof Qv)n={update:r_e(e,t.key,t.data),updateMask:eyn(t.fieldMask)};else{if(!(t instanceof P0n))return Yt();n={verify:lW(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof vC)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof _C)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof bC)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof uM)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw Yt()}(0,r))),t.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:U0n(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Yt()}(e,t.precondition)),n}function W0n(e,t){return e&&e.length>0?(Vr(t!==void 0),e.map(n=>function(i,s){let o=i.updateTime?Nd(i.updateTime):Nd(s);return o.isEqual(en.min())&&(o=Nd(s)),new C0n(o,i.transformResults||[])}(n,t))):[]}function G0n(e,t){return{documents:[cW(e,t.path)]}}function Y0n(e,t){const n={structuredQuery:{}},r=t.path;t.collectionGroup!==null?(n.parent=cW(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=cW(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(u){if(u.length!==0)return FUe(gf.create(u,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const s=function(u){if(u.length!==0)return u.map(l=>function(f){return{field:M_(f.field),direction:Q0n(f.dir)}}(l))}(t.orderBy);s&&(n.structuredQuery.orderBy=s);const o=uW(e,t.limit);return o!==null&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(t.endAt)),n}function K0n(e){let t=V0n(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Vr(r===1);const c=n.from[0];c.allDescendants?i=c.collectionId:t=t.child(c.collectionId)}let s=[];n.where&&(s=function(f){const d=MUe(f);return d instanceof gf&&dUe(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(d=>function(p){return new yC(F_(p.field),function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(d))}(n.orderBy));let a=null;n.limit&&(a=function(f){let d;return d=typeof f=="object"?f.value:f,Y5(d)?null:d}(n.limit));let u=null;n.startAt&&(u=function(f){const d=!!f.before,h=f.values||[];return new aM(h,d)}(n.startAt));let l=null;return n.endAt&&(l=function(f){const d=!f.before,h=f.values||[];return new aM(h,d)}(n.endAt)),h0n(t,i,o,s,a,"F",u,l)}function X0n(e,t){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Yt()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function MUe(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=F_(n.unaryFilter.field);return ns.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=F_(n.unaryFilter.field);return ns.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=F_(n.unaryFilter.field);return ns.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=F_(n.unaryFilter.field);return ns.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Yt()}}(e):e.fieldFilter!==void 0?function(n){return ns.create(F_(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Yt()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return gf.create(n.compositeFilter.filters.map(r=>MUe(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Yt()}}(n.compositeFilter.op))}(e):Yt()}function Q0n(e){return F0n[e]}function J0n(e){return B0n[e]}function Z0n(e){return j0n[e]}function M_(e){return{fieldPath:e.canonicalString()}}function F_(e){return co.fromServerFormat(e.fieldPath)}function FUe(e){return e instanceof ns?function(n){if(n.op==="=="){if(Vve(n.value))return{unaryFilter:{field:M_(n.field),op:"IS_NAN"}};if(Uve(n.value))return{unaryFilter:{field:M_(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Vve(n.value))return{unaryFilter:{field:M_(n.field),op:"IS_NOT_NAN"}};if(Uve(n.value))return{unaryFilter:{field:M_(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:M_(n.field),op:J0n(n.op),value:n.value}}}(e):e instanceof gf?function(n){const r=n.getFilters().map(i=>FUe(i));return r.length===1?r[0]:{compositeFilter:{op:Z0n(n.op),filters:r}}}(e):Yt()}function eyn(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function BUe(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{constructor(t,n,r,i,s=en.min(),o=en.min(),a=ia.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(t){return new ag(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new ag(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new ag(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new ag(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tyn{constructor(t){this.ut=t}}function nyn(e){const t=K0n({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?aW(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ryn{constructor(){this.on=new iyn}addToCollectionParentIndex(t,n){return this.on.add(n),Me.resolve()}getCollectionParents(t,n){return Me.resolve(this.on.getEntries(n))}addFieldIndex(t,n){return Me.resolve()}deleteFieldIndex(t,n){return Me.resolve()}deleteAllFieldIndexes(t){return Me.resolve()}createTargetIndexes(t,n){return Me.resolve()}getDocumentsMatchingTarget(t,n){return Me.resolve(null)}getIndexType(t,n){return Me.resolve(0)}getFieldIndexes(t,n){return Me.resolve([])}getNextCollectionGroupToUpdate(t){return Me.resolve(null)}getMinOffset(t,n){return Me.resolve(g0.min())}getMinOffsetFromCollectionGroup(t,n){return Me.resolve(g0.min())}updateCollectionGroup(t,n,r){return Me.resolve()}updateIndexEntries(t,n){return Me.resolve()}}class iyn{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n]||new _o(Jr.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(t){return(this.index[t]||new _o(Jr.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hE{constructor(t){this.xn=t}next(){return this.xn+=2,this.xn}static On(){return new hE(0)}static Nn(){return new hE(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class syn{constructor(){this.changes=new xx(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,zo.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Me.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oyn{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ayn{constructor(t,n,r,i){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(t,n))).next(i=>(r!==null&&I2(r.mutation,i,Qc.empty(),Es.now()),i))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,On()).next(()=>r))}getLocalViewOfDocuments(t,n,r=On()){const i=r1();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,r).next(s=>{let o=ST();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(t,n){const r=r1();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,On()))}populateOverlays(t,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(t,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(t,n,r,i){let s=Up();const o=C2(),a=function(){return C2()}();return n.forEach((u,l)=>{const c=r.get(l.key);i.has(l.key)&&(c===void 0||c.mutation instanceof Qv)?s=s.insert(l.key,l):c!==void 0?(o.set(l.key,c.mutation.getFieldMask()),I2(c.mutation,l,c.mutation.getFieldMask(),Es.now())):o.set(l.key,Qc.empty())}),this.recalculateAndSaveOverlays(t,s).next(u=>(u.forEach((l,c)=>o.set(l,c)),n.forEach((l,c)=>{var f;return a.set(l,new oyn(c,(f=o.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(t,n){const r=C2();let i=new wi((o,a)=>o-a),s=On();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const l=n.get(u);if(l===null)return;let c=r.get(u)||Qc.empty();c=a.applyToLocalView(l,c),r.set(u,c);const f=(i.get(a.batchId)||On()).add(u);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),l=u.key,c=u.value,f=wUe();c.forEach(d=>{if(!s.has(d)){const h=IUe(n.get(d),r.get(d));h!==null&&f.set(d,h),s=s.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(t,l,f))}return Me.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,i){return function(o){return Lt.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):gUe(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,i):this.getDocumentsMatchingCollectionQuery(t,n,r,i)}getNextDocuments(t,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,i-s.size):Me.resolve(r1());let a=-1,u=s;return o.next(l=>Me.forEach(l,(c,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(c)?Me.resolve():this.remoteDocumentCache.getEntry(t,c).next(d=>{u=u.insert(c,d)}))).next(()=>this.populateOverlays(t,l,s)).next(()=>this.computeViews(t,u,l,On())).next(c=>({batchId:a,changes:bUe(c)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new Lt(n)).next(r=>{let i=ST();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(t,n,r,i){const s=n.collectionGroup;let o=ST();return this.indexManager.getCollectionParents(t,s).next(a=>Me.forEach(a,u=>{const l=function(f,d){return new Ex(d,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(t,l,r,i).next(c=>{c.forEach((f,d)=>{o=o.insert(f,d)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,s,i))).next(o=>{s.forEach((u,l)=>{const c=l.getKey();o.get(c)===null&&(o=o.insert(c,zo.newInvalidDocument(c)))});let a=ST();return o.forEach((u,l)=>{const c=s.get(u);c!==void 0&&I2(c.mutation,l,Qc.empty(),Es.now()),X5(n,l)&&(a=a.insert(u,l))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uyn{constructor(t){this.serializer=t,this.ur=new Map,this.cr=new Map}getBundleMetadata(t,n){return Me.resolve(this.ur.get(n))}saveBundleMetadata(t,n){return this.ur.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Nd(i.createTime)}}(n)),Me.resolve()}getNamedQuery(t,n){return Me.resolve(this.cr.get(n))}saveNamedQuery(t,n){return this.cr.set(n.name,function(i){return{name:i.name,query:nyn(i.bundledQuery),readTime:Nd(i.readTime)}}(n)),Me.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lyn{constructor(){this.overlays=new wi(Lt.comparator),this.lr=new Map}getOverlay(t,n){return Me.resolve(this.overlays.get(n))}getOverlays(t,n){const r=r1();return Me.forEach(n,i=>this.getOverlay(t,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((i,s)=>{this.lt(t,n,s)}),Me.resolve()}removeOverlaysForBatchId(t,n,r){const i=this.lr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.lr.delete(r)),Me.resolve()}getOverlaysForCollection(t,n,r){const i=r1(),s=n.length+1,o=new Lt(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return Me.resolve(i)}getOverlaysForCollectionGroup(t,n,r,i){let s=new wi((l,c)=>l-c);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let c=s.get(l.largestBatchId);c===null&&(c=r1(),s=s.insert(l.largestBatchId,c)),c.set(l.getKey(),l)}}const a=r1(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,c)=>a.set(l,c)),!(a.size()>=i)););return Me.resolve(a)}lt(t,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.lr.get(i.largestBatchId).delete(r.key);this.lr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new $0n(n,r));let s=this.lr.get(n);s===void 0&&(s=On(),this.lr.set(n,s)),this.lr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bre{constructor(){this.hr=new _o($s.Pr),this.Ir=new _o($s.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(t,n){const r=new $s(t,n);this.hr=this.hr.add(r),this.Ir=this.Ir.add(r)}Er(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.dr(new $s(t,n))}Ar(t,n){t.forEach(r=>this.removeReference(r,n))}Rr(t){const n=new Lt(new Jr([])),r=new $s(n,t),i=new $s(n,t+1),s=[];return this.Ir.forEachInRange([r,i],o=>{this.dr(o),s.push(o.key)}),s}Vr(){this.hr.forEach(t=>this.dr(t))}dr(t){this.hr=this.hr.delete(t),this.Ir=this.Ir.delete(t)}mr(t){const n=new Lt(new Jr([])),r=new $s(n,t),i=new $s(n,t+1);let s=On();return this.Ir.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(t){const n=new $s(t,0),r=this.hr.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class $s{constructor(t,n){this.key=t,this.gr=n}static Pr(t,n){return Lt.comparator(t.key,n.key)||cr(t.gr,n.gr)}static Tr(t,n){return cr(t.gr,n.gr)||Lt.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cyn{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.pr=1,this.yr=new _o($s.Pr)}checkEmpty(t){return Me.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,i){const s=this.pr;this.pr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new k0n(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.yr=this.yr.add(new $s(a.key,s)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return Me.resolve(o)}lookupMutationBatch(t,n){return Me.resolve(this.wr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,i=this.Sr(r),s=i<0?0:i;return Me.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Me.resolve(this.mutationQueue.length===0?-1:this.pr-1)}getAllMutationBatches(t){return Me.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new $s(n,0),i=new $s(n,Number.POSITIVE_INFINITY),s=[];return this.yr.forEachInRange([r,i],o=>{const a=this.wr(o.gr);s.push(a)}),Me.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new _o(cr);return n.forEach(i=>{const s=new $s(i,0),o=new $s(i,Number.POSITIVE_INFINITY);this.yr.forEachInRange([s,o],a=>{r=r.add(a.gr)})}),Me.resolve(this.br(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,i=r.length+1;let s=r;Lt.isDocumentKey(s)||(s=s.child(""));const o=new $s(new Lt(s),0);let a=new _o(cr);return this.yr.forEachWhile(u=>{const l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.gr)),!0)},o),Me.resolve(this.br(a))}br(t){const n=[];return t.forEach(r=>{const i=this.wr(r);i!==null&&n.push(i)}),n}removeMutationBatch(t,n){Vr(this.Dr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.yr;return Me.forEach(n.mutations,i=>{const s=new $s(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.yr=r})}Fn(t){}containsKey(t,n){const r=new $s(n,0),i=this.yr.firstAfterOrEqual(r);return Me.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,Me.resolve()}Dr(t,n){return this.Sr(t)}Sr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}wr(t){const n=this.Sr(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fyn{constructor(t){this.Cr=t,this.docs=function(){return new wi(Lt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Cr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return Me.resolve(r?r.document.mutableCopy():zo.newInvalidDocument(n))}getEntries(t,n){let r=Up();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():zo.newInvalidDocument(i))}),Me.resolve(r)}getDocumentsMatchingQuery(t,n,r,i){let s=Up();const o=n.path,a=new Lt(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:l,value:{document:c}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||Xgn(Kgn(c),r)<=0||(i.has(c.key)||X5(n,c))&&(s=s.insert(c.key,c.mutableCopy()))}return Me.resolve(s)}getAllFromCollectionGroup(t,n,r,i){Yt()}vr(t,n){return Me.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new dyn(this)}getSize(t){return Me.resolve(this.size)}}class dyn extends syn{constructor(t){super(),this._r=t}applyChanges(t){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this._r.addEntry(t,i)):this._r.removeEntry(r)}),Me.waitFor(n)}getFromCache(t,n){return this._r.getEntry(t,n)}getAllFromCache(t,n){return this._r.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hyn{constructor(t){this.persistence=t,this.Fr=new xx(n=>pre(n),mre),this.lastRemoteSnapshotVersion=en.min(),this.highestTargetId=0,this.Mr=0,this.Or=new bre,this.targetCount=0,this.Nr=hE.On()}forEachTarget(t,n){return this.Fr.forEach((r,i)=>n(i)),Me.resolve()}getLastRemoteSnapshotVersion(t){return Me.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Me.resolve(this.Mr)}allocateTargetId(t){return this.highestTargetId=this.Nr.next(),Me.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Mr&&(this.Mr=n),Me.resolve()}kn(t){this.Fr.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.Nr=new hE(n),this.highestTargetId=n),t.sequenceNumber>this.Mr&&(this.Mr=t.sequenceNumber)}addTargetData(t,n){return this.kn(n),this.targetCount+=1,Me.resolve()}updateTargetData(t,n){return this.kn(n),Me.resolve()}removeTargetData(t,n){return this.Fr.delete(n.target),this.Or.Rr(n.targetId),this.targetCount-=1,Me.resolve()}removeTargets(t,n,r){let i=0;const s=[];return this.Fr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Fr.delete(o),s.push(this.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),Me.waitFor(s).next(()=>i)}getTargetCount(t){return Me.resolve(this.targetCount)}getTargetData(t,n){const r=this.Fr.get(n)||null;return Me.resolve(r)}addMatchingKeys(t,n,r){return this.Or.Er(n,r),Me.resolve()}removeMatchingKeys(t,n,r){this.Or.Ar(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(t,o))}),Me.waitFor(s)}removeMatchingKeysForTargetId(t,n){return this.Or.Rr(n),Me.resolve()}getMatchingKeysForTargetId(t,n){const r=this.Or.mr(n);return Me.resolve(r)}containsKey(t,n){return Me.resolve(this.Or.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pyn{constructor(t,n){this.Br={},this.overlays={},this.Lr=new cre(0),this.kr=!1,this.kr=!0,this.referenceDelegate=t(this),this.qr=new hyn(this),this.indexManager=new ryn,this.remoteDocumentCache=function(i){return new fyn(i)}(r=>this.referenceDelegate.Qr(r)),this.serializer=new tyn(n),this.Kr=new uyn(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new lyn,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.Br[t.toKey()];return r||(r=new cyn(n,this.referenceDelegate),this.Br[t.toKey()]=r),r}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(t,n,r){xt("MemoryPersistence","Starting transaction:",t);const i=new myn(this.Lr.next());return this.referenceDelegate.$r(),r(i).next(s=>this.referenceDelegate.Ur(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Wr(t,n){return Me.or(Object.values(this.Br).map(r=>()=>r.containsKey(t,n)))}}class myn extends Jgn{constructor(t){super(),this.currentSequenceNumber=t}}class wre{constructor(t){this.persistence=t,this.Gr=new bre,this.zr=null}static jr(t){return new wre(t)}get Hr(){if(this.zr)return this.zr;throw Yt()}addReference(t,n,r){return this.Gr.addReference(r,n),this.Hr.delete(r.toString()),Me.resolve()}removeReference(t,n,r){return this.Gr.removeReference(r,n),this.Hr.add(r.toString()),Me.resolve()}markPotentiallyOrphaned(t,n){return this.Hr.add(n.toString()),Me.resolve()}removeTarget(t,n){this.Gr.Rr(n.targetId).forEach(i=>this.Hr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(i=>{i.forEach(s=>this.Hr.add(s.toString()))}).next(()=>r.removeTargetData(t,n))}$r(){this.zr=new Set}Ur(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Me.forEach(this.Hr,r=>{const i=Lt.fromPath(r);return this.Jr(t,i).next(s=>{s||n.removeEntry(i,en.min())})}).next(()=>(this.zr=null,n.apply(t)))}updateLimboDocument(t,n){return this.Jr(t,n).next(r=>{r?this.Hr.delete(n.toString()):this.Hr.add(n.toString())})}Qr(t){return 0}Jr(t,n){return Me.or([()=>Me.resolve(this.Gr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Wr(t,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ere{constructor(t,n,r,i){this.targetId=t,this.fromCache=n,this.ki=r,this.qi=i}static Qi(t,n){let r=On(),i=On();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Ere(t,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gyn{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yyn{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}initialize(t,n){this.Gi=t,this.indexManager=n,this.Ki=!0}getDocumentsMatchingQuery(t,n,r,i){const s={result:null};return this.zi(t,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ji(t,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new gyn;return this.Hi(t,n,o).next(a=>{if(s.result=a,this.$i)return this.Ji(t,n,o,a.size)})}).next(()=>s.result)}Ji(t,n,r,i){return r.documentReadCount<this.Ui?(NS()<=Fn.DEBUG&&xt("QueryEngine","SDK will not create cache indexes for query:",L_(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),Me.resolve()):(NS()<=Fn.DEBUG&&xt("QueryEngine","Query:",L_(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Wi*i?(NS()<=Fn.DEBUG&&xt("QueryEngine","The SDK decides to create cache indexes for query:",L_(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Rd(n))):Me.resolve())}zi(t,n){if(Gve(n))return Me.resolve(null);let r=Rd(n);return this.indexManager.getIndexType(t,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=aW(n,null,"F"),r=Rd(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(s=>{const o=On(...s);return this.Gi.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,r).next(u=>{const l=this.Yi(n,a);return this.Zi(n,l,o,u.readTime)?this.zi(t,aW(n,null,"F")):this.Xi(t,l,n,u)}))})))}ji(t,n,r,i){return Gve(n)||i.isEqual(en.min())?Me.resolve(null):this.Gi.getDocuments(t,r).next(s=>{const o=this.Yi(n,s);return this.Zi(n,o,r,i)?Me.resolve(null):(NS()<=Fn.DEBUG&&xt("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),L_(n)),this.Xi(t,o,n,Ygn(i,-1)).next(a=>a))})}Yi(t,n){let r=new _o(vUe(t));return n.forEach((i,s)=>{X5(t,s)&&(r=r.add(s))}),r}Zi(t,n,r,i){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const s=t.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Hi(t,n,r){return NS()<=Fn.DEBUG&&xt("QueryEngine","Using full collection scan to execute query:",L_(n)),this.Gi.getDocumentsMatchingQuery(t,n,g0.min(),r)}Xi(t,n,r,i){return this.Gi.getDocumentsMatchingQuery(t,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vyn{constructor(t,n,r,i){this.persistence=t,this.es=n,this.serializer=i,this.ts=new wi(cr),this.ns=new xx(s=>pre(s),mre),this.rs=new Map,this.ss=t.getRemoteDocumentCache(),this.qr=t.getTargetCache(),this.Kr=t.getBundleCache(),this.os(r)}os(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new ayn(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.ts))}}function _yn(e,t,n,r){return new vyn(e,t,n,r)}async function jUe(e,t){const n=an(e);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.os(t),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=On();for(const l of i){o.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}for(const l of s){a.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}return n.localDocuments.getDocuments(r,u).next(l=>({_s:l,removedBatchIds:o,addedBatchIds:a}))})})}function byn(e,t){const n=an(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=t.batch.keys(),s=n.ss.newChangeBuffer({trackRemovals:!0});return function(a,u,l,c){const f=l.batch,d=f.keys();let h=Me.resolve();return d.forEach(p=>{h=h.next(()=>c.getEntry(u,p)).next(m=>{const g=l.docVersions.get(p);Vr(g!==null),m.version.compareTo(g)<0&&(f.applyToRemoteDocument(m,l),m.isValidDocument()&&(m.setReadTime(l.commitVersion),c.addEntry(m)))})}),h.next(()=>a.mutationQueue.removeMutationBatch(u,f))}(n,r,t,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=On();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(t))).next(()=>n.localDocuments.getDocuments(r,i))})}function zUe(e){const t=an(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.qr.getLastRemoteSnapshotVersion(n))}function wyn(e,t){const n=an(e),r=t.snapshotVersion;let i=n.ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.ss.newChangeBuffer({trackRemovals:!0});i=n.ts;const a=[];t.targetChanges.forEach((c,f)=>{const d=i.get(f);if(!d)return;a.push(n.qr.removeMatchingKeys(s,c.removedDocuments,f).next(()=>n.qr.addMatchingKeys(s,c.addedDocuments,f)));let h=d.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(f)!==null?h=h.withResumeToken(ia.EMPTY_BYTE_STRING,en.min()).withLastLimboFreeSnapshotVersion(en.min()):c.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(c.resumeToken,r)),i=i.insert(f,h),function(m,g,y){return m.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=3e8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(d,h,c)&&a.push(n.qr.updateTargetData(s,h))});let u=Up(),l=On();if(t.documentUpdates.forEach(c=>{t.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(Eyn(s,o,t.documentUpdates).next(c=>{u=c.us,l=c.cs})),!r.isEqual(en.min())){const c=n.qr.getLastRemoteSnapshotVersion(s).next(f=>n.qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(c)}return Me.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(n.ts=i,s))}function Eyn(e,t,n){let r=On(),i=On();return n.forEach(s=>r=r.add(s)),t.getEntries(e,r).next(s=>{let o=Up();return n.forEach((a,u)=>{const l=s.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(en.min())?(t.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(t.addEntry(u),o=o.insert(a,u)):xt("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{us:o,cs:i}})}function xyn(e,t){const n=an(e);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function Syn(e,t){const n=an(e);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.qr.getTargetData(r,t).next(s=>s?(i=s,Me.resolve(i)):n.qr.allocateTargetId(r).next(o=>(i=new ag(t,o,"TargetPurposeListen",r.currentSequenceNumber),n.qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ts.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ts=n.ts.insert(r.targetId,r),n.ns.set(t,r.targetId)),r})}async function dW(e,t,n){const r=an(e),i=r.ts.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!dO(o))throw o;xt("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}r.ts=r.ts.remove(t),r.ns.delete(i.target)}function i_e(e,t,n){const r=an(e);let i=en.min(),s=On();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,l,c){const f=an(u),d=f.ns.get(c);return d!==void 0?Me.resolve(f.ts.get(d)):f.qr.getTargetData(l,c)}(r,o,Rd(t)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.qr.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.es.getDocumentsMatchingQuery(o,t,n?i:en.min(),n?s:On())).next(a=>(Tyn(r,m0n(t),a),{documents:a,ls:s})))}function Tyn(e,t,n){let r=e.rs.get(t)||en.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),e.rs.set(t,r)}class s_e{constructor(){this.activeTargetIds=w0n()}ds(t){this.activeTargetIds=this.activeTargetIds.add(t)}As(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Es(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Ayn{constructor(){this.eo=new s_e,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t){return this.eo.ds(t),this.no[t]||"not-current"}updateQueryState(t,n,r){this.no[t]=n}removeLocalQueryTarget(t){this.eo.As(t)}isLocalQueryTarget(t){return this.eo.activeTargetIds.has(t)}clearQueryState(t){delete this.no[t]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(t){return this.eo.activeTargetIds.has(t)}start(){return this.eo=new s_e,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cyn{ro(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o_e{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(t){this.ao.push(t)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){xt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.ao)t(0)}_o(){xt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.ao)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bk=null;function x7(){return bk===null?bk=function(){return 268435456+Math.round(2147483648*Math.random())}():bk++,"0x"+bk.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iyn={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oyn{constructor(t){this.co=t.co,this.lo=t.lo}ho(t){this.Po=t}Io(t){this.To=t}onMessage(t){this.Eo=t}close(){this.lo()}send(t){this.co(t)}Ao(){this.Po()}Ro(t){this.To(t)}Vo(t){this.Eo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $o="WebChannelConnection";class Pyn extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.mo=r+"://"+n.host,this.fo=`projects/${i}/databases/${s}`,this.po=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get yo(){return!1}wo(n,r,i,s,o){const a=x7(),u=this.So(n,r);xt("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);const l={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(l,s,o),this.Do(n,u,l,i).then(c=>(xt("RestConnection",`Received RPC '${n}' ${a}: `,c),c),c=>{throw dC("RestConnection",`RPC '${n}' ${a} failed with error: `,c,"url: ",u,"request:",i),c})}Co(n,r,i,s,o,a){return this.wo(n,r,i,s,o)}bo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+bx}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}So(n,r){const i=Iyn[n];return`${this.mo}/v1/${r}:${i}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Do(t,n,r,i){const s=x7();return new Promise((o,a)=>{const u=new Mgn;u.setWithCredentials(!0),u.listenOnce(Dgn.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case w7.NO_ERROR:const c=u.getResponseJson();xt($o,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(c)),o(c);break;case w7.TIMEOUT:xt($o,`RPC '${t}' ${s} timed out`),a(new ct($e.DEADLINE_EXCEEDED,"Request time out"));break;case w7.HTTP_ERROR:const f=u.getStatus();if(xt($o,`RPC '${t}' ${s} failed with status:`,f,"response text:",u.getResponseText()),f>0){let d=u.getResponseJson();Array.isArray(d)&&(d=d[0]);const h=d==null?void 0:d.error;if(h&&h.status&&h.message){const p=function(g){const y=g.toLowerCase().replace(/_/g,"-");return Object.values($e).indexOf(y)>=0?y:$e.UNKNOWN}(h.status);a(new ct(p,h.message))}else a(new ct($e.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new ct($e.UNAVAILABLE,"Connection failed."));break;default:Yt()}}finally{xt($o,`RPC '${t}' ${s} completed.`)}});const l=JSON.stringify(i);xt($o,`RPC '${t}' ${s} sending request:`,i),u.send(n,"POST",l,r,15)})}vo(t,n,r){const i=x7(),s=[this.mo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=Rgn(),a=Ngn(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.bo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const c=s.join("");xt($o,`Creating RPC '${t}' stream ${i}: ${c}`,u);const f=o.createWebChannel(c,u);let d=!1,h=!1;const p=new Oyn({co:g=>{h?xt($o,`Not sending because RPC '${t}' stream ${i} is closed:`,g):(d||(xt($o,`Opening RPC '${t}' stream ${i} transport.`),f.open(),d=!0),xt($o,`RPC '${t}' stream ${i} sending:`,g),f.send(g))},lo:()=>f.close()}),m=(g,y,v)=>{g.listen(y,_=>{try{v(_)}catch(b){setTimeout(()=>{throw b},0)}})};return m(f,yk.EventType.OPEN,()=>{h||xt($o,`RPC '${t}' stream ${i} transport opened.`)}),m(f,yk.EventType.CLOSE,()=>{h||(h=!0,xt($o,`RPC '${t}' stream ${i} transport closed`),p.Ro())}),m(f,yk.EventType.ERROR,g=>{h||(h=!0,dC($o,`RPC '${t}' stream ${i} transport errored:`,g),p.Ro(new ct($e.UNAVAILABLE,"The operation could not be completed")))}),m(f,yk.EventType.MESSAGE,g=>{var y;if(!h){const v=g.data[0];Vr(!!v);const _=v,b=_.error||((y=_[0])===null||y===void 0?void 0:y.error);if(b){xt($o,`RPC '${t}' stream ${i} received error:`,b);const E=b.status;let w=function(I){const C=Ki[I];if(C!==void 0)return kUe(C)}(E),x=b.message;w===void 0&&(w=$e.INTERNAL,x="Unknown error status: "+E+" with message "+b.message),h=!0,p.Ro(new ct(w,x)),f.close()}else xt($o,`RPC '${t}' stream ${i} received:`,v),p.Vo(v)}}),m(a,Lgn.STAT_EVENT,g=>{g.stat===Lve.PROXY?xt($o,`RPC '${t}' stream ${i} detected buffering proxy`):g.stat===Lve.NOPROXY&&xt($o,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.Ao()},0),p}}function S7(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e8(e){return new z0n(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UUe{constructor(t,n,r=1e3,i=1.5,s=6e4){this.si=t,this.timerId=n,this.Fo=r,this.Mo=i,this.xo=s,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(t){this.cancel();const n=Math.floor(this.Oo+this.qo()),r=Math.max(0,Date.now()-this.Bo),i=Math.max(0,n-r);i>0&&xt("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Oo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.No=this.si.enqueueAfterDelay(this.timerId,i,()=>(this.Bo=Date.now(),t())),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){this.No!==null&&(this.No.skipDelay(),this.No=null)}cancel(){this.No!==null&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VUe{constructor(t,n,r,i,s,o,a,u){this.si=t,this.Ko=r,this.$o=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new UUe(t,n)}jo(){return this.state===1||this.state===5||this.Ho()}Ho(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Jo()}async stop(){this.jo()&&await this.close(0)}Yo(){this.state=0,this.zo.reset()}Zo(){this.Ho()&&this.Wo===null&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,()=>this.Xo()))}e_(t){this.t_(),this.stream.send(t)}async Xo(){if(this.Ho())return this.close(0)}t_(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}async close(t,n){this.t_(),this.n_(),this.zo.cancel(),this.Uo++,t!==4?this.zo.reset():n&&n.code===$e.RESOURCE_EXHAUSTED?(zp(n.toString()),zp("Using maximum backoff delay to prevent overloading the backend."),this.zo.Lo()):n&&n.code===$e.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.r_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Io(n)}r_(){}auth(){this.state=1;const t=this.i_(this.Uo),n=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Uo===n&&this.s_(r,i)},r=>{t(()=>{const i=new ct($e.UNKNOWN,"Fetching auth token failed: "+r.message);return this.o_(i)})})}s_(t,n){const r=this.i_(this.Uo);this.stream=this.__(t,n),this.stream.ho(()=>{r(()=>(this.state=2,this.Go=this.si.enqueueAfterDelay(this.$o,1e4,()=>(this.Ho()&&(this.state=3),Promise.resolve())),this.listener.ho()))}),this.stream.Io(i=>{r(()=>this.o_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Jo(){this.state=5,this.zo.ko(async()=>{this.state=0,this.start()})}o_(t){return xt("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}i_(t){return n=>{this.si.enqueueAndForget(()=>this.Uo===t?n():(xt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class kyn extends VUe{constructor(t,n,r,i,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}__(t,n){return this.connection.vo("Listen",t,n)}onMessage(t){this.zo.reset();const n=H0n(this.serializer,t),r=function(s){if(!("targetChange"in s))return en.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?en.min():o.readTime?Nd(o.readTime):en.min()}(t);return this.listener.a_(n,r)}u_(t){const n={};n.database=fW(this.serializer),n.addTarget=function(s,o){let a;const u=o.target;if(a=sW(u)?{documents:G0n(s,u)}:{query:Y0n(s,u)},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=NUe(s,o.resumeToken);const l=uW(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(en.min())>0){a.readTime=lM(s,o.snapshotVersion.toTimestamp());const l=uW(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,t);const r=X0n(this.serializer,t);r&&(n.labels=r),this.e_(n)}c_(t){const n={};n.database=fW(this.serializer),n.removeTarget=t,this.e_(n)}}class $yn extends VUe{constructor(t,n,r,i,s,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.l_=!1}get h_(){return this.l_}start(){this.l_=!1,this.lastStreamToken=void 0,super.start()}r_(){this.l_&&this.P_([])}__(t,n){return this.connection.vo("Write",t,n)}onMessage(t){if(Vr(!!t.streamToken),this.lastStreamToken=t.streamToken,this.l_){this.zo.reset();const n=W0n(t.writeResults,t.commitTime),r=Nd(t.commitTime);return this.listener.I_(r,n)}return Vr(!t.writeResults||t.writeResults.length===0),this.l_=!0,this.listener.T_()}E_(){const t={};t.database=fW(this.serializer),this.e_(t)}P_(t){const n={streamToken:this.lastStreamToken,writes:t.map(r=>q0n(this.serializer,r))};this.e_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ryn extends class{}{constructor(t,n,r,i){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.d_=!1}A_(){if(this.d_)throw new ct($e.FAILED_PRECONDITION,"The client has already been terminated.")}wo(t,n,r){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.wo(t,n,r,i,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===$e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ct($e.UNKNOWN,i.toString())})}Co(t,n,r,i){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(t,n,r,s,o,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===$e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ct($e.UNKNOWN,s.toString())})}terminate(){this.d_=!0}}class Nyn{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}g_(){this.V_===0&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.m_=null,this.y_("Backend didn't respond within 10 seconds."),this.p_("Offline"),Promise.resolve())))}w_(t){this.state==="Online"?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.p_("Offline")))}set(t){this.S_(),this.V_=0,t==="Online"&&(this.f_=!1),this.p_(t)}p_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}y_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.f_?(zp(n),this.f_=!1):xt("OnlineStateTracker",n)}S_(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dyn{constructor(t,n,r,i,s){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=s,this.F_.ro(o=>{r.enqueueAndForget(async()=>{Jv(this)&&(xt("RemoteStore","Restarting streams for network reachability change."),await async function(u){const l=an(u);l.C_.add(4),await gO(l),l.M_.set("Unknown"),l.C_.delete(4),await mO(l)}(this))})}),this.M_=new Nyn(r,i)}}async function mO(e){if(Jv(e))for(const t of e.v_)await t(!0)}async function gO(e){for(const t of e.v_)await t(!1)}function HUe(e,t){const n=an(e);n.D_.has(t.targetId)||(n.D_.set(t.targetId,t),Tre(n)?Sre(n):Sx(n).Ho()&&xre(n,t))}function qUe(e,t){const n=an(e),r=Sx(n);n.D_.delete(t),r.Ho()&&WUe(n,t),n.D_.size===0&&(r.Ho()?r.Zo():Jv(n)&&n.M_.set("Unknown"))}function xre(e,t){if(e.x_.Oe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(en.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Sx(e).u_(t)}function WUe(e,t){e.x_.Oe(t),Sx(e).c_(t)}function Sre(e){e.x_=new M0n({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),_t:t=>e.D_.get(t)||null,nt:()=>e.datastore.serializer.databaseId}),Sx(e).start(),e.M_.g_()}function Tre(e){return Jv(e)&&!Sx(e).jo()&&e.D_.size>0}function Jv(e){return an(e).C_.size===0}function GUe(e){e.x_=void 0}async function Lyn(e){e.D_.forEach((t,n)=>{xre(e,t)})}async function Myn(e,t){GUe(e),Tre(e)?(e.M_.w_(t),Sre(e)):e.M_.set("Unknown")}async function Fyn(e,t,n){if(e.M_.set("Online"),t instanceof RUe&&t.state===2&&t.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.D_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.D_.delete(a),i.x_.removeTarget(a))}(e,t)}catch(r){xt("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),await cM(e,r)}else if(t instanceof z$?e.x_.$e(t):t instanceof $Ue?e.x_.Je(t):e.x_.Ge(t),!n.isEqual(en.min()))try{const r=await zUe(e.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.x_.it(o);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){const c=s.D_.get(l);c&&s.D_.set(l,c.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,l)=>{const c=s.D_.get(u);if(!c)return;s.D_.set(u,c.withResumeToken(ia.EMPTY_BYTE_STRING,c.snapshotVersion)),WUe(s,u);const f=new ag(c.target,u,l,c.sequenceNumber);xre(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(e,n)}catch(r){xt("RemoteStore","Failed to raise snapshot:",r),await cM(e,r)}}async function cM(e,t,n){if(!dO(t))throw t;e.C_.add(1),await gO(e),e.M_.set("Offline"),n||(n=()=>zUe(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{xt("RemoteStore","Retrying IndexedDB access"),await n(),e.C_.delete(1),await mO(e)})}function YUe(e,t){return t().catch(n=>cM(e,n,t))}async function t8(e){const t=an(e),n=v0(t);let r=t.b_.length>0?t.b_[t.b_.length-1].batchId:-1;for(;Byn(t);)try{const i=await xyn(t.localStore,r);if(i===null){t.b_.length===0&&n.Zo();break}r=i.batchId,jyn(t,i)}catch(i){await cM(t,i)}KUe(t)&&XUe(t)}function Byn(e){return Jv(e)&&e.b_.length<10}function jyn(e,t){e.b_.push(t);const n=v0(e);n.Ho()&&n.h_&&n.P_(t.mutations)}function KUe(e){return Jv(e)&&!v0(e).jo()&&e.b_.length>0}function XUe(e){v0(e).start()}async function zyn(e){v0(e).E_()}async function Uyn(e){const t=v0(e);for(const n of e.b_)t.P_(n.mutations)}async function Vyn(e,t,n){const r=e.b_.shift(),i=yre.from(r,t,n);await YUe(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await t8(e)}async function Hyn(e,t){t&&v0(e).h_&&await async function(r,i){if(function(o){return N0n(o)&&o!==$e.ABORTED}(i.code)){const s=r.b_.shift();v0(r).Yo(),await YUe(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await t8(r)}}(e,t),KUe(e)&&XUe(e)}async function a_e(e,t){const n=an(e);n.asyncQueue.verifyOperationInProgress(),xt("RemoteStore","RemoteStore received new credentials");const r=Jv(n);n.C_.add(3),await gO(n),r&&n.M_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.C_.delete(3),await mO(n)}async function qyn(e,t){const n=an(e);t?(n.C_.delete(2),await mO(n)):t||(n.C_.add(2),await gO(n),n.M_.set("Unknown"))}function Sx(e){return e.O_||(e.O_=function(n,r,i){const s=an(n);return s.A_(),new kyn(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{ho:Lyn.bind(null,e),Io:Myn.bind(null,e),a_:Fyn.bind(null,e)}),e.v_.push(async t=>{t?(e.O_.Yo(),Tre(e)?Sre(e):e.M_.set("Unknown")):(await e.O_.stop(),GUe(e))})),e.O_}function v0(e){return e.N_||(e.N_=function(n,r,i){const s=an(n);return s.A_(),new $yn(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{ho:zyn.bind(null,e),Io:Hyn.bind(null,e),T_:Uyn.bind(null,e),I_:Vyn.bind(null,e)}),e.v_.push(async t=>{t?(e.N_.Yo(),await t8(e)):(await e.N_.stop(),e.b_.length>0&&(xt("RemoteStore",`Stopping write stream with ${e.b_.length} pending writes`),e.b_=[]))})),e.N_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Are{constructor(t,n,r,i,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new gp,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,i,s){const o=Date.now()+r,a=new Are(t,n,o,i,s);return a.start(r),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ct($e.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Cre(e,t){if(zp("AsyncQueue",`${t}: ${e}`),dO(e))return new ct($e.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xb{constructor(t){this.comparator=t?(n,r)=>t(n,r)||Lt.comparator(n.key,r.key):(n,r)=>Lt.comparator(n.key,r.key),this.keyedMap=ST(),this.sortedSet=new wi(this.comparator)}static emptySet(t){return new Xb(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Xb)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new Xb;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u_e{constructor(){this.B_=new wi(Lt.comparator)}track(t){const n=t.doc.key,r=this.B_.get(n);r?t.type!==0&&r.type===3?this.B_=this.B_.insert(n,t):t.type===3&&r.type!==1?this.B_=this.B_.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.B_=this.B_.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.B_=this.B_.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.B_=this.B_.remove(n):t.type===1&&r.type===2?this.B_=this.B_.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.B_=this.B_.insert(n,{type:2,doc:t.doc}):Yt():this.B_=this.B_.insert(n,t)}L_(){const t=[];return this.B_.inorderTraversal((n,r)=>{t.push(r)}),t}}class pE{constructor(t,n,r,i,s,o,a,u,l){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(t,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new pE(t,n,Xb.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&K5(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wyn{constructor(){this.k_=void 0,this.listeners=[]}}class Gyn{constructor(){this.queries=new xx(t=>yUe(t),K5),this.onlineState="Unknown",this.q_=new Set}}async function QUe(e,t){const n=an(e),r=t.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new Wyn),i)try{s.k_=await n.onListen(r)}catch(o){const a=Cre(o,`Initialization of query '${L_(t.query)}' failed`);return void t.onError(a)}n.queries.set(r,s),s.listeners.push(t),t.Q_(n.onlineState),s.k_&&t.K_(s.k_)&&Ire(n)}async function JUe(e,t){const n=an(e),r=t.query;let i=!1;const s=n.queries.get(r);if(s){const o=s.listeners.indexOf(t);o>=0&&(s.listeners.splice(o,1),i=s.listeners.length===0)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function Yyn(e,t){const n=an(e);let r=!1;for(const i of t){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.listeners)a.K_(i)&&(r=!0);o.k_=i}}r&&Ire(n)}function Kyn(e,t,n){const r=an(e),i=r.queries.get(t);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(t)}function Ire(e){e.q_.forEach(t=>{t.next()})}class ZUe{constructor(t,n,r){this.query=t,this.U_=n,this.W_=!1,this.G_=null,this.onlineState="Unknown",this.options=r||{}}K_(t){if(!this.options.includeMetadataChanges){const r=[];for(const i of t.docChanges)i.type!==3&&r.push(i);t=new pE(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.W_?this.z_(t)&&(this.U_.next(t),n=!0):this.j_(t,this.onlineState)&&(this.H_(t),n=!0),this.G_=t,n}onError(t){this.U_.error(t)}Q_(t){this.onlineState=t;let n=!1;return this.G_&&!this.W_&&this.j_(this.G_,t)&&(this.H_(this.G_),n=!0),n}j_(t,n){if(!t.fromCache)return!0;const r=n!=="Offline";return(!this.options.J_||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}z_(t){if(t.docChanges.length>0)return!0;const n=this.G_&&this.G_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}H_(t){t=pE.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.W_=!0,this.U_.next(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eVe{constructor(t){this.key=t}}class tVe{constructor(t){this.key=t}}class Xyn{constructor(t,n){this.query=t,this.ia=n,this.sa=null,this.hasCachedResults=!1,this.current=!1,this.oa=On(),this.mutatedKeys=On(),this._a=vUe(t),this.aa=new Xb(this._a)}get ua(){return this.ia}ca(t,n){const r=n?n.la:new u_e,i=n?n.aa:this.aa;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((c,f)=>{const d=i.get(c),h=X5(this.query,f)?f:null,p=!!d&&this.mutatedKeys.has(d.key),m=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let g=!1;d&&h?d.data.isEqual(h.data)?p!==m&&(r.track({type:3,doc:h}),g=!0):this.ha(d,h)||(r.track({type:2,doc:h}),g=!0,(u&&this._a(h,u)>0||l&&this._a(h,l)<0)&&(a=!0)):!d&&h?(r.track({type:0,doc:h}),g=!0):d&&!h&&(r.track({type:1,doc:d}),g=!0,(u||l)&&(a=!0)),g&&(h?(o=o.add(h),s=m?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{aa:o,la:r,Zi:a,mutatedKeys:s}}ha(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,i){const s=this.aa;this.aa=t.aa,this.mutatedKeys=t.mutatedKeys;const o=t.la.L_();o.sort((c,f)=>function(h,p){const m=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Yt()}};return m(h)-m(p)}(c.type,f.type)||this._a(c.doc,f.doc)),this.Pa(r),i=i!=null&&i;const a=n&&!i?this.Ia():[],u=this.oa.size===0&&this.current&&!i?1:0,l=u!==this.sa;return this.sa=u,o.length!==0||l?{snapshot:new pE(this.query,t.aa,s,o,t.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ta:a}:{Ta:a}}Q_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({aa:this.aa,la:new u_e,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{Ta:[]}}Ea(t){return!this.ia.has(t)&&!!this.aa.has(t)&&!this.aa.get(t).hasLocalMutations}Pa(t){t&&(t.addedDocuments.forEach(n=>this.ia=this.ia.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.ia=this.ia.delete(n)),this.current=t.current)}Ia(){if(!this.current)return[];const t=this.oa;this.oa=On(),this.aa.forEach(r=>{this.Ea(r.key)&&(this.oa=this.oa.add(r.key))});const n=[];return t.forEach(r=>{this.oa.has(r)||n.push(new tVe(r))}),this.oa.forEach(r=>{t.has(r)||n.push(new eVe(r))}),n}da(t){this.ia=t.ls,this.oa=On();const n=this.ca(t.documents);return this.applyChanges(n,!0)}Aa(){return pE.fromInitialDocuments(this.query,this.aa,this.mutatedKeys,this.sa===0,this.hasCachedResults)}}class Qyn{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class Jyn{constructor(t){this.key=t,this.Ra=!1}}class Zyn{constructor(t,n,r,i,s,o){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Va={},this.ma=new xx(a=>yUe(a),K5),this.fa=new Map,this.ga=new Set,this.pa=new wi(Lt.comparator),this.ya=new Map,this.wa=new bre,this.Sa={},this.ba=new Map,this.Da=hE.Nn(),this.onlineState="Unknown",this.Ca=void 0}get isPrimaryClient(){return this.Ca===!0}}async function e1n(e,t){const n=c1n(e);let r,i;const s=n.ma.get(t);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Aa();else{const o=await Syn(n.localStore,Rd(t)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=await t1n(n,t,r,a==="current",o.resumeToken),n.isPrimaryClient&&HUe(n.remoteStore,o)}return i}async function t1n(e,t,n,r,i){e.va=(f,d,h)=>async function(m,g,y,v){let _=g.view.ca(y);_.Zi&&(_=await i_e(m.localStore,g.query,!1).then(({documents:x})=>g.view.ca(x,_)));const b=v&&v.targetChanges.get(g.targetId),E=v&&v.targetMismatches.get(g.targetId)!=null,w=g.view.applyChanges(_,m.isPrimaryClient,b,E);return c_e(m,g.targetId,w.Ta),w.snapshot}(e,f,d,h);const s=await i_e(e.localStore,t,!0),o=new Xyn(t,s.ls),a=o.ca(s.documents),u=pO.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",i),l=o.applyChanges(a,e.isPrimaryClient,u);c_e(e,n,l.Ta);const c=new Qyn(t,n,o);return e.ma.set(t,c),e.fa.has(n)?e.fa.get(n).push(t):e.fa.set(n,[t]),l.snapshot}async function n1n(e,t){const n=an(e),r=n.ma.get(t),i=n.fa.get(r.targetId);if(i.length>1)return n.fa.set(r.targetId,i.filter(s=>!K5(s,t))),void n.ma.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await dW(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),qUe(n.remoteStore,r.targetId),hW(n,r.targetId)}).catch(fO)):(hW(n,r.targetId),await dW(n.localStore,r.targetId,!0))}async function r1n(e,t,n){const r=f1n(e);try{const i=await function(o,a){const u=an(o),l=Es.now(),c=a.reduce((h,p)=>h.add(p.key),On());let f,d;return u.persistence.runTransaction("Locally write mutations","readwrite",h=>{let p=Up(),m=On();return u.ss.getEntries(h,c).next(g=>{p=g,p.forEach((y,v)=>{v.isValidDocument()||(m=m.add(y))})}).next(()=>u.localDocuments.getOverlayedDocuments(h,p)).next(g=>{f=g;const y=[];for(const v of a){const _=O0n(v,f.get(v.key).overlayedDocument);_!=null&&y.push(new Qv(v.key,_,lUe(_.value.mapValue),yp.exists(!0)))}return u.mutationQueue.addMutationBatch(h,l,y,a)}).next(g=>{d=g;const y=g.applyToLocalDocumentSet(f,m);return u.documentOverlayCache.saveOverlays(h,g.batchId,y)})}).then(()=>({batchId:d.batchId,changes:bUe(f)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let l=o.Sa[o.currentUser.toKey()];l||(l=new wi(cr)),l=l.insert(a,u),o.Sa[o.currentUser.toKey()]=l}(r,i.batchId,n),await yO(r,i.changes),await t8(r.remoteStore)}catch(i){const s=Cre(i,"Failed to persist write");n.reject(s)}}async function nVe(e,t){const n=an(e);try{const r=await wyn(n.localStore,t);t.targetChanges.forEach((i,s)=>{const o=n.ya.get(s);o&&(Vr(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Ra=!0:i.modifiedDocuments.size>0?Vr(o.Ra):i.removedDocuments.size>0&&(Vr(o.Ra),o.Ra=!1))}),await yO(n,r,t)}catch(r){await fO(r)}}function l_e(e,t,n){const r=an(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.ma.forEach((s,o)=>{const a=o.view.Q_(t);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=an(o);u.onlineState=a;let l=!1;u.queries.forEach((c,f)=>{for(const d of f.listeners)d.Q_(a)&&(l=!0)}),l&&Ire(u)}(r.eventManager,t),i.length&&r.Va.a_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function i1n(e,t,n){const r=an(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.ya.get(t),s=i&&i.key;if(s){let o=new wi(Lt.comparator);o=o.insert(s,zo.newNoDocument(s,en.min()));const a=On().add(s),u=new Z5(en.min(),new Map,new wi(cr),o,a);await nVe(r,u),r.pa=r.pa.remove(s),r.ya.delete(t),Ore(r)}else await dW(r.localStore,t,!1).then(()=>hW(r,t,n)).catch(fO)}async function s1n(e,t){const n=an(e),r=t.batch.batchId;try{const i=await byn(n.localStore,t);iVe(n,r,null),rVe(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await yO(n,i)}catch(i){await fO(i)}}async function o1n(e,t,n){const r=an(e);try{const i=await function(o,a){const u=an(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let c;return u.mutationQueue.lookupMutationBatch(l,a).next(f=>(Vr(f!==null),c=f.keys(),u.mutationQueue.removeMutationBatch(l,f))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,c,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,c)).next(()=>u.localDocuments.getDocuments(l,c))})}(r.localStore,t);iVe(r,t,n),rVe(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await yO(r,i)}catch(i){await fO(i)}}function rVe(e,t){(e.ba.get(t)||[]).forEach(n=>{n.resolve()}),e.ba.delete(t)}function iVe(e,t,n){const r=an(e);let i=r.Sa[r.currentUser.toKey()];if(i){const s=i.get(t);s&&(n?s.reject(n):s.resolve(),i=i.remove(t)),r.Sa[r.currentUser.toKey()]=i}}function hW(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.fa.get(t))e.ma.delete(r),n&&e.Va.Fa(r,n);e.fa.delete(t),e.isPrimaryClient&&e.wa.Rr(t).forEach(r=>{e.wa.containsKey(r)||sVe(e,r)})}function sVe(e,t){e.ga.delete(t.path.canonicalString());const n=e.pa.get(t);n!==null&&(qUe(e.remoteStore,n),e.pa=e.pa.remove(t),e.ya.delete(n),Ore(e))}function c_e(e,t,n){for(const r of n)r instanceof eVe?(e.wa.addReference(r.key,t),a1n(e,r)):r instanceof tVe?(xt("SyncEngine","Document no longer in limbo: "+r.key),e.wa.removeReference(r.key,t),e.wa.containsKey(r.key)||sVe(e,r.key)):Yt()}function a1n(e,t){const n=t.key,r=n.path.canonicalString();e.pa.get(n)||e.ga.has(r)||(xt("SyncEngine","New document in limbo: "+n),e.ga.add(r),Ore(e))}function Ore(e){for(;e.ga.size>0&&e.pa.size<e.maxConcurrentLimboResolutions;){const t=e.ga.values().next().value;e.ga.delete(t);const n=new Lt(Jr.fromString(t)),r=e.Da.next();e.ya.set(r,new Jyn(n)),e.pa=e.pa.insert(n,r),HUe(e.remoteStore,new ag(Rd(gre(n.path)),r,"TargetPurposeLimboResolution",cre._e))}}async function yO(e,t,n){const r=an(e),i=[],s=[],o=[];r.ma.isEmpty()||(r.ma.forEach((a,u)=>{o.push(r.va(u,t,n).then(l=>{if((l||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(u.targetId,l!=null&&l.fromCache?"not-current":"current"),l){i.push(l);const c=Ere.Qi(u.targetId,l);s.push(c)}}))}),await Promise.all(o),r.Va.a_(i),await async function(u,l){const c=an(u);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>Me.forEach(l,d=>Me.forEach(d.ki,h=>c.persistence.referenceDelegate.addReference(f,d.targetId,h)).next(()=>Me.forEach(d.qi,h=>c.persistence.referenceDelegate.removeReference(f,d.targetId,h)))))}catch(f){if(!dO(f))throw f;xt("LocalStore","Failed to update sequence numbers: "+f)}for(const f of l){const d=f.targetId;if(!f.fromCache){const h=c.ts.get(d),p=h.snapshotVersion,m=h.withLastLimboFreeSnapshotVersion(p);c.ts=c.ts.insert(d,m)}}}(r.localStore,s))}async function u1n(e,t){const n=an(e);if(!n.currentUser.isEqual(t)){xt("SyncEngine","User change. New user:",t.toKey());const r=await jUe(n.localStore,t);n.currentUser=t,function(s,o){s.ba.forEach(a=>{a.forEach(u=>{u.reject(new ct($e.CANCELLED,o))})}),s.ba.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await yO(n,r._s)}}function l1n(e,t){const n=an(e),r=n.ya.get(t);if(r&&r.Ra)return On().add(r.key);{let i=On();const s=n.fa.get(t);if(!s)return i;for(const o of s){const a=n.ma.get(o);i=i.unionWith(a.view.ua)}return i}}function c1n(e){const t=an(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=nVe.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=l1n.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=i1n.bind(null,t),t.Va.a_=Yyn.bind(null,t.eventManager),t.Va.Fa=Kyn.bind(null,t.eventManager),t}function f1n(e){const t=an(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=s1n.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=o1n.bind(null,t),t}class f_e{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=e8(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,n){return null}createIndexBackfillerScheduler(t,n){return null}createLocalStore(t){return _yn(this.persistence,new yyn,t.initialUser,this.serializer)}createPersistence(t){return new pyn(wre.jr,this.serializer)}createSharedClientState(t){return new Ayn}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class d1n{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>l_e(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=u1n.bind(null,this.syncEngine),await qyn(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new Gyn}()}createDatastore(t){const n=e8(t.databaseInfo.databaseId),r=function(s){return new Pyn(s)}(t.databaseInfo);return function(s,o,a,u){return new Ryn(s,o,a,u)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,i,s,o,a){return new Dyn(r,i,s,o,a)}(this.localStore,this.datastore,t.asyncQueue,n=>l_e(this.syncEngine,n,0),function(){return o_e.D()?new o_e:new Cyn}())}createSyncEngine(t,n){return function(i,s,o,a,u,l,c){const f=new Zyn(i,s,o,a,u,l);return c&&(f.Ca=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}terminate(){return async function(n){const r=an(n);xt("RemoteStore","RemoteStore shutting down."),r.C_.add(5),await gO(r),r.F_.shutdown(),r.M_.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oVe{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Oa(this.observer.next,t)}error(t){this.observer.error?this.Oa(this.observer.error,t):zp("Uncaught Error in snapshot listener:",t.toString())}Na(){this.muted=!0}Oa(t,n){this.muted||setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h1n{constructor(t,n,r,i){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=qa.UNAUTHENTICATED,this.clientId=oUe.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{xt("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(xt("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ct($e.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new gp;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=Cre(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function T7(e,t){e.asyncQueue.verifyOperationInProgress(),xt("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async i=>{r.isEqual(i)||(await jUe(t.localStore,i),r=i)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function d_e(e,t){e.asyncQueue.verifyOperationInProgress();const n=await aVe(e);xt("FirestoreClient","Initializing OnlineComponentProvider");const r=await e.getConfiguration();await t.initialize(n,r),e.setCredentialChangeListener(i=>a_e(t.remoteStore,i)),e.setAppCheckTokenChangeListener((i,s)=>a_e(t.remoteStore,s)),e._onlineComponents=t}function p1n(e){return e.name==="FirebaseError"?e.code===$e.FAILED_PRECONDITION||e.code===$e.UNIMPLEMENTED:!(typeof DOMException<"u"&&e instanceof DOMException)||e.code===22||e.code===20||e.code===11}async function aVe(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){xt("FirestoreClient","Using user provided OfflineComponentProvider");try{await T7(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!p1n(n))throw n;dC("Error using user provided cache. Falling back to memory cache: "+n),await T7(e,new f_e)}}else xt("FirestoreClient","Using default OfflineComponentProvider"),await T7(e,new f_e);return e._offlineComponents}async function Pre(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(xt("FirestoreClient","Using user provided OnlineComponentProvider"),await d_e(e,e._uninitializedComponentsProvider._online)):(xt("FirestoreClient","Using default OnlineComponentProvider"),await d_e(e,new d1n))),e._onlineComponents}function m1n(e){return aVe(e).then(t=>t.persistence)}function g1n(e){return Pre(e).then(t=>t.remoteStore)}function y1n(e){return Pre(e).then(t=>t.syncEngine)}async function uVe(e){const t=await Pre(e),n=t.eventManager;return n.onListen=e1n.bind(null,t.syncEngine),n.onUnlisten=n1n.bind(null,t.syncEngine),n}function v1n(e){return e.asyncQueue.enqueue(async()=>{const t=await m1n(e),n=await g1n(e);return t.setNetworkEnabled(!0),function(i){const s=an(i);return s.C_.delete(0),mO(s)}(n)})}function _1n(e,t,n={}){const r=new gp;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new oVe({next:d=>{o.enqueueAndForget(()=>JUe(s,f));const h=d.docs.has(a);!h&&d.fromCache?l.reject(new ct($e.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&d.fromCache&&u&&u.source==="server"?l.reject(new ct($e.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new ZUe(gre(a.path),c,{includeMetadataChanges:!0,J_:!0});return QUe(s,f)}(await uVe(e),e.asyncQueue,t,n,r)),r.promise}function b1n(e,t,n={}){const r=new gp;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new oVe({next:d=>{o.enqueueAndForget(()=>JUe(s,f)),d.fromCache&&u.source==="server"?l.reject(new ct($e.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new ZUe(a,c,{includeMetadataChanges:!0,J_:!0});return QUe(s,f)}(await uVe(e),e.asyncQueue,t,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lVe(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h_e=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cVe(e,t,n){if(!n)throw new ct($e.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function w1n(e,t,n,r){if(t===!0&&r===!0)throw new ct($e.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function p_e(e){if(!Lt.isDocumentKey(e))throw new ct($e.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function m_e(e){if(Lt.isDocumentKey(e))throw new ct($e.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function n8(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":Yt()}function hv(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new ct($e.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=n8(e);throw new ct($e.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g_e{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new ct($e.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new ct($e.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}w1n("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=lVe((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ct($e.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ct($e.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ct($e.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class kre{constructor(t,n,r,i){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new g_e({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ct($e.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new ct($e.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new g_e(t),t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new jgn;switch(r.type){case"firstParty":return new Vgn(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ct($e.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=h_e.get(n);r&&(xt("ComponentProvider","Removing Datastore"),h_e.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new Zv(this.firestore,t,this._query)}}class hu{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ng(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new hu(this.firestore,t,this._key)}}class Ng extends Zv{constructor(t,n,r){super(t,n,gre(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new hu(this.firestore,null,new Lt(t))}withConverter(t){return new Ng(this.firestore,t,this._path)}}function A7(e,t,...n){if(e=Eo(e),cVe("collection","path",t),e instanceof kre){const r=Jr.fromString(t,...n);return m_e(r),new Ng(e,null,r)}{if(!(e instanceof hu||e instanceof Ng))throw new ct($e.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Jr.fromString(t,...n));return m_e(r),new Ng(e.firestore,null,r)}}function Lf(e,t,...n){if(e=Eo(e),arguments.length===1&&(t=oUe.newId()),cVe("doc","path",t),e instanceof kre){const r=Jr.fromString(t,...n);return p_e(r),new hu(e,null,new Lt(r))}{if(!(e instanceof hu||e instanceof Ng))throw new ct($e.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Jr.fromString(t,...n));return p_e(r),new hu(e.firestore,e instanceof Ng?e.converter:null,new Lt(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1n{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new UUe(this,"async_queue_retry"),this.iu=()=>{const n=S7();n&&xt("AsyncQueue","Visibility state changed to "+n.visibilityState),this.zo.Qo()};const t=S7();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.su(),this.ou(t)}enterRestrictedMode(t){if(!this.Za){this.Za=!0,this.nu=t||!1;const n=S7();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.iu)}}enqueue(t){if(this.su(),this.Za)return new Promise(()=>{});const n=new gp;return this.ou(()=>this.Za&&this.nu?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Ya.push(t),this._u()))}async _u(){if(this.Ya.length!==0){try{await this.Ya[0](),this.Ya.shift(),this.zo.reset()}catch(t){if(!dO(t))throw t;xt("AsyncQueue","Operation failed with retryable error: "+t)}this.Ya.length>0&&this.zo.ko(()=>this._u())}}ou(t){const n=this.Ja.then(()=>(this.tu=!0,t().catch(r=>{this.eu=r,this.tu=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw zp("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.tu=!1,r))));return this.Ja=n,n}enqueueAfterDelay(t,n,r){this.su(),this.ru.indexOf(t)>-1&&(n=0);const i=Are.createAndSchedule(this,t,n,r,s=>this.au(s));return this.Xa.push(i),i}su(){this.eu&&Yt()}verifyOperationInProgress(){}async uu(){let t;do t=this.Ja,await t;while(t!==this.Ja)}cu(t){for(const n of this.Xa)if(n.timerId===t)return!0;return!1}lu(t){return this.uu().then(()=>{this.Xa.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Xa)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.uu()})}hu(t){this.ru.push(t)}au(t){const n=this.Xa.indexOf(t);this.Xa.splice(n,1)}}class vO extends kre{constructor(t,n,r,i){super(t,n,r,i),this.type="firestore",this._queue=function(){return new E1n}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||fVe(this),this._firestoreClient.terminate()}}function x1n(e,t,n){n||(n="(default)");const r=yx(e,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),s=r.getOptions(n);if(nC(s,t))return i;throw new ct($e.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(t.cacheSizeBytes!==void 0&&t.localCache!==void 0)throw new ct($e.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(t.cacheSizeBytes!==void 0&&t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new ct($e.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:t,instanceIdentifier:n})}function r8(e){return e._firestoreClient||fVe(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function fVe(e){var t,n,r;const i=e._freezeSettings(),s=function(a,u,l,c){return new t0n(a,u,l,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,lVe(c.experimentalLongPollingOptions),c.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new h1n(e._authCredentials,e._appCheckCredentials,e._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function S1n(e){return v1n(r8(e=hv(e,vO)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE{constructor(t){this._byteString=t}static fromBase64String(t){try{return new mE(ia.fromBase64String(t))}catch(n){throw new ct($e.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new mE(ia.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $re{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new ct($e.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new co(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rre{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nre{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new ct($e.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new ct($e.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return cr(this._lat,t._lat)||cr(this._long,t._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T1n=/^__.*__$/;class A1n{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new Qv(t,this.data,this.fieldMask,n,this.fieldTransforms):new hO(t,this.data,n,this.fieldTransforms)}}function dVe(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Yt()}}class Dre{constructor(t,n,r,i,s,o){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Pu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Iu(){return this.settings.Iu}Tu(t){return new Dre(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Eu(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.Tu({path:r,du:!1});return i.Au(t),i}Ru(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.Tu({path:r,du:!1});return i.Pu(),i}Vu(t){return this.Tu({path:void 0,du:!0})}mu(t){return fM(t,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Pu(){if(this.path)for(let t=0;t<this.path.length;t++)this.Au(this.path.get(t))}Au(t){if(t.length===0)throw this.mu("Document fields must not be empty");if(dVe(this.Iu)&&T1n.test(t))throw this.mu('Document fields cannot begin and end with "__"')}}class C1n{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||e8(t)}pu(t,n,r,i=!1){return new Dre({Iu:t,methodName:n,gu:r,path:co.emptyPath(),du:!1,fu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function hVe(e){const t=e._freezeSettings(),n=e8(e._databaseId);return new C1n(e._databaseId,!!t.ignoreUndefinedProperties,n)}function I1n(e,t,n,r,i,s={}){const o=e.pu(s.merge||s.mergeFields?2:0,t,n,i);gVe("Data must be an object, but it was:",o,r);const a=pVe(r,o);let u,l;if(s.merge)u=new Qc(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const f of s.mergeFields){const d=P1n(t,f,n);if(!o.contains(d))throw new ct($e.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);$1n(c,d)||c.push(d)}u=new Qc(c),l=o.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,l=o.fieldTransforms;return new A1n(new jl(a),u,l)}class Lre extends Rre{_toFieldTransform(t){return new T0n(t.path,new vC)}isEqual(t){return t instanceof Lre}}function O1n(e,t,n,r=!1){return Mre(n,e.pu(r?4:3,t))}function Mre(e,t){if(mVe(e=Eo(e)))return gVe("Unsupported field value:",t,e),pVe(e,t);if(e instanceof Rre)return function(r,i){if(!dVe(i.Iu))throw i.mu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.mu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.du&&t.Iu!==4)throw t.mu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=Mre(a,i.Vu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(e,t)}return function(r,i){if((r=Eo(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return E0n(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Es.fromDate(r);return{timestampValue:lM(i.serializer,s)}}if(r instanceof Es){const s=new Es(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:lM(i.serializer,s)}}if(r instanceof Nre)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof mE)return{bytesValue:NUe(i.serializer,r._byteString)};if(r instanceof hu){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.mu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:_re(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.mu(`Unsupported field value: ${n8(r)}`)}(e,t)}function pVe(e,t){const n={};return aUe(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):wx(e,(r,i)=>{const s=Mre(i,t.Eu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function mVe(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Es||e instanceof Nre||e instanceof mE||e instanceof hu||e instanceof Rre)}function gVe(e,t,n){if(!mVe(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=n8(n);throw r==="an object"?t.mu(e+" a custom object"):t.mu(e+" "+r)}}function P1n(e,t,n){if((t=Eo(t))instanceof $re)return t._internalPath;if(typeof t=="string")return yVe(e,t);throw fM("Field path arguments must be of type string or ",e,!1,void 0,n)}const k1n=new RegExp("[~\\*/\\[\\]]");function yVe(e,t,n){if(t.search(k1n)>=0)throw fM(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new $re(...t.split("."))._internalPath}catch{throw fM(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function fM(e,t,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new ct($e.INVALID_ARGUMENT,a+e+u)}function $1n(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vVe{constructor(t,n,r,i,s){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new hu(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new R1n(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(Fre("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class R1n extends vVe{data(){return super.data()}}function Fre(e,t){return typeof t=="string"?yVe(e,t):t instanceof $re?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N1n(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new ct($e.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Bre{}class _Ve extends Bre{}function D1n(e,t,...n){let r=[];t instanceof Bre&&r.push(t),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof zre).length,a=s.filter(u=>u instanceof jre).length;if(o>1||o>0&&a>0)throw new ct($e.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)e=i._apply(e);return e}class jre extends _Ve{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new jre(t,n,r)}_apply(t){const n=this._parse(t);return bVe(t._query,n),new Zv(t.firestore,t.converter,oW(t._query,n))}_parse(t){const n=hVe(t.firestore);return function(s,o,a,u,l,c,f){let d;if(l.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new ct($e.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){v_e(f,c);const h=[];for(const p of f)h.push(y_e(u,s,p));d={arrayValue:{values:h}}}else d=y_e(u,s,f)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||v_e(f,c),d=O1n(a,o,f,c==="in"||c==="not-in");return ns.create(l,c,d)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}class zre extends Bre{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new zre(t,n)}_parse(t){const n=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:gf.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const u of a)bVe(o,u),o=oW(o,u)}(t._query,n),new Zv(t.firestore,t.converter,oW(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Ure extends _Ve{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new Ure(t,n)}_apply(t){const n=function(i,s,o){if(i.startAt!==null)throw new ct($e.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new ct($e.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new yC(s,o)}(t._query,this._field,this._direction);return new Zv(t.firestore,t.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new Ex(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,n))}}function L1n(e,t="asc"){const n=t,r=Fre("orderBy",e);return Ure._create(r,n)}function y_e(e,t,n){if(typeof(n=Eo(n))=="string"){if(n==="")throw new ct($e.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!gUe(t)&&n.indexOf("/")!==-1)throw new ct($e.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(Jr.fromString(n));if(!Lt.isDocumentKey(r))throw new ct($e.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return zve(e,new Lt(r))}if(n instanceof hu)return zve(e,n._key);throw new ct($e.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${n8(n)}.`)}function v_e(e,t){if(!Array.isArray(e)||e.length===0)throw new ct($e.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function bVe(e,t){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(e.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new ct($e.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new ct($e.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class M1n{convertValue(t,n="none"){switch(dv(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ji(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(fv(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 10:return this.convertObject(t.mapValue,n);default:throw Yt()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return wx(t,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(t){return new Nre(Ji(t.latitude),Ji(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=dre(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(pC(t));default:return null}}convertTimestamp(t){const n=y0(t);return new Es(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=Jr.fromString(t);Vr(BUe(r));const i=new mC(r.get(1),r.get(3)),s=new Lt(r.popFirst(5));return i.isEqual(n)||zp(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F1n(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class wVe extends vVe{constructor(t,n,r,i,s,o){super(t,n,r,i,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new U$(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(Fre("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class U$ extends wVe{data(t={}){return super.data(t)}}class B1n{constructor(t,n,r,i){this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new AT(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new U$(this._firestore,this._userDataWriter,r.key,r,new AT(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ct($e.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const u=new U$(i._firestore,i._userDataWriter,a.doc.key,a.doc,new AT(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const u=new U$(i._firestore,i._userDataWriter,a.doc.key,a.doc,new AT(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,c=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),c=o.indexOf(a.doc.key)),{type:j1n(a.type),doc:u,oldIndex:l,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function j1n(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Yt()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wk(e){e=hv(e,hu);const t=hv(e.firestore,vO);return _1n(r8(t),e._key).then(n=>U1n(t,e,n))}class EVe extends M1n{constructor(t){super(),this.firestore=t}convertBytes(t){return new mE(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new hu(this.firestore,null,n)}}function __e(e){e=hv(e,Zv);const t=hv(e.firestore,vO),n=r8(t),r=new EVe(t);return N1n(e._query),b1n(n,e._query).then(i=>new B1n(t,r,e,i))}function DS(e,t,n){e=hv(e,hu);const r=hv(e.firestore,vO),i=F1n(e.converter,t,n);return z1n(r,[I1n(hVe(r),"setDoc",e._key,i,e.converter!==null,n).toMutation(e._key,yp.none())])}function z1n(e,t){return function(r,i){const s=new gp;return r.asyncQueue.enqueueAndForget(async()=>r1n(await y1n(r),i,s)),s.promise}(r8(e),t)}function U1n(e,t,n){const r=n.docs.get(t._key),i=new EVe(e);return new wVe(e,i,t._key,r,new AT(n.hasPendingWrites,n.fromCache),t.converter)}function V1n(){return new Lre("serverTimestamp")}(function(t,n=!0){(function(i){bx=i})(Kv),Bp(new Zd("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new vO(new zgn(r.getProvider("auth-internal")),new qgn(r.getProvider("app-check-internal")),function(l,c){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new ct($e.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new mC(l.options.projectId,c)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),of(Mve,"4.4.0",t),of(Mve,"4.4.0","esm2017")})();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pW=new Map,xVe={activated:!1,tokenObservers:[]},H1n={initialized:!1,enabled:!1};function xs(e){return pW.get(e)||Object.assign({},xVe)}function q1n(e,t){return pW.set(e,t),pW.get(e)}function i8(){return H1n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SVe="https://content-firebaseappcheck.googleapis.com/v1",W1n="exchangeRecaptchaV3Token",G1n="exchangeDebugToken",b_e={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},Y1n=24*60*60*1e3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1n{constructor(t,n,r,i,s){if(this.operation=t,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(t){this.stop();try{this.pending=new tC,await X1n(this.getNextRun(t)),this.pending.resolve(),await this.pending.promise,this.pending=new tC,await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function X1n(e){return new Promise(t=>{setTimeout(t,e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q1n={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},ou=new gx("appCheck","AppCheck",Q1n);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w_e(e=!1){var t;return e?(t=self.grecaptcha)===null||t===void 0?void 0:t.enterprise:self.grecaptcha}function Vre(e){if(!xs(e).activated)throw ou.create("use-before-activation",{appName:e.name})}function TVe(e){const t=Math.round(e/1e3),n=Math.floor(t/(3600*24)),r=Math.floor((t-n*3600*24)/3600),i=Math.floor((t-n*3600*24-r*3600)/60),s=t-n*3600*24-r*3600-i*60;let o="";return n&&(o+=Ek(n)+"d:"),r&&(o+=Ek(r)+"h:"),o+=Ek(i)+"m:"+Ek(s)+"s",o}function Ek(e){return e===0?"00":e>=10?e.toString():"0"+e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hre({url:e,body:t},n){const r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){const f=await i.getHeartbeatsHeader();f&&(r["X-Firebase-Client"]=f)}const s={method:"POST",body:JSON.stringify(t),headers:r};let o;try{o=await fetch(e,s)}catch(f){throw ou.create("fetch-network-error",{originalErrorMessage:f==null?void 0:f.message})}if(o.status!==200)throw ou.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(f){throw ou.create("fetch-parse-error",{originalErrorMessage:f==null?void 0:f.message})}const u=a.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw ou.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const l=Number(u[1])*1e3,c=Date.now();return{token:a.token,expireTimeMillis:c+l,issuedAtTimeMillis:c}}function J1n(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${SVe}/projects/${n}/apps/${r}:${W1n}?key=${i}`,body:{recaptcha_v3_token:t}}}function AVe(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${SVe}/projects/${n}/apps/${r}:${G1n}?key=${i}`,body:{debug_token:t}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z1n="firebase-app-check-database",evn=1,wC="firebase-app-check-store",CVe="debug-token";let xk=null;function IVe(){return xk||(xk=new Promise((e,t)=>{try{const n=indexedDB.open(Z1n,evn);n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{var i;t(ou.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{const i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(wC,{keyPath:"compositeKey"})}}}catch(n){t(ou.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),xk)}function tvn(e){return PVe(kVe(e))}function nvn(e,t){return OVe(kVe(e),t)}function rvn(e){return OVe(CVe,e)}function ivn(){return PVe(CVe)}async function OVe(e,t){const r=(await IVe()).transaction(wC,"readwrite"),s=r.objectStore(wC).put({compositeKey:e,value:t});return new Promise((o,a)=>{s.onsuccess=u=>{o()},r.onerror=u=>{var l;a(ou.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})}async function PVe(e){const n=(await IVe()).transaction(wC,"readonly"),i=n.objectStore(wC).get(e);return new Promise((s,o)=>{i.onsuccess=a=>{const u=a.target.result;s(u?u.value:void 0)},n.onerror=a=>{var u;o(ou.create("storage-get",{originalErrorMessage:(u=a.target.error)===null||u===void 0?void 0:u.message}))}})}function kVe(e){return`${e.options.appId}-${e.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EC=new k5("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function svn(e){if(Rne()){let t;try{t=await tvn(e)}catch(n){EC.warn(`Failed to read token from IndexedDB. Error: ${n}`)}return t}}function C7(e,t){return Rne()?nvn(e,t).catch(n=>{EC.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}async function ovn(){let e;try{e=await ivn()}catch{}if(e)return e;{const t=uhn();return rvn(t).catch(n=>EC.warn(`Failed to persist debug token to IndexedDB. Error: ${n}`)),t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qre(){return i8().enabled}async function Wre(){const e=i8();if(e.enabled&&e.token)return e.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}function avn(){const e=k7e(),t=i8();if(t.initialized=!0,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN!="string"&&e.FIREBASE_APPCHECK_DEBUG_TOKEN!==!0)return;t.enabled=!0;const n=new tC;t.token=n,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN=="string"?n.resolve(e.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(ovn())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uvn={error:"UNKNOWN_ERROR"};function lvn(e){return kne.encodeString(JSON.stringify(e),!1)}async function mW(e,t=!1){const n=e.app;Vre(n);const r=xs(n);let i=r.token,s;if(i&&!db(i)&&(r.token=void 0,i=void 0),!i){const u=await r.cachedTokenPromise;u&&(db(u)?i=u:await C7(n,void 0))}if(!t&&i&&db(i))return{token:i.token};let o=!1;if(qre()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Hre(AVe(n,await Wre()),e.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);const u=await r.exchangeTokenPromise;return await C7(n,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=await xs(n).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?EC.warn(u.message):EC.error(u),s=u}let a;return i?s?db(i)?a={token:i.token,internalError:s}:a=x_e(s):(a={token:i.token},r.token=i,await C7(n,i)):a=x_e(s),o&&NVe(n,a),a}async function cvn(e){const t=e.app;Vre(t);const{provider:n}=xs(t);if(qre()){const r=await Wre(),{token:i}=await Hre(AVe(t,r),e.heartbeatServiceProvider);return{token:i}}else{const{token:r}=await n.getToken();return{token:r}}}function $Ve(e,t,n,r){const{app:i}=e,s=xs(i),o={next:n,error:r,type:t};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&db(s.token)){const a=s.token;Promise.resolve().then(()=>{n({token:a.token}),E_e(e)}).catch(()=>{})}s.cachedTokenPromise.then(()=>E_e(e))}function RVe(e,t){const n=xs(e),r=n.tokenObservers.filter(i=>i.next!==t);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function E_e(e){const{app:t}=e,n=xs(t);let r=n.tokenRefresher;r||(r=fvn(e),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function fvn(e){const{app:t}=e;return new K1n(async()=>{const n=xs(t);let r;if(n.token?r=await mW(e,!0):r=await mW(e),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=xs(t);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},b_e.RETRIAL_MIN_WAIT,b_e.RETRIAL_MAX_WAIT)}function NVe(e,t){const n=xs(e).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&t.error!=null?r.error(t.error):r.next(t)}catch{}}function db(e){return e.expireTimeMillis-Date.now()>0}function x_e(e){return{token:lvn(uvn),error:e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dvn{constructor(t,n){this.app=t,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:t}=xs(this.app);for(const n of t)RVe(this.app,n.next);return Promise.resolve()}}function hvn(e,t){return new dvn(e,t)}function pvn(e){return{getToken:t=>mW(e,t),getLimitedUseToken:()=>cvn(e),addTokenListener:t=>$Ve(e,"INTERNAL",t),removeTokenListener:t=>RVe(e.app,t)}}const mvn="@firebase/app-check",gvn="0.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yvn="https://www.google.com/recaptcha/api.js";function vvn(e,t){const n=new tC,r=xs(e);r.reCAPTCHAState={initialized:n};const i=_vn(e),s=w_e(!1);return s?S_e(e,t,s,i,n):Evn(()=>{const o=w_e(!1);if(!o)throw new Error("no recaptcha");S_e(e,t,o,i,n)}),n.promise}function S_e(e,t,n,r,i){n.ready(()=>{wvn(e,t,n,r),i.resolve(n)})}function _vn(e){const t=`fire_app_check_${e.name}`,n=document.createElement("div");return n.id=t,n.style.display="none",document.body.appendChild(n),t}async function bvn(e){Vre(e);const n=await xs(e).reCAPTCHAState.initialized.promise;return new Promise((r,i)=>{const s=xs(e).reCAPTCHAState;n.ready(()=>{r(n.execute(s.widgetId,{action:"fire_app_check"}))})})}function wvn(e,t,n,r){const i=n.render(r,{sitekey:t,size:"invisible",callback:()=>{xs(e).reCAPTCHAState.succeeded=!0},"error-callback":()=>{xs(e).reCAPTCHAState.succeeded=!1}}),s=xs(e);s.reCAPTCHAState=Object.assign(Object.assign({},s.reCAPTCHAState),{widgetId:i})}function Evn(e){const t=document.createElement("script");t.src=yvn,t.onload=e,document.head.appendChild(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gre{constructor(t){this._siteKey=t,this._throttleData=null}async getToken(){var t,n,r;Svn(this._throttleData);const i=await bvn(this._app).catch(o=>{throw ou.create("recaptcha-error")});if(!(!((t=xs(this._app).reCAPTCHAState)===null||t===void 0)&&t.succeeded))throw ou.create("recaptcha-error");let s;try{s=await Hre(J1n(this._app,i),this._heartbeatServiceProvider)}catch(o){throw!((n=o.code)===null||n===void 0)&&n.includes("fetch-status-error")?(this._throttleData=xvn(Number((r=o.customData)===null||r===void 0?void 0:r.httpStatus),this._throttleData),ou.create("throttled",{time:TVe(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):o}return this._throttleData=null,s}initialize(t){this._app=t,this._heartbeatServiceProvider=yx(t,"heartbeat"),vvn(t,this._siteKey).catch(()=>{})}isEqual(t){return t instanceof Gre?this._siteKey===t._siteKey:!1}}function xvn(e,t){if(e===404||e===403)return{backoffCount:1,allowRequestsAfter:Date.now()+Y1n,httpStatus:e};{const n=t?t.backoffCount:0,r=hhn(n,1e3,2);return{backoffCount:n+1,allowRequestsAfter:Date.now()+r,httpStatus:e}}}function Svn(e){if(e&&Date.now()-e.allowRequestsAfter<=0)throw ou.create("throttled",{time:TVe(e.allowRequestsAfter-Date.now()),httpStatus:e.httpStatus})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tvn(e=Dne(),t){e=Eo(e);const n=yx(e,"app-check");if(i8().initialized||avn(),qre()&&Wre().then(i=>console.log(`App Check debug token: ${i}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(s.isTokenAutoRefreshEnabled===t.isTokenAutoRefreshEnabled&&s.provider.isEqual(t.provider))return i;throw ou.create("already-initialized",{appName:e.name})}const r=n.initialize({options:t});return Avn(e,t.provider,t.isTokenAutoRefreshEnabled),xs(e).isTokenAutoRefreshEnabled&&$Ve(r,"INTERNAL",()=>{}),r}function Avn(e,t,n){const r=q1n(e,Object.assign({},xVe));r.activated=!0,r.provider=t,r.cachedTokenPromise=svn(e).then(i=>(i&&db(i)&&(r.token=i,NVe(e,{token:i.token})),i)),r.isTokenAutoRefreshEnabled=n===void 0?e.automaticDataCollectionEnabled:n,r.provider.initialize(e)}const Cvn="app-check",T_e="app-check-internal";function Ivn(){Bp(new Zd(Cvn,e=>{const t=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat");return hvn(t,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider(T_e).initialize()})),Bp(new Zd(T_e,e=>{const t=e.getProvider("app-check").getImmediate();return pvn(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),of(mvn,gvn)}Ivn();function DVe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Ovn=DVe,LVe=new gx("auth","Firebase",DVe());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dM=new k5("@firebase/auth");function Pvn(e,...t){dM.logLevel<=Fn.WARN&&dM.warn(`Auth (${Kv}): ${e}`,...t)}function V$(e,...t){dM.logLevel<=Fn.ERROR&&dM.error(`Auth (${Kv}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vp(e,...t){throw Yre(e,...t)}function Dd(e,...t){return Yre(e,...t)}function kvn(e,t,n){const r=Object.assign(Object.assign({},Ovn()),{[t]:n});return new gx("auth","Firebase",r).create(t,{appName:e.name})}function Yre(e,...t){if(typeof e!="string"){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return LVe.create(e,...t)}function tn(e,t,...n){if(!e)throw Yre(t,...n)}function ep(e){const t="INTERNAL ASSERTION FAILED: "+e;throw V$(t),new Error(t)}function Hp(e,t){e||ep(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gW(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function $vn(){return A_e()==="http:"||A_e()==="https:"}function A_e(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rvn(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&($vn()||Qdn()||"connection"in navigator)?navigator.onLine:!0}function Nvn(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _O{constructor(t,n){this.shortDelay=t,this.longDelay=n,Hp(n>t,"Short delay should be less than long delay!"),this.isMobile=Xdn()||Jdn()}get(){return Rvn()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kre(e,t){Hp(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MVe{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ep("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ep("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ep("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dvn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lvn=new _O(3e4,6e4);function s8(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Tx(e,t,n,r,i={}){return FVe(e,i,async()=>{let s={},o={};r&&(t==="GET"?o=r:s={body:JSON.stringify(r)});const a=nO(Object.assign({key:e.config.apiKey},o)).slice(1),u=await e._getAdditionalHeaders();return u["Content-Type"]="application/json",e.languageCode&&(u["X-Firebase-Locale"]=e.languageCode),MVe.fetch()(jVe(e,e.config.apiHost,n,a),Object.assign({method:t,headers:u,referrerPolicy:"no-referrer"},s))})}async function FVe(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Dvn),t);try{const i=new Mvn(e),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Sk(e,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Sk(e,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Sk(e,"email-already-in-use",o);if(u==="USER_DISABLED")throw Sk(e,"user-disabled",o);const c=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw kvn(e,c,l);Vp(e,c)}}catch(i){if(i instanceof yh)throw i;Vp(e,"network-request-failed",{message:String(i)})}}async function BVe(e,t,n,r,i={}){const s=await Tx(e,t,n,r,i);return"mfaPendingCredential"in s&&Vp(e,"multi-factor-auth-required",{_serverResponse:s}),s}function jVe(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?Kre(e.config,i):`${e.config.apiScheme}://${i}`}class Mvn{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Dd(this.auth,"network-request-failed")),Lvn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Sk(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Dd(e,t,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fvn(e,t){return Tx(e,"POST","/v1/accounts:delete",t)}async function Bvn(e,t){return Tx(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O2(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function jvn(e,t=!1){const n=Eo(e),r=await n.getIdToken(t),i=Xre(r);tn(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:O2(I7(i.auth_time)),issuedAtTime:O2(I7(i.iat)),expirationTime:O2(I7(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function I7(e){return Number(e)*1e3}function Xre(e){const[t,n,r]=e.split(".");if(t===void 0||n===void 0||r===void 0)return V$("JWT malformed, contained fewer than 3 sections"),null;try{const i=P7e(n);return i?JSON.parse(i):(V$("Failed to decode base64 JWT payload"),null)}catch(i){return V$("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function zvn(e){const t=Xre(e);return tn(t,"internal-error"),tn(typeof t.exp<"u","internal-error"),tn(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xC(e,t,n=!1){if(n)return t;try{return await t}catch(r){throw r instanceof yh&&Uvn(r)&&e.auth.currentUser===e&&await e.auth.signOut(),r}}function Uvn({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vvn{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zVe{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=O2(this.lastLoginAt),this.creationTime=O2(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hM(e){var t;const n=e.auth,r=await e.getIdToken(),i=await xC(e,Bvn(n,{idToken:r}));tn(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=!((t=s.providerUserInfo)===null||t===void 0)&&t.length?Wvn(s.providerUserInfo):[],a=qvn(e.providerData,o),u=e.isAnonymous,l=!(e.email&&s.passwordHash)&&!(a!=null&&a.length),c=u?l:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new zVe(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(e,f)}async function Hvn(e){const t=Eo(e);await hM(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function qvn(e,t){return[...e.filter(r=>!t.some(i=>i.providerId===r.providerId)),...t]}function Wvn(e){return e.map(t=>{var{providerId:n}=t,r=yK(t,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gvn(e,t){const n=await FVe(e,{},async()=>{const r=nO({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:s}=e.config,o=jVe(e,i,"/v1/token",`key=${s}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",MVe.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Yvn(e,t){return Tx(e,"POST","/v2/accounts:revokeToken",s8(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){tn(t.idToken,"internal-error"),tn(typeof t.idToken<"u","internal-error"),tn(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):zvn(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}async getToken(t,n=!1){return tn(!this.accessToken||this.refreshToken,t,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await Gvn(t,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new SC;return r&&(tn(typeof r=="string","internal-error",{appName:t}),o.refreshToken=r),i&&(tn(typeof i=="string","internal-error",{appName:t}),o.accessToken=i),s&&(tn(typeof s=="number","internal-error",{appName:t}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new SC,this.toJSON())}_performRefresh(){return ep("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vm(e,t){tn(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class x1{constructor(t){var{uid:n,auth:r,stsTokenManager:i}=t,s=yK(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Vvn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new zVe(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(t){const n=await xC(this,this.stsTokenManager.getToken(this.auth,t));return tn(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return jvn(this,t)}reload(){return Hvn(this)}_assign(t){this!==t&&(tn(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new x1(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){tn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&await hM(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const t=await this.getIdToken();return await xC(this,Fvn(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var r,i,s,o,a,u,l,c;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,d=(i=n.email)!==null&&i!==void 0?i:void 0,h=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,m=(a=n.tenantId)!==null&&a!==void 0?a:void 0,g=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,y=(l=n.createdAt)!==null&&l!==void 0?l:void 0,v=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:_,emailVerified:b,isAnonymous:E,providerData:w,stsTokenManager:x}=n;tn(_&&x,t,"internal-error");const S=SC.fromJSON(this.name,x);tn(typeof _=="string",t,"internal-error"),vm(f,t.name),vm(d,t.name),tn(typeof b=="boolean",t,"internal-error"),tn(typeof E=="boolean",t,"internal-error"),vm(h,t.name),vm(p,t.name),vm(m,t.name),vm(g,t.name),vm(y,t.name),vm(v,t.name);const I=new x1({uid:_,auth:t,email:d,emailVerified:b,displayName:f,isAnonymous:E,photoURL:p,phoneNumber:h,tenantId:m,stsTokenManager:S,createdAt:y,lastLoginAt:v});return w&&Array.isArray(w)&&(I.providerData=w.map(C=>Object.assign({},C))),g&&(I._redirectEventId=g),I}static async _fromIdTokenResponse(t,n,r=!1){const i=new SC;i.updateFromServerResponse(n);const s=new x1({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:r});return await hM(s),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C_e=new Map;function tp(e){Hp(e instanceof Function,"Expected a class definition");let t=C_e.get(e);return t?(Hp(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,C_e.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UVe{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}UVe.type="NONE";const I_e=UVe;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H$(e,t,n){return`firebase:${e}:${t}:${n}`}class Qb{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=H$(this.userKey,i.apiKey,s),this.fullPersistenceKey=H$("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?x1._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r="authUser"){if(!n.length)return new Qb(tp(I_e),t,r);const i=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l);let s=i[0]||tp(I_e);const o=H$(r,t.config.apiKey,t.name);let a=null;for(const l of n)try{const c=await l._get(o);if(c){const f=x1._fromJSON(t,c);l!==s&&(a=f),s=l;break}}catch{}const u=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new Qb(s,t,r):(s=u[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async l=>{if(l!==s)try{await l._remove(o)}catch{}})),new Qb(s,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O_e(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(qVe(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(VVe(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(GVe(t))return"Blackberry";if(YVe(t))return"Webos";if(Qre(t))return"Safari";if((t.includes("chrome/")||HVe(t))&&!t.includes("edge/"))return"Chrome";if(WVe(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function VVe(e=ra()){return/firefox\//i.test(e)}function Qre(e=ra()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function HVe(e=ra()){return/crios\//i.test(e)}function qVe(e=ra()){return/iemobile/i.test(e)}function WVe(e=ra()){return/android/i.test(e)}function GVe(e=ra()){return/blackberry/i.test(e)}function YVe(e=ra()){return/webos/i.test(e)}function o8(e=ra()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Kvn(e=ra()){var t;return o8(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function Xvn(){return Zdn()&&document.documentMode===10}function KVe(e=ra()){return o8(e)||WVe(e)||YVe(e)||GVe(e)||/windows phone/i.test(e)||qVe(e)}function Qvn(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XVe(e,t=[]){let n;switch(e){case"Browser":n=O_e(ra());break;case"Worker":n=`${O_e(ra())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${Kv}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jvn{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const r=s=>new Promise((o,a)=>{try{const u=t(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const r of this.queue)await r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zvn(e,t={}){return Tx(e,"GET","/v2/passwordPolicy",s8(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e_n=6;class t_n{constructor(t){var n,r,i,s;const o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:e_n,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=t.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=t.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,r,i,s,o,a;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,u),this.validatePasswordCharacterOptions(t,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(t,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=t.length>=r),i&&(n.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<t.length;i++)r=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n_n{constructor(t,n,r,i){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new P_e(this),this.idTokenSubscription=new P_e(this),this.beforeStateQueue=new Jvn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=LVe,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=tp(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Qb.create(this,t),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUser(t){var n;const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(t);(!o||o===a)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return tn(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await hM(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=Nvn()}async _delete(){this._deleted=!0}async updateCurrentUser(t){const n=t?Eo(t):null;return n&&tn(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&tn(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(t){return this.queue(async()=>{await this.assertedPersistence.setPersistence(tp(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await Zvn(this),n=new t_n(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new gx("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await Yvn(this,r)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const r=await this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&tp(t)||this._popupRedirectResolver;tn(n,this,"argument-error"),this.redirectPersistenceManager=await Qb.create(this,[tp(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(tn(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=t.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=t.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return tn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=XVe(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var t;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n!=null&&n.error&&Pvn(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function a8(e){return Eo(e)}class P_e{constructor(t){this.auth=t,this.observer=null,this.addObserver=shn(n=>this.observer=n)}get next(){return tn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r_n(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}function i_n(e){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=i=>{const s=Dd("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",r_n().appendChild(r)})}function s_n(e){return`__${e}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o_n(e,t){const n=yx(e,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(nC(s,t??{}))return i;Vp(i,"already-initialized")}return n.initialize({options:t})}function a_n(e,t){const n=(t==null?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(tp);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t==null?void 0:t.popupRedirectResolver)}function u_n(e,t,n){const r=a8(e);tn(r._canInitEmulator,r,"emulator-config-failed"),tn(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=QVe(t),{host:o,port:a}=l_n(t),u=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||c_n()}function QVe(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function l_n(e){const t=QVe(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:k_e(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:k_e(o)}}}function k_e(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function c_n(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JVe{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return ep("not implemented")}_getIdTokenResponse(t){return ep("not implemented")}_linkToIdToken(t,n){return ep("not implemented")}_getReauthenticationResolver(t){return ep("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jb(e,t){return BVe(e,"POST","/v1/accounts:signInWithIdp",s8(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f_n="http://localhost";class pv extends JVe{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new pv(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):Vp("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:i}=n,s=yK(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new pv(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(t){const n=this.buildRequest();return Jb(t,n)}_linkToIdToken(t,n){const r=this.buildRequest();return r.idToken=n,Jb(t,r)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,Jb(t,n)}buildRequest(){const t={requestUri:f_n,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=nO(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZVe{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bO extends ZVe{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm extends bO{constructor(){super("facebook.com")}static credential(t){return pv._fromParams({providerId:zm.PROVIDER_ID,signInMethod:zm.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return zm.credentialFromTaggedObject(t)}static credentialFromError(t){return zm.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return zm.credential(t.oauthAccessToken)}catch{return null}}}zm.FACEBOOK_SIGN_IN_METHOD="facebook.com";zm.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um extends bO{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return pv._fromParams({providerId:Um.PROVIDER_ID,signInMethod:Um.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Um.credentialFromTaggedObject(t)}static credentialFromError(t){return Um.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Um.credential(n,r)}catch{return null}}}Um.GOOGLE_SIGN_IN_METHOD="google.com";Um.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm extends bO{constructor(){super("github.com")}static credential(t){return pv._fromParams({providerId:Vm.PROVIDER_ID,signInMethod:Vm.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Vm.credentialFromTaggedObject(t)}static credentialFromError(t){return Vm.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Vm.credential(t.oauthAccessToken)}catch{return null}}}Vm.GITHUB_SIGN_IN_METHOD="github.com";Vm.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm extends bO{constructor(){super("twitter.com")}static credential(t,n){return pv._fromParams({providerId:Hm.PROVIDER_ID,signInMethod:Hm.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Hm.credentialFromTaggedObject(t)}static credentialFromError(t){return Hm.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Hm.credential(n,r)}catch{return null}}}Hm.TWITTER_SIGN_IN_METHOD="twitter.com";Hm.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d_n(e,t){return BVe(e,"POST","/v1/accounts:signUp",s8(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,r,i=!1){const s=await x1._fromIdTokenResponse(t,r,i),o=$_e(r);return new _0({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){await t._updateTokensIfNecessary(r,!0);const i=$_e(r);return new _0({user:t,providerId:i,_tokenResponse:r,operationType:n})}}function $_e(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h_n(e){var t;const n=a8(e);if(await n._initializationPromise,!((t=n.currentUser)===null||t===void 0)&&t.isAnonymous)return new _0({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await d_n(n,{returnSecureToken:!0}),i=await _0._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pM extends yh{constructor(t,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,pM.prototype),this.customData={appName:t.name,tenantId:(s=t.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,i){return new pM(t,n,r,i)}}function eHe(e,t,n,r){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?pM._fromErrorAndOperation(e,s,t,r):s})}async function p_n(e,t,n=!1){const r=await xC(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return _0._forOperation(e,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m_n(e,t,n=!1){const{auth:r}=e,i="reauthenticate";try{const s=await xC(e,eHe(r,i,t,e),n);tn(s.idToken,r,"internal-error");const o=Xre(s.idToken);tn(o,r,"internal-error");const{sub:a}=o;return tn(e.uid===a,r,"user-mismatch"),_0._forOperation(e,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Vp(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g_n(e,t,n=!1){const r="signIn",i=await eHe(e,r,t),s=await _0._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}function y_n(e,t,n,r){return Eo(e).onIdTokenChanged(t,n,r)}function v_n(e,t,n){return Eo(e).beforeAuthStateChanged(t,n)}const mM="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tHe{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(mM,"1"),this.storage.removeItem(mM),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __n(){const e=ra();return Qre(e)||o8(e)}const b_n=1e3,w_n=10;class nHe extends tHe{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=__n()&&Qvn(),this.fallbackToPolling=KVe(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&t(n,i,r)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((o,a,u)=>{this.notifyListeners(o,u)});return}const r=t.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(t.newValue!==o)t.newValue!==null?this.storage.setItem(r,t.newValue):this.storage.removeItem(r);else if(this.localCache[r]===t.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);Xvn()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,w_n):i()}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},b_n)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}nHe.type="LOCAL";const E_n=nHe;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rHe extends tHe{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}rHe.type="SESSION";const iHe=rHe;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x_n(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u8{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(i=>i.isListeningto(t));if(n)return n;const r=new u8(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async l=>l(n.origin,s)),u=await x_n(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}u8.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jre(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S_n{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{const l=Jre("",20);i.port1.start();const c=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const d=f;if(d.data.eventId===l)switch(d.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(d.data.response);break;default:clearTimeout(c),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ld(){return window}function T_n(e){Ld().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sHe(){return typeof Ld().WorkerGlobalScope<"u"&&typeof Ld().importScripts=="function"}async function A_n(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function C_n(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function I_n(){return sHe()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oHe="firebaseLocalStorageDb",O_n=1,gM="firebaseLocalStorage",aHe="fbase_key";class wO{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function l8(e,t){return e.transaction([gM],t?"readwrite":"readonly").objectStore(gM)}function P_n(){const e=indexedDB.deleteDatabase(oHe);return new wO(e).toPromise()}function yW(){const e=indexedDB.open(oHe,O_n);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const r=e.result;try{r.createObjectStore(gM,{keyPath:aHe})}catch(i){n(i)}}),e.addEventListener("success",async()=>{const r=e.result;r.objectStoreNames.contains(gM)?t(r):(r.close(),await P_n(),t(await yW()))})})}async function R_e(e,t,n){const r=l8(e,!0).put({[aHe]:t,value:n});return new wO(r).toPromise()}async function k_n(e,t){const n=l8(e,!1).get(t),r=await new wO(n).toPromise();return r===void 0?null:r.value}function N_e(e,t){const n=l8(e,!0).delete(t);return new wO(n).toPromise()}const $_n=800,R_n=3;class uHe{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await yW(),this.db)}async _withRetries(t){let n=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(n++>R_n)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return sHe()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=u8._getInstance(I_n()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await A_n(),!this.activeServiceWorker)return;this.sender=new S_n(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||C_n()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await yW();return await R_e(t,mM,"1"),await N_e(t,mM),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>R_e(r,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(r=>k_n(r,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>N_e(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const s=l8(i,!1).getAll();return new wO(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;for(const{fbase_key:i,value:s}of t)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),$_n)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}uHe.type="LOCAL";const N_n=uHe;new _O(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D_n(e,t){return t?tp(t):(tn(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zre extends JVe{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Jb(t,this._buildIdpRequest())}_linkToIdToken(t,n){return Jb(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return Jb(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function L_n(e){return g_n(e.auth,new Zre(e),e.bypassAuthState)}function M_n(e){const{auth:t,user:n}=e;return tn(n,t,"internal-error"),m_n(n,new Zre(e),e.bypassAuthState)}async function F_n(e){const{auth:t,user:n}=e;return tn(n,t,"internal-error"),p_n(n,new Zre(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lHe{constructor(t,n,r,i,s=!1){this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=t;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(l){this.reject(l)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return L_n;case"linkViaPopup":case"linkViaRedirect":return F_n;case"reauthViaPopup":case"reauthViaRedirect":return M_n;default:Vp(this.auth,"internal-error")}}resolve(t){Hp(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Hp(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B_n=new _O(2e3,1e4);class hb extends lHe{constructor(t,n,r,i,s){super(t,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,hb.currentPopupAction&&hb.currentPopupAction.cancel(),hb.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return tn(t,this.auth,"internal-error"),t}async onExecution(){Hp(this.filter.length===1,"Popup operations only handle one event");const t=Jre();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Dd(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Dd(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,hb.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Dd(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,B_n.get())};t()}}hb.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j_n="pendingRedirect",q$=new Map;class z_n extends lHe{constructor(t,n,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let t=q$.get(this.auth._key());if(!t){try{const r=await U_n(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(n){t=()=>Promise.reject(n)}q$.set(this.auth._key(),t)}return this.bypassAuthState||q$.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function U_n(e,t){const n=q_n(t),r=H_n(e);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function V_n(e,t){q$.set(e._key(),t)}function H_n(e){return tp(e._redirectPersistence)}function q_n(e){return H$(j_n,e.config.apiKey,e.name)}async function W_n(e,t,n=!1){const r=a8(e),i=D_n(r,t),o=await new z_n(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G_n=10*60*1e3;class Y_n{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(n=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!K_n(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var r;if(t.error&&!cHe(t)){const i=((r=t.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Dd(this.auth,i))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const r=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=G_n&&this.cachedEventUids.clear(),this.cachedEventUids.has(D_e(t))}saveEventToCache(t){this.cachedEventUids.add(D_e(t)),this.lastProcessedEventTime=Date.now()}}function D_e(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function cHe({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function K_n(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return cHe(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X_n(e,t={}){return Tx(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q_n=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,J_n=/^https?/;async function Z_n(e){if(e.config.emulator)return;const{authorizedDomains:t}=await X_n(e);for(const n of t)try{if(ebn(n))return}catch{}Vp(e,"unauthorized-domain")}function ebn(e){const t=gW(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return o.hostname===""&&r===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!J_n.test(n))return!1;if(Q_n.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tbn=new _O(3e4,6e4);function L_e(){const e=Ld().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function nbn(e){return new Promise((t,n)=>{var r,i,s;function o(){L_e(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{L_e(),n(Dd(e,"network-request-failed"))},timeout:tbn.get()})}if(!((i=(r=Ld().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)t(gapi.iframes.getContext());else if(!((s=Ld().gapi)===null||s===void 0)&&s.load)o();else{const a=s_n("iframefcb");return Ld()[a]=()=>{gapi.load?o():n(Dd(e,"network-request-failed"))},i_n(`https://apis.google.com/js/api.js?onload=${a}`).catch(u=>n(u))}}).catch(t=>{throw W$=null,t})}let W$=null;function rbn(e){return W$=W$||nbn(e),W$}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ibn=new _O(5e3,15e3),sbn="__/auth/iframe",obn="emulator/auth/iframe",abn={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ubn=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function lbn(e){const t=e.config;tn(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Kre(t,obn):`https://${e.config.authDomain}/${sbn}`,r={apiKey:t.apiKey,appName:e.name,v:Kv},i=ubn.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${nO(r).slice(1)}`}async function cbn(e){const t=await rbn(e),n=Ld().gapi;return tn(n,e,"internal-error"),t.open({where:document.body,url:lbn(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:abn,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Dd(e,"network-request-failed"),a=Ld().setTimeout(()=>{s(o)},ibn.get());function u(){Ld().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fbn={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},dbn=500,hbn=600,pbn="_blank",mbn="http://localhost";class M_e{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function gbn(e,t,n,r=dbn,i=hbn){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},fbn),{width:r.toString(),height:i.toString(),top:s,left:o}),l=ra().toLowerCase();n&&(a=HVe(l)?pbn:n),VVe(l)&&(t=t||mbn,u.scrollbars="yes");const c=Object.entries(u).reduce((d,[h,p])=>`${d}${h}=${p},`,"");if(Kvn(l)&&a!=="_self")return ybn(t||"",a),new M_e(null);const f=window.open(t||"",a,c);tn(f,e,"popup-blocked");try{f.focus()}catch{}return new M_e(f)}function ybn(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vbn="__/auth/handler",_bn="emulator/auth/handler",bbn=encodeURIComponent("fac");async function F_e(e,t,n,r,i,s){tn(e.config.authDomain,e,"auth-domain-config-required"),tn(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Kv,eventId:i};if(t instanceof ZVe){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",ihn(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[c,f]of Object.entries(s||{}))o[c]=f}if(t instanceof bO){const c=t.getScopes().filter(f=>f!=="");c.length>0&&(o.scopes=c.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const u=await e._getAppCheckToken(),l=u?`#${bbn}=${encodeURIComponent(u)}`:"";return`${wbn(e)}?${nO(a).slice(1)}${l}`}function wbn({config:e}){return e.emulator?Kre(e,_bn):`https://${e.authDomain}/${vbn}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O7="webStorageSupport";class Ebn{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=iHe,this._completeRedirectFn=W_n,this._overrideRedirectResult=V_n}async _openPopup(t,n,r,i){var s;Hp((s=this.eventManagers[t._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await F_e(t,n,r,gW(),i);return gbn(t,o,Jre())}async _openRedirect(t,n,r,i){await this._originValidation(t);const s=await F_e(t,n,r,gW(),i);return T_n(s),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Hp(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(t);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(t){const n=await cbn(t),r=new Y_n(t);return n.register("authEvent",i=>(tn(i==null?void 0:i.authEvent,t,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,r}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(O7,{type:O7},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[O7];o!==void 0&&n(!!o),Vp(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Z_n(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return KVe()||Qre()||o8()}}const xbn=Ebn;var B_e="@firebase/auth",j_e="1.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sbn{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(r=>{t((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){tn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tbn(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function Abn(e){Bp(new Zd("auth",(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;tn(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:a,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:XVe(e)},l=new n_n(r,i,s,u);return a_n(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),Bp(new Zd("auth-internal",t=>{const n=a8(t.getProvider("auth").getImmediate());return(r=>new Sbn(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),of(B_e,j_e,Tbn(e)),of(B_e,j_e,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cbn=5*60,Ibn=N7e("authIdTokenMaxAge")||Cbn;let z_e=null;const Obn=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Ibn)return;const i=n==null?void 0:n.token;z_e!==i&&(z_e=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Pbn(e=Dne()){const t=yx(e,"auth");if(t.isInitialized())return t.getImmediate();const n=o_n(e,{popupRedirectResolver:xbn,persistence:[N_n,E_n,iHe]}),r=N7e("authTokenSyncURL");if(r){const s=Obn(r);v_n(n,s,()=>s(n.currentUser)),y_n(n,o=>s(o))}const i=$7e("auth");return i&&u_n(n,`http://${i}`),n}Abn("Browser");class kbn extends I7e{constructor(){super("firebase");Ru(this,"RECAPTCHAV3TOKEN","6Lc7bbkpAAAAAMNNknzrbYvbZe-jb_QBYFvw0sbL");Ru(this,"firestore");Ru(this,"collectionPrefix","prod-");Ru(this,"studyCollection");Ru(this,"studyId","");Ru(this,"localForage",C7e.createInstance({name:"currentParticipantId"}));Ru(this,"localProvenanceCopy",{});Ru(this,"localWindowEvents",{});const n=GX.parse(`
{
  apiKey: "AIzaSyByhT_zah4R7dOM0TedU1z5RqjG5IVQHQQ",
  authDomain: "a-vlat.firebaseapp.com",
  projectId: "a-vlat",
  storageBucket: "a-vlat.appspot.com",
  messagingSenderId: "580222195540",
  appId: "1:580222195540:web:9cba44b93095c28ddd9ac1",
  measurementId: "G-M1J7YP75K2"
}
`),r=M7e(n);this.firestore=x1n(r,{});try{Tvn(r,{provider:new Gre(this.RECAPTCHAV3TOKEN),isTokenAutoRefreshEnabled:!1})}catch{console.warn("Failed to initialize Firebase App Check")}}async connect(){try{const n=Pbn();if(await h_n(n),!n.currentUser)throw new Error("Login failed with firebase");await S1n(this.firestore);const r=await Lf(this.firestore,".info/connected");await wk(r),this.connected=!0}catch{console.warn("Failed to connect to Firebase")}}async initializeStudyDb(n,r){const i=await Gb(JSON.stringify(r));this.studyCollection=A7(this.firestore,`${this.collectionPrefix}${n}`),this.studyId=n;const s=Lf(this.studyCollection,"configs"),o=A7(s,"configs"),a=Lf(o,i);return await DS(a,r)}async initializeParticipantSession(n,r,i){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(i),!this.currentParticipantId)throw new Error("Participant not initialized");const s=Lf(this.studyCollection,this.currentParticipantId),o=(await wk(s)).data();if(this.localProvenanceCopy=await this._getFromFirebaseStorage(this.currentParticipantId,"provenance"),this.localWindowEvents=await this._getFromFirebaseStorage(this.currentParticipantId,"windowEvents"),Object.entries(this.localWindowEvents).forEach(([l,c])=>{o!==null&&(c===void 0||c.length===0?o.answers[l].windowEvents=[]:o.answers[l].windowEvents=c)}),o)return o;const a=await Gb(JSON.stringify(r)),u={participantId:this.currentParticipantId,participantConfigHash:a,sequence:await this.getSequence(),answers:{},searchParams:n};return await DS(s,u),u}async getCurrentParticipantId(n){const r=await this.localForage.getItem("currentParticipantId");if(n)return this.currentParticipantId=n,await this.localForage.setItem("currentParticipantId",n),n;if(r)return this.currentParticipantId=r,r;if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const i=Lf(this.studyCollection);return this.currentParticipantId=i.id,await this.localForage.setItem("currentParticipantId",this.currentParticipantId),this.currentParticipantId}async clearCurrentParticipantId(){return await this.localForage.removeItem("currentParticipantId")}async saveAnswer(n,r){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const i=Lf(this.studyCollection,this.currentParticipantId),s={answer:r.answer,startTime:r.startTime,endTime:r.endTime};await DS(i,{answers:{[n]:s}},{merge:!0}),r.provenanceGraph&&(this.localProvenanceCopy[n]=r.provenanceGraph,await this._pushToFirebaseStorage(this.currentParticipantId,"provenance",this.localProvenanceCopy)),this.localWindowEvents[n]=r.windowEvents,await this._pushToFirebaseStorage(this.currentParticipantId,"windowEvents",this.localWindowEvents)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");this._pushToFirebaseStorage("","sequenceArray",{sequenceArray:n})}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");return(await this._getFromFirebaseStorage("","sequenceArray")).sequenceArray}async getSequence(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const n=await this.getSequenceArray();if(!n)throw new Error("Latin square not initialized");const r=Lf(this.studyCollection,"sequenceAssignment"),i=A7(r,"sequenceAssignment"),s=Lf(i,this.currentParticipantId);await DS(s,{participantId:this.currentParticipantId,timestamp:V1n()});const o=D1n(i,L1n("timestamp","asc")),l=(await __e(o)).docs.map(f=>f.data()).findIndex(f=>f.participantId===this.currentParticipantId),c=n[l%n.length];if(!c)throw new Error("Latin square is empty");return c}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=await __e(this.studyCollection),r=[],i=n.docs.map(async s=>{if(s.id==="config"||s.id==="sequenceArray")return;const o=s.data(),a=await this._getFromFirebaseStorage(o.participantId,"provenance"),u=await this._getFromFirebaseStorage(o.participantId,"windowEvents");o.answers=Object.fromEntries(Object.entries(o.answers).map(([l,c])=>{if(c===void 0)return[l,c];const f=a[l],d=u[l];return[l,{...c,provenanceGraph:f,windowEvents:d}]})),r.push(o)});return await Promise.all(i),r}async getParticipantData(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");await this.getCurrentParticipantId();let n=null;if(this.currentParticipantId!==null){const r=Lf(this.studyCollection,this.currentParticipantId);if(n=(await wk(r)).data(),n!==null){const i=await this._getFromFirebaseStorage(this.currentParticipantId,"provenance"),s=await this._getFromFirebaseStorage(this.currentParticipantId,"windowEvents");Object.entries(n.answers).forEach(([o,a])=>{a!==void 0&&(a.provenanceGraph=i[o],a.windowEvents=s[o])})}}return n}async nextParticipant(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const r=Lf(this.studyCollection),i=r.id;await this.localForage.setItem("currentParticipantId",i),this.currentParticipantId=i;let s=null;if(this.currentParticipantId!==null&&(s=(await wk(r)).data()),!s){const o=await Gb(JSON.stringify(n)),a={participantId:i,participantConfigHash:o,sequence:await this.getSequence(),answers:{},searchParams:{}};await DS(r,a),s=a}return s}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");return Ug(n.sequence).every((i,s)=>i==="end"?!0:n.answers[`${i}_${s}`]!==void 0)}_verifyStudyDatabase(n){return n!==void 0}async _getFromFirebaseStorage(n,r){const i=Eve(),s=wve(i,`${this.studyId}/${n}_${r}`);let o={};try{const a=await Omn(s),l=await(await fetch(a)).text();o=JSON.parse(l)}catch{console.warn(`${n} does not have ${r} for ${this.studyId}.`)}return o}async _pushToFirebaseStorage(n,r,i={}){if(Object.keys(i).length>0){const s=Eve(),o=wve(s,`${this.studyId}/${n}_${r}`),a=new Blob([JSON.stringify(i)],{type:"application/json"});await Imn(o,a)}}}async function fHe(){let e,t=!1;{const n=new kbn;await n.connect(),n.isConnected()?e=n:t=!0}if(t){const n=new zdn;await n.connect(),e=n}return e}function $bn(e){const{globalConfig:t}=e,[n,r]=A.useState(!1),[i,s]=A.useState({}),[o,a]=A.useState({});return A.useEffect(()=>{(async()=>{r(!0);const l={},c={},f=async h=>{const p=await fHe(),m=await T3e(h,t);m!==null&&(await p.initializeStudyDb(h,m),l[h]=await p.getAllParticipantsData(),c[h]=m)};await(async()=>{const h=t.configsList.map(p=>f(p));try{await Promise.all(h),s(l),a(c)}catch(p){console.error("Error fetching data:",p)}finally{r(!1)}})()})()},[]),R.jsxs(At,{children:[R.jsx(Mc,{mb:20,order:4,children:"Your Studies:"}),R.jsxs(Gu,{children:[t.configsList.map(u=>i[u]&&R.jsx(Gu.Col,{md:12,xl:6,children:R.jsx(Ddn,{studyId:u,allParticipants:i[u],config:o[u]})},`${u}-panel`)),R.jsx(O2e,{visible:n,zIndex:1e3,overlayBlur:2})]})]})}function Rbn(e){const{page:t}=LM();return R.jsxs(OG,{children:[R.jsx(BFt,{}),R.jsx(jFt,{}),t==="dashboard"&&R.jsx(i6,{fluid:!0,children:R.jsx($bn,{globalConfig:e.globalConfig})})]})}async function Nbn(){const t=await(await fetch(`${vf}global.json`)).text();return yFt(t)}async function Dbn(e){const t={},n=e.configsList.map(i=>`${vf}${e.configs[i].path}`),r=await Promise.all(n.map(i=>fetch(i))).then(i=>Promise.all(i.map(s=>s.text()))).then(i=>Promise.all(i.map((s,o)=>g3e(s,e.configsList[o]))));return e.configsList.forEach((i,s)=>{t[i]=r[s]}),t}function Lbn(){const[e,t]=A.useState(null),[n,r]=A.useState({});return A.useEffect(()=>{async function i(){e&&r(await Dbn(e))}i()},[e]),A.useEffect(()=>{e||Nbn().then(i=>{t(i)})},[e]),e?R.jsx(GGe,{basename:vf,children:R.jsxs(qGe,{children:[R.jsx(Mk,{path:"/",element:R.jsx(lft,{globalConfig:e,studyConfigs:n})}),R.jsx(Mk,{path:"/:studyId/*",element:R.jsx(FFt,{globalConfig:e})}),R.jsx(Mk,{path:"/analysis/:page",element:R.jsx(Rbn,{globalConfig:e})})]})}):null}function Mbn(){const{storageEngine:e,setStorageEngine:t}=x0();return A.useEffect(()=>{if(e!==void 0)return;async function n(){const r=await fHe();t(r)}n()},[t,e]),R.jsx(Lbn,{})}P7.createRoot(document.getElementById("root")).render(R.jsx(L.StrictMode,{children:R.jsx(GWe,{children:R.jsx(Mbn,{})})}))});export default Fbn();
